!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).axis3d=e()}}(function(){return function e(t,r,n){function i(a,u){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./orthographic");Object.defineProperty(r,"OrthographicCamera",{enumerable:!0,get:function(){return n.OrthographicCamera}});var i=e("./perspective");Object.defineProperty(r,"PerspectiveCamera",{enumerable:!0,get:function(){return i.PerspectiveCamera}})},{"./orthographic":2,"./perspective":3}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.OrthographicCameraContext=r.OrthographicCamera=r.kDefaultCameraNear=r.kDefaultCameraFar=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=e("../core/camera"),h=(e("../utils"),n(e("orthographic-camera"))),p=n(e("defined")),d=(e("gl-vec4"),r.kDefaultCameraFar=1e3),g=r.kDefaultCameraNear=.1,y=(r.OrthographicCamera=function(e){function t(e,r){o(this,t);var n=new y(e,l({},r));return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l({},r,{context:n})))}return u(t,e),t}(f.Camera),r.OrthographicCameraContext=function(e){function t(e,r){o(this,t);var n=(0,p.default)(r.far,d),u=(0,p.default)(r.near,g),s=(0,h.default)({position:[].concat(i(r.position||[0,0,0])),near:u,far:n});return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l({},r,{controller:s})))}return u(t,e),c(t,[{key:"updateCameraViewport",value:function(e){var t=e.viewportWidth,r=e.viewportHeight,n=e.viewport,i=void 0===n?this.initialViewport:n,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,a=void 0===o?i:o;Object.assign(this.controller.viewport,a||[-t,-r,t,r])}}]),t}(f.CameraContext))},{"../core/camera":4,"../utils":58,defined:148,"gl-vec4":302,"orthographic-camera":355}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.PerspectiveCameraContext=r.PerspectiveCamera=r.kDefaultCameraFieldOfView=r.kDefaultCameraNear=r.kDefaultCameraFar=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=e("../core/camera"),p=e("../utils"),d=n(e("perspective-camera")),g=n(e("defined")),y=r.kDefaultCameraFar=1e3,m=r.kDefaultCameraNear=.01,M=r.kDefaultCameraFieldOfView=(0,p.radians)(60),v=(r.PerspectiveCamera=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=new v(e,r);return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},r,{context:n})))}return u(t,e),t}(h.Camera),r.PerspectiveCameraContext=function(e){function t(e,r){o(this,t);var n=(0,g.default)(r.fov,r.fieldOfView,M),u=(0,g.default)(r.far,y),s=(0,g.default)(r.near,m),c=(0,d.default)({direction:[].concat(i(r.direction||[0,0,-1])),position:[].concat(i(r.position||[0,0,0])),near:s,fov:n,far:u}),l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},r,{controller:c})));return l.fov=function(){return l.updateCameraController.apply(l,arguments),l.controller.fov},l}return u(t,e),c(t,[{key:"updateCameraController",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fov,r=void 0===e?this.controller.fov:e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fov,i=void 0===n?r:n;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateCameraController",this).apply(this,arguments),i&&this.controller.fov!=i&&(this.controller.fov=i),this.controller.update()}}]),t}(h.CameraContext))},{"../core/camera":4,"../utils":58,defined:148,"perspective-camera":360}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.CameraUniforms=r.CameraContext=r.Camera=void 0;var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=e("../core/object3d"),p=e("../math"),d=e("./types"),g=e("../stats"),y=n(e("eye-vector")),m=n(e("defined")),M=n(e("gl-mat4")),v=n(e("gl-vec3")),b=n(e("gl-quat")),w=new p.Quaternion,x=M.default.identity([]),D=(r.Camera=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var n=r.context,i=void 0===n?new D(e,r):n,s=r.uniforms,c=void 0===s?new j(e,r):s,l=e.regl({context:i,uniforms:c}),h=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},r,{update:function(e,t,r){o(e),l(t,r)}})));return(0,g.registerStat)("Camera"),(0,d.assignTypeName)(h,"camera"),h}return s(t,e),t}(h.Object3D),r.CameraContext=function(e){function t(e,r){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},r,{computeTransformMatrix:!1,computeLocalMatrix:!1}))),i=r.initialTarget,s=void 0===i?new p.Vector3(0,0,0):i,c=r.controller;if(null==c)throw TypeError("CameraContext expects a controller.");var l=M.default.identity([]),h=new p.Vector3(0,0,0);return Object.defineProperties(n,{initialViewport:{get:function(){return r.viewport},enumerable:!1},initialTarget:{get:function(){return s},enumerable:!1},viewMatrix:{get:function(){return l},enumerable:!1},controller:{get:function(){return c},enumerable:!1}}),n.aspect=function(e){return e.viewportWidth/e.viewportHeight},n.projection=function(){return n.updateCameraController.apply(n,arguments),c.projection.slice()},n.view=function(){return n.computeViewMatrix.apply(n,arguments)},n.direction=function(){return n.updateCameraController.apply(n,arguments),c.direction},n.target=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target;return o(e),(0,m.default)(t,s)},n.near=function(){return n.updateCameraController.apply(n,arguments),c.near},n.far=function(){return n.updateCameraController.apply(n,arguments),c.far},n.eye=function(){return(0,y.default)(l,h),h},n.up=function(){return n.updateCameraController.apply(n,arguments),c.up},n.createPickingRay=function(e){var t=e.viewportHeight,r=0,n=0;return function(e){return e(function(e){var i=e.currentX,o=e.currentY;r=i,n=t-o}),c.createPickingRay([r,n])}},n.viewport=function(e,t){return o(e),t=t||{},(0,m.default)(t.viewport,r.viewport,null)},n}return s(t,e),l(t,[{key:"computeViewMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.position,n=void 0===r?this.initialPosition:r,i=t.rotation,a=void 0===i?this.initialRotation:i,u=t.target,s=void 0===u?this.initialTarget:u,c=t.scale,l=void 0===c?this.initialScale:c;if(o(e),this.updateCameraController.apply(this,arguments),this.updateCameraViewport.apply(this,arguments),n&&a&&l){var f=(this.localMatrix,this.viewMatrix),h=this.controller;return h.identity(),h.translate(n),h.lookAt(v.default.multiply([],s,l)),h.update(),b.default.normalize(w,a),M.default.copy(f,h.view),M.default.fromQuat(x,w),M.default.multiply(f,f,x),f}}},{key:"updateCameraController",value:function(e){var t=e.near,r=void 0===t?this.controller.near:t,n=e.far,i=void 0===n?this.controller.far:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.near,u=void 0===a?r:a,s=o.far,c=void 0===s?i:s,l=!1;c&&this.controller.far!=c&&(this.controller.far=c,l=!0),u&&this.controller.near!=u&&(this.controller.near=u,l=!0),l&&this.controller.update()}},{key:"updateCameraViewport",value:function(e){var t=e.viewportTop,r=void 0===t?-1:t,n=e.viewportLeft,i=void 0===n?-1:n,o=e.viewportWidth,a=e.viewportHeight,u=e.viewport,s=void 0===u?null:u,c=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,l=void 0===c?s:c;Object.assign(this.controller.viewport,l||[i,r,o,a])}}]),t}(h.Object3DContext)),j=r.CameraUniforms=function e(t,r){a(this,e),this["camera.projection"]=function(e){return e.projection},this["camera.aspect"]=function(e){return e.aspect},this["camera.view"]=function(e){return e.view},this["camera.eye"]=function(e){return[].concat(i(e.eye))}}},{"../core/object3d":15,"../math":49,"../stats":57,"./types":19,defined:148,"eye-vector":157,"gl-mat4":190,"gl-quat":215,"gl-vec3":272}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){for(;r.length<t;)r=""+e+r;return r}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Color=void 0;var l="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./vector_swizzle_map")),d=e("./types"),g=e("../utils"),y=(e("./command"),e("../math")),m=n(e("color-string")),M=n(e("color-space")),v=n(e("clamp"));r.Color=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,0,0,0));(0,d.assignTypeName)(e,"color");for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.set(n),e}return u(t,e),f(t,[{key:"onchange",value:function(e,t){var r=this.elements;3==e?r[e]=(0,v.default)(t,0,1):t>255?r[e]=1:t>1?r[e]=t/255:t<0&&(r[e]=0)}},{key:"set",value:function(){for(var e,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return 1==n.length&&(n=n[0]),n=t.parseInput(n),n?(e=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this)).call.apply(e,[this].concat(i(n))):this}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex",t=arguments[1];"hex"==e&&(t=!0);var r=this.toArray(t);return"name"==e&&(e="keyword"),m.default.to[e](r)}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toArray",this).call(this);if(e)for(var n=0;n<3;++n)r[n]*=255,r[n]|=0;return[].concat(i(r))}},{key:"valueOf",value:function(){var e=this.toString("hex",!0).replace("#","");return e=s(0,6,e),Function("return 0x"+e)()}}],[{key:"swizzles",value:function(){return p.Color}},{key:"parseInput",value:function(e){if((0,g.isArrayLike)(e)&&1==e.length&&(e=e[0]),"string"==typeof e?e=t.parseString(e):"number"==typeof e&&(e=t.parseInt(e)),null==e)return null;var r=e[3]||0;if(e&&"object"==(void 0===e?"undefined":l(e)))if("rgb"==e.model)e=e.value,r=e[3];else if(r=e.value?e.value[3]:e[3],M.default[e.model])try{e=M.default[e.model].rgb(e.value)}catch(e){console.warn("Color conversation failed",e)}return[].concat(i([].concat(i(e)).slice(0,3)),[r||1])}},{key:"parseString",value:function(e){return"string"==typeof e?m.default.get(e.replace(/\s+/g,""))||null:null}},{key:"parseInt",value:function(e){if("number"==typeof e){var r=t.parseString("#"+s(0,6,e.toString("16")));if(r)return r;if(r=t.parseString("rgba("+(0,v.default)(e>>24&255,0,255)+","+(0,v.default)(e>>16&255,0,255)+","+(0,v.default)(e>>8&255,0,255)+","+(0,v.default)(255&e,0,1)+")"))return r}return null}}]),t}(y.Vector4)},{"../math":49,"../utils":58,"./command":6,"./types":19,"./vector_swizzle_map":21,clamp:100,"color-space":115,"color-string":139}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Command=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./types"),c=0;r.Command=function(e){function t(e){var r;if(n(this,t),"function"!=typeof e)throw new TypeError("Command constructor expects a function.");var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.codegen(function(e){return e.apply(e,Array.prototype.slice.call(arguments,1))}))),a=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.apply(void 0,[e].concat(r))},u=t.id();return(0,s.assignTypeName)(a,"command"),(0,s.assignTypeName)(o,"command"),o.constructor=a.constructor=t,r=Object.assign(a,{this:o,id:u}),i(o,r)}return o(t,e),u(t,null,[{key:"id",value:function(){return c++}},{key:"count",value:function(){return c}},{key:"codegen",value:function(e){if("function"!=typeof e)throw new TypeError("Expecting a function.");return"return ("+String(e)+").apply(this, arguments);"}}]),t}(Function)},{"./types":19}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Context=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("./types"),h=e("../stats"),p=e("events"),d=n(e("defined")),g=n(e("global/window")),y=n(e("dom-events")),m=(e("glslify"),n(e("regl")));r.Context=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.default;o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.setMaxListeners(1/0),(0,h.registerStat)("Context"),(0,f.assignTypeName)(n,"context"),n._hasFocus=!1,n._reglContext=null,e.regl=(0,d.default)(e.regl,e.gl||{}),e.element&&"CANVAS"==e.element.nodeName?e.regl.canvas=e.element:e.element&&e.element.nodeName?e.regl.container=e.element:"string"==typeof e.element&&(e.regl.container=e.element),r(c({},e.regl,{attributes:c({},e.regl.attributes||{}),extensions:[].concat(i(e.regl.extensions||[]),["OES_texture_float"]),optionalExtensions:[].concat(i(e.regl.optionalExtensions||[])),onDone:function(e,t){if(e)return n.emit("error",e);n._regl=t,n._domElement=n._regl._gl.canvas,n._isDestroyed=!1}}));var u=function(){n.blur()},s=function(){n.focus()},l=function(){n.blur()},p=function(e){e.target==n._domElement?n.focus():n.blur()};return y.default.on(n._domElement,"focus",s),y.default.on(n._domElement,"blur",u),y.default.on(g.default,"blur",function(){return l}),y.default.on(document,"mousedown",p),y.default.on(document,"touchstart",p),n.once("beforedestroy",function(){y.default.off(n._domElement,"focus",s),y.default.off(n._domElement,"blur",u),y.default.off(g.default,"blur",l),y.default.off(document,"mousedown",p),y.default.off(document,"touchstart",p)}),n}return u(t,e),l(t,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"destroy",value:function(){return this.emit("beforedestroy"),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._hasFocus=!1,this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._domElement,delete this._reglContext,this.emit("destroy"),this}},{key:"refresh",value:function(){return this._regl&&"function"==typeof this._regl._refresh&&this._regl.refresh(),this}},{key:"reglContext",get:function(){return this._reglContext||null}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl._gl||null}}]),t}(p.EventEmitter)},{"../stats":57,"./types":19,defined:148,"dom-events":149,events:153,"global/window":320,glslify:331,regl:399}],8:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.FrameState=r.FrameUniforms=r.FrameContext=r.Frame=r.kDefaultFrameClearState=r.kDefaultFrameDepthState=r.kDefaultFrameCullingState=r.kDefaultFrameBlendingState=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("./material"),l=e("../stats"),f=e("./types"),h=e("./command"),p=(e("../utils"),e("./color"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined"))),d=r.kDefaultFrameBlendingState=Object.seal({equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}}),g=r.kDefaultFrameCullingState=Object.seal({enable:!0,face:"back"}),y=r.kDefaultFrameDepthState=Object.seal({enable:!0,range:[0,1],func:"less",mask:!0}),m=r.kDefaultFrameClearState=Object.seal({color:[17/255,17/255,17/255,1],depth:1}),M=(r.Frame=function(e){function t(e){function r(e){return c.init(p).enqueue(e),function(){c.cancelFrame()}}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));(0,l.incrementStat)("Frame"),(0,f.assignTypeName)(a,"frame");var u=new v(e,o.uniforms||{}),c=new M(e,o.context||{}),h=new b(e,o.state||{}),p=e.regl(s({uniforms:u,context:c},h));return a}return o(t,e),t}(h.Command),r.FrameContext=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),Object.assign(this,i);var o=s({},m,i.clear),a=[],u=[];Object.defineProperties(this,{reglContext:{enumerable:!1,writable:!0,value:null},isCancelled:{enumerable:!1,writable:!0,value:!1},clearState:{get:function(){return o},enumerable:!1},queue:{get:function(){return u},enumerable:!1},loop:{enumerable:!1,writable:!0,value:null},ctx:{get:function(){return t},enumerable:!1}}),this.lights=function(){return a},this.cancel=function(){return function(){r.cancelFrame.apply(r,arguments)}},this.clear=function(){return function(){r.clearBuffers.apply(r,arguments)}},this.regl=function(){return t.regl},this.gl=function(){return t.gl}}return u(e,[{key:"enqueue",value:function(e){return this.queue.push(e),this}},{key:"dequeue",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,u=this.queue[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;"function"==typeof s&&s.apply(void 0,[this.reglContext].concat(t))}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return this}},{key:"init",value:function(e){var t=this;return(this.isCancelled||null==this.loop)&&(this.isCancelled=!1,this.loop=this.ctx.regl.frame(function(){e(function(){(0,l.registerStat)("Frame refresh");try{t.onrefresh.apply(t,arguments)}catch(e){t.cancelFrame(),t.ctx.emit("error",e)}})})),this}},{key:"cancelFrame",value:function(){this.loop&&(this.queue.splice(0,-1),this.loop.cancel(),this.ctx._reglContext=this.reglContext=this.loop=null)}},{key:"clearBuffers",value:function(e){this.ctx.regl.clear(s({},this.clearState,e))}},{key:"onrefresh",value:function(e){this.reglContext=e,this.ctx._reglContext=e,this.clearBuffers(),e.lights.splice(0,e.lights.length);for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.dequeue.apply(this,r)}}]),e}()),v=r.FrameUniforms=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),Object.assign(this,r),this.time=function(e){return e.time},this.tick=function(e){return e.tick}},b=r.FrameState=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),Object.assign(this,s({},r)),delete this.blending,delete this.culling,this.frag=(0,p.default)(r.frag,r.fragmentShader,c.kDefaultMaterialFragmentShader),this.blend=s({},d,r.blend||r.blending),this.cull=s({},g,r.cull||r.culling),this.depth=s({},y,r.depth);for(var i in this)null==this[i]&&delete this[i]}},{"../stats":57,"../utils":58,"./color":5,"./command":6,"./material":13,"./types":19,defined:148}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Geometry=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../math"),s=e("./types"),c=n(e("bound-points")),l=(e("screen-projected-lines"),n(e("mesh-reindex"))),f=n(e("unindex-mesh")),h=n(e("normals"));r.Geometry=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.complex,n=void 0===r?null:r,i=t.flatten,a=void 0!==i&&i;o(this,e),(0,s.assignTypeName)(this,"geometry"),Object.defineProperty(this,"_complex",{enumerable:!1,writable:!1,value:{}}),this.flatten=a,this.complex=n||null}return a(e,[{key:"computeBoundingBox",value:function(){return(0,c.default)(this.positions).map(function(e){switch(e.length){case 3:return new(Function.prototype.bind.apply(u.Vector3,[null].concat(i(e))));case 2:return new(Function.prototype.bind.apply(u.Vector2,[null].concat(i(e))))}})}},{key:"complex",set:function(t){if(t instanceof e&&(t=t.complex),t){if(this.flatten&&t.cells){var r=t.cells.map(function(e){return e.slice()}),n=(0,l.default)((0,f.default)(t.positions,r));try{t.normals=h.default.vertexNormals(n.cells,n.positions)}catch(e){console.warn("Unable to compute vertex normals.")}Object.assign(t,n)}if(null==t.normals&&t.positions&&t.cells)try{t.normals=h.default.vertexNormals(t.cells,t.positions)}catch(e){console.warn("Unable to compute vertex normals.")}}return Object.assign(this._complex,t),t},get:function(){return this._complex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),e}()},{"../math":49,"./types":19,"bound-points":79,"mesh-reindex":343,normals:354,"screen-projected-lines":408,"unindex-mesh":427}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./geometry");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./object3d");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./command");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./texture");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./context");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./material");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var c=e("./camera");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})});var l=e("./stream");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})});var f=e("./frame");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})});var h=e("./light");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}})});var p=e("./color");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})});var d=e("./input");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})});var g=e("./mesh");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return g[e]}})});var y=e("./text");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})})},{"./camera":4,"./color":5,"./command":6,"./context":7,"./frame":8,"./geometry":9,"./input":11,"./light":12,"./material":13,"./mesh":14,"./object3d":15,"./stream":16,"./text":17,"./texture":18}],11:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.InputContext=r.Input=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("./stream"),l=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),f=(r.Input=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var n=r.context,a=void 0===n?new f(e,r):n,u=r.init,c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({context:a},r)));return"function"==typeof u&&u(e,s({},r,{context:a,stream:a.stream})),c}return a(t,e),t}(c.Stream),r.InputContext=function(e){function t(e){function r(e){return h=null==e?null:f.reduce(function(t,r){return s({},t,n({},r,e[r]))},{})}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({transform:r},a))),c=a.props,f=void 0===c?[]:c,h=null,p=!0,d=!1,g=void 0;try{for(var y,m=f[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)!function(){var e=y.value;u[e]=function(){return h?(0,l.default)(h[e],void 0):void 0}}()}catch(e){d=!0,g=e}finally{try{!p&&m.return&&m.return()}finally{if(d)throw g}}return u}return a(t,e),t}(c.StreamContext))},{"./stream":16,defined:148}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.LightContext=r.Light=r.kDefaultLighType=r.kDefaultLightColor=r.kDefaultLightRadius=r.kDefaultLightAmbient=r.kDefaultLightRotation=r.kDefaultLightPosition=r.kDefaultLightIntensity=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("./object3d"),p=e("../math"),d=e("./types"),g=e("../stats"),y=e("../light/types"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),M=e("./color"),v=(e("./mesh"),n(e("defined"))),b=n(e("gl-vec3")),w=n(e("gl-mat4")).default.identity([]),x=0,D=r.kDefaultLightIntensity=10,j=r.kDefaultLightPosition=new p.Vector3(0,0,0),N=(r.kDefaultLightRotation=new p.Quaternion,r.kDefaultLightAmbient=.1),A=r.kDefaultLightRadius=50,L=r.kDefaultLightColor=new M.Color("white"),T=r.kDefaultLighType=y.BasicLightType,E=(r.Light=function(e){function t(e){function r(e,r,n){var a=e.transform,u=void 0===a?w:a,s=e.position,c=void 0===s?p:s,l=e.lights,h=r.intensity,d=void 0===h?f:h,g=(r.rotation,r.ambient),m=void 0===g?M:g,x=r.visible,D=void 0===x?I:x,j=r.radius,N=void 0===j?_:j,A=r.color,L=void 0===A?C:A,T=r.type,E=void 0===T?k:T,O=r.transform,S=void 0===O?u:O,z=r.position,Q=void 0===z?c:z,B=r.lights,Y=void 0===B?l:B,R={},F=0;switch(E||k){case y.DirectionalLightType:F=1;break;case y.PointLightType:F=0}Object.assign(R,{typeName:t.typeName(E),intensity:(0,v.default)(d,f),position:[].concat(i((0,v.default)(Q,p)),[F]),ambient:(0,v.default)(m,M),visible:(0,v.default)(D,I),radius:(0,v.default)(N,_),color:(0,v.default)(L,[].concat(i(C))),type:(0,v.default)(E,k)}),b.default.transformMat4(R.position,R.position,S),Y.push(R),U(arguments[1]||{},function(e,t){o(e),P(t||{},function(){n.apply(void 0,arguments)})})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var s=e.regl,c=n.intensity,f=void 0===c?D:c,h=n.position,p=void 0===h?j:h,m=(n.rotation,n.ambient),M=void 0===m?N:m,x=n.visible,I=void 0===x||x,O=n.radius,_=void 0===O?A:O,S=n.color,C=void 0===S?L:S,z=n.type,k=void 0===z?T:z,P=(void 0===n.id&&t.id(),n.update||function(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,arguments[1])()}),Q=n.context,U=s({context:void 0===Q?new E:Q}),B=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l({},n,{update:r})));return(0,g.incrementStat)("Light"),(0,d.assignTypeName)(B,"light"),B}return s(t,e),f(t,null,[{key:"id",value:function(){return x++}},{key:"typeName",value:function(e){return(0,v.default)(Object.keys(m).find(function(t){return e==m[t]}),e)}}]),t}(h.Object3D),r.LightContext=function(e){function t(e,r){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return s(t,e),t}(h.Object3DContext))},{"../light/types":42,"../math":49,"../stats":57,"./color":5,"./mesh":14,"./object3d":15,"./types":19,defined:148,"gl-mat4":190,"gl-vec3":272}],13:[function(e,t,r){"use strict";function n(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.MaterialMap=r.MaterialUniforms=r.MaterialContext=r.MaterialState=r.Material=r.kDefaultMaterialDepthState=r.kDefaultMaterialCullingState=r.kDefaultMaterialBlendingState=r.kDefaultMaterialType=r.kDefaultMaterialColor=r.kDefaultMaterialOpacity=r.kDefaultMaterialFragmentShader=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("../utils"),h=e("./types"),p=e("../stats"),d=e("./command"),g=(e("./texture"),e("./color")),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../material/types")),m=e("../light/limits"),M=(e("glsl-inject-defines"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined"))),v=(e("glslify"),e("gl-vec4"),109),b=r.kDefaultMaterialFragmentShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n};\n\n/**\n * Module dependencies.\n */\n\nstruct DirectionalLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n/**\n * Module exports.\n */\n\n// @TODO(werle) inject these defines at runtime\n#ifndef MAX_SPOT_LIGHTS\n#define MAX_SPOT_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n/**\n * The SpotLightsContext structure encapsulates all known\n * SpotLights for a shader program. The total count and pointers\n * toall SpotLights are in this structure.\n */\n\n// @TODO(werle) - implement this\n//struct SpotLightsContext {\n  //int count;\n  //SpotLight lights[MAX_SPOT_LIGHTS];\n//};\n\n/**\n * The DirectionalLightsContext structure encapsulates all known\n * DirectionalLights for a shader program. The total count and pointers\n * toall DirectionalLights are in this structure.\n */\n\nstruct DirectionalLightsContext {\n  int count;\n  DirectionalLight lights[MAX_DIRECTIONAL_LIGHTS];\n};\n\n/**\n * The AmbientLightsContext structure encapsulates all known\n * AmbientLights for a shader program. The total count and pointers\n * toall AmbientLights are in this structure.\n */\n\nstruct AmbientLightsContext {\n  int count;\n  AmbientLight lights[MAX_AMBIENT_LIGHTS];\n};\n\n/**\n * The PointLightsContext structure encapsulates all known\n * PointLights for a shader program. The total count and pointers\n * toall PointLights are in this structure.\n */\n\nstruct PointLightsContext {\n  int count;\n  PointLight lights[MAX_POINT_LIGHTS];\n};\n\n/**\n * The LightContext structure encapsulates all possible lights by\n * providing light contexts for ambient, directional, point, and\n * spot light types.\n */\n\nstruct LightContext {\n  DirectionalLightsContext directional;\n  AmbientLightsContext ambient;\n  PointLightsContext point;\n};\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\nstruct Material {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE Material\n#endif\n\n// default material\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader uniforms.\n//\nuniform MATERIAL_TYPE material;\nuniform LightContext lightContext;\nuniform Camera camera;\n\n#ifdef HAS_MAP\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\nuniform Map map;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\nstruct PositionedLight {\n  vec4 position;\n  vec4 color;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// unpack\n\nPositionedLight unpack_1(DirectionalLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight unpack_0(PointLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\n//compute\n/**\n * Module dependencies.\n */\n\n/**\n * Module exports.\n */\n\n/**\n * Computes a positioned light source attenuation for a given\n * direction vector.\n * Adapted from {@link https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl}\n */\n\nfloat computeAttenuation(PositionedLight light, vec3 direction) {\n  float attenuation;\n  if (0.0 == light.position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(\n      clamp(1.0 - length(direction)/light.radius, 0.0, 1.0),\n      2.0);\n  }\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 compute(vec4 lightPosition, vec3 position) {\n  if (lightPosition.w == 0.0) {\n    return normalize(lightPosition.xyz);\n  } else {\n    return lightPosition.xyz - position;\n  }\n}\n\n/**\n * Module dependencies.\n */\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n/**\n * Module exports.\n */\n\n/**\n * Computes the diffuse intensity value relative to a given positioned\n * light source and a geometry with a given direction.\n */\n\nfloat computeDiffuseFromGeometryWithDirection(PositionedLight light,\n                                              GeometryContext geometry,\n                                              Camera camera,\n                                              LambertMaterial material,\n                                              vec3 direction)\n{\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  float diffuse = orenNayarDiffuse(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.roughness,\n      material.albedo);\n\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  return diffuse;\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\n\nvoid applyPositionedLight_0(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 direction = compute(light.position, geometry.position);\n  float attenuation = computeAttenuation(light, direction);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   material,\n                   direction);\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n    ambient\n  + attenuation\n  + combined\n  ;\n}\n\n// adapted from https://github.com/freeman-lab/gl-lambert-material/blob/master/fragment.glsl\nvoid main_0() {\n  GeometryContext geometry_0 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_0.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_1(light),\n                           geometry_0,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_0(light),\n                           geometry_0,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n// unpack\n\n// utils\n\n#define toLambertMaterial(m) LambertMaterial(m.emissive, m.ambient, m.color, m.roughness, m.opacity, m.albedo, m.type)\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\n\nvoid applyPositionedLight_1(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 specular = vec3(0.0);\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  vec3 direction = compute(light.position, geometry.position);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   toLambertMaterial(material),\n                   direction);\n\n  if (material.shininess > 0.0 || material.shininess < 0.0) {\n    float power =\n      blinnPhongSpecular(normalize(direction),\n            viewpoint,\n            geometry.normal,\n            material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n     ambient\n   + combined\n   + specular\n   ;\n}\n\nvoid main_1() {\n  GeometryContext geometry_1 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_1.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_1(light),\n                           geometry_1,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_0(light),\n                           geometry_1,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Flat shading model.\n//\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n//\n// Shader entry.\n//\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  gl_FragColor = material.color;\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, geometry.uv);\n  }\n#endif\n\n  gl_FragColor.a = material.opacity;\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_0();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_1();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_2();\n}\n#elif defined SHADER_MAIN_BODY\nSHADER_MAIN_BODY_SOURCE\n#else\nvoid main() {\n  discard;\n}\n#endif\n",w=r.kDefaultMaterialOpacity=1,x=r.kDefaultMaterialColor=new g.Color(100/255,110/255,1),D=r.kDefaultMaterialType=y.MaterialType,j=r.kDefaultMaterialBlendingState={equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},N=r.kDefaultMaterialCullingState={enable:!0,face:"back"},A=r.kDefaultMaterialDepthState={enable:!0,range:[0,1],func:"less",mask:!0},L=r.Material=function(e){function t(e){function r(e,t){"function"==typeof e&&(t=e,e={}),e=(0,f.isArrayLike)(e)?[].concat(i(e)):c({},e||{}),t=t||function(){};var r=(0,f.isArrayLike)(e)?{}:e.map;return l.injectContext(r||{},function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;"function"==typeof r?r(function(r){b(e,t)}):b(e,t)}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));(0,p.incrementStat)("Material"),(0,h.assignTypeName)(u,"material");var s=n.materialMap,l=void 0===s?new O(e,n):s,d=n.uniforms,g=void 0===d?new I(e,n):d,y=n.context,m=void 0===y?new E(e,n):y,M=n.state,v=void 0===M?new T(e,n):M,b=e.regl(c({},v,{uniforms:g,context:m}));return u}return u(t,e),l(t,null,[{key:"id",value:function(){return v++}},{key:"typeName",value:function(e){return(0,M.default)(Object.keys(y).find(function(t){return e==y[t]}),e,"Material").replace(/Type$/,"")}}]),t}(d.Command),T=r.MaterialState=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),r.blending&&(r.blend=r.blending,delete r.blending),r.culling&&(r.cull=r.culling,delete r.culling),null==r.blend&&(r.blend={}),null==r.cull&&(r.cull={}),null==r.depth&&(r.depth={});var i=r.fragmentShader,a=void 0===i?b:i,u=r.fragmentShaderMain,s=r.type,l=void 0===s?y.MaterialType:s,h=L.typeName(l),p=c({MATERIAL_TYPE:h},r.shaderDefines);"string"==typeof u?(p.SHADER_MAIN_BODY=1,a=a.replace("SHADER_MAIN_BODY_SOURCE",u)):p["use"+h]=1,null!=r.map&&(p.HAS_MAP=1);for(var d in y)p[""+d]=y[d];p.MAX_POINT_LIGHTS=m.kMaxPointLights,p.MAX_AMBIENT_LIGHTS=m.kMaxAmbientLights,p.MAX_DIRECTIONAL_LIGHTS=m.kMaxDirectionalLights;for(var g in p)a="#define "+g+" "+p[g]+"\n"+a;this.frag=a,this.blend={equation:function(){return(0,M.default)(r.blend.equation,j.equation)},enable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.blend,o=void 0===i?void 0:i,a=t.opacity,u=void 0===a?(0,M.default)(r.opacity,1):a,s=t.transparent,c=void 0===s?(0,M.default)(r.transparent,!1):s,l=t.blending,f=void 0===l?(0,M.default)(o,r.blend.enable,j.enable):l;return n(e),!!(u<1||c)||("boolean"==typeof f?f:c)},color:function(){return(0,f.ensureRGBA)((0,M.default)(r.blend.color,j.color))},func:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.opacity,o=void 0===i?(0,M.default)(r.opacity,1):i,a=t.transparent,u=void 0===a?(0,M.default)(r.transparent,!1):a;return n(e),o<1||u?{src:"src alpha",dst:"one"}:(0,M.default)(r.blend.func,j.func)}},this.cull={enable:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cull,i=void 0===t?r.cull.enable:t;return n(e),Boolean((0,M.default)(i,N.enable))},face:function(e,t){var i=t.cullFace,o=void 0===i?r.cull.face:i;return n(e),(0,M.default)(o,N.face)}},this.depth={enable:function(){return(0,M.default)(r.depth.enable,A.enable)},range:function(){return(0,M.default)(r.depth.range,A.range)},func:function(){return(0,M.default)(r.depth.func,A.func)},mask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.opacity,o=void 0===i?(0,M.default)(r.opacity,1):i,a=t.transparent,u=void 0===a?(0,M.default)(r.transparent,r.blend.enable,A.enable,!1):a;return n(e),!!(o<1||u)||(0,M.default)(r.depth.mask,A.mask)}}},E=r.MaterialContext=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=r.type,a=void 0===i?y.MaterialType:i;void 0===r.id&&L.id(),this.opacity=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).opacity,i=void 0===t?r.opacity:t;return n(e),(0,M.default)(i,w)},this.type=function(){return(0,M.default)(a,y.MaterialType)},this.color=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).color,i=void 0===t?r.color:t;return n(e),(0,f.ensureRGBA)((0,M.default)(i,x))}},I=r.MaterialUniforms=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var n=t.regl.texture();this["material.opacity"]=function(e){var t=e.opacity,n=void 0===t?r.opacity:t;return(0,M.default)(n,w)},this["material.color"]=function(e){var t=e.color,n=void 0===t?r.color:t;return(0,M.default)(n,x)},this["material.type"]=function(e){var t=e.type,n=void 0===t?r.type:t;return(0,M.default)(n,D)},this["map.resolution"]=function(e){var t=e.textureResolution;return(0,M.default)(t,[0,0])},this["map.data"]=function(e){var t=e.texture;return e.textureData,(0,M.default)(t,n)}},O=r.MaterialMap=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.injectContext=t.regl({context:{map:function(e,t){var i=t.map,o=void 0===i?r.map:i;return n(e),o}}})}},{"../light/limits":40,"../material/types":47,"../stats":57,"../utils":58,"./color":5,"./command":6,"./texture":18,"./types":19,defined:148,"gl-vec4":302,"glsl-inject-defines":321,glslify:331}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.MeshAttributes=r.MeshUniforms=r.MeshState=r.MeshContext=r.Mesh=r.kDefaultMeshVertexShader=r.kDefaultMeshPrimitive=r.kDefaultMeshWireframeThickness=r.kDefaultMeshWireframePrimitive=void 0;var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=e("../utils"),p=e("./object3d"),d=e("../math"),g=e("./types"),y=e("../stats"),m=e("./geometry"),M=n(e("glsl-inject-defines")),v=n(e("defined")),b=(e("glslify"),n(e("clamp"))),w=n(e("gl-mat4")),x=n(e("gl-mat3")),D=(e("gl-vec4"),n(e("gl-vec3"))),j=n(e("gl-vec2")),N=w.default.identity([]),A=x.default.identity([]),L=r.kDefaultMeshWireframePrimitive="line strip",T=r.kDefaultMeshWireframeThickness=1,E=r.kDefaultMeshPrimitive="triangles",I=r.kDefaultMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n/**\n */\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n};\n\n//\n// Shader uniforms.\n//\nuniform Camera camera;\nuniform Mesh mesh;\n\n//\n// Shader IO.\n//\n\n#ifdef HAS_POSITIONS\nattribute vec3 position;\n#endif\n\n#ifdef HAS_NORMALS\nattribute vec3 normal;\n#endif\n\n#ifdef HAS_UVS\nattribute vec2 uv;\n#endif\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n#ifdef HAS_TRANSFORM_FUNC\n  TRANSFORM_FUNC_SOURCE\n#endif\n\nvoid main() {\n\n#if defined HAS_POSITIONS\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  gl_Position =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0);\n#endif\n\n#ifdef HAS_NORMALS\n  vnormal = normalize(mesh.modelNormal * normal);\n#endif\n\n#ifdef HAS_UVS\n  vuv = uv;\n#endif\n\n#ifdef HAS_TRANSFORM_FUNC\n  transform();\n#endif\n}\n\n",O=(r.Mesh=function(e){function t(e){function r(e,t,r){o(e),w(t,function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];n[0].visible,b(t,function(){!1===t.visible?x(t,r):0!=t.draw?(x(t),r.apply(void 0,n)):x(t,r)})})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),0==n.geometry instanceof m.Geometry&&(n.geometry=new m.Geometry({complex:n.geometry}));var i=n.attributes,s=void 0===i?new C(e,n):i,c=n.uniforms,l=void 0===c?new S(e,n):c,h=n.context,p=void 0===h?new O(e,n):h,d=n.state,M=void 0===d?new _(e,n):d,v=n.update,b=void 0===v?function(e,t){return o(e),t()}:v,w=e.regl({context:p}),x=e.regl(f({},M,{attributes:s,uniforms:l})),D=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},n,{context:p,update:r})));return(0,y.incrementStat)("Mesh"),(0,g.assignTypeName)(D,"mesh"),D}return s(t,e),t}(p.Object3D),r.MeshContext=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),s=r.geometry;return Object.defineProperties(n,i({computedBoundingBox:{enumerable:!1,writable:!0,value:null},computedSize:{enumerable:!1,writable:!0,value:null}},"computedSize",{enumerable:!1,writable:!0,value:null})),n.geometry=s,n.boundingBox=function(){return n.computeBoundingBox.apply(n,arguments)},n.size=function(){return n.computeSize.apply(n,arguments)},n.visible=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).visible;return o(e),(0,v.default)(t,r.visible,!0)},n}return s(t,e),l(t,[{key:"computeBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null==this.geometry?null:(1!=e&&null!=this.computedBoundingBox||(this.computedBoundingBox=this.geometry.computeBoundingBox()),this.computedBoundingBox)}},{key:"computeSize",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scale,t=void 0===e?1:e;if(null==this.geometry)return null;if(this.computedSize)return this.computedSize;this.computeBoundingBox();var r=this.computedBoundingBox,n=r[0].length,i=r[0],o=r[1],a=null;switch(n){case 3:a=D.default.subtract(new d.Vector3,o,i);break;case 2:a=j.default.subtract(new d.Vector2,o,i);break;default:return null}switch(n){case 3:D.default.multiply(a,a,t);break;case 2:j.default.multiply(a,a,t)}this.computedSize=a}}]),t}(p.Object3DContext)),_=r.MeshState=function e(t,r){a(this,e);var n=r.frag,i=void 0===n?null:n,u=r.vert,s=void 0===u?I:u,c=r.geometry,l=void 0===c?null:c,h=r.vertexShaderTransform,p=f({},r.shaderDefines);l.positions&&(p.HAS_POSITIONS=1),l.normals&&(p.HAS_NORMALS=1),l.uvs&&(p.HAS_UVS=1),"string"==typeof h&&(p.HAS_TRANSFORM_FUNC=1,"string"==typeof s&&(s=s.replace("TRANSFORM_FUNC_SOURCE",h))),this.vert="string"==typeof s?(0,M.default)(s,p):null,this.frag="string"==typeof i?(0,M.default)(i,p):null,this.lineWidth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.wireframeThickness,i=void 0===n?r.wireframeThickness:n,a=t.lineWidth,u=void 0===a?1:a;return o(e),Math.max(1,(0,v.default)(i,u,T))},this.primitive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.primitive,i=void 0===n?null:n,a=t.wireframe,u=void 0!==a&&a;return o(e),"string"==typeof i?i:u?(0,v.default)(r.wireframePrimitive,L):"string"==typeof r.primitive?r.primitive:E},this.elements=l&&l.cells?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(void 0===t.wireframe&&r.wireframe,t.count),i=void 0===n?r.count:n;o(e);var a=l.cells;return a&&"number"==typeof i&&(i=(0,b.default)(Math.floor(i),0,a.length),a=a.slice(0,i)),a}:null,this.count=!l||l.cells?null:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,n=void 0===t?l.positions.length:t;return o(e),null!=n?n:r.count?r.count:l&&l.complex?l.positions.length:null};for(var d in this)null==this[d]&&delete this[d]},S=r.MeshUniforms=function e(t,r){a(this,e),this["mesh.model"]=function(e){return e.transform||N},this["mesh.modelNormal"]=function(e){var t=e.transform;return(0,h.isArrayLike)(t)?x.default.normalFromMat4([],t)||A:A},this["material.opacity"]=function(e){var t=e.opacity,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).opacity,n=void 0===r?t:r;return(0,v.default)(n,1)},this["material.color"]=function(e){var t=e.color,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).color,n=void 0===r?t:r;return(0,h.ensureRGBA)(n)};for(var n in this)null==this[n]&&delete this[n]},C=r.MeshAttributes=function e(t,r){a(this,e);var n=r.geometry;this.position=(0,v.default)(n.positions,null),this.normal=(0,v.default)(n.normals,null),this.uv=(0,v.default)(n.uvs,null);for(var i in this)null==this[i]&&delete this[i]}},{"../math":49,"../stats":57,"../utils":58,"./geometry":9,"./object3d":15,"./types":19,clamp:100,defined:148,"gl-mat3":172,"gl-mat4":190,"gl-vec2":242,"gl-vec3":272,"gl-vec4":302,"glsl-inject-defines":321,glslify:331}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Object3DContext=r.Object3D=void 0;var l="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("../stats"),p=e("./types"),d=(e("../math"),e("./command")),g=e("./vector"),y=(e("../utils"),n(e("defined"))),m=n(e("gl-mat4")),M=(e("gl-vec4"),e("gl-vec3"),e("gl-vec2"),e("gl-quat"),111),v=(m.default.identity([]),r.Object3D=function(e){function t(e){function r(e,t){return"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":l(e))&&e?e:{},t="function"==typeof t?t:function(){},d(e,function(e,r,n){"function"==typeof s?s(e,r||{},t):"function"==typeof t&&t(e,r||{})}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));(0,h.incrementStat)("Object3D"),(0,p.assignTypeName)(i,"object3d");var o=n.update,s=void 0===o?null:o;if(null!=s&&"function"!=typeof s)throw new TypeError("Expecting update function to be a function. Got "+(void 0===s?"undefined":l(s))+".");var c=n.context,f=void 0===c?new b(e,n):c;if(0==f instanceof b)throw new TypeError("Expecting instance of Object3DContext given.");var d=e.regl({context:f});return i}return s(t,e),f(t,null,[{key:"id",value:function(){return M++}},{key:"count",value:function(){var e=(0,h.getStats)("Object3D");return e?e.length:0}}]),t}(d.Command)),b=r.Object3DContext=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var u=n.computeTransformMatrix,s=void 0===u||u,c=n.computeLocalMatrix,l=void 0===c||c,f=n.rotation,h=void 0===f?[0,0,0,1]:f,p=n.position,d=void 0===p?[0,0,0]:p,M=n.scale,b=void 0===M?[1,1,1]:M,w=n.id,x=void 0===w?v.id():w,D=m.default.identity([]),j=m.default.identity([]);Object.defineProperties(this,{shouldComputeTransformMatrix:{enumerable:!1,value:s},shouldComputeLocalMatrix:{enumerable:!1,value:l},initialRotation:{get:function(){return h},enumerable:!1},initialPosition:{get:function(){return d},enumerable:!1},initialScale:{get:function(){return b},enumerable:!1},transformMatrix:{get:function(){return D},enumerable:!1},localMatrix:{get:function(){return j},enumerable:!1}}),this.id=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e),t=t||{},null!=t.id?(0,y.default)(t.id,x):x},this.scale=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var r=(0,y.default)(t.scale,b);if("number"==typeof r)return[r,r,r];if(r instanceof g.Vector)return[].concat(i(r));if(Array.isArray(r))return[].concat(i(r));if(null!=r)try{return[].concat(i(r))}catch(e){return[r,r,r]}},this.position=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var r=(0,y.default)(t.position,d);if(r instanceof g.Vector)return[].concat(i(r));if(Array.isArray(r))return[].concat(i(r));if(null!=r)try{return[].concat(i(r))}catch(e){return[r,r,r]}},this.rotation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var r=(0,y.default)(t.rotation,h);return r instanceof g.Vector?[].concat(i(r)):Array.isArray(r)?[].concat(i(r)):[0,0,0,1]},this.transform=function(){return r.computeTransformMatrix.apply(r,arguments)},this.matrix=function(){return r.computeLocalMatrix.apply(r,arguments)}}return f(e,[{key:"computeTransformMatrix",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).transform,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).transform;return this.computeLocalMatrix.apply(this,arguments),!1===this.shouldComputeTransformMatrix?this.transformMatrix:(e&&m.default.multiply(this.transformMatrix,e,this.localMatrix),t&&m.default.multiply(this.transformMatrix,t,this.transformMatrix),this.transformMatrix)}},{key:"computeLocalMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.rotation,n=void 0===r?this.initialRotation:r,i=t.position,a=void 0===i?this.initialPosition:i,u=t.scale,s=void 0===u?this.initialScale:u;return o(e),!1===this.shouldComputeLocalMatrix?this.localMatrix:("number"==typeof s&&(s=[s,s,s]),m.default.fromRotationTranslation(this.localMatrix,n,a),m.default.scale(this.localMatrix,this.localMatrix,s),this.localMatrix)}}]),e}()},{"../math":49,"../stats":57,"../utils":58,"./command":6,"./types":19,"./vector":20,defined:148,"gl-mat4":190,"gl-quat":215,"gl-vec2":242,"gl-vec3":272,"gl-vec4":302}],16:[function(e,t,r){"use strict";function n(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.StreamContext=r.Stream=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("./command"),l=e("through2"),f=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),h=(r.Stream=function(e){function t(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return null!=e.data&&s&&s.stream?s.stream.write(e.data,function(){c(e,t)}):c(e,t),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r)),u=n.context,s=void 0===u?new h(e,n):u,c=e.regl({context:s});return a}return a(t,e),t}(c.Command),r.StreamContext=function e(t){function r(e,t,r){n(t),"function"==typeof c&&(e=(0,f.default)(c(e),e)),null!=e&&(h=e,this.push(h)),r()}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var a=o.stream,u=void 0===a?(0,l.obj)(r):a,c=o.transform,h=null;u.on("error",function(e){t.emit("error",e)}),this.stream=u,this.data=function(){return s({},h)}})},{"./command":6,defined:148,through2:420}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.TextContext=r.Text=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},f=e("../geometry/extrude_geometry"),h=e("./types"),p=e("./object3d"),d=e("./command"),g=e("./mesh"),y=n(e("vectorize-text")),m=n(e("defined")),M=(e("unindex-mesh"),{}),v={},b={},w=(r.Text=function(e){function t(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=n(e);return D(function(){x(e||{},function(){"function"==typeof r?r(e,t):t.apply(void 0,arguments)})}),this}function n(t){"string"==typeof t&&(t={text:t});var r=t.text,n="object"==(void 0===t?"undefined":l(t))?JSON.stringify(t):null,i=null,o=null,a=null;if("string"==typeof r&&"string"==typeof n&&"function"==typeof b[n])a=b[n];else if("string"==typeof n){o=(0,y.default)(r,c({textBaseline:(0,m.default)(t.baseline,"hanging"),orientation:"ccw",textAlign:(0,m.default)(t.align,"center"),width:1},t));var u=Array(10).fill([]).map(function(e,t){return[0,0,.001*t]});i=new f.ExtrudeGeometry(c({},o,{path:u})),a=new g.Mesh(e,{geometry:i}),v[n]=o,M[n]=i,b[n]=a}return a}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));(0,h.assignTypeName)(u,"text");var s=i.context,d=void 0===s?new w(e,i):s,x=e.regl({context:d}),D=new p.Object3D(e,{scale:[1,-1,1]});return u}return u(t,e),t}(d.Command),r.TextContext=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.text=function(e,t){return i(e),t=t||{},(0,m.default)(t.text,r.text,null)}})},{"../geometry/extrude_geometry":25,"./command":6,"./mesh":14,"./object3d":15,"./types":19,defined:148,"unindex-mesh":427,"vectorize-text":434}],18:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureState=r.TextureContext=r.Texture=r.kDefaultTextureState=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./types"),f=e("../stats"),h=e("./command"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window")),d=p.default.HTMLVideoElement,g=p.default.HTMLCanvasElement,y=p.default.HTMLImageElement,m=function(e){return e instanceof g},M=function(e){return e instanceof d},v=function(e){return e instanceof y},b=d.HAVE_CURRENT_DATA,w=void 0===b?2:b,x=d.HAVE_ENOUGH_DATA,D=void 0===x?4:x,j=r.kDefaultTextureState=Object.seal({min:"linear",mag:"linear"}),N=r.Texture=function(e){function t(e){function r(e,t){return"function"==typeof e&&(t=e,e={}),e=e||{},t=t||function(){},u.update(s({},o,e)),p(t),this}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));(0,f.incrementStat)("Texture"),(0,l.assignTypeName)(a,"texture");var u=new L(e,o||{}),c=o.context,h=void 0===c?new A(e,u,o):c,p=e.regl({context:h});return a}return o(t,e),c(t,null,[{key:"isTextureDataReady",value:function(e){return!!(e&&M(e)&&e.readyState>=D)||!!((e&&v(e)||m(e))&&e.width&&e.height)}},{key:"getTextureDataResolution",value:function(e,t){return v(t)||m(t)?[t.width,t.height]:M(t)?[t.videoWidth||0,t.videoHeight||0]:t&&t.shape?t.shape:e.shape?e.shape:e.width&&e.height?[e.width,e.height]:[0,0]}}]),t}(h.Command),A=r.TextureContext=function e(t,r){arguments.length>2&&void 0!==arguments[2]&&arguments[2],n(this,e),Object.defineProperties(this,{data:{enumerable:!1,get:function(){return r.data}},textureState:{enumerable:!1,get:function(){return r}}}),this.textureResolution=function(){return N.getTextureDataResolution(r,r.data)},this.textureData=function(){return r.data},this.texture=function(){return r.texture}},L=r.TextureState=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),Object.assign(this,s({},j,r));var i=t.regl.texture(s({},this)),o=r.data,a=void 0===o?null:o,u=0,c=null;Object.defineProperties(this,{ctx:{enumerable:!1,get:function(){return t}},data:{enumerable:!0,get:function(){return a||null},set:function(e){a=e}},texture:{enumerable:!1,get:function(){return i}},lastVideoUpdate:{enumerable:!1,set:function(e){u=e},get:function(){return u}},previouslyUploadedData:{enumerable:!1,set:function(e){c=e},get:function(){return c}}})}return c(e,[{key:"update",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=void 0===e?this.data:e,r=this.ctx.regl.now(),n=!1;if(N.isTextureDataReady(t)&&(M(t)&&t.readyState>=w?(n=!0,r-this.lastVideoUpdate>=.01&&(this.lastVideoUpdate=r)):t!=this.previouslyUploadedData&&(n=!0)),n){var i=N.getTextureDataResolution(this,t);i[0]>0&&i[1]>0||(n=!1)}if(n&&t){if(this.data=t,this.previouslyUploadedData=t,"function"!=typeof this.texture)throw new TypeError("TextureState expects .texture to be a function. Got "+u(this.texture)+".");this.texture(this)}return n}}]),e}()},{"../stats":57,"./command":6,"./types":19,"global/window":320}],19:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},o=Symbol("types"),a=[];r.assignTypeName=function(e,t){return null==e?e:(null==t&&(t=void 0===e?"undefined":i(e)),0==Array.isArray(e[o])&&(e[o]=[]),t=t.toLowerCase(),e[o].unshift(t),-1==a.indexOf(t)&&a.push(t),e)},r.typeOf=function(e){return null==e?void 0===e?"undefined":i(e):Array.isArray(e[o])?e[o][0]:void 0===e?"undefined":i(e)},r.instanceOf=function(e,t){return null!=e&&null!=t&&(Array.isArray(e[o])?e[o].includes(t.name.toLowerCase())||e[o].includes(t.name):e instanceof t)}},{}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Vector=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../utils"),s=e("./types"),c=n(e("get-unique-permutations")),l=n(e("defined")),f=(e("global/window"),{}),h=r.Vector=function(){function e(){for(var t=this,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];o(this,e),(0,s.assignTypeName)(this,"vector"),((0,u.isArrayLike)(n[0])||n[0]instanceof e)&&(n=n[0]);var l=null;l=n.every(function(e){return(0,u.isArrayLike)(e)})?new Float32Array([].concat(i(n.reduce(function(e,t){return e.concat([].slice.call(t))},[])))):new Float32Array([].slice.call(n)),(0,u.define)(this,"elements",{get:function(){return l}});for(var h=0;h<l.length;++h)!function(e){(0,u.define)(t,e,{enumerable:!0,get:function(){return l[e]},set:function(r){l[e]=r,t.onchange(e,r)}})}(h);if("function"==typeof this.constructor.swizzles){var p=[];if(f[this.constructor.name])p=f[this.constructor.name];else{var d=!0,g=!1,y=void 0;try{for(var m,M=this.constructor.swizzles()[Symbol.iterator]();!(d=(m=M.next()).done);d=!0){var v,b=m.value;(v=p).push.apply(v,i((0,c.default)(b)))}}catch(e){g=!0,y=e}finally{try{!d&&M.return&&M.return()}finally{if(g)throw y}}}f[this.constructor.name]=Object.assign(f[this.constructor.name]||[],p);var w=!0,x=!1,D=void 0;try{for(var j,N=p[Symbol.iterator]();!(w=(j=N.next()).done);w=!0)!function(){var e=j.value,r=e.join("");if(t.hasOwnProperty(r))return"continue";(0,u.define)(t,r,{get:function(){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;r.push(t[s])}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return new(Function.prototype.bind.apply(t.constructor,[null].concat(r)))}})}()}catch(e){x=!0,D=e}finally{try{!w&&N.return&&N.return()}finally{if(x)throw D}}}}return a(e,[{key:"onchange",value:function(e,t){}},{key:"set",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if((0,u.isArrayLike)(r[0])||r[0]instanceof e)return this.set.apply(this,i(r[0]));for(var o=0;o<r.length;++o)this[o]=(0,l.default)(r[o],this[o]);return this}},{key:"get",value:function(e){return this.elements[e||0]||0}},{key:"toArray",value:function(){return[].concat(i(this.elements))}},{key:"toJSON",value:function(){return this.toArray()}},{key:"valueOf",value:function(){return this.elements}},{key:Symbol.iterator,value:function(){return this.toArray()[Symbol.iterator]()}},{key:"length",get:function(){return this.elements.length}}]),e}();Object.setPrototypeOf(h.prototype,Array.prototype)},{"../utils":58,"./types":19,defined:148,"get-unique-permutations":161,"global/window":320}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e.map(function(e){return e.filter(function(e){return!/[rgba]/.test(e)})}).filter(function(e){return e.length})},i=r.Vector1=[],o=r.Vector2=[["x","y"],["x","x"],["x","y"],["y","x"],["y","y"],["z","x"],["z","y"],["w","x"],["w","y"]],a=r.Vector3=[["x","y","z"],["x","x","x"],["x","x","y"],["x","x","z"],["y","y","x"],["y","y","y"],["y","y","z"],["z","z","x"],["z","z","y"],["z","z","z"],["w","w","x"],["w","w","y"],["w","w","z"],["r","g","b"],["r","r","r"],["r","r","g"],["r","r","b"],["g","g","r"],["g","g","g"],["g","g","b"],["b","b","r"],["b","b","g"],["b","b","b"],["a","a","r"],["a","a","g"],["a","a","b"]],u=r.Vector4=[["x","y","z","w"],["x","x","x","x"],["x","x","x","y"],["x","x","x","z"],["x","x","x","w"],["y","y","y","x"],["y","y","y","y"],["y","y","y","z"],["y","y","y","w"],["z","z","z","x"],["z","z","z","y"],["z","z","z","z"],["z","z","z","w"],["w","w","w","x"],["w","w","w","y"],["w","w","w","z"],["w","w","w","w"],["r","g","b","a"],["r","r","r","r"],["r","r","r","g"],["r","r","r","b"],["r","r","r","a"],["g","g","g","r"],["g","g","g","g"],["g","g","g","b"],["g","g","g","a"],["b","b","b","r"],["b","b","b","g"],["b","b","b","b"],["b","b","b","a"],["a","a","a","r"],["a","a","a","g"],["a","a","a","b"],["a","a","a","a"]],s=r.Vector=[].concat(i).concat(o).concat(a).concat(u);r.Euler=n(a),r.Quaternion=n(s),r.Color=function(e){return e.map(function(e){return e.filter(function(e){return!/[xyzw]/.test(e)})}).filter(function(e){return e.length})}(s)},{}],22:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.BoxGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-cube")),c=e("../core/geometry");r.BoxGeometry=function(e){function t(e){n(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var r=e,o=r.segments,a=r.x,c=r.y,l=r.z;if(null==o&&(o=1),null==a&&(a=1),null==c&&(c=1),null==l&&(l=1),"number"!=typeof a)throw new TypeError("Expecting '.x' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof c)throw new TypeError("Expecting '.y' to a be a number. Got "+(void 0===c?"undefined":u(c))+".");if("number"!=typeof l)throw new TypeError("Expecting '.z' to a be a number. Got "+(void 0===l?"undefined":u(l))+".");if("number"!=typeof o&&"object"!=(void 0===o?"undefined":u(o)))throw new TypeError("Expecting '.segments' to be an object or 'number'. Got "+(void 0===o?"undefined":u(o)));if("number"==typeof o)o={x:o,y:o,z:o};else if("object"==(void 0===o?"undefined":u(o))){if("number"!=typeof o.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(o.x)+".");if("number"!=typeof o.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(o.y)+".");if("number"!=typeof o.z)throw new TypeError("Expecting '.segments.z' to a be a number. Got "+u(o.z)+".")}var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,c,l,o.x,o.y,o.z)}));return f.size={x:a,y:c,z:l},f.segments=o,f}return o(t,e),t}(c.Geometry)},{"../core/geometry":9,"primitive-cube":371}],23:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.CapsuleGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-capsule")),c=e("../core/geometry");r.CapsuleGeometry=function(e){function t(e){n(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var r=e,o=r.radius,a=void 0===o?a||1:o,c=r.height,l=void 0===c?l||.5:c,f=r.segments,h=void 0===f?h||12:f,p=r.resolution,d=void 0===p?d||24:p;for(var g in e)if(e.hasOwnProperty(g)&&"number"!=typeof e[g])throw new TypeError("Expecting '"+g+"' to be a number. Got "+u(e[g])+".");var y=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,l,d,h)}));return y.radius=a,y.height=l,y.segments=h,y.resolution=d,y}return o(t,e),t}(c.Geometry)},{"../core/geometry":9,"primitive-capsule":370}],24:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.CylinderGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-cylinder")),c=e("../core/geometry");r.CylinderGeometry=function(e){function t(e){n(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var r=e,o=r.height,a=void 0===o?a||5:o,c=r.radiusTop,l=void 0===c?l||1:c,f=r.radiusBottom,h=void 0===f?h||1:f,p=r.radialSegments,d=void 0===p?d||50:p,g=r.heightSegments,y=void 0===g?y||50:g;for(var m in e)if(e.hasOwnProperty(m)&&"number"!=typeof e[m])throw new TypeError("Expecting '"+m+"' to be a number. Got "+u(e[m])+".");var M=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(l,h,a,d,y)}));return M.height=a,M.radiusTop=l,M.radiusBottom=h,M.radialSegments=d,M.heightSegments=y,M}return o(t,e),t}(c.Geometry)},{"../core/geometry":9,"primitive-cylinder":372}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.ExtrudeGeometry=r.kDefaultExtrudeGeometryPathSteps=r.kDefaultExtrudeGeometryPathZCoefficient=void 0;var c=e("../utils"),l=e("../core/geometry"),f=n(e("extrude")),h=n(e("extrude-by-path")),p=n(e("extrude-edges")),d=n(e("clean-pslg")),g=(e("defined"),n(e("cdt2d")));r.kDefaultExtrudeGeometryPathZCoefficient=.001,r.kDefaultExtrudeGeometryPathSteps=10,r.ExtrudeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.positions,n=e.edges,u=e.cells,s=e.path,l=e.closed,y=void 0===l||l;o(this,t);var m=null;if(0==(0,c.isArrayLike)(r))throw new TypeError("Expecting positions to be an array.");if(0==r.length)throw new TypeError("Empty positions array given.");if(null==s)m=(0,f.default)(r,{bottom:-1,top:1});else{if(y=Boolean(y),0==(0,c.isArrayLike)(s))throw new TypeError("Expecting path to be an array.");if(0==s.length)throw new TypeError("Empty path array given.");if(null==n){var M=[].concat(i(p.default.faces(r)));n=[];for(var v=0;v<M.length;v+=2)n.push([M[v],M[v+1]])}else{if(0==(0,c.isArrayLike)(n))throw new TypeError("Expecting edges to be an array.");if(0==n.length)throw new TypeError("Empty edges array given.")}if(null==u)u=(0,g.default)(r);else{if(u&&0==(0,c.isArrayLike)(u))throw new TypeError("Expecting cells to be an array.");if(0==u.length)throw new TypeError("Empty cells array given.")}(0,d.default)(r,n),m=(0,h.default)({positions:r,closed:y,edges:n,cells:u,path:s})}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:m}))}return u(t,e),t}(l.Geometry)},{"../core/geometry":9,"../utils":58,cdt2d:94,"clean-pslg":101,defined:148,extrude:156,"extrude-by-path":154,"extrude-edges":155}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./extrude_geometry");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./triangle");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./cylinder");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./capsule");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./sphere");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./plane");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var c=e("./torus");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})});var l=e("./box");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})})},{"./box":22,"./capsule":23,"./cylinder":24,"./extrude_geometry":25,"./plane":27,"./sphere":28,"./torus":29,"./triangle":30}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.PlaneGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-plane")),c=e("../core/geometry");r.PlaneGeometry=function(e){function t(e){n(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var r=e,o=r.size,a=void 0===o?a||{x:1,y:1}:o,c=r.segments,l=void 0===c?l||{x:5,y:5}:c,f=r.quads,h=void 0===f?h||!1:f;if("number"==typeof l)l={x:l,y:l};else if("object"==(void 0===l?"undefined":u(l))){if("number"!=typeof l.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(l.x)+".");if("number"!=typeof l.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(l.y)+".")}if("number"==typeof a)a={x:a,y:a};else if("object"==(void 0===a?"undefined":u(a))){if("number"!=typeof a.x)throw new TypeError("Expecting '.size.x' to a be a number. Got "+u(a.x)+".");if("number"!=typeof a.y)throw new TypeError("Expecting '.size.y' to a be a number. Got "+u(a.y)+".")}var p=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a.x,a.y,l.x,l.y,{quads:h})}));return p.size=a,p.quads=h,p.segments=l,p}return o(t,e),t}(c.Geometry)},{"../core/geometry":9,"primitive-plane":373}],28:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.SphereGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-sphere")),c=e("../core/geometry");r.SphereGeometry=function(e){function t(e){n(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var r=e,o=r.radius,a=void 0===o?a||1:o,c=r.segments,l=void 0===c?l||32:c;if("number"!=typeof a)throw new TypeError("Expecting 'radius' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof l)throw new TypeError("Expecting 'segments' to a be a number. Got "+(void 0===l?"undefined":u(l))+".");var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,{segments:l})}));return f.radius=a,f.segments=l,f}return o(t,e),t}(c.Geometry)},{"../core/geometry":9,"primitive-sphere":374}],29:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.TorusGeometry=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},c=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-torus")),l=e("../core/geometry");r.TorusGeometry=function(e){function t(e){var r;i(this,t),null!=e&&"object"==(void 0===e?"undefined":s(e))||(e={});var a=e,u=a.majorSegments,l=void 0===u?l||32:u,f=a.minorSegments,h=void 0===f?h||64:f,p=a.majorRadius,d=void 0===p?d||1:p,g=a.minorRadius,y=void 0===g?y||.5:g,m=a.arc,M=void 0===m?M||2*Math.PI:m;for(var v in e)if(e.hasOwnProperty(v)&&"number"!=typeof e[v])throw new TypeError("Expecting '"+v+"' to a be a number. Got "+s(e[v])+".");var b=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,c.default)((r={majorSegments:l,minorSegments:h,majorRadius:d},n(r,"minorSegments",h),n(r,"arc",M),r))}));return b.majorSegments=l,b.minorSegments=h,b.majorRadius=d,b.minorRadius=y,b.arc=M,b}return a(t,e),t}(l.Geometry)},{"../core/geometry":9,"primitive-torus":375}],30:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.TriangleGeometry=void 0;var u=e("../core/geometry");r.TriangleGeometry=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:{positions:[[-1,-.5*Math.sqrt(3),0],[1,-.5*Math.sqrt(3),0],[0,.5*Math.sqrt(3),0]],normals:[[-1,-1,0],[1,-1,0],[0,1,0]],uvs:[[-1,-.5*Math.sqrt(3)],[1,-.5*Math.sqrt(3)],[0,.5*Math.sqrt(3)]]}}))}return o(t,e),t}(u.Geometry)},{"../core/geometry":9}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./mesh");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./math");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./input");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./light");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./cameras");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var c=e("./material");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})});var l=e("./geometry");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})})},{"./cameras":1,"./core":10,"./geometry":26,"./input":32,"./light":39,"./material":44,"./math":49,"./mesh":55}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./orientation");Object.defineProperty(r,"OrientationInput",{enumerable:!0,get:function(){return n.OrientationInput}});var i=e("./keyboard");Object.defineProperty(r,"KeyboardInput",{enumerable:!0,get:function(){return i.KeyboardInput}});var o=e("./mouse");Object.defineProperty(r,"MouseInput",{enumerable:!0,get:function(){return o.MouseInput}});var a=e("./touch");Object.defineProperty(r,"TouchInput",{enumerable:!0,get:function(){return a.TouchInput}})},{"./keyboard":33,"./mouse":34,"./orientation":35,"./touch":36}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardInput=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=e("../stats"),f=e("../core/command"),h=n(e("keycode")),p=n(e("dom-events"));r.KeyboardInput=function(e){function t(e){function r(){f()}function n(t){if(e.hasFocus){var r=t.which||t.keyCode||t.charCode;null!=r&&(g[r]=!0,y[(0,h.default)(r)]=!0)}}function a(t){var r=t.which||t.keyCode||t.charCode;e.hasFocus&&null!=r&&(g[r]=!1,y[(0,h.default)(r)]=!1)}function u(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},(t="function"==typeof t?t:function(){})(s({},e,{keycodes:g,keys:y}))}function f(){for(var e in g)g[e]=!1;for(var t in y)y[t]=!1}arguments.length>1&&void 0!==arguments[1]&&arguments[1],i(this,t),(0,l.registerStat)("KeyboardInput");var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u)),g={},y={};return p.default.on(document,"keydown",n,!1),p.default.on(document,"keyup",a,!1),e.on("blur",r),e.once("destroy",function(){e.off("blur",r),p.default.off(document,"keydown",n),p.default.off(document,"keyup",a)}),d}return a(t,e),t}(f.Command)},{"../core/command":6,"../stats":57,"dom-events":149,keycode:340}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseInput=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=e("../stats"),f=e("../core/command"),h=n(e("mouse-change")),p=n(e("mouse-wheel")),d=n(e("defined")),g=n(e("dom-events")),y=n(e("raf"));r.MouseInput=function(e){function t(e){function r(e,t,r){u(e,t,r)}function n(e,t,r){!1!==M&&f(e,t,r)}function a(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},(t="function"==typeof t?t:function(){})(s({},e,{wheel:b,allowWheel:(0,d.default)(e.allowWheel,M)},s({},w,{currentX:(0,d.default)(e.currentX,w.currentX),currentY:(0,d.default)(e.currentY,w.currentY)})))}function u(e,t,r){w.buttons=e,(0,y.default)(function(){w.deltaX=0,w.deltaY=0}),w.currentX==t&&w.currentY==r||(w.prevX=w.currentX,w.prevY=w.currentY,w.deltaX=t-w.currentX,w.deltaY=r-w.currentY,w.currentX=t,w.currentY=r)}function f(e,t,r){(0,y.default)(function(){return Object.assign(b,{deltaX:0,deltaY:0,deltaZ:0})});var n=b.currentX,i=b.currentY,o=b.currentZ;Object.assign(b,{currentX:n+e,currentY:i+t,currentZ:o+r,deltaX:e,deltaY:t,deltaZ:r,prevX:n,prevY:i,prevZ:o})}var m=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowWheel,M=void 0===m||m;i(this,t),(0,l.registerStat)("MouseInput");var v=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a)),b={currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},w={buttons:0,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0};e.on("blur",function(){w.buttons=0});var x=(0,h.default)(e.domElement,r),D=(0,p.default)(e.domElement,n);return e.once("destroy",function(){x.enabled=!1,g.default.off(e.domElement,D)}),v}return a(t,e),t}(f.Command)},{"../core/command":6,"../stats":57,defined:148,"dom-events":149,"mouse-change":344,"mouse-wheel":347,raf:378}],35:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.OrientationInput=r.globalState=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)};e("webvr-polyfill");e("../utils");var h=e("../math"),p=e("../stats"),d=e("../core/command"),g=n(e("global/window")),y=n(e("dom-events")),m=(e("gl-quat"),n(e("raf"))),M=r.globalState={hasDeviceOrientation:!1,absolute:null,currentAlpha:0,currentBeta:90,currentGamma:0,deltaAlpha:0,deltaBeta:0,deltaGamma:0,prevAlpha:0,prevBeta:0,prevGamma:0};y.default.on(g.default,"deviceorientation",function(e){var t=e.alpha,r=e.beta,n=e.gamma,i=e.absolute;null!=t&&null!=r&&null!=n?(M.hasDeviceOrientation=!0,Object.assign(M,{absolute:i,currentAlpha:t,currentBeta:r,currentGamma:n,deltaAlpha:t-M.currentAlpha,deltaBeta:r-M.currentBeta,deltaGamma:n-M.currentGamma,prevAlpha:M.currentAlpha,prevBeta:M.currentBeta,prevGamma:M.currentGamma}),(0,m.default)(function(){return Object.assign(M,{deltaAlpha:0,deltaBeta:0,deltaGamma:0})})):M.hasDeviceOrientation=!1}),y.default.on(g.default,"devicemotion",function(e){Object.assign(M,{accelerationIncludingGravity:e.accelerationIncludingGravity,acceleration:e.acceleration,rotationRate:e.rotationRate,interval:e.interval})});r.OrientationInput=function(e){function t(e){function r(e){Object.assign(m,e)}function n(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":f(e))&&e?e:{},t="function"==typeof t?t:function(){},s(),t(l({},M,{deviceRotation:d,deviceEuler:g}))}function s(){m.length&&(m[0].getFrameData(y),d.set.apply(d,i(y.pose.orientation||[0,0,0,1])),g.set.apply(g,i(h.Euler.fromQuaternion(d))))}o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a(this,t),(0,p.registerStat)("OrienationInput");var c=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n)),d=new h.Quaternion,g=new h.Euler,y=new VRFrameData,m=[];return navigator.getVRDisplays().then(r).catch(function(t){e.emit("error",t)}),c}return s(t,e),t}(d.Command)},{"../core/command":6,"../math":49,"../stats":57,"../utils":58,"dom-events":149,"gl-quat":215,"global/window":320,raf:378,"webvr-polyfill":450}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.TouchInput=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},f=e("../stats"),h=e("../core/command"),p=e("touch-position"),d=n(e("dom-events")),g=n(e("raf"));r.TouchInput=function(e){function t(e){function r(e){var t=e.touches[0].clientX,r=e.touches[0].clientY;e.preventDefault(),m.touches=e.targetTouches,m.currentX=t,m.currentY=r,m.deltaX=0,m.deltaY=0,m.prevX=0,m.prevY=0}function n(e){e.preventDefault(),(0,g.default)(function(){m.touches=null,m.currentX=0,m.currentY=0,m.deltaX=0,m.deltaY=0,m.prevX=0,m.prevY=0})}function u(e){h(e.clientX,e.clientY)}function s(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":l(e))&&e?e:{},(t="function"==typeof t?t:function(){})(c({},e,m))}function h(e,t){(0,g.default)(function(){m.deltaX=0,m.deltaY=0}),m.currentX!=e&&m.currentY!=t&&(m.prevX=m.currentX,m.prevY=m.currentY,m.deltaX=e-m.currentX,m.deltaY=t-m.currentY,m.currentX=e,m.currentY=t)}i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o(this,t),(0,f.registerStat)("TouchInput");var y=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s)),m={touches:null,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},M=(0,p.emitter)({element:e.domElement});return M.on("move",u),d.default.on(e.domElement,"touchstart",r),d.default.on(e.domElement,"touchend",n),e.once("destroy",function(){M.dispose(),d.default.of(e.domElement,"touchstart",r),d.default.of(e.domElement,"touchend",n)}),y}return u(t,e),t}(h.Command)},{"../core/command":6,"../stats":57,"dom-events":149,raf:378,"touch-position":422}],37:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.AmbientLight=r.kDefaultAmbientLightContextEntry=r.kDefaultAmbientLightAmbient=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./types"),l=e("./limits"),f=e("../stats"),h=e("../core/light"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),d=r.kDefaultAmbientLightAmbient=.01,g=r.kDefaultAmbientLightContextEntry={identifier:"ambient",type:c.AmbientLightType,max:l.kMaxAmbientLights,defaults:{color:[0,0,0,0],visible:!1}};r.AmbientLight=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,t),(0,f.incrementStat)("AmbientLight"),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({},r,{ambient:(0,p.default)(r.ambient,d),type:(0,p.default)(r.type,c.AmbientLightType)})))}return o(t,e),s(t,null,[{key:"contextEntry",value:function(){return g}}]),t}(h.Light)},{"../core/light":12,"../stats":57,"./limits":40,"./types":42,defined:148}],38:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionalLight=r.kDefaultDirectionalLightContextEntry=r.kDefaultDirectionalLightAmbient=r.kDefaultDirectionalLightRadius=r.kDefaultDirectionalLightIntensity=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./types"),l=e("./limits"),f=e("../stats"),h=e("../core/light"),p=(e("defined"),function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4"))),d=r.kDefaultDirectionalLightIntensity=.5,g=r.kDefaultDirectionalLightRadius=.05,y=r.kDefaultDirectionalLightAmbient=.005,m=r.kDefaultDirectionalLightContextEntry={identifier:"directional",type:c.DirectionalLightType,max:l.kMaxDirectionalLights,defaults:{transform:p.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};r.DirectionalLight=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,t),(0,f.incrementStat)("DirectionalLight"),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({type:c.DirectionalLightType,radius:g,ambient:y,intensity:d},r)))}return o(t,e),s(t,null,[{key:"contextEntry",value:function(){return m}}]),t}(h.Light)},{"../core/light":12,"../stats":57,"./limits":40,"./types":42,defined:148,"gl-mat4":190}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./directional");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./ambient");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./point");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./types");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})})},{"./ambient":37,"./directional":38,"./point":41,"./types":42}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.kMaxAmbientLights=16,r.kMaxDirectionalLights=12,r.kMaxPointLights=12},{}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.PointLight=r.kDefaultPointLightContextEntry=r.kDefaultPointLightRadius=r.kDefaultPointLightAmbient=r.kDefaultPointLightIntensity=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./types"),f=e("./directional"),h=e("./limits"),p=e("../stats"),d=n(e("defined")),g=n(e("gl-mat4")),y=r.kDefaultPointLightIntensity=.4,m=r.kDefaultPointLightAmbient=5e-4,M=r.kDefaultPointLightRadius=5e-4,v=r.kDefaultPointLightContextEntry={identifier:"point",type:l.PointLightType,max:h.kMaxPointLights,defaults:{transform:g.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};r.PointLight=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),(0,p.incrementStat)("PointLight"),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({},r,{intensity:(0,d.default)(r.intensity,y),ambient:(0,d.default)(r.ambient,m),radius:(0,d.default)(r.radius,M),type:(0,d.default)(r.type,l.PointLightType)})))}return a(t,e),c(t,null,[{key:"contextEntry",value:function(){return v}}]),t}(f.DirectionalLight)},{"../stats":57,"./directional":38,"./limits":40,"./types":42,defined:148,"gl-mat4":190}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BasicLightType=7077888,r.PointLightType=7077889,r.AmbientLightType=7077890,r.DirectionalLightType=7077891,r.SpotLightType=7077892},{}],43:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.FlatMaterial=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=e("./types"),c=e("../core/material");r.FlatMaterial=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({type:s.FlatMaterialType},r)))}return o(t,e),t}(c.Material)},{"../core/material":13,"./types":47}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./lambert");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./phong");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./types");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./flat");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})})},{"./flat":43,"./lambert":45,"./phong":46,"./types":47}],45:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.LambertMaterialUniforms=r.LambertMaterialContext=r.LambertMaterial=r.kDefaultLambertMaterialAmbientColor=r.kDefaultLambertMaterialEmissiveColor=r.kDefaultLambertMaterialRoughness=r.kDefaultLambertMaterialAlbedo=void 0;var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=e("./types"),p=e("../light/directional"),d=e("../light/ambient"),g=e("../light/point"),y=e("../utils"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../light/types")),M=e("../core/vector"),v=e("../core/color"),b=e("../core/material"),w=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),x=r.kDefaultLambertMaterialAlbedo=.8,D=r.kDefaultLambertMaterialRoughness=.8,j=r.kDefaultLambertMaterialEmissiveColor=new v.Color("black"),N=r.kDefaultLambertMaterialAmbientColor=new v.Color(51,51,51),A=(r.LambertMaterial=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var n=r.uniforms,i=void 0===n?new A(e,r):n;return u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({type:h.LambertMaterialType},r,{uniforms:i})))}return s(t,e),t}(b.Material),r.LambertMaterialContext=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return s(t,e),t}(b.MaterialContext),r.LambertMaterialUniforms=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),s=[p.DirectionalLight.contextEntry(),d.AmbientLight.contextEntry(),g.PointLight.contextEntry()].concat(o(r.lightContext||[])),c=!0,l=!1,f=void 0;try{for(var h,y=s[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var M=h.value;n.setLightsInContext(M)}}catch(e){l=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(l)throw f}}return n["material.roughness"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).roughness;return i(e),(0,w.default)(t,r.roughness,D)},n["material.emissive"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).emissive;return i(e),[].concat(o((0,w.default)(t,r.emissive,j)))},n["material.albedo"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).albedo;return i(e),(0,w.default)(t,r.albedo,x)},n["material.ambient"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ambient;return i(e),[].concat(o((0,w.default)(t,r.ambient,N)))},n["lightContext.ambient.count"]=function(e){var t=e.lights,r=m.AmbientLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n["lightContext.directional.count"]=function(e){var t=e.lights,r=m.DirectionalLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n["lightContext.point.count"]=function(e){var t=e.lights,r=m.PointLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n}return s(t,e),l(t,[{key:"setLightsInContext",value:function(e){for(var t=this,r=e.identifier,i=e.type,a=e.max,u=e.defaults,s=0;s<a;++s)!function(e){var a="lightContext."+r+".lights["+e+"]";for(var s in u)!function(r,u){Object.assign(t,n({},a+"."+r,function t(n){var a=n.lights,s=arguments.length>1&&arguments[1]!==t?arguments[1]:{},c=a.filter(function(e){return i==e.type})[e],l=c?(0,w.default)(c[r],s[r],u):u;return l instanceof M.Vector?l=[].concat(o(l)):(0,y.isArrayLike)(l)&&(l=[].concat(o(l))),l}))}(s,u[s])}(s)}}]),t}(b.MaterialUniforms))},{"../core/color":5,"../core/material":13,"../core/vector":20,"../light/ambient":37,"../light/directional":38,"../light/point":41,"../light/types":42,"../utils":58,"./types":47,defined:148}],46:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.PhongMaterialUniforms=r.PhongMaterial=r.kDefaultPhongMaterialShininess=r.kDefaultPhongMaterialSpecularColor=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=e("./lambert"),f=e("./types"),h=e("../core/color"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),d=r.kDefaultPhongMaterialSpecularColor=new h.Color(1118481),g=r.kDefaultPhongMaterialShininess=40,y=(r.PhongMaterial=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=r.uniforms,i=void 0===n?new y(e,r):n;return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({type:f.PhongMaterialType},r,{uniforms:i})))}return u(t,e),t}(l.LambertMaterial),r.PhongMaterialUniforms=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return u["material.shininess"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shininess;return i(e),(0,p.default)(t,r.shininess,g)},u["material.specular"]=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).specular;return i(e),[].concat(n((0,p.default)(t,r.specular,d)))},u}return u(t,e),t}(l.LambertMaterialUniforms))},{"../core/color":5,"./lambert":45,"./types":47,defined:148}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MaterialType=7143424,r.FlatMaterialType=7143425,r.PhongMaterialType=7143426,r.LambertMaterialType=7143427},{}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Euler=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),f=e("../core/types"),h=e("../core/vector"),p=n(e("math-euler")),d=n(e("defined")),g=n(e("gl-mat4")),y=g.default.identity([]);r.Euler=function(e){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xyz";i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d.default)(e,0),(0,d.default)(r,0),(0,d.default)(n,0)));if((0,f.assignTypeName)(u,"euler"),"string"!=typeof a)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===a?"undefined":s(a))+".");return u.order=a,u}return a(t,e),c(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"swizzles",value:function(){return l.Euler}},{key:"fromQuaternion",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if("string"!=typeof r)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":s(r))+".");r=r.toUpperCase();var n=new p.default,i=g.default.fromQuat(y,e);return n.setFromRotationMatrix({elements:i},r),new t(n.x,n.y,n.z,r)}}]),t}(h.Vector)},{"../core/types":19,"../core/vector":20,"../core/vector_swizzle_map":21,defined:148,"gl-mat4":190,"math-euler":342}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./quaternion");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./vector1");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./vector2");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./vector3");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./vector4");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./euler");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})},{"./euler":48,"./quaternion":50,"./vector1":51,"./vector2":52,"./vector3":53,"./vector4":54}],50:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Quaternion=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),f=e("../core/types"),h=e("../core/vector"),p=(e("./euler"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined")));r.Quaternion=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,p.default)(e,0),(0,p.default)(r,0),(0,p.default)(n,0),(0,p.default)(a,1)));return(0,f.assignTypeName)(u,"quaternion"),u}return a(t,e),c(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=e}}],[{key:"swizzles",value:function(){return l.Quaternion}},{key:"fromAxisAngle",value:function(e,r){return quat.setAxisAngle(new t,e,r)}},{key:"fromEuler",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if(null==e||![].concat(n(e)).every(function(e){return e==e&&"number"==typeof e}))throw new TypeError("Expecting euler to have numbers.");if("string"!=typeof(r=r||e.order||null))throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":s(r))+".");var i=Math.cos(.5*e[0]),o=Math.cos(.5*e[1]),a=Math.cos(.5*e[2]),u=Math.sin(.5*e[0]),c=Math.sin(.5*e[1]),l=Math.sin(.5*e[2]),f=0,h=0,p=0,d=1;if("xyz"==r)f=u*o*a+i*c*l,h=i*c*a-u*o*l,p=i*o*l+u*c*a,d=i*o*a-u*c*l;else if("yxz"==r)f=u*o*a+i*c*l,h=i*c*a-u*o*l,p=i*o*l-u*c*a,d=i*o*a+u*c*l;else if("zxy"==r)f=u*o*a-i*c*l,h=i*c*a+u*o*l,p=i*o*l+u*c*a,d=i*o*a-u*c*l;else if("zyx"==r)f=u*o*a-i*c*l,h=i*c*a+u*o*l,p=i*o*l-u*c*a,d=i*o*a+u*c*l;else if("yzx"==r)f=u*o*a+i*c*l,h=i*c*a+u*o*l,p=i*o*l-u*c*a,d=i*o*a-u*c*l;else{if("xzy"!=r)throw new TypeError("Unhandled Euler angle order. Got "+r+".");f=u*o*a-i*c*l,h=i*c*a-u*o*l,p=i*o*l+u*c*a,d=i*o*a+u*c*l}return new t(f,h,p,d)}}]),t}(h.Vector)},{"../core/types":19,"../core/vector":20,"../core/vector_swizzle_map":21,"./euler":48,defined:148}],51:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector1=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),c=e("../core/vector");r.Vector1=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),u(t,null,[{key:"swizzles",value:function(){return s.Vector}}]),t}(c.Vector)},{"../core/vector":20,"../core/vector_swizzle_map":21}],52:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector2=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),c=e("../core/vector");r.Vector2=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return o(t,e),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}(c.Vector)},{"../core/vector":20,"../core/vector_swizzle_map":21}],53:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector3=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),c=e("../core/vector");r.Vector3=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o))}return o(t,e),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"r",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"g",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"b",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}(c.Vector)},{"../core/vector":20,"../core/vector_swizzle_map":21}],54:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector4=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core/vector_swizzle_map")),c=e("../core/vector");r.Vector4=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,a))}return o(t,e),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=e}},{key:"r",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"g",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"b",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"a",get:function(){return this[3]},set:function(e){return this[3]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}(c.Vector)},{"../core/vector":20,"../core/vector_swizzle_map":21}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./lines");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},{"./lines":56}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.LinesMesh=r.kDefaultLinesMeshVertexShader=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=e("../stats"),f=e("../core/geometry"),h=e("../core/mesh"),p=n(e("screen-projected-lines")),d=n(e("mesh-reindex")),g=n(e("unindex-mesh")),y=(e("glslify"),n(e("normals"))),m=r.kDefaultLinesMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n/**\n */\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n};\n\nvec4 linevoffset (vec4 p, vec4 n, float direction_0, float aspect_0) { \n  vec2 sp = p.xy/p.w*vec2(aspect_0,1);\n  vec2 sn = n.xy/n.w*vec2(aspect_0,1);\n  vec2 dir = normalize(sn-sp);\n  vec2 norm = dir.yx*vec2(-1.0/aspect_0,1);\n  return vec4(direction_0*norm,0,0);\n}\n\n//\n// Shader uniforms.\n//\nuniform Mesh mesh;\nuniform Camera camera;\nuniform float time;\nuniform float thickness;\n\n//\n// Shader IO.\n//\nattribute vec3 nextPosition;\nattribute float direction;\nattribute vec3 position;\nattribute vec3 normal;\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\nvec3 lerp(vec3 a, vec3 b, float t) {\n  return vec3(\n    a.x + t * (b.x - a.x),\n    a.y + t * (b.y - a.y),\n    a.z + t * (b.z - a.z)\n  );\n}\n\n//\n// Shader entry.\n//\n\nvoid main() {\n  // @TODO(werle) - abstract to geomorping interface\n  //float p = random(position.xy);\n  //vec3 pos = lerp(position, position + vec3(p, p, p), cos(0.5*time));\n\n  // @TODO(werle) - abstract to geomorping interface\n  //float np = random(nextPosition.yz);\n  //vec3 npos = lerp(nextPosition, nextPosition + vec3(np, np, np), sin(0.1*time));\n  vec4 linePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0)\n    ;\n\n  vec4 nextLinePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(nextPosition, 1.0)\n    ;\n\n  vec4 lineOffset = linevoffset(\n      linePosition,\n      nextLinePosition,\n      direction, camera.aspect);\n\n  gl_Position = linePosition + lineOffset*thickness;\n\n  // GeometryContext\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  vnormal = normalize(mesh.modelNormal * normal);\n}\n";r.LinesMesh=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,l.incrementStat)("LinesMesh");var n=m,u=r.geometry,s=r.thickness,M=void 0===s?.005:s,v=u.complex,b=void 0===v?u:v,w=b.cells.map(function(e){return e.slice()}),x=(0,d.default)((0,g.default)(b.positions,w));b.normals=y.default.vertexNormals(x.cells,x.positions),Object.assign({},b,w);var D=(0,p.default)(b,{attributes:{normals:b.normals}});return D.normals=D.attributes.normals,u=new f.Geometry({complex:D,flatten:!1}),u.complex.normals=D.normals,r.geometry=u,a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},r,{primitive:"triangles",geometry:u,vert:n,uniforms:Object.assign(new h.MeshUniforms(e,r),{thickness:function(e,t){var r=t.thickness,n=void 0===r?M:r;return i(e),n}}),attributes:Object.assign(new h.MeshAttributes(e,r),{nextPosition:D.nextPositions,direction:D.directions})})))}return u(t,e),t}(h.Mesh)},{"../core/geometry":9,"../core/mesh":14,"../stats":57,glslify:331,"mesh-reindex":343,normals:354,"screen-projected-lines":408,"unindex-mesh":427}],57:[function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":d(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":d(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){if("string"!=typeof e)throw new M(e);return null==y[e]&&(y[e]=[]),y[e]}function u(e,t){a(e);var r=new m(e,t);return y[e].push(r),r}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(e);var r=h(e),n=t;return r&&(n=(r.info||0)+t),u(e,n),n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(e);var r=h(e),n=0;return r&&(n=r.info-t),u(e,n),n}function l(e){if("string"!=typeof e)throw new M(e);y[e]&&Array.isArray(y[e])?y[e].splice(y[e.length]):y[e]=[]}function f(e){if("string"!=typeof e)throw new M(e);return y[e]?y[e][0]||null:null}function h(e){if(y[e]){var t=y[e].length||0;return y[e][t-1]||null}return null}function p(e){if("string"!=typeof e)throw new M(e);return y[e]||null}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"===d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)};r.createStatList=a,r.registerStat=u,r.incrementStat=s,r.decrementStat=c,r.clearStats=l,r.headStat=f,r.tailStat=h,r.getStats=p;var y={},m=r.Stat=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o(this,e),"string"!=typeof t)throw new M(t);this.name=t,this.info=r,this.timestamp=Date.now()},M=r.StatNameError=function(e){function t(e){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Expecting stat name to be a string. Got "+(void 0===e?"undefined":g(e))))}return i(t,e),t}(TypeError)},{}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=r.ensureRGBA=r.clampToMaxSize=r.scaleWithCanvas=r.createCanvas=r.makePowerOfTwo=r.nearestPowerOfTwo=r.getScreenOrientation=r.lerp=r.debug=r.radians=r.define=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=n(e("debug")),u=n(e("global/window")),s=n(e("clamp")),c=Object.getPrototypeOf(Float32Array.prototype).constructor,l=Math.round,f=Math.pow,h=(r.define=function(e,t,r){return Object.defineProperty(e,t,o({},r))},r.radians=function(e){return e==e?e*Math.PI/180:0},r.debug=(0,a.default)("[axis@0.1.13]"),r.lerp=function(e,t,r){return e*(1-r)+t*r},r.getScreenOrientation=function(){switch(u.default.screen.orientation||u.default.screen.mozOrientation){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return u.default.orientation||0},r.nearestPowerOfTwo=function(e){return f(2,l(Math.log(e)/Math.LN2))}),p=r.makePowerOfTwo=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=d(),r=t.getContext("2d");return t.width=h(e.width),t.height=h(e.height),r.drawImage(e,0,0,t.width,t.height),t}return e},d=r.createCanvas=function(){return document.createElementNS("http://www.w3.org/1999/xhtml","canvas")},g=r.scaleWithCanvas=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(),i=n.getContext("2d"),o=e.width,a=e.height;return r&&(o=h(o),a=h(a)),n.width=Math.floor(e.width*t),n.height=Math.floor(e.height*t),i.drawImage(e,0,0,o,a,0,0,n.width,n.height),n};r.clampToMaxSize=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height);return g(e,n,r)}return r?p(e):e},r.ensureRGBA=function(e){e=[].concat(i(e||[]));for(var t=0;t<3;++t)"number"!=typeof e[t]?e[t]=0:e[t]=(0,s.default)(e[t],0,1);return"number"!=typeof e[3]?e[3]=1:e[3]=(0,s.default)(e[3],0,1),[].concat(i(e)).slice(0,4)},r.isArrayLike=function(e){return Boolean(e&&(Array.isArray(e)||e instanceof c||"number"==e.length&&"function"==typeof e[Symbol.iterator]))}},{clamp:100,debug:146,"global/window":320}],59:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,u,s=e.length;a=n(e),u=new f(3*s/4-a),i=a>0?s-4:s;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)o=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],u[c++]=o>>16&255,u[c++]=o>>8&255,u[c++]=255&o;return 2===a?(o=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,u[c++]=255&o):1===a&&(o=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,u[c++]=o>>8&255,u[c++]=255&o),u}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function u(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function s(e){for(var t,r=e.length,n=r%3,i="",o=[],a=0,s=r-n;a<s;a+=16383)o.push(u(e,a,a+16383>s?s:a+16383));return 1===n?(t=e[r-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=i,r.toByteArray=o,r.fromByteArray=s;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)c[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],60:[function(e,t,r){"use strict";function n(e,t){return i(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=n},{"./lib/rationalize":70}],61:[function(e,t,r){"use strict";function n(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}t.exports=n},{}],62:[function(e,t,r){"use strict";function n(e,t){return i(e[0].mul(t[1]),e[1].mul(t[0]))}var i=e("./lib/rationalize");t.exports=n},{"./lib/rationalize":70}],63:[function(e,t,r){"use strict";function n(e,t){if(i(e))return t?c(e,n(t)):[e[0].clone(),e[1].clone()];var r,l,f=0;if(o(e))r=e.clone();else if("string"==typeof e)r=u(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))r=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),f-=256;r=a(e)}}if(i(t))r.mul(t[1]),l=t[0].clone();else if(o(t))l=t.clone();else if("string"==typeof t)l=u(t);else if(t)if(t===Math.floor(t))l=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),f+=256;l=a(t)}else l=a(1);return f>0?r=r.ushln(f):f<0&&(l=l.ushln(-f)),s(r,l)}var i=e("./is-rat"),o=e("./lib/is-bn"),a=e("./lib/num-to-bn"),u=e("./lib/str-to-bn"),s=e("./lib/rationalize"),c=e("./div");t.exports=n},{"./div":62,"./is-rat":64,"./lib/is-bn":68,"./lib/num-to-bn":69,"./lib/rationalize":70,"./lib/str-to-bn":71}],64:[function(e,t,r){"use strict";function n(e){return Array.isArray(e)&&2===e.length&&i(e[0])&&i(e[1])}var i=e("./lib/is-bn");t.exports=n},{"./lib/is-bn":68}],65:[function(e,t,r){"use strict";function n(e){return e.cmp(new i(0))}var i=e("bn.js");t.exports=n},{"bn.js":78}],66:[function(e,t,r){"use strict";function n(e){var t=e.length,r=e.words,n=0;if(1===t)n=r[0];else if(2===t)n=r[0]+67108864*r[1];else for(var o=0;o<t;o++)n+=r[o]*Math.pow(67108864,o);return i(e)*n}var i=e("./bn-sign");t.exports=n},{"./bn-sign":65}],67:[function(e,t,r){"use strict";function n(e){var t=o(i.lo(e));if(t<32)return t;var r=o(i.hi(e));return r>20?52:r+32}var i=e("double-bits"),o=e("bit-twiddle").countTrailingZeros;t.exports=n},{"bit-twiddle":77,"double-bits":150}],68:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&Boolean(e.words)}e("bn.js");t.exports=n},{"bn.js":78}],69:[function(e,t,r){"use strict";function n(e){var t=o.exponent(e);return t<52?new i(e):new i(e*Math.pow(2,52-t)).ushln(t-52)}var i=e("bn.js"),o=e("double-bits");t.exports=n},{"bn.js":78,"double-bits":150}],70:[function(e,t,r){"use strict";function n(e,t){var r=o(e),n=o(t);if(0===r)return[i(0),i(1)];if(0===n)return[i(0),i(0)];n<0&&(e=e.neg(),t=t.neg());var a=e.gcd(t);return a.cmpn(1)?[e.div(a),t.div(a)]:[e,t]}var i=e("./num-to-bn"),o=e("./bn-sign");t.exports=n},{"./bn-sign":65,"./num-to-bn":69}],71:[function(e,t,r){"use strict";function n(e){return new i(e)}var i=e("bn.js");t.exports=n},{"bn.js":78}],72:[function(e,t,r){"use strict";function n(e,t){return i(e[0].mul(t[0]),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=n},{"./lib/rationalize":70}],73:[function(e,t,r){"use strict";function n(e){return i(e[0])*i(e[1])}var i=e("./lib/bn-sign");t.exports=n},{"./lib/bn-sign":65}],74:[function(e,t,r){"use strict";function n(e,t){return i(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=n},{"./lib/rationalize":70}],75:[function(e,t,r){"use strict";function n(e){var t=e[0],r=e[1];if(0===t.cmpn(0))return 0;var n=t.abs().divmod(r.abs()),a=n.div,u=i(a),s=n.mod,c=t.negative!==r.negative?-1:1;if(0===s.cmpn(0))return c*u;if(u){var l=o(u)+4;return c*(u+(h=i(s.ushln(l).divRound(r)))*Math.pow(2,-l))}var f=r.bitLength()-s.bitLength()+53,h=i(s.ushln(f).divRound(r));return f<1023?c*h*Math.pow(2,-f):(h*=Math.pow(2,-1023),c*h*Math.pow(2,1023-f))}var i=e("./lib/bn-to-num"),o=e("./lib/ctz");t.exports=n},{"./lib/bn-to-num":66,"./lib/ctz":67}],76:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){var a=["function ",e,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function i(e,t,r,i){return new Function([n("A","x"+e+"y",t,["y"],!1,i),n("B","x"+e+"y",t,["y"],!0,i),n("P","c(x,y)"+e+"0",t,["y","c"],!1,i),n("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],77:[function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(e){return(e>0)-(e<0)},r.abs=function(e){var t=e>>31;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),r.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},r.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},r.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},r.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},r.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],78:[function(e,t,r){!function(t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}function a(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var a=e.charCodeAt(o)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),a=t;a<o;a++){var u=e.charCodeAt(a)-48;i*=n,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}function s(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}function c(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,u=67108863&a,s=a/67108864|0;r.words[0]=u;for(var c=1;c<n;c++){for(var l=s>>>26,f=67108863&s,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var d=c-p|0;l+=(a=(i=0|e.words[d])*(o=0|t.words[p])+f)/67108864|0,f=67108863&a}r.words[c]=0|f,s=0|l}return 0!==s?r.words[c]=0|s:r.length--,r.strip()}function l(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var u=67108863&n,s=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=s;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;u=67108863&(h=h+u|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=u,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function f(e,t,r){return(new h).mulp(e,t,r)}function h(e,t){this.x=e,this.y=t}function p(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function m(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function v(e){M.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof t?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var b;try{b=e("buffer").Buffer}catch(t){}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,u=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=a(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=a(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,c=0,l=r;l<s;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=u(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){e=e||10,t=0|t||1;var r;if(16===e||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var u=this.words[a],s=(16777215&(u<<i|o)).toString(16);r=0!==(o=u>>>24-i&16777215)||a!==this.length-1?w[6-s.length]+s+r:s+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=x[e],l=D[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var h=f.modn(l).toString(e);r=(f=f.idivn(l)).isZero()?h+r:w[c-h.length]+h+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return n(void 0!==b),this.toArrayLike(b,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,u,s="le"===t,c=new e(o),l=this.clone();if(s){for(u=0;!l.isZero();u++)a=l.andln(255),l.iushrn(8),c[u]=a;for(;u<o;u++)c[u]=0}else{for(u=0;u<o-i;u++)c[u]=0;for(u=0;!l.isZero();u++)a=l.andln(255),l.iushrn(8),c[o-u-1]=a}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var r,n;this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var n,i;r>0?(n=this,i=e):(n=e,i=this);for(var o=0,a=0;a<i.length;a++)t=(0|n.words[a])-(0|i.words[a])+o,o=t>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)t=(0|n.words[a])+o,o=t>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var j=function(e,t,r){var n,i,o,a=e.words,u=t.words,s=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],m=8191&y,M=y>>>13,v=0|a[3],b=8191&v,w=v>>>13,x=0|a[4],D=8191&x,j=x>>>13,N=0|a[5],A=8191&N,L=N>>>13,T=0|a[6],E=8191&T,I=T>>>13,O=0|a[7],_=8191&O,S=O>>>13,C=0|a[8],z=8191&C,k=C>>>13,P=0|a[9],Q=8191&P,U=P>>>13,B=0|u[0],Y=8191&B,R=B>>>13,F=0|u[1],G=8191&F,V=F>>>13,W=0|u[2],H=8191&W,q=W>>>13,X=0|u[3],Z=8191&X,K=X>>>13,J=0|u[4],$=8191&J,ee=J>>>13,te=0|u[5],re=8191&te,ne=te>>>13,ie=0|u[6],oe=8191&ie,ae=ie>>>13,ue=0|u[7],se=8191&ue,ce=ue>>>13,le=0|u[8],fe=8191&le,he=le>>>13,pe=0|u[9],de=8191&pe,ge=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,Y))|0)+((8191&(i=(i=Math.imul(f,R))+Math.imul(h,Y)|0))<<13)|0;c=((o=Math.imul(h,R))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(d,Y),i=(i=Math.imul(d,R))+Math.imul(g,Y)|0,o=Math.imul(g,R);var me=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,Y),i=(i=Math.imul(m,R))+Math.imul(M,Y)|0,o=Math.imul(M,R),n=n+Math.imul(d,G)|0,i=(i=i+Math.imul(d,V)|0)+Math.imul(g,G)|0,o=o+Math.imul(g,V)|0;var Me=(c+(n=n+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,H)|0))<<13)|0;c=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(b,Y),i=(i=Math.imul(b,R))+Math.imul(w,Y)|0,o=Math.imul(w,R),n=n+Math.imul(m,G)|0,i=(i=i+Math.imul(m,V)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,V)|0,n=n+Math.imul(d,H)|0,i=(i=i+Math.imul(d,q)|0)+Math.imul(g,H)|0,o=o+Math.imul(g,q)|0;var ve=(c+(n=n+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,Z)|0))<<13)|0;c=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,R))+Math.imul(j,Y)|0,o=Math.imul(j,R),n=n+Math.imul(b,G)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,V)|0,n=n+Math.imul(m,H)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(M,H)|0,o=o+Math.imul(M,q)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,K)|0;var be=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(A,Y),i=(i=Math.imul(A,R))+Math.imul(L,Y)|0,o=Math.imul(L,R),n=n+Math.imul(D,G)|0,i=(i=i+Math.imul(D,V)|0)+Math.imul(j,G)|0,o=o+Math.imul(j,V)|0,n=n+Math.imul(b,H)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,q)|0,n=n+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,K)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,ee)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,ee)|0;var we=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(E,Y),i=(i=Math.imul(E,R))+Math.imul(I,Y)|0,o=Math.imul(I,R),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,V)|0,n=n+Math.imul(D,H)|0,i=(i=i+Math.imul(D,q)|0)+Math.imul(j,H)|0,o=o+Math.imul(j,q)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(m,$)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(d,re)|0,i=(i=i+Math.imul(d,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var xe=(c+(n=n+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(_,Y),i=(i=Math.imul(_,R))+Math.imul(S,Y)|0,o=Math.imul(S,R),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,V)|0,n=n+Math.imul(A,H)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,q)|0,n=n+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,K)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,ee)|0,n=n+Math.imul(m,re)|0,i=(i=i+Math.imul(m,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(d,oe)|0,i=(i=i+Math.imul(d,ae)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,ae)|0;var De=(c+(n=n+Math.imul(f,se)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,se)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863,n=Math.imul(z,Y),i=(i=Math.imul(z,R))+Math.imul(k,Y)|0,o=Math.imul(k,R),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,V)|0,n=n+Math.imul(E,H)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,q)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(D,$)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,ee)|0,n=n+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ne)|0)+Math.imul(w,re)|0,o=o+Math.imul(w,ne)|0,n=n+Math.imul(m,oe)|0,i=(i=i+Math.imul(m,ae)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,ae)|0,n=n+Math.imul(d,se)|0,i=(i=i+Math.imul(d,ce)|0)+Math.imul(g,se)|0,o=o+Math.imul(g,ce)|0;var je=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul(Q,Y),i=(i=Math.imul(Q,R))+Math.imul(U,Y)|0,o=Math.imul(U,R),n=n+Math.imul(z,G)|0,i=(i=i+Math.imul(z,V)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,V)|0,n=n+Math.imul(_,H)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,q)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ne)|0)+Math.imul(j,re)|0,o=o+Math.imul(j,ne)|0,n=n+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,ae)|0,n=n+Math.imul(m,se)|0,i=(i=i+Math.imul(m,ce)|0)+Math.imul(M,se)|0,o=o+Math.imul(M,ce)|0,n=n+Math.imul(d,fe)|0,i=(i=i+Math.imul(d,he)|0)+Math.imul(g,fe)|0,o=o+Math.imul(g,he)|0;var Ne=(c+(n=n+Math.imul(f,de)|0)|0)+((8191&(i=(i=i+Math.imul(f,ge)|0)+Math.imul(h,de)|0))<<13)|0;c=((o=o+Math.imul(h,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(Q,G),i=(i=Math.imul(Q,V))+Math.imul(U,G)|0,o=Math.imul(U,V),n=n+Math.imul(z,H)|0,i=(i=i+Math.imul(z,q)|0)+Math.imul(k,H)|0,o=o+Math.imul(k,q)|0,n=n+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(L,re)|0,o=o+Math.imul(L,ne)|0,n=n+Math.imul(D,oe)|0,i=(i=i+Math.imul(D,ae)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,ae)|0,n=n+Math.imul(b,se)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(w,se)|0,o=o+Math.imul(w,ce)|0,n=n+Math.imul(m,fe)|0,i=(i=i+Math.imul(m,he)|0)+Math.imul(M,fe)|0,o=o+Math.imul(M,he)|0;var Ae=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(g,de)|0))<<13)|0;c=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(Q,H),i=(i=Math.imul(Q,q))+Math.imul(U,H)|0,o=Math.imul(U,q),n=n+Math.imul(z,Z)|0,i=(i=i+Math.imul(z,K)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(_,$)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(I,re)|0,o=o+Math.imul(I,ne)|0,n=n+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,n=n+Math.imul(D,se)|0,i=(i=i+Math.imul(D,ce)|0)+Math.imul(j,se)|0,o=o+Math.imul(j,ce)|0,n=n+Math.imul(b,fe)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(w,fe)|0,o=o+Math.imul(w,he)|0;var Le=(c+(n=n+Math.imul(m,de)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(M,de)|0))<<13)|0;c=((o=o+Math.imul(M,ge)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(Q,Z),i=(i=Math.imul(Q,K))+Math.imul(U,Z)|0,o=Math.imul(U,K),n=n+Math.imul(z,$)|0,i=(i=i+Math.imul(z,ee)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(S,re)|0,o=o+Math.imul(S,ne)|0,n=n+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,ae)|0,n=n+Math.imul(A,se)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(L,se)|0,o=o+Math.imul(L,ce)|0,n=n+Math.imul(D,fe)|0,i=(i=i+Math.imul(D,he)|0)+Math.imul(j,fe)|0,o=o+Math.imul(j,he)|0;var Te=(c+(n=n+Math.imul(b,de)|0)|0)+((8191&(i=(i=i+Math.imul(b,ge)|0)+Math.imul(w,de)|0))<<13)|0;c=((o=o+Math.imul(w,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(Q,$),i=(i=Math.imul(Q,ee))+Math.imul(U,$)|0,o=Math.imul(U,ee),n=n+Math.imul(z,re)|0,i=(i=i+Math.imul(z,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,ae)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,ae)|0,n=n+Math.imul(E,se)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(I,se)|0,o=o+Math.imul(I,ce)|0,n=n+Math.imul(A,fe)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(L,fe)|0,o=o+Math.imul(L,he)|0;var Ee=(c+(n=n+Math.imul(D,de)|0)|0)+((8191&(i=(i=i+Math.imul(D,ge)|0)+Math.imul(j,de)|0))<<13)|0;c=((o=o+Math.imul(j,ge)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(Q,re),i=(i=Math.imul(Q,ne))+Math.imul(U,re)|0,o=Math.imul(U,ne),n=n+Math.imul(z,oe)|0,i=(i=i+Math.imul(z,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,n=n+Math.imul(_,se)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(S,se)|0,o=o+Math.imul(S,ce)|0,n=n+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(I,fe)|0,o=o+Math.imul(I,he)|0;var Ie=(c+(n=n+Math.imul(A,de)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(L,de)|0))<<13)|0;c=((o=o+Math.imul(L,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(Q,oe),i=(i=Math.imul(Q,ae))+Math.imul(U,oe)|0,o=Math.imul(U,ae),n=n+Math.imul(z,se)|0,i=(i=i+Math.imul(z,ce)|0)+Math.imul(k,se)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(_,fe)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(S,fe)|0,o=o+Math.imul(S,he)|0;var Oe=(c+(n=n+Math.imul(E,de)|0)|0)+((8191&(i=(i=i+Math.imul(E,ge)|0)+Math.imul(I,de)|0))<<13)|0;c=((o=o+Math.imul(I,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(Q,se),i=(i=Math.imul(Q,ce))+Math.imul(U,se)|0,o=Math.imul(U,ce),n=n+Math.imul(z,fe)|0,i=(i=i+Math.imul(z,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var _e=(c+(n=n+Math.imul(_,de)|0)|0)+((8191&(i=(i=i+Math.imul(_,ge)|0)+Math.imul(S,de)|0))<<13)|0;c=((o=o+Math.imul(S,ge)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(Q,fe),i=(i=Math.imul(Q,he))+Math.imul(U,fe)|0,o=Math.imul(U,he);var Se=(c+(n=n+Math.imul(z,de)|0)|0)+((8191&(i=(i=i+Math.imul(z,ge)|0)+Math.imul(k,de)|0))<<13)|0;c=((o=o+Math.imul(k,ge)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863;var Ce=(c+(n=Math.imul(Q,de))|0)+((8191&(i=(i=Math.imul(Q,ge))+Math.imul(U,de)|0))<<13)|0;return c=((o=Math.imul(U,ge))+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s[0]=ye,s[1]=me,s[2]=Me,s[3]=ve,s[4]=be,s[5]=we,s[6]=xe,s[7]=De,s[8]=je,s[9]=Ne,s[10]=Ae,s[11]=Le,s[12]=Te,s[13]=Ee,s[14]=Ie,s[15]=Oe,s[16]=_e,s[17]=Se,s[18]=Ce,0!==c&&(s[19]=c,r.length++),r};Math.imul||(j=c),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?j(this,e,t):r<63?c(this,e,t):r<1024?l(this,e,t):f(this,e,t)},h.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},h.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},h.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},h.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var u=a<<1,s=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),l=0;l<i;l+=u)for(var f=s,h=c,p=0;p<a;p++){var d=r[l+p],g=n[l+p],y=r[l+p+a],m=n[l+p+a],M=f*y-h*m;m=f*m+h*y,y=M,r[l+p]=d+y,n[l+p]=g+m,r[l+p+a]=d-y,n[l+p+a]=g-m,p!==u&&(M=s*f-c*h,h=s*h+c*f,f=M)}},h.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},h.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},h.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},h.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},h.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},h.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),u=new Array(n),s=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,u,s,n,i),this.transform(c,o,l,f,n,i);for(var p=0;p<n;p++){var d=u[p]*l[p]-s[p]*f[p];s[p]=u[p]*f[p]+s[p]*l[p],u[p]=d}return this.conjugate(u,s,n),this.transform(u,s,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),f(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=s(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var u=this.words[t]&o,s=(0|this.words[t])-u<<r;this.words[t]=s|a,a=u>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){n("number"==typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),u=67108863^67108863>>>o<<o,s=r;if(i-=a,i=Math.max(0,i),s){for(var c=0;c<a;c++)s.words[c]=this.words[c];s.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&u}return s&&0!==l&&(s.words[s.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},o.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o=e.length+r;this._expand(o);var a,u=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+u;var s=(0|e.words[i])*t;u=((a-=67108863&s)>>26)-(s/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)a=(0|this.words[i+r])+u,u=a>>26,this.words[i+r]=67108863&a;if(0===u)return this.strip();for(n(-1===u),u=0,i=0;i<this.length;i++)a=-(0|this.words[i])+u,u=a>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,a=0|i.words[i.length-1];0!=(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var u,s=n.length-i.length;if("mod"!==t){(u=new o(null)).length=s+1,u.words=new Array(u.length);for(var c=0;c<u.length;c++)u.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,s);0===l.negative&&(n=l,u&&(u.words[s]=1));for(var f=s-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=h)}return u&&u.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(e,t,r){if(n(!e.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var i,a,u;return 0!==this.negative&&0===e.negative?(u=this.neg().divmod(e,t),"mod"!==t&&(i=u.div.neg()),"div"!==t&&(a=u.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(u=this.divmod(e.neg(),t),"mod"!==t&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&e.negative)?(u=this.neg().divmod(e.neg(),t),"div"!==t&&(a=u.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:u.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},o.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),u=new o(0),s=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(r.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(u.isOdd()||s.isOdd())&&(u.iadd(l),s.isub(f)),u.iushrn(1),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(u),a.isub(s)):(r.isub(t),u.isub(i),s.isub(a))}return{a:u,b:s,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var s=0,c=1;0==(t.words[0]&c)&&s<26;++s,c<<=1);if(s>0)for(t.iushrn(s);s-- >0;)i.isOdd()&&i.iadd(u),i.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a)):(r.isub(t),a.isub(i))}var h;return(h=0===t.cmpn(1)?i:a).cmpn(0)<0&&h.iadd(e),h},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var u=0|this.words[a];o=(u+=o)>>>26,u&=67108863,this.words[a]=u}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var r;if(this.length>1)r=1;else{t&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];r=i===e?0:i<e?-1:1}return 0!==this.negative?0|-r:r},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new M(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var N={k256:null,p224:null,p192:null,p25519:null};p.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},p.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},p.prototype.split=function(e,t){e.iushrn(this.n,0,t)},p.prototype.imulK=function(e){return e.imul(this.k)},i(d,p),d.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},d.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(g,p),i(y,p),i(m,p),m.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(N[e])return N[e];var t;if("k256"===e)t=new d;else if("p224"===e)t=new g;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new m}return N[e]=t,t},M.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},M.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},M.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},M.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},M.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},M.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},M.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},M.prototype.isqr=function(e){return this.imul(e,e.clone())},M.prototype.sqr=function(e){return this.mul(e,e)},M.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var u=new o(1).toRed(this),s=u.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(s);)l.redIAdd(s);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),d=a;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();n(y<d);var m=this.pow(f,new o(1).iushln(d-y-1));h=h.redMul(m),f=m.redSqr(),p=p.redMul(f),d=y}return h},M.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},M.prototype.pow=function(e,t){if(t.isZero())return new o(1);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,u=0,s=t.bitLength()%26;for(0===s&&(s=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=s-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4==++u||0===n&&0===l)&&(i=this.mul(i,r[a]),u=0,a=0)):u=0}s=26}return i},M.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},M.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new v(e)},i(v,M),v.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},v.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},v.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},v.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},v.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:88}],79:[function(e,t,r){"use strict";function n(e){var t=e.length;if(0===t)return[[],[]];for(var r=e[0].length,n=e[0].slice(),i=e[0].slice(),o=1;o<t;++o)for(var a=e[o],u=0;u<r;++u){var s=a[u];n[u]=Math.min(n[u],s),i[u]=Math.max(i[u],s)}return[n,i]}t.exports=n},{}],80:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e;++r)if(!(t[r]<=t[r+e]))return!0;return!1}function i(e,t,r,i){for(var o=0,a=0,u=0,s=e.length;u<s;++u){var c=e[u];if(!n(t,c)){for(var l=0;l<2*t;++l)r[o++]=c[l];i[a++]=u}}return a}function o(e,t,r,n){var o=e.length,a=t.length;if(!(o<=0||a<=0)){var u=e[0].length>>>1;if(!(u<=0)){var s,c=f.mallocDouble(2*u*o),l=f.mallocInt32(o);if((o=i(e,u,c,l))>0){if(1===u&&n)h.init(o),s=h.sweepComplete(u,r,0,o,c,l,0,o,c,l);else{var d=f.mallocDouble(2*u*a),g=f.mallocInt32(a);(a=i(t,u,d,g))>0&&(h.init(o+a),s=1===u?h.sweepBipartite(u,r,0,o,c,l,0,a,d,g):p(u,r,n,o,c,l,a,d,g),f.free(d),f.free(g))}f.free(c),f.free(l)}return s}}}function a(e,t){l.push([e,t])}function u(e){return l=[],o(e,e,a,!0),l}function s(e,t){return l=[],o(e,t,a,!1),l}function c(e,t,r){switch(arguments.length){case 1:return u(e);case 2:return"function"==typeof t?o(e,e,t,!0):s(e,t);case 3:return o(e,t,r,!1);default:throw new Error("box-intersect: Invalid arguments")}}t.exports=c;var l,f=e("typedarray-pool"),h=e("./lib/sweep"),p=e("./lib/intersect")},{"./lib/intersect":82,"./lib/sweep":86,"typedarray-pool":426}],81:[function(e,t,r){"use strict";function n(e,t,r){var n="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(r?"Full":""),i=["function ",n,"(",x.join(),"){","var ",c,"=2*",o,";"],s="for(var i="+l+","+d+"="+c+"*"+l+";i<"+f+";++i,"+d+"+="+c+"){var x0="+h+"["+a+"+"+d+"],x1="+h+"["+a+"+"+d+"+"+o+"],xi="+p+"[i];",D="for(var j="+g+","+v+"="+c+"*"+g+";j<"+y+";++j,"+v+"+="+c+"){var y0="+m+"["+a+"+"+v+"],"+(r?"y1="+m+"["+a+"+"+v+"+"+o+"],":"")+"yi="+M+"[j];";return e?i.push(s,w,":",D):i.push(D,w,":",s),r?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+a+"+1;k<"+o+";++k){var r0="+h+"[k+"+d+"],r1="+h+"[k+"+o+"+"+d+"],b0="+m+"[k+"+v+"],b1="+m+"[k+"+o+"+"+v+"];if(r1<b0||b1<r0)continue "+w+";}var "+b+"="+u+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:n,code:i.join("")}}function i(e){function t(t,r){var o=n(t,r,e);i.push(o.code),a.push("return "+o.name+"("+x.join()+");")}var r="bruteForce"+(e?"Full":"Partial"),i=[],o=x.slice();e||o.splice(3,0,s);var a=["function "+r+"("+o.join()+"){"];a.push("if("+f+"-"+l+">"+y+"-"+g+"){"),e?(t(!0,!1),a.push("}else{"),t(!1,!1)):(a.push("if("+s+"){"),t(!0,!0),a.push("}else{"),t(!0,!1),a.push("}}else{if("+s+"){"),t(!1,!0),a.push("}else{"),t(!1,!1),a.push("}")),a.push("}}return "+r);var u=i.join("")+a.join("");return new Function(u)()}var o="d",a="ax",u="vv",s="fp",c="es",l="rs",f="re",h="rb",p="ri",d="rp",g="bs",y="be",m="bb",M="bi",v="bp",b="rv",w="Q",x=[o,a,u,l,f,h,p,g,y,m,M];r.partial=i(!1),r.full=i(!0)},{}],82:[function(e,t,r){"use strict";function n(e,t){var r=8*c.log2(t+1)*(e+1)|0,n=c.nextPow2(N*r);L.length<n&&(s.free(L),L=s.mallocInt32(n));var i=c.nextPow2(A*r);T<i&&(s.free(T),T=s.mallocDouble(i))}function i(e,t,r,n,i,o,a,u,s){var c=N*e;L[c]=t,L[c+1]=r,L[c+2]=n,L[c+3]=i,L[c+4]=o,L[c+5]=a;var l=A*e;T[l]=u,T[l+1]=s}function o(e,t,r,n,i,o,a,u,s,c,l){var f=2*e,h=s*f,p=c[h+t];e:for(var d=i,g=i*f;d<o;++d,g+=f){var y=a[g+t],m=a[g+t+e];if(!(p<y||m<p||n&&p===y)){for(var M=u[d],v=t+1;v<e;++v){var y=a[g+v],m=a[g+v+e],b=c[h+v],w=c[h+v+e];if(m<b||w<y)continue e}var x;if(void 0!==(x=n?r(l,M):r(M,l)))return x}}}function a(e,t,r,n,i,o,a,u,s,c){var l=2*e,f=u*l,h=s[f+t];e:for(var p=n,d=n*l;p<i;++p,d+=l){var g=a[p];if(g!==c){var y=o[d+t],m=o[d+t+e];if(!(h<y||m<h)){for(var M=t+1;M<e;++M){var y=o[d+M],m=o[d+M+e],v=s[f+M],b=s[f+M+e];if(m<v||b<y)continue e}var w=r(g,c);if(void 0!==w)return w}}}}function u(e,t,r,u,s,c,l,g,E){n(e,u+l);var I,O=0,_=2*e;for(i(O++,0,0,u,0,l,r?16:0,-1/0,1/0),r||i(O++,0,0,l,0,u,1,-1/0,1/0);O>0;){var S=(O-=1)*N,C=L[S],z=L[S+1],k=L[S+2],P=L[S+3],Q=L[S+4],U=L[S+5],B=O*A,Y=T[B],R=T[B+1],F=1&U,G=!!(16&U),V=s,W=c,H=g,q=E;if(F&&(V=g,W=E,H=s,q=c),!(2&U&&(k=w(e,C,z,k,V,W,R),z>=k)||4&U&&(z=x(e,C,z,k,V,W,Y))>=k)){var X=k-z,Z=Q-P;if(G){if(e*X*(X+Z)<M){if(void 0!==(I=p.scanComplete(e,C,t,z,k,V,W,P,Q,H,q)))return I;continue}}else{if(e*Math.min(X,Z)<y){if(void 0!==(I=f(e,C,t,F,z,k,V,W,P,Q,H,q)))return I;continue}if(e*X*Z<m){if(void 0!==(I=p.scanBipartite(e,C,t,F,z,k,V,W,P,Q,H,q)))return I;continue}}var K=v(e,C,z,k,V,W,Y,R);if(z<K)if(e*(K-z)<y){if(void 0!==(I=h(e,C+1,t,z,K,V,W,P,Q,H,q)))return I}else if(C===e-2){if(void 0!==(I=F?p.sweepBipartite(e,t,P,Q,H,q,z,K,V,W):p.sweepBipartite(e,t,z,K,V,W,P,Q,H,q)))return I}else i(O++,C+1,z,K,P,Q,F,-1/0,1/0),i(O++,C+1,P,Q,z,K,1^F,-1/0,1/0);if(K<k){var J=d(e,C,P,Q,H,q),$=H[_*J+C],ee=b(e,C,J,Q,H,q,$);if(ee<Q&&i(O++,C,K,k,ee,Q,(4|F)+(G?16:0),$,R),P<J&&i(O++,C,K,k,P,J,(2|F)+(G?16:0),Y,$),J+1===ee){if(void 0!==(I=G?a(e,C,t,K,k,V,W,J,H,q[J]):o(e,C,t,F,K,k,V,W,J,H,q[J])))return I}else if(J<ee){var te;if(G){if(te=D(e,C,K,k,V,W,$),K<te){var re=b(e,C,K,te,V,W,$);if(C===e-2){if(K<re&&void 0!==(I=p.sweepComplete(e,t,K,re,V,W,J,ee,H,q)))return I;if(re<te&&void 0!==(I=p.sweepBipartite(e,t,re,te,V,W,J,ee,H,q)))return I}else K<re&&i(O++,C+1,K,re,J,ee,16,-1/0,1/0),re<te&&(i(O++,C+1,re,te,J,ee,0,-1/0,1/0),i(O++,C+1,J,ee,re,te,1,-1/0,1/0))}}else te=F?j(e,C,K,k,V,W,$):D(e,C,K,k,V,W,$),K<te&&(C===e-2?I=F?p.sweepBipartite(e,t,J,ee,H,q,K,te,V,W):p.sweepBipartite(e,t,K,te,V,W,J,ee,H,q):(i(O++,C+1,K,te,J,ee,F,-1/0,1/0),i(O++,C+1,J,ee,K,te,1^F,-1/0,1/0)))}}}}}t.exports=u;var s=e("typedarray-pool"),c=e("bit-twiddle"),l=e("./brute"),f=l.partial,h=l.full,p=e("./sweep"),d=e("./median"),g=e("./partition"),y=128,m=1<<22,M=1<<22,v=g("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),b=g("lo===p0",["p0"]),w=g("lo<p0",["p0"]),x=g("hi<=p0",["p0"]),D=g("lo<=p0&&p0<=hi",["p0"]),j=g("lo<p0&&p0<=hi",["p0"]),N=6,A=2,L=s.mallocInt32(1024),T=s.mallocDouble(1024)},{"./brute":81,"./median":83,"./partition":84,"./sweep":86,"bit-twiddle":77,"typedarray-pool":426}],83:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){for(var a=2*e,u=a*(r+1)+t,s=r+1;s<n;++s,u+=a)for(var c=i[u],l=s,f=a*(s-1);l>r&&i[f+t]>c;--l,f-=a){for(var h=f,p=f+a,d=0;d<a;++d,++h,++p){var g=i[h];i[h]=i[p],i[p]=g}var y=o[l];o[l]=o[l-1],o[l-1]=y}}function i(e,t,r,i,u,s){if(i<=r+1)return r;for(var c=r,l=i,f=i+r>>>1,h=2*e,p=f,d=u[h*f+t];c<l;){if(l-c<a){n(e,t,c,l,u,s),d=u[h*f+t];break}var g=l-c,y=Math.random()*g+c|0,m=u[h*y+t],M=Math.random()*g+c|0,v=u[h*M+t],b=Math.random()*g+c|0,w=u[h*b+t];m<=v?w>=v?(p=M,d=v):m>=w?(p=y,d=m):(p=b,d=w):v>=w?(p=M,d=v):w>=m?(p=y,d=m):(p=b,d=w);for(var x=h*(l-1),D=h*p,j=0;j<h;++j,++x,++D){N=u[x];u[x]=u[D],u[D]=N}A=s[l-1];s[l-1]=s[p],s[p]=A;for(var x=h*(l-1),D=h*(p=o(e,t,c,l-1,u,s,d)),j=0;j<h;++j,++x,++D){var N=u[x];u[x]=u[D],u[D]=N}var A=s[l-1];if(s[l-1]=s[p],s[p]=A,f<p){for(l=p-1;c<l&&u[h*(l-1)+t]===d;)l-=1;l+=1}else{if(!(p<f))break;for(c=p+1;c<l&&u[h*c+t]===d;)c+=1}}return o(e,t,r,f,u,s,u[h*f+t])}t.exports=i;var o=e("./partition")("lo<p0",["p0"]),a=8},{"./partition":84}],84:[function(e,t,r){"use strict";function n(e,t){var r="abcdef".split("").concat(t),n=[];return e.indexOf("lo")>=0&&n.push("lo=e[k+n]"),e.indexOf("hi")>=0&&n.push("hi=e[k+o]"),r.push(i.replace("_",n.join()).replace("$",e)),Function.apply(void 0,r)}t.exports=n;var i="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],85:[function(e,t,r){"use strict";function n(e,t){t<=4*h?i(0,t-1,e):f(0,t-1,e)}function i(e,t,r){for(var n=2*(e+1),i=e+1;i<=t;++i){for(var o=r[n++],a=r[n++],u=i,s=n-2;u-- >e;){var c=r[s-2],l=r[s-1];if(c<o)break;if(c===o&&l<a)break;r[s]=c,r[s+1]=l,s-=2}r[s]=o,r[s+1]=a}}function o(e,t,r){t*=2;var n=r[e*=2],i=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=n,r[t+1]=i}function a(e,t,r){t*=2,r[e*=2]=r[t],r[e+1]=r[t+1]}function u(e,t,r,n){t*=2,r*=2;var i=n[e*=2],o=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=n[r],n[t+1]=n[r+1],n[r]=i,n[r+1]=o}function s(e,t,r,n,i){t*=2,i[e*=2]=i[t],i[t]=r,i[e+1]=i[t+1],i[t+1]=n}function c(e,t,r){t*=2;var n=r[e*=2],i=r[t];return!(n<i)&&(n!==i||r[e+1]>r[t+1])}function l(e,t,r,n){var i=n[e*=2];return i<t||i===t&&n[e+1]<r}function f(e,t,r){var n=(t-e+1)/6|0,p=e+n,d=t-n,g=e+t>>1,y=g-n,m=g+n,M=p,v=y,b=g,w=m,x=d,D=e+1,j=t-1,N=0;c(M,v,r)&&(N=M,M=v,v=N),c(w,x,r)&&(N=w,w=x,x=N),c(M,b,r)&&(N=M,M=b,b=N),c(v,b,r)&&(N=v,v=b,b=N),c(M,w,r)&&(N=M,M=w,w=N),c(b,w,r)&&(N=b,b=w,w=N),c(v,x,r)&&(N=v,v=x,x=N),c(v,b,r)&&(N=v,v=b,b=N),c(w,x,r)&&(N=w,w=x,x=N);for(var A=r[2*v],L=r[2*v+1],T=r[2*w],E=r[2*w+1],I=2*M,O=2*b,_=2*x,S=2*p,C=2*g,z=2*d,k=0;k<2;++k){var P=r[I+k],Q=r[O+k],U=r[_+k];r[S+k]=P,r[C+k]=Q,r[z+k]=U}a(y,e,r),a(m,t,r);for(var B=D;B<=j;++B)if(l(B,A,L,r))B!==D&&o(B,D,r),++D;else if(!l(B,T,E,r))for(;;){if(l(j,T,E,r)){l(j,A,L,r)?(u(B,D,j,r),++D,--j):(o(B,j,r),--j);break}if(--j<B)break}s(e,D-1,A,L,r),s(t,j+1,T,E,r),D-2-e<=h?i(e,D-2,r):f(e,D-2,r),t-(j+2)<=h?i(j+2,t,r):f(j+2,t,r),j-D<=h?i(D,j,r):f(D,j,r)}t.exports=n;var h=32},{}],86:[function(e,t,r){"use strict";function n(e){var t=f.nextPow2(e);d.length<t&&(l.free(d),d=l.mallocInt32(t)),g.length<t&&(l.free(g),g=l.mallocInt32(t)),y.length<t&&(l.free(y),y=l.mallocInt32(t)),m.length<t&&(l.free(m),m=l.mallocInt32(t)),M.length<t&&(l.free(M),M=l.mallocInt32(t)),v.length<t&&(l.free(v),v=l.mallocInt32(t));var r=8*t;b.length<r&&(l.free(b),b=l.mallocDouble(r))}function i(e,t,r,n){var i=t[n],o=e[r-1];e[i]=o,t[o]=i}function o(e,t,r,n){e[r]=n,t[n]=r}function a(e,t,r,n,a,u,s,c,l,f){for(var M=0,v=2*e,w=e-1,x=v-1,D=r;D<n;++D){var j=u[D],N=v*D;b[M++]=a[N+w],b[M++]=-(j+1),b[M++]=a[N+x],b[M++]=j}for(D=s;D<c;++D){var j=f[D]+p,A=v*D;b[M++]=l[A+w],b[M++]=-j,b[M++]=l[A+x],b[M++]=j}var L=M>>>1;h(b,L);for(var T=0,E=0,D=0;D<L;++D){var I=0|b[2*D+1];if(I>=p)I=I-p|0,i(y,m,E--,I);else if(I>=0)i(d,g,T--,I);else if(I<=-p){I=-I-p|0;for(O=0;O<T;++O)if(void 0!==(_=t(d[O],I)))return _;o(y,m,E++,I)}else{I=-I-1|0;for(var O=0;O<E;++O){var _=t(I,y[O]);if(void 0!==_)return _}o(d,g,T++,I)}}}function u(e,t,r,n,a,u,s,c,l,f){for(var p=0,w=2*e,x=e-1,D=w-1,j=r;j<n;++j){var N=u[j]+1<<1,A=w*j;b[p++]=a[A+x],b[p++]=-N,b[p++]=a[A+D],b[p++]=N}for(j=s;j<c;++j){var N=f[j]+1<<1,L=w*j;b[p++]=l[L+x],b[p++]=1|-N,b[p++]=l[L+D],b[p++]=1|N}var T=p>>>1;h(b,T);for(var E=0,I=0,O=0,j=0;j<T;++j){var _=0|b[2*j+1],S=1&_;if(j<T-1&&_>>1==b[2*j+3]>>1&&(S=2,j+=1),_<0){for(var C=-(_>>1)-1,z=0;z<O;++z)if(void 0!==(k=t(M[z],C)))return k;if(0!==S)for(z=0;z<E;++z)if(void 0!==(k=t(d[z],C)))return k;if(1!==S)for(z=0;z<I;++z){var k=t(y[z],C);if(void 0!==k)return k}0===S?o(d,g,E++,C):1===S?o(y,m,I++,C):2===S&&o(M,v,O++,C)}else{C=(_>>1)-1;0===S?i(d,g,E--,C):1===S?i(y,m,I--,C):2===S&&i(M,v,O--,C)}}}function s(e,t,r,n,a,u,s,c,l,f,y,m){var M=0,v=2*e,w=t,x=t+e,D=1,j=1;n?j=p:D=p;for(I=a;I<u;++I){var N=I+D,A=v*I;b[M++]=s[A+w],b[M++]=-N,b[M++]=s[A+x],b[M++]=N}for(I=l;I<f;++I){var N=I+j,L=v*I;b[M++]=y[L+w],b[M++]=-N}var T=M>>>1;h(b,T);for(var E=0,I=0;I<T;++I){var O=0|b[2*I+1];if(O<0){var _=!1;if((N=-O)>=p?(_=!n,N-=p):(_=!!n,N-=1),_)o(d,g,E++,N);else{var S=m[N],C=v*N,z=y[C+t+1],k=y[C+t+1+e];e:for(var P=0;P<E;++P){var Q=d[P],U=v*Q;if(!(k<s[U+t+1]||s[U+t+1+e]<z)){for(var B=t+2;B<e;++B)if(y[C+B+e]<s[U+B]||s[U+B+e]<y[C+B])continue e;var Y,R=c[Q];if(void 0!==(Y=n?r(S,R):r(R,S)))return Y}}}}else i(d,g,E--,O-D)}}function c(e,t,r,n,i,o,a,u,s,c,l){for(var f=0,g=2*e,y=t,m=t+e,M=n;M<i;++M){var v=M+p,w=g*M;b[f++]=o[w+y],b[f++]=-v,b[f++]=o[w+m],b[f++]=v}for(M=u;M<s;++M){var v=M+1,x=g*M;b[f++]=c[x+y],b[f++]=-v}var D=f>>>1;h(b,D);for(var j=0,M=0;M<D;++M){var N=0|b[2*M+1];if(N<0)if((v=-N)>=p)d[j++]=v-p;else{var A=l[v-=1],L=g*v,T=c[L+t+1],E=c[L+t+1+e];e:for(C=0;C<j;++C){var I=d[C],O=a[I];if(O===A)break;var _=g*I;if(!(E<o[_+t+1]||o[_+t+1+e]<T)){for(z=t+2;z<e;++z)if(c[L+z+e]<o[_+z]||o[_+z+e]<c[L+z])continue e;var S=r(O,A);if(void 0!==S)return S}}}else{for(var v=N-p,C=j-1;C>=0;--C)if(d[C]===v){for(var z=C+1;z<j;++z)d[z-1]=d[z];break}--j}}}t.exports={init:n,sweepBipartite:a,sweepComplete:u,scanBipartite:s,scanComplete:c};var l=e("typedarray-pool"),f=e("bit-twiddle"),h=e("./sort"),p=1<<28,d=l.mallocInt32(1024),g=l.mallocInt32(1024),y=l.mallocInt32(1024),m=l.mallocInt32(1024),M=l.mallocInt32(1024),v=l.mallocInt32(1024),b=l.mallocDouble(8192)},{"./sort":85,"bit-twiddle":77,"typedarray-pool":426}],87:[function(e,t,r){},{}],88:[function(e,t,r){(function(t){"use strict";function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?l(e,t,r):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,r,n){return u(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function c(e,t){if(u(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r),a=(e=i(e,n)).write(t,r);return a!==n&&(e=e.slice(0,a)),e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|d(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&J(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function M(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<u;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===s)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(r+s>u&&(r=u-s),c=r;c>=0;c--){for(var f=!0,h=0;h<s;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function w(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function x(e,t,r,n){return q(G(t,e.length-r),e,r,n)}function D(e,t,r,n){return q(V(t),e,r,n)}function j(e,t,r,n){return D(e,t,r,n)}function N(e,t,r,n){return q(H(t),e,r,n)}function A(e,t,r,n){return q(W(t,e.length-r),e,r,n)}function L(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=r){var s,c,l,f;switch(u){case 1:o<128&&(a=o);break;case 2:128==(192&(s=e[i+1]))&&(f=(31&o)<<6|63&s)>127&&(a=f);break;case 3:s=e[i+1],c=e[i+2],128==(192&s)&&128==(192&c)&&(f=(15&o)<<12|(63&s)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=e[i+1],c=e[i+2],l=e[i+3],128==(192&s)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=u}return E(n)}function E(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function _(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=F(e[o]);return i}function S(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function k(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function P(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Q(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return i||Q(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,i){return i||Q(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function Y(e){if((e=R(e).replace(ee,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function R(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function W(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function H(e){return Z.toByteArray(Y(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function X(e){return e!==e}var Z=e("base64-js"),K=e("ieee754"),J=e("isarray");r.Buffer=o,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return s(null,e,t,r)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)M(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)M(this,t,t+3),M(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)M(this,t,t+7),M(this,t+1,t+6),M(this,t+2,t+5),M(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,u=r-t,s=Math.min(a,u),c=this.slice(n,i),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],u=l[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return D(this,e,t,r);case"latin1":case"binary":return j(this,e,t,r);case"base64":return N(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||z(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||z(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);z(this,e,t,r,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);z(this,e,t,r,i-1,-i)}var o=r-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var u=o.isBuffer(e)?e:G(new o(e,n).toString()),s=u.length;for(a=0;a<r-t;++a)this[a+t]=u[a%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":59,ieee754:333,isarray:89}],89:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],90:[function(e,t,r){function n(e,t,r,n,s){o(e,r[0],r[1],0),o(t,r[0],r[1],1),i(e,e,n,s),i(t,t,n,s),a(t,t,e),u(t,t)}var i=e("camera-unproject"),o=e("gl-vec3/set"),a=e("gl-vec3/subtract"),u=e("gl-vec3/normalize");t.exports=n},{"camera-unproject":92,"gl-vec3/normalize":280,"gl-vec3/set":287,"gl-vec3/subtract":290}],91:[function(e,t,r){function n(e,t,r,n){var c=r[0],l=r[1],f=r[2],h=r[3],p=a,d=u;o(s,t[0],t[1],t[2],1),i(s,s,n);var g=s[3];return 0!==g&&(s[0]=s[0]/g,s[1]=s[1]/g,s[2]=s[2]/g),e[0]=c+f/2*s[0]+(0+f/2),e[1]=l+h/2*s[1]+(0+h/2),e[2]=(d-p)/2*s[2]+(d+p)/2,e[3]=0===g?0:1/g,e}var i=e("gl-vec4/transformMat4"),o=e("gl-vec4/set"),a=0,u=1,s=[0,0,0,0];t.exports=n},{"gl-vec4/set":314,"gl-vec4/transformMat4":318}],92:[function(e,t,r){function n(e,t,r,n){var o=r[0],a=r[1],u=r[2],s=r[3],c=t[0],l=t[1],f=t[2];return c-=o,l=s-l-1,l-=a,e[0]=2*c/u-1,e[1]=2*l/s-1,e[2]=2*f-1,i(e,e,n)}var i=e("./lib/projectMat4");t.exports=n},{"./lib/projectMat4":93}],93:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],s=r[2],c=r[3],l=r[4],f=r[5],h=r[6],p=r[7],d=r[8],g=r[9],y=r[10],m=r[11],M=r[12],v=r[13],b=r[14],w=1/(n*c+i*p+o*m+r[15]);return e[0]=(n*a+i*l+o*d+M)*w,e[1]=(n*u+i*f+o*g+v)*w,e[2]=(n*s+i*h+o*y+b)*w,e}t.exports=n},{}],94:[function(e,t,r){"use strict";function n(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function i(e,t){return e[0]-t[0]||e[1]-t[1]}function o(e){return e.map(n).sort(i)}function a(e,t,r){return t in e?e[t]:r}function u(e,t,r){Array.isArray(t)?(r=r||{},t=t||[]):(r=t||{},t=[]);var n=!!a(r,"delaunay",!0),i=!!a(r,"interior",!0),u=!!a(r,"exterior",!0),h=!!a(r,"infinity",!1);if(!i&&!u||0===e.length)return[];var p=s(e,t);if(n||i!==u||h){for(var d=c(e.length,o(t)),g=0;g<p.length;++g){var y=p[g];d.addTriangle(y[0],y[1],y[2])}return n&&l(e,d),u?i?h?f(d,0,h):d.cells():f(d,1,h):f(d,-1)}return p}var s=e("./lib/monotone"),c=e("./lib/triangulation"),l=e("./lib/delaunay"),f=e("./lib/filter");t.exports=u},{"./lib/delaunay":95,"./lib/filter":96,"./lib/monotone":97,"./lib/triangulation":98}],95:[function(e,t,r){"use strict";function n(e,t,r,n,i,a){var u=t.opposite(n,i);if(!(u<0)){if(i<n){var s=n;n=i,i=s,s=a,a=u,u=s}t.isConstraint(n,i)||o(e[n],e[i],e[a],e[u])<0&&r.push(n,i)}}function i(e,t){for(var r=[],i=e.length,a=t.stars,u=0;u<i;++u)for(var s=a[u],c=1;c<s.length;c+=2)if(!((p=s[c])<u||t.isConstraint(u,p))){for(var l=s[c-1],f=-1,h=1;h<s.length;h+=2)if(s[h-1]===p){f=s[h];break}f<0||o(e[u],e[p],e[l],e[f])<0&&r.push(u,p)}for(;r.length>0;){for(var p=r.pop(),l=-1,f=-1,s=a[u=r.pop()],d=1;d<s.length;d+=2){var g=s[d-1],y=s[d];g===p?f=y:y===p&&(l=g)}l<0||f<0||o(e[u],e[p],e[l],e[f])>=0||(t.flip(u,p),n(e,t,r,l,u,f),n(e,t,r,u,f,l),n(e,t,r,f,p,l),n(e,t,r,p,l,f))}}var o=e("robust-in-sphere")[4];e("binary-search-bounds");t.exports=i},{"binary-search-bounds":99,"robust-in-sphere":400}],96:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){this.cells=e,this.neighbor=t,this.flags=n,this.constraint=r,this.active=i,this.next=o,this.boundary=a}function i(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function o(e,t){for(var r=e.cells(),o=r.length,a=0;a<o;++a){var u=(m=r[a])[0],s=m[1],c=m[2];s<c?s<u&&(m[0]=s,m[1]=c,m[2]=u):c<u&&(m[0]=c,m[1]=u,m[2]=s)}r.sort(i);for(var l=new Array(o),a=0;a<l.length;++a)l[a]=0;var f=[],h=[],p=new Array(3*o),d=new Array(3*o),g=null;t&&(g=[]);for(var y=new n(r,p,d,l,f,h,g),a=0;a<o;++a)for(var m=r[a],M=0;M<3;++M){var u=m[M],s=m[(M+1)%3],v=p[3*a+M]=y.locate(s,u,e.opposite(s,u)),b=d[3*a+M]=e.isConstraint(u,s);v<0&&(b?h.push(a):(f.push(a),l[a]=1),t&&g.push([s,u,-1]))}return y}function a(e,t,r){for(var n=0,i=0;i<e.length;++i)t[i]===r&&(e[n++]=e[i]);return e.length=n,e}function u(e,t,r){var n=o(e,r);if(0===t)return r?n.cells.concat(n.boundary):n.cells;for(var i=1,u=n.active,s=n.next,c=n.flags,l=n.cells,f=n.constraint,h=n.neighbor;u.length>0||s.length>0;){for(;u.length>0;){var p=u.pop();if(c[p]!==-i){c[p]=i;for(var d=(l[p],0);d<3;++d){var g=h[3*p+d];g>=0&&0===c[g]&&(f[3*p+d]?s.push(g):(u.push(g),c[g]=i))}}}var y=s;s=u,u=y,s.length=0,i=-i}var m=a(l,c,t);return r?m.concat(n.boundary):m}var s=e("binary-search-bounds");t.exports=u,n.prototype.locate=function(){var e=[0,0,0];return function(t,r,n){var o=t,a=r,u=n;return r<n?r<t&&(o=r,a=n,u=t):n<t&&(o=n,a=t,u=r),o<0?-1:(e[0]=o,e[1]=a,e[2]=u,s.eq(this.cells,e,i))}}()},{"binary-search-bounds":99}],97:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.a=e,this.b=t,this.idx=r,this.lowerIds=n,this.upperIds=i}function i(e,t,r,n){this.a=e,this.b=t,this.type=r,this.idx=n}function o(e,t){var r=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return r||(e.type!==d&&(r=p(e.a,e.b,t.b))?r:e.idx-t.idx)}function a(e,t){return p(e.a,e.b,t)}function u(e,t,r,n,i){for(var o=h.lt(t,n,a),u=h.gt(t,n,a),s=o;s<u;++s){for(var c=t[s],l=c.lowerIds,f=l.length;f>1&&p(r[l[f-2]],r[l[f-1]],n)>0;)e.push([l[f-1],l[f-2],i]),f-=1;l.length=f,l.push(i);for(var d=c.upperIds,f=d.length;f>1&&p(r[d[f-2]],r[d[f-1]],n)<0;)e.push([d[f-2],d[f-1],i]),f-=1;d.length=f,d.push(i)}}function s(e,t){var r;return(r=e.a[0]<t.a[0]?p(e.a,e.b,t.a):p(t.b,t.a,e.a))?r:(r=t.b[0]<e.b[0]?p(e.a,e.b,t.b):p(t.b,t.a,e.b))||e.idx-t.idx}function c(e,t,r){var i=h.le(e,r,s),o=e[i],a=o.upperIds,u=a[a.length-1];o.upperIds=[u],e.splice(i+1,0,new n(r.a,r.b,r.idx,[u],a))}function l(e,t,r){var n=r.a;r.a=r.b,r.b=n;var i=h.eq(e,r,s),o=e[i];e[i-1].upperIds=o.upperIds,e.splice(i,1)}function f(e,t){for(var r=e.length,a=t.length,s=[],f=0;f<r;++f)s.push(new i(e[f],null,d,f));for(f=0;f<a;++f){var h=t[f],p=e[h[0]],m=e[h[1]];p[0]<m[0]?s.push(new i(p,m,y,f),new i(m,p,g,f)):p[0]>m[0]&&s.push(new i(m,p,y,f),new i(p,m,g,f))}s.sort(o);for(var M=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),v=[new n([M,1],[M,0],-1,[],[],[],[])],b=[],f=0,w=s.length;f<w;++f){var x=s[f],D=x.type;D===d?u(b,v,e,x.a,x.idx):D===y?c(v,e,x):l(v,e,x)}return b}var h=e("binary-search-bounds"),p=e("robust-orientation")[3],d=0,g=1,y=2;t.exports=f},{"binary-search-bounds":99,"robust-orientation":401}],98:[function(e,t,r){"use strict";function n(e,t){this.stars=e,this.edges=t}function i(e,t,r){for(var n=1,i=e.length;n<i;n+=2)if(e[n-1]===t&&e[n]===r)return e[n-1]=e[i-2],e[n]=e[i-1],void(e.length=i-2)}function o(e,t){for(var r=new Array(e),i=0;i<e;++i)r[i]=[];return new n(r,t)}var a=e("binary-search-bounds");t.exports=o;var u=n.prototype;u.isConstraint=function(){function e(e,t){return e[0]-t[0]||e[1]-t[1]}var t=[0,0];return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),a.eq(this.edges,t,e)>=0}}(),u.removeTriangle=function(e,t,r){var n=this.stars;i(n[e],t,r),i(n[t],r,e),i(n[r],e,t)},u.addTriangle=function(e,t,r){var n=this.stars;n[e].push(t,r),n[t].push(r,e),n[r].push(e,t)},u.opposite=function(e,t){for(var r=this.stars[t],n=1,i=r.length;n<i;n+=2)if(r[n]===e)return r[n-1];return-1},u.flip=function(e,t){var r=this.opposite(e,t),n=this.opposite(t,e);this.removeTriangle(e,t,r),this.removeTriangle(t,e,n),this.addTriangle(e,n,r),this.addTriangle(t,r,n)},u.edges=function(){for(var e=this.stars,t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length;o<a;o+=2)t.push([i[o],i[o+1]]);return t},u.cells=function(){for(var e=this.stars,t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length;o<a;o+=2){var u=i[o],s=i[o+1];r<Math.min(u,s)&&t.push([r,u,s])}return t}},{"binary-search-bounds":99}],99:[function(e,t,r){"use strict";function n(e,t,r,n,i){var o=["function ",e,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function i(e,t,r,i){return new Function([n("A","x"+e+"y",t,["y"],i),n("P","c(x,y)"+e+"0",t,["y","c"],i),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],100:[function(e,t,r){function n(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}t.exports=n},{}],101:[function(e,t,r){"use strict";function n(e){var t=w(e);return[D(t,-1/0),D(t,1/0)]}function i(e,t){for(var r=new Array(t.length),n=0;n<t.length;++n){var i=t[n],o=e[i[0]],a=e[i[1]];r[n]=[D(Math.min(o[0],a[0]),-1/0),D(Math.min(o[1],a[1]),-1/0),D(Math.max(o[0],a[0]),1/0),D(Math.max(o[1],a[1]),1/0)]}return r}function o(e){for(var t=new Array(e.length),r=0;r<e.length;++r){var n=e[r];t[r]=[D(n[0],-1/0),D(n[1],-1/0),D(n[0],1/0),D(n[1],1/0)]}return t}function a(e,t,r){var n=[];return m(r,function(r,i){var o=t[r],a=t[i];if(o[0]!==a[0]&&o[0]!==a[1]&&o[1]!==a[0]&&o[1]!==a[1]){var u=e[o[0]],s=e[o[1]],c=e[a[0]],l=e[a[1]];M(u,s,c,l)&&n.push([r,i])}}),n}function u(e,t,r,n){var i=[];return m(r,n,function(r,n){var o=t[r];if(o[0]!==n&&o[1]!==n){var a=e[n],u=e[o[0]],s=e[o[1]];M(u,s,a,a)&&i.push([r,n])}}),i}function s(e,t,r,n,i){var o,a,u=e.map(function(e){return[v(e[0]),v(e[1])]});for(o=0;o<r.length;++o){var s=r[o];a=s[0];var c=s[1],l=t[a],f=t[c],h=j(x(e[l[0]]),x(e[l[1]]),x(e[f[0]]),x(e[f[1]]));if(h){var p=e.length;e.push([w(h[0]),w(h[1])]),u.push(h),n.push([a,p],[c,p])}}for(n.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var r=u[e[1]],n=u[t[1]];return b(r[0],n[0])||b(r[1],n[1])}),o=n.length-1;o>=0;--o){var d=n[o],g=t[a=d[0]],y=g[0],m=g[1],M=e[y],D=e[m];if((M[0]-D[0]||M[1]-D[1])<0){var N=y;y=m,m=N}g[0]=y;var A,L=g[1]=d[1];for(i&&(A=g[2]);o>0&&n[o-1][0]===a;){var T=(d=n[--o])[1];i?t.push([L,T,A]):t.push([L,T]),L=T}i?t.push([L,m,A]):t.push([L,m])}return u}function c(e,t,r){for(var i=t.length,o=new y(i),a=[],u=0;u<t.length;++u){var s=t[u],c=n(s[0]),l=n(s[1]);a.push([D(c[0],-1/0),D(l[0],-1/0),D(c[1],1/0),D(l[1],1/0)])}m(a,function(e,t){o.link(e,t)});for(var f=!0,h=new Array(i),u=0;u<i;++u)(d=o.find(u))!==u&&(f=!1,e[d]=[Math.min(e[u][0],e[d][0]),Math.min(e[u][1],e[d][1])]);if(f)return null;for(var p=0,u=0;u<i;++u){var d=o.find(u);d===u?(h[u]=p,e[p++]=e[u]):h[u]=-1}e.length=p;for(u=0;u<i;++u)h[u]<0&&(h[u]=h[o.find(u)]);return h}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function f(e,t){return e[0]-t[0]||e[1]-t[1]||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function h(e,t,r){if(0!==e.length){if(t)for(u=0;u<e.length;++u){var n=t[(o=e[u])[0]],i=t[o[1]];o[0]=Math.min(n,i),o[1]=Math.max(n,i)}else for(u=0;u<e.length;++u){var o=e[u],n=o[0],i=o[1];o[0]=Math.min(n,i),o[1]=Math.max(n,i)}r?e.sort(f):e.sort(l);for(var a=1,u=1;u<e.length;++u){var s=e[u-1],c=e[u];(c[0]!==s[0]||c[1]!==s[1]||r&&c[2]!==s[2])&&(e[a++]=c)}e.length=a}}function p(e,t,r){var n=c(e,[],o(e));return h(t,n,r),!!n}function d(e,t,r){var n=i(e,t),l=a(e,t,n),f=o(e),p=u(e,t,n,f),d=c(e,s(e,t,l,p,r),f);return h(t,d,r),!!d||l.length>0||p.length>0}function g(e,t,r){var n;if(r){n=t;for(var i=new Array(t.length),o=0;o<t.length;++o){u=t[o];i[o]=[u[0],u[1],r[o]]}t=i}for(var a=p(e,t,!!r);d(e,t,!!r);)a=!0;if(r&&a){n.length=0,r.length=0;for(o=0;o<t.length;++o){var u=t[o];n.push([u[0],u[1]]),r.push(u[2])}}return a}t.exports=g;var y=e("union-find"),m=e("box-intersect"),M=e("robust-segment-intersect"),v=e("big-rat"),b=e("big-rat/cmp"),w=e("big-rat/to-float"),x=e("rat-vec"),D=e("nextafter"),j=e("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":102,"big-rat":63,"big-rat/cmp":61,"big-rat/to-float":75,"box-intersect":80,nextafter:353,"rat-vec":380,"robust-segment-intersect":404,"union-find":428}],102:[function(e,t,r){"use strict";function n(e,t){return u(o(e[0],t[1]),o(e[1],t[0]))}function i(e,t,r,i){var o=c(t,e),u=c(i,r),h=n(o,u);if(0===s(h))return null;var p=n(u,c(e,r)),d=a(p,h),g=f(o,d);return l(e,g)}t.exports=i;var o=e("big-rat/mul"),a=e("big-rat/div"),u=e("big-rat/sub"),s=e("big-rat/sign"),c=e("rat-vec/sub"),l=e("rat-vec/add"),f=e("rat-vec/muls")},{"big-rat/div":62,"big-rat/mul":72,"big-rat/sign":73,"big-rat/sub":74,"rat-vec/add":379,"rat-vec/muls":381,"rat-vec/sub":382}],103:[function(e,t,r){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],104:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"cmy",min:[0,0,0],max:[100,100,100],channel:["cyan","magenta","yellow"],alias:["CMY"]}).rgb=function(e){return[255*(1-e[0]/100),255*(1-e[1]/100),255*(1-e[2]/100)]},n.cmy=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(1-t)||0,100*(1-r)||0,100*(1-n)||0]}},{"./rgb":124}],105:[function(e,t,r){"use strict";var n=e("./rgb");t.exports={name:"cmyk",min:[0,0,0,0],max:[100,100,100,100],channel:["cyan","magenta","yellow","black"],alias:["CMYK"],rgb:function(e){var t,r,n,i=e[0]/100,o=e[1]/100,a=e[2]/100,u=e[3]/100;return t=1-Math.min(1,i*(1-u)+u),r=1-Math.min(1,o*(1-u)+u),n=1-Math.min(1,a*(1-u)+u),[255*t,255*r,255*n]}},n.cmyk=function(e){var t,r,n,i,o=e[0]/255,a=e[1]/255,u=e[2]/255;return i=Math.min(1-o,1-a,1-u),t=(1-o-i)/(1-i)||0,r=(1-a-i)/(1-i)||0,n=(1-u-i)/(1-i)||0,[100*t,100*r,100*n,100*i]}},{"./rgb":124}],106:[function(e,t,r){"use strict";var n=e("./xyy"),i=e("./xyz"),o={name:"coloroid",alias:["ATV"],channel:["A","T","V"],min:[10,0,0],max:[76,100,100]};o.table=[[10,59,1.724349,.44987,.53641],[11,55.3,1.740844,.46248,.52444],[12,51.7,1.754985,.47451,.51298],[13,48.2,1.767087,.48601,.50325],[14,44.8,1.775953,.49578,.49052],[15,41.5,1.785073,.5079,.43035],[16,38.2,1.791104,.51874,.46934],[20,34.9,1.794831,.5298,.45783],[21,31.5,1.798664,.54137,.44559],[22,28,1.794819,.55367,.43253],[23,24.4,1.78961,.5668,.41811],[24,20.6,1.809483,.58128,.40176],[25,16.6,1.760983,.59766,.383],[26,12.3,1.723443,.61653,.36061],[30,7.7,1.652891,.63896,.33358],[31,2.8,1.502607,.66619,.2993],[32,-2.5,1.0725,.70061,.26753],[33,-8.4,1.136637,.63925,.22631],[34,-19.8,1.232286,.53962,.19721],[35,-31.6,1.31012,.5034,.17495],[40,-43.2,1.37661,.46041,.15603],[41,-54.6,1.438692,.42386,.13846],[42,-65.8,1.501582,.38991,.12083],[43,-76.8,1.570447,.35586,.10328],[44,-86.8,1.645583,.32195,.08496],[45,-95.8,1.732083,.28657,.05155],[46,-108.4,1.915753,.22202,.01771],[50,-117.2,2.14631,.15664,.05227],[51,-124.7,1.649939,.12736,.0902],[52,-131.8,1.273415,.10813,.12506],[53,-138.5,1.080809,.09414,.15741],[54,-145.1,.957076,.03249,.18958],[55,-152,.868976,.07206,.24109],[56,-163.4,.771731,.05787,.30378],[60,-177.2,.697108,.04353,.35696],[61,171.6,.655803,.03291,.41971],[62,152.4,.623958,.0224,.49954],[63,148.4,.596037,.01196,.60321],[64,136.8,.607413,.00425,.73542],[65,125.4,.659923,.01099,.83391],[66,114.2,.859517,.0805,.77474],[70,103.2,1.195683,.20259,.7046],[71,93.2,1.407534,.28807,.6523],[72,84.2,1.532829,.34422,.6193],[73,77.3,1.603792,.37838,.59533],[74,71.6,1.649448,.4029,.57716],[75,66.9,1.68108,.42141,.56222],[76,62.8,1.704979,.43647,.54895]];var a=o.table,u=[].concat(a.slice(-13),a.slice(0,-13)),s="D65",c=i.whitepoint[2][s][0],l=i.whitepoint[2][s][1],f=i.whitepoint[2][s][2],h=c/(c+l+f),p=l/(c+l+f),d=(c+l+f)/100;n.coloroid=function(e){for(var t,r=e[0],n=e[1],i=e[2],o=10*Math.sqrt(i),a=180*Math.atan2(n-h,r-p)/Math.PI,s=u.length-1,c=0;c<u.length&&!(a>u[c][1]);c++)s=c;var l=(t=Math.abs(u[c+1][1]-a)>Math.abs(u[s][1]-a)?u[c+1]:u[s])[0],f=t[4],g=t[2],y=t[3];return[l,100*i*(p*d-r*d)/(100*(r*g-y*g)+f*g*100*(p*d-r*d)),o]},o.xyy=function(e){for(var t,r=e[0],n=e[1],i=e[2],o=0;o<a.length;o++)if(r<=a[o][0]){t=a[o];break}var u=t[4],s=t[2],c=t[3],l=i*i/100,f=u*s*100;return[(100*l*p*d+100*c*s*n-f*n*p*d)/(100*n*s-f*n*d+100*l*d),(100*l+100*n*u*s-f*n)/(l*d*100+100*n*s-n*f*d),l]},i.coloroid=function(e){return n.coloroid(i.xyy(e))},o.xyz=function(e){return n.xyz(o.xyy(e))},t.exports=o},{"./xyy":129,"./xyz":130}],107:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("mumath/clamp"),o=t.exports={name:"cubehelix",channel:["fraction"],min:[0],max:[1]},a=o.defaults={start:0,rotation:.5,hue:1,gamma:1};o.rgb=function(e,t){t=t||{},e.length&&(e=e[0]);var r=void 0!==t.start?t.start:a.start,n=void 0!==t.rotation?t.rotation:a.rotation,o=void 0!==t.gamma?t.gamma:a.gamma,u=void 0!==t.hue?t.hue:a.hue,s=2*Math.PI*(r/3+1+n*e),c=u*(e=Math.pow(e,o))*(1-e)/2,l=e+c*(-.14861*Math.cos(s)+1.78277*Math.sin(s)),f=e+c*(-.29227*Math.cos(s)-.90649*Math.sin(s)),h=e+c*(1.97294*Math.cos(s));return l=i(l,0,1),f=i(f,0,1),h=i(h,0,1),[255*l,255*f,255*h]},n.cubehelix=function(e){}},{"./rgb":124,"mumath/clamp":349}],108:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./hsl"),o=e("./hsv"),a=e("./hwb"),u=e("mumath/mod");t.exports={name:"hcg",min:[0,0,0],max:[360,100,100],channel:["hue","chroma","gray"],alias:["HCG","HSG"],rgb:function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i=6*u(t,1),o=u(i,1),a=[0,0,0],s=1-o;switch(Math.floor(i)){case 0:a[0]=1,a[1]=o,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=o;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=o,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}var c=(1-r)*n;return[255*(r*a[0]+c),255*(r*a[1]+c),255*(r*a[2]+c)]},hsl:function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r<1&&r>0&&(n=r<.5?t/(2*r):t/(2*(1-r))),[e[0],100*n,100*r]},hsv:function(e){var t,r=e[1]/100,n=r+e[2]/100*(1-r);if(n>0){var i=r/n;t=[e[0],100*i,100*n]}else t=[e[0],0,100*n];return t},hwb:function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]}},n.hcg=function(e){var t,r,n=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.max(Math.max(n,i),o),s=Math.min(Math.min(n,i),o),c=a-s;return t=c<1?s/(1-c):0,c>0?(r=a===n?u((i-o)/c,6):a===i?2+(o-n)/c:4+(n-i)/c,r/=6,r=u(r,1)):r=0,[360*r,100*c,100*t]},i.hcg=function(e){var t,r=e[1]/100,n=e[2]/100,i=0;if((i=n<.5?2*r*n:2*r*(1-n))<1){var o=(n-.5*i)/(1-i);t=[e[0],100*i,100*o]}else t=[e[0],100*i,0];return t},o.hcg=function(e){var t,r=e[1]/100,n=e[2]/100,i=r*n;if(i<1){var o=(n-i)/(1-i);t=[e[0],100*i,100*o]}else t=[e[0],100*i,0];return t},a.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]}},{"./hsl":110,"./hsv":111,"./hwb":114,"./rgb":124,"mumath/mod":350}],109:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("mumath/mod"),o=e("mumath/clamp");(t.exports={name:"hsi",min:[0,0,0],max:[360,100,255],channel:["hue","saturation","intensity"],alias:["HSI"]}).rgb=function(e){var t,r,n,a=i(e[0],0,360)*Math.PI/180,u=o(e[1],0,100)/100,s=o(e[2],0,255)/255,c=Math.PI/3;return a<2*c?(n=s*(1-u),t=s*(1+u*Math.cos(a)/Math.cos(c-a)),r=s*(1+u*(1-Math.cos(a)/Math.cos(c-a)))):a<4*c?(a-=2*c,t=s*(1-u),r=s*(1+u*Math.cos(a)/Math.cos(c-a)),n=s*(1+u*(1-Math.cos(a)/Math.cos(c-a)))):(a-=4*c,r=s*(1-u),n=s*(1+u*Math.cos(a)/Math.cos(c-a)),t=s*(1+u*(1-Math.cos(a)/Math.cos(c-a)))),[255*t,255*r,255*n]},n.hsi=function(e){var t=e[0]+e[1]+e[2],r=e[0]/t,n=e[1]/t,i=e[2]/t,o=Math.acos(.5*(r-n+(r-i))/Math.sqrt((r-n)*(r-n)+(r-i)*(n-i)));i>n&&(o=2*Math.PI-o);var a=1-3*Math.min(r,n,i),u=t/3;return[180*o/Math.PI,100*a,u]}},{"./rgb":124,"mumath/clamp":349,"mumath/mod":350}],110:[function(e,t,r){"use strict";var n=e("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,r,n,i,o,a=e[0]/360,u=e[1]/100,s=e[2]/100;if(0===u)return o=255*s,[o,o,o];t=2*s-(r=s<.5?s*(1+u):s+u-s*u),i=[0,0,0];for(var c=0;c<3;c++)n=a+1/3*-(c-1),n<0?n++:n>1&&n--,o=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[c]=255*o;return i}},n.hsl=function(e){var t,r,n,i=e[0]/255,o=e[1]/255,a=e[2]/255,u=Math.min(i,o,a),s=Math.max(i,o,a),c=s-u;return s===u?t=0:i===s?t=(o-a)/c:o===s?t=2+(a-i)/c:a===s&&(t=4+(i-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(u+s)/2,r=s===u?0:n<=.5?c/(s+u):c/(2-s-u),[t,100*r,100*n]}},{"./rgb":124}],111:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./hsl");t.exports={name:"hsv",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","value"],alias:["HSV","HSB"],rgb:function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*n*(1-r),u=255*n*(1-r*o),s=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,s,a];case 1:return[u,n,a];case 2:return[a,n,s];case 3:return[a,u,n];case 4:return[s,a,n];case 5:return[n,a,u]}},hsl:function(e){var t,r,n=e[0],i=e[1]/100,o=e[2]/100;return r=(2-i)*o,t=i*o,t/=r<=1?r:2-r,t=t||0,r/=2,[n,100*t,100*r]}},n.hsv=function(e){var t,r,n,i=e[0],o=e[1],a=e[2],u=Math.min(i,o,a),s=Math.max(i,o,a),c=s-u;return r=0===s?0:c/s*100,s===u?t=0:i===s?t=(o-a)/c:o===s?t=2+(a-i)/c:a===s&&(t=4+(i-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=s/255*1e3/10,[t,r,n]},i.hsv=function(e){var t,r,n=e[0],i=e[1]/100,o=e[2]/100;return o*=2,i*=o<=1?o:2-o,r=(o+i)/2,t=2*i/(o+i)||0,[n,100*t,100*r]}},{"./hsl":110,"./rgb":124}],112:[function(e,t,r){"use strict";var n=e("./xyz"),i=e("./lchuv"),o=e("husl");t.exports={name:"husl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSL"],lchuv:o._conv.husl.lch,xyz:function(e){return i.xyz(o._conv.husl.lch(e))},huslp:function(e){return o._conv.lch.huslp(o._conv.husl.lch(e))}},i.husl=o._conv.lch.husl,n.husl=function(e){return o._conv.lch.husl(n.lchuv(e))}},{"./lchuv":120,"./xyz":130,husl:332}],113:[function(e,t,r){"use strict";var n=e("./xyz"),i=e("./lchuv"),o=e("husl");t.exports={name:"huslp",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSLp"],lchuv:o._conv.huslp.lch,xyz:function(e){return i.xyz(o._conv.huslp.lch(e))},husl:function(e){return o._conv.lch.husl(o._conv.huslp.lch(e))}},i.huslp=o._conv.lch.huslp,n.huslp=function(e){return o._conv.lch.huslp(n.lchuv(e))}},{"./lchuv":120,"./xyz":130,husl:332}],114:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./hsv"),o=e("./hsl"),a=t.exports={name:"hwb",min:[0,0,0],max:[360,100,100],channel:["hue","whiteness","blackness"],alias:["HWB"],rgb:function(e){var t,r,n,i,o,a,u,s=e[0]/360,c=e[1]/100,l=e[2]/100,f=c+l;switch(f>1&&(c/=f,l/=f),t=Math.floor(6*s),r=1-l,n=6*s-t,0!=(1&t)&&(n=1-n),i=c+n*(r-c),t){default:case 6:case 0:o=r,a=i,u=c;break;case 1:o=i,a=r,u=c;break;case 2:o=c,a=r,u=i;break;case 3:o=c,a=i,u=r;break;case 4:o=i,a=c,u=r;break;case 5:o=r,a=c,u=i}return[255*o,255*a,255*u]},hsv:function(e){var t,r,n=e[0],i=e[1],o=e[2];return i+o>=100?(t=0,r=100*i/(i+o)):(t=100-i/(1-o/100),r=100-o),[n,t,r]},hsl:function(e){return i.hsl(a.hsv(e))}};n.hwb=function(e){var t=e[0],r=e[1],i=e[2],o=n.hsl(e)[0],a=1/255*Math.min(t,Math.min(r,i));return i=1-1/255*Math.max(t,Math.max(r,i)),[o,100*a,100*i]},i.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[t,0===n?0:n*(1-r/100),100-n]},o.hwb=function(e){return i.hwb(o.hsv(e))}},{"./hsl":110,"./hsv":111,"./rgb":124}],115:[function(e,t,r){"use strict";var n,i={rgb:e("./rgb"),hsl:e("./hsl"),hsv:e("./hsv"),hsi:e("./hsi"),hwb:e("./hwb"),cmyk:e("./cmyk"),cmy:e("./cmy"),xyz:e("./xyz"),xyy:e("./xyy"),yiq:e("./yiq"),yuv:e("./yuv"),ydbdr:e("./ydbdr"),ycgco:e("./ycgco"),ypbpr:e("./ypbpr"),ycbcr:e("./ycbcr"),xvycc:e("./xvycc"),yccbccrc:e("./yccbccrc"),ucs:e("./ucs"),uvw:e("./uvw"),jpeg:e("./jpeg"),lab:e("./lab"),labh:e("./labh"),lms:e("./lms"),lchab:e("./lchab"),luv:e("./luv"),lchuv:e("./lchuv"),husl:e("./husl"),huslp:e("./huslp"),cubehelix:e("./cubehelix"),coloroid:e("./coloroid"),hcg:e("./hcg"),tsl:e("./tsl"),yes:e("./yes"),osaucs:e("./osaucs")};for(var o in i){n=i[o];for(var a in i)n[a]||(n[a]=function(e,t){var r=i[e];return e===t?function(e){return e}:r.xyz&&i.xyz[t]?function(e){return i.xyz[t](r.xyz(e))}:r.rgb&&i.rgb[t]?function(e){return i.rgb[t](r.rgb(e))}:void 0}(o,a))}t.exports=i},{"./cmy":104,"./cmyk":105,"./coloroid":106,"./cubehelix":107,"./hcg":108,"./hsi":109,"./hsl":110,"./hsv":111,"./husl":112,"./huslp":113,"./hwb":114,"./jpeg":116,"./lab":117,"./labh":118,"./lchab":119,"./lchuv":120,"./lms":121,"./luv":122,"./osaucs":123,"./rgb":124,"./tsl":125,"./ucs":126,"./uvw":127,"./xvycc":128,"./xyy":129,"./xyz":130,"./ycbcr":131,"./yccbccrc":132,"./ycgco":133,"./ydbdr":134,"./yes":135,"./yiq":136,"./ypbpr":137,"./yuv":138}],116:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"jpeg",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["JPEG"]}).rgb=function(e){var t=e[0],r=e[1],n=e[2];return[t+1.402*(n-128),t-.34414*(r-128)-.71414*(n-128),t+1.772*(r-128)]},n.jpeg=function(e){var t=e[0],r=e[1],n=e[2];return[.299*t+.587*r+.114*n,128-.168736*t-.331264*r+.5*n,128+.5*t-.418688*r-.081312*n]}},{"./rgb":124}],117:[function(e,t,r){"use strict";var n=e("./xyz");t.exports={name:"lab",min:[0,-100,-100],max:[100,100,100],channel:["lightness","a","b"],alias:["LAB","cielab"],xyz:function(e){var t,r,n,i,o=e[0],a=e[1],u=e[2];return o<=8?(r=100*o/903.3,i=r/100*7.787+16/116):(r=100*Math.pow((o+16)/116,3),i=Math.pow(r/100,1/3)),t=t/95.047<=.008856?t=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n=n/108.883<=.008859?n=108.883*(i-u/200-16/116)/7.787:108.883*Math.pow(i-u/200,3),[t,r,n]}},n.lab=function(e){var t,r,n,i=e[0],o=e[1],a=e[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t=116*o-16,r=500*(i-o),n=200*(o-a),[t,r,n]}},{"./xyz":130}],118:[function(e,t,r){"use strict";var n=e("./xyz");t.exports={name:"labh",min:[0,-128,-128],max:[100,128,128],channel:["lightness","a","b"],alias:["LABh","hunter-lab","hlab"],xyz:function(e){var t=e[0],r=t/10,n=r*r;return[(e[1]/17.5*t/10+n)/1.02,n,-(e[2]/7*t/10-n)/.847]}},n.labh=function(e){var t=e[0],r=e[1],n=e[2];return[10*Math.sqrt(r),0===r?0:(1.02*t-r)/Math.sqrt(r)*17.5,0===r?0:(r-.847*n)/Math.sqrt(r)*7]}},{"./xyz":130}],119:[function(e,t,r){"use strict";var n=e("./xyz"),i=e("./lab"),o=t.exports={name:"lchab",min:[0,0,0],max:[100,100,360],channel:["lightness","chroma","hue"],alias:["LCHab","cielch","LCH","HLC","LSH"],xyz:function(e){return i.xyz(o.lab(e))},lab:function(e){var t,r,n,i=e[0],o=e[1];return n=e[2]/360*2*Math.PI,t=o*Math.cos(n),r=o*Math.sin(n),[i,t,r]}};i.lchab=function(e){var t,r,n,i=e[0],o=e[1],a=e[2];return t=Math.atan2(a,o),(r=360*t/2/Math.PI)<0&&(r+=360),n=Math.sqrt(o*o+a*a),[i,n,r]},n.lchab=function(e){return i.lchab(n.lab(e))}},{"./lab":117,"./xyz":130}],120:[function(e,t,r){"use strict";var n=e("./luv"),i=e("./xyz"),o=t.exports={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t,r,n,i=e[0],o=e[1];return n=e[2]/360*2*Math.PI,t=o*Math.cos(n),r=o*Math.sin(n),[i,t,r]},xyz:function(e){return n.xyz(o.luv(e))}};n.lchuv=function(e){var t=e[0],r=e[1],n=e[2],i=Math.sqrt(r*r+n*n),o=360*Math.atan2(n,r)/2/Math.PI;return o<0&&(o+=360),[t,i,o]},i.lchuv=function(e){return n.lchuv(i.luv(e))}},{"./luv":122,"./xyz":130}],121:[function(e,t,r){"use strict";var n=e("./xyz"),i=t.exports={name:"lms",min:[0,0,0],max:[100,100,100],channel:["long","medium","short"],matrix:{HPE:[.38971,.68898,-.07868,-.22981,1.1834,.04641,0,0,1],VONKRIES:[.4002,.7076,-.0808,-.2263,1.1653,.0457,0,0,.9182],BFD:[.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0686,1.0296],CAT97:[.8562,.3372,-.1934,-.836,1.8327,.0033,.0357,-.00469,1.0112],CAT00:[.7982,.3389,-.1371,-.5918,1.5512,.0406,8e-4,.0239,.9753],CAT02:[.7328,.4296,-.1624,-.7036,1.6975,.0061,.003,.0136,.9834]}};i.xyz=function(e,t){var r=e[0],n=e[1],i=e[2];return t||(t=[1.096123820835514,-.278869000218287,.182745179382773,.454369041975359,.473533154307412,.072097803717229,-.009627608738429,-.005698031216113,1.015325639954543]),[r*t[0]+n*t[1]+i*t[2],r*t[3]+n*t[4]+i*t[5],r*t[6]+n*t[7]+i*t[8]]},n.lms=function(e,t){var r=e[0],n=e[1],o=e[2];return t||(t=i.matrix.CAT02),[r*t[0]+n*t[1]+o*t[2],r*t[3]+n*t[4]+o*t[5],r*t[6]+n*t[7]+o*t[8]]}},{"./xyz":130}],122:[function(e,t,r){"use strict";var n=e("./xyz");t.exports={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,r){var i,o,a,u,s,c,l,f,h,p,d,g,y;return a=e[0],u=e[1],s=e[2],0===a?[0,0,0]:(t=t||"D65",r=r||2,h=n.whitepoint[r][t][0],p=n.whitepoint[r][t][1],d=n.whitepoint[r][t][2],g=4*h/(h+15*p+3*d),y=9*p/(h+15*p+3*d),i=u/(13*a)+g||0,o=s/(13*a)+y||0,l=a>8?p*Math.pow((a+16)/116,3):p*a*.0011070564598794539,c=9*l*i/(4*o)||0,f=l*(12-3*i-20*o)/(4*o)||0,[c,l,f])}},n.luv=function(e,t,r){var i,o,a,u,s,c,l,f,h,p,d,g,y;t=t||"D65",r=r||2,g=4*(h=n.whitepoint[r][t][0])/(h+15*(p=n.whitepoint[r][t][1])+3*(d=n.whitepoint[r][t][2])),y=9*p/(h+15*p+3*d),i=4*(c=e[0])/(c+15*(l=e[1])+3*(f=e[2]))||0,o=9*l/(c+15*l+3*f)||0;var m=l/p;return a=m<=.008856451679035631?903.2962962962961*m:116*Math.pow(m,1/3)-16,u=13*a*(i-g),s=13*a*(o-y),[a,u,s]}},{"./xyz":130}],123:[function(e,t,r){"use strict";var n=e("./xyz"),i={name:"osaucs",alias:["OSA-UCS"],channel:["L","j","g"],min:[-10,-6,-10],max:[8,12,6]};i.xyz=function(e){throw"Unimplemented"},n.osaucs=function(e){var t=e[0],r=e[1],n=e[2],i=t/(t+r+n),o=r/(t+r+n),a=(4.4934*i*i+4.3034*o*o-4.276*i*o-1.3744*i-2.56439*o+1.8103)*r,u=5.9*(Math.pow(a,1/3)-2/3+.042*Math.pow(Math.max(a,30)-30,1/3)),s=(u-14.3993)/Math.sqrt(2),c=u/(5.9*(Math.pow(a,1/3)-2/3)),l=.779*t+.4194*r-.1648*n,f=-.4493*t+1.3265*r+.0927*n,h=-.1149*t+.3394*r+.717*n;return l=Math.pow(l,1/3)||0,f=Math.pow(f,1/3)||0,h=Math.pow(h,1/3)||0,[s,c*(1.7*l+8*f-9.7*h),c*(-13.7*l+17.7*f-4*h)]},t.exports=i},{"./xyz":130}],124:[function(e,t,r){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],125:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"tsl",min:[0,0,0],max:[1,1,1],channel:["tint","saturation","lightness"]}).rgb=function(e){var t=e[0],r=e[1],n=e[2],i=Math.tan(2*Math.PI*(t-.25));i*=i;var o=Math.sqrt(5*r*r/(9*(1/i+1)))+1/3,a=Math.sqrt(5*r*r/(9*(i+1)))+1/3,u=n/(.185*o+.473*a+.114);return[u*o*255,u*a*255,u*(1-o-a)*255]},n.tsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=(t/(t+r+n)||0)-1/3,o=(r/(t+r+n)||0)-1/3;return[o>0?.5*Math.atan(i/o)/Math.PI+.25:o<0?.5*Math.atan(i/o)/Math.PI+.75:0,Math.sqrt(1.8*(i*i+o*o)),.299*t+.587*r+.114*n]}},{"./rgb":124}],126:[function(e,t,r){"use strict";var n=e("./xyz");(t.exports={name:"ucs",min:[0,0,0],max:[100,100,100],channel:["U","V","W"],alias:["UCS","cie1960"]}).xyz=function(e){var t=e[0],r=e[1];return[1.5*t,r,1.5*t-3*r+2*e[2]]},n.ucs=function(e){var t=e[0],r=e[1];return[2*t/3,r,.5*(3*r-t+e[2])]}},{"./xyz":130}],127:[function(e,t,r){"use strict";var n=e("./ucs"),i=e("./xyz"),o=t.exports={name:"uvw",min:[-134,-140,0],max:[224,122,100],channel:["U","V","W"],alias:["UVW","cieuvw","cie1964"]};o.xyz=function(e,t,r){var n,o,a,u,s,c,l,f,h,p,d,g,y;return u=e[0],s=e[1],0===(a=e[2])?[0,0,0]:(t=t||"D65",r=r||2,h=i.whitepoint[r][t][0],p=i.whitepoint[r][t][1],d=i.whitepoint[r][t][2],g=4*h/(h+15*p+3*d),y=6*p/(h+15*p+3*d),l=Math.pow((a+17)/25,3),n=u/(13*a)+g||0,o=s/(13*a)+y||0,c=1.5*l*n/o,f=l*(2/o-.5*n/o-5),[c,l,f])},i.uvw=function(e,t,r){var n,o,a,u,s,c=e[0],l=e[1],f=e[2];t=t||"D65",r=r||2,u=4*(n=i.whitepoint[r][t][0])/(n+15*(o=i.whitepoint[r][t][1])+3*(a=i.whitepoint[r][t][2])),s=6*o/(n+15*o+3*a);var h=4*c/(c+15*l+3*f)||0,p=6*l/(c+15*l+3*f)||0,d=25*Math.pow(l,1/3)-17;return[13*d*(h-u),13*d*(p-s),d]},o.ucs=function(e){},n.uvw=function(e){}},{"./ucs":126,"./xyz":130}],128:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./ypbpr"),o=t.exports={name:"xvycc",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["xvYCC"]};i.xvycc=function(e){return[16+219*e[0],128+224*e[1],128+224*e[2]]},o.ypbpr=function(e){return[(e[0]-16)/219,(e[1]-128)/224,(e[2]-128)/224]},o.rgb=function(e,t,r){return i.rgb(o.ypbpr(e),t,r)},n.xvycc=function(e,t,r){return i.xvycc(n.ypbpr(e,t,r))}},{"./rgb":124,"./ypbpr":137}],129:[function(e,t,r){"use strict";var n=e("./xyz"),i={name:"xyy",min:[0,0,0],max:[1,1,100],channel:["x","y","Y"],alias:["xyY","Yxy","yxy"]};i.xyz=function(e){var t,r,n,i,o;return i=e[0],o=e[1],r=e[2],0===o?[0,0,0]:(t=i*r/o,n=(1-i-o)*r/o,[t,r,n])},n.xyy=function(e){var t,r,n,i;return r=e[0],n=e[1],i=e[2],t=r+n+i,0===t?[0,0,n]:[r/t,n/t,n]},t.exports=i},{"./xyz":130}],130:[function(e,t,r){"use strict";var n=e("./rgb"),i={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};i.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}},i.max=i.whitepoint[2].D65,i.rgb=function(e,t){t=t||i.whitepoint[2].E;var r,n,o,a=e[0]/t[0],u=e[1]/t[1],s=e[2]/t[2];return r=3.240969941904521*a+-1.537383177570093*u+-.498610760293*s,n=-.96924363628087*a+1.87596750150772*u+.041555057407175*s,o=.055630079696993*a+-.20397695888897*u+1.056971514242878*s,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),[255*r,255*n,255*o]},n.xyz=function(e,t){var r=e[0]/255,n=e[1]/255,o=e[2]/255,a=.41239079926595*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.35758433938387*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.18048078840183*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),u=.21263900587151*r+.71516867876775*n+.072192315360733*o,s=.019330818715591*r+.11919477979462*n+.95053215224966*o;return t=t||i.whitepoint[2].E,[a*t[0],u*t[1],s*t[2]]},t.exports=i},{"./rgb":124}],131:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./ypbpr"),o=t.exports={name:"ycbcr",min:[16,16,16],max:[235,240,240],channel:["Y","Cb","Cr"],alias:["YCbCr","YCC"]};i.ycbcr=function(e){return[16+219*e[0],128+224*e[1],128+224*e[2]]},o.ypbpr=function(e){return[(e[0]-16)/219,(e[1]-128)/224,(e[2]-128)/224]},o.rgb=function(e,t,r){return i.rgb(o.ypbpr(e),t,r)},n.ycbcr=function(e,t,r){return i.ycbcr(n.ypbpr(e,t,r))}},{"./rgb":124,"./ypbpr":137}],132:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./ypbpr");(t.exports={name:"yccbccrc",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Yc","Cbc","Crc"],alias:["YcCbcCrc"]}).rgb=function(e){return i.rgb(e,.0593,.2627)},n.yccbccrc=function(e){return n.ypbpr(e,.0593,.2627)}},{"./rgb":124,"./ypbpr":137}],133:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"ycgco",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Cg","Co"],alias:["YCgCo"]}).rgb=function(e){var t=e[0],r=e[1],n=e[2],i=t-r;return[255*(i+n),255*(t+r),255*(i-n)]},n.ycgco=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[.25*t+.5*r+.25*n,-.25*t+.5*r-.25*n,.5*t-.5*n]}},{"./rgb":124}],134:[function(e,t,r){"use strict";var n=e("./rgb"),i=e("./yuv"),o=t.exports={name:"ydbdr",min:[0,-1.333,-1.333],max:[1,1.333,1.333],channel:["Y","Db","Dr"],alias:["YDbDr"]};o.rgb=function(e){var t=e[0],r=e[1],n=e[2];return[255*(t+92303716148e-15*r-.525912630661865*n),255*(t-.129132898890509*r+.267899328207599*n),255*(t+.664679059978955*r-79202543533e-15*n)]},n.ydbdr=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[.299*t+.587*r+.114*n,-.45*t-.883*r+1.333*n,-1.333*t+1.116*r+.217*n]},i.ydbdr=function(e){return[e[0],3.059*e[1],-2.169*e[2]]},o.yuv=function(e){return[e[0],e[1]/3.059,-e[2]/2.169]}},{"./rgb":124,"./yuv":138}],135:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"yes",min:[0,0,0],max:[1,1,1],channel:["luminance","e-factor","s-factor"]}).rgb=function(e){var t=e[0],r=e[1],n=e[2],i=[1,1.431,.126,1,-.569,.126,1,.431,-1.874];return[255*(t*i[0]+r*i[1]+n*i[2]),255*(t*i[3]+r*i[4]+n*i[5]),255*(t*i[6]+r*i[7]+n*i[8])]},n.yes=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=[.253,.684,.063,.5,-.5,0,.25,.25,-.5];return[t*i[0]+r*i[1]+n*i[2],t*i[3]+r*i[4]+n*i[5],t*i[6]+r*i[7]+n*i[8]]}},{"./rgb":124}],136:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"yiq",min:[0,-.5957,-.5226],max:[1,.5957,.5226],channel:["Y","I","Q"],alias:["YIQ"]}).rgb=function(e){var t,r,n,i=e[0],o=e[1],a=e[2];return t=1*i+.956*o+.621*a,r=1*i+-.272*o+-.647*a,n=1*i+-1.108*o+1.705*a,t=Math.min(Math.max(0,t),1),r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),[255*t,255*r,255*n]},n.yiq=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=.299*t+.587*r+.114*n,o=0,a=0;return t===r&&r===n||(o=.596*t+-.275*r+-.321*n,a=.212*t+-.528*r+.311*n),[i,o,a]}},{"./rgb":124}],137:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"ypbpr",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Pb","Pr"],alias:["YPbPr","Y/PB/PR","YPRPB","PRPBY","PBPRY","Y/Pb/Pr","YPrPb","PrPbY","PbPrY","Y/R-Y/B-Y","Y(R-Y)(B-Y)","R-Y","B-Y"]}).rgb=function(e,t,r){var n=e[0],i=e[1],o=e[2];t=t||.0722;var a=n+2*o*(1-(r=r||.2126)),u=n+2*i*(1-t);return[255*a,(n-r*a-t*u)/(1-r-t)*255,255*u]},n.ypbpr=function(e,t,r){var n=e[0]/255,i=e[1]/255,o=e[2]/255;t=t||.0722;var a=(r=r||.2126)*n+(1-r-t)*i+t*o;return[a,.5*(o-a)/(1-t),.5*(n-a)/(1-r)]}},{"./rgb":124}],138:[function(e,t,r){"use strict";var n=e("./rgb");(t.exports={name:"yuv",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","U","V"],alias:["YUV","EBU"]}).rgb=function(e){var t,r,n,i=e[0],o=e[1],a=e[2];return t=1*i+0*o+1.13983*a,r=1*i+-.39465*o+-.5806*a,n=1*i+2.02311*o+0*a,t=Math.min(Math.max(0,t),1),r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),[255*t,255*r,255*n]},n.yuv=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[.299*t+.587*r+.114*n,-.14713*t+-.28886*r+.436*n,.615*t+-.51499*r+-.10001*n]}},{"./rgb":124}],139:[function(e,t,r){function n(e,t,r){return Math.min(Math.max(t,e),r)}function i(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var o=e("color-name"),a=e("simple-swizzle"),u={};for(var s in o)o.hasOwnProperty(s)&&(u[o[s]]=s);var c=t.exports={to:{}};c.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=c.get.hsl(e),r="hsl";break;case"hwb":t=c.get.hwb(e),r="hwb";break;default:t=c.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},c.get.rgb=function(e){if(!e)return null;var t,r,i,a=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,c=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,l=/(\D+)/,f=[0,0,0,1];if(t=e.match(u)){for(i=t[2],t=t[1],r=0;r<3;r++){var h=2*r;f[r]=parseInt(t.slice(h,h+2),16)}i&&(f[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(t=e.match(a)){for(i=(t=t[1])[3],r=0;r<3;r++)f[r]=parseInt(t[r]+t[r],16);i&&(f[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(t=e.match(s)){for(r=0;r<3;r++)f[r]=parseInt(t[r+1],0);t[4]&&(f[3]=parseFloat(t[4]))}else{if(!(t=e.match(c)))return(t=e.match(l))?"transparent"===t[1]?[0,0,0,0]:(f=o[t[1]])?(f[3]=1,f):null:null;for(r=0;r<3;r++)f[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(f[3]=parseFloat(t[4]))}for(r=0;r<3;r++)f[r]=n(f[r],0,255);return f[3]=n(f[3],0,1),f},c.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=e.match(t);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,n(parseFloat(r[2]),0,100),n(parseFloat(r[3]),0,100),n(isNaN(i)?1:i,0,1)]}return null},c.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=e.match(t);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,n(parseFloat(r[2]),0,100),n(parseFloat(r[3]),0,100),n(isNaN(i)?1:i,0,1)]}return null},c.to.hex=function(){var e=a(arguments);return"#"+i(e[0])+i(e[1])+i(e[2])+(e[3]<1?i(Math.round(255*e[3])):"")},c.to.rgb=function(){var e=a(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},c.to.rgb.percent=function(){var e=a(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},c.to.hsl=function(){var e=a(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},c.to.hwb=function(){var e=a(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},c.to.keyword=function(e){return u[e.slice(0,3)]}},{"color-name":103,"simple-swizzle":409}],140:[function(e,t,r){"use strict";function n(e,t,r){var n=u(e[0],-t[0]),i=u(e[1],-t[1]),o=u(r[0],-t[0]),a=u(r[1],-t[1]),l=c(s(n,o),s(i,a));return l[l.length-1]>=0}function i(e,t,r,i){var u=o(t,r,i);if(0===u){var s=a(o(e,t,r)),c=a(o(e,t,i));if(s===c){if(0===s){var l=n(e,t,r);return l===n(e,t,i)?0:l?1:-1}return 0}return 0===c?s>0?-1:n(e,t,i)?-1:1:0===s?c>0?1:n(e,t,r)?1:-1:a(c-s)}var f=o(e,t,r);return f>0?u>0&&o(e,t,i)>0?1:-1:f<0?u>0||o(e,t,i)>0?1:-1:o(e,t,i)>0?1:n(e,t,r)?1:-1}t.exports=i;var o=e("robust-orientation"),a=e("signum"),u=e("two-sum"),s=e("robust-product"),c=e("robust-sum")},{"robust-orientation":401,"robust-product":402,"robust-sum":406,signum:141,"two-sum":425}],141:[function(e,t,r){"use strict";t.exports=function(e){return e<0?-1:e>0?1:0}},{}],142:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function u(e){return"string"==typeof e}function s(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===y(e)}function p(e){return"[object Error]"===y(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=u,r.isSymbol=s,r.isUndefined=c,r.isRegExp=l,r.isObject=f,r.isDate=h,r.isError=p,r.isFunction=d,r.isPrimitive=g,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":339}],143:[function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===a){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}var o=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":145}],144:[function(e,t,r){"use strict";function n(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,u=t.indexArgs.length>0,s=[],c=[],l=0,f=0;for(n=0;n<o;++n)c.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)f=l,l=e[n],0===n?c.push(["d",i,"s",n,"=t",i,"p",l].join("")):c.push(["d",i,"s",n,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(c.length>0&&s.push("var "+c.join(",")),n=o-1;n>=0;--n)l=e[n],s.push(["for(i",n,"=0;i",n,"<s",l,";++i",n,"){"].join(""));for(s.push(r),n=0;n<o;++n){for(f=l,l=e[n],i=0;i<a;++i)s.push(["p",i,"+=d",i,"s",n].join(""));u&&(n>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",l,"]"].join(""))),s.push("}")}return s.join("\n")}function i(e,t,r,i){for(var o=t.length,a=r.arrayArgs.length,u=r.blockSize,s=r.indexArgs.length>0,c=[],l=0;l<a;++l)c.push(["var offset",l,"=p",l].join(""));for(l=e;l<o;++l)c.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",u,"){"].join("")),c.push(["s",t[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",t[l],"=",u].join("")),c.push(["j",l,"-=",u,"}"].join("")),s&&c.push(["index[",t[l],"]=j",l].join(""));for(l=0;l<a;++l){for(var f=["offset"+l],h=e;h<o;++h)f.push(["j",h,"*t",l,"p",t[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(n(t,r,i));for(l=e;l<o;++l)c.push("}");return c.join("\n")}function o(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function a(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var u=e.args[a];if(!(u.count<=0)){var s=new RegExp(u.name,"g"),c="",l=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a);l=t.offsetArgs[f].array,c="+q"+f;case"array":c="p"+l+c;var h="l"+a,p="a"+l;if(0===t.arrayBlockIndices[l])1===u.count?"generic"===r[l]?u.lvalue?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),n=n.replace(s,h),o.push([p,".set(",c,",",h,")"].join(""))):n=n.replace(s,[p,".get(",c,")"].join("")):n=n.replace(s,[p,"[",c,"]"].join("")):"generic"===r[l]?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),n=n.replace(s,h),u.lvalue&&o.push([p,".set(",c,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",c,"]"].join("")),n=n.replace(s,h),u.lvalue&&o.push([p,"[",c,"]=",h].join("")));else{for(var d=[u.name],g=[c],y=0;y<Math.abs(t.arrayBlockIndices[l]);y++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+l+"b"+y);if(s=new RegExp(d.join(""),"g"),c=g.join("+"),"generic"===r[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(s,[p,"[",c,"]"].join(""))}break;case"scalar":n=n.replace(s,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function s(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)l[f]=t[2*f],s[f]=t[2*f+1];for(var h=[],p=[],d=[],g=[],y=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(d.push(0),g.push(r),h.push(r),p.push(r+e.arrayBlockIndices[f])):(d.push(e.arrayBlockIndices[f]),g.push(e.arrayBlockIndices[f]+r),h.push(0),p.push(e.arrayBlockIndices[f]));for(var m=[],M=0;M<s[f].length;M++)d[f]<=s[f][M]&&s[f][M]<g[f]&&m.push(s[f][M]-d[f]);y.push(m)}for(var v=["SS"],b=["'use strict'"],w=[],M=0;M<r;++M)w.push(["s",M,"=SS[",M,"]"].join(""));for(f=0;f<e.arrayArgs.length;++f){v.push("a"+f),v.push("t"+f),v.push("p"+f);for(M=0;M<r;++M)w.push(["t",f,"p",M,"=t",f,"[",d[f]+M,"]"].join(""));for(M=0;M<Math.abs(e.arrayBlockIndices[f]);++M)w.push(["t",f,"b",M,"=t",f,"[",h[f]+M,"]"].join(""))}for(f=0;f<e.scalarArgs.length;++f)v.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var x=new Array(r),f=0;f<r;++f)x[f]="0";w.push(["index=[",x.join(","),"]"].join(""))}for(f=0;f<e.offsetArgs.length;++f){for(var D=e.offsetArgs[f],j=[],M=0;M<D.offset.length;++M)0!==D.offset[M]&&(1===D.offset[M]?j.push(["t",D.array,"p",M].join("")):j.push([D.offset[M],"*t",D.array,"p",M].join("")));0===j.length?w.push("q"+f+"=0"):w.push(["q",f,"=",j.join("+")].join(""))}var N=c([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));(w=w.concat(N)).length>0&&b.push("var "+w.join(","));for(f=0;f<e.arrayArgs.length;++f)b.push("p"+f+"|=0");e.pre.body.length>3&&b.push(a(e.pre,e,l));var A=a(e.body,e,l),L=o(y);L<r?b.push(i(L,y[0],e,A)):b.push(n(y[0],e,A)),e.post.body.length>3&&b.push(a(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var T=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",L,u(l)].join("");return new Function(["function ",T,"(",v.join(","),"){",b.join("\n"),"} return ",T].join(""))()}var c=e("uniq");t.exports=s},{uniq:429}],145:[function(e,t,r){"use strict";function n(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],u=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],c=[],l=0;l<e.arrayArgs.length;++l){var f=e.arrayArgs[l];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),u.push("array"+f+".data"),u.push("array"+f+".stride"),u.push("array"+f+".offset|0"),l>0&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(l=0;l<e.scalarArgs.length;++l)u.push("scalar"+e.scalarArgs[l]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(i.bind(void 0,e))}var i=e("./compile.js");t.exports=n},{"./compile.js":144}],146:[function(e,t,r){(function(n){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function s(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=a,r.formatArgs=o,r.save=u,r.load=s,r.useColors=i,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(s())}).call(this,e("_process"))},{"./debug":147,_process:377}],147:[function(e,t,r){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function i(e){function t(){if(t.enabled){var e=t,n=+new Date,i=n-(c||n);e.diff=i,e.prev=c,e.curr=n,c=n;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=r.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var a=o[u];t=i.call(e,a),o.splice(u,1),u--}return t}),r.formatArgs.call(e,o),(t.log||r.log||console.log.bind(console)).apply(e,o)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),"function"==typeof r.init&&r.init(t),t}function o(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function a(){r.enable("")}function u(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function s(e){return e instanceof Error?e.stack||e.message:e}(r=t.exports=i.debug=i.default=i).coerce=s,r.disable=a,r.enable=o,r.enabled=u,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var c},{ms:348}],148:[function(e,t,r){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],149:[function(e,t,r){var n=e("synthetic-dom-events"),i=function(e,t,r,n){return e.addEventListener(t,r,n||!1)},o=function(e,t,r,n){return e.removeEventListener(t,r,n||!1)},a=function(e,t,r,n){function a(i){o(e,t,a,n),r(i)}i(e,t,a,n)},u=function(e,t,r){var i=n(t,r);e.dispatchEvent(i)};document.addEventListener||(i=function(e,t,r){return e.attachEvent("on"+t,r)}),document.removeEventListener||(o=function(e,t,r){return e.detachEvent("on"+t,r)}),document.dispatchEvent||(u=function(e,t,r){var i=n(t,r);return e.fireEvent("on"+i.type,i)}),t.exports={on:i,off:o,once:a,emit:u}},{"synthetic-dom-events":417}],150:[function(e,t,r){(function(e){function r(e,t){return p[0]=e,p[1]=t,h[0]}function n(e){return h[0]=e,p[0]}function i(e){return h[0]=e,p[1]}function o(e,t){return p[1]=e,p[0]=t,h[0]}function a(e){return h[0]=e,p[1]}function u(e){return h[0]=e,p[0]}function s(e,t){return d.writeUInt32LE(e,0,!0),d.writeUInt32LE(t,4,!0),d.readDoubleLE(0,!0)}function c(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(0,!0)}function l(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(4,!0)}var f=!1;if("undefined"!=typeof Float64Array){var h=new Float64Array(1),p=new Uint32Array(h.buffer);h[0]=1,f=!0,1072693248===p[1]?(t.exports=function(e){return h[0]=e,[p[0],p[1]]},t.exports.pack=r,t.exports.lo=n,t.exports.hi=i):1072693248===p[0]?(t.exports=function(e){return h[0]=e,[p[1],p[0]]},t.exports.pack=o,t.exports.lo=a,t.exports.hi=u):f=!1}if(!f){var d=new e(8);t.exports=function(e){return d.writeDoubleLE(e,0,!0),[d.readUInt32LE(0,!0),d.readUInt32LE(4,!0)]},t.exports.pack=s,t.exports.lo=c,t.exports.hi=l}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var r=t.exports.lo(e),n=t.exports.hi(e),i=1048575&n;return 2146435072&n&&(i+=1<<20),[r,i]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}}).call(this,e("buffer").Buffer)},{buffer:88}],151:[function(e,t,r){"use strict";function n(e,t,r){var i=0|e[r];if(i<=0)return[];var o,a=new Array(i);if(r===e.length-1)for(o=0;o<i;++o)a[o]=t;else for(o=0;o<i;++o)a[o]=n(e,t,r+1);return a}function i(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function o(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return n(e,t,0)}return[]}t.exports=o},{}],152:[function(e,t,r){"use strict";function n(e,t){var r=e.length;if("number"!=typeof t){t=0;for(a=0;a<r;++a){var n=e[a];t=Math.max(t,n[0],n[1])}t=1+(0|t)}t|=0;for(var o=new Array(t),a=0;a<t;++a)o[a]=[];for(a=0;a<r;++a)o[(n=e[a])[0]].push(n[1]),o[n[1]].push(n[0]);for(var u=0;u<t;++u)i(o[u],function(e,t){return e-t});return o}t.exports=n;var i=e("uniq")},{uniq:429}],153:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],u(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),c=r.slice(),n=c.length,s=0;s<n;s++)c[s].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(u=o;u-- >0;)if(r[u]===t||r[u].listener&&r[u].listener===t){n=u;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],154:[function(e,t,r){var n=e("gl-vec3/transformMat4"),i=e("gl-vec3/add"),o=e("gl-vec3/subtract"),a=e("gl-vec3/normalize"),u=e("gl-vec3/cross"),s=e("gl-vec3/dot"),c=e("gl-mat4/identity"),l=e("gl-mat4/rotate"),f=[],h=[],p=[];t.exports=function(e){var t={positions:[],cells:[]},r=e.path,d=e.positions;if(!d)throw new Error("positions not provided");var g=e.edges;if(!g)throw new Error("edges not provided");for(var y=e.cells,m=e.closed,M=d.length,v=r.length,b=g.length,w=0;w<v;w++){var x=[0,0,1];m?o(h,r[(w-1+v)%(v-1)],r[(w+1)%(v-1)]):0===w?o(h,r[w],r[w+1]):w===v-1?o(h,r[w-1],r[w]):o(h,r[w-1],r[w+1]),a(h,h),u(p,x,h);var D=Math.acos(s(x,h));c(f),l(f,f,D,p);var j=r[w][3];j&&l(f,f,j,x);for(I=0;I<M;I++){var N=d[I],A=[N[0],N[1],N[2]||0];n(A,A,f),i(A,A,r[w]),t.positions.push(A)}}for(w=0;w<v-1;w++)for(I=0;I<b;I++){var L=g[I];t.cells.push([w*M+L[0],w*M+L[1],(w+1)*M+L[0]]),t.cells.push([w*M+L[1],(w+1)*M+L[0],(w+1)*M+L[1]])}if(y&&!m&&!1!==e.startCap&&!1!==e.caps)for(w=0;w<y.length;w++){for(var T=[],E=y[w].length,I=0;I<E;I++)T.push(y[w][I]);t.cells.push(T)}if(y&&!m&&!1!==e.endCap&&!1!==e.caps)for(w=0;w<y.length;w++){for(var T=[],E=y[w].length,I=0;I<E;I++)T.push(y[w][I]+(v-1)*M);t.cells.push(T)}return t}},{"gl-mat4/identity":189,"gl-mat4/rotate":197,"gl-vec3/add":261,"gl-vec3/cross":266,"gl-vec3/dot":269,"gl-vec3/normalize":280,"gl-vec3/subtract":290,"gl-vec3/transformMat4":292}],155:[function(e,t,r){function n(e,t,r,n,i){var o=t.length,e=e||new Float32Array(3*o+6);i=i||t;for(var a=1,u=3;a<o;a+=2,u+=6)e[u-3]=t[a-1],e[u-2]=r,e[u-1]=t[a],e[u]=i[a-1],e[u+1]=n,e[u+2]=i[a];return e[u-3]=t[0],e[u-2]=r,e[u-1]=t[1],e[u]=i[0],e[u+1]=n,e[u+2]=i[1],e}function i(e,t){t=t||new Float32Array(e.length-6);for(var r=2,n=e.length,i=6;r<=n;r+=1,i+=3)t[i-2]=r-2,t[i-1]=r-1,t[i-0]=r;return t}t.exports=n,n.faces=i},{}],156:[function(e,t,r){var n=e("pnltri"),i=e("lodash.defaults");t.exports=function(e,t){function r(e){return e=e.map(function(e){return{x:e[0],y:e[1]}}),(new n.Triangulator).triangulate_polygon([e])}i(t=t||{},{top:1,bottom:0,closed:!0});var o,a,u=e.length;return t.top===t.bottom?function(){o=e.map(function(e){return[e[0],e[1],t.top]}),a=r(e)}():function(){o=[],e.forEach(function(e){o.push([e[0],e[1],t.top])}),e.forEach(function(e){o.push([e[0],e[1],t.bottom])}),a=[];for(var n=0;n<u;n++)n===u-1?(a.push([n+u,u,n]),a.push([0,n,u])):(a.push([n+u,n+u+1,n]),a.push([n+1,n,n+u+1]));if(t.closed){var i=r(e),s=i.map(function(e){return e.map(function(e){return e+u})});s=s.map(function(e){return[e[0],e[2],e[1]]}),a=a.concat(i).concat(s)}}(),{positions:o,cells:a}}},{"lodash.defaults":341,pnltri:368}],157:[function(e,t,r){function n(e,t){return t||(t=[]),i(o,e),t[0]=o[12],t[1]=o[13],t[2]=o[14],t}var i=e("gl-mat4/invert"),o=new Float32Array(16);t.exports=n},{"gl-mat4/invert":191}],158:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){this._color=e,this.key=t,this.value=r,this.left=n,this.right=i,this._count=o}function i(e){return new n(e._color,e.key,e.value,e.left,e.right,e._count)}function o(e,t){return new n(e,t.key,t.value,t.left,t.right,t._count)}function a(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e,this.root=t}function s(e,t){if(t.left&&(r=s(e,t.left)))return r;var r=e(t.key,t.value);return r||(t.right?s(e,t.right):void 0)}function c(e,t,r,n){if(t(e,n.key)<=0){if(n.left&&(i=c(e,t,r,n.left)))return i;var i=r(n.key,n.value);if(i)return i}if(n.right)return c(e,t,r,n.right)}function l(e,t,r,n,i){var o,a=r(e,i.key),u=r(t,i.key);if(a<=0){if(i.left&&(o=l(e,t,r,n,i.left)))return o;if(u>0&&(o=n(i.key,i.value)))return o}if(u>0&&i.right)return l(e,t,r,n,i.right)}function f(e,t){this.tree=e,this._stack=t}function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function p(e){for(var t,r,n,u,s=e.length-1;s>=0;--s){if(t=e[s],0===s)return void(t._color=m);if((r=e[s-1]).left===t){if((n=r.right).right&&n.right._color===y)return n=r.right=i(n),u=n.right=i(n.right),r.right=n.left,n.left=r,n.right=u,n._color=r._color,t._color=m,r._color=m,u._color=m,a(r),a(n),s>1&&((c=e[s-2]).left===r?c.left=n:c.right=n),void(e[s-1]=n);if(n.left&&n.left._color===y)return n=r.right=i(n),u=n.left=i(n.left),r.right=u.left,n.left=u.right,u.left=r,u.right=n,u._color=r._color,r._color=m,n._color=m,t._color=m,a(r),a(n),a(u),s>1&&((c=e[s-2]).left===r?c.left=u:c.right=u),void(e[s-1]=u);if(n._color===m){if(r._color===y)return r._color=m,void(r.right=o(y,n));r.right=o(y,n);continue}n=i(n),r.right=n.left,n.left=r,n._color=r._color,r._color=y,a(r),a(n),s>1&&((c=e[s-2]).left===r?c.left=n:c.right=n),e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s+=2}else{if((n=r.left).left&&n.left._color===y)return n=r.left=i(n),u=n.left=i(n.left),r.left=n.right,n.right=r,n.left=u,n._color=r._color,t._color=m,r._color=m,u._color=m,a(r),a(n),s>1&&((c=e[s-2]).right===r?c.right=n:c.left=n),void(e[s-1]=n);if(n.right&&n.right._color===y)return n=r.left=i(n),u=n.right=i(n.right),r.left=u.right,n.right=u.left,u.right=r,u.left=n,u._color=r._color,r._color=m,n._color=m,t._color=m,a(r),a(n),a(u),s>1&&((c=e[s-2]).right===r?c.right=u:c.left=u),void(e[s-1]=u);if(n._color===m){if(r._color===y)return r._color=m,void(r.left=o(y,n));r.left=o(y,n);continue}if(n=i(n),r.left=n.right,n.right=r,n._color=r._color,r._color=y,a(r),a(n),s>1){var c=e[s-2];c.right===r?c.right=n:c.left=n}e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s+=2}}}function d(e,t){return e<t?-1:e>t?1:0}function g(e){return new u(e||d,null)}t.exports=g;var y=0,m=1,M=u.prototype;Object.defineProperty(M,"keys",{get:function(){var e=[];return this.forEach(function(t,r){e.push(t)}),e}}),Object.defineProperty(M,"values",{get:function(){var e=[];return this.forEach(function(t,r){e.push(r)}),e}}),Object.defineProperty(M,"length",{get:function(){return this.root?this.root._count:0}}),M.insert=function(e,t){for(var r=this._compare,i=this.root,s=[],c=[];i;){var l=r(e,i.key);s.push(i),c.push(l),i=l<=0?i.left:i.right}s.push(new n(y,e,t,null,null,1));for(f=s.length-2;f>=0;--f){i=s[f];c[f]<=0?s[f]=new n(i._color,i.key,i.value,s[f+1],i.right,i._count+1):s[f]=new n(i._color,i.key,i.value,i.left,s[f+1],i._count+1)}for(var f=s.length-1;f>1;--f){var h=s[f-1],i=s[f];if(h._color===m||i._color===m)break;var p=s[f-2];if(p.left===h)if(h.left===i){if(!(d=p.right)||d._color!==y){p._color=y,p.left=h.right,h._color=m,h.right=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((g=s[f-3]).left===p?g.left=h:g.right=h);break}h._color=m,p.right=o(m,d),p._color=y,f-=1}else{if(!(d=p.right)||d._color!==y){h.right=i.left,p._color=y,p.left=i.right,i._color=m,i.left=h,i.right=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3&&((g=s[f-3]).left===p?g.left=i:g.right=i);break}h._color=m,p.right=o(m,d),p._color=y,f-=1}else if(h.right===i){if(!(d=p.left)||d._color!==y){p._color=y,p.right=h.left,h._color=m,h.left=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((g=s[f-3]).right===p?g.right=h:g.left=h);break}h._color=m,p.left=o(m,d),p._color=y,f-=1}else{var d=p.left;if(!d||d._color!==y){if(h.left=i.right,p._color=y,p.right=i.left,i._color=m,i.right=h,i.left=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3){var g=s[f-3];g.right===p?g.right=i:g.left=i}break}h._color=m,p.left=o(m,d),p._color=y,f-=1}}return s[0]._color=m,new u(r,s[0])},M.forEach=function(e,t,r){if(this.root)switch(arguments.length){case 1:return s(e,this.root);case 2:return c(t,this._compare,e,this.root);case 3:if(this._compare(t,r)>=0)return;return l(t,r,this._compare,e,this.root)}},Object.defineProperty(M,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new f(this,e)}}),Object.defineProperty(M,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new f(this,e)}}),M.at=function(e){if(e<0)return new f(this,[]);for(var t=this.root,r=[];;){if(r.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new f(this,r);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new f(this,[])},M.ge=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new f(this,n)},M.gt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new f(this,n)},M.lt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new f(this,n)},M.le=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new f(this,n)},M.find=function(e){for(var t=this._compare,r=this.root,n=[];r;){var i=t(e,r.key);if(n.push(r),0===i)return new f(this,n);r=i<=0?r.left:r.right}return new f(this,[])},M.remove=function(e){var t=this.find(e);return t?t.remove():this},M.get=function(e){for(var t=this._compare,r=this.root;r;){var n=t(e,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var v=f.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new f(this.tree,this._stack.slice())},v.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),r=e[e.length-1];t[t.length-1]=new n(r._color,r.key,r.value,r.left,r.right,r._count);for(s=e.length-2;s>=0;--s)(r=e[s]).left===e[s+1]?t[s]=new n(r._color,r.key,r.value,t[s+1],r.right,r._count):t[s]=new n(r._color,r.key,r.value,r.left,t[s+1],r._count);if((r=t[t.length-1]).left&&r.right){var i=t.length;for(r=r.left;r.right;)t.push(r),r=r.right;var o=t[i-1];t.push(new n(r._color,o.key,o.value,r.left,r.right,r._count)),t[i-1].key=r.key,t[i-1].value=r.value;for(s=t.length-2;s>=i;--s)r=t[s],t[s]=new n(r._color,r.key,r.value,r.left,t[s+1],r._count);t[i-1].left=t[i]}if((r=t[t.length-1])._color===y){var a=t[t.length-2];a.left===r?a.left=null:a.right===r&&(a.right=null),t.pop();for(s=0;s<t.length;++s)t[s]._count--;return new u(this.tree._compare,t[0])}if(r.left||r.right){r.left?h(r,r.left):r.right&&h(r,r.right),r._color=m;for(s=0;s<t.length-1;++s)t[s]._count--;return new u(this.tree._compare,t[0])}if(1===t.length)return new u(this.tree._compare,null);for(var s=0;s<t.length;++s)t[s]._count--;var c=t[t.length-2];return p(t),c.left===r?c.left=null:c.right=null,new u(this.tree._compare,t[0])},Object.defineProperty(v,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var r=this.tree.root;return r?r._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,t[n].left&&(e+=t[n].left._count));return e},enumerable:!0}),v.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),v.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var r=new Array(t.length),i=t[t.length-1];r[r.length-1]=new n(i._color,i.key,e,i.left,i.right,i._count);for(var o=t.length-2;o>=0;--o)i=t[o],i.left===t[o+1]?r[o]=new n(i._color,i.key,i.value,r[o+1],i.right,i._count):r[o]=new n(i._color,i.key,i.value,i.left,r[o+1],i._count);return new u(this.tree._compare,r[0])},v.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],159:[function(e,t,r){function n(e){if(e<0)return Number("0/0");for(var t=a[0],r=a.length-1;r>0;--r)t+=a[r]/(e+r);var n=e+o+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(n)-n+Math.log(t)-Math.log(e)}var i=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],o=607/128,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];t.exports=function e(t){if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*e(1-t));if(t>100)return Math.exp(n(t));t-=1;for(var r=i[0],o=1;o<9;o++)r+=i[o]/(t+o);var a=t+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,t+.5)*Math.exp(-a)*r},t.exports.log=n},{}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){function t(e){0===e.length&&r.push(n.slice());for(var i=0;i<e.length;i++)e.push(e.shift()),n.push(e[0]),t(e.slice(1)),n.pop()}var r=[],n=[];return t(e),r};r.default=n,t.exports=r.default},{}],161:[function(e,t,r){"use strict";function n(e){for(var t=e.sort(),r=[e[0]],n=1;n<t.length;n++)t[n-1].join("")!==t[n].join("")&&r.push(t[n]);return r}Object.defineProperty(r,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e("get-permutations")),o=function(e){return n((0,i.default)(e))};r.default=o,t.exports=r.default},{"get-permutations":160}],162:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8];return e[0]=a*l-u*c,e[1]=i*c-n*l,e[2]=n*u-i*a,e[3]=u*s-o*l,e[4]=r*l-i*s,e[5]=i*o-r*u,e[6]=o*c-a*s,e[7]=n*s-r*c,e[8]=r*a-n*o,e}t.exports=n},{}],163:[function(e,t,r){function n(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}t.exports=n},{}],164:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}t.exports=n},{}],165:[function(e,t,r){function n(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}t.exports=n},{}],166:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],c=e[8];return t*(c*o-a*s)+r*(a*u-c*i)+n*(s*i-o*u)}t.exports=n},{}],167:[function(e,t,r){function n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}t.exports=n},{}],168:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}t.exports=n},{}],169:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}t.exports=n},{}],170:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,u=n+n,s=i+i,c=r*a,l=n*a,f=n*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return e[0]=1-f-d,e[3]=l-m,e[6]=h+y,e[1]=l+m,e[4]=1-c-d,e[7]=p-g,e[2]=h-y,e[5]=p+g,e[8]=1-c-f,e}t.exports=n},{}],171:[function(e,t,r){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}t.exports=n},{}],172:[function(e,t,r){t.exports={adjoint:e("./adjoint"),clone:e("./clone"),copy:e("./copy"),create:e("./create"),determinant:e("./determinant"),frob:e("./frob"),fromMat2:e("./from-mat2"),fromMat4:e("./from-mat4"),fromQuat:e("./from-quat"),identity:e("./identity"),invert:e("./invert"),multiply:e("./multiply"),normalFromMat4:e("./normal-from-mat4"),rotate:e("./rotate"),scale:e("./scale"),str:e("./str"),translate:e("./translate"),transpose:e("./transpose")}},{"./adjoint":162,"./clone":163,"./copy":164,"./create":165,"./determinant":166,"./frob":167,"./from-mat2":168,"./from-mat4":169,"./from-quat":170,"./identity":171,"./invert":173,"./multiply":174,"./normal-from-mat4":175,"./rotate":176,"./scale":177,"./str":178,"./translate":179,"./transpose":180}],173:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=l*a-u*c,h=-l*o+u*s,p=c*o-a*s,d=r*f+n*h+i*p;return d?(d=1/d,e[0]=f*d,e[1]=(-l*n+i*c)*d,e[2]=(u*n-i*a)*d,e[3]=h*d,e[4]=(l*r-i*s)*d,e[5]=(-u*r+i*o)*d,e[6]=p*d,e[7]=(-c*r+n*s)*d,e[8]=(a*r-n*o)*d,e):null}t.exports=n},{}],174:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=r[0],p=r[1],d=r[2],g=r[3],y=r[4],m=r[5],M=r[6],v=r[7],b=r[8];return e[0]=h*n+p*a+d*c,e[1]=h*i+p*u+d*l,e[2]=h*o+p*s+d*f,e[3]=g*n+y*a+m*c,e[4]=g*i+y*u+m*l,e[5]=g*o+y*s+m*f,e[6]=M*n+v*a+b*c,e[7]=M*i+v*u+b*l,e[8]=M*o+v*s+b*f,e}t.exports=n},{}],175:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],M=r*u-n*a,v=r*s-i*a,b=r*c-o*a,w=n*s-i*u,x=n*c-o*u,D=i*c-o*s,j=l*g-f*d,N=l*y-h*d,A=l*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*T+c*L)*I,e[1]=(s*A-a*E-c*N)*I,e[2]=(a*T-u*A+c*j)*I,e[3]=(i*T-n*E-o*L)*I,e[4]=(r*E-i*A+o*N)*I,e[5]=(n*A-r*T-o*j)*I,e[6]=(g*D-y*x+m*w)*I,e[7]=(y*b-d*D-m*v)*I,e[8]=(d*x-g*b+m*M)*I,e):null}t.exports=n},{}],176:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(r),p=Math.cos(r);return e[0]=p*n+h*a,e[1]=p*i+h*u,e[2]=p*o+h*s,e[3]=p*a-h*n,e[4]=p*u-h*i,e[5]=p*s-h*o,e[6]=c,e[7]=l,e[8]=f,e}t.exports=n},{}],177:[function(e,t,r){function n(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}t.exports=n},{}],178:[function(e,t,r){function n(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}t.exports=n},{}],179:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=r[0],p=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=h*n+p*a+c,e[7]=h*i+p*u+l,e[8]=h*o+p*s+f,e}t.exports=n},{}],180:[function(e,t,r){function n(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}t.exports=n},{}],181:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15];return e[0]=u*(h*m-p*y)-f*(s*m-c*y)+g*(s*p-c*h),e[1]=-(n*(h*m-p*y)-f*(i*m-o*y)+g*(i*p-o*h)),e[2]=n*(s*m-c*y)-u*(i*m-o*y)+g*(i*c-o*s),e[3]=-(n*(s*p-c*h)-u*(i*p-o*h)+f*(i*c-o*s)),e[4]=-(a*(h*m-p*y)-l*(s*m-c*y)+d*(s*p-c*h)),e[5]=r*(h*m-p*y)-l*(i*m-o*y)+d*(i*p-o*h),e[6]=-(r*(s*m-c*y)-a*(i*m-o*y)+d*(i*c-o*s)),e[7]=r*(s*p-c*h)-a*(i*p-o*h)+l*(i*c-o*s),e[8]=a*(f*m-p*g)-l*(u*m-c*g)+d*(u*p-c*f),e[9]=-(r*(f*m-p*g)-l*(n*m-o*g)+d*(n*p-o*f)),e[10]=r*(u*m-c*g)-a*(n*m-o*g)+d*(n*c-o*u),e[11]=-(r*(u*p-c*f)-a*(n*p-o*f)+l*(n*c-o*u)),e[12]=-(a*(f*y-h*g)-l*(u*y-s*g)+d*(u*h-s*f)),e[13]=r*(f*y-h*g)-l*(n*y-i*g)+d*(n*h-i*f),e[14]=-(r*(u*y-s*g)-a*(n*y-i*g)+d*(n*s-i*u)),e[15]=r*(u*h-s*f)-a*(n*h-i*f)+l*(n*s-i*u),e}t.exports=n},{}],182:[function(e,t,r){function n(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},{}],183:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=n},{}],184:[function(e,t,r){function n(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],185:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],y=e[15];return(t*a-r*o)*(f*y-h*g)-(t*u-n*o)*(l*y-h*d)+(t*s-i*o)*(l*g-f*d)+(r*u-n*a)*(c*y-h*p)-(r*s-i*a)*(c*g-f*p)+(n*s-i*u)*(c*d-l*p)}t.exports=n},{}],186:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,u=n+n,s=i+i,c=r*a,l=n*a,f=n*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return e[0]=1-f-d,e[1]=l+m,e[2]=h-y,e[3]=0,e[4]=l-m,e[5]=1-c-d,e[6]=p+g,e[7]=0,e[8]=h+y,e[9]=p-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],187:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=n+n,s=i+i,c=o+o,l=n*u,f=n*s,h=n*c,p=i*s,d=i*c,g=o*c,y=a*u,m=a*s,M=a*c;return e[0]=1-(p+g),e[1]=f+M,e[2]=h-m,e[3]=0,e[4]=f-M,e[5]=1-(l+g),e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-(l+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}t.exports=n},{}],188:[function(e,t,r){function n(e,t,r,n,i,o,a){var u=1/(r-t),s=1/(i-n),c=1/(o-a);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(i+n)*s,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}t.exports=n},{}],189:[function(e,t,r){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],190:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":181,"./clone":182,"./copy":183,"./create":184,"./determinant":185,"./fromQuat":186,"./fromRotationTranslation":187,"./frustum":188,"./identity":189,"./invert":191,"./lookAt":192,"./multiply":193,"./ortho":194,"./perspective":195,"./perspectiveFromFieldOfView":196,"./rotate":197,"./rotateX":198,"./rotateY":199,"./rotateZ":200,"./scale":201,"./str":202,"./translate":203,"./transpose":204}],191:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],M=r*u-n*a,v=r*s-i*a,b=r*c-o*a,w=n*s-i*u,x=n*c-o*u,D=i*c-o*s,j=l*g-f*d,N=l*y-h*d,A=l*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*T+c*L)*I,e[1]=(i*T-n*E-o*L)*I,e[2]=(g*D-y*x+m*w)*I,e[3]=(h*x-f*D-p*w)*I,e[4]=(s*A-a*E-c*N)*I,e[5]=(r*E-i*A+o*N)*I,e[6]=(y*b-d*D-m*v)*I,e[7]=(l*D-h*b+p*v)*I,e[8]=(a*T-u*A+c*j)*I,e[9]=(n*A-r*T-o*j)*I,e[10]=(d*x-g*b+m*M)*I,e[11]=(f*b-l*x-p*M)*I,e[12]=(u*N-a*L-s*j)*I,e[13]=(r*L-n*N+i*j)*I,e[14]=(g*v-d*w-y*M)*I,e[15]=(l*w-f*v+h*M)*I,e):null}t.exports=n},{}],192:[function(e,t,r){function n(e,t,r,n){var o,a,u,s,c,l,f,h,p,d,g=t[0],y=t[1],m=t[2],M=n[0],v=n[1],b=n[2],w=r[0],x=r[1],D=r[2];return Math.abs(g-w)<1e-6&&Math.abs(y-x)<1e-6&&Math.abs(m-D)<1e-6?i(e):(f=g-w,h=y-x,p=m-D,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=v*p-b*h,a=b*f-M*p,u=M*h-v*f,d=Math.sqrt(o*o+a*a+u*u),d?(d=1/d,o*=d,a*=d,u*=d):(o=0,a=0,u=0),s=h*u-p*a,c=p*o-f*u,l=f*a-h*o,d=Math.sqrt(s*s+c*c+l*l),d?(d=1/d,s*=d,c*=d,l*=d):(s=0,c=0,l=0),e[0]=o,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=c,e[6]=h,e[7]=0,e[8]=u,e[9]=l,e[10]=p,e[11]=0,e[12]=-(o*g+a*y+u*m),e[13]=-(s*g+c*y+l*m),e[14]=-(f*g+h*y+p*m),e[15]=1,e)}var i=e("./identity");t.exports=n},{"./identity":189}],193:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],g=t[12],y=t[13],m=t[14],M=t[15],v=r[0],b=r[1],w=r[2],x=r[3];return e[0]=v*n+b*u+w*f+x*g,e[1]=v*i+b*s+w*h+x*y,e[2]=v*o+b*c+w*p+x*m,e[3]=v*a+b*l+w*d+x*M,v=r[4],b=r[5],w=r[6],x=r[7],e[4]=v*n+b*u+w*f+x*g,e[5]=v*i+b*s+w*h+x*y,e[6]=v*o+b*c+w*p+x*m,e[7]=v*a+b*l+w*d+x*M,v=r[8],b=r[9],w=r[10],x=r[11],e[8]=v*n+b*u+w*f+x*g,e[9]=v*i+b*s+w*h+x*y,e[10]=v*o+b*c+w*p+x*m,e[11]=v*a+b*l+w*d+x*M,v=r[12],b=r[13],w=r[14],x=r[15],e[12]=v*n+b*u+w*f+x*g,e[13]=v*i+b*s+w*h+x*y,e[14]=v*o+b*c+w*p+x*m,e[15]=v*a+b*l+w*d+x*M,e}t.exports=n},{}],194:[function(e,t,r){function n(e,t,r,n,i,o,a){var u=1/(t-r),s=1/(n-i),c=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*u,e[13]=(i+n)*s,e[14]=(a+o)*c,e[15]=1,e}t.exports=n},{}],195:[function(e,t,r){function n(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e}t.exports=n},{}],196:[function(e,t,r){function n(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(i+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(i-o)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}t.exports=n},{}],197:[function(e,t,r){function n(e,t,r,n){var i,o,a,u,s,c,l,f,h,p,d,g,y,m,M,v,b,w,x,D,j,N,A,L,T=n[0],E=n[1],I=n[2],O=Math.sqrt(T*T+E*E+I*I);return Math.abs(O)<1e-6?null:(O=1/O,T*=O,E*=O,I*=O,i=Math.sin(r),o=Math.cos(r),a=1-o,u=t[0],s=t[1],c=t[2],l=t[3],f=t[4],h=t[5],p=t[6],d=t[7],g=t[8],y=t[9],m=t[10],M=t[11],v=T*T*a+o,b=E*T*a+I*i,w=I*T*a-E*i,x=T*E*a-I*i,D=E*E*a+o,j=I*E*a+T*i,N=T*I*a+E*i,A=E*I*a-T*i,L=I*I*a+o,e[0]=u*v+f*b+g*w,e[1]=s*v+h*b+y*w,e[2]=c*v+p*b+m*w,e[3]=l*v+d*b+M*w,e[4]=u*x+f*D+g*j,e[5]=s*x+h*D+y*j,e[6]=c*x+p*D+m*j,e[7]=l*x+d*D+M*j,e[8]=u*N+f*A+g*L,e[9]=s*N+h*A+y*L,e[10]=c*N+p*A+m*L,e[11]=l*N+d*A+M*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=n},{}],198:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+l*n,e[6]=u*i+f*n,e[7]=s*i+h*n,e[8]=c*i-o*n,e[9]=l*i-a*n,e[10]=f*i-u*n,e[11]=h*i-s*n,e}t.exports=n},{}],199:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],u=t[2],s=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-l*n,e[2]=u*i-f*n,e[3]=s*i-h*n,e[8]=o*n+c*i,e[9]=a*n+l*i,e[10]=u*n+f*i,e[11]=s*n+h*i,e}t.exports=n},{}],200:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],u=t[2],s=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+l*n,e[2]=u*i+f*n,e[3]=s*i+h*n,e[4]=c*i-o*n,e[5]=l*i-a*n,e[6]=f*i-u*n,e[7]=h*i-s*n,e}t.exports=n},{}],201:[function(e,t,r){function n(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=n},{}],202:[function(e,t,r){function n(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}t.exports=n},{}],203:[function(e,t,r){function n(e,t,r){var n,i,o,a,u,s,c,l,f,h,p,d,g=r[0],y=r[1],m=r[2];return t===e?(e[12]=t[0]*g+t[4]*y+t[8]*m+t[12],e[13]=t[1]*g+t[5]*y+t[9]*m+t[13],e[14]=t[2]*g+t[6]*y+t[10]*m+t[14],e[15]=t[3]*g+t[7]*y+t[11]*m+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*g+u*y+f*m+t[12],e[13]=i*g+s*y+h*m+t[13],e[14]=o*g+c*y+p*m+t[14],e[15]=a*g+l*y+d*m+t[15]),e}t.exports=n},{}],204:[function(e,t,r){function n(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=n},{}],205:[function(e,t,r){t.exports=e("gl-vec4/add")},{"gl-vec4/add":294}],206:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}t.exports=n},{}],207:[function(e,t,r){t.exports=e("gl-vec4/clone")},{"gl-vec4/clone":295}],208:[function(e,t,r){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}t.exports=n},{}],209:[function(e,t,r){t.exports=e("gl-vec4/copy")},{"gl-vec4/copy":296}],210:[function(e,t,r){function n(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}t.exports=n},{}],211:[function(e,t,r){t.exports=e("gl-vec4/dot")},{"gl-vec4/dot":300}],212:[function(e,t,r){function n(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e}t.exports=n},{}],213:[function(e,t,r){t.exports=e("gl-vec4/fromValues")},{"gl-vec4/fromValues":301}],214:[function(e,t,r){function n(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}t.exports=n},{}],215:[function(e,t,r){t.exports={add:e("./add"),calculateW:e("./calculateW"),clone:e("./clone"),conjugate:e("./conjugate"),copy:e("./copy"),create:e("./create"),dot:e("./dot"),fromMat3:e("./fromMat3"),fromValues:e("./fromValues"),identity:e("./identity"),invert:e("./invert"),length:e("./length"),lerp:e("./lerp"),multiply:e("./multiply"),normalize:e("./normalize"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),rotationTo:e("./rotationTo"),scale:e("./scale"),set:e("./set"),setAxes:e("./setAxes"),setAxisAngle:e("./setAxisAngle"),slerp:e("./slerp"),sqlerp:e("./sqlerp"),squaredLength:e("./squaredLength")}},{"./add":205,"./calculateW":206,"./clone":207,"./conjugate":208,"./copy":209,"./create":210,"./dot":211,"./fromMat3":212,"./fromValues":213,"./identity":214,"./invert":216,"./length":217,"./lerp":218,"./multiply":219,"./normalize":220,"./rotateX":221,"./rotateY":222,"./rotateZ":223,"./rotationTo":224,"./scale":225,"./set":226,"./setAxes":227,"./setAxisAngle":228,"./slerp":229,"./sqlerp":230,"./squaredLength":231}],216:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,u=a?1/a:0;return e[0]=-r*u,e[1]=-n*u,e[2]=-i*u,e[3]=o*u,e}t.exports=n},{}],217:[function(e,t,r){t.exports=e("gl-vec4/length")},{"gl-vec4/length":304}],218:[function(e,t,r){t.exports=e("gl-vec4/lerp")},{"gl-vec4/lerp":305}],219:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[0],s=r[1],c=r[2],l=r[3];return e[0]=n*l+a*u+i*c-o*s,e[1]=i*l+a*s+o*u-n*c,e[2]=o*l+a*c+n*s-i*u,e[3]=a*l-n*u-i*s-o*c,e}t.exports=n},{}],220:[function(e,t,r){t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":310}],221:[function(e,t,r){function n(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+a*u,e[1]=i*s+o*u,e[2]=o*s-i*u,e[3]=a*s-n*u,e}t.exports=n},{}],222:[function(e,t,r){function n(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s-o*u,e[1]=i*s+a*u,e[2]=o*s+n*u,e[3]=a*s-i*u,e}t.exports=n},{}],223:[function(e,t,r){function n(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+i*u,e[1]=i*s-n*u,e[2]=o*s+a*u,e[3]=a*s-o*u,e}t.exports=n},{}],224:[function(e,t,r){function n(e,t,r){var n=i(t,r);return n<-.999999?(o(l,f,t),a(l)<1e-6&&o(l,h,t),u(l,l),c(e,l,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o(l,t,r),e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=1+n,s(e,e))}var i=e("gl-vec3/dot"),o=e("gl-vec3/cross"),a=e("gl-vec3/length"),u=e("gl-vec3/normalize"),s=e("./normalize"),c=e("./setAxisAngle");t.exports=n;var l=[0,0,0],f=[1,0,0],h=[0,1,0]},{"./normalize":220,"./setAxisAngle":228,"gl-vec3/cross":266,"gl-vec3/dot":269,"gl-vec3/length":274,"gl-vec3/normalize":280}],225:[function(e,t,r){t.exports=e("gl-vec4/scale")},{"gl-vec4/scale":312}],226:[function(e,t,r){t.exports=e("gl-vec4/set")},{"gl-vec4/set":314}],227:[function(e,t,r){function n(e,t,r,n){return u[0]=r[0],u[3]=r[1],u[6]=r[2],u[1]=n[0],u[4]=n[1],u[7]=n[2],u[2]=-t[0],u[5]=-t[1],u[8]=-t[2],a(e,o(e,u))}var i=e("gl-mat3/create"),o=e("./fromMat3"),a=e("./normalize");t.exports=n;var u=i()},{"./fromMat3":212,"./normalize":220,"gl-mat3/create":165}],228:[function(e,t,r){function n(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}t.exports=n},{}],229:[function(e,t,r){function n(e,t,r,n){var i,o,a,u,s,c=t[0],l=t[1],f=t[2],h=t[3],p=r[0],d=r[1],g=r[2],y=r[3];return(o=c*p+l*d+f*g+h*y)<0&&(o=-o,p=-p,d=-d,g=-g,y=-y),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-n)*i)/a,s=Math.sin(n*i)/a):(u=1-n,s=n),e[0]=u*c+s*p,e[1]=u*l+s*d,e[2]=u*f+s*g,e[3]=u*h+s*y,e}t.exports=n},{}],230:[function(e,t,r){function n(e,t,r,n,u,s){return i(o,t,u,s),i(a,r,n,s),i(e,o,a,2*s*(1-s)),e}var i=e("./slerp");t.exports=n;var o=[0,0,0,1],a=[0,0,0,1]},{"./slerp":229}],231:[function(e,t,r){t.exports=e("gl-vec4/squaredLength")},{"gl-vec4/squaredLength":316}],232:[function(e,t,r){function n(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}t.exports=n},{}],233:[function(e,t,r){function n(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}t.exports=n},{}],234:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e}t.exports=n},{}],235:[function(e,t,r){function n(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}t.exports=n},{}],236:[function(e,t,r){function n(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}t.exports=n},{}],237:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}t.exports=n},{}],238:[function(e,t,r){function n(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}t.exports=n},{}],239:[function(e,t,r){function n(e,t){return e[0]*t[0]+e[1]*t[1]}t.exports=n},{}],240:[function(e,t,r){function n(e,t,r,n,o,a){var u,s;for(t||(t=2),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,u=r;u<s;u+=t)i[0]=e[u],i[1]=e[u+1],o(i,i,a),e[u]=i[0],e[u+1]=i[1];return e}t.exports=n;var i=e("./create")()},{"./create":235}],241:[function(e,t,r){function n(e,t){var r=new Float32Array(2);return r[0]=e,r[1]=t,r}t.exports=n},{}],242:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat2:e("./transformMat2"),transformMat2d:e("./transformMat2d"),transformMat3:e("./transformMat3"),transformMat4:e("./transformMat4"),forEach:e("./forEach")}},{"./add":232,"./clone":233,"./copy":234,"./create":235,"./cross":236,"./distance":237,"./divide":238,"./dot":239,"./forEach":240,"./fromValues":241,"./length":243,"./lerp":244,"./max":245,"./min":246,"./multiply":247,"./negate":248,"./normalize":249,"./random":250,"./scale":251,"./scaleAndAdd":252,"./set":253,"./squaredDistance":254,"./squaredLength":255,"./subtract":256,"./transformMat2":257,"./transformMat2d":258,"./transformMat3":259,"./transformMat4":260}],243:[function(e,t,r){function n(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}t.exports=n},{}],244:[function(e,t,r){function n(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}t.exports=n},{}],245:[function(e,t,r){function n(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}t.exports=n},{}],246:[function(e,t,r){function n(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}t.exports=n},{}],247:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}t.exports=n},{}],248:[function(e,t,r){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e}t.exports=n},{}],249:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}t.exports=n},{}],250:[function(e,t,r){function n(e,t){t=t||1;var r=2*Math.random()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}t.exports=n},{}],251:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}t.exports=n},{}],252:[function(e,t,r){function n(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}t.exports=n},{}],253:[function(e,t,r){function n(e,t,r){return e[0]=t,e[1]=r,e}t.exports=n},{}],254:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}t.exports=n},{}],255:[function(e,t,r){function n(e){var t=e[0],r=e[1];return t*t+r*r}t.exports=n},{}],256:[function(e,t,r){function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}t.exports=n},{}],257:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}t.exports=n},{}],258:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}t.exports=n},{}],259:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}t.exports=n},{}],260:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}t.exports=n},{}],261:[function(e,t,r){function n(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}t.exports=n},{}],262:[function(e,t,r){function n(e,t){var r=i(e[0],e[1],e[2]),n=i(t[0],t[1],t[2]);o(r,r),o(n,n);var u=a(r,n);return u>1?0:Math.acos(u)}t.exports=n;var i=e("./fromValues"),o=e("./normalize"),a=e("./dot")},{"./dot":269,"./fromValues":271,"./normalize":280}],263:[function(e,t,r){function n(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}t.exports=n},{}],264:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=n},{}],265:[function(e,t,r){function n(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=n},{}],266:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],s=r[2];return e[0]=i*s-o*u,e[1]=o*a-n*s,e[2]=n*u-i*a,e}t.exports=n},{}],267:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}t.exports=n},{}],268:[function(e,t,r){function n(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}t.exports=n},{}],269:[function(e,t,r){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=n},{}],270:[function(e,t,r){function n(e,t,r,n,o,a){var u,s;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,u=r;u<s;u+=t)i[0]=e[u],i[1]=e[u+1],i[2]=e[u+2],o(i,i,a),e[u]=i[0],e[u+1]=i[1],e[u+2]=i[2];return e}t.exports=n;var i=e("./create")()},{"./create":265}],271:[function(e,t,r){function n(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}t.exports=n},{}],272:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":261,"./angle":262,"./clone":263,"./copy":264,"./create":265,"./cross":266,"./distance":267,"./divide":268,"./dot":269,"./forEach":270,"./fromValues":271,"./inverse":273,"./length":274,"./lerp":275,"./max":276,"./min":277,"./multiply":278,"./negate":279,"./normalize":280,"./random":281,"./rotateX":282,"./rotateY":283,"./rotateZ":284,"./scale":285,"./scaleAndAdd":286,"./set":287,"./squaredDistance":288,"./squaredLength":289,"./subtract":290,"./transformMat3":291,"./transformMat4":292,"./transformQuat":293}],273:[function(e,t,r){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}t.exports=n},{}],274:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}t.exports=n},{}],275:[function(e,t,r){function n(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}t.exports=n},{}],276:[function(e,t,r){function n(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}t.exports=n},{}],277:[function(e,t,r){function n(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}t.exports=n},{}],278:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}t.exports=n},{}],279:[function(e,t,r){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}t.exports=n},{}],280:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=n},{}],281:[function(e,t,r){function n(e,t){t=t||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}t.exports=n},{}],282:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],283:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],284:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],285:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}t.exports=n},{}],286:[function(e,t,r){function n(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}t.exports=n},{}],287:[function(e,t,r){function n(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}t.exports=n},{}],288:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}t.exports=n},{}],289:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}t.exports=n},{}],290:[function(e,t,r){function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}t.exports=n},{}],291:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}t.exports=n},{}],292:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}t.exports=n},{}],293:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],s=r[2],c=r[3],l=c*n+u*o-s*i,f=c*i+s*n-a*o,h=c*o+a*i-u*n,p=-a*n-u*i-s*o;return e[0]=l*c+p*-a+f*-s-h*-u,e[1]=f*c+p*-u+h*-a-l*-s,e[2]=h*c+p*-s+l*-u-f*-a,e}t.exports=n},{}],294:[function(e,t,r){function n(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}t.exports=n},{}],295:[function(e,t,r){function n(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}t.exports=n},{}],296:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}t.exports=n},{}],297:[function(e,t,r){function n(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=n},{}],298:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+o*o)}t.exports=n},{}],299:[function(e,t,r){function n(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}t.exports=n},{}],300:[function(e,t,r){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}t.exports=n},{}],301:[function(e,t,r){function n(e,t,r,n){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}t.exports=n},{}],302:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":294,"./clone":295,"./copy":296,"./create":297,"./distance":298,"./divide":299,"./dot":300,"./fromValues":301,"./inverse":303,"./length":304,"./lerp":305,"./max":306,"./min":307,"./multiply":308,"./negate":309,"./normalize":310,"./random":311,"./scale":312,"./scaleAndAdd":313,"./set":314,"./squaredDistance":315,"./squaredLength":316,"./subtract":317,"./transformMat4":318,"./transformQuat":319}],303:[function(e,t,r){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}t.exports=n},{}],304:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}t.exports=n},{}],305:[function(e,t,r){function n(e,t,r,n){var i=t[0],o=t[1],a=t[2],u=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=u+n*(r[3]-u),e}t.exports=n},{}],306:[function(e,t,r){function n(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}t.exports=n},{}],307:[function(e,t,r){function n(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}t.exports=n},{}],308:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}t.exports=n},{}],309:[function(e,t,r){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}t.exports=n},{}],310:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a),e}t.exports=n},{}],311:[function(e,t,r){function n(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),i(e,e),o(e,e,t),e}var i=e("./normalize"),o=e("./scale");t.exports=n},{"./normalize":310,"./scale":312}],312:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}t.exports=n},{}],313:[function(e,t,r){function n(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}t.exports=n},{}],314:[function(e,t,r){function n(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}t.exports=n},{}],315:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+i*i+o*o}t.exports=n},{}],316:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}t.exports=n},{}],317:[function(e,t,r){function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}t.exports=n},{}],318:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}t.exports=n},{}],319:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],s=r[2],c=r[3],l=c*n+u*o-s*i,f=c*i+s*n-a*o,h=c*o+a*i-u*n,p=-a*n-u*i-s*o;return e[0]=l*c+p*-a+f*-s-h*-u,e[1]=f*c+p*-u+h*-a-l*-s,e[2]=h*c+p*-s+l*-u-f*-a,e[3]=t[3],e}t.exports=n},{}],320:[function(e,t,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],321:[function(e,t,r){var n=e("glsl-tokenizer"),i=e("glsl-token-string"),o=e("glsl-token-inject-block");t.exports=function(e,t){if(!t)return e;var r=Object.keys(t);if(0===r.length)return e;for(var a=n(e),u=r.length-1;u>=0;u--){var s=r[u],c=String(t[s]);c&&(c=" "+c),o(a,{type:"preprocessor",data:"#define "+s+c})}return i(a)}},{"glsl-token-inject-block":322,"glsl-token-string":323,"glsl-tokenizer":330}],322:[function(e,t,r){function n(e,t){Array.isArray(t)||(t=[t]);var r=i(e),n=r>0?e[r-1]:null;n&&u.test(n.data)&&e.splice(r++,0,a),e.splice.apply(e,[r,0].concat(t));var o=r+t.length;return e[o]&&/[^\r\n]$/.test(e[o].data)&&e.splice(o,0,a),e}function i(e){for(var t=-1,r=0;r<e.length;r++){var n=e[r];if("preprocessor"===n.type)/^#(extension|version)/.test(n.data)&&(t=Math.max(t,r));else if("keyword"===n.type&&"precision"===n.data){var i=o(e,r);if(-1===i)throw new Error("precision statement not followed by any semicolons!");t=Math.max(t,i)}}return t+1}function o(e,t){for(var r=t;r<e.length;r++)if("operator"===e[r].type&&";"===e[r].data)return r;return-1}t.exports=n;var a={data:"\n",type:"whitespace"},u=/[^\r\n]$/},{}],323:[function(e,t,r){function n(e){for(var t=[],r=0;r<e.length;r++)"eof"!==e[r].type&&t.push(e[r].data);return t.join("")}t.exports=n},{}],324:[function(e,t,r){function n(e){function t(e){e.length&&R.push({type:D[B],data:e,position:V,line:F,column:G})}function r(e){Q=0,P=(q+=e).length;for(var t;z=q[Q],Q<P;){switch(t=Q,B){case f:Q=T();break;case h:Q=L();break;case p:Q=A();break;case d:Q=E();break;case g:Q=_();break;case x:Q=O();break;case y:Q=S();break;case l:Q=C();break;case b:Q=N();break;case c:Q=j()}if(t!==Q)switch(q[t]){case"\n":G=0,++F;break;default:++G}}return U+=Q,q=q.slice(Q),R}function n(e){return Y.length&&t(Y.join("")),B=w,t("(eof)"),R}function j(){return Y=Y.length?[]:Y,"/"===k&&"*"===z?(V=U+Q-1,B=f,k=z,Q+1):"/"===k&&"/"===z?(V=U+Q-1,B=h,k=z,Q+1):"#"===z?(B=p,V=U+Q,Q):/\s/.test(z)?(B=b,V=U+Q,Q):(W=/\d/.test(z),H=/[^\w_]/.test(z),V=U+Q,B=W?g:H?d:l,Q)}function N(){return/[^\s]/g.test(z)?(t(Y.join("")),B=c,Q):(Y.push(z),k=z,Q+1)}function A(){return"\r"!==z&&"\n"!==z||"\\"===k?(Y.push(z),k=z,Q+1):(t(Y.join("")),B=c,Q)}function L(){return A()}function T(){return"/"===z&&"*"===k?(Y.push(z),t(Y.join("")),B=c,Q+1):(Y.push(z),k=z,Q+1)}function E(){if("."===k&&/\d/.test(z))return B=y,Q;if("/"===k&&"*"===z)return B=f,Q;if("/"===k&&"/"===z)return B=h,Q;if("."===z&&Y.length){for(;I(Y););return B=y,Q}if(";"===z||")"===z||"("===z){if(Y.length)for(;I(Y););return t(z),B=c,Q+1}var e=2===Y.length&&"="!==z;if(/[\w_\d\s]/.test(z)||e){for(;I(Y););return B=c,Q}return Y.push(z),k=z,Q+1}function I(e){for(var r,n,i=0;;){if(r=o.indexOf(e.slice(0,e.length+i).join("")),n=o[r],-1===r){if(i--+e.length>0)continue;n=e.slice(0,1).join("")}return t(n),V+=n.length,(Y=Y.slice(n.length)).length}}function O(){return/[^a-fA-F0-9]/.test(z)?(t(Y.join("")),B=c,Q):(Y.push(z),k=z,Q+1)}function _(){return"."===z?(Y.push(z),B=y,k=z,Q+1):/[eE]/.test(z)?(Y.push(z),B=y,k=z,Q+1):"x"===z&&1===Y.length&&"0"===Y[0]?(B=x,Y.push(z),k=z,Q+1):/[^\d]/.test(z)?(t(Y.join("")),B=c,Q):(Y.push(z),k=z,Q+1)}function S(){return"f"===z&&(Y.push(z),k=z,Q+=1),/[eE]/.test(z)?(Y.push(z),k=z,Q+1):"-"===z&&/[eE]/.test(k)?(Y.push(z),k=z,Q+1):/[^\d]/.test(z)?(t(Y.join("")),B=c,Q):(Y.push(z),k=z,Q+1)}function C(){if(/[^\d\w_]/.test(z)){var e=Y.join("");return B=Z.indexOf(e)>-1?v:X.indexOf(e)>-1?M:m,t(Y.join("")),B=c,Q}return Y.push(z),k=z,Q+1}var z,k,P,Q=0,U=0,B=c,Y=[],R=[],F=1,G=0,V=0,W=!1,H=!1,q="",X=a,Z=i;return"300 es"===(e=e||{}).version&&(X=s,Z=u),function(e){return R=[],null!==e?r(e.replace?e.replace(/\r\n/g,"\n"):e):n()}}t.exports=n;var i=e("./lib/literals"),o=e("./lib/operators"),a=e("./lib/builtins"),u=e("./lib/literals-300es"),s=e("./lib/builtins-300es"),c=999,l=9999,f=0,h=1,p=2,d=3,g=4,y=5,m=6,M=7,v=8,b=9,w=10,x=11,D=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":326,"./lib/builtins-300es":325,"./lib/literals":328,"./lib/literals-300es":327,"./lib/operators":329}],325:[function(e,t,r){var n=e("./builtins");n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":326}],326:[function(e,t,r){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],327:[function(e,t,r){var n=e("./literals");t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":328}],328:[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],329:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],330:[function(e,t,r){function n(e,t){var r=i(t),n=[];return n=n.concat(r(e)),n=n.concat(r(null))}var i=e("./index");t.exports=n},{"./index":324}],331:[function(e,t,r){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],n=0;n<e.length-1;n++)r.push(e[n],t[n]||"");return r.push(e[n]),r.join("")}},{}],332:[function(e,t,r){(function(){var e,r,n,i,o,a,u,s,c,l,f,h,p,d,g,y,m,M,v,b,w;h={R:[3.240969941904521,-1.537383177570093,-.498610760293],G:[-.96924363628087,1.87596750150772,.041555057407175],B:[.055630079696993,-.20397695888897,1.056971514242878]},p={X:[.41239079926595,.35758433938387,.18048078840183],Y:[.21263900587151,.71516867876775,.072192315360733],Z:[.019330818715591,.11919477979462,.95053215224966]},y=.19783000664283,m=.46831999493879,l=903.2962962,a=.0088564516,s=function(e){var t,r,n,i,o,u,s,c,f,p,d,g,y,m,M,v,b,w;for(M=(m=Math.pow(e+16,3)/1560896)>a?m:e/l,y=[],n=0,o=(p=["R","G","B"]).length;n<o;n++)for(r=p[n],d=h[r],s=d[0],c=d[1],f=d[2],g=[0,1],i=0,u=g.length;i<u;i++)v=g[i],b=(284517*s-94839*f)*M,w=(838422*f+769860*c+731718*s)*e*M-769860*v*e,t=(632260*f-126452*c)*M+126452*v,y.push([b/t,w/t]);return y},c=function(e,t){return(e[1]-t[1])/(t[0]-e[0])},i=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},f=function(e,t){var r,n,i;return i=t[0],r=t[1],n=r/(Math.sin(e)-i*Math.cos(e)),n<0?null:n},g=function(e){var t,r,n,o,a,u,l,f;for(o=[],r=0,n=(u=s(e)).length;r<n;r++)l=u[r],a=l[0],t=l[1],f=c([a,t],[-1/a,0]),o.push(i([f,t+f*a]));return Math.min.apply(Math,o)},d=function(e,t){var r,n,i,o,a,u,c;for(r=t/360*Math.PI*2,a=[],n=0,o=(c=s(e)).length;n<o;n++)u=c[n],null!==(i=f(r,u))&&a.push(i);return Math.min.apply(Math,a)},o=function(e,t){var r,n,i,o;for(o=0,r=n=0,i=e.length-1;0<=i?n<=i:n>=i;r=0<=i?++n:--n)o+=e[r]*t[r];return o},b=function(e,t){var r;return r=Math.pow(10,t),Math.round(e*r)/r},u=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},w=function(e){var t;return t=.055,e>.04045?Math.pow((e+t)/(1+t),2.4):e/12.92},M=function(e){var t,r,n,i,o,a,u;for(e=function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)a=e[t],n.push(b(a,3));return n}(),r=0,i=e.length;r<i;r++){if((t=e[r])<-1e-4||t>1.0001)throw new Error("Illegal rgb value: "+t);t<0&&(t=0),t>1&&(t=1)}for(u=[],n=0,o=e.length;n<o;n++)t=e[n],u.push(Math.round(255*t));return u},(n={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}}).xyz.rgb=function(e){var t,r,n;return n=u(o(h.R,e)),r=u(o(h.G,e)),t=u(o(h.B,e)),[n,r,t]},n.rgb.xyz=function(e){var t,r,n,i,a,u,s;return n=e[0],r=e[1],t=e[2],s=[w(n),w(r),w(t)],i=o(p.X,s),a=o(p.Y,s),u=o(p.Z,s),[i,a,u]},r=function(e){return e<=a?e/1*l:116*Math.pow(e/1,1/3)-16},e=function(e){return e<=8?1*e/l:1*Math.pow((e+16)/116,3)},n.xyz.luv=function(e){var t,n,i,o,a,u,s,c;return o=e[0],a=e[1],u=e[2],s=4*o/(o+15*a+3*u),c=9*a/(o+15*a+3*u),0===(t=r(a))?[0,0,0]:(n=13*t*(s-y),i=13*t*(c-m),[t,n,i])},n.luv.xyz=function(t){var r,n,i,o,a,u,s,c;return r=t[0],n=t[1],i=t[2],0===r?[0,0,0]:(s=n/(13*r)+y,c=i/(13*r)+m,a=e(r),o=0-9*a*s/((s-4)*c-s*c),u=(9*a-15*c*a-c*o)/(3*c),[o,a,u])},n.luv.lch=function(e){var t,r,n,i,o,a;return i=e[0],o=e[1],a=e[2],t=Math.pow(Math.pow(o,2)+Math.pow(a,2),.5),n=Math.atan2(a,o),(r=360*n/2/Math.PI)<0&&(r=360+r),[i,t,r]},n.lch.luv=function(e){var t,r,n,i,o,a;return i=e[0],t=e[1],r=e[2],n=r/360*2*Math.PI,o=Math.cos(n)*t,a=Math.sin(n)*t,[i,o,a]},n.husl.lch=function(e){var t,r,n,i,o;return r=e[0],i=e[1],(n=e[2])>99.9999999?[100,0,r]:n<1e-8?[0,0,r]:(o=d(n,r),t=o/100*i,[n,t,r])},n.lch.husl=function(e){var t,r,n,i,o;return n=e[0],t=e[1],r=e[2],n>99.9999999?[r,0,100]:n<1e-8?[r,0,0]:(o=d(n,r),i=t/o*100,[r,i,n])},n.huslp.lch=function(e){var t,r,n,i,o;return r=e[0],i=e[1],(n=e[2])>99.9999999?[100,0,r]:n<1e-8?[0,0,r]:(o=g(n),t=o/100*i,[n,t,r])},n.lch.huslp=function(e){var t,r,n,i,o;return n=e[0],t=e[1],r=e[2],n>99.9999999?[r,0,100]:n<1e-8?[r,0,0]:(o=g(n),i=t/o*100,[r,i,n])},n.rgb.hex=function(e){var t,r,n,i;for(r="#",n=0,i=(e=M(e)).length;n<i;n++)t=e[n],1===(t=t.toString(16)).length&&(t="0"+t),r+=t;return r},n.hex.rgb=function(e){var t,r,n,i,o;for("#"===e.charAt(0)&&(e=e.substring(1,7)),o=[],t=0,r=(i=[e.substring(0,2),e.substring(2,4),e.substring(4,6)]).length;t<r;t++)n=i[t],o.push(parseInt(n,16)/255);return o},n.lch.rgb=function(e){return n.xyz.rgb(n.luv.xyz(n.lch.luv(e)))},n.rgb.lch=function(e){return n.luv.lch(n.xyz.luv(n.rgb.xyz(e)))},n.husl.rgb=function(e){return n.lch.rgb(n.husl.lch(e))},n.rgb.husl=function(e){return n.lch.husl(n.rgb.lch(e))},n.huslp.rgb=function(e){return n.lch.rgb(n.huslp.lch(e))},n.rgb.huslp=function(e){return n.lch.huslp(n.rgb.lch(e))},(v={}).fromRGB=function(e,t,r){return n.rgb.husl([e,t,r])},v.fromHex=function(e){return n.rgb.husl(n.hex.rgb(e))},v.toRGB=function(e,t,r){return n.husl.rgb([e,t,r])},v.toHex=function(e,t,r){return n.rgb.hex(n.husl.rgb([e,t,r]))},v.p={},v.p.toRGB=function(e,t,r){return n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([e,t,r]))))},v.p.toHex=function(e,t,r){return n.rgb.hex(n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([e,t,r])))))},v.p.fromRGB=function(e,t,r){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz([e,t,r]))))},v.p.fromHex=function(e){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz(n.hex.rgb(e)))))},v._conv=n,v._round=b,v._rgbPrepare=M,v._getBounds=s,v._maxChromaForLH=d,v._maxSafeChromaForL=g,void 0!==t&&null!==t||"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof requirejs&&null!==requirejs||(this.HUSL=v),void 0!==t&&null!==t&&(t.exports=v),"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.husl=v),"undefined"!=typeof requirejs&&null!==requirejs&&!1&&!0&&(void 0)(v)}).call(this)},{}],333:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,c=s>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,u,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;e[r+p]=255&a,p+=d,a/=256,c-=8);e[r+p-d]|=128*g}},{}],334:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],335:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.mid=e,this.left=t,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(t?t.count:0)+(r?r.count:0)+n.length}function i(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function o(e,t){var r=d(t);e.mid=r.mid,e.left=r.left,e.right=r.right,e.leftPoints=r.leftPoints,e.rightPoints=r.rightPoints,e.count=r.count}function a(e,t){var r=e.intervals([]);r.push(t),o(e,r)}function u(e,t){var r=e.intervals([]),n=r.indexOf(t);return n<0?M:(r.splice(n,1),o(e,r),v)}function s(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var i=r(e[n]);if(i)return i}}function c(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var i=r(e[n]);if(i)return i}}function l(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n)return n}}function f(e,t){return e-t}function h(e,t){return e[0]-t[0]||e[1]-t[1]}function p(e,t){return e[1]-t[1]||e[0]-t[0]}function d(e){if(0===e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e[r][0],e[r][1]);t.sort(f);for(var i=t[t.length>>1],o=[],a=[],u=[],r=0;r<e.length;++r){var s=e[r];s[1]<i?o.push(s):i<s[0]?a.push(s):u.push(s)}var c=u,l=u.slice();return c.sort(h),l.sort(p),new n(i,d(o),d(a),c,l)}function g(e){this.root=e}function y(e){return new g(e&&0!==e.length?d(e):null)}var m=e("binary-search-bounds"),M=0,v=1;t.exports=y;var b=n.prototype;b.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},b.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?a(this,e):this.left.insert(e):this.left=d([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?a(this,e):this.right.insert(e):this.right=d([e]);else{var r=m.ge(this.leftPoints,e,h),n=m.ge(this.rightPoints,e,p);this.leftPoints.splice(r,0,e),this.rightPoints.splice(n,0,e)}},b.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?u(this,e):2===(a=this.left.remove(e))?(this.left=null,this.count-=1,v):(a===v&&(this.count-=1),a):M;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?u(this,e):2===(a=this.right.remove(e))?(this.right=null,this.count-=1,v):(a===v&&(this.count-=1),a):M;if(1===this.count)return this.leftPoints[0]===e?2:M;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var o=this.left,a=this.right;r.count-=n.count,r.right=n.left,n.left=o,n.right=a}i(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return v}for(o=m.ge(this.leftPoints,e,h);o<this.leftPoints.length&&this.leftPoints[o][0]===e[0];++o)if(this.leftPoints[o]===e){this.count-=1,this.leftPoints.splice(o,1);for(a=m.ge(this.rightPoints,e,p);a<this.rightPoints.length&&this.rightPoints[a][1]===e[1];++a)if(this.rightPoints[a]===e)return this.rightPoints.splice(a,1),v}return M},b.queryPoint=function(e,t){if(e<this.mid)return this.left&&(r=this.left.queryPoint(e,t))?r:s(this.leftPoints,e,t);if(e>this.mid){if(this.right){var r=this.right.queryPoint(e,t);if(r)return r}return c(this.rightPoints,e,t)}return l(this.leftPoints,t)},b.queryInterval=function(e,t,r){if(e<this.mid&&this.left&&(n=this.left.queryInterval(e,t,r)))return n;if(t>this.mid&&this.right){var n=this.right.queryInterval(e,t,r);if(n)return n}return t<this.mid?s(this.leftPoints,t,r):e>this.mid?c(this.rightPoints,e,r):l(this.leftPoints,r)};var w=g.prototype;w.insert=function(e){this.root?this.root.insert(e):this.root=new n(e[0],null,null,[e],[e])},w.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),t!==M}return!1},w.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},w.queryInterval=function(e,t,r){if(e<=t&&this.root)return this.root.queryInterval(e,t,r)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":76}],336:[function(e,t,r){"use strict";function n(e,t){t=t||new Array(e.length);for(var r=0;r<e.length;++r)t[e[r]]=r;return t}t.exports=n},{}],337:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}t.exports=n},{}],338:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},{}],339:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],340:[function(e,t,r){var n=(r=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var r=String(e),o=n[r.toLowerCase()];return o||((o=i[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0))}).code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=r.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var a=r.names=r.title={};for(o in n)a[n[o]]=o;for(var u in i)n[u]=i[u]},{}],341:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function i(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function o(e,t){var r=C(e)||y(e)?i(e.length,String):[],n=r.length,o=!!n;for(var a in e)!t&&!I.call(e,a)||o&&("length"==a||f(a,n))||r.push(a);return r}function a(e,t,r,n){return void 0===e||g(e,E[r])&&!I.call(n,r)?t:e}function u(e,t,r){var n=e[t];I.call(e,t)&&g(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function s(e){if(!w(e))return d(e);var t=p(e),r=[];for(var n in e)("constructor"!=n||!t&&I.call(e,n))&&r.push(n);return r}function c(e,t){return t=S(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=S(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=a,n(e,this,u)}}function l(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=n?n(r[a],e[a],a,r,e):void 0;u(r,a,void 0===s?e[a]:s)}return r}function f(e,t){return!!(t=null==t?j:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function h(e,t,r){if(!w(r))return!1;var n=typeof t;return!!("number"==n?m(r)&&f(t,r.length):"string"==n&&t in r)&&g(r[t],e)}function p(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function d(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function g(e,t){return e===t||e!==e&&t!==t}function y(e){return M(e)&&I.call(e,"callee")&&(!_.call(e,"callee")||O.call(e)==N)}function m(e){return null!=e&&b(e.length)&&!v(e)}function M(e){return x(e)&&m(e)}function v(e){var t=w(e)?O.call(e):"";return t==A||t==L}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=j}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){return!!e&&"object"==typeof e}function D(e){return m(e)?o(e,!0):s(e)}var j=9007199254740991,N="[object Arguments]",A="[object Function]",L="[object GeneratorFunction]",T=/^(?:0|[1-9]\d*)$/,E=Object.prototype,I=E.hasOwnProperty,O=E.toString,_=E.propertyIsEnumerable,S=Math.max,C=Array.isArray,z=function(e){return c(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&h(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var u=r[n];u&&e(t,u,n,o)}return t})}(function(e,t,r,n){l(t,D(t),e,n)}),k=c(function(e){return e.push(void 0,a),n(z,void 0,e)});t.exports=k},{}],342:[function(e,t,r){function n(e,t,r){return e<t?t:e>r?r:e}function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||i.DefaultOrder}t.exports=i,i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.DefaultOrder="XYZ",i.prototype={_x:0,_y:0,_z:0,_order:i.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var r=e.elements,i=r[0],o=r[4],a=r[8],u=r[1],s=r[5],c=r[9],l=r[2],f=r[6],h=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(f,s),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,h),this._z=Math.atan2(u,s)):(this._y=Math.atan2(-l,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-l,h),this._z=Math.atan2(-o,s)):(this._y=0,this._z=Math.atan2(u,i))):"ZYX"===t?(this._y=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(f,h),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-o,s))):"YZX"===t?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,s),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(a,h))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,s),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new i(this._x,this._y,this._z,this._order)}}},{}],343:[function(e,t,r){function n(e){for(var t=[],r=[],n=0,i=0;n<e.length;)r.push([i++,i++,i++]),t.push([e[n++],e[n++],e[n++]],[e[n++],e[n++],e[n++]],[e[n++],e[n++],e[n++]]);return{positions:t,cells:r}}t.exports=n},{}],344:[function(e,t,r){"use strict";function n(e,t){function r(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==y.alt,y.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==y.shift,y.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==y.control,y.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==y.meta,y.meta=!!e.metaKey),t}function n(e,n){var o=i.x(n),a=i.y(n);"buttons"in n&&(e=0|n.buttons),(e!==p||o!==d||a!==g||r(n))&&(p=0|e,d=o||0,g=a||0,t&&t(p,d,g,y))}function o(e){n(0,e)}function a(){(p||d||g||y.shift||y.alt||y.meta||y.control)&&(d=g=0,p=0,y.shift=y.alt=y.control=y.meta=!1,t&&t(0,0,0,y))}function u(e){r(e)&&t&&t(p,d,g,y)}function s(e){0===i.buttons(e)?n(0,e):n(p,e)}function c(e){n(p|i.buttons(e),e)}function l(e){n(p&~i.buttons(e),e)}function f(){m||(m=!0,e.addEventListener("mousemove",s),e.addEventListener("mousedown",c),e.addEventListener("mouseup",l),e.addEventListener("mouseleave",o),e.addEventListener("mouseenter",o),e.addEventListener("mouseout",o),e.addEventListener("mouseover",o),e.addEventListener("blur",a),e.addEventListener("keyup",u),e.addEventListener("keydown",u),e.addEventListener("keypress",u),e!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function h(){m&&(m=!1,e.removeEventListener("mousemove",s),e.removeEventListener("mousedown",c),e.removeEventListener("mouseup",l),e.removeEventListener("mouseleave",o),e.removeEventListener("mouseenter",o),e.removeEventListener("mouseout",o),e.removeEventListener("mouseover",o),e.removeEventListener("blur",a),e.removeEventListener("keyup",u),e.removeEventListener("keydown",u),e.removeEventListener("keypress",u),e!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}t||(t=e,e=window);var p=0,d=0,g=0,y={shift:!1,alt:!1,control:!1,meta:!1},m=!1;f();var M={element:e};return Object.defineProperties(M,{enabled:{get:function(){return m},set:function(e){e?f():h()},enumerable:!0},buttons:{get:function(){return p},enumerable:!0},x:{get:function(){return d},enumerable:!0},y:{get:function(){return g},enumerable:!0},mods:{get:function(){return y},enumerable:!0}}),M}t.exports=n;var i=e("mouse-event")},{"mouse-event":346}],345:[function(e,t,r){function n(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n=e.clientX||0,o=e.clientY||0,a=i(t);return r[0]=n-a.left,r[1]=o-a.top,r}function i(e){return e===window||e===document||e===document.body?o:e.getBoundingClientRect()}var o={left:0,top:0};t.exports=n},{}],346:[function(e,t,r){"use strict";function n(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function i(e){return e.target||e.srcElement||window}function o(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=i(e).getBoundingClientRect();return e.clientX-t.left}return 0}function a(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=i(e).getBoundingClientRect();return e.clientY-t.top}return 0}r.buttons=n,r.element=i,r.x=o,r.y=a},{}],347:[function(e,t,r){"use strict";function n(e,t,r){"function"==typeof e&&(r=!!t,t=e,e=window);var n=i("ex",e),o=function(e){r&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,u=1;switch(e.deltaMode){case 1:u=n;break;case 2:u=window.innerHeight}if(i*=u,o*=u,a*=u,i||o||a)return t(i,o,a,e)};return e.addEventListener("wheel",o),o}var i=e("to-px");t.exports=n},{"to-px":421}],348:[function(e,t,r){function n(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*f;case"days":case"day":case"d":return r*l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*s;case"seconds":case"second":case"secs":case"sec":case"s":return r*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=u?Math.round(e/u)+"s":e+"ms"}function o(e){return a(e,l,"day")||a(e,c,"hour")||a(e,s,"minute")||a(e,u,"second")||e+" ms"}function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var u=1e3,s=60*u,c=60*s,l=24*c,f=365.25*l;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],349:[function(e,t,r){"use strict";t.exports=function(e,t,r){return r>t?Math.max(Math.min(e,r),t):Math.max(Math.min(e,t),r)}},{}],350:[function(e,t,r){"use strict";t.exports=function(e,t,r){if(void 0===r&&(r=t,t=0),t>r){var n=r;r=t,t=n}var i=r-t;return(e=(e+t)%i-t)<t&&(e+=i),e>r&&(e-=i),e}},{}],351:[function(e,t,r){"use strict";function n(e){return"a"+e}function i(e){return"d"+e}function o(e,t){return"c"+e+"_"+t}function a(e){return"s"+e}function u(e,t){return"t"+e+"_"+t}function s(e){return"o"+e}function c(e){return"x"+e}function l(e){return"p"+e}function f(e,t){return"d"+e+"_"+t}function h(e){return"i"+e}function p(e,t){return"u"+e+"_"+t}function d(e){return"b"+e}function g(e){return"y"+e}function y(e){return"e"+e}function m(e){return"v"+e}function M(e,t,r){for(var n=0,i=0;i<e;++i)t&1<<i&&(n|=1<<r[i]);return n}function v(e,t,r,v,b,T){function E(e,t){Q.push("for(",h(b[e]),"=",t,";",h(b[e]),"<",a(b[e]),";","++",h(b[e]),"){")}function I(e){for(var t=0;t<z;++t)Q.push(l(t),"+=",p(t,b[e]),";");Q.push("}")}function O(e){for(r=e-1;r>=0;--r)E(r,0);for(var t=[],r=0;r<z;++r)T[r]?t.push(i(r)+".get("+l(r)+")"):t.push(i(r)+"["+l(r)+"]");for(r=0;r<v;++r)t.push(c(r));Q.push(D,"[",A,"++]=phase(",t.join(),");");for(r=0;r<e;++r)I(r);for(var n=0;n<z;++n)Q.push(l(n),"+=",p(n,b[e]),";")}function _(e){for(r=0;r<z;++r)T[r]?Q.push(o(r,0),"=",i(r),".get(",l(r),");"):Q.push(o(r,0),"=",i(r),"[",l(r),"];");for(var t=[],r=0;r<z;++r)t.push(o(r,0));for(r=0;r<v;++r)t.push(c(r));Q.push(d(0),"=",D,"[",A,"]=phase(",t.join(),");");for(a=1;a<1<<k;++a)Q.push(d(a),"=",D,"[",A,"+",y(a),"];");for(var n=[],a=1;a<1<<k;++a)n.push("("+d(0)+"!=="+d(a)+")");Q.push("if(",n.join("||"),"){");for(var u=[],r=0;r<k;++r)u.push(h(r));for(r=0;r<z;++r){u.push(o(r,0));for(a=1;a<1<<k;++a)T[r]?Q.push(o(r,a),"=",i(r),".get(",l(r),"+",f(r,a),");"):Q.push(o(r,a),"=",i(r),"[",l(r),"+",f(r,a),"];"),u.push(o(r,a))}for(r=0;r<1<<k;++r)u.push(d(r));for(r=0;r<v;++r)u.push(c(r));Q.push("vertex(",u.join(),");",m(0),"=",x,"[",A,"]=",j,"++;");for(var s=(1<<k)-1,p=d(s),a=0;a<k;++a)if(0==(e&~(1<<a))){for(var g=s^1<<a,M=d(g),b=[],w=g;w>0;w=w-1&g)b.push(x+"["+A+"+"+y(w)+"]");b.push(m(0));for(w=0;w<z;++w)1&a?b.push(o(w,s),o(w,g)):b.push(o(w,g),o(w,s));1&a?b.push(p,M):b.push(M,p);for(w=0;w<v;++w)b.push(c(w));Q.push("if(",p,"!==",M,"){","face(",b.join(),")}")}Q.push("}",A,"+=1;")}function S(){for(var e=1;e<1<<k;++e)Q.push(L,"=",y(e),";",y(e),"=",g(e),";",g(e),"=",L,";")}function C(e,t){if(e<0)_(t);else{O(e),Q.push("if(",a(b[e]),">0){",h(b[e]),"=1;"),C(e-1,t|1<<b[e]);for(var r=0;r<z;++r)Q.push(l(r),"+=",p(r,b[e]),";");e===k-1&&(Q.push(A,"=0;"),S()),E(e,2),C(e-1,t),e===k-1&&(Q.push("if(",h(b[k-1]),"&1){",A,"=0;}"),S()),I(e),Q.push("}")}}var z=T.length,k=b.length;if(k<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var P="extractContour"+b.join("_"),Q=[],U=[],B=[],Y=0;Y<z;++Y)B.push(n(Y));for(Y=0;Y<v;++Y)B.push(c(Y));for(Y=0;Y<k;++Y)U.push(a(Y)+"="+n(0)+".shape["+Y+"]|0");for(Y=0;Y<z;++Y){U.push(i(Y)+"="+n(Y)+".data",s(Y)+"="+n(Y)+".offset|0");for(W=0;W<k;++W)U.push(u(Y,W)+"="+n(Y)+".stride["+W+"]|0")}for(Y=0;Y<z;++Y){U.push(l(Y)+"="+s(Y)),U.push(o(Y,0));for(W=1;W<1<<k;++W){for(var R=[],F=0;F<k;++F)W&1<<F&&R.push("-"+u(Y,F));U.push(f(Y,W)+"=("+R.join("")+")|0"),U.push(o(Y,W)+"=0")}}for(Y=0;Y<z;++Y)for(W=0;W<k;++W){var G=[u(Y,b[W])];W>0&&G.push(u(Y,b[W-1])+"*"+a(b[W-1])),U.push(p(Y,b[W])+"=("+G.join("-")+")|0")}for(Y=0;Y<k;++Y)U.push(h(Y)+"=0");U.push(j+"=0");for(var V=["2"],Y=k-2;Y>=0;--Y)V.push(a(b[Y]));U.push(N+"=("+V.join("*")+")|0",D+"=mallocUint32("+N+")",x+"=mallocUint32("+N+")",A+"=0"),U.push(d(0)+"=0");for(var W=1;W<1<<k;++W){for(var H=[],q=[],F=0;F<k;++F)W&1<<F&&(0===q.length?H.push("1"):H.unshift(q.join("*"))),q.push(a(b[F]));var X="";H[0].indexOf(a(b[k-2]))<0&&(X="-");var Z=M(k,W,b);U.push(y(Z)+"=(-"+H.join("-")+")|0",g(Z)+"=("+X+H.join("-")+")|0",d(Z)+"=0")}U.push(m(0)+"=0",L+"=0"),C(k-1,0),Q.push("freeUint32(",x,");freeUint32(",D,");");var K=["'use strict';","function ",P,"(",B.join(),"){","var ",U.join(),";",Q.join(""),"}","return ",P].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",K)(e,t,r,w.mallocUint32,w.freeUint32)}function b(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var r=e.order;Array.isArray(r)||t("Must specify order");var n=e.arrayArguments||1;n<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var o=e.getters||[],a=new Array(n),u=0;u<n;++u)o.indexOf(u)>=0?a[u]=!0:a[u]=!1;return v(e.vertex,e.cell,e.phase,i,r,a)}var w=e("typedarray-pool");t.exports=b;var x="V",D="P",j="N",N="Q",A="X",L="T"},{"typedarray-pool":426}],352:[function(e,t,r){function n(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var i=new Array(r.length);for(e=0;e<i.length;++e)i[e]=r[e][1];return i}function o(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(-1===t){o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return(M=new Function(o))()}if(0===t){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return(M=new Function("TrivialArray",o))(f[e][0])}var o=["'use strict'"],a=s(t),u=a.map(function(e){return"i"+e}),c="this.offset+"+a.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),l=a.map(function(e){return"b"+e}).join(","),h=a.map(function(e){return"c"+e}).join(",");o.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),n?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),n?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+a.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+a.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=a.map(function(e){return"a"+e+"=this.shape["+e+"]"}),d=a.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+a.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+a.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"b"+e}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),m=0;m<t;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(e){return"shape["+e+"]"}).join(",")+","+a.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var M=new Function("CTOR_LIST","ORDER",o.join("\n"));return M(f[e],i)}function a(e){if(c(e))return"buffer";if(l)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function u(e,t,r,n){if(void 0===e)return(h=f.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===r){r=new Array(i);for(var u=i-1,s=1;u>=0;--u)r[u]=s,s*=t[u]}if(void 0===n){n=0;for(u=0;u<i;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var c=a(e),l=f[c];l.length<=i+1;)l.push(o(c,l.length-1));var h=l[i+1];return h(e,t,r,n)}var s=e("iota-array"),c=e("is-buffer"),l="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=u},{"iota-array":337,"is-buffer":339}],353:[function(e,t,r){"use strict";function n(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-o:o;var r=i.hi(e),n=i.lo(e);return t>e==e>0?n===a?(r+=1,n=0):n+=1:0===n?(n=a,r-=1):n-=1,i.pack(n,r)}var i=e("double-bits"),o=Math.pow(2,-1074),a=-1>>>0;t.exports=n},{"double-bits":150}],354:[function(e,t,r){r.vertexNormals=function(e,t,r){for(var n=t.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a)i[a]=[0,0,0];for(a=0;a<e.length;++a)for(var u=e[a],s=0,c=u[u.length-1],l=u[0],f=0;f<u.length;++f){s=c,c=l,l=u[(f+1)%u.length];for(var h=t[s],p=t[c],d=t[l],g=new Array(3),y=0,m=new Array(3),M=0,v=0;v<3;++v)g[v]=h[v]-p[v],y+=g[v]*g[v],m[v]=d[v]-p[v],M+=m[v]*m[v];if(y*M>o)for(var b=i[c],w=1/Math.sqrt(y*M),v=0;v<3;++v){var x=(v+1)%3,D=(v+2)%3;b[v]+=w*(m[x]*g[D]-m[D]*g[x])}}for(a=0;a<n;++a){for(var b=i[a],j=0,v=0;v<3;++v)j+=b[v]*b[v];if(j>o)for(var w=1/Math.sqrt(j),v=0;v<3;++v)b[v]*=w;else for(v=0;v<3;++v)b[v]=0}return i},r.faceNormals=function(e,t,r){for(var n=e.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a){for(var u=e[a],s=new Array(3),c=0;c<3;++c)s[c]=t[u[c]];for(var l=new Array(3),f=new Array(3),c=0;c<3;++c)l[c]=s[1][c]-s[0][c],f[c]=s[2][c]-s[0][c];for(var h=new Array(3),p=0,c=0;c<3;++c){var d=(c+1)%3,g=(c+2)%3;h[c]=l[d]*f[g]-l[g]*f[d],p+=h[c]*h[c]}p=p>o?1/Math.sqrt(p):0;for(c=0;c<3;++c)h[c]*=p;i[a]=h}return i}},{}],355:[function(e,t,r){"use strict";function n(e){function t(){var e=n.projection,t=n.direction,i=n.position,o=n.viewport,c=n.view,l=n.near,h=n.far,p=n.up,d=o[0],g=o[1],y=o[2],m=o[3];return u(e,d,y,g,m,l,h),s(r,i,t),a(c,i,r,p),f(),n}e&&"object"==typeof e||(e={});var r=[0,0,0],n=i(e),f=n.update;return n.near=o(e.near,c),n.far=o(e.far,l),t(),n.update=t,n}var i=e("perspective-camera/lib/camera-base"),o=e("defined"),a=e("gl-mat4/lookAt"),u=e("gl-mat4/ortho"),s=e("gl-vec3/add"),c=100,l=1;t.exports=n},{defined:148,"gl-mat4/lookAt":192,"gl-mat4/ortho":194,"gl-vec3/add":261,"perspective-camera/lib/camera-base":361}],356:[function(e,t,r){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var r=parseFloat(e,10);return t[0]=r,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],357:[function(e,t,r){(function(e){(function(){var r,n,i,o,a,u;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-a)/1e6},n=e.hrtime,r=function(){var e;return 1e9*(e=n())[0]+e[1]},o=r(),u=1e9*e.uptime(),a=o-u):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:377}],358:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t<i){for(var r=1,n=0;n<t;++n)for(s=0;s<n;++s)if(e[n]<e[s])r=-r;else if(e[n]===e[s])return 0;return r}for(var a=o.mallocUint8(t),n=0;n<t;++n)a[n]=0;for(var r=1,n=0;n<t;++n)if(!a[n]){var u=1;a[n]=1;for(var s=e[n];s!==n;s=e[s]){if(a[s])return o.freeUint8(a),0;u+=1,a[s]=1}1&u||(r=-r)}return o.freeUint8(a),r}t.exports=n;var i=32,o=e("typedarray-pool")},{"typedarray-pool":426}],359:[function(e,t,r){"use strict";function n(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var r,n,i,u=o.mallocUint32(t),s=o.mallocUint32(t),c=0;for(a(e,s),i=0;i<t;++i)u[i]=e[i];for(i=t-1;i>0;--i)n=s[i],r=u[i],u[i]=u[n],u[n]=r,s[i]=s[r],s[r]=n,c=(c+r)*i;return o.freeUint32(s),o.freeUint32(u),c}function i(e,t,r){switch(e){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(t?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):t?[0,1]:[1,0]}var n,i,o,a=1;for((r=r||new Array(e))[0]=0,o=1;o<e;++o)r[o]=o,a=a*o|0;for(o=e-1;o>0;--o)n=t/a|0,t=t-n*a|0,a=a/o|0,i=0|r[o],r[o]=0|r[n],r[n]=0|i;return r}var o=e("typedarray-pool"),a=e("invert-permutation");r.rank=n,r.unrank=i},{"invert-permutation":336,"typedarray-pool":426}],360:[function(e,t,r){t.exports=e("./lib/camera-perspective")},{"./lib/camera-perspective":363}],361:[function(e,t,r){var n=e("object-assign"),i=e("ray-3d"),o=e("camera-project"),a=e("camera-unproject"),u=e("./camera-look-at"),s=e("camera-picking-ray"),c=e("gl-vec3/add"),l=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),h=e("gl-mat4/identity"),p=e("gl-vec3/set");t.exports=function(e){function t(){if(l(v.projView,v.projection,v.view),!f(v.invProjView,v.projView))throw new Error("camera projection * view is non-invertible")}function r(e){return u(v.direction,v.up,v.position,e),v}function d(){return p(v.position,0,0,0),p(v.direction,0,0,-1),p(v.up,0,1,0),h(v.view),h(v.projection),h(v.projView),h(v.invProjView),v}function g(e){return c(v.position,v.position,e),v}function y(e){var t=new i;return s(t.origin,t.direction,e,v.viewport,v.invProjView),t}function m(e){return o([],e,v.viewport,v.projView)}function M(e){return a([],e,v.viewport,v.invProjView)}e=e||{};var v={projection:h([]),view:h([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:h([]),invProjView:h([])};return n(v,{translate:g,identity:d,lookAt:r,createPickingRay:y,update:t,project:m,unproject:M})}},{"./camera-look-at":362,"camera-picking-ray":90,"camera-project":91,"camera-unproject":92,"gl-mat4/identity":189,"gl-mat4/invert":191,"gl-mat4/multiply":193,"gl-vec3/add":261,"gl-vec3/set":287,"object-assign":364,"ray-3d":383}],362:[function(e,t,r){var n=e("gl-vec3/cross"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize"),a=e("gl-vec3/copy"),u=e("gl-vec3/dot"),s=e("gl-vec3/scale"),c=[0,0,0];t.exports=function(e,t,r,l){if(i(c,l,r),o(c,c),!(0===c[0]&&0===c[1]&&0===c[2])){var f=u(c,t);Math.abs(f-1)<1e-9?s(t,e,-1):Math.abs(f+1)<1e-9&&a(t,e),a(e,c),n(c,e,t),o(c,c),n(t,c,e),o(t,t)}}},{"gl-vec3/copy":264,"gl-vec3/cross":266,"gl-vec3/dot":269,"gl-vec3/normalize":280,"gl-vec3/scale":285,"gl-vec3/subtract":290}],363:[function(e,t,r){var n=e("./camera-base"),i=e("object-assign"),o=e("defined"),a=e("gl-mat4/perspective"),u=e("gl-mat4/lookAt"),s=e("gl-vec3/add");t.exports=function(e){function t(){var e=r.viewport[2]/r.viewport[3];return a(r.projection,r.fov,e,Math.abs(r.near),Math.abs(r.far)),s(c,r.position,r.direction),u(r.view,r.position,c,r.up),l(),r}var r=n(e=e||{});r.fov=o(e.fov,Math.PI/4),r.near=o(e.near,1),r.far=o(e.far,100);var c=[0,0,0],l=r.update;return t(),i(r,{update:t})}},{"./camera-base":361,defined:148,"gl-mat4/lookAt":192,"gl-mat4/perspective":195,"gl-vec3/add":261,"object-assign":364}],364:[function(e,t,r){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var r,i,o=n(e),a=1;a<arguments.length;a++){r=arguments[a],i=Object.keys(Object(r));for(var u=0;u<i.length;u++)o[i[u]]=r[i[u]]}return o}},{}],365:[function(e,t,r){"use strict";function n(e,t){function r(e,t){var r=u[t][e[t]];r.splice(r.indexOf(e),1)}function n(e,n,o){for(var a,s,c,l=0;l<2;++l)if(u[l][n].length>0){a=u[l][n][0],c=l;break}s=a[1^c];for(var f=0;f<2;++f)for(var h=u[f][n],p=0;p<h.length;++p){var d=h[p],g=d[1^f];i(t[e],t[n],t[s],t[g])>0&&(a=d,s=g,c=f)}return o?s:(a&&r(a,c),s)}for(var o=0|t.length,a=e.length,u=[new Array(o),new Array(o)],s=0;s<o;++s)u[0][s]=[],u[1][s]=[];for(s=0;s<a;++s){var c=e[s];u[0][c[0]].push(c),u[1][c[1]].push(c)}for(var l=[],s=0;s<o;++s)u[0][s].length+u[1][s].length===0&&l.push([s]);for(s=0;s<o;++s)for(var f=0;f<2;++f){for(var h=[];u[f][s].length>0;){var p=(u[0][s].length,function(e,o){var a=u[o][e][0],s=[e];r(a,o);for(var c=a[1^o];;){for(;c!==e;)s.push(c),c=n(s[s.length-2],c,!1);if(u[0][e].length+u[1][e].length===0)break;var l=s[s.length-1],f=e,h=s[1],p=n(l,f,!0);if(i(t[l],t[f],t[h],t[p])<0)break;s.push(e),c=n(l,f)}return s}(s,f));!function(e,t){return t[1]===t[t.length-1]}(0,p)?(h.length>0&&l.push(h),h=p):h.push.apply(h,p)}h.length>0&&l.push(h)}return l}t.exports=n;var i=e("compare-angle")},{"compare-angle":140}],366:[function(e,t,r){"use strict";function n(e,t){for(var r=i(e,t.length),n=new Array(t.length),o=new Array(t.length),a=[],u=0;u<t.length;++u){var s=r[u].length;o[u]=s,n[u]=!0,s<=1&&a.push(u)}for(;a.length>0;){n[p=a.pop()]=!1;for(var c=r[p],u=0;u<c.length;++u){var l=c[u];0==--o[l]&&a.push(l)}}for(var f=new Array(t.length),h=[],u=0;u<t.length;++u)if(n[u]){var p=h.length;f[u]=p,h.push(t[u])}else f[u]=-1;for(var d=[],u=0;u<e.length;++u){var g=e[u];n[g[0]]&&n[g[1]]&&d.push([f[g[0]],f[g[1]]])}return[d,h]}t.exports=n;var i=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":152}],367:[function(e,t,r){"use strict";function n(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function i(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=[];return t}function o(e,t){function r(e){for(var r=e.length,n=[0],i=0;i<r;++i){var o=t[e[i]],a=t[e[(i+1)%r]],u=c(-o[0],o[1]),s=c(-o[0],a[1]),f=c(a[0],o[1]),h=c(a[0],a[1]);n=l(n,l(l(u,s),l(f,h)))}return n[n.length-1]>0}function o(e){for(var t=e.length,r=0;r<t;++r)if(!_[e[r]])return!1;return!0}e=(B=h(e,t))[0];for(var p=(t=B[1]).length,d=(e.length,a(e,t.length)),g=0;g<p;++g)if(d[g].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");for(var y=u(e,t),m=(y=y.filter(r)).length,M=new Array(m),v=new Array(m),g=0;g<m;++g){M[g]=g;var b=new Array(m),w=y[g].map(function(e){return t[e]}),x=s([w]),D=0;e:for(E=0;E<m;++E)if(b[E]=0,g!==E){for(var j=(S=y[E]).length,N=0;N<j;++N){var A=x(t[S[N]]);if(0!==A){A<0&&(b[E]=1,D+=1);continue e}}b[E]=1,D+=1}v[g]=[D,g,b]}v.sort(function(e,t){return t[0]-e[0]});for(g=0;g<m;++g)for(var b=v[g],L=b[1],T=b[2],E=0;E<m;++E)T[E]&&(M[E]=L);for(var I=i(m),g=0;g<m;++g)I[g].push(M[g]),I[M[g]].push(g);for(var O={},_=n(p,!1),g=0;g<m;++g)for(var S=y[g],j=S.length,E=0;E<j;++E){var C=S[E],z=S[(E+1)%j],k=Math.min(C,z)+":"+Math.max(C,z);if(k in O){var P=O[k];I[P].push(g),I[g].push(P),_[C]=_[z]=!0}else O[k]=g}for(var Q=[],U=n(m,-1),g=0;g<m;++g)M[g]!==g||o(y[g])?U[g]=-1:(Q.push(g),U[g]=0);for(var B=[];Q.length>0;){var Y=Q.pop(),R=I[Y];f(R,function(e,t){return e-t});var F,G=R.length,V=U[Y];0===V&&(F=[S=y[Y]]);for(g=0;g<G;++g){var W=R[g];U[W]>=0||(U[W]=1^V,Q.push(W),0!==V)||o(S=y[W])||(S.reverse(),F.push(S))}0===V&&B.push(F)}return B}t.exports=o;var a=e("edges-to-adjacency-list"),u=e("planar-dual"),s=e("point-in-big-polygon"),c=e("two-product"),l=e("robust-sum"),f=e("uniq"),h=e("./lib/trim-leaves")},{"./lib/trim-leaves":366,"edges-to-adjacency-list":152,"planar-dual":365,"point-in-big-polygon":369,"robust-sum":406,"two-product":424,uniq:429}],368:[function(e,t,r){var n={REVISION:"2.1.1"};n.Math={random:Math.random,array_shuffle:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(n.Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e},compare_pts_yx:function(e,t){var r=e.y-t.y;if(r<n.Math.EPSILON_N)return-1;if(r>n.Math.EPSILON_P)return 1;var i=e.x-t.x;return i<n.Math.EPSILON_N?-1:i>n.Math.EPSILON_P?1:0},ptsCrossProd:function(e,t,r){return(t.x-e.x)*(r.y-e.y)-(t.y-e.y)*(r.x-e.x)}},n.Math.EPSILON_P=Math.pow(2,-43),n.Math.EPSILON_N=-n.Math.EPSILON_P,n.PolygonData=function(e){if(this.vertices=[],this.segments=[],this.diagonals=[],this.idNextPolyChain=0,this.PolyLeftArr=[],this.monoSubPolyChains=[],this.triangles=[],e)for(var t=0,r=e.length;t<r;t++)this.addPolygonChain(e[t])},n.PolygonData.prototype={constructor:n.PolygonData,nbVertices:function(){return this.vertices.length},getSegments:function(){return this.segments},getFirstSegment:function(){return this.segments[0]},getMonoSubPolys:function(){return this.monoSubPolyChains},getTriangles:function(){return this.triangles.concat()},nbPolyChains:function(){return this.idNextPolyChain},get_PolyLeftArr:function(){return this.PolyLeftArr.concat()},set_PolyLeft_wrong:function(e){this.PolyLeftArr[e]=!1},isClockWise:function(e){var t=e,r=0;do{r+=(t.vFrom.x-t.vTo.x)*(t.vFrom.y+t.vTo.y),t=t.snext}while(t!=e);return r<0},appendVertexEntry:function(e,t){var r={id:this.vertices.length,x:e,y:t};return this.vertices.push(r),r},createSegmentEntry:function(e,t){return{chainId:this.idNextPolyChain,vFrom:e,vTo:t,upward:1==n.Math.compare_pts_yx(t,e),sprev:null,snext:null,rootFrom:null,rootTo:null,is_inserted:!1,trLeft:null,trRight:null,mprev:null,mnext:null,marked:!1}},appendSegmentEntry:function(e){return this.segments.push(e),e},appendDiagonalsEntry:function(e){return this.diagonals.push(e),e},addVertexChain:function(e){function t(e,t){return Math.abs(e.x-t.x)<n.Math.EPSILON_P&&Math.abs(e.y-t.y)<n.Math.EPSILON_P}function r(e,t,r){if(Math.abs(n.Math.ptsCrossProd(t,e,r))>n.Math.EPSILON_P)return!1;var i,o,a;return Math.abs(e.y-t.y)<n.Math.EPSILON_P?(o=t.x,e.x<r.x?(i=e.x,a=r.x):(i=r.x,a=e.x)):(o=t.y,e.y<r.y?(i=e.y,a=r.y):(i=r.y,a=e.y)),i-o<n.Math.EPSILON_P&&o-a<n.Math.EPSILON_P}for(var i,o,a,u=[],s=0;s<e.length;s++)i=this.appendVertexEntry(e[s].x,e[s].y),o=!0,(a=u.length-1)>=0&&(t(i,u[a])?o=!1:a>0&&r(u[a-1],u[a],i)&&u.pop()),o&&u.push(i);return(a=u.length-1)>0&&t(u[a],u[0])&&(u.pop(),a--),a>1&&(r(u[a-1],u[a],u[0])&&(u.pop(),a--),a>1&&r(u[a],u[0],u[1])&&u.shift()),u},addPolygonChain:function(e){var t=this.addVertexChain(e);if(t.length<3)return console.log("Polygon has < 3 vertices!",t),0;for(var r,n,i,o=this.segments.length,a=0;a<t.length-1;a++)r=this.createSegmentEntry(t[a],t[a+1]),i?(r.sprev=i,i.snext=r):n=r,i=r,this.appendSegmentEntry(r);return r=this.createSegmentEntry(t[t.length-1],t[0]),r.sprev=i,i.snext=r,this.appendSegmentEntry(r),n.sprev=r,r.snext=n,this.PolyLeftArr[this.idNextPolyChain++]=!0,this.segments.length-o},create_mono_chains:function(){for(var e,t,r,n,i=0,o=this.segments.length;i<o;i++)e=this.segments[i],this.PolyLeftArr[e.chainId]?(t=e.vTo,e.mprev=e.sprev,e.mnext=e.snext):(t=e.vFrom,e=e.snext,e.mprev=e.snext,e.mnext=e.sprev),(n=e.vFrom.lastInDiag)&&(n.mnext=e,e.mprev=n,e.vFrom.lastInDiag=null),(r=t.firstOutDiag)&&(r.mprev=e,e.mnext=r,t.firstOutDiag=null)},unique_monotone_chains_max:function(){var e,t;this.monoSubPolyChains=[];for(var r=0,i=this.segments.length;r<i;r++)(e=this.segments[r]).marked||(t=function(e){var t,r,i,o=e;for(r=i=e.vFrom,e.marked=!0,e=e.mnext;t=e.vFrom;){if(e.marked){if(t==r)break;return console.log("ERR unique_monotone: segment in two chains",r,e),null}e.marked=!0,1==n.Math.compare_pts_yx(t,i)&&(i=t,o=e),e=e.mnext}return o}(e))&&this.monoSubPolyChains.push(t);return this.monoSubPolyChains},clearTriangles:function(){this.triangles=[]},addTriangle:function(e,t,r){this.triangles.push([e.id,t.id,r.id])}},n.EarClipTriangulator=function(e){this.polyData=e},n.EarClipTriangulator.prototype={constructor:n.EarClipTriangulator,triangulate_polygon_no_holes:function(){var e=this.polyData,t=e.getFirstSegment(),r=t;if(e.isClockWise(t)){do{r.mprev=r.snext,r.mnext=r.sprev,r=r.sprev}while(r!=t);e.set_PolyLeft_wrong(0)}else do{r.mprev=r.sprev,r.mnext=r.snext,r=r.snext}while(r!=t);for(var i=t,o=i;i.mnext!=i.mprev;)if(function(e){var t=e.mprev.vFrom.x,r=e.mprev.vFrom.y,i=e.vFrom.x,o=e.vFrom.y,a=e.mnext.vFrom.x,u=e.mnext.vFrom.y,s=a-i,c=u-o,l=t-a,f=r-u,h=i-t,p=o-r;if(n.Math.EPSILON_P>h*c-s*p)return!1;for(var d=e.mprev.mprev,g=e.mnext;g!=d;){var y=(g=g.mnext).vFrom.x,m=g.vFrom.y,M=y-t,v=m-r;if(0!==M||0!==v){var b=y-i,w=m-o;if(0!==b||0!==w){var x=y-a,D=m-u;if((0!==x||0!==D)&&s*w-c*b>=n.Math.EPSILON_N&&h*v-p*M>=n.Math.EPSILON_N&&l*D-f*x>=n.Math.EPSILON_N)return!1}}}return!0}(i))this.polyData.addTriangle(i.mprev.vFrom,i.vFrom,i.mnext.vFrom),i.mprev.mnext=i.mnext,i.mnext.mprev=i.mprev,i=i.mnext,o=i;else if((i=i.mnext)==o)return!1;return!0}},n.Trapezoid=function(e,t,r,n){this.vHigh=e||{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},this.vLow=t||{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},this.lseg=r,this.rseg=n,this.depth=-1,this.monoDone=!1},n.Trapezoid.prototype={constructor:n.Trapezoid,clone:function(){var e=new n.Trapezoid(this.vHigh,this.vLow,this.lseg,this.rseg);return e.uL=this.uL,e.uR=this.uR,e.dL=this.dL,e.dR=this.dR,e.sink=this.sink,e},splitOffLower:function(e){var t=this.clone();return this.vLow=t.vHigh=e,this.dL=t,t.uL=this,this.dR=t.uR=null,t.dL&&(t.dL.uL=t),t.dR&&(t.dR.uR=t),t}},n.QsNode=function(e){this.trap=e,e.sink=this},n.QsNode.prototype={constructor:n.QsNode},n.QueryStructure=function(e){var t=new n.Trapezoid(null,null,null,null);if(this.trapArray=[],this.appendTrapEntry(t),this.root=new n.QsNode(t),e)for(var r=e.getSegments(),i=0;i<r.length;i++)r[i].rootFrom=r[i].rootTo=this.root,r[i].is_inserted=!1},n.QueryStructure.prototype={constructor:n.QueryStructure,getRoot:function(){return this.root},appendTrapEntry:function(e){e.trapID=this.trapArray.length,this.trapArray.push(e)},cloneTrap:function(e){var t=e.clone();return this.appendTrapEntry(t),t},splitNodeAtPoint:function(e,t,r){var i=e.trap;if(i.vHigh==t)return e;if(i.vLow==t)return e;var o=i.splitOffLower(t);return this.appendTrapEntry(o),e.yval=t,e.trap=null,e.right=new n.QsNode(i),e.left=new n.QsNode(o),r?i.sink:o.sink},fpEqual:function(e,t){return Math.abs(e-t)<n.Math.EPSILON_P},is_left_of:function(e,t,r){var i,o=e.vFrom.x-t.x,a=e.vTo.x-t.x,u=this.fpEqual(e.vFrom.y,t.y);if(this.fpEqual(e.vTo.y,t.y)){if(u)return 0;i=a}else{if(!u)return e.upward?n.Math.ptsCrossProd(e.vFrom,e.vTo,t):n.Math.ptsCrossProd(e.vTo,e.vFrom,t);i=o}return Math.abs(i)<n.Math.EPSILON_P?0:i},segNodes:function(e){this.ptNode(e,!0),this.ptNode(e,!1)},ptNode:function(e,t){var r,i,o;t?(r=e.vFrom,i=e.vTo,o=e.rootFrom):(r=e.vTo,i=e.vFrom,o=e.rootTo);for(var a,u;o;)if(o.yval)o=-1==n.Math.compare_pts_yx(r==o.yval?i:r,o.yval)?o.left:o.right;else{if(!o.seg)return o.trap||console.log("ptNode: unknown type",o),t?e.rootFrom=o:e.rootTo=o,o;if(r==o.seg.vFrom||r==o.seg.vTo){if(this.fpEqual(r.y,i.y)){this.fpEqual(o.seg.vFrom.y,o.seg.vTo.y)?r==o.seg.vFrom?(u=e.upward?i.x>=o.seg.vTo.x:i.x<o.seg.vTo.x,o=(u?e.sprev.upward:o.seg.snext.upward)?o.right:o.left):(u=e.upward?i.x<o.seg.vFrom.x:i.x>=o.seg.vFrom.x,o=(u?e.snext.upward:o.seg.sprev.upward)?o.left:o.right):o=i.x<r.x?o.left:o.right;continue}0===(a=this.is_left_of(o.seg,i,!1))&&(r==o.seg.vFrom?(u=e.upward?i.y>=o.seg.vTo.y:i.y<o.seg.vTo.y,a=u?this.is_left_of(o.seg,e.sprev.vFrom,!1):-this.is_left_of(o.seg,o.seg.snext.vTo,!1)):(u=e.upward?i.y<o.seg.vFrom.y:i.y>=o.seg.vFrom.y,a=u?this.is_left_of(o.seg,e.snext.vTo,!1):-this.is_left_of(o.seg,o.seg.sprev.vFrom,!1)))}else if(0===(a=this.is_left_of(o.seg,r,!0))&&0===(a=this.is_left_of(o.seg,i,!1))){var s=t?e.sprev.vFrom:e.snext.vTo;a=this.is_left_of(o.seg,s,!1)}if(a>0)o=o.left;else{if(!(a<0))return o;o=o.right}}},add_segment:function(e){var t=this;this.segNodes(e);var r,i,o,a,u,s;if(e.upward?(r=e.vFrom,a=e.vTo,i=e.rootFrom,u=e.rootTo,o=e.sprev.is_inserted,s=e.snext.is_inserted):(r=e.vTo,a=e.vFrom,i=e.rootTo,u=e.rootFrom,o=e.snext.is_inserted,s=e.sprev.is_inserted),!s){var c=this.splitNodeAtPoint(u,a,!1);u==i&&(i=c),u=c}var l=u.trap;if(l.uL||l.uR)if(l.vHigh==a){o||(i=this.splitNodeAtPoint(i,r,!0));for(var f,h,p,d,g,y=i.trap,m=l,M=this.trapArray.length+2;m;){if(--M<0)return void console.log("ERR add_segment: infinite loop",m,e,this);if(!m.dL&&!m.dR)return void console.log("ERR add_segment: missing successors",m,e,this);var v=m.sink;v.seg=e,v.trap=null,d&&d.rseg==m.rseg?(f=m,h=d,h.vLow=m.vLow,v.left=new n.QsNode(f),v.right=d.sink):p&&p.lseg==m.lseg?(h=m,f=p,f.vLow=m.vLow,v.left=p.sink,v.right=new n.QsNode(h)):(f=m,h=this.cloneTrap(m),v.left=new n.QsNode(f),v.right=new n.QsNode(h)),m.uL&&m.uR?function(){m.usave?(m.uleft?(h.uL=m.uR,h.uR=m.usave,h.uL.dL=h,h.uR.dR=h):(f.uR=m.uL,f.uL=m.usave,f.uL.dL=f,f.uR.dR=f),f.usave=h.usave=null):m.vHigh==l.vHigh?(h.uR.dR=h,f.uR=h.uL=null):h==m?(h.uL=h.uR,h.uR=null,h.uL.dL=h):(f.uR=f.uL,f.uL=null)}():function(){var e=m.uL||m.uR;e.dL&&e.dR?m==e.dL?(h.uL=null,e.dL=f):(f.uR=null,e.dR=h):(h.uL=null,h.uR=e,e.dR=h)}(),m.dL&&m.dR?g=function(){var r;if(m.vLow==y.vLow&&o)m.dL.uL=f,m.dR.uR=h,f.dL=m.dL,h.dR=m.dR,f.dR=h.dL=null,r=null;else{m.dL.uL=f,m.dR.uR=h;var n,i=t.is_left_of(e,m.vLow,!0);if(i>0)n=!0;else if(i<0)n=!1;else{var a=m.dL.rseg,u=a.upward,s=u?a.vFrom:a.vTo;(i=t.is_left_of(e,s,!1))>0?n=!0:i<0?n=!1:(a=u?a.snext:a.sprev,s=u?a.vTo:a.vFrom,i=t.is_left_of(e,s,!1),n=i>0)}n?(r=m.dR,m.dR.uL=f,f.dL=m.dL,h.dR=null):(r=m.dL,m.dL.uR=h,h.dR=m.dR,f.dL=null),f.dR=h.dL=r}return r}():(g=m.dL?m.dL:m.dR,function(e){m.vLow==y.vLow?(o?m.dL?(e.uL=f,f.dL=e,h.dR=null):(e.uR=h,f.dL=null,h.dR=e):(e.uL=f,e.uR=h,f.dL=h.dR=e),f.dR=h.dL=null):(e.uL&&e.uR&&(e.uL==m?(e.usave=e.uR,e.uleft=!0):(e.usave=e.uL,e.uleft=!1)),e.uL=f,e.uR=h,f.dR=h.dL=e,f.dL=h.dR=null)}(g)),f.rseg&&(f.rseg.trLeft=h),h.lseg&&(h.lseg.trRight=f),f.rseg=h.lseg=e,e.trLeft=f,e.trRight=h,m.vLow!=y.vLow?(p=f,d=h,m=g):m=null}e.is_inserted=!0}else console.log("ERR add_segment: trFirstHigh != segHigh: ",l);else console.log("ERR add_segment: missing trFirst.uX: ",l)},assignDepths:function(e){var t,r,n=[this.trapArray[0]],i=[],o=0;do{for(var a=o%2==1;t=n.pop();)-1==t.depth&&(t.depth=o,t.uL&&n.push(t.uL),t.uR&&n.push(t.uR),t.dL&&n.push(t.dL),t.dR&&n.push(t.dR),(r=t.lseg)&&-1==r.trLeft.depth&&i.push(r.trLeft),(r=t.rseg)&&(-1==r.trRight.depth&&i.push(r.trRight),r.upward!=a&&e.set_PolyLeft_wrong(r.chainId)));n=i,i=[],o++}while(n.length>0)},create_visibility_map:function(e){var t,r,n=e.nbVertices(),i=new Array(n);for(t=0;t<n;t++)i[t]=new Array(8);var o=new Array(n);for(t=0,r=this.trapArray.length;t<r;t++){var a=this.trapArray[t],u=a.uL?a.uR?5:7:a.uR?4:6,s=a.dL?a.dR?1:0:a.dR?3:2;if(a.depth%2==1){if(5==u||1==s||7==u&&3==s||4==u&&0==s){var c=e.appendDiagonalsEntry({vFrom:a.vLow,vTo:a.vHigh,mprev:null,mnext:null,marked:!1}),l=e.appendDiagonalsEntry({vFrom:a.vHigh,vTo:a.vLow,revDiag:c,mprev:null,mnext:null,marked:!1});c.revDiag=l,i[a.vLow.id][s]=c,i[a.vHigh.id][u]=l}}else null!==a.vHigh.id&&(o[a.vHigh.id]=u),null!==a.vLow.id&&(o[a.vLow.id]=s)}var f,h,p,d,g;for(t=0;t<n;t++)if(h=i[t],null!=(p=o[t])){r=p,g=null;do{r++>7&&(r=0),(f=h[r])&&(g?(f.mprev=g,g.mnext=f):(d=f.vFrom,d.firstOutDiag=f),g=f.revDiag)}while(r!=p);g&&(d.lastInDiag=g)}}},n.Trapezoider=function(e){this.polyData=e,this.queryStructure=new n.QueryStructure(this.polyData)},n.Trapezoider.prototype={constructor:n.Trapezoider,optimise_randomlist:function(e){var t=0,r=this.polyData.nbPolyChains();if(1!=r)for(var n=new Array(r),i=e.concat(),o=0;o<i.length;o++){var a=i[o].chainId;n[a]?e[r++]=i[o]:(e[t++]=i[o],n[a]=!0)}},trapezoide_polygon:function(){var e=this.polyData.getSegments().concat();n.Math.array_shuffle(e),this.optimise_randomlist(e);for(var t,r=e.length,i=this.queryStructure,o=0,a=r;o<r;){for(var u=(a=Math.log(a)/Math.LN2)>1?Math.floor(r/a):r;o<u;o++)i.add_segment(e[o]);for(t=o;t<r;t++)this.queryStructure.segNodes(e[t])}for(i.assignDepths(this.polyData),t=0;t<r;t++)e[t].trLeft=e[t].trRight=null},create_visibility_map:function(){return this.queryStructure.create_visibility_map(this.polyData)}},n.MonoSplitter=function(e){this.polyData=e,this.trapezoider=null},n.MonoSplitter.prototype={constructor:n.MonoSplitter,monotonate_trapezoids:function(){this.trapezoider=new n.Trapezoider(this.polyData),this.trapezoider.trapezoide_polygon(),this.trapezoider.create_visibility_map(),this.polyData.create_mono_chains(),this.polyData.unique_monotone_chains_max()}},n.MonoTriangulator=function(e){this.polyData=e},n.MonoTriangulator.prototype={constructor:n.MonoTriangulator,triangulate_all_polygons:function(){var e=this.polyData.getMonoSubPolys();this.polyData.clearTriangles();for(var t=0;t<e.length;t++){var r=e[t],n=r.mprev,i=r.mnext;i.mnext==n?this.polyData.addTriangle(r.vFrom,i.vFrom,n.vFrom):this.triangulate_monotone_polygon(r)}},triangulate_monotone_polygon:function(e){var t=this,r=e.mnext,i=e.vFrom,o=[r.vFrom],a=0,u=(r=r.mnext).vFrom;if(u!=i){for(;u!=i||a>1;)if(a>0){var s=n.Math.ptsCrossProd(o[a],u,o[a-1]);Math.abs(s)<=n.Math.EPSILON_P&&(u!=i&&n.Math.compare_pts_yx(o[a],u)!=n.Math.compare_pts_yx(o[a],o[a-1])||(s=1)),s>0?(this.polyData.addTriangle(o[a-1],o[a],u),a--):(o[++a]=u,u==i?function(){for(console.log("ERR uni-y-monotone: only concave angles left",o);a>1;)a--,t.polyData.addTriangle(o[a-1],o[a],o[a+1])}():(r=r.mnext,u=r.vFrom))}else o[++a]=u,r=r.mnext,u=r.vFrom;this.polyData.addTriangle(o[a-1],o[a],u)}}},n.Triangulator=function(){this.lastPolyData=null},n.Triangulator.prototype={constructor:n.Triangulator,clear_lastData:function(){this.lastPolyData=null},get_PolyLeftArr:function(){return this.lastPolyData?this.lastPolyData.get_PolyLeftArr():null},triangulate_polygon:function(e,t){if(this.clear_lastData(),!e||0===e.length)return[];var r,i=new n.PolygonData(e),o=function(){return!t&&1==i.nbPolyChains()}();return o&&(r=new n.EarClipTriangulator(i),o=r.triangulate_polygon_no_holes()),o||(new n.MonoSplitter(i).monotonate_trapezoids(),(r=new n.MonoTriangulator(i)).triangulate_all_polygons()),this.lastPolyData=i,i.getTriangles()}},void 0!==r?(void 0!==t&&t.exports&&(r=t.exports=n),r.PNLTRI=n):this.PNLTRI=n},{}],369:[function(e,t,r){function n(){return!0}function i(e){return function(t,r){var i=e[t];return!!i&&!!i.queryPoint(r,n)}}function o(e){for(var t={},r=0;r<e.length;++r){var n=e[r],o=n[0][0],a=n[0][1],u=n[1][1],s=[Math.min(a,u),Math.max(a,u)];o in t?t[o].push(s):t[o]=[s]}for(var c={},l=Object.keys(t),r=0;r<l.length;++r){var f=t[l[r]];c[l[r]]=p(f)}return i(c)}function a(e,t){return function(r){var n=d.le(t,r[0]);if(n<0)return 1;var i=e[n];if(!i){if(!(n>0&&t[n]===r[0]))return 1;i=e[n-1]}for(var o=1;i;){var a=i.key,u=f(r,a[0],a[1]);if(a[0][0]<a[1][0])if(u<0)i=i.left;else{if(!(u>0))return 0;o=-1,i=i.right}else if(u>0)i=i.left;else{if(!(u<0))return 0;o=1,i=i.right}}return o}}function u(e){return 1}function s(e){return function(t){return e(t[0],t[1])?0:1}}function c(e,t){return function(r){return e(r[0],r[1])?0:t(r)}}function l(e){for(var t=e.length,r=[],n=[],i=0;i<t;++i)for(var l=e[i],f=l.length,p=f-1,d=0;d<f;p=d++){var g=l[p],y=l[d];g[0]===y[0]?n.push([g,y]):r.push([g,y])}if(0===r.length)return 0===n.length?u:s(o(n));var m=h(r),M=a(m.slabs,m.coordinates);return 0===n.length?M:c(o(n),M)}t.exports=l;var f=e("robust-orientation")[3],h=e("slab-decomposition"),p=e("interval-tree-1d"),d=e("binary-search-bounds")},{"binary-search-bounds":76,"interval-tree-1d":335,"robust-orientation":401,"slab-decomposition":415}],370:[function(e,t,r){function n(e,t,r,n){function i(r,n,i,s){for(var c=1/(r-1),l=0;l<r;l++){var f=Math.cos(2*Math.PI*l*c)*n,h=Math.sin(2*Math.PI*l*c)*n;o.push([e*f,e*i+t*s,e*h]),a.push([f,i,h]);var p=1-l*c,d=.5-(e*i+t*s)/(2*e+t);u.push([p,d])}}void 0===e&&(e=.5),void 0===t&&(t=2*e),void 0===r&&(r=12),void 0===n&&(n=12);for(var o=[],a=[],u=[],s=[],c=r+1,l=r+c,f=1/(c-1),h=1/(r-1),p=0;p<r/2;p++)i(n,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),-.5);for(p=0;p<c;p++)i(n,1,0,p*f-.5);for(p=r/2;p<r;p++)i(n,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),.5);for(p=0;p<l-1;p++)for(var d=0;d<n-1;d++)s.push([p*n+(d+1),p*n+(d+0),(p+1)*n+(d+1)]),s.push([(p+1)*n+(d+0),(p+1)*n+(d+1),p*n+d]);return{positions:o,normals:a,uvs:u,cells:s}}t.exports=n},{}],371:[function(e,t,r){function n(e,t,r,n,i,o){function a(e,t,r,n,i,o,a,h,p,d){for(var g=u,y=0;y<=a;y++)for(b=0;b<=o;b++){var m=s[u]=[0,0,0];m[e]=(-n/2+b*n/o)*p,m[t]=(-i/2+y*i/a)*d,m[r]=h;var M=c[u]=[0,0,0];M[e]=0,M[t]=0,M[r]=h/Math.abs(h);var v=l[u]=[0,0];v[0]=b/o,v[1]=1-y/a,++u}for(y=0;y<a;y++)for(var b=0;b<o;b++){var w=g+y*(o+1)+b;f.push([w,w+o+1,w+o+2]),f.push([w,w+o+2,w+1])}}void 0===e&&(e=1),void 0===t&&(t=e),void 0===r&&(r=e),void 0===n&&(n=1),void 0===i&&(i=n),void 0===o&&(o=n);var u=0,s=[],c=[],l=[],f=[];return a(0,1,2,e,t,n,i,r/2,1,-1),a(0,1,2,e,t,n,i,-r/2,-1,-1),a(2,1,0,r,t,o,i,-e/2,1,-1),a(2,1,0,r,t,o,i,e/2,-1,-1),a(0,2,1,e,r,n,o,t/2,1,1),a(0,2,1,e,r,n,o,-t/2,1,-1),{positions:s,normals:c,uvs:l,cells:f}}t.exports=n},{}],372:[function(e,t,r){function n(e,t,r,n,i){var o=0,a=0,u=[],s=0;e>0&&s++,t>0&&s++;for(var c=(n+1)*(i+1)+(n+2)*s,l=n*i*2+n*s,f=new Array(c),h=new Array(c),p=new Array(c),d=new Array(l),g=(t-e)/r,y=2*Math.PI,m=0;m<=i;m++){for(var M=[],v=m/i,b=v*(t-e)+e,w=0;w<=n;w++){var x=w/n,D=x*y,j=Math.sin(D),N=Math.cos(D);h[o]=[b*j,-v*r+r/2,b*N],f[o]=[j,g,N],p[o]=[x,1-v],M.push(o),o++}u.push(M)}for(w=0;w<n;w++)for(m=0;m<i;m++){var A=u[m][w],L=u[m+1][w],T=u[m+1][w+1],E=u[m][w+1];d[a]=[A,L,E],d[++a]=[L,T,E],a++}var I=function(i){for(var u=(new Array(3).fill(0),!0===i?e:t),s=!0===i?1:-1,c=o,l=1;l<=n;l++)h[o]=[0,r*s/2,0],f[o]=[0,s,0],p[o]=[.5,.5],o++;for(var g=o,l=0;l<=n;l++){var m=l/n*y,M=Math.cos(m),v=Math.sin(m);h[o]=[u*v,r*s/2,u*M],f[o]=[0,s,0],p[o]=[.5*M+.5,.5*v*s+.5],o++}for(l=0;l<n;l++){var b=c+l,w=g+l;!0===i?(d[a]=[w,w+1,b],a++):(d[a]=[w+1,w,b],a++)}};return e>0&&I(!0),t>0&&I(!1),{uvs:p,cells:d,normals:f,positions:h}}t.exports=n},{}],373:[function(e,t,r){function n(e,t,r,n,i){e=e||1,t=t||1,r=r||1,n=n||1;for(var o=!(!i||!i.quads)&&i.quads,a=[],u=[],s=[],c=[],l=0;l<=n;l++)for(var f=0;f<=r;f++){var h=f/r,p=l/n,d=-e/2+h*e,g=t/2-p*t;a.push([d,g,0]),u.push([h,p]),s.push([0,0,1]),l<n&&f<r&&(o?c.push([l*(r+1)+f,(l+1)*(r+1)+f,(l+1)*(r+1)+f+1,l*(r+1)+f+1]):(c.push([l*(r+1)+f,(l+1)*(r+1)+f+1,l*(r+1)+f+1]),c.push([(l+1)*(r+1)+f+1,l*(r+1)+f,(l+1)*(r+1)+f])))}return{positions:a,normals:s,uvs:u,cells:c}}t.exports=n},{}],374:[function(e,t,r){function n(e,t){t=t||{},e=void 0!==e?e:1;for(var r=2+(void 0!==t.segments?t.segments:32),n=2*r,d=[],g=[],y=[],m=[],M=0;M<=r;M++){for(var v=M/r,b=v*Math.PI,w=0;w<=n;w++){var x=w/n,D=x*Math.PI*2;i(f),a(f,f,-b),i(l),o(l,l,D),s(p,h,f),s(p,p,l),u(p,p,-e),g.push(p.slice()),c(p,p),y.push(p.slice()),m.push([x,1-v])}if(M>0)for(var j=g.length,N=j-2*(n+1);N+n+2<j;N++)d.push([N,N+1,N+n+1]),d.push([N+n+1,N+1,N+n+2])}return{cells:d,positions:g,normals:y,uvs:m}}var i=e("gl-mat4/identity"),o=e("gl-mat4/rotateY"),a=e("gl-mat4/rotateZ"),u=e("gl-vec3/scale"),s=e("gl-vec3/transformMat4"),c=e("gl-vec3/normalize"),l=i([]),f=i([]),h=[0,1,0],p=[0,0,0];t.exports=n},{"gl-mat4/identity":189,"gl-mat4/rotateY":199,"gl-mat4/rotateZ":200,"gl-vec3/normalize":280,"gl-vec3/scale":285,"gl-vec3/transformMat4":292}],375:[function(e,t,r){function n(e){for(var t=i((e=e||{}).majorRadius,1),r=i(e.minorRadius,.25),n=i(e.minorSegments,32),u=i(e.majorSegments,64),s=i(e.arc,2*Math.PI),c=2*Math.PI,l=[0,0,0],f=[],h=[],p=[],d=[0,0,0],g=[],y=0;y<=n;y++)for(b=0;b<=u;b++){var m=b/u*s,M=y/n*c;l[0]=t*Math.cos(m),l[1]=t*Math.sin(m);var v=[(t+r*Math.cos(M))*Math.cos(m),(t+r*Math.cos(M))*Math.sin(m),r*Math.sin(M)];h.push(v),o(d,v,l),a(d,d),g.push(d.slice()),f.push([b/u,y/n])}for(y=1;y<=n;y++)for(var b=1;b<=u;b++){var w=(u+1)*y+b-1,x=(u+1)*(y-1)+b-1,D=(u+1)*(y-1)+b,j=(u+1)*y+b;p.push([w,x,j]),p.push([x,D,j])}return{uvs:f,cells:p,normals:g,positions:h}}var i=e("defined"),o=e("gl-vec3/subtract"),a=e("gl-vec3/normalize");t.exports=n},{defined:148,"gl-vec3/normalize":280,"gl-vec3/subtract":290}],376:[function(e,t,r){(function(e){"use strict";function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(u-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:377}],377:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){y&&d&&(y=!1,d.length?g=d.concat(g):m=-1,g.length&&s())}function s(){if(!y){var e=o(u);y=!0;for(var t=g.length;t;){for(d=g,g=[];++m<t;)d&&d[m].run();m=-1,t=g.length}d=null,y=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,h,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,g=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new c(e,t)),1!==g.length||y||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],378:[function(e,t,r){(function(r){for(var n=e("performance-now"),i="undefined"==typeof window?r:window,o=["moz","webkit"],a="AnimationFrame",u=i["request"+a],s=i["cancel"+a]||i["cancelRequest"+a],c=0;!u&&c<o.length;c++)u=i[o[c]+"Request"+a],s=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!u||!s){var l=0,f=0,h=[];u=function(e){if(0===h.length){var t=n(),r=Math.max(0,1e3/60-(t-l));l=r+t,setTimeout(function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout(function(){throw e},0)}},Math.round(r))}return h.push({handle:++f,callback:e,cancelled:!1}),f},s=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}t.exports=function(e){return u.call(i,e)},t.exports.cancel=function(){s.apply(i,arguments)},t.exports.polyfill=function(){i.requestAnimationFrame=u,i.cancelAnimationFrame=s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":357}],379:[function(e,t,r){"use strict";function n(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=i(e[o],t[o]);return n}var i=e("big-rat/add");t.exports=n},{"big-rat/add":60}],380:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=i(e[r]);return t}t.exports=n;var i=e("big-rat")},{"big-rat":63}],381:[function(e,t,r){"use strict";function n(e,t){for(var r=i(t),n=e.length,a=new Array(n),u=0;u<n;++u)a[u]=o(e[u],r);return a}var i=e("big-rat"),o=e("big-rat/mul");t.exports=n},{"big-rat":63,"big-rat/mul":72}],382:[function(e,t,r){"use strict";function n(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=i(e[o],t[o]);return n}var i=e("big-rat/sub");t.exports=n},{"big-rat/sub":74}],383:[function(e,t,r){function n(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}var i=e("ray-triangle-intersection"),o=e("ray-plane-intersection"),a=e("ray-sphere-intersection"),u=e("ray-aabb-intersection"),s=e("gl-vec3/copy"),c=[[0,0,0],[0,0,0],[0,0,0]],l=[0,0,0];t.exports=n,n.prototype.set=function(e,t){this.origin=e,this.direction=t},n.prototype.copy=function(e){s(this.origin,e.origin),s(this.direction,e.direction)},n.prototype.clone=function(){var e=new n;return e.copy(this),e},n.prototype.intersectsSphere=function(e,t){return a(l,this.origin,this.direction,e,t)},n.prototype.intersectsPlane=function(e,t){return o(l,this.origin,this.direction,e,t)},n.prototype.intersectsTriangle=function(e){return i(l,this.origin,this.direction,e)},n.prototype.intersectsBox=function(e){return u(l,this.origin,this.direction,e)},n.prototype.intersectsTriangleCell=function(e,t){var r=e[0],n=e[1],i=e[2];return c[0]=t[r],c[1]=t[n],c[2]=t[i],this.intersectsTriangle(c)}},{"gl-vec3/copy":264,"ray-aabb-intersection":384,"ray-plane-intersection":385,"ray-sphere-intersection":386,"ray-triangle-intersection":387}],384:[function(e,t,r){function n(e,t,r,n){var o=i(t,r,n);if(o===1/0)e=null;else{e=e||[];for(var a=0;a<t.length;a++)e[a]=t[a]+r[a]*o}return e}function i(e,t,r){for(var n=e.length,i=-1/0,o=1/0,a=0;a<n;a++){var u=(r[0][a]-e[a])/t[a],s=(r[1][a]-e[a])/t[a];if(u>s){var c=u;u=s,s=c}if(s<i||u>o)return 1/0;u>i&&(i=u),s<o&&(o=s)}return i>o?1/0:i}t.exports=n,t.exports.distance=i},{}],385:[function(e,t,r){function n(e,t,r,n,c){var l=i(r,n);if(0!==l){var f=-(i(t,n)+c)/l;return f<0?null:(a(s,r,f),o(e,t,s))}return i(n,t)+c===0?u(e,t):null}var i=e("gl-vec3/dot"),o=e("gl-vec3/add"),a=e("gl-vec3/scale"),u=e("gl-vec3/copy");t.exports=n;var s=[0,0,0]},{"gl-vec3/add":261,"gl-vec3/copy":264,"gl-vec3/dot":269,"gl-vec3/scale":285}],386:[function(e,t,r){function n(e,t,r,n,f){a(l,n,t);var h=o(r,l);if(h<0)return null;u(l,t,r,h);var p=i(n,l),d=f*f;return p>d?null:(s(e,r,h-Math.sqrt(d-p)),c(e,e,t))}var i=e("gl-vec3/squaredDistance"),o=e("gl-vec3/dot"),a=e("gl-vec3/subtract"),u=e("gl-vec3/scaleAndAdd"),s=e("gl-vec3/scale"),c=e("gl-vec3/add"),l=[0,0,0];t.exports=n},{"gl-vec3/add":261,"gl-vec3/dot":269,"gl-vec3/scale":285,"gl-vec3/scaleAndAdd":286,"gl-vec3/squaredDistance":288,"gl-vec3/subtract":290}],387:[function(e,t,r){function n(e,t,r,n){a(s,n[1],n[0]),a(c,n[2],n[0]),i(f,r,c);var p=o(s,f);if(p<u)return null;a(l,t,n[0]);var d=o(l,f);if(d<0||d>p)return null;i(h,l,s);var g=o(r,h);if(g<0||d+g>p)return null;var y=o(c,h)/p;return e[0]=t[0]+y*r[0],e[1]=t[1]+y*r[1],e[2]=t[2]+y*r[2],e}var i=e("gl-vec3/cross"),o=e("gl-vec3/dot"),a=e("gl-vec3/subtract"),u=1e-6,s=[0,0,0],c=[0,0,0],l=[0,0,0],f=[0,0,0],h=[0,0,0];t.exports=n},{"gl-vec3/cross":266,"gl-vec3/dot":269,"gl-vec3/subtract":290}],388:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||u(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var u=e("process-nextick-args"),s=e("core-util-is");s.inherits=e("inherits");var c=e("./_stream_readable"),l=e("./_stream_writable");s.inherits(n,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=l.prototype[p])}},{"./_stream_readable":390,"./_stream_writable":392,"core-util-is":142,inherits:334,"process-nextick-args":376}],389:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":391,"core-util-is":142,inherits:334}],390:[function(e,t,r){(function(r){"use strict";function n(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function i(t,r){T=T||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof T&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new Q,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(P||(P=e("string_decoder/").StringDecoder),this.decoder=new P(t.encoding),this.encoding=t.encoding)}function o(t){if(T=T||e("./_stream_duplex"),!(this instanceof o))return new o(t);this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),_.call(this)}function a(e,t,r,n,i){var o=l(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),d(e,t)}else i||(t.reading=!1);return u(t)}function u(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){return e>=B?e=B:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e,t){var r=null;return S.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E(p,e):p(e))}function p(e){k("emit readable"),e.emit("readable"),b(e)}function d(e,t){t.readingMore||(t.readingMore=!0,E(g,e,t))}function g(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(k("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;k("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&O(e,"data")&&(t.flowing=!0,b(e))}}function m(e){k("readable nexttick read 0"),e.read(0)}function M(e,t){t.resumeScheduled||(t.resumeScheduled=!0,E(v,e,t))}function v(e,t){t.reading||(k("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(k("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=x(e,t.buffer,t.decoder),r}function x(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?D(e,t):j(e,t),n}function D(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function j(e,t){var r=S.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0==(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function N(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=o;var T,E=e("process-nextick-args"),I=e("isarray");o.ReadableState=i;e("events").EventEmitter;var O=function(e,t){return e.listeners(t).length},_=e("./internal/streams/stream"),S=e("safe-buffer").Buffer,C=e("core-util-is");C.inherits=e("inherits");var z=e("util"),k=void 0;k=z&&z.debuglog?z.debuglog("stream"):function(){};var P,Q=e("./internal/streams/BufferList");C.inherits(o,_);var U=["error","close","destroy","pause","resume"];o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=S.from(e,t),t=""),a(this,r,e,t,!1)},o.prototype.unshift=function(e){return a(this,this._readableState,e,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return P||(P=e("string_decoder/").StringDecoder),this._readableState.decoder=new P(t),this._readableState.encoding=t,this};var B=8388608;o.prototype.read=function(e){k("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):h(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&N(this),null;var n=t.needReadable;k("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,k("length less than watermark",n)),t.ended||t.reading?(n=!1,k("reading or ended",n)):n&&(k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(r,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(e){k("onunpipe"),e===h&&a()}function o(){k("onend"),e.end()}function a(){k("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",f),h.removeListener("data",u),m=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function u(t){k("ondata"),M=!1,!1!==e.write(t)||M||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==L(p.pipes,e))&&!m&&(k("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,M=!0),h.pause())}function s(t){k("onerror",t),f(),e.removeListener("error",s),0===O(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){k("onfinish"),e.removeListener("close",c),f()}function f(){k("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,k("pipe count=%d opts=%j",p.pipesCount,t);var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?o:f;p.endEmitted?E(d):h.once("end",d),e.on("unpipe",i);var g=y(h);e.on("drain",g);var m=!1,M=!1;return h.on("data",u),n(e,"error",s),e.once("close",c),e.once("finish",l),e.emit("pipe",h),p.flowing||(k("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=L(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=_.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this):E(m,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(k("resume"),e.flowing=!0,M(this,e)),this},o.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(k("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){k("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<U.length;o++)e.on(U[o],n.emit.bind(n,U[o]));return n._read=function(t){k("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":388,"./internal/streams/BufferList":393,"./internal/streams/stream":394,_process:377,"core-util-is":142,events:153,inherits:334,isarray:395,"process-nextick-args":376,"safe-buffer":407,"string_decoder/":396,util:87}],391:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);u.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var u=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(o,u),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":388,"core-util-is":142,inherits:334}],392:[function(e,t,r){(function(r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){D=D||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof D&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function a(t){if(D=D||e("./_stream_duplex"),!(I.call(a,this)||this instanceof D))return new a(t);this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),T.call(this)}function u(e,t){var r=new Error("write after end");e.emit("error",r),j(t,r)}function s(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),j(n,o),i=!1),i}function c(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=E.from(t,r)),t}function l(e,t,r,n,o,a){r||(n=c(t,n,o),E.isBuffer(n)&&(o="buffer"));var u=t.objectMode?1:n.length;t.length+=u;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,o,a),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,u,n,o,a);return s}function f(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?j(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(p(r),t)h(e,r,n,t,i);else{var o=M(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?N(g,e,r,o,i):g(e,r,o,i)}}function g(e,t,r,n){r||y(e,t),t.pendingcb--,n(),b(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;f(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new x(t)}else{for(;r;){var u=r.chunk,s=r.encoding,c=r.callback;if(f(e,t,!1,t.objectMode?1:u.length,u,s,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var r=M(t);return r&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),r}function w(e,t,r){t.ending=!0,b(e,t),r&&(t.finished?j(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function x(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=a;var D,j=e("process-nextick-args"),N=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:j;a.WritableState=o;var A=e("core-util-is");A.inherits=e("inherits");var L={deprecate:e("util-deprecate")},T=e("./internal/streams/stream"),E=e("safe-buffer").Buffer;A.inherits(a,T),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var I;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!I.call(this,e)||e&&e._writableState instanceof o}})):I=function(e){return e instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(e,t,r){var i=this._writableState,o=!1,a=E.isBuffer(e);return"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?u(this,r):(a||s(this,i,e,r))&&(i.pendingcb++,o=l(this,i,a,e,t,r)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},a.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":388,"./internal/streams/stream":394,_process:377,"core-util-is":142,inherits:334,"process-nextick-args":376,"safe-buffer":407,"util-deprecate":430}],393:[function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=e("safe-buffer").Buffer;t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},{"safe-buffer":407}],394:[function(e,t,r){t.exports=e("events").EventEmitter},{events:153}],395:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],396:[function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=n(e);if("string"!=typeof t&&(M.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=p,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=d,this.end=g,t=3;break;default:return this.write=y,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function u(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=a(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=a(t[n]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function s(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}function c(e){var t=this.lastTotal-this.lastNeed,r=s(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function h(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var M=e("safe-buffer").Buffer,v=M.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":407}],397:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":388,"./lib/_stream_passthrough.js":389,"./lib/_stream_readable.js":390,"./lib/_stream_transform.js":391,"./lib/_stream_writable.js":392}],398:[function(e,t,r){t.exports=e("./readable").Transform},{"./readable":397}],399:[function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():e.createREGL=n()}(this,function(){"use strict";function e(e){return"undefined"!=typeof btoa?btoa(e):"base64:"+e}function t(e){var t=new Error("(regl) "+e);throw console.error(t),t}function r(e,r){e||t(r)}function n(e){return e?": "+e:""}function i(e,r,i){e in r||t("unknown parameter ("+e+")"+n(i)+". possible values: "+Object.keys(r).join())}function o(e,r){$e(e)||t("invalid parameter type"+n(r)+". must be a typed array")}function a(e,r,i){typeof e!==r&&t("invalid parameter type"+n(i)+". expected "+r+", got "+typeof e)}function u(e,r){e>=0&&(0|e)===e||t("invalid parameter type, ("+e+")"+n(r)+". must be a nonnegative integer")}function s(e,r,i){r.indexOf(e)<0&&t("invalid value"+n(i)+". must be one of: "+r)}function c(e){Object.keys(e).forEach(function(e){tt.indexOf(e)<0&&t('invalid regl constructor argument "'+e+'". must be one of '+tt)})}function l(e,t){for(e+="";e.length<t;)e=" "+e;return e}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function h(e,t){this.number=e,this.line=t,this.errors=[]}function p(e,t,r){this.file=e,this.line=t,this.message=r}function d(){var e=new Error,t=(e.stack||e).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return n?n[1]:"unknown"}function g(){var e=new Error,t=(e.stack||e).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return n?n[1]:"unknown"}function y(t,r){var n=t.split("\n"),i=1,o=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=r||d(),a.unknown.lines.push(new h(0,""));for(var u=0;u<n.length;++u){var s=n[u],c=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(s);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(i=0|l[1],l[2]&&((o=0|l[2])in a||(a[o]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);p&&(a[o].name=p[1]?e(p[2]):p[2])}a[o].lines.push(new h(i++,s))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function m(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var r=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);r?t.push(new p(0|r[1],0|r[2],r[3].trim())):e.length>0&&t.push(new p("unknown",0,e))}}),t}function M(e,t){t.forEach(function(t){var r=e[t.file];if(r){var n=r.index[t.line];if(n)return n.errors.push(t),void(r.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}function v(e,t,n,i,o){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(t),u=i===e.FRAGMENT_SHADER?"fragment":"vertex";A(n,"string",u+" shader source must be a string",o);var s=y(n,o),c=m(a);M(s,c),Object.keys(s).forEach(function(e){function t(e,t){n.push(e),i.push(t||"")}var r=s[e];if(r.hasErrors){var n=[""],i=[""];t("file number "+e+": "+r.name+"\n","color:red;text-decoration:underline;font-weight:bold"),r.lines.forEach(function(e){if(e.errors.length>0){t(l(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),t(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var r=0;e.errors.forEach(function(n){var i=n.message,o=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(o){var a=o[1];switch(i=o[2],a){case"assign":a="="}r=Math.max(e.line.indexOf(a,r),0)}else r=0;t(l("| ",6)),t(l("^^^",r+3)+"\n","font-weight:bold"),t(l("| ",6)),t(i+"\n","font-weight:bold")}),t(l("| ",6)+"\n")}else t(l(e.number,4)+"|  "),t(e.line+"\n","color:red")}),"undefined"!=typeof document?(i[0]=n.join("%c"),console.log.apply(console,i)):console.log(n.join(""))}}),r.raise("Error compiling "+u+" shader, "+s[0].name)}}function b(e,t,n,i,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var a=e.getProgramInfoLog(t),u=y(n,o),s='Error linking program with vertex shader, "'+y(i,o)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+a),r.raise(s)}}function w(e){e._commandRef=d()}function x(e,t,r,n){function i(e){return e?n.id(e):0}function o(e,t){Object.keys(t).forEach(function(t){e[n.id(t)]=!0})}w(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var u=e._attributeSet={};o(u,r.static),o(u,r.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function D(e,r){var n=g();t(e+" in command "+(r||d())+("unknown"===n?"":" called from "+n))}function j(e,t,r){e||D(t,r||d())}function N(e,t,r,i){e in t||D("unknown parameter ("+e+")"+n(r)+". possible values: "+Object.keys(t).join(),i||d())}function A(e,t,r,i){typeof e!==t&&D("invalid parameter type"+n(r)+". expected "+t+", got "+typeof e,i||d())}function L(e){e()}function T(e,t,r){e.texture?s(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):s(e.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")}function E(e,t){return e===lt||e===ct||e===ft?2:e===ht?4:pt[e]*t}function I(e){return!(e&e-1||!e)}function O(e,t,n){var i,o=t.width,a=t.height,u=t.channels;r(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),e.wrapS===rt&&e.wrapT===rt||r(I(o)&&I(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==o&&1!==a&&r(e.minFilter!==it&&e.minFilter!==at&&e.minFilter!==ot&&e.minFilter!==ut,"min filter requires mipmap"):(r(I(o)&&I(a),"texture must be a square power of 2 to support mipmapping"),r(t.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),t.type===st&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(e.minFilter===nt&&e.magFilter===nt,"filter not supported, must enable oes_texture_float_linear"),r(!e.genMipmaps,"mipmap generation not supported with float textures"));var s=t.images;for(i=0;i<16;++i)if(s[i]){var c=o>>i,l=a>>i;r(t.mipmask&1<<i,"missing mipmap data");var f=s[i];if(r(f.width===c&&f.height===l,"invalid shape for mip images"),r(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(E(f.type,u)*c/f.unpackAlignment)*f.unpackAlignment;r(f.data.byteLength===h*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||r(0==(t.mipmask&1<<i),"extra mipmap data");t.compressed&&r(!e.genMipmaps,"mipmap generation for compressed images not supported")}function _(e,t,n,i){var o=e.width,a=e.height,u=e.channels;r(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),r(o===a,"cube map must be square"),r(t.wrapS===rt&&t.wrapT===rt,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===o&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var h=l[f];if(h){var p=o>>f,d=a>>f;r(c.mipmask&1<<f,"missing mipmap data"),r(h.width===p&&h.height===d,"invalid shape for mip images"),r(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===p*d*Math.max(E(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}function S(e,t){this.id=gt++,this.type=e,this.data=t}function C(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(e){if(0===e.length)return[];var t=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&t===r&&('"'===t||"'"===t))return['"'+C(e.substr(1,e.length-2))+'"'];var n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(n)return z(e.substr(0,n.index)).concat(z(n[1])).concat(z(e.substr(n.index+n[0].length)));var i=e.split(".");if(1===i.length)return['"'+C(e)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(z(i[a]));return o}function k(e){return"["+z(e).join("][")+"]"}function P(e,t){return new S(e,k(t+""))}function Q(e){return"function"==typeof e&&!e._reglType||e instanceof S}function U(e,t){return"function"==typeof e?new S(yt,e):e}function B(){var e={"":0},t=[""];return{id:function(r){var n=e[r];return n||(n=e[r]=t.length,t.push(r),n)},str:function(e){return t[e]}}}function Y(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var i=e.getBoundingClientRect();t=i.right-i.left,n=i.bottom-i.top}o.width=r*t,o.height=r*n,et(o.style,{width:t+"px",height:n+"px"})}function i(){window.removeEventListener("resize",n),e.removeChild(o)}var o=document.createElement("canvas");return et(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",et(e.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:o,onDestroy:i}}function R(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}function F(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function G(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function V(e){return"string"==typeof e?e.split():(dt(Array.isArray(e),"invalid extension array"),e)}function W(e){return"string"==typeof e?(dt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function H(e){var t,r,n,i,o=e||{},a={},u=[],s=[],c="undefined"==typeof window?1:window.devicePixelRatio,l=!1,f=function(e){e&&dt.raise(e)},h=function(){};if("string"==typeof o?(dt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(o),dt(t,"invalid query string for element")):"object"==typeof o?F(o)?t=o:G(o)?(i=o,n=i.canvas):(dt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?n=W(o.canvas):"container"in o&&(r=W(o.container)),"attributes"in o&&(a=o.attributes,dt.type(a,"object","invalid context attributes")),"extensions"in o&&(u=V(o.extensions)),"optionalExtensions"in o&&(s=V(o.optionalExtensions)),"onDone"in o&&(dt.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,dt(c>0,"invalid pixel ratio"))):dt.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?n=t:r=t),!i){if(!n){dt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=Y(r||document.body,f,c);if(!p)return null;n=p.canvas,h=p.onDestroy}i=R(n,a)}return i?{gl:i,canvas:n,container:r,extensions:u,optionalExtensions:s,pixelRatio:c,profile:l,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function q(e,t){function r(t){dt.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var n={},i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(!r(e))throw new Error("(regl): error restoring extension "+e)})}}}function X(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||$e(e.data))}function Z(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function K(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function J(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1}function $(e){var t=K(e),r=Et[J(t)>>2];return r.length>0?r.pop():new ArrayBuffer(t)}function ee(e){Et[J(e.byteLength)>>2].push(e)}function te(e,t){var r=null;switch(e){case xt:r=new Int8Array($(t),0,t);break;case Dt:r=new Uint8Array($(t),0,t);break;case jt:r=new Int16Array($(2*t),0,t);break;case Nt:r=new Uint16Array($(2*t),0,t);break;case At:r=new Int32Array($(4*t),0,t);break;case Lt:r=new Uint32Array($(4*t),0,t);break;case Tt:r=new Float32Array($(4*t),0,t);break;default:return null}return r.length!==t?r.subarray(0,t):r}function re(e){ee(e.buffer)}function ne(e,t,r){for(var n=0;n<t;++n)r[n]=e[n]}function ie(e,t,r,n){for(var i=0,o=0;o<t;++o)for(var a=e[o],u=0;u<r;++u)n[i++]=a[u]}function oe(e,t,r,n,i,o){for(var a=o,u=0;u<t;++u)for(var s=e[u],c=0;c<r;++c)for(var l=s[c],f=0;f<n;++f)i[a++]=l[f]}function ae(e,t,r,n,i){for(var o=1,a=r+1;a<t.length;++a)o*=t[a];var u=t[r];if(t.length-r==4){var s=t[r+1],c=t[r+2],l=t[r+3];for(a=0;a<u;++a)oe(e[a],s,c,l,n,i),i+=o}else for(a=0;a<u;++a)ae(e[a],t,r+1,n,i),i+=o}function ue(e,t,r,n){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=n||It.allocType(r,i);switch(t.length){case 0:break;case 1:ne(e,t[0],a);break;case 2:ie(e,t[0],t[1],a);break;case 3:oe(e,t[0],t[1],t[2],a,0);break;default:ae(e,t,0,a,0)}return a}function se(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t}function ce(e){return 0|Je[Object.prototype.toString.call(e)]}function le(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function fe(e,t,r,n,i,o,a){for(var u=0,s=0;s<r;++s)for(var c=0;c<n;++c)e[u++]=t[i*s+o*c+a]}function he(e,t,r){function n(t){this.id=f++,this.buffer=e.createBuffer(),this.type=t,this.usage=kt,this.byteLength=0,this.dimension=1,this.dtype=Qt,this.persistentData=null,r.profile&&(this.stats={size:0})}function i(e,t){var r=p.pop();return r||(r=new n(e)),r.bind(),u(r,t,Pt,0,1,!1),r}function o(e){p.push(e)}function a(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function u(e,t,r,n,i,o){var u;if(e.usage=r,Array.isArray(t)){if(e.dtype=n||Ut,t.length>0){var s;if(Array.isArray(t[0])){u=zt(t);for(var c=1,l=1;l<u.length;++l)c*=u[l];e.dimension=c,a(e,s=Ct(t,u,e.dtype),r),o?e.persistentData=s:It.freeType(s)}else if("number"==typeof t[0]){e.dimension=i;var f=It.allocType(e.dtype,t.length);le(f,t),a(e,f,r),o?e.persistentData=f:It.freeType(f)}else $e(t[0])?(e.dimension=t[0].length,e.dtype=n||ce(t[0])||Ut,s=Ct(t,[t.length,t[0].length],e.dtype),a(e,s,r),o?e.persistentData=s:It.freeType(s)):dt.raise("invalid buffer data")}}else if($e(t))e.dtype=n||ce(t),e.dimension=i,a(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(X(t)){u=t.shape;var h=t.stride,p=t.offset,d=0,g=0,y=0,m=0;1===u.length?(d=u[0],g=1,y=h[0],m=0):2===u.length?(d=u[0],g=u[1],y=h[0],m=h[1]):dt.raise("invalid shape"),e.dtype=n||ce(t.data)||Ut,e.dimension=g;var M=It.allocType(e.dtype,d*g);fe(M,t.data,d,g,y,m,p),a(e,M,r),o?e.persistentData=M:It.freeType(M)}else dt.raise("invalid buffer data")}function s(r){t.bufferCount--;var n=r.buffer;dt(n,"buffer must not be deleted already"),e.deleteBuffer(n),r.buffer=null,delete h[r.id]}function c(i,o,a,c){function l(t){var n=kt,i=null,o=0,a=0,s=1;return Array.isArray(t)||$e(t)||X(t)?i=t:"number"==typeof t?o=0|t:t&&(dt.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(dt(null===i||Array.isArray(i)||$e(i)||X(i),"invalid data for buffer"),i=t.data),"usage"in t&&(dt.parameter(t.usage,St,"invalid buffer usage"),n=St[t.usage]),"type"in t&&(dt.parameter(t.type,_t,"invalid buffer type"),a=_t[t.type]),"dimension"in t&&(dt.type(t.dimension,"number","invalid dimension"),s=0|t.dimension),"length"in t&&(dt.nni(o,"buffer length must be a nonnegative integer"),o=0|t.length)),d.bind(),i?u(d,i,n,a,s,c):(e.bufferData(d.type,o,n),d.dtype=a||Qt,d.usage=n,d.dimension=s,d.byteLength=o),r.profile&&(d.stats.size=d.byteLength*Bt[d.dtype]),l}function f(t,r){dt(r+t.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+r+" to a buffer of size "+d.byteLength),e.bufferSubData(d.type,r,t)}function p(e,t){var r,n=0|(t||0);if(d.bind(),Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=It.allocType(d.dtype,e.length);le(i,e),f(i,n),It.freeType(i)}else if(Array.isArray(e[0])||$e(e[0])){r=zt(e);var o=Ct(e,r,d.dtype);f(o,n),It.freeType(o)}else dt.raise("invalid buffer data")}else if($e(e))f(e,n);else if(X(e)){r=e.shape;var a=e.stride,u=0,s=0,c=0,h=0;1===r.length?(u=r[0],s=1,c=a[0],h=0):2===r.length?(u=r[0],s=r[1],c=a[0],h=a[1]):dt.raise("invalid shape");var p=Array.isArray(e.data)?d.dtype:ce(e.data),g=It.allocType(p,u*s);fe(g,e.data,u,s,c,h,e.offset),f(g,n),It.freeType(g)}else dt.raise("invalid data for buffer subdata");return l}t.bufferCount++;var d=new n(o);return h[d.id]=d,a||l(i),l._reglType="buffer",l._buffer=d,l.subdata=p,r.profile&&(l.stats=d.stats),l.destroy=function(){s(d)},l}function l(){wt(h).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})}var f=0,h={};n.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},n.prototype.destroy=function(){s(this)};var p=[];return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(h).forEach(function(t){e+=h[t].stats.size}),e}),{create:c,createStream:i,destroyStream:o,clear:function(){wt(h).forEach(s),p.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof n?e._buffer:null},restore:l,_initBuffer:u}}function pe(e,t,r,n){function i(e){this.id=f++,l[this.id]=this,this.buffer=e,this.primType=Gt,this.vertCount=0,this.type=0}function o(e){var t=p.pop();return t||(t=new i(r.create(null,Kt,!0,!1)._buffer)),u(t,e,Jt,-1,-1,0,0),t}function a(e){p.push(e)}function u(n,i,o,a,u,s,c){if(n.buffer.bind(),i){var l=c;c||$e(i)&&(!X(i)||$e(i.data))||(l=t.oes_element_index_uint?Zt:qt),r._initBuffer(n.buffer,i,o,l,3)}else e.bufferData(Kt,s,o),n.buffer.dtype=f||Wt,n.buffer.usage=o,n.buffer.dimension=3,n.buffer.byteLength=s;var f=c;if(!c){switch(n.buffer.dtype){case Wt:case Vt:f=Wt;break;case qt:case Ht:f=qt;break;case Zt:case Xt:f=Zt;break;default:dt.raise("unsupported type for element array")}n.buffer.dtype=f}n.type=f,dt(f!==Zt||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=n.buffer.byteLength,f===qt?h>>=1:f===Zt&&(h>>=2)),n.vertCount=h;var p=a;if(a<0){p=Gt;var d=n.buffer.dimension;1===d&&(p=Rt),2===d&&(p=Ft),3===d&&(p=Gt)}n.primType=p}function s(e){n.elementsCount--,dt(null!==e.buffer,"must not double destroy elements"),delete l[e.id],e.buffer.destroy(),e.buffer=null}function c(e,t){function o(e){if(e)if("number"==typeof e)a(e),c.primType=Gt,c.vertCount=0|e,c.type=Wt;else{var t=null,r=$t,n=-1,i=-1,s=0,l=0;Array.isArray(e)||$e(e)||X(e)?t=e:(dt.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,dt(Array.isArray(t)||$e(t)||X(t),"invalid data for element buffer")),"usage"in e&&(dt.parameter(e.usage,St,"invalid element buffer usage"),r=St[e.usage]),"primitive"in e&&(dt.parameter(e.primitive,Yt,"invalid element buffer primitive"),n=Yt[e.primitive]),"count"in e&&(dt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),i=0|e.count),"type"in e&&(dt.parameter(e.type,h,"invalid buffer type"),l=h[e.type]),"length"in e?s=0|e.length:(s=i,l===qt||l===Ht?s*=2:l!==Zt&&l!==Xt||(s*=4))),u(c,t,r,n,i,s,l)}else a(),c.primType=Gt,c.vertCount=0,c.type=Wt;return o}var a=r.create(null,Kt,!0),c=new i(a._buffer);return n.elementsCount++,o(e),o._reglType="elements",o._elements=c,o.subdata=function(e,t){return a.subdata(e,t),o},o.destroy=function(){s(c)},o}var l={},f=0,h={uint8:Wt,uint16:qt};t.oes_element_index_uint&&(h.uint32=Zt),i.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:c,createStream:o,destroyStream:a,getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){wt(l).forEach(s)}}}function de(e){for(var t=It.allocType(rr,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-1/0)t[r]=64512;else{er[0]=e[r];var n=tr[0],i=n>>>31<<15,o=(n<<1>>>24)-127,a=n>>13&1023;if(o<-24)t[r]=i;else if(o<-14){var u=-14-o;t[r]=i+(a+1024>>u)}else t[r]=o>15?i+31744:i+(o+15<<10)+a}return t}function ge(e){return Array.isArray(e)||$e(e)}function ye(e){return"[object "+e+"]"}function me(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Me(e){return!!Array.isArray(e)&&!(0===e.length||!ge(e[0]))}function ve(e){return Object.prototype.toString.call(e)}function be(e){return ve(e)===dn}function we(e){return ve(e)===gn}function xe(e){return ve(e)===yn}function De(e){return ve(e)===mn}function je(e){if(!e)return!1;var t=ve(e);return Mn.indexOf(t)>=0||me(e)||Me(e)||X(e)}function Ne(e){return 0|Je[Object.prototype.toString.call(e)]}function Ae(e,t){var r=t.length;switch(e.type){case kr:case Pr:case Qr:case Ur:var n=It.allocType(e.type,r);n.set(t),e.data=n;break;case Dr:e.data=de(t);break;default:dt.raise("unsupported texture type, must specify a typed array")}}function Le(e,t){return It.allocType(e.type===Dr?Ur:e.type,t)}function Te(e,t){e.type===Dr?(e.data=de(t),It.freeType(t)):e.data=t}function Ee(e,t,r,n,i,o){for(var a=e.width,u=e.height,s=e.channels,c=Le(e,a*u*s),l=0,f=0;f<u;++f)for(var h=0;h<a;++h)for(var p=0;p<s;++p)c[l++]=t[r*h+n*f+i*p+o];Te(e,c)}function Ie(e,t,r,n,i,o){var a;if(a=void 0!==bn[e]?bn[e]:pn[e]*vn[t],o&&(a*=6),i){for(var u=0,s=r;s>=1;)u+=a*s*s,s/=2;return u}return a*r*n}function Oe(e,t,r,n,i,o,a){function u(){this.internalformat=ur,this.format=ur,this.type=kr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function s(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,n){if("object"==typeof n&&n){if("premultiplyAlpha"in n&&(dt.type(n.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(dt.type(n.flipY,"boolean","invalid texture flip"),e.flipY=n.flipY),"alignment"in n&&(dt.oneOf(n.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=n.alignment),"colorSpace"in n&&(dt.parameter(n.colorSpace,Q,"invalid colorSpace"),e.colorSpace=Q[n.colorSpace]),"type"in n){var i=n.type;dt(t.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),dt(t.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),dt(t.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),dt.parameter(i,U,"invalid texture type"),e.type=U[i]}var o=e.width,a=e.height,u=e.channels,s=!1;"shape"in n?(dt(Array.isArray(n.shape)&&n.shape.length>=2,"shape must be an array"),o=n.shape[0],a=n.shape[1],3===n.shape.length&&(u=n.shape[2],dt(u>0&&u<=4,"invalid number of channels"),s=!0),dt(o>=0&&o<=r.maxTextureSize,"invalid width"),dt(a>=0&&a<=r.maxTextureSize,"invalid height")):("radius"in n&&(o=a=n.radius,dt(o>=0&&o<=r.maxTextureSize,"invalid radius")),"width"in n&&(o=n.width,dt(o>=0&&o<=r.maxTextureSize,"invalid width")),"height"in n&&(a=n.height,dt(a>=0&&a<=r.maxTextureSize,"invalid height")),"channels"in n&&(u=n.channels,dt(u>0&&u<=4,"invalid number of channels"),s=!0)),e.width=0|o,e.height=0|a,e.channels=0|u;var c=!1;if("format"in n){var l=n.format;dt(t.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),dt.parameter(l,B,"invalid texture format");var f=e.internalformat=B[l];e.format=Z[f],l in U&&("type"in n||(e.type=U[l])),l in Y&&(e.compressed=!0),c=!0}!s&&c?e.channels=pn[e.format]:s&&!c?e.channels!==hn[e.format]&&(e.format=e.internalformat=hn[e.channels]):c&&s&&dt(e.channels===pn[e.format],"number of channels inconsistent with specified format")}}function l(t){e.pixelStorei(an,t.flipY),e.pixelStorei(un,t.premultiplyAlpha),e.pixelStorei(sn,t.colorSpace),e.pixelStorei(on,t.unpackAlignment)}function f(){u.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(e,t){var n=null;if(je(t)?n=t:t&&(dt.type(t,"object","invalid pixel data type"),c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),je(t.data)&&(n=t.data)),dt(!e.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){dt(!n,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,dt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=o&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(n){if($e(n))e.channels=e.channels||4,e.data=n,"type"in t||e.type!==kr||(e.type=Ne(n));else if(me(n))e.channels=e.channels||4,Ae(e,n),e.alignment=1,e.needsFree=!0;else if(X(n)){var u=n.data;Array.isArray(u)||e.type!==kr||(e.type=Ne(u));var s,l,f,h,p,d,g=n.shape,y=n.stride;3===g.length?(f=g[2],d=y[2]):(dt(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),s=g[0],l=g[1],h=y[0],p=y[1],e.alignment=1,e.width=s,e.height=l,e.channels=f,e.format=e.internalformat=hn[f],e.needsFree=!0,Ee(e,u,h,p,d,n.offset)}else if(be(n)||we(n))be(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(xe(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(De(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(Me(n)){var m=e.width||n[0].length,M=e.height||n.length,v=e.channels;v=ge(n[0][0])?v||n[0][0].length:v||1;for(var b=Ot.shape(n),w=1,x=0;x<b.length;++x)w*=b[x];var D=Le(e,w);Ot.flatten(n,b,"",D),Te(e,D),e.alignment=1,e.width=m,e.height=M,e.channels=v,e.format=e.internalformat=hn[v],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Ur?dt(r.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Dr&&dt(r.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(t,r,i){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,h=t.height;l(t),o?e.texImage2D(r,i,s,s,c,o):t.compressed?e.compressedTexImage2D(r,i,u,f,h,0,a):t.needsCopy?(n(),e.copyTexImage2D(r,i,s,t.xOffset,t.yOffset,f,h,0)):e.texImage2D(r,i,s,f,h,0,s,c,a)}function d(t,r,i,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,h=t.type,p=t.width,d=t.height;l(t),u?e.texSubImage2D(r,a,i,o,f,h,u):t.compressed?e.compressedTexSubImage2D(r,a,i,o,c,p,d,s):t.needsCopy?(n(),e.copyTexSubImage2D(r,a,i,o,t.xOffset,t.yOffset,p,d)):e.texSubImage2D(r,a,i,o,p,d,f,h,s)}function g(){return K.pop()||new f}function y(e){e.needsFree&&It.freeType(e.data),f.call(e),K.push(e)}function m(){u.call(this),this.genMipmaps=!1,this.mipmapHint=en,this.mipmask=0,this.images=Array(16)}function M(e,t,r){var n=e.images[0]=g();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function v(e,t){var r=null;if(je(t))r=e.images[0]=g(),s(r,e),h(r,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,i=0;i<n.length;++i)r=e.images[i]=g(),s(r,e),r.width>>=i,r.height>>=i,h(r,n[i]),e.mipmask|=1<<i;else r=e.images[0]=g(),s(r,e),h(r,t),e.mipmask=1;s(e,e.images[0]),(e.compressed&&e.internalformat===jr||e.internalformat===Nr||e.internalformat===Ar||e.internalformat===Lr)&&dt(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function b(e,t){for(var r=e.images,n=0;n<r.length;++n){if(!r[n])return;p(r[n],t,n)}}function w(){var e=J.pop()||new m;u.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function x(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&y(t[r]),t[r]=null;J.push(e)}function D(){this.minFilter=Hr,this.magFilter=Hr,this.wrapS=Fr,this.wrapT=Fr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=en}function j(e,t){if("min"in t){var n=t.min;dt.parameter(n,P),e.minFilter=P[n],fn.indexOf(e.minFilter)>=0&&(e.genMipmaps=!0)}if("mag"in t){var i=t.mag;dt.parameter(i,k),e.magFilter=k[i]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var u=t.wrap;"string"==typeof u?(dt.parameter(u,z),o=a=z[u]):Array.isArray(u)&&(dt.parameter(u[0],z),dt.parameter(u[1],z),o=z[u[0]],a=z[u[1]])}else{if("wrapS"in t){var s=t.wrapS;dt.parameter(s,z),o=z[s]}if("wrapT"in t){var c=t.wrapT;dt.parameter(c,z),a=z[c]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var l=t.anisotropic;dt("number"==typeof l&&l>=1&&l<=r.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var f=!1;switch(typeof t.mipmap){case"string":dt.parameter(t.mipmap,C,"invalid mipmap hint"),e.mipmapHint=C[t.mipmap],e.genMipmaps=!0,f=!0;break;case"boolean":f=e.genMipmaps=t.mipmap;break;case"object":dt(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,f=!0;break;default:dt.raise("invalid mipmap type")}!f||"min"in t||(e.minFilter=Xr)}}function N(r,n){e.texParameteri(n,Wr,r.minFilter),e.texParameteri(n,Vr,r.magFilter),e.texParameteri(n,Br,r.wrapS),e.texParameteri(n,Yr,r.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(n,nn,r.anisotropic),r.genMipmaps&&(e.hint($r,r.mipmapHint),e.generateMipmap(n))}function A(t){u.call(this),this.mipmask=0,this.internalformat=ur,this.id=$++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new D,a.profile&&(this.stats={size:0})}function L(t){e.activeTexture(ln),e.bindTexture(t.target,t.texture)}function T(){var t=re[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(ir,null)}function E(t){var r=t.texture;dt(r,"must not double destroy texture");var n=t.unit,i=t.target;n>=0&&(e.activeTexture(ln+n),e.bindTexture(i,null),re[n]=null),e.deleteTexture(r),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ee[t.id],o.textureCount--}function I(t,n){function i(e,t){var n=l.texInfo;D.call(n);var o=w();return"number"==typeof e?"number"==typeof t?M(o,0|e,0|t):M(o,0|e,0|e):e?(dt.type(e,"object","invalid arguments to regl.texture"),j(n,e),v(o,e)):M(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),l.mipmask=o.mipmask,s(l,o),dt.texture2D(n,o,r),l.internalformat=o.internalformat,i.width=o.width,i.height=o.height,L(l),b(o,ir),N(n,ir),T(),x(o),a.profile&&(l.stats.size=Ie(l.internalformat,l.type,o.width,o.height,n.genMipmaps,!1)),i.format=G[l.internalformat],i.type=V[l.type],i.mag=W[n.magFilter],i.min=H[n.minFilter],i.wrapS=q[n.wrapS],i.wrapT=q[n.wrapT],i}function u(e,t,r,n){dt(!!e,"must specify image data");var o=0|t,a=0|r,u=0|n,c=g();return s(c,l),c.width=0,c.height=0,h(c,e),c.width=c.width||(l.width>>u)-o,c.height=c.height||(l.height>>u)-a,dt(l.type===c.type&&l.format===c.format&&l.internalformat===c.internalformat,"incompatible format for texture.subimage"),dt(o>=0&&a>=0&&o+c.width<=l.width&&a+c.height<=l.height,"texture.subimage write out of bounds"),dt(l.mipmask&1<<u,"missing mipmap data"),dt(c.data||c.element||c.needsCopy,"missing image data"),L(l),d(c,ir,o,a,u),T(),y(c),i}function c(t,r){var n=0|t,o=0|r||n;if(n===l.width&&o===l.height)return i;i.width=l.width=n,i.height=l.height=o,L(l);for(var u=0;l.mipmask>>u;++u)e.texImage2D(ir,u,l.format,n>>u,o>>u,0,l.format,l.type,null);return T(),a.profile&&(l.stats.size=Ie(l.internalformat,l.type,n,o,!1,!1)),i}var l=new A(ir);return ee[l.id]=l,o.textureCount++,i(t,n),i.subimage=u,i.resize=c,i._reglType="texture2d",i._texture=l,a.profile&&(i.stats=l.stats),i.destroy=function(){l.decRef()},i}function O(t,n,i,u,l,f){function p(e,t,n,i,o,u){var l,f=I.texInfo;for(D.call(f),l=0;l<6;++l)O[l]=w();if("number"!=typeof e&&e)if("object"==typeof e)if(t)v(O[0],e),v(O[1],t),v(O[2],n),v(O[3],i),v(O[4],o),v(O[5],u);else if(j(f,e),c(I,e),"faces"in e){var h=e.faces;for(dt(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),l=0;l<6;++l)dt("object"==typeof h[l]&&!!h[l],"invalid input for cube map face"),s(O[l],I),v(O[l],h[l])}else for(l=0;l<6;++l)v(O[l],e);else dt.raise("invalid arguments to cube map");else{var d=0|e||1;for(l=0;l<6;++l)M(O[l],d,d)}for(s(I,O[0]),f.genMipmaps?I.mipmask=(O[0].width<<1)-1:I.mipmask=O[0].mipmask,dt.textureCube(I,f,O,r),I.internalformat=O[0].internalformat,p.width=O[0].width,p.height=O[0].height,L(I),l=0;l<6;++l)b(O[l],ar+l);for(N(f,or),T(),a.profile&&(I.stats.size=Ie(I.internalformat,I.type,p.width,p.height,f.genMipmaps,!0)),p.format=G[I.internalformat],p.type=V[I.type],p.mag=W[f.magFilter],p.min=H[f.minFilter],p.wrapS=q[f.wrapS],p.wrapT=q[f.wrapT],l=0;l<6;++l)x(O[l]);return p}function m(e,t,r,n,i){dt(!!t,"must specify image data"),dt("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|r,a=0|n,u=0|i,c=g();return s(c,I),c.width=0,c.height=0,h(c,t),c.width=c.width||(I.width>>u)-o,c.height=c.height||(I.height>>u)-a,dt(I.type===c.type&&I.format===c.format&&I.internalformat===c.internalformat,"incompatible format for texture.subimage"),dt(o>=0&&a>=0&&o+c.width<=I.width&&a+c.height<=I.height,"texture.subimage write out of bounds"),dt(I.mipmask&1<<u,"missing mipmap data"),dt(c.data||c.element||c.needsCopy,"missing image data"),L(I),d(c,ar+e,o,a,u),T(),y(c),p}function E(t){var r=0|t;if(r!==I.width){p.width=I.width=r,p.height=I.height=r,L(I);for(var n=0;n<6;++n)for(var i=0;I.mipmask>>i;++i)e.texImage2D(ar+n,i,I.format,r>>i,r>>i,0,I.format,I.type,null);return T(),a.profile&&(I.stats.size=Ie(I.internalformat,I.type,p.width,p.height,!1,!0)),p}}var I=new A(or);ee[I.id]=I,o.cubeCount++;var O=new Array(6);return p(t,n,i,u,l,f),p.subimage=m,p.resize=E,p._reglType="textureCube",p._texture=I,a.profile&&(p.stats=I.stats),p.destroy=function(){I.decRef()},p}function _(){for(var t=0;t<te;++t)e.activeTexture(ln+t),e.bindTexture(ir,null),re[t]=null;wt(ee).forEach(E),o.cubeCount=0,o.textureCount=0}function S(){wt(ee).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var r=0;r<32;++r)if(0!=(t.mipmask&1<<r))if(t.target===ir)e.texImage2D(ir,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;n<6;++n)e.texImage2D(ar+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);N(t.texInfo,t.target)})}var C={"don't care":en,"dont care":en,nice:rn,fast:tn},z={repeat:Rr,clamp:Fr,mirror:Gr},k={nearest:Hr,linear:qr},P=et({mipmap:Jr,"nearest mipmap nearest":Xr,"linear mipmap nearest":Zr,"nearest mipmap linear":Kr,"linear mipmap linear":Jr},k),Q={none:0,browser:cn},U={uint8:kr,rgba4:gr,rgb565:mr,"rgb5 a1":yr},B={alpha:sr,luminance:lr,"luminance alpha":fr,rgb:cr,rgba:ur,rgba4:hr,"rgb5 a1":pr,rgb565:dr},Y={};t.ext_srgb&&(B.srgb=wr,B.srgba=xr),t.oes_texture_float&&(U.float32=U.float=Ur),t.oes_texture_half_float&&(U.float16=U["half float"]=Dr),t.webgl_depth_texture&&(et(B,{depth:vr,"depth stencil":br}),et(U,{uint16:Pr,uint32:Qr,"depth stencil":Mr})),t.webgl_compressed_texture_s3tc&&et(Y,{"rgb s3tc dxt1":jr,"rgba s3tc dxt1":Nr,"rgba s3tc dxt3":Ar,"rgba s3tc dxt5":Lr}),t.webgl_compressed_texture_atc&&et(Y,{"rgb atc":Tr,"rgba atc explicit alpha":Er,"rgba atc interpolated alpha":Ir}),t.webgl_compressed_texture_pvrtc&&et(Y,{"rgb pvrtc 4bppv1":Or,"rgb pvrtc 2bppv1":_r,"rgba pvrtc 4bppv1":Sr,"rgba pvrtc 2bppv1":Cr}),t.webgl_compressed_texture_etc1&&(Y["rgb etc1"]=zr);var R=Array.prototype.slice.call(e.getParameter(nr));Object.keys(Y).forEach(function(e){var t=Y[e];R.indexOf(t)>=0&&(B[e]=t)});var F=Object.keys(B);r.textureFormats=F;var G=[];Object.keys(B).forEach(function(e){var t=B[e];G[t]=e});var V=[];Object.keys(U).forEach(function(e){var t=U[e];V[t]=e});var W=[];Object.keys(k).forEach(function(e){var t=k[e];W[t]=e});var H=[];Object.keys(P).forEach(function(e){var t=P[e];H[t]=e});var q=[];Object.keys(z).forEach(function(e){var t=z[e];q[t]=e});var Z=F.reduce(function(e,t){var r=B[t];return r===lr||r===sr||r===lr||r===fr||r===vr||r===br?e[r]=r:r===pr||t.indexOf("rgba")>=0?e[r]=ur:e[r]=cr,e},{}),K=[],J=[],$=0,ee={},te=r.maxTextureUnits,re=Array(te).map(function(){return null});return et(A.prototype,{bind:function(){var t=this;t.bindCount+=1;var r=t.unit;if(r<0){for(var n=0;n<te;++n){var i=re[n];if(i){if(i.bindCount>0)continue;i.unit=-1}re[n]=t,r=n;break}r>=te&&dt.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<r+1&&(o.maxTextureUnits=r+1),t.unit=r,e.activeTexture(ln+r),e.bindTexture(t.target,t.texture)}return r},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&E(this)}}),a.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(ee).forEach(function(t){e+=ee[t].stats.size}),e}),{create2D:I,createCube:O,clear:_,getTexture:function(e){return null},restore:S}}function _e(e,t,r){return Dn[e]*t*r}function Se(e,t,r,n,i,o){function a(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,i=0;t?(n=t.width,i=t.height):r&&(n=r.width,i=r.height),this.width=n,this.height=i}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function s(e,t,r){if(e)if(e.texture){var n=e.texture._texture,i=Math.max(1,n.width),o=Math.max(1,n.height);dt(i===t&&o===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var a=e.renderbuffer._renderbuffer;dt(a.width===t&&a.height===r,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function c(t,r){r&&(r.texture?e.framebufferTexture2D(Nn,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(Nn,t,An,r.renderbuffer._renderbuffer.renderbuffer))}function l(e){var t=Ln,r=null,n=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),dt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(r=i,dt(t===Ln)):"textureCube"===o?(r=i,dt(t>=Tn&&t<Tn+6,"invalid cube map target")):"renderbuffer"===o?(n=i,t=An):dt.raise("invalid regl object for attachment"),new a(t,r,n)}function f(e,t,r,o,u){if(r){var s=n.create2D({width:e,height:t,format:o,type:u});return s._texture.refCount=0,new a(Ln,s,null)}var c=i.create({width:e,height:t,format:o});return c._renderbuffer.refCount=0,new a(An,null,c)}function h(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r))}function d(){this.id=N++,A[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function g(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function y(t){var r=t.framebuffer;dt(r,"must not double destroy framebuffer"),e.deleteFramebuffer(r),t.framebuffer=null,o.framebufferCount--,delete A[t.id]}function m(t){var n;e.bindFramebuffer(Nn,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)c(En+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(Nn,En+n,Ln,null,0);e.framebufferTexture2D(Nn,_n,Ln,null,0),e.framebufferTexture2D(Nn,In,Ln,null,0),e.framebufferTexture2D(Nn,On,Ln,null,0),c(In,t.depthAttachment),c(On,t.stencilAttachment),c(_n,t.depthStencilAttachment);var o=e.checkFramebufferStatus(Nn);o!==Sn&&dt.raise("framebuffer configuration not supported, status = "+Rn[o]),e.bindFramebuffer(Nn,w.next),w.cur=w.next,e.getError()}function M(e,n){function i(e,n){var o;dt(w.next!==u,"can not update framebuffer which is currently in use");var a=t.webgl_draw_buffers,c=0,p=0,d=!0,y=!0,M=null,v=!0,b="rgba",N="uint8",A=1,L=null,T=null,E=null,I=!1;if("number"==typeof e)c=0|e,p=0|n||c;else if(e){dt.type(e,"object","invalid arguments for framebuffer");var O=e;if("shape"in O){var _=O.shape;dt(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),c=_[0],p=_[1]}else"radius"in O&&(c=p=O.radius),"width"in O&&(c=O.width),"height"in O&&(p=O.height);("color"in O||"colors"in O)&&(M=O.color||O.colors,Array.isArray(M)&&dt(1===M.length||a,"multiple render targets not supported")),M||("colorCount"in O&&(A=0|O.colorCount,dt(A>0,"invalid color buffer count")),"colorTexture"in O&&(v=!!O.colorTexture,b="rgba4"),"colorType"in O&&(N=O.colorType,v?(dt(t.oes_texture_float||!("float"===N||"float32"===N),"you must enable OES_texture_float in order to use floating point framebuffer objects"),dt(t.oes_texture_half_float||!("half float"===N||"float16"===N),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===N||"float16"===N?(dt(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),b="rgba16f"):"float"!==N&&"float32"!==N||(dt(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),b="rgba32f"),dt.oneOf(N,j,"invalid color type")),"colorFormat"in O&&(b=O.colorFormat,x.indexOf(b)>=0?v=!0:D.indexOf(b)>=0?v=!1:v?dt.oneOf(O.colorFormat,x,"invalid color format for texture"):dt.oneOf(O.colorFormat,D,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(I=!(!O.depthTexture&&!O.depthStencilTexture),dt(!I||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"==typeof O.depth?d=O.depth:(L=O.depth,y=!1)),"stencil"in O&&("boolean"==typeof O.stencil?y=O.stencil:(T=O.stencil,d=!1)),"depthStencil"in O&&("boolean"==typeof O.depthStencil?d=y=O.depthStencil:(E=O.depthStencil,d=!1,y=!1))}else c=p=1;var S=null,C=null,z=null,k=null;if(Array.isArray(M))S=M.map(l);else if(M)S=[l(M)];else for(S=new Array(A),o=0;o<A;++o)S[o]=f(c,p,v,b,N);dt(t.webgl_draw_buffers||S.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),dt(S.length<=r.maxColorAttachments,"too many color attachments, not supported"),c=c||S[0].width,p=p||S[0].height,L?C=l(L):d&&!y&&(C=f(c,p,I,"depth","uint32")),T?z=l(T):y&&!d&&(z=f(c,p,!1,"stencil","uint8")),E?k=l(E):!L&&!T&&y&&d&&(k=f(c,p,I,"depth stencil","depth stencil")),dt(!!L+!!T+!!E<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var P=null;for(o=0;o<S.length;++o)if(s(S[o],c,p),dt(!S[o]||S[o].texture&&zn.indexOf(S[o].texture._texture.format)>=0||S[o].renderbuffer&&Yn.indexOf(S[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),S[o]&&S[o].texture){var Q=kn[S[o].texture._texture.format]*Pn[S[o].texture._texture.type];null===P?P=Q:dt(P===Q,"all color attachments much have the same number of bits per pixel.")}return s(C,c,p),dt(!C||C.texture&&C.texture._texture.format===Cn||C.renderbuffer&&C.renderbuffer._renderbuffer.format===Qn,"invalid depth attachment for framebuffer object"),s(z,c,p),dt(!z||z.renderbuffer&&z.renderbuffer._renderbuffer.format===Un,"invalid stencil attachment for framebuffer object"),s(k,c,p),dt(!k||k.texture&&k.texture._texture.format===Bn||k.renderbuffer&&k.renderbuffer._renderbuffer.format===Bn,"invalid depth-stencil attachment for framebuffer object"),g(u),u.width=c,u.height=p,u.colorAttachments=S,u.depthAttachment=C,u.stencilAttachment=z,u.depthStencilAttachment=k,i.color=S.map(h),i.depth=h(C),i.stencil=h(z),i.depthStencil=h(k),i.width=u.width,i.height=u.height,m(u),i}function a(e,t){dt(w.next!==u,"can not resize a framebuffer which is currently in use");var r=0|e,n=0|t||r;if(r===u.width&&n===u.height)return i;for(var o=u.colorAttachments,a=0;a<o.length;++a)p(o[a],r,n);return p(u.depthAttachment,r,n),p(u.stencilAttachment,r,n),p(u.depthStencilAttachment,r,n),u.width=i.width=r,u.height=i.height=n,m(u),i}var u=new d;return o.framebufferCount++,i(e,n),et(i,{resize:a,_reglType:"framebuffer",_framebuffer:u,destroy:function(){y(u),g(u)},use:function(e){w.setFBO({framebuffer:i},e)}})}function v(e){function i(e){var r;dt(a.indexOf(w.next)<0,"can not update framebuffer which is currently in use");var o=t.webgl_draw_buffers,u={color:null},s=0,c=null,l="rgba",f="uint8",h=1;if("number"==typeof e)s=0|e;else if(e){dt.type(e,"object","invalid arguments for framebuffer");var p=e;if("shape"in p){var d=p.shape;dt(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),dt(d[0]===d[1],"cube framebuffer must be square"),s=d[0]}else"radius"in p&&(s=0|p.radius),"width"in p?(s=0|p.width,"height"in p&&dt(p.height===s,"must be square")):"height"in p&&(s=0|p.height);("color"in p||"colors"in p)&&(c=p.color||p.colors,Array.isArray(c)&&dt(1===c.length||o,"multiple render targets not supported")),c||("colorCount"in p&&(h=0|p.colorCount,dt(h>0,"invalid color buffer count")),"colorType"in p&&(dt.oneOf(p.colorType,j,"invalid color type"),f=p.colorType),"colorFormat"in p&&(l=p.colorFormat,dt.oneOf(p.colorFormat,x,"invalid color format for texture"))),"depth"in p&&(u.depth=p.depth),"stencil"in p&&(u.stencil=p.stencil),"depthStencil"in p&&(u.depthStencil=p.depthStencil)}else s=1;var g;if(c)if(Array.isArray(c))for(g=[],r=0;r<c.length;++r)g[r]=c[r];else g=[c];else{g=Array(h);var y={radius:s,format:l,type:f};for(r=0;r<h;++r)g[r]=n.createCube(y)}for(u.color=Array(g.length),r=0;r<g.length;++r){var m=g[r];dt("function"==typeof m&&"textureCube"===m._reglType,"invalid cube map"),s=s||m.width,dt(m.width===s&&m.height===s,"invalid cube map shape"),u.color[r]={target:Tn,data:g[r]}}for(r=0;r<6;++r){for(var v=0;v<g.length;++v)u.color[v].target=Tn+r;r>0&&(u.depth=a[0].depth,u.stencil=a[0].stencil,u.depthStencil=a[0].depthStencil),a[r]?a[r](u):a[r]=M(u)}return et(i,{width:s,height:s,color:g})}function o(e){var t,n=0|e;if(dt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===i.width)return i;var o=i.color;for(t=0;t<o.length;++t)o[t].resize(n);for(t=0;t<6;++t)a[t].resize(n);return i.width=i.height=n,i}var a=Array(6);return i(e),et(i,{faces:a,resize:o,_reglType:"framebufferCube",destroy:function(){a.forEach(function(e){e.destroy()})}})}function b(){wt(A).forEach(function(t){t.framebuffer=e.createFramebuffer(),m(t)})}var w={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],D=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&D.push("srgba"),t.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&D.push("rgba32f");var j=["uint8"];t.oes_texture_half_float&&j.push("half float","float16"),t.oes_texture_float&&j.push("float","float32");var N=0,A={};return et(w,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof d)return t}return null},create:M,createCube:v,clear:function(){wt(A).forEach(y)},restore:b})}function Ce(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Fn,this.offset=0,this.stride=0,this.divisor=0}function ze(e,t,r,n,i){for(var o=r.maxAttributes,a=new Array(o),u=0;u<o;++u)a[u]=new Ce;return{Record:Ce,scope:{},state:a}}function ke(e,t,r,n){function i(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function o(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t)}function a(r,n,i){var o=r===Gn?l:f,a=o[n];if(!a){var u=t.str(n);a=e.createShader(r),e.shaderSource(a,u),e.compileShader(a),dt.shaderError(e,a,u,r,i),o[n]=a}return a}function u(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(r,u){var s,c,l=a(Gn,r.fragId),f=a(Vn,r.vertId),h=r.program=e.createProgram();e.attachShader(h,l),e.attachShader(h,f),e.linkProgram(h),dt.linkError(e,h,t.str(r.fragId),t.str(r.vertId),u);var p=e.getProgramParameter(h,Wn);n.profile&&(r.stats.uniformsCount=p);var d=r.uniforms;for(s=0;s<p;++s)if(c=e.getActiveUniform(h,s))if(c.size>1)for(var g=0;g<c.size;++g){var y=c.name.replace("[0]","["+g+"]");o(d,new i(y,t.id(y),e.getUniformLocation(h,y),c))}else o(d,new i(c.name,t.id(c.name),e.getUniformLocation(h,c.name),c));var m=e.getProgramParameter(h,Hn);n.profile&&(r.stats.attributesCount=m);var M=r.attributes;for(s=0;s<m;++s)(c=e.getActiveAttrib(h,s))&&o(M,new i(c.name,t.id(c.name),e.getAttribLocation(h,c.name),c))}function c(){l={},f={};for(var e=0;e<p.length;++e)s(p[e])}var l={},f={},h={},p=[],d=0;return n.profile&&(r.getMaxUniformsCount=function(){var e=0;return p.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},r.getMaxAttributesCount=function(){var e=0;return p.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);wt(l).forEach(t),l={},wt(f).forEach(t),f={},p.forEach(function(t){e.deleteProgram(t.program)}),p.length=0,h={},r.shaderCount=0},program:function(e,t,n){dt.command(e>=0,"missing vertex shader",n),dt.command(t>=0,"missing fragment shader",n);var i=h[t];i||(i=h[t]={});var o=i[e];return o||(o=new u(t,e),r.shaderCount++,s(o,n),i[e]=o,p.push(o)),o},restore:c,shader:a,frag:-1,vert:-1}}function Pe(e,t,r,n,i,o){function a(a){var u;null===t.next?(dt(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Xn):(dt(null!==t.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=t.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?dt(u===Xn||u===Kn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):dt(u===Xn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var s=0,c=0,l=n.framebufferWidth,f=n.framebufferHeight,h=null;$e(a)?h=a:a&&(dt.type(a,"object","invalid arguments to regl.read()"),s=0|a.x,c=0|a.y,dt(s>=0&&s<n.framebufferWidth,"invalid x offset for regl.read"),dt(c>=0&&c<n.framebufferHeight,"invalid y offset for regl.read"),l=0|(a.width||n.framebufferWidth-s),f=0|(a.height||n.framebufferHeight-c),h=a.data||null),h&&(u===Xn?dt(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Kn&&dt(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),dt(l>0&&l+s<=n.framebufferWidth,"invalid width for read pixels"),dt(f>0&&f+c<=n.framebufferHeight,"invalid height for read pixels"),r();var p=l*f*4;return h||(u===Xn?h=new Uint8Array(p):u===Kn&&(h=h||new Float32Array(p))),dt.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),dt(h.byteLength>=p,"data buffer for regl.read() too small"),e.pixelStorei(Zn,4),e.readPixels(s,c,l,f,qn,u,h),h}function u(e){var r;return t.setFBO({framebuffer:e.framebuffer},function(){r=a(e)}),r}function s(e){return e&&"framebuffer"in e?u(e):a(e)}return s}function Qe(e,t,r,n){function i(){var t=new a(e);return l[t.id]=t,r.vaoCount=c,t}function o(){wt(l).forEach(function(e){e&&"function"==typeof e.destroy&&e.destroy()})}function a(e){this.id=-1,this.handle=null,u&&(this.handle=u.createVertexArrayOES(),this.handle&&(this.id=c++)),this.bind=function(){u&&this.handle&&s!==this&&(u.bindVertexArrayOES(this.handle),s=this)},this.unbind=function(){u&&s&&(u.bindVertexArrayOES(null),s=null)},this.destroy=function(){u&&this.handle&&(u.deleteVertexArrayOES(this.handle),c=Math.max(0,c-1),r.vaoCount=c,this.id=-1,this.handle=null)}}var u=t.oes_vertex_array_object,s=null,c=0,l={};return{hasSupport:Boolean(u),create:i,clear:o}}function Ue(e){return Array.prototype.slice.call(e)}function Be(e){return Ue(e).join("")}function Ye(){function e(e){for(var t=0;t<s.length;++t)if(s[t]===e)return u[t];var r="g"+a++;return u.push(r),s.push(e),r}function t(){function e(){r.push.apply(r,Ue(arguments))}function t(){var e="v"+a++;return n.push(e),arguments.length>0&&(r.push(e,"="),r.push.apply(r,Ue(arguments)),r.push(";")),e}var r=[],n=[];return et(e,{def:t,toString:function(){return Be([n.length>0?"var "+n+";":"",Be(r)])}})}function r(){function e(e,t){n(e,t,"=",r.def(e,t),";")}var r=t(),n=t(),i=r.toString,o=n.toString;return et(function(){r.apply(r,Ue(arguments))},{def:r.def,entry:r,exit:n,save:e,set:function(t,n,i){e(t,n),r(t,n,"=",i,";")},toString:function(){return i()+o()}})}function n(){var e=Be(arguments),t=r(),n=r(),i=t.toString,o=n.toString;return et(t,{then:function(){return t.apply(t,Ue(arguments)),this},else:function(){return n.apply(n,Ue(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Be(["if(",e,"){",i(),"}",t])}})}function i(e,t){function n(){var e="a"+i.length;return i.push(e),e}var i=[];t=t||0;for(var o=0;o<t;++o)n();var a=r(),u=a.toString;return l[e]=et(a,{arg:n,toString:function(){return Be(["function(",i.join(),"){",u(),"}"])}})}function o(){var e=['"use strict";',c,"return {"];Object.keys(l).forEach(function(t){e.push('"',t,'":',l[t].toString(),",")}),e.push("}");var t=Be(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,u.concat(t)).apply(null,s)}var a=0,u=[],s=[],c=t(),l={};return{global:c,link:e,block:t,proc:i,scope:r,cond:n,compile:o}}function Re(e){return Array.isArray(e)||$e(e)||X(e)}function Fe(e){return e.sort(function(e,t){return e===Si?-1:t===Si?1:e<t?-1:1})}function Ge(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function Ve(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function We(e){return new Ge(!1,!1,!1,e)}function He(e,t){var r=e.type;if(r===ri){var n=e.data.length;return new Ge(!0,n>=1,n>=2,t)}if(r===ai){var i=e.data;return new Ge(i.thisDep,i.contextDep,i.propDep,t)}return new Ge(r===oi,r===ii,r===ni,t)}function qe(e,t,r,n,i,o,a,u,s,c,l,f,h,p,d,g){function y(e){return e.replace(".","_")}function m(e,t,r){var n=y(e);re.push(e),te[n]=ee[n]=!!r,ne[n]=t}function M(e,t,r){var n=y(e);re.push(e),Array.isArray(r)?(ee[n]=r.slice(),te[n]=r.slice()):ee[n]=te[n]=r,ie[n]=t}function v(){var e=Ye(),r=e.link,n=e.global;e.id=ue++,e.batchId="0";var i=r(oe),o=e.shared={props:"a0"};Object.keys(oe).forEach(function(e){o[e]=n.def(i,".",e)}),dt.optional(function(){e.CHECK=r(dt),e.commandStr=dt.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},ae.invalidBlendCombinations=Fo});var a=e.next={},u=e.current={};Object.keys(ie).forEach(function(e){Array.isArray(ee[e])&&(a[e]=n.def(o.next,".",e),u[e]=n.def(o.current,".",e))});var s=e.constants={};Object.keys(ae).forEach(function(e){s[e]=n.def(JSON.stringify(ae[e]))}),e.invoke=function(t,n){switch(n.type){case ri:var i=["this",o.context,o.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case ni:return t.def(o.props,n.data);case ii:return t.def(o.context,n.data);case oi:return t.def("this",n.data);case ai:return n.data.append(e,t),n.data.ref}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var n=t.id(e);if(n in c)return c[n];var i=l.scope[n];return i||(i=l.scope[n]=new X),c[n]=r(i)},e}function b(e){var t,r=e.static,n=e.dynamic;if(Ci in r){var i=!!r[Ci];(t=We(function(e,t){return i})).enable=i}else if(Ci in n){var o=n[Ci];t=He(o,function(e,t){return e.invoke(t,o)})}return t}function w(e,t){var r=e.static,n=e.dynamic;if(zi in r){var i=r[zi];return i?(i=s.getFramebuffer(i),dt.command(i,"invalid framebuffer object"),We(function(e,t){var r=e.link(i),n=e.shared;t.set(n.framebuffer,".next",r);var o=n.context;return t.set(o,"."+Fi,r+".width"),t.set(o,"."+Gi,r+".height"),r})):We(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+Fi,n+"."+Hi),t.set(n,"."+Gi,n+"."+qi),"null"})}if(zi in n){var o=n[zi];return He(o,function(e,t){var r=e.invoke(t,o),n=e.shared,i=n.framebuffer,a=t.def(i,".getFramebuffer(",r,")");dt.optional(function(){e.assert(t,"!"+r+"||"+a,"invalid framebuffer object")}),t.set(i,".next",a);var u=n.context;return t.set(u,"."+Fi,a+"?"+a+".width:"+u+"."+Hi),t.set(u,"."+Gi,a+"?"+a+".height:"+u+"."+qi),a})}return null}function x(e,t,r){function n(e){if(e in i){var n=i[e];dt.commandType(n,"object","invalid "+e,r.commandStr);var a,u,s=!0,c=0|n.x,l=0|n.y;return"width"in n?(a=0|n.width,dt.command(a>=0,"invalid "+e,r.commandStr)):s=!1,"height"in n?(u=0|n.height,dt.command(u>=0,"invalid "+e,r.commandStr)):s=!1,new Ge(!s&&t&&t.thisDep,!s&&t&&t.contextDep,!s&&t&&t.propDep,function(e,t){var r=e.shared.context,i=a;"width"in n||(i=t.def(r,".",Fi,"-",c));var o=u;return"height"in n||(o=t.def(r,".",Gi,"-",l)),[c,l,i,o]})}if(e in o){var f=o[e],h=He(f,function(t,r){var n=t.invoke(r,f);dt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)});var i=t.shared.context,o=r.def(n,".x|0"),a=r.def(n,".y|0"),u=r.def('"width" in ',n,"?",n,".width|0:","(",i,".",Fi,"-",o,")"),s=r.def('"height" in ',n,"?",n,".height|0:","(",i,".",Gi,"-",a,")");return dt.optional(function(){t.assert(r,u+">=0&&"+s+">=0","invalid "+e)}),[o,a,u,s]});return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new Ge(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",Fi),t.def(r,".",Gi)]}):null}var i=e.static,o=e.dynamic,a=n(Si);if(a){var u=a;a=new Ge(a.thisDep,a.contextDep,a.propDep,function(e,t){var r=u.append(e,t),n=e.shared.context;return t.set(n,"."+Vi,r[2]),t.set(n,"."+Wi,r[3]),r})}return{viewport:a,scissor_box:n(_i)}}function D(e){function r(e){if(e in i){var r=t.id(i[e]);dt.optional(function(){f.shader(Wo[e],r,dt.guessCommand())});var n=We(function(){return r});return n.id=r,n}if(e in o){var a=o[e];return He(a,function(t,r){var n=t.invoke(r,a),i=r.def(t.shared.strings,".id(",n,")");return dt.optional(function(){r(t.shared.shader,".shader(",Wo[e],",",i,",",t.command,");")}),i})}return null}var n,i=e.static,o=e.dynamic,a=r(Pi),u=r(ki),s=null;return Ve(a)&&Ve(u)?(s=f.program(u.id,a.id),n=We(function(e,t){return e.link(s)})):n=new Ge(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(e,t){var r,n=e.shared.shader;r=a?a.append(e,t):t.def(n,".",Pi);var i,o=n+".program("+(i=u?u.append(e,t):t.def(n,".",ki))+","+r;return dt.optional(function(){o+=","+e.command}),t.def(o+")")}),{frag:a,vert:u,progVar:n,program:s}}function j(e,t){function r(e,r){if(e in n){var a=0|n[e];return dt.command(!r||a>=0,"invalid "+e,t.commandStr),We(function(e,t){return r&&(e.OFFSET=a),a})}if(e in i){var u=i[e];return He(u,function(t,n){var i=t.invoke(n,u);return r&&(t.OFFSET=i,dt.optional(function(){t.assert(n,i+">=0","invalid "+e)})),i})}return r&&o?We(function(e,t){return e.OFFSET="0",0}):null}var n=e.static,i=e.dynamic,o=function(){if(Qi in n){var e=n[Qi];Re(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),dt.command(e,"invalid elements",t.commandStr));var r=We(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return r.value=e,r}if(Qi in i){var o=i[Qi];return He(o,function(e,t){var r=e.shared,n=r.isBufferArgs,i=r.elements,a=e.invoke(t,o),u=t.def("null"),s=t.def(n,"(",a,")"),c=e.cond(s).then(u,"=",i,".createStream(",a,");").else(u,"=",i,".getElements(",a,");");return dt.optional(function(){e.assert(c.else,"!"+a+"||"+u,"invalid elements")}),t.entry(c),t.exit(e.cond(s).then(i,".destroyStream(",u,");")),e.ELEMENTS=u,u})}return null}(),u=r(Yi,!0);return{elements:o,primitive:function(){if(Ui in n){var e=n[Ui];return dt.commandParameter(e,Yt,"invalid primitve",t.commandStr),We(function(t,r){return Yt[e]})}if(Ui in i){var r=i[Ui];return He(r,function(e,t){var n=e.constants.primTypes,i=e.invoke(t,r);return dt.optional(function(){e.assert(t,i+" in "+n,"invalid primitive, must be one of "+Object.keys(Yt))}),t.def(n,"[",i,"]")})}return o?Ve(o)?We(o.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return Lo}):new Ge(o.thisDep,o.contextDep,o.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",Lo)}):null}(),count:function(){if(Bi in n){var e=0|n[Bi];return dt.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),We(function(){return e})}if(Bi in i){var r=i[Bi];return He(r,function(e,t){var n=e.invoke(t,r);return dt.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n})}if(o){if(Ve(o)){if(o)return u?new Ge(u.thisDep,u.contextDep,u.propDep,function(e,t){var r=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return dt.optional(function(){e.assert(t,r+">=0","invalid vertex offset/element buffer too small")}),r}):We(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var a=We(function(){return-1});return dt.optional(function(){a.MISSING=!0}),a}var s=new Ge(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")});return dt.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:r(Ri,!1),offset:u}}function N(e,t){var r=e.static,i=e.dynamic,o={};return re.forEach(function(e){function a(t,n){if(e in r){var a=t(r[e]);o[u]=We(function(){return a})}else if(e in i){var s=i[e];o[u]=He(s,function(e,t){return n(e,t,e.invoke(t,s))})}}var u=y(e);switch(e){case mi:case si:case ui:case Ai:case hi:case Oi:case wi:case Di:case ji:case gi:return a(function(r){return dt.commandType(r,"boolean",e,t.commandStr),r},function(t,r,n){return dt.optional(function(){t.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+e,t.commandStr)}),n});case pi:return a(function(r){return dt.commandParameter(r,Go,"invalid "+e,t.commandStr),Go[r]},function(t,r,n){var i=t.constants.compareFuncs;return dt.optional(function(){t.assert(r,n+" in "+i,"invalid "+e+", must be one of "+Object.keys(Go))}),r.def(i,"[",n,"]")});case di:return a(function(e){return dt.command(ge(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,r){return dt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array")}),[t.def("+",r,"[0]"),t.def("+",r,"[1]")]});case fi:return a(function(e){dt.commandType(e,"object","blend.func",t.commandStr);var r="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return dt.commandParameter(r,Ro,u+".srcRGB",t.commandStr),dt.commandParameter(n,Ro,u+".srcAlpha",t.commandStr),dt.commandParameter(i,Ro,u+".dstRGB",t.commandStr),dt.commandParameter(o,Ro,u+".dstAlpha",t.commandStr),dt.command(-1===Fo.indexOf(r+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+i+")",t.commandStr),[Ro[r],Ro[i],Ro[n],Ro[o]]},function(t,r,n){function i(i,a){var u=r.def('"',i,a,'" in ',n,"?",n,".",i,a,":",n,".",i);return dt.optional(function(){t.assert(r,u+" in "+o,"invalid "+e+"."+i+a+", must be one of "+Object.keys(Ro))}),u}var o=t.constants.blendFuncs;dt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),u=i("dst","RGB");dt.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(r,e+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=r.def(o,"[",a,"]"),c=r.def(o,"[",i("src","Alpha"),"]");return[s,r.def(o,"[",u,"]"),c,r.def(o,"[",i("dst","Alpha"),"]")]});case li:return a(function(r){return"string"==typeof r?(dt.commandParameter(r,K,"invalid "+e,t.commandStr),[K[r],K[r]]):"object"==typeof r?(dt.commandParameter(r.rgb,K,e+".rgb",t.commandStr),dt.commandParameter(r.alpha,K,e+".alpha",t.commandStr),[K[r.rgb],K[r.alpha]]):void dt.commandRaise("invalid blend.equation",t.commandStr)},function(t,r,n){var i=t.constants.blendEquations,o=r.def(),a=r.def(),u=t.cond("typeof ",n,'==="string"');return dt.optional(function(){function r(e,r,n){t.assert(e,n+" in "+i,"invalid "+r+", must be one of "+Object.keys(K))}r(u.then,e,n),t.assert(u.else,n+"&&typeof "+n+'==="object"',"invalid "+e),r(u.else,e+".rgb",n+".rgb"),r(u.else,e+".alpha",n+".alpha")}),u.then(o,"=",a,"=",i,"[",n,"];"),u.else(o,"=",i,"[",n,".rgb];",a,"=",i,"[",n,".alpha];"),r(u),[o,a]});case ci:return a(function(e){return dt.command(ge(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),Z(4,function(t){return+e[t]})},function(e,t,r){return dt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array")}),Z(4,function(e){return t.def("+",r,"[",e,"]")})});case Li:return a(function(e){return dt.commandType(e,"number",u,t.commandStr),0|e},function(e,t,r){return dt.optional(function(){e.assert(t,"typeof "+r+'==="number"',"invalid stencil.mask")}),t.def(r,"|0")});case Ti:return a(function(r){dt.commandType(r,"object",u,t.commandStr);var n=r.cmp||"keep",i=r.ref||0,o="mask"in r?r.mask:-1;return dt.commandParameter(n,Go,e+".cmp",t.commandStr),dt.commandType(i,"number",e+".ref",t.commandStr),dt.commandType(o,"number",e+".mask",t.commandStr),[Go[n],i,o]},function(e,t,r){var n=e.constants.compareFuncs;return dt.optional(function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(r+"&&typeof ",r,'==="object"'),i('!("cmp" in ',r,")||(",r,".cmp in ",n,")")}),[t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",zo),t.def(r,".ref|0"),t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case Ei:case Ii:return a(function(r){dt.commandType(r,"object",u,t.commandStr);var n=r.fail||"keep",i=r.zfail||"keep",o=r.zpass||"keep";return dt.commandParameter(n,Vo,e+".fail",t.commandStr),dt.commandParameter(i,Vo,e+".zfail",t.commandStr),dt.commandParameter(o,Vo,e+".zpass",t.commandStr),[e===Ii?Eo:To,Vo[n],Vo[i],Vo[o]]},function(t,r,n){function i(i){return dt.optional(function(){t.assert(r,'!("'+i+'" in '+n+")||("+n+"."+i+" in "+o+")","invalid "+e+"."+i+", must be one of "+Object.keys(Vo))}),r.def('"',i,'" in ',n,"?",o,"[",n,".",i,"]:",zo)}var o=t.constants.stencilOps;return dt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[e===Ii?Eo:To,i("fail"),i("zfail"),i("zpass")]});case xi:return a(function(e){dt.commandType(e,"object",u,t.commandStr);var r=0|e.factor,n=0|e.units;return dt.commandType(r,"number",u+".factor",t.commandStr),dt.commandType(n,"number",u+".units",t.commandStr),[r,n]},function(t,r,n){return dt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[r.def(n,".factor|0"),r.def(n,".units|0")]});case Mi:return a(function(e){var r=0;return"front"===e?r=To:"back"===e&&(r=Eo),dt.command(!!r,u,t.commandStr),r},function(e,t,r){return dt.optional(function(){e.assert(t,r+'==="front"||'+r+'==="back"',"invalid cull.face")}),t.def(r,'==="front"?',To,":",Eo)});case bi:return a(function(e){return dt.command("number"==typeof e&&e>=n.lineWidthDims[0]&&e<=n.lineWidthDims[1],"invalid line width, must positive number between "+n.lineWidthDims[0]+" and "+n.lineWidthDims[1],t.commandStr),e},function(e,t,r){return dt.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">="+n.lineWidthDims[0]+"&&"+r+"<="+n.lineWidthDims[1],"invalid line width")}),r});case vi:return a(function(e){return dt.commandParameter(e,Ho,u,t.commandStr),Ho[e]},function(e,t,r){return dt.optional(function(){e.assert(t,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(r+'==="cw"?'+Io+":"+Oo)});case yi:return a(function(e){return dt.command(ge(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,r){return dt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")}),Z(4,function(e){return"!!"+r+"["+e+"]"})});case Ni:return a(function(e){dt.command("object"==typeof e&&e,u,t.commandStr);var r="value"in e?e.value:1,n=!!e.invert;return dt.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[r,n]},function(e,t,r){return dt.optional(function(){e.assert(t,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',r,"?+",r,".value:1"),t.def("!!",r,".invert")]})}}),o}function A(e,t){var r=e.static,n=e.dynamic,i={};return Object.keys(r).forEach(function(e){var n,o=r[e];if("number"==typeof o||"boolean"==typeof o)n=We(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?n=We(function(e){return e.link(o)}):"framebuffer"===a||"framebufferCube"===a?(dt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),n=We(function(e){return e.link(o.color[0])})):dt.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else ge(o)?n=We(function(t){return t.global.def("[",Z(o.length,function(r){return dt.command("number"==typeof o[r]||"boolean"==typeof o[r],"invalid uniform "+e,t.commandStr),o[r]}),"]")}):dt.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);n.value=o,i[e]=n}),Object.keys(n).forEach(function(e){var t=n[e];i[e]=He(t,function(e,r){return e.invoke(r,t)})}),i}function L(e,r){var n=e.static,i=e.dynamic,a={};return Object.keys(n).forEach(function(e){var i=n[e],u=t.id(e),s=new X;if(Re(i))s.state=ei,s.buffer=o.getBuffer(o.create(i,Zi,!1,!0)),s.type=0;else{var c=o.getBuffer(i);if(c)s.state=ei,s.buffer=c,s.type=0;else if(dt.command("object"==typeof i&&i,"invalid data for attribute "+e,r.commandStr),i.constant){var l=i.constant;s.buffer="null",s.state=ti,"number"==typeof l?s.x=l:(dt.command(ge(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+e,r.commandStr),Jn.forEach(function(e,t){t<l.length&&(s[e]=l[t])}))}else{c=Re(i.buffer)?o.getBuffer(o.create(i.buffer,Zi,!1,!0)):o.getBuffer(i.buffer),dt.command(!!c,'missing buffer for attribute "'+e+'"',r.commandStr);var f=0|i.offset;dt.command(f>=0,'invalid offset for attribute "'+e+'"',r.commandStr);var h=0|i.stride;dt.command(h>=0&&h<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',r.commandStr);var p=0|i.size;dt.command(!("size"in i)||p>0&&p<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',r.commandStr);var d=!!i.normalized,g=0;"type"in i&&(dt.commandParameter(i.type,_t,"invalid type for attribute "+e,r.commandStr),g=_t[i.type]);var y=0|i.divisor;"divisor"in i&&(dt.command(0===y||J,'cannot specify divisor for attribute "'+e+'", instancing not supported',r.commandStr),dt.command(y>=0,'invalid divisor for attribute "'+e+'"',r.commandStr)),dt.optional(function(){var t=r.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(r){dt.command(n.indexOf(r)>=0,'unknown parameter "'+r+'" for attribute pointer "'+e+'" (valid parameters are '+n+")",t)})}),s.buffer=c,s.state=ei,s.size=p,s.normalized=d,s.type=g||c.dtype,s.offset=f,s.stride=h,s.divisor=y}}a[e]=We(function(e,t){var r=e.attribCache;if(u in r)return r[u];var n={isStream:!1};return Object.keys(s).forEach(function(e){n[e]=s[e]}),s.buffer&&(n.buffer=e.link(s.buffer),n.type=n.type||n.buffer+".dtype"),r[u]=n,n})}),Object.keys(i).forEach(function(e){function t(t,n){function i(e){n(c[e],"=",o,".",e,"|0;")}var o=t.invoke(n,r),a=t.shared,u=a.isBufferArgs,s=a.buffer;dt.optional(function(){t.assert(n,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+e+'"')});var c={isStream:n.def(!1)},l=new X;l.state=ei,Object.keys(l).forEach(function(e){c[e]=n.def(""+l[e])});var f=c.buffer,h=c.type;return n("if(",u,"(",o,")){",c.isStream,"=true;",f,"=",s,".createStream(",Zi,",",o,");",h,"=",f,".dtype;","}else{",f,"=",s,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",ti,";","if(typeof "+o+'.constant === "number"){',c[Jn[0]],"=",o,".constant;",Jn.slice(1).map(function(e){return c[e]}).join("="),"=0;","}else{",Jn.map(function(e,t){return c[e]+"="+o+".constant.length>="+t+"?"+o+".constant["+t+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",f,"=",s,".createStream(",Zi,",",o,".buffer);","}else{",f,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",c.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),n("}}"),n.exit("if(",c.isStream,"){",s,".destroyStream(",f,");","}"),c}var r=i[e];a[e]=He(r,t)}),a}function T(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach(function(e){var r=t[e];n[e]=We(function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)})}),Object.keys(r).forEach(function(e){var t=r[e];n[e]=He(t,function(e,r){return e.invoke(r,t)})}),n}function E(e,t,r,n,o){function a(e){var t=l[e];t&&(h[e]=t)}var u=e.static,s=e.dynamic;dt.optional(function(){function e(e){Object.keys(e).forEach(function(e){dt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)})}var t=[zi,ki,Pi,Qi,Ui,Yi,Bi,Ri,Ci].concat(re);e(u),e(s)});var c=w(e,o),l=x(e,c,o),f=j(e,o),h=N(e,o),p=D(e,o);a(Si),a(y(_i));var d=Object.keys(h).length>0,g={framebuffer:c,draw:f,shader:p,state:h,dirty:d};return g.profile=b(e,o),g.uniforms=A(r,o),g.attributes=L(t,o),g.context=T(n,o),Object.keys(g.attributes).length&&i.hasSupport&&(g.vao=i.create()),g}function I(e,t,r){var n=e.shared.context,i=e.scope();Object.keys(r).forEach(function(o){t.save(n,"."+o);var a=r[o];i(n,".",o,"=",a.append(e,t),";")}),t(i)}function O(e,t,r,n){var i,o=e.shared,a=o.gl,u=o.framebuffer;$&&(i=t.def(o.extensions,".webgl_draw_buffers"));var s,c=e.constants,l=c.drawBuffer,f=c.backBuffer;s=r?r.append(e,t):t.def(u,".next"),n||t("if(",s,"!==",u,".cur){"),t("if(",s,"){",a,".bindFramebuffer(",Bo,",",s,".framebuffer);"),$&&t(i,".drawBuffersWEBGL(",l,"[",s,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Bo,",null);"),$&&t(i,".drawBuffersWEBGL(",f,");"),t("}",u,".cur=",s,";"),n||t("}")}function _(e,t,r){var n=e.shared,i=n.gl,o=e.current,a=e.next,u=n.current,s=n.next,c=e.cond(u,".dirty");re.forEach(function(t){var n=y(t);if(!(n in r.state)){var l,f;if(n in a){l=a[n],f=o[n];var h=Z(ee[n].length,function(e){return c.def(l,"[",e,"]")});c(e.cond(h.map(function(e,t){return e+"!=="+f+"["+t+"]"}).join("||")).then(i,".",ie[n],"(",h,");",h.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";"))}else{l=c.def(s,".",n);var p=e.cond(l,"!==",u,".",n);c(p),n in ne?p(e.cond(l).then(i,".enable(",ne[n],");").else(i,".disable(",ne[n],");"),u,".",n,"=",l,";"):p(i,".",ie[n],"(",l,");",u,".",n,"=",l,";")}}}),0===Object.keys(r.state).length&&c(u,".dirty=false;"),t(c)}function S(e,t,r,n){var i=e.shared,o=e.current,a=i.current,u=i.gl;Fe(Object.keys(r)).forEach(function(i){var s=r[i];if(!n||n(s)){var c=s.append(e,t);if(ne[i]){var l=ne[i];Ve(s)?c?t(u,".enable(",l,");"):t(u,".disable(",l,");"):t(e.cond(c).then(u,".enable(",l,");").else(u,".disable(",l,");")),t(a,".",i,"=",c,";")}else if(ge(c)){var f=o[i];t(u,".",ie[i],"(",c,");",c.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(u,".",ie[i],"(",c,");",a,".",i,"=",c,";")}})}function C(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function z(e,t,r,n,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(e){e(c=t.def(),"=",o(),";"),"string"==typeof i?e(p,".count+=",i,";"):e(p,".count++;"),d&&(n?(l=t.def(),e(l,"=",y,".getNumPendingQueries();")):e(y,".beginQuery(",p,");"))}function u(e){e(p,".cpuTime+=",o(),"-",c,";"),d&&(n?e(y,".pushScopeStats(",l,",",y,".getNumPendingQueries(),",p,");"):e(y,".endQuery();"))}function s(e){var r=t.def(g,".profile");t(g,".profile=",e,";"),t.exit(g,".profile=",r,";")}var c,l,f,h=e.shared,p=e.stats,g=h.current,y=h.timer,m=r.profile;if(m){if(Ve(m))return void(m.enable?(a(t),u(t.exit),s("true")):s("false"));s(f=m.append(e,t))}else f=t.def(g,".profile");var M=e.block();a(M),t("if(",f,"){",M,"}");var v=e.block();u(v),t.exit("if(",f,"){",v,"}")}function k(e,t,r,n,o){function a(e){switch(e){case lo:case go:case vo:return 2;case fo:case yo:case bo:return 3;case ho:case mo:case wo:return 4;default:return 1}}function u(r,n,i){function o(){t("if(!",l,".buffer){",u,".enableVertexAttribArray(",c,");}");var r,o=i.type;if(r=i.size?t.def(i.size,"||",n):n,t("if(",l,".type!==",o,"||",l,".size!==",r,"||",d.map(function(e){return l+"."+e+"!=="+i[e]}).join("||"),"){",u,".bindBuffer(",Zi,",",h,".buffer);",u,".vertexAttribPointer(",[c,r,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",r,";",d.map(function(e){return l+"."+e+"="+i[e]+";"}).join(""),"}"),J){var a=i.divisor;t("if(",l,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[c,a],");",l,".divisor=",a,";}")}}function a(){t("if(",l,".buffer){",u,".disableVertexAttribArray(",c,");","}if(",Jn.map(function(e,t){return l+"."+e+"!=="+p[t]}).join("||"),"){",u,".vertexAttrib4f(",c,",",p,");",Jn.map(function(e,t){return l+"."+e+"="+p[t]+";"}).join(""),"}")}var u=s.gl,c=t.def(r,".location"),l=t.def(s.attributes,"[",c,"]"),f=i.state,h=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];f===ei?o():f===ti?a():(t("if(",f,"===",ei,"){"),o(),t("}else{"),a(),t("}"))}var s=e.shared,c=n.length&&i.hasSupport?e.link(r.vao):null;c&&t("if(",c,"){",c,".bind(); }"),n.forEach(function(n){var i,s=n.name,c=r.attributes[s];if(c){if(!o(c))return;i=c.append(e,t)}else{if(!o(qo))return;var l=e.scopeAttrib(s);dt.optional(function(){e.assert(t,l+".state","missing attribute "+s)}),i={},Object.keys(new X).forEach(function(e){i[e]=t.def(l,".",e)})}u(e.link(n),a(n.info.type),i)})}function P(e,r,n,i,o){for(var a,u=e.shared,s=u.gl,c=0;c<i.length;++c){var l,f=i[c],h=f.name,p=f.info.type,d=n.uniforms[h],g=e.link(f)+".location";if(d){if(!o(d))continue;if(Ve(d)){var y=d.value;if(dt.command(null!==y&&void 0!==y,'missing uniform "'+h+'"',e.commandStr),p===No||p===Ao){dt.command("function"==typeof y&&(p===No&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||p===Ao&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,e.commandStr);var m=e.link(y._texture||y.color[0]._texture);r(s,".uniform1i(",g,",",m+".bind());"),r.exit(m,".unbind();")}else if(p===xo||p===Do||p===jo){dt.optional(function(){dt.command(ge(y),"invalid matrix for uniform "+h,e.commandStr),dt.command(p===xo&&4===y.length||p===Do&&9===y.length||p===jo&&16===y.length,"invalid length for matrix uniform "+h,e.commandStr)});var M=e.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),v=2;p===Do?v=3:p===jo&&(v=4),r(s,".uniformMatrix",v,"fv(",g,",false,",M,");")}else{switch(p){case co:dt.commandType(y,"number","uniform "+h,e.commandStr),a="1f";break;case lo:dt.command(ge(y)&&2===y.length,"uniform "+h,e.commandStr),a="2f";break;case fo:dt.command(ge(y)&&3===y.length,"uniform "+h,e.commandStr),a="3f";break;case ho:dt.command(ge(y)&&4===y.length,"uniform "+h,e.commandStr),a="4f";break;case Mo:dt.commandType(y,"boolean","uniform "+h,e.commandStr),a="1i";break;case po:dt.commandType(y,"number","uniform "+h,e.commandStr),a="1i";break;case vo:case go:dt.command(ge(y)&&2===y.length,"uniform "+h,e.commandStr),a="2i";break;case bo:case yo:dt.command(ge(y)&&3===y.length,"uniform "+h,e.commandStr),a="3i";break;case wo:case mo:dt.command(ge(y)&&4===y.length,"uniform "+h,e.commandStr),a="4i"}r(s,".uniform",a,"(",g,",",ge(y)?Array.prototype.slice.call(y):y,");")}continue}l=d.append(e,r)}else{if(!o(qo))continue;l=r.def(u.uniforms,"[",t.id(h),"]")}p===No?r("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):p===Ao&&r("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),dt.optional(function(){function t(t,n){e.assert(r,t,'bad data or missing for uniform "'+h+'".  '+n)}function n(e){t("typeof "+l+'==="'+e+'"',"invalid type, expected "+e)}function i(r,n){t(u.isArrayLike+"("+l+")&&"+l+".length==="+r,"invalid vector, should have length "+r,e.commandStr)}function o(r){t("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(r===Ji?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(p){case po:n("number");break;case go:i(2,"number");break;case yo:i(3,"number");break;case mo:i(4,"number");break;case co:n("number");break;case lo:i(2,"number");break;case fo:i(3,"number");break;case ho:i(4,"number");break;case Mo:n("boolean");break;case vo:i(2,"boolean");break;case bo:i(3,"boolean");break;case wo:i(4,"boolean");break;case xo:i(4,"number");break;case Do:i(9,"number");break;case jo:i(16,"number");break;case No:o(Ji);break;case Ao:o($i)}});var b=1;switch(p){case No:case Ao:var w=r.def(l,"._texture");r(s,".uniform1i(",g,",",w,".bind());"),r.exit(w,".unbind();");continue;case po:case Mo:a="1i";break;case go:case vo:a="2i",b=2;break;case yo:case bo:a="3i",b=3;break;case mo:case wo:a="4i",b=4;break;case co:a="1f";break;case lo:a="2f",b=2;break;case fo:a="3f",b=3;break;case ho:a="4f",b=4;break;case xo:a="Matrix2fv";break;case Do:a="Matrix3fv";break;case jo:a="Matrix4fv"}if(r(s,".uniform",a,"(",g,","),"M"===a.charAt(0)){var x=Math.pow(p-xo+2,2),D=e.global.def("new Float32Array(",x,")");r("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",Z(x,function(e){return D+"["+e+"]="+l+"["+e+"]"}),",",D,")")}else r(b>1?Z(b,function(e){return l+"["+e+"]"}):l);r(");")}}function Q(e,t,r,n){function i(i){var o=l[i];return o?o.contextDep&&n.contextDynamic||o.propDep?o.append(e,r):o.append(e,t):t.def(c,".",i)}function o(){function e(){r(y,".drawElementsInstancedANGLE(",[h,d,m,p+"<<(("+m+"-"+$n+")>>1)",g],");")}function t(){r(y,".drawArraysInstancedANGLE(",[h,p,d,g],");")}f?M?e():(r("if(",f,"){"),e(),r("}else{"),t(),r("}")):t()}function a(){function e(){r(s+".drawElements("+[h,d,m,p+"<<(("+m+"-"+$n+")>>1)"]+");")}function t(){r(s+".drawArrays("+[h,p,d]+");")}f?M?e():(r("if(",f,"){"),e(),r("}else{"),t(),r("}")):t()}var u=e.shared,s=u.gl,c=u.draw,l=n.draw,f=function(){var i,o=l.elements,a=t;return o?((o.contextDep&&n.contextDynamic||o.propDep)&&(a=r),i=o.append(e,a)):i=a.def(c,".",Qi),i&&a("if("+i+")"+s+".bindBuffer("+Ki+","+i+".buffer.buffer);"),i}(),h=i(Ui),p=i(Yi),d=function(){var i,o=l.count,a=t;return o?((o.contextDep&&n.contextDynamic||o.propDep)&&(a=r),i=o.append(e,a),dt.optional(function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(a,i+">=0","missing vertex count")})):(i=a.def(c,".",Bi),dt.optional(function(){e.assert(a,i+">=0","missing vertex count")})),i}();if("number"==typeof d){if(0===d)return}else r("if(",d,"){"),r.exit("}");var g,y;J&&(g=i(Ri),y=e.instancing);var m=f+".type",M=l.elements&&Ve(l.elements);J&&("number"!=typeof g||g>=0)?"string"==typeof g?(r("if(",g,">0){"),o(),r("}else if(",g,"<0){"),a(),r("}")):o():a()}function U(e,t,r,n,i){var o=v(),a=o.proc("body",i);return dt.optional(function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)}),J&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,r,n),o.compile().body}function B(e,t,r,n){C(e,t),k(e,t,r,n.attributes,function(){return!0}),P(e,t,r,n.uniforms,function(){return!0}),Q(e,t,t,r)}function Y(e,t){var r=e.proc("draw",1);C(e,r),I(e,r,t.context),O(e,r,t.framebuffer),_(e,r,t),S(e,r,t.state),z(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)B(e,r,t,t.shader.program);else{var i=e.global.def("{}"),o=r.def(n,".id"),a=r.def(i,"[",o,"]");r(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link(function(r){return U(B,e,t,r,1)}),"(",n,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}function R(e,t,r,n){function i(){return!0}e.batchId="a1",C(e,t),k(e,t,r,n.attributes,i),P(e,t,r,n.uniforms,i),Q(e,t,t,r)}function F(e,t,r,n){function i(e){return e.contextDep&&a||e.propDep}function o(e){return!i(e)}C(e,t);var a=r.contextDep,u=t.def(),s=t.def();e.shared.props=s,e.batchId=u;var c=e.scope(),l=e.scope();if(t(c.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",l,"}",c.exit),r.needsContext&&I(e,l,r.context),r.needsFramebuffer&&O(e,l,r.framebuffer),S(e,l,r.state,i),r.profile&&i(r.profile)&&z(e,l,r,!1,!0),n)k(e,c,r,n.attributes,o),k(e,l,r,n.attributes,i),P(e,c,r,n.uniforms,o),P(e,l,r,n.uniforms,i),Q(e,c,l,r);else{var f=e.global.def("{}"),h=r.shader.progVar.append(e,l),p=l.def(h,".id"),d=l.def(f,"[",p,"]");l(e.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",e.link(function(t){return U(R,e,r,t,2)}),"(",h,");}",d,".call(this,a0[",u,"],",u,");")}}function G(e,t){function r(e){return e.contextDep&&i||e.propDep}var n=e.proc("batch",2);e.batchId="0",C(e,n);var i=!1,o=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(I(e,n,t.context),o=!1);var a=t.framebuffer,u=!1;a?(a.propDep?i=u=!0:a.contextDep&&i&&(u=!0),u||O(e,n,a)):O(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),_(e,n,t),S(e,n,t.state,function(e){return!r(e)}),t.profile&&r(t.profile)||z(e,n,t,!1,"a1"),t.contextDep=i,t.needsContext=o,t.needsFramebuffer=u;var s=t.shader.progVar;if(s.contextDep&&i||s.propDep)F(e,n,t,null);else{var c=s.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)F(e,n,t,t.shader.program);else{var l=e.global.def("{}"),f=n.def(c,".id"),h=n.def(l,"[",f,"]");n(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",l,"[",f,"]=",e.link(function(r){return U(F,e,t,r,2)}),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function V(e,r){function n(t){var n=r.shader[t];n&&i.set(o.shader,"."+t,n.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var o=e.shared,a=o.current;I(e,i,r.context),r.framebuffer&&r.framebuffer.append(e,i),Fe(Object.keys(r.state)).forEach(function(t){var n=r.state[t].append(e,i);ge(n)?n.forEach(function(r,n){i.set(e.next[t],"["+n+"]",r)}):i.set(o.next,"."+t,n)}),z(e,i,r,!0,!0),[Qi,Yi,Bi,Ri,Ui].forEach(function(t){var n=r.draw[t];n&&i.set(o.draw,"."+t,""+n.append(e,i))}),Object.keys(r.uniforms).forEach(function(n){i.set(o.uniforms,"["+t.id(n)+"]",r.uniforms[n].append(e,i))}),Object.keys(r.attributes).forEach(function(t){var n=r.attributes[t].append(e,i),o=e.scopeAttrib(t);Object.keys(new X).forEach(function(e){i.set(o,"."+e,n[e])})}),n(ki),n(Pi),Object.keys(r.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function W(e){if("object"==typeof e&&!ge(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(mt.isDynamic(e[t[r]]))return!0;return!1}}function H(e,t,r){function n(e,t){a.forEach(function(r){var n=i[r];if(mt.isDynamic(n)){var o=e.invoke(t,n);t(l,".",r,"=",o,";")}})}var i=t.static[r];if(i&&W(i)){var o=e.global,a=Object.keys(i),u=!1,s=!1,c=!1,l=e.global.def("{}");a.forEach(function(t){var r=i[t];if(mt.isDynamic(r)){"function"==typeof r&&(r=i[t]=mt.unbox(r));var n=He(r,null);u=u||n.thisDep,c=c||n.propDep,s=s||n.contextDep}else{switch(o(l,".",t,"="),typeof r){case"number":o(r);break;case"string":o('"',r,'"');break;case"object":Array.isArray(r)&&o("[",r.join(),"]");break;default:o(e.link(r))}o(";")}}),t.dynamic[r]=new mt.DynamicVariable(ai,{thisDep:u,contextDep:s,propDep:c,ref:l,append:n}),delete t.static[r]}}function q(e,t,r,n,i){var o=v();o.stats=o.link(i),Object.keys(t.static).forEach(function(e){H(o,t,e)}),Xi.forEach(function(t){H(o,e,t)});var a=E(e,t,r,n,o);return Y(o,a),V(o,a),G(o,a),o.compile()}var X=l.Record,K={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(K.min=_o,K.max=So);var J=r.angle_instanced_arrays,$=r.webgl_draw_buffers,ee={dirty:!0,profile:g.profile},te={},re=[],ne={},ie={};m(ui,ro),m(si,to),M(ci,"blendColor",[0,0,0,0]),M(li,"blendEquationSeparate",[Qo,Qo]),M(fi,"blendFuncSeparate",[Po,ko,Po,ko]),m(hi,io,!0),M(pi,"depthFunc",Uo),M(di,"depthRange",[0,1]),M(gi,"depthMask",!0),M(yi,yi,[!0,!0,!0,!0]),m(mi,eo),M(Mi,"cullFace",Eo),M(vi,vi,Oo),M(bi,bi,1),m(wi,ao),M(xi,"polygonOffset",[0,0]),m(Di,uo),m(ji,so),M(Ni,"sampleCoverage",[1,!1]),m(Ai,no),M(Li,"stencilMask",-1),M(Ti,"stencilFunc",[Co,0,-1]),M(Ei,"stencilOpSeparate",[To,zo,zo,zo]),M(Ii,"stencilOpSeparate",[Eo,zo,zo,zo]),m(Oi,oo),M(_i,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),M(Si,Si,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var oe={gl:e,context:p,strings:t,next:te,current:ee,draw:h,elements:a,vao:i,buffer:o,shader:f,attributes:l.state,uniforms:c,framebuffer:s,extensions:r,timer:d,isBufferArgs:Re},ae={primTypes:Yt,compareFuncs:Go,blendFuncs:Ro,blendEquations:K,stencilOps:Vo,glTypes:_t,orientationType:Ho};dt.optional(function(){oe.isArrayLike=ge}),$&&(ae.backBuffer=[Eo],ae.drawBuffer=Z(n.maxDrawbuffers,function(e){return 0===e?[0]:Z(e,function(e){return Yo+e})}));var ue=0;return{next:te,current:ee,compile:q,procs:function(){var t=v(),r=t.proc("poll"),i=t.proc("refresh"),o=t.block();r(o),i(o);var a=t.shared,u=a.gl,s=a.next,c=a.current;o(c,".dirty=false;"),O(t,r),O(t,i,null,!0);var l,f=e.getExtension("angle_instanced_arrays");f&&(l=t.link(f));for(var h=0;h<n.maxAttributes;++h){var p=i.def(a.attributes,"[",h,"]"),d=t.cond(p,".buffer");d.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",Zi,",",p,".buffer.buffer);",u,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),i(d),f&&i(l,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return Object.keys(ne).forEach(function(e){var n=ne[e],a=o.def(s,".",e),l=t.block();l("if(",a,"){",u,".enable(",n,")}else{",u,".disable(",n,")}",c,".",e,"=",a,";"),i(l),r("if(",a,"!==",c,".",e,"){",l,"}")}),Object.keys(ie).forEach(function(e){var n,a,l=ie[e],f=ee[e],h=t.block();if(h(u,".",l,"("),ge(f)){var p=f.length;n=t.global.def(s,".",e),a=t.global.def(c,".",e),h(Z(p,function(e){return n+"["+e+"]"}),");",Z(p,function(e){return a+"["+e+"]="+n+"["+e+"];"}).join("")),r("if(",Z(p,function(e){return n+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",h,"}")}else n=o.def(s,".",e),a=o.def(c,".",e),h(n,");",c,".",e,"=",n,";"),r("if(",n,"!==",a,"){",h,"}");i(h)}),t.compile()}()}}function Xe(){return{bufferCount:0,vaoCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Ze(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}function Ke(e){function t(){if(0===V.length)return j&&j.update(),void(K=null);K=Mt.next(t),h();for(var e=V.length-1;e>=0;--e){var r=V[e];r&&r(T,null,0)}m.flush(),j&&j.update()}function r(){!K&&V.length>0&&(K=Mt.next(t))}function n(){K&&(Mt.cancel(t),K=null)}function i(e){e.preventDefault(),v=!0,n(),W.forEach(function(e){e()})}function o(e){m.getError(),v=!1,b.restore(),k.restore(),S.restore(),P.restore(),Q.restore(),U.restore(),j&&j.restore(),Y.procs.refresh(),r(),X.forEach(function(e){e()})}function a(){V.length=0,n(),G&&(G.removeEventListener(na,i),G.removeEventListener(ia,o)),k.clear(),U.clear(),Q.clear(),P.clear(),C.clear(),S.clear(),_.clear(),j&&j.clear(),Z.forEach(function(e){e()})}function u(e){function t(e){var t={},r={};return Object.keys(e).forEach(function(n){var i=e[n];mt.isDynamic(i)?r[n]=mt.unbox(i,n):t[n]=i}),{dynamic:r,static:t}}function r(e){for(;p.length<e;)p.push(null);return p}function n(e,t){var n;if(v&&dt.raise("context lost"),"function"==typeof e)return h.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(n=0;n<e;++n)h.call(this,null,t,n);return}if(Array.isArray(e)){for(n=0;n<e.length;++n)h.call(this,e[n],t,n);return}return h.call(this,e,t,0)}if("number"==typeof e){if(e>0)return f.call(this,r(0|e),0|e)}else{if(!Array.isArray(e))return l.call(this,e);if(e.length)return f.call(this,e,e.length)}}dt(!!e,"invalid args to regl({...})"),dt.type(e,"object","invalid args to regl({...})");var i=t(e.context||{}),o=t(e.uniforms||{}),a=t(e.attributes||{}),u=t(function(e){function t(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}var r=et({},e);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),r}(e)),s={gpuTime:0,cpuTime:0,count:0},c=Y.compile(u,a,o,i,s),l=c.draw,f=c.batch,h=c.scope,p=[];return et(n,{stats:s})}function s(e,t){var r=0;Y.procs.poll();var n=t.color;n&&(m.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=$o),"depth"in t&&(m.clearDepth(+t.depth),r|=ea),"stencil"in t&&(m.clearStencil(0|t.stencil),r|=ta),dt(!!r,"called regl.clear with no buffer specified"),m.clear(r)}function c(e){if(dt("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)J(et({framebuffer:e.framebuffer.faces[t]},e),s);else J(e,s);else s(null,e)}function l(e){function t(){function t(){var e=Ze(V,t);V[e]=V[V.length-1],V.length-=1,V.length<=0&&n()}var r=Ze(V,e);dt(r>=0,"cannot cancel a frame twice"),V[r]=t}return dt.type(e,"function","regl.frame() callback must be a function"),V.push(e),r(),{cancel:t}}function f(){var e=F.viewport,t=F.scissor_box;e[0]=e[1]=t[0]=t[1]=0,T.viewportWidth=T.framebufferWidth=T.drawingBufferWidth=e[2]=t[2]=m.drawingBufferWidth,T.viewportHeight=T.framebufferHeight=T.drawingBufferHeight=e[3]=t[3]=m.drawingBufferHeight}function h(){T.tick+=1,T.time=d(),f(),Y.procs.poll()}function p(){f(),Y.procs.refresh(),j&&j.update()}function d(){return(vt()-N)/1e3}function g(e,t){dt.type(t,"function","listener callback must be a function");var r;switch(e){case"frame":return l(t);case"lost":r=W;break;case"restore":r=X;break;case"destroy":r=Z;break;default:dt.raise("invalid event, must be one of frame,lost,restore,destroy")}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t)return r[e]=r[r.length-1],void r.pop()}}}var y=H(e);if(!y)return null;var m=y.gl,M=m.getContextAttributes(),v=m.isContextLost(),b=q(m,y);if(!b)return null;var w=B(),x=Xe(),D=b.extensions,j=Jo(m,D),N=vt(),A=m.drawingBufferWidth,L=m.drawingBufferHeight,T={tick:0,time:0,viewportWidth:A,viewportHeight:L,framebufferWidth:A,framebufferHeight:L,drawingBufferWidth:A,drawingBufferHeight:L,pixelRatio:y.pixelRatio},E={},I={elements:null,primitive:4,count:-1,offset:0,instances:-1},O=bt(m,D),_=Qe(m,D,x,y),S=he(m,x,y),C=pe(m,D,S,x),z=ze(m,D,O,S,w),k=ke(m,w,x,y),P=Oe(m,D,O,function(){Y.procs.poll()},T,x,y),Q=jn(m,D,O,x,y),U=Se(m,D,O,P,Q,x),Y=qe(m,w,D,O,_,S,C,P,U,E,z,k,I,T,j,y),R=Pe(m,U,Y.procs.poll,T,M,D),F=Y.next,G=m.canvas,V=[],W=[],X=[],Z=[y.onDestroy],K=null;G&&(G.addEventListener(na,i,!1),G.addEventListener(ia,o,!1));var J=U.setFBO=u({framebuffer:mt.define.call(null,oa,"framebuffer")});p();var $=et(u,{clear:c,prop:mt.define.bind(null,oa),context:mt.define.bind(null,aa),this:mt.define.bind(null,ua),draw:u({}),buffer:function(e){return S.create(e,ra,!1,!1)},elements:function(e){return C.create(e,!1)},texture:P.create2D,cube:P.createCube,renderbuffer:Q.create,framebuffer:U.create,framebufferCube:U.createCube,attributes:M,frame:l,on:g,limits:O,hasExtension:function(e){return O.extensions.indexOf(e.toLowerCase())>=0},read:R,destroy:a,_gl:m,_refresh:p,poll:function(){h(),j&&j.update()},now:d,stats:x});return y.onDone(null,$),$}var Je={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},$e=function(e){return Object.prototype.toString.call(e)in Je},et=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},tt=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],rt=33071,nt=9728,it=9984,ot=9985,at=9986,ut=9987,st=5126,ct=32819,lt=32820,ft=33635,ht=34042,pt={};pt[5120]=pt[5121]=1,pt[5122]=pt[5123]=pt[36193]=pt[ft]=pt[ct]=pt[lt]=2,pt[5124]=pt[5125]=pt[st]=pt[ht]=4;var dt=et(r,{optional:L,raise:t,commandRaise:D,command:j,parameter:i,commandParameter:N,constructor:c,type:a,commandType:A,isTypedArray:o,nni:u,oneOf:s,shaderError:v,linkError:b,callSite:g,saveCommandRef:w,saveDrawInfo:x,framebufferFormat:T,guessCommand:d,texture2D:O,textureCube:_}),gt=0,yt=0,mt={DynamicVariable:S,define:P,isDynamic:Q,unbox:U,accessor:k},Mt={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},vt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},bt=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,i=1;return t.webgl_draw_buffers&&(n=e.getParameter(34852),i=e.getParameter(36063)),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938)}},wt=function(e){return Object.keys(e).map(function(t){return e[t]})},xt=5120,Dt=5121,jt=5122,Nt=5123,At=5124,Lt=5125,Tt=5126,Et=Z(8,function(){return[]}),It={alloc:$,free:ee,allocType:te,freeType:re},Ot={shape:se,flatten:ue},_t={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},St={dynamic:35048,stream:35040,static:35044},Ct=Ot.flatten,zt=Ot.shape,kt=35044,Pt=35040,Qt=5121,Ut=5126,Bt=[];Bt[5120]=1,Bt[5122]=2,Bt[5124]=4,Bt[5121]=1,Bt[5123]=2,Bt[5125]=4,Bt[5126]=4;var Yt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rt=0,Ft=1,Gt=4,Vt=5120,Wt=5121,Ht=5122,qt=5123,Xt=5124,Zt=5125,Kt=34963,Jt=35040,$t=35044,er=new Float32Array(1),tr=new Uint32Array(er.buffer),rr=5123,nr=34467,ir=3553,or=34067,ar=34069,ur=6408,sr=6406,cr=6407,lr=6409,fr=6410,hr=32854,pr=32855,dr=36194,gr=32819,yr=32820,mr=33635,Mr=34042,vr=6402,br=34041,wr=35904,xr=35906,Dr=36193,jr=33776,Nr=33777,Ar=33778,Lr=33779,Tr=35986,Er=35987,Ir=34798,Or=35840,_r=35841,Sr=35842,Cr=35843,zr=36196,kr=5121,Pr=5123,Qr=5125,Ur=5126,Br=10242,Yr=10243,Rr=10497,Fr=33071,Gr=33648,Vr=10240,Wr=10241,Hr=9728,qr=9729,Xr=9984,Zr=9985,Kr=9986,Jr=9987,$r=33170,en=4352,tn=4353,rn=4354,nn=34046,on=3317,an=37440,un=37441,sn=37443,cn=37444,ln=33984,fn=[Xr,Kr,Zr,Jr],hn=[0,lr,fr,cr,ur],pn={};pn[lr]=pn[sr]=pn[vr]=1,pn[br]=pn[fr]=2,pn[cr]=pn[wr]=3,pn[ur]=pn[xr]=4;var dn=ye("HTMLCanvasElement"),gn=ye("CanvasRenderingContext2D"),yn=ye("HTMLImageElement"),mn=ye("HTMLVideoElement"),Mn=Object.keys(Je).concat([dn,gn,yn,mn]),vn=[];vn[kr]=1,vn[Ur]=4,vn[Dr]=2,vn[Pr]=2,vn[Qr]=4;var bn=[];bn[hr]=2,bn[pr]=2,bn[dr]=2,bn[br]=4,bn[jr]=.5,bn[Nr]=.5,bn[Ar]=1,bn[Lr]=1,bn[Tr]=.5,bn[Er]=1,bn[Ir]=1,bn[Or]=.5,bn[_r]=.25,bn[Sr]=.5,bn[Cr]=.25,bn[zr]=.5;var wn=36161,xn=32854,Dn=[];Dn[xn]=2,Dn[32855]=2,Dn[36194]=2,Dn[33189]=2,Dn[36168]=1,Dn[34041]=4,Dn[35907]=4,Dn[34836]=16,Dn[34842]=8,Dn[34843]=6;var jn=function(e,t,r,n,i){function o(e){this.id=f++,this.refCount=1,this.renderbuffer=e,this.format=xn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(t){var r=t.renderbuffer;dt(r,"must not double destroy renderbuffer"),e.bindRenderbuffer(wn,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete h[t.id],n.renderbufferCount--}function u(t,a){function u(t,n){var o=0,a=0,s=xn;if("object"==typeof t&&t){var h=t;if("shape"in h){var p=h.shape;dt(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(dt.parameter(h.format,c,"invalid renderbuffer format"),s=c[h.format])}else"number"==typeof t?(o=0|t,a="number"==typeof n?0|n:o):t?dt.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(dt(o>0&&a>0&&o<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),o!==f.width||a!==f.height||s!==f.format)return u.width=f.width=o,u.height=f.height=a,f.format=s,e.bindRenderbuffer(wn,f.renderbuffer),e.renderbufferStorage(wn,s,o,a),i.profile&&(f.stats.size=_e(f.format,f.width,f.height)),u.format=l[f.format],u}function s(t,n){var o=0|t,a=0|n||o;return o===f.width&&a===f.height?u:(dt(o>0&&a>0&&o<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),u.width=f.width=o,u.height=f.height=a,e.bindRenderbuffer(wn,f.renderbuffer),e.renderbufferStorage(wn,f.format,o,a),i.profile&&(f.stats.size=_e(f.format,f.width,f.height)),u)}var f=new o(e.createRenderbuffer());return h[f.id]=f,n.renderbufferCount++,u(t,a),u.resize=s,u._reglType="renderbuffer",u._renderbuffer=f,i.profile&&(u.stats=f.stats),u.destroy=function(){f.decRef()},u}function s(){wt(h).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(wn,t.renderbuffer),e.renderbufferStorage(wn,t.format,t.width,t.height)}),e.bindRenderbuffer(wn,null)}var c={rgba4:xn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(c.srgba=35907),t.ext_color_buffer_half_float&&(c.rgba16f=34842,c.rgb16f=34843),t.webgl_color_buffer_float&&(c.rgba32f=34836);var l=[];Object.keys(c).forEach(function(e){var t=c[e];l[t]=e});var f=0,h={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(h).forEach(function(t){e+=h[t].stats.size}),e}),{create:u,clear:function(){wt(h).forEach(a)},restore:s}},Nn=36160,An=36161,Ln=3553,Tn=34069,En=36064,In=36096,On=36128,_n=33306,Sn=36053,Cn=6402,zn=[6408],kn=[];kn[6408]=4;var Pn=[];Pn[5121]=1,Pn[5126]=4,Pn[36193]=2;var Qn=33189,Un=36168,Bn=34041,Yn=[32854,32855,36194,35907,34842,34843,34836],Rn={};Rn[Sn]="complete",Rn[36054]="incomplete attachment",Rn[36057]="incomplete dimensions",Rn[36055]="incomplete, missing attachment",Rn[36061]="unsupported";var Fn=5126,Gn=35632,Vn=35633,Wn=35718,Hn=35721,qn=6408,Xn=5121,Zn=3333,Kn=5126,Jn="xyzw".split(""),$n=5121,ei=1,ti=2,ri=0,ni=1,ii=2,oi=3,ai=4,ui="dither",si="blend.enable",ci="blend.color",li="blend.equation",fi="blend.func",hi="depth.enable",pi="depth.func",di="depth.range",gi="depth.mask",yi="colorMask",mi="cull.enable",Mi="cull.face",vi="frontFace",bi="lineWidth",wi="polygonOffset.enable",xi="polygonOffset.offset",Di="sample.alpha",ji="sample.enable",Ni="sample.coverage",Ai="stencil.enable",Li="stencil.mask",Ti="stencil.func",Ei="stencil.opFront",Ii="stencil.opBack",Oi="scissor.enable",_i="scissor.box",Si="viewport",Ci="profile",zi="framebuffer",ki="vert",Pi="frag",Qi="elements",Ui="primitive",Bi="count",Yi="offset",Ri="instances",Fi=zi+"Width",Gi=zi+"Height",Vi=Si+"Width",Wi=Si+"Height",Hi="drawingBufferWidth",qi="drawingBufferHeight",Xi=[fi,li,Ti,Ei,Ii,Ni,Si,_i,xi],Zi=34962,Ki=34963,Ji=3553,$i=34067,eo=2884,to=3042,ro=3024,no=2960,io=2929,oo=3089,ao=32823,uo=32926,so=32928,co=5126,lo=35664,fo=35665,ho=35666,po=5124,go=35667,yo=35668,mo=35669,Mo=35670,vo=35671,bo=35672,wo=35673,xo=35674,Do=35675,jo=35676,No=35678,Ao=35680,Lo=4,To=1028,Eo=1029,Io=2304,Oo=2305,_o=32775,So=32776,Co=519,zo=7680,ko=0,Po=1,Qo=32774,Uo=513,Bo=36160,Yo=36064,Ro={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Fo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Go={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wo={frag:35632,vert:35633},Ho={cw:Io,ccw:Oo},qo=new Ge(!1,!1,!1,function(){}),Xo=34918,Zo=34919,Ko=35007,Jo=function(e,t){function r(){return h.pop()||f.createQueryEXT()}function n(e){h.push(e)}function i(e){var t=r();f.beginQueryEXT(Ko,t),p.push(t),c(p.length-1,p.length,e)}function o(){f.endQueryEXT(Ko)}function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function u(){return d.pop()||new a}function s(e){d.push(e)}function c(e,t,r){var n=u();n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,g.push(n)}function l(){var e,t,r=p.length;if(0!==r){m.length=Math.max(m.length,r+1),y.length=Math.max(y.length,r+1),y[0]=0,m[0]=0;var i=0;for(e=0,t=0;t<p.length;++t){var o=p[t];f.getQueryObjectEXT(o,Zo)?(i+=f.getQueryObjectEXT(o,Xo),n(o)):p[e++]=o,y[t+1]=i,m[t+1]=e}for(p.length=e,e=0,t=0;t<g.length;++t){var a=g[t],u=a.startQueryIndex,c=a.endQueryIndex;a.sum+=y[c]-y[u];var l=m[u],h=m[c];h===l?(a.stats.gpuTime+=a.sum/1e6,s(a)):(a.startQueryIndex=l,a.endQueryIndex=h,g[e++]=a)}g.length=e}}var f=t.ext_disjoint_timer_query;if(!f)return null;var h=[],p=[],d=[],g=[],y=[],m=[];return{beginQuery:i,endQuery:o,pushScopeStats:c,update:l,getNumPendingQueries:function(){return p.length},clear:function(){h.push.apply(h,p);for(var e=0;e<h.length;e++)f.deleteQueryEXT(h[e]);p.length=0,h.length=0},restore:function(){p.length=0,h.length=0}}},$o=16384,ea=256,ta=1024,ra=34962,na="webglcontextlost",ia="webglcontextrestored",oa=1,aa=2,ua=3;return Ke})},{}],400:[function(e,t,r){"use strict";function n(e,t){for(var r=new Array(e.length-1),n=1;n<e.length;++n)for(var i=r[n-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[n][o]);return r}function i(e){for(var t=new Array(e),r=0;r<e;++r){t[r]=new Array(e);for(var n=0;n<e;++n)t[r][n]=["m",n,"[",e-r-2,"]"].join("")}return t}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function a(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var r=e.split("[");return["w",t.substr(1),"m",r[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return a(t,e)}function u(e){return!0&e?"-":""}function s(e){if(2===e.length)return[["diff(",a(e[0][0],e[1][1]),",",a(e[1][0],e[0][1]),")"].join("")];for(var t=[],r=0;r<e.length;++r)t.push(["scale(",o(s(n(e,r))),",",u(r),e[0][r],")"].join(""));return t}function c(e,t){for(var r=[],n=0;n<t-2;++n)r.push(["prod(m",e,"[",n,"],m",e,"[",n,"])"].join(""));return o(r)}function l(e){for(var t=[],r=[],a=i(e),u=0;u<e;++u)a[0][u]="1",a[e-1][u]="w"+u;for(u=0;u<e;++u)0==(1&u)?t.push.apply(t,s(n(a,u))):r.push.apply(r,s(n(a,u)));for(var l=o(t),f=o(r),h="exactInSphere"+e,p=[],u=0;u<e;++u)p.push("m"+u);for(var d=["function ",h,"(",p.join(),"){"],u=0;u<e;++u){d.push("var w",u,"=",c(u,e),";");for(var v=0;v<e;++v)v!==u&&d.push("var w",u,"m",v,"=scale(w",u,",m",v,"[0]);")}return d.push("var p=",l,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",h),new Function("sum","diff","prod","scale",d.join(""))(y,m,g,M)}function f(){return 0}function h(){return 0}function p(){return 0}function d(e){var t=b[e.length];return t||(t=b[e.length]=l(e.length)),t.apply(void 0,e)}var g=e("two-product"),y=e("robust-sum"),m=e("robust-subtract"),M=e("robust-scale"),v=6,b=[f,h,p];!function(){for(;b.length<=v;)b.push(l(b.length));for(var e=[],r=["slow"],n=0;n<=v;++n)e.push("a"+n),r.push("o"+n);for(var i=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=v;++n)i.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),r.push(i.join(""));var o=Function.apply(void 0,r);for(t.exports=o.apply(void 0,[d].concat(b)),n=0;n<=v;++n)t.exports[n]=b[n]}()},{"robust-scale":403,"robust-subtract":405,"robust-sum":406,"two-product":424}],401:[function(e,t,r){"use strict";function n(e,t){for(var r=new Array(e.length-1),n=1;n<e.length;++n)for(var i=r[n-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[n][o]);return r}function i(e){for(var t=new Array(e),r=0;r<e;++r){t[r]=new Array(e);for(var n=0;n<e;++n)t[r][n]=["m",n,"[",e-r-1,"]"].join("")}return t}function o(e){return 1&e?"-":""}function a(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",a(e.slice(0,t)),",",a(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],r=0;r<e.length;++r)t.push(["scale(",a(u(n(e,r))),",",o(r),e[0][r],")"].join(""));return t}function s(e){for(var t=[],r=[],o=i(e),s=[],c=0;c<e;++c)0==(1&c)?t.push.apply(t,u(n(o,c))):r.push.apply(r,u(n(o,c))),s.push("m"+c);var d=a(t),g=a(r),y="orientation"+e+"Exact",m=["function ",y,"(",s.join(),"){var p=",d,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",y].join("");return new Function("sum","prod","scale","sub",m)(f,l,h,p)}function c(e){var t=m[e.length];return t||(t=m[e.length]=s(e.length)),t.apply(void 0,e)}var l=e("two-product"),f=e("robust-sum"),h=e("robust-scale"),p=e("robust-subtract"),d=5,g=s(3),y=s(4),m=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,r){var n,i=(e[1]-r[1])*(t[0]-r[0]),o=(e[0]-r[0])*(t[1]-r[1]),a=i-o;if(i>0){if(o<=0)return a;n=i+o}else{if(!(i<0))return a;if(o>=0)return a;n=-(i+o)}var u=3.3306690738754716e-16*n;return a>=u||a<=-u?a:g(e,t,r)},function(e,t,r,n){var i=e[0]-n[0],o=t[0]-n[0],a=r[0]-n[0],u=e[1]-n[1],s=t[1]-n[1],c=r[1]-n[1],l=e[2]-n[2],f=t[2]-n[2],h=r[2]-n[2],p=o*c,d=a*s,g=a*u,m=i*c,M=i*s,v=o*u,b=l*(p-d)+f*(g-m)+h*(M-v),w=7.771561172376103e-16*((Math.abs(p)+Math.abs(d))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(M)+Math.abs(v))*Math.abs(h));return b>w||-b>w?b:y(e,t,r,n)}];!function(){for(;m.length<=d;)m.push(s(m.length));for(var e=[],r=["slow"],n=0;n<=d;++n)e.push("a"+n),r.push("o"+n);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=d;++n)i.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var o=Function.apply(void 0,r);for(t.exports=o.apply(void 0,[c].concat(m)),n=0;n<=d;++n)t.exports[n]=m[n]}()},{"robust-scale":403,"robust-subtract":405,"robust-sum":406,"two-product":424}],402:[function(e,t,r){"use strict";function n(e,t){if(1===e.length)return o(t,e[0]);if(1===t.length)return o(e,t[0]);if(0===e.length||0===t.length)return[0];var r=[0];if(e.length<t.length)for(n=0;n<e.length;++n)r=i(r,o(t,e[n]));else for(var n=0;n<t.length;++n)r=i(r,o(e,t[n]));return r}var i=e("robust-sum"),o=e("robust-scale");t.exports=n},{"robust-scale":403,"robust-sum":406}],403:[function(e,t,r){"use strict";function n(e,t){var r=e.length;if(1===r){var n=i(e[0],t);return n[0]?n:[n[1]]}var a=new Array(2*r),u=[.1,.1],s=[.1,.1],c=0;i(e[0],t,u),u[0]&&(a[c++]=u[0]);for(var l=1;l<r;++l){i(e[l],t,s);var f=u[1];o(f,s[0],u),u[0]&&(a[c++]=u[0]);var h=s[1],p=u[1],d=h+p,g=p-(d-h);u[1]=d,g&&(a[c++]=g)}return u[1]&&(a[c++]=u[1]),0===c&&(a[c++]=0),a.length=c,a}var i=e("two-product"),o=e("two-sum");t.exports=n},{"two-product":424,"two-sum":425}],404:[function(e,t,r){"use strict";function n(e,t,r,n){for(var i=0;i<2;++i){var o=e[i],a=t[i],u=Math.min(o,a),s=Math.max(o,a),c=r[i],l=n[i],f=Math.min(c,l);if(Math.max(c,l)<u||s<f)return!1}return!0}function i(e,t,r,i){var a=o(e,r,i),u=o(t,r,i);if(a>0&&u>0||a<0&&u<0)return!1;var s=o(r,e,t),c=o(i,e,t);return!(s>0&&c>0||s<0&&c<0)&&(0!==a||0!==u||0!==s||0!==c||n(e,t,r,i))}t.exports=i;var o=e("robust-orientation")[3]},{"robust-orientation":401}],405:[function(e,t,r){"use strict";function n(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);return i?[i,r]:[r]}function i(e,t){var r=0|e.length,i=0|t.length;if(1===r&&1===i)return n(e[0],-t[0]);var o,a,u=r+i,s=new Array(u),c=0,l=0,f=0,h=Math.abs,p=e[l],d=h(p),g=-t[f],y=h(g);d<y?(a=p,(l+=1)<r&&(p=e[l],d=h(p))):(a=g,(f+=1)<i&&(g=-t[f],y=h(g))),l<r&&d<y||f>=i?(o=p,(l+=1)<r&&(p=e[l],d=h(p))):(o=g,(f+=1)<i&&(g=-t[f],y=h(g)));for(var m,M,v,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;l<r&&f<i;)d<y?(o=p,(l+=1)<r&&(p=e[l],d=h(p))):(o=g,(f+=1)<i&&(g=-t[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m;for(;l<r;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(l+=1)<r&&(p=e[l]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(f+=1)<i&&(g=-t[f]);return N&&(s[c++]=N),A&&(s[c++]=A),c||(s[c++]=0),s.length=c,s}t.exports=i},{}],406:[function(e,t,r){"use strict";function n(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);return i?[i,r]:[r]}function i(e,t){var r=0|e.length,i=0|t.length;if(1===r&&1===i)return n(e[0],t[0]);var o,a,u=r+i,s=new Array(u),c=0,l=0,f=0,h=Math.abs,p=e[l],d=h(p),g=t[f],y=h(g);d<y?(a=p,(l+=1)<r&&(p=e[l],d=h(p))):(a=g,(f+=1)<i&&(g=t[f],y=h(g))),l<r&&d<y||f>=i?(o=p,(l+=1)<r&&(p=e[l],d=h(p))):(o=g,(f+=1)<i&&(g=t[f],y=h(g)));for(var m,M,v,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;l<r&&f<i;)d<y?(o=p,(l+=1)<r&&(p=e[l],d=h(p))):(o=g,(f+=1)<i&&(g=t[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m;for(;l<r;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(l+=1)<r&&(p=e[l]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[c++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(f+=1)<i&&(g=t[f]);return N&&(s[c++]=N),A&&(s[c++]=A),c||(s[c++]=0),s.length=c,s}t.exports=i},{}],407:[function(e,t,r){t.exports=e("buffer")},{buffer:88}],408:[function(e,t,r){t.exports=function(e,t){t||(t={});var r=[],n=[],i=[],o=[],a=t.attributes?{}:null,u=a&&Object.keys(t.attributes);if(a)for(p=0;p<u.length;p++)a[u[p]]=[];for(var s=e.edges||[],c=0;c<s.length;c++){var l=r.length,f=s[c];if(r.push(e.positions[f[0]]),r.push(e.positions[f[0]]),r.push(e.positions[f[1]]),r.push(e.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]);n.push(r[l+2],r[l+3],r[l],r[l+1]),i.push(1,-1,1,-1),o.push([l,l+1,l+2],[l,l+2,l+3])}for(var h=e.cells||[],c=0;c<h.length;c++){l=r.length;if(2===(f=h[c]).length){if(r.push(e.positions[f[0]]),r.push(e.positions[f[0]]),r.push(e.positions[f[1]]),r.push(e.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]);n.push(r[l+2],r[l+3],r[l],r[l+1]),i.push(1,-1,1,-1),o.push([l,l+1,l+2],[l,l+2,l+3])}else{if(3!==f.length)throw new Error("expected a triangle, got "+f.length+"-sided cell");if(r.push(e.positions[f[0]]),r.push(e.positions[f[0]]),r.push(e.positions[f[1]]),r.push(e.positions[f[1]]),r.push(e.positions[f[2]]),r.push(e.positions[f[2]]),a)for(var p=0;p<u.length;p++){var d=u[p];a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[2]]),a[d].push(t.attributes[d][f[2]])}n.push(r[l+2],r[l+3],r[l+4],r[l+5],r[l],r[l+1]),i.push(1,-1,1,-1,1,-1),o.push([l,l+1,l+2],[l,l+2,l+3]),o.push([l+2,l+3,l+4],[l+2,l+4,l+5]),o.push([l+4,l+5,l],[l+4,l,l+1])}}return{positions:r,cells:o,nextPositions:n,directions:i,attributes:a}}},{}],409:[function(e,t,r){"use strict";var n=e("is-arrayish"),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(e){for(var t=[],r=0,a=e.length;r<a;r++){var u=e[r];n(u)?t=i.call(t,o.call(u)):t.push(u)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},{"is-arrayish":338}],410:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],411:[function(e,t,r){"use strict";"use restrict";function n(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},n.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var r=t[e];t[e]=t[r],e=r}return e},n.prototype.link=function(e,t){var r=this.find(e),n=this.find(t);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],u=i[n];a<u?o[r]=n:u<a?o[n]=r:(o[n]=r,++i[r])}}},{}],412:[function(e,t,r){"use strict";"use restrict";function n(e){for(var t=0,r=Math.max,n=0,i=e.length;n<i;++n)t=r(t,e[n].length);return t-1}function i(e){for(var t=-1,r=Math.max,n=0,i=e.length;n<i;++n)for(var o=e[n],a=0,u=o.length;a<u;++a)t=r(t,o[a]);return t+1}function o(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;++r)t[r]=e[r].slice(0);return t}function a(e,t){var r=e.length,n=e.length-t.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:return(c=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],a=t[0]+t[1];if(c=o+e[2]-(a+t[2]))return c;var u=i(e[0],e[1]),s=i(t[0],t[1]),c=i(u,e[2])-i(s,t[2]);return c||i(u+e[2],o)-i(s+t[2],a);default:var l=e.slice(0);l.sort();var f=t.slice(0);f.sort();for(var h=0;h<r;++h)if(n=l[h]-f[h])return n;return 0}}function u(e,t){return a(e[0],t[0])}function s(e,t){if(t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=[e[i],t[i]];n.sort(u);for(i=0;i<r;++i)e[i]=n[i][0],t[i]=n[i][1];return e}return e.sort(a),e}function c(e){if(0===e.length)return[];for(var t=1,r=e.length,n=1;n<r;++n){var i=e[n];if(a(i,e[n-1])){if(n===t){t++;continue}e[t++]=i}}return e.length=t,e}function l(e,t){for(var r=0,n=e.length-1,i=-1;r<=n;){var o=r+n>>1,u=a(e[o],t);u<=0?(0===u&&(i=o),r=o+1):u>0&&(n=o-1)}return i}function f(e,t){for(var r=new Array(e.length),n=0,i=r.length;n<i;++n)r[n]=[];for(var o=[],n=0,u=t.length;n<u;++n)for(var s=t[n],c=s.length,f=1,h=1<<c;f<h;++f){o.length=v.popCount(f);for(var p=0,d=0;d<c;++d)f&1<<d&&(o[p++]=s[d]);var g=l(e,o);if(!(g<0))for(;r[g++].push(n),!(g>=e.length||0!==a(e[g],o)););}return r}function h(e,t){if(!t)return f(c(d(e,0)),e,0);for(var r=new Array(t),n=0;n<t;++n)r[n]=[];for(var n=0,i=e.length;n<i;++n)for(var o=e[n],a=0,u=o.length;a<u;++a)r[o[a]].push(n);return r}function p(e){for(var t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],o=0|i.length,a=1,u=1<<o;a<u;++a){for(var c=[],l=0;l<o;++l)a>>>l&1&&c.push(i[l]);t.push(c)}return s(t)}function d(e,t){if(t<0)return[];for(var r=[],n=(1<<t+1)-1,i=0;i<e.length;++i)for(var o=e[i],a=n;a<1<<o.length;a=v.nextCombination(a)){for(var u=new Array(t+1),c=0,l=0;l<o.length;++l)a&1<<l&&(u[c++]=o[l]);r.push(u)}return s(r)}function g(e){for(var t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length;o<a;++o){for(var u=new Array(i.length-1),c=0,l=0;c<a;++c)c!==o&&(u[l++]=i[c]);t.push(u)}return s(t)}function y(e,t){for(var r=new b(t),n=0;n<e.length;++n)for(var i=e[n],o=0;o<i.length;++o)for(var a=o+1;a<i.length;++a)r.link(i[o],i[a]);for(var u=[],s=r.ranks,n=0;n<s.length;++n)s[n]=-1;for(n=0;n<e.length;++n){var c=r.find(e[n][0]);s[c]<0?(s[c]=u.length,u.push([e[n].slice(0)])):u[s[c]].push(e[n].slice(0))}return u}function m(e){for(var t=c(s(d(e,0))),r=new b(t.length),n=0;n<e.length;++n)for(var i=e[n],o=0;o<i.length;++o)for(var a=l(t,[i[o]]),u=o+1;u<i.length;++u)r.link(a,l(t,[i[u]]));for(var f=[],h=r.ranks,n=0;n<h.length;++n)h[n]=-1;for(n=0;n<e.length;++n){var p=r.find(l(t,[e[n][0]]));h[p]<0?(h[p]=f.length,f.push([e[n].slice(0)])):f[h[p]].push(e[n].slice(0))}return f}function M(e,t){return t?y(e,t):m(e)}var v=e("bit-twiddle"),b=e("union-find");r.dimension=n,r.countVertices=i,r.cloneCells=o,r.compareCells=a,r.normalize=s,r.unique=c,r.findCell=l,r.incidence=f,r.dual=h,r.explode=p,r.skeleton=d,r.boundary=g,r.connectedComponents=M},{"bit-twiddle":410,"union-find":411}],413:[function(e,t,r){"use strict";function n(e,t,r){return Math.abs(o(e,t,r))/Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function i(e,t,r){function i(e){if(v[e])return 1/0;var r=y[e],i=m[e];return r<0||i<0?1/0:n(t[e],t[r],t[i])}function o(e,t){var r=j[e],n=j[t];j[e]=n,j[t]=r,N[r]=t,N[n]=e}function u(e){return M[j[e]]}function s(e){return 1&e?e-1>>1:(e>>1)-1}function c(e){for(var t=u(e);;){var r=t,n=2*e+1,i=2*(e+1),a=e;if(n<A){var s=u(n);s<r&&(a=n,r=s)}if(i<A&&u(i)<r&&(a=i),a===e)return e;o(e,a),e=a}}function l(e){for(var t=u(e);e>0;){var r=s(e);{if(!(r>=0&&t<u(r)))return e;o(e,r),e=r}}}function f(){if(A>0){var e=j[0];return o(0,A-1),A-=1,c(0),e}return-1}function h(e,t){var r=j[e];return M[r]===t?e:(M[r]=-1/0,l(e),f(),M[r]=t,A+=1,l(A-1))}function p(e,t){if(e[t]<0)return t;var r=t,n=t;do{var i=e[n];if(!v[n]||i<0||i===n)break;if(n=i,i=e[n],!v[n]||i<0||i===n)break;n=i,r=e[r]}while(r!==n);for(var o=t;o!==n;o=e[o])e[o]=n;return n}for(var d=t.length,g=e.length,y=new Array(d),m=new Array(d),M=new Array(d),v=new Array(d),b=0;b<d;++b)y[b]=m[b]=-1,M[b]=1/0,v[b]=!1;for(b=0;b<g;++b){var w=e[b];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],D=w[0];-1!==m[D]?m[D]=-2:m[D]=x,-1!==y[x]?y[x]=-2:y[x]=D}for(var j=[],N=new Array(d),b=0;b<d;++b)(M[b]=i(b))<1/0?(N[b]=j.length,j.push(b)):N[b]=-1;for(var A=j.length,b=A>>1;b>=0;--b)c(b);for(;;){var L=f();if(L<0||M[L]>r)break;!function(e){if(!v[e]){v[e]=!0;var t=y[e],r=m[e];y[r]>=0&&(y[r]=t),m[t]>=0&&(m[t]=r),N[t]>=0&&h(N[t],i(t)),N[r]>=0&&h(N[r],i(r))}}(L)}for(var T=[],b=0;b<d;++b)v[b]||(N[b]=T.length,T.push(t[b].slice()));var E=(T.length,[]);return e.forEach(function(e){var t=p(y,e[0]),r=p(m,e[1]);if(t>=0&&r>=0&&t!==r){var n=N[t],i=N[r];n!==i&&E.push([n,i])}}),a.unique(a.normalize(E)),{positions:T,edges:E}}t.exports=i;var o=e("robust-orientation"),a=e("simplicial-complex")},{"robust-orientation":401,"simplicial-complex":412}],414:[function(e,t,r){"use strict";function n(e,t){var r,n;if(t[0][0]<t[1][0])r=t[0],n=t[1];else{if(!(t[0][0]>t[1][0])){var i=Math.min(e[0][1],e[1][1]),a=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),s=Math.max(t[0][1],t[1][1]);return a<u?a-u:i>s?i-s:a-s}r=t[1],n=t[0]}var c,l;e[0][1]<e[1][1]?(c=e[0],l=e[1]):(c=e[1],l=e[0]);var f=o(n,r,c);return f||(f=o(n,r,l))||l-n}function i(e,t){var r,i;if(t[0][0]<t[1][0])r=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return n(t,e);r=t[1],i=t[0]}var a,u;if(e[0][0]<e[1][0])a=e[0],u=e[1];else{if(!(e[0][0]>e[1][0]))return-n(e,t);a=e[1],u=e[0]}var s=o(r,i,u),c=o(r,i,a);if(s<0){if(c<=0)return s}else if(s>0){if(c>=0)return s}else if(c)return c;if(s=o(u,a,i),c=o(u,a,r),s<0){if(c<=0)return s}else if(s>0){if(c>=0)return s}else if(c)return c;return i[0]-u[0]}t.exports=i;var o=e("robust-orientation")},{"robust-orientation":401}],415:[function(e,t,r){"use strict";function n(e,t,r){this.slabs=e,this.coordinates=t,this.horizontal=r}function i(e,t){return e.y-t}function o(e,t){for(var r=null;e;){var n,i,a=e.key;a[0][0]<a[1][0]?(n=a[0],i=a[1]):(n=a[1],i=a[0]);var u=f(n,i,t);if(u<0)e=e.left;else if(u>0)if(t[0]!==a[1][0])r=e,e=e.right;else{if(s=o(e.right,t))return s;e=e.left}else{if(t[0]!==a[1][0])return e;var s=o(e.right,t);if(s)return s;e=e.left}}return r}function a(e,t,r,n){this.y=e,this.index=t,this.start=r,this.closed=n}function u(e,t,r,n){this.x=e,this.segment=t,this.create=r,this.index=n}function s(e){for(var t=e.length,r=2*t,i=new Array(r),o=0;o<t;++o){var s=e[o],c=s[0][0]<s[1][0];i[2*o]=new u(s[0][0],s,c,o),i[2*o+1]=new u(s[1][0],s,!c,o)}i.sort(function(e,t){var r=e.x-t.x;return r||(r=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])});for(var f=l(h),p=[],d=[],g=[],o=0;o<r;){for(var y=i[o].x,m=[];o<r;){var M=i[o];if(M.x!==y)break;o+=1,M.segment[0][0]===M.x&&M.segment[1][0]===M.x?M.create&&(M.segment[0][1]<M.segment[1][1]?(m.push(new a(M.segment[0][1],M.index,!0,!0)),m.push(new a(M.segment[1][1],M.index,!1,!1))):(m.push(new a(M.segment[1][1],M.index,!0,!1)),m.push(new a(M.segment[0][1],M.index,!1,!0)))):f=M.create?f.insert(M.segment,M.index):f.remove(M.segment)}p.push(f.root),d.push(y),g.push(m)}return new n(p,d,g)}t.exports=s;var c=e("binary-search-bounds"),l=e("functional-red-black-tree"),f=e("robust-orientation"),h=e("./lib/order-segments");n.prototype.castUp=function(e){var t=c.le(this.coordinates,e[0]);if(t<0)return-1;var r=(this.slabs[t],o(this.slabs[t],e)),n=-1;if(r&&(n=r.value),this.coordinates[t]===e[0]){var a=null;if(r&&(a=r.key),t>0){var u=o(this.slabs[t-1],e);u&&(a?h(u.key,a)>0&&(a=u.key,n=u.value):(n=u.value,a=u.key))}var s=this.horizontal[t];if(s.length>0){var l=c.ge(s,e[1],i);if(l<s.length){var p=s[l];if(e[1]===p.y){if(p.closed)return p.index;for(;l<s.length-1&&s[l+1].y===e[1];)if(l+=1,(p=s[l]).closed)return p.index;if(p.y===e[1]&&!p.start){if((l+=1)>=s.length)return n;p=s[l]}}if(p.start)if(a){var d=f(a[0],a[1],[e[0],p.y]);a[0][0]>a[1][0]&&(d=-d),d>0&&(n=p.index)}else n=p.index;else p.y!==e[1]&&(n=p.index)}}}return n}},{"./lib/order-segments":414,"binary-search-bounds":76,"functional-red-black-tree":158,"robust-orientation":401}],416:[function(e,t,r){"use strict";function n(e,t){var r=e.length,n=["'use strict';"],i="surfaceNets"+e.join("_")+"d"+t;n.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&n.push("getters:[0],");for(var o=[],s=[],c=0;c<r;++c)o.push("d"+c),s.push("d"+c);for(c=0;c<1<<r;++c)o.push("v"+c),s.push("v"+c);for(c=0;c<1<<r;++c)o.push("p"+c),s.push("p"+c);o.push("a","b","c"),s.push("a","c"),n.push("vertex:function vertexFunc(",o.join(),"){");for(var l=[],c=0;c<1<<r;++c)l.push("(p"+c+"<<"+c+")");n.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var f=[],h=[];1<<(1<<r)<=128?(n.push("switch(m){"),h=n):n.push("switch(m>>>7){");for(c=0;c<1<<(1<<r);++c){if(1<<(1<<r)>128&&c%128==0){f.length>0&&h.push("}}");var p="vExtra"+f.length;n.push("case ",c>>>7,":",p,"(m&0x7f,",s.join(),");break;"),h=["function ",p,"(m,",s.join(),"){switch(m){"],f.push(h)}h.push("case ",127&c,":");for(var d=new Array(r),g=new Array(r),y=new Array(r),m=new Array(r),M=0,v=0;v<r;++v)d[v]=[],g[v]=[],y[v]=0,m[v]=0;for(v=0;v<1<<r;++v)for(j=0;j<r;++j){var b=v^1<<j;if(!(b>v)&&!(c&1<<b)!=!(c&1<<v)){var w=1;c&1<<b?g[j].push("v"+b+"-v"+v):(g[j].push("v"+v+"-v"+b),w=-w),w<0?(d[j].push("-v"+v+"-v"+b),y[j]+=2):(d[j].push("v"+v+"+v"+b),y[j]-=2),M+=1;for(var x=0;x<r;++x)x!==j&&(b&1<<x?m[x]+=1:m[x]-=1)}}for(var D=[],j=0;j<r;++j)if(0===d[j].length)D.push("d"+j+"-0.5");else{var N="";y[j]<0?N=y[j]+"*c":y[j]>0&&(N="+"+y[j]+"*c");var A=d[j].length/M*.5,L=.5+m[j]/M*.5;D.push("d"+j+"-"+L+"-"+A+"*("+d[j].join("+")+N+")/("+g[j].join("+")+")")}h.push("a.push([",D.join(),"]);","break;")}n.push("}},"),f.length>0&&h.push("}}");for(var T=[],c=0;c<1<<r-1;++c)T.push("v"+c);T.push("c0","c1","p0","p1","a","b","c"),n.push("cell:function cellFunc(",T.join(),"){");var E=u(r-1);n.push("if(p0){b.push(",E.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",E.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(c=0;c<f.length;++c)n.push(f[c].join(""));return new Function("genContour",n.join(""))(a)}function i(e,t){for(var r=s(e,t),n=r.length,i=new Array(n),o=new Array(n),a=0;a<n;++a)i[a]=[r[a]],o[a]=[a];return{positions:i,cells:o}}function o(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return i(e,t);var r=e.order.join()+"-"+e.dtype,o=c[r],t=+t||0;return o||(o=c[r]=n(e.order,e.dtype)),o(e,t)}t.exports=o;var a=e("ndarray-extract-contour"),u=e("triangulate-hypercube"),s=e("zero-crossings"),c={}},{"ndarray-extract-contour":351,"triangulate-hypercube":423,"zero-crossings":463}],417:[function(e,t,r){function n(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||((e=document.createEvent("Event")).initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}window;var i=document||{},o=(i.documentElement,!0);try{i.createEvent("KeyEvents")}catch(e){o=!1}var a=function(e,t){t=t||{};var r=l(e),a=r;"KeyboardEvent"===r&&o&&(r="KeyEvents",a="KeyEvent");var u=i.createEvent(r),c="init"+a,f="function"==typeof u[c]?c:"initEvent",h=s[f],p=[],d={};t.type=e;for(var g=0;g<h.length;++g){var y=t[m=h[g]];void 0===y&&(y=u[m]),d[m]=!0,p.push(y)}u[f].apply(u,p),"KeyboardEvent"===r&&(u=n(u,t));for(var m in t)d[m]||(u[m]=t[m]);return u},u=function(e,t){t=t||{};var r=i.createEventObject();r.type=e;for(var n in t)void 0!==t[n]&&(r[n]=t[n]);return r};t.exports=i.createEvent?a:u;var s=e("./init.json"),c=e("./types.json"),l=function(){var e={};for(var t in c)for(var r=c[t],n=0;n<r.length;n++)e[r[n]]=t;return function(t){return e[t]||"Event"}}()},{"./init.json":418,"./types.json":419}],418:[function(e,t,r){t.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],419:[function(e,t,r){t.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],420:[function(e,t,r){(function(r){function n(e){a.call(this,e),this._destroyed=!1}function i(e,t,r){r(null,e)}function o(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=i),"function"!=typeof n&&(n=null),e(t,r,n)}}var a=e("readable-stream/transform"),u=e("util").inherits,s=e("xtend");u(n,a),n.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=o(function(e,t,r){var i=new n(e);return i._transform=t,r&&(i._flush=r),i}),t.exports.ctor=o(function(e,t,r){function i(t){if(!(this instanceof i))return new i(t);this.options=s(e,t),n.call(this,this.options)}return u(i,n),i.prototype._transform=t,r&&(i.prototype._flush=r),i}),t.exports.obj=o(function(e,t,r){var i=new n(s({objectMode:!0,highWaterMark:16},e));return i._transform=t,r&&(i._flush=r),i})}).call(this,e("_process"))},{_process:377,"readable-stream/transform":398,util:433,xtend:461}],421:[function(e,t,r){"use strict";function n(e,t){var r=a(getComputedStyle(e).getPropertyValue(t));return r[0]*o(r[1],e)}function i(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var i=n(r,"font-size")/128;return t.removeChild(r),i}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return n(t,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}var a=e("parse-unit");t.exports=o;var u=96},{"parse-unit":356}],422:[function(e,t,r){function n(e){function t(e){r(e.targetTouches[0])}function r(e){i(e,a,s),u.emit("move",e)}function n(){a.removeEventListener("mousemove",r,!1),a.removeEventListener("mousedown",r,!1),a.removeEventListener("touchmove",t,!1),a.removeEventListener("touchstart",t,!1)}var a=(e=e||{}).element||window,u=new o,s=e.position||[0,0];return!1!==e.touchstart&&(a.addEventListener("mousedown",r,!1),a.addEventListener("touchstart",t,!1)),a.addEventListener("mousemove",r,!1),a.addEventListener("touchmove",t,!1),u.position=s,u.dispose=n,u}var i=e("mouse-event-offset"),o=e("events").EventEmitter;t.exports=function(e){return n(e).position},t.exports.emitter=function(e){return n(e)}},{events:153,"mouse-event-offset":345}],423:[function(e,t,r){"use strict";function n(e){if(e<0)return[];if(0===e)return[[0]];for(var t=0|Math.round(a(e+1)),r=[],n=0;n<t;++n){for(var u=i.unrank(e,n),s=[0],c=0,l=0;l<u.length;++l)c+=1<<u[l],s.push(c);o(u)<1&&(s[0]=c,s[e]=0),r.push(s)}return r}t.exports=n;var i=e("permutation-rank"),o=e("permutation-parity"),a=e("gamma")},{gamma:159,"permutation-parity":358,"permutation-rank":359}],424:[function(e,t,r){"use strict";function n(e,t,r){var n=e*t,o=i*e,a=o-(o-e),u=e-a,s=i*t,c=s-(s-t),l=t-c,f=u*l-(n-a*c-u*c-a*l);return r?(r[0]=f,r[1]=n,r):[f,n]}t.exports=n;var i=+(Math.pow(2,27)+1)},{}],425:[function(e,t,r){"use strict";function n(e,t,r){var n=e+t,i=n-e,o=t-i,a=e-(n-i);return r?(r[0]=a+o,r[1]=n,r):[a+o,n]}t.exports=n},{}],426:[function(e,t,r){(function(t,n){"use strict";function i(e){if(e){var t=e.length||e.byteLength,r=M.log2(t);x[r].push(e)}}function o(e){i(e.buffer)}function a(e){var e=M.nextPow2(e),t=M.log2(e),r=x[t];return r.length>0?r.pop():new ArrayBuffer(e)}function u(e){return new Uint8Array(a(e),0,e)}function s(e){return new Uint16Array(a(2*e),0,e)}function c(e){return new Uint32Array(a(4*e),0,e)}function l(e){return new Int8Array(a(e),0,e)}function f(e){return new Int16Array(a(2*e),0,e)}function h(e){return new Int32Array(a(4*e),0,e)}function p(e){return new Float32Array(a(4*e),0,e)}function d(e){return new Float64Array(a(8*e),0,e)}function g(e){return b?new Uint8ClampedArray(a(e),0,e):u(e)}function y(e){return new DataView(a(e),0,e)}function m(e){e=M.nextPow2(e);var t=M.log2(e),r=D[t];return r.length>0?r.pop():new n(e)}var M=e("bit-twiddle"),v=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:v([32,0]),UINT16:v([32,0]),UINT32:v([32,0]),INT8:v([32,0]),INT16:v([32,0]),INT32:v([32,0]),FLOAT:v([32,0]),DOUBLE:v([32,0]),DATA:v([32,0]),UINT8C:v([32,0]),BUFFER:v([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=v([32,0])),w.BUFFER||(w.BUFFER=v([32,0]));var x=w.DATA,D=w.BUFFER;r.free=function(e){if(n.isBuffer(e))D[M.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|M.log2(t);x[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=o,r.freeArrayBuffer=i,r.freeBuffer=function(e){D[M.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return u(e);case"uint16":return s(e);case"uint32":return c(e);case"int8":return l(e);case"int16":return f(e);case"int32":return h(e);case"float":case"float32":return p(e);case"double":case"float64":return d(e);case"uint8_clamped":return g(e);case"buffer":return m(e);case"data":case"dataview":return y(e);default:return null}return null},r.mallocArrayBuffer=a,r.mallocUint8=u,r.mallocUint16=s,r.mallocUint32=c,r.mallocInt8=l,r.mallocInt16=f,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=g,r.mallocDataView=y,r.mallocBuffer=m,r.clearCache=function(){for(var e=0;e<32;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,x[e].length=0,D[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":77,buffer:88,dup:151}],427:[function(e,t,r){function n(e,t,r){e.positions&&e.cells&&(r=t,t=e.cells,e=e.positions);var n=e.length?e[0].length:0,i=t.length?t[0].length:0;if(r=r||new Float32Array(t.length*i*n),3===i&&2===n)for(var o=0,a=0,u=t.length;o<u;o+=1){s=t[o];r[a++]=e[s[0]][0],r[a++]=e[s[0]][1],r[a++]=e[s[1]][0],r[a++]=e[s[1]][1],r[a++]=e[s[2]][0],r[a++]=e[s[2]][1]}else if(3===i&&3===n)for(var o=0,a=0,u=t.length;o<u;o+=1){s=t[o];r[a++]=e[s[0]][0],r[a++]=e[s[0]][1],r[a++]=e[s[0]][2],r[a++]=e[s[1]][0],r[a++]=e[s[1]][1],r[a++]=e[s[1]][2],r[a++]=e[s[2]][0],r[a++]=e[s[2]][1],r[a++]=e[s[2]][2]}else for(var o=0,a=0,u=t.length;o<u;o+=1)for(var s=t[o],c=0;c<s.length;c++)for(var l=s[c],f=0;f<n;f++)r[a++]=e[l][f];return r}t.exports=n},{}],428:[function(e,t,r){"use strict";"use restrict";function n(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){for(var t=e,r=this.roots;r[e]!==e;)e=r[e];for(;r[t]!==e;){var n=r[t];r[t]=e,t=n}return e},i.link=function(e,t){var r=this.find(e),n=this.find(t);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],u=i[n];a<u?o[r]=n:u<a?o[n]=r:(o[n]=r,++i[r])}}},{}],429:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,i=e[a],t(i,o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}function i(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,(n=e[o])!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}function o(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),i(e))}t.exports=o},{}],430:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],431:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],432:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],433:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function u(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function s(e,t,n){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return v(i)||(i=s(e,i,n)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),g=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),N(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(A(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(j(t))return e.stylize(Date.prototype.toString.call(t),"date");if(N(t))return l(t)}var m="",M=!1,b=["{","}"];if(d(t)&&(M=!0,b=["[","]"]),A(t)&&(m=" [Function"+(t.name?": "+t.name:"")+"]"),x(t)&&(m=" "+RegExp.prototype.toString.call(t)),j(t)&&(m=" "+Date.prototype.toUTCString.call(t)),N(t)&&(m=" "+l(t)),0===a.length&&(!M||0==t.length))return b[0]+m+b[1];if(n<0)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=M?f(e,t,n,g,a):a.map(function(r){return h(e,t,n,g,r,M)}),e.seen.pop(),p(w,m,b)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return M(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,u=t.length;a<u;++a)O(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),O(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=y(r)?s(e,c.value,null):s(e,c.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function p(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function m(e){return null==e}function M(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return D(e)&&"[object RegExp]"===T(e)}function D(e){return"object"==typeof e&&null!==e}function j(e){return D(e)&&"[object Date]"===T(e)}function N(e){return D(e)&&("[object Error]"===T(e)||e instanceof Error)}function A(e){return"function"==typeof e}function L(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}function I(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),z[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(_,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),u=n[r];r<o;u=n[++r])y(u)||!D(u)?a+=" "+u:a+=" "+i(u);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return o};var S,C={};r.debuglog=function(e){if(w(S)&&(S=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!C[e])if(new RegExp("\\b"+e+"\\b","i").test(S)){var n=t.pid;C[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else C[e]=function(){};return C[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=y,r.isNullOrUndefined=m,r.isNumber=M,r.isString=v,r.isSymbol=b,r.isUndefined=w,r.isRegExp=x,r.isObject=D,r.isDate=j,r.isError=N,r.isFunction=A,r.isPrimitive=L,r.isBuffer=e("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!D(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":432,_process:377,inherits:431}],434:[function(e,t,r){"use strict";function n(e,t){return"object"==typeof t&&null!==t||(t={}),i(e,t.canvas||o,t.context||a,t)}t.exports=n;var i=e("./lib/vtext"),o=null,a=null;"undefined"!=typeof document&&(o=document.createElement("canvas"),o.width=8192,o.height=1024,a=o.getContext("2d"))},{"./lib/vtext":435}],435:[function(e,t,r){"use strict";function n(e,t,r){for(var n=t.textAlign||"start",i=t.textBaseline||"alphabetic",o=[1<<30,1<<30],a=[0,0],u=e.length,s=0;s<u;++s)for(var c=e[s],l=0;l<2;++l)o[l]=0|Math.min(o[l],c[l]),a[l]=0|Math.max(a[l],c[l]);var f=0;switch(n){case"center":f=-.5*(o[0]+a[0]);break;case"right":case"end":f=-a[0];break;case"left":case"start":f=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(i){case"hanging":case"top":h=-o[1];break;case"middle":h=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-a[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/r;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(a[0]-o[0]):"height"in t&&(p=t.height/(a[1]-o[1])),e.map(function(e){return[p*(e[0]+f),p*(e[1]+h)]})}function i(e,t,r,n){var i=0|Math.ceil(t.measureText(r).width+2*n);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var o=3*n;e.height<o&&(e.height=o),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(r,n,2*n);var a=t.getImageData(0,0,i,o);return l(a.data,[o,i,4]).pick(-1,-1,0).transpose(1,0)}function o(e,t){var r=c(e,128);return t?f(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function a(e,t,r,i){var a=o(e,i),u=n(a.positions,t,r),s=a.edges,c="ccw"===t.orientation;if(h(u,s),t.polygons||t.polygon||t.polyline){for(var l=d(s,u),f=new Array(l.length),g=0;g<l.length;++g){for(var y=l[g],m=new Array(y.length),M=0;M<y.length;++M){for(var v=y[M],b=new Array(v.length),w=0;w<v.length;++w)b[w]=u[v[w]].slice();c&&b.reverse(),m[M]=b}f[g]=m}return f}return t.triangles||t.triangulate||t.triangle?{cells:p(u,s,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:s,positions:u}}function u(e,t,r){try{return a(e,t,r,!0)}catch(e){}try{return a(e,t,r,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function s(e,t,r,n){var o=n.size||64,a=n.font||"normal";return r.font=o+"px "+a,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",u(i(t,r,e,o),n,o)}t.exports=s,t.exports.processPixels=u;var c=e("surface-nets"),l=e("ndarray"),f=e("simplify-planar-graph"),h=e("clean-pslg"),p=e("cdt2d"),d=e("planar-graph-to-polyline")},{cdt2d:94,"clean-pslg":101,ndarray:352,"planar-graph-to-polyline":367,"simplify-planar-graph":413,"surface-nets":416}],436:[function(e,t,r){t.exports={name:"webvr-polyfill",version:"0.9.34",homepage:"https://github.com/googlevr/webvr-polyfill",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},main:"src/node-entry",keywords:["vr","webvr"],license:"Apache-2.0",scripts:{start:"npm run watch",watch:"webpack-dev-server",build:"webpack",test:"mocha"},repository:"googlevr/webvr-polyfill",bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"}}},{}],437:[function(e,t,r){function n(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function i(){this.isPolyfilled=!0,this.displayId=l++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new c}function o(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function a(){}function u(){}var s=e("./util.js"),c=e("./wakelock.js"),l=1e3,f=!1,h=[0,0,.5,1],p=[.5,0,.5,1];i.prototype.getFrameData=function(e){return s.frameDataFromPose(e,this.getPose(),this)},i.prototype.getPose=function(){return this.getImmediatePose()},i.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},i.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},i.prototype.wrapForFullscreen=function(e){if(s.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},i.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},i.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(f||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),f=!0),e=[e]),new Promise(function(n,i){if(r.capabilities.canPresent)if(0==e.length||e.length>r.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var o=e[0];if(o.source){var a=o.leftBounds||h,u=o.rightBounds||p;if(t){var c=r.layer_;c.source!==o.source&&(c.source=o.source);for(var l=0;l<4;l++)c.leftBounds[l]=a[l],c.rightBounds[l]=u[l];n()}else{if(r.layer_={predistorted:o.predistorted,source:o.source,leftBounds:a.slice(0),rightBounds:u.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var f=r.wrapForFullscreen(r.layer_.source),d=function(){var e=s.getFullscreenElement();r.isPresenting=f===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},g=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))};r.addFullscreenListeners_(f,d,g),s.requestFullscreen(f)?(r.wakelock_.request(),r.waitingForPresent_=!0):(s.isIOS()||s.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||s.isIOS()||(s.exitFullscreen(),i(new Error("Unable to present.")))}}else n()}else i(new Error("VRDisplay is not capable of presenting."))})},i.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,n){e?(!s.exitFullscreen()&&s.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),s.isWebViewAndroid()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},i.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},i.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},i.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},i.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},i.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},i.prototype.beginPresent_=function(){},i.prototype.endPresent_=function(){},i.prototype.submitFrame=function(e){},i.prototype.getEyeParameters=function(e){return null},a.prototype=new o,u.prototype=new o,t.exports.VRFrameData=n,t.exports.VRDisplay=i,t.exports.VRDevice=o,t.exports.HMDVRDevice=a,t.exports.PositionSensorVRDevice=u},{"./util.js":457,"./wakelock.js":459}],438:[function(e,t,r){function n(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,o.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=o.linkProgram(e,u,s,this.attribs),this.uniforms=o.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(e))}var i=e("./cardboard-ui.js"),o=e("./util.js"),a=e("./deps/wglu-preserve-state.js"),u=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");n.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},n.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];a(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},n.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;o.isIOS()||(t.width=o.getScreenWidth()*this.bufferScale,t.height=o.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,n){e.lastBoundFramebuffer=n||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,n,i,o){e.colorMask[0]=t,e.colorMask[1]=n,e.colorMask[2]=i,e.colorMask[3]=o,e.realColorMask.call(r,t,n,i,o)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,n,i,o){e.clearColor[0]=t,e.clearColor[1]=n,e.clearColor[2]=i,e.clearColor[3]=o,e.realClearColor.call(r,t,n,i,o)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,n,i,o){e.viewport[0]=t,e.viewport[1]=n,e.viewport[2]=i,e.viewport[3]=o,e.realViewport.call(r,t,n,i,o)},this.isPatched=!0,o.safariCssSizeWorkaround(t)}},n.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;o.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){o.safariCssSizeWorkaround(t)},1)}},n.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},n.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),a(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||o.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),o.isIOS()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},n.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,n=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];a(t,n,function(t){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),r.indexCount=i.length}})},n.prototype.computeMeshVertices_=function(e,t,r){for(var n=new Float32Array(2*e*t*5),i=r.getLeftEyeVisibleTanAngles(),a=r.getLeftEyeNoLensTanAngles(),u=r.getLeftEyeVisibleScreenRect(a),s=0,c=0;c<2;c++){for(var l=0;l<t;l++)for(var f=0;f<e;f++,s++){var h=f/(e-1),p=l/(t-1),d=h,g=p,y=o.lerp(i[0],i[2],h),m=o.lerp(i[3],i[1],p),M=Math.sqrt(y*y+m*m),v=r.distortion.distortInverse(M),b=m*v/M;h=(y*v/M-a[0])/(a[2]-a[0]),p=(b-a[3])/(a[1]-a[3]),r.device.widthMeters,r.device.heightMeters,h=2*(u.x+h*u.width-.5),p=2*(u.y+p*u.height-.5),n[5*s+0]=h,n[5*s+1]=p,n[5*s+2]=d,n[5*s+3]=g,n[5*s+4]=c}var w=i[2]-i[0];i[0]=-(w+i[0]),i[2]=w-i[2],w=a[2]-a[0],a[0]=-(w+a[0]),a[2]=w-a[2],u.x=1-(u.x+u.width)}return n},n.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,i=t/2,o=0,a=0,u=0;u<2;u++)for(var s=0;s<t;s++)for(var c=0;c<e;c++,o++)0!=c&&0!=s&&(c<=n==s<=i?(r[a++]=o,r[a++]=o-e-1,r[a++]=o-e,r[a++]=o-e-1,r[a++]=o,r[a++]=o-1):(r[a++]=o-1,r[a++]=o-e,r[a++]=o,r[a++]=o-e,r[a++]=o-1,r[a++]=o-e-1));return r},n.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r},t.exports=n},{"./cardboard-ui.js":439,"./deps/wglu-preserve-state.js":441,"./util.js":457}],439:[function(e,t,r){function n(e){this.gl=e,this.attribs={position:0},this.program=i.linkProgram(e,a,u,this.attribs),this.uniforms=i.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=e("./util.js"),o=e("./deps/wglu-preserve-state.js"),a=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),s=Math.PI/180,c=.3125;n.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},n.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?e(n):n.clientX<42&&n.clientY<42&&t(n)},r.addEventListener("click",this.listener,!1)},n.prototype.onResize=function(){var e=this.gl,t=this,r=[e.ARRAY_BUFFER_BINDING];o(e,r,function(e){function r(e,t){var r=(90-e)*s,n=Math.cos(r),a=Math.sin(r);i.push(c*n*h+o,c*a*h+h),i.push(t*n*h+o,t*a*h+h)}function n(t,r){i.push(p+t,e.drawingBufferHeight-p-r)}var i=[],o=e.drawingBufferWidth/2,a=Math.max(screen.width,screen.height)*window.devicePixelRatio,u=e.drawingBufferWidth/a*window.devicePixelRatio,l=4*u/2,f=42*u,h=28*u/2,p=14*u;i.push(o-l,f),i.push(o-l,e.drawingBufferHeight),i.push(o+l,f),i.push(o+l,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var d=0;d<=6;d++){var g=60*d;r(g,1),r(g+12,1),r(g+20,.75),r(g+40,.75),r(g+48,1)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var y=l/Math.sin(45*s);n(0,h),n(h,0),n(h+y,y),n(y,h+y),n(y,h-y),n(0,h),n(h,2*h),n(h+y,2*h-y),n(y,h-y),n(0,h),n(y,h-l),n(28*u,h-l),n(y,h+l),n(28*u,h+l),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},n.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];o(e,r,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},n.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=n},{"./deps/wglu-preserve-state.js":441,"./util.js":457}],440:[function(e,t,r){function n(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new s,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new u(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new a(this.dpdb_.getDeviceParams()),this.viewerSelector_=new l,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new c),h.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=e("./cardboard-distorter.js"),o=e("./cardboard-ui.js"),a=e("./device-info.js"),u=e("./dpdb/dpdb.js"),s=e("./sensor-fusion/fusion-pose-sensor.js"),c=e("./rotate-instructions.js"),l=e("./viewer-selector.js"),f=e("./base.js").VRDisplay,h=e("./util.js"),p={LEFT:"left",RIGHT:"right"};n.prototype=new f,n.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.resetPose=function(){this.poseSensor_.resetPose()},n.prototype.getEyeParameters=function(e){var t,r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==p.LEFT)r[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=p.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:r,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},n.prototype.onDeviceParamsUpdated_=function(e){h.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},n.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},n.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=h.getScreenWidth()*this.bufferScale_,e.canvas.height=h.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new o(e)):(this.distorter_=new i(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h.isLandscapeMode()&&h.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},n.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},n.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},n.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},n.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",r.join("; ")+";"),h.safariCssSizeWorkaround(t.canvas)}},n.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},n.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=n},{"./base.js":437,"./cardboard-distorter.js":438,"./cardboard-ui.js":439,"./device-info.js":442,"./dpdb/dpdb.js":446,"./rotate-instructions.js":451,"./sensor-fusion/fusion-pose-sensor.js":453,"./util.js":457,"./viewer-selector.js":458}],441:[function(e,t,r){function n(e,t,r){if(t){for(var n=[],i=null,o=0;o<t.length;++o)switch(a=t[o]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((s=t[++o])<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),n.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(a))}r(e);for(o=0;o<t.length;++o){var a=t[o],u=n[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:if((s=t[++o])<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}i&&e.activeTexture(i)}}else r(e)}t.exports=n},{}],442:[function(e,t,r){function n(e){this.width=e.width||s.getScreenWidth(),this.height=e.height||s.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function i(e){this.viewer=f.CardboardV2,this.updateDeviceParams(e),this.distortion=new a(this.viewer.distortionCoefficients)}function o(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var a=e("./distortion/distortion.js"),u=e("./math-util.js"),s=e("./util.js"),c=new n({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),l=new n({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),f={CardboardV1:new o({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new o({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};i.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},i.prototype.getDevice=function(){return this.device},i.prototype.setViewer=function(e){this.viewer=e,this.distortion=new a(this.viewer.distortionCoefficients)},i.prototype.determineDevice_=function(e){if(!e)return s.isIOS()?(console.warn("Using fallback iOS device measurements."),l):(console.warn("Using fallback Android device measurements."),c);var t=.0254/e.xdpi,r=.0254/e.ydpi;return new n({widthMeters:t*s.getScreenWidth(),heightMeters:r*s.getScreenHeight(),bevelMeters:.001*e.bevelMm})},i.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-a,c=u.radToDeg*Math.atan(r.distort(i/n)),l=u.radToDeg*Math.atan(r.distort(o/n)),f=u.radToDeg*Math.atan(r.distort(a/n)),h=u.radToDeg*Math.atan(r.distort(s/n));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(f,e.fov),upDegrees:Math.min(h,e.fov)}},i.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=Math.tan(-u.degToRad*e.fov),i=Math.tan(u.degToRad*e.fov),o=Math.tan(u.degToRad*e.fov),a=Math.tan(-u.degToRad*e.fov),s=t.widthMeters/4,c=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-c,f=e.interLensDistance/2-s,h=-l,p=e.screenLensDistance,d=r.distort((f-s)/p),g=r.distort((h+c)/p),y=r.distort((f+s)/p),m=r.distort((h-c)/p),M=new Float32Array(4);return M[0]=Math.max(n,d),M[1]=Math.min(i,g),M[2]=Math.min(o,y),M[3]=Math.max(a,m),M},i.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-u.degToRad*e.fov)),o=r.distortInverse(Math.tan(u.degToRad*e.fov)),a=r.distortInverse(Math.tan(u.degToRad*e.fov)),s=r.distortInverse(Math.tan(-u.degToRad*e.fov)),c=t.widthMeters/4,l=t.heightMeters/2,f=e.baselineLensDistance-t.bevelMeters-l,h=e.interLensDistance/2-c,p=-f,d=e.screenLensDistance,g=(h-c)/d,y=(p+l)/d,m=(h+c)/d,M=(p-l)/d;return n[0]=Math.max(i,g),n[1]=Math.min(o,y),n[2]=Math.min(a,m),n[3]=Math.max(s,M),n},i.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,n=t.screenLensDistance,i=(r.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-r.bevelMeters,a=(e[0]*n+i)/r.widthMeters,u=(e[1]*n+o)/r.heightMeters,s=(e[2]*n+i)/r.widthMeters,c=(e[3]*n+o)/r.heightMeters;return{x:a,y:c,width:s-a,height:u-c}},i.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},i.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:u.radToDeg*Math.atan(e.outerDist),rightDegrees:u.radToDeg*Math.atan(e.innerDist),downDegrees:u.radToDeg*Math.atan(e.bottomDist),upDegrees:u.radToDeg*Math.atan(e.topDist)}},i.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,n=t.screenLensDistance,i=r.widthMeters/n,o=r.heightMeters/n,a=r.width/i,u=r.height/o,s=Math.round((e.eyePosX-e.outerDist)*a),c=Math.round((e.eyePosY-e.bottomDist)*u);return{x:s,y:c,width:Math.round((e.eyePosX+e.innerDist)*a)-s,height:Math.round((e.eyePosY+e.topDist)*u)-c}},i.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=e.interLensDistance/2/n,o=t.widthMeters/n,a=t.heightMeters/n,s=o/2-i,c=(e.baselineLensDistance-t.bevelMeters)/n,l=e.fov,f=r.distortInverse(Math.tan(u.degToRad*l)),h=Math.min(s,f),p=Math.min(i,f),d=Math.min(c,f);return{outerDist:h,innerDist:p,topDist:Math.min(a-c,f),bottomDist:d,eyePosX:s,eyePosY:c}},i.Viewers=f,t.exports=i},{"./distortion/distortion.js":444,"./math-util.js":448,"./util.js":457}],443:[function(e,t,r){function n(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function i(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}e("./base.js").VRDisplay;var o=e("./base.js").HMDVRDevice,a=e("./base.js").PositionSensorVRDevice;n.prototype=new o,n.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},n.prototype.setFieldOfView=function(e,t,r,n){},i.prototype=new a,i.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=n,t.exports.VRDisplayPositionSensorDevice=i},{"./base.js":437}],444:[function(e,t,r){function n(e){this.coefficients=e}n.prototype.distortInverse=function(e){for(var t=0,r=1,n=e-this.distort(t);Math.abs(r-t)>1e-4;){var i=e-this.distort(r),o=r-i*((r-t)/(i-n));t=r,r=o,n=i}return r},n.prototype.distort=function(e){for(var t=e*e,r=0,n=0;n<this.coefficients.length;n++)r=t*(r+this.coefficients[n]);return(r+1)*e},t.exports=n},{}],445:[function(e,t,r){t.exports={format:1,last_updated:"2017-01-12T08:41:55Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel XL/"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel/"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},{}],446:[function(e,t,r){function n(e,t){if(this.dpdb=o,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,n=this;r.open("GET",u,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function i(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var o=e("./dpdb.json"),a=e("../util.js"),u="https://dpdb.webvr.rocks/dpdb.json";n.prototype.getDeviceParams=function(){return this.deviceParams},n.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},n.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,r=a.getScreenWidth(),n=a.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var o=0;o<e.devices.length;o++){var u=e.devices[o];if(u.rules)if("ios"==u.type||"android"==u.type){if(a.isIOS()==("ios"==u.type)){for(var s=!1,c=0;c<u.rules.length;c++){var l=u.rules[c];if(this.matchRule_(l,t,r,n)){s=!0;break}}if(s)return new i({xdpi:u.dpi[0]||u.dpi,ydpi:u.dpi[1]||u.dpi,bevelMm:u.bw})}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return console.warn("No DPDB device match."),null},n.prototype.matchRule_=function(e,t,r,n){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],o=e.res[1];if(Math.min(r,n)!=Math.min(i,o)||Math.max(r,n)!=Math.max(i,o))return!1}return!0},t.exports=n},{"../util.js":457,"./dpdb.json":445}],447:[function(e,t,r){var n=e("./util.js"),i=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=n.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new i}:new i,window.WebVRPolyfill=i},{"./util.js":457,"./webvr-polyfill.js":460}],448:[function(e,t,r){var n=window.MathUtil||{};n.degToRad=Math.PI/180,n.radToDeg=180/Math.PI,n.Vector2=function(e,t){this.x=e||0,this.y=t||0},n.Vector2.prototype={constructor:n.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},n.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},n.Vector3.prototype={constructor:n.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,u=e.w,s=u*t+o*n-a*r,c=u*r+a*t-i*n,l=u*n+i*r-o*t,f=-i*t-o*r-a*n;return this.x=s*u+f*-i+c*-a-l*-o,this.y=c*u+f*-o+l*-i-s*-a,this.z=l*u+f*-a+s*-o-c*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,u=t.z;return this.x=n*u-i*a,this.y=i*o-r*u,this.z=r*a-n*o,this}},n.Quaternion=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),u=Math.sin(t/2),s=Math.sin(r/2);return this.x=a*i*o+n*u*s,this.y=n*u*o-a*i*s,this.z=n*i*s+a*u*o,this.w=n*i*o-a*u*s,this},setFromEulerYXZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),u=Math.sin(t/2),s=Math.sin(r/2);return this.x=a*i*o+n*u*s,this.y=n*u*o-a*i*s,this.z=n*i*s-a*u*o,this.w=n*i*o+a*u*s,this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,i=e.z,o=e.w,a=t.x,u=t.y,s=t.z,c=t.w;return this.x=r*c+o*a+n*s-i*u,this.y=n*c+o*u+i*a-r*s,this.z=i*c+o*s+r*u-n*a,this.w=o*c-r*a-n*u-i*s,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,n=this.y,i=this.z,o=this.w,a=o*e.w+r*e.x+n*e.y+i*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=r,this.y=n,this.z=i,this;var u=Math.acos(a),s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var c=Math.sin((1-t)*u)/s,l=Math.sin(t*u)/s;return this.w=o*c+this.w*l,this.x=r*c+this.x*l,this.y=n*c+this.y*l,this.z=i*c+this.z*l,this},setFromUnitVectors:function(){var e,t;return function(r,i){return void 0===e&&(e=new n.Vector3),t=r.dot(i)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=n},{}],449:[function(e,t,r){function n(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new o.Quaternion,this.rotateStart_=new o.Vector2,this.rotateEnd_=new o.Vector2,this.rotateDelta_=new o.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=e("./base.js").VRDisplay,o=e("./math-util.js"),a=e("./util.js");n.prototype=new i,n.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},n.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},n.prototype.animatePhi_=function(e){e=a.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},n.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var r=this[e],n=new Date;this.angleAnimation_=requestAnimationFrame(function i(){var o=new Date-n;if(o>=80)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(i.bind(this));var a=o/80;this[e]=r+(t-r)*a}.bind(this))},n.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},n.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,r=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-r)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=a.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},n.prototype.onMouseUp_=function(e){this.isDragging_=!1},n.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},n.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=n},{"./base.js":437,"./math-util.js":448,"./util.js":457}],450:[function(e,t,r){(function(t){void 0!==t&&t.window&&(t.document=t.window.document,t.navigator=t.window.navigator),e("./main")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":447}],451:[function(e,t,r){function n(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var r=document.createElement("img");r.src=this.icon,(t=r.style).marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(r);var n=document.createElement("div");(t=n.style).textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var i=document.createElement("div");(t=i.style).backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(t=a.style).float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(o),i.appendChild(a),this.overlay=e,this.text=n,this.hide()}var i=e("./util.js");n.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;i.isLandscapeMode()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},n.prototype.hide=function(){this.overlay.style.display="none"},n.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},n.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},n.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},n.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},t.exports=n},{"./util.js":457}],452:[function(e,t,r){function n(e){this.kFilter=e,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,a.isIOS()?this.filterQ=new o.Quaternion(-1,0,0,1):this.filterQ=new o.Quaternion(1,0,0,1),this.previousFilterQ=new o.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new o.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new o.Vector3,this.measuredGravity=new o.Vector3,this.gyroIntegralQ=new o.Quaternion}var i=e("./sensor-sample.js"),o=e("../math-util.js"),a=e("../util.js");n.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},n.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;a.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},n.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new o.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new o.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),a.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",o.radToDeg*a.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new o.Quaternion;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},n.prototype.getOrientation=function(){return this.filterQ},n.prototype.accelToQuaternion_=function(e){var t=new o.Vector3;t.copy(e),t.normalize();var r=new o.Quaternion;return r.setFromUnitVectors(new o.Vector3(0,0,-1),t),r.inverse(),r},n.prototype.gyroToQuaternionDelta_=function(e,t){var r=new o.Quaternion,n=new o.Vector3;return n.copy(e),n.normalize(),r.setFromAxisAngle(n,e.length()*t),r},t.exports=n},{"../math-util.js":448,"../util.js":457,"./sensor-sample.js":455}],453:[function(e,t,r){function n(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new u.Vector3,this.gyroscope=new u.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new o(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new a,this.filterToWorldQ=new u.Quaternion,s.isIOS()?this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new u.Quaternion,this.worldToScreenQ=new u.Quaternion,this.originalPoseAdjustQ=new u.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new u.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),s.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new u.Quaternion,this.isFirefoxAndroid=s.isFirefoxAndroid(),this.isIOS=s.isIOS(),this.orientationOut_=new Float32Array(4)}var i=e("./complementary-filter.js"),o=e("./pose-predictor.js"),a=e("../touch-panner.js"),u=e("../math-util.js"),s=e("../util.js");n.prototype.getPosition=function(){return null},n.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new u.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},n.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),s.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},n.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},n.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,n=e.timeStamp/1e3;this.isFirefoxAndroid&&(n/=1e3);var i=n-this.previousTimestampS;if(i<=s.MIN_TIMESTEP||i>s.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n);this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),this.previousTimestampS=n},n.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},n.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},n.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},n.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),s.isIOS()&&s.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},n.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=n},{"../math-util.js":448,"../touch-panner.js":456,"../util.js":457,"./complementary-filter.js":452,"./pose-predictor.js":454}],454:[function(e,t,r){function n(e){this.predictionTimeS=e,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=e("../math-util"),o=e("../util");n.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var n=new i.Vector3;n.copy(t),n.normalize();var a=t.length();if(a<20*i.degToRad)return o.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var u=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(n,u),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},t.exports=n},{"../math-util":448,"../util":457}],455:[function(e,t,r){function n(e,t){this.set(e,t)}n.prototype.set=function(e,t){this.sample=e,this.timestampS=t},n.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=n},{}],456:[function(e,t,r){function n(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=e("./math-util.js"),o=e("./util.js");n.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},n.prototype.resetSensor=function(){this.theta=0},n.prototype.onTouchStart_=function(e){e.touches&&1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},n.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),o.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},n.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=n},{"./math-util.js":448,"./util.js":457}],457:[function(e,t,r){var n=window.Util||{};n.MIN_TIMESTEP=.001,n.MAX_TIMESTEP=1,n.base64=function(e,t){return"data:"+e+";base64,"+t},n.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)},n.lerp=function(e,t,r){return e+(t-e)*r},n.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)})},n.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),n.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),n.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),n.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),n.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},n.isTimestampDeltaValid=function(e){return!(isNaN(e)||e<=n.MIN_TIMESTEP||e>n.MAX_TIMESTEP)},n.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},n.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},n.requestFullscreen=function(e){if(n.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},n.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},n.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},n.linkProgram=function(e,t,r,n){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var a=e.createProgram();e.attachShader(a,i),e.attachShader(a,o);for(var u in n)e.bindAttribLocation(a,n[u],u);return e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),a},n.getProgramUniforms=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",o=0;o<n;o++)r[i=e.getActiveUniform(t,o).name.replace("[0]","")]=e.getUniformLocation(t,i);return r},n.orthoMatrix=function(e,t,r,n,i,o,a){var u=1/(t-r),s=1/(n-i),c=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*u,e[13]=(i+n)*s,e[14]=(a+o)*c,e[15]=1,e},n.copyArray=function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]},n.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},n.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},n.safariCssSizeWorkaround=function(e){if(n.isIOS()){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(r)+"px",setTimeout(function(){e.style.width=t,e.style.height=r},100)}window.Util=n,window.canvas=e},n.isDebug=function(){return n.getQueryParameter("debug")},n.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.frameDataFromPose=function(){function e(e,t,r,n){var i=Math.tan(t?t.upDegrees*o:a),u=Math.tan(t?t.downDegrees*o:a),s=Math.tan(t?t.leftDegrees*o:a),c=Math.tan(t?t.rightDegrees*o:a),l=2/(s+c),f=2/(i+u);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(s-c)*l*.5,e[9]=(i-u)*f*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function t(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=n+n,s=i+i,c=o+o,l=n*u,f=n*s,h=n*c,p=i*s,d=i*c,g=o*c,y=a*u,m=a*s,M=a*c;return e[0]=1-(p+g),e[1]=f+M,e[2]=h-m,e[3]=0,e[4]=f-M,e[5]=1-(l+g),e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-(l+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function r(e,t,r){var n,i,o,a,u,s,c,l,f,h,p,d,g=r[0],y=r[1],m=r[2];return t===e?(e[12]=t[0]*g+t[4]*y+t[8]*m+t[12],e[13]=t[1]*g+t[5]*y+t[9]*m+t[13],e[14]=t[2]*g+t[6]*y+t[10]*m+t[14],e[15]=t[3]*g+t[7]*y+t[11]*m+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*g+u*y+f*m+t[12],e[13]=i*g+s*y+h*m+t[13],e[14]=o*g+c*y+p*m+t[14],e[15]=a*g+l*y+d*m+t[15]),e}function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],M=r*u-n*a,v=r*s-i*a,b=r*c-o*a,w=n*s-i*u,x=n*c-o*u,D=i*c-o*s,j=l*g-f*d,N=l*y-h*d,A=l*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*T+c*L)*I,e[1]=(i*T-n*E-o*L)*I,e[2]=(g*D-y*x+m*w)*I,e[3]=(h*x-f*D-p*w)*I,e[4]=(s*A-a*E-c*N)*I,e[5]=(r*E-i*A+o*N)*I,e[6]=(y*b-d*D-m*v)*I,e[7]=(l*D-h*b+p*v)*I,e[8]=(a*T-u*A+c*j)*I,e[9]=(n*A-r*T-o*j)*I,e[10]=(d*x-g*b+m*M)*I,e[11]=(f*b-l*x-p*M)*I,e[12]=(u*N-a*L-s*j)*I,e[13]=(r*L-n*N+i*j)*I,e[14]=(g*v-d*w-y*M)*I,e[15]=(l*w-f*v+h*M)*I,e):null}function i(i,o,a,c,l){e(i,c?c.fieldOfView:null,l.depthNear,l.depthFar),t(o,a.orientation||u,a.position||s),c&&r(o,o,c.offset),n(o,o)}var o=Math.PI/180,a=.25*Math.PI,u=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);return function(e,t,r){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,r.getEyeParameters("left"),r),i(e.rightProjectionMatrix,e.rightViewMatrix,t,r.getEyeParameters("right"),r),0))}}(),n.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=n.getDomainFromUrl(document.referrer),r=n.getDomainFromUrl(window.location.href);return e&&t!==r},n.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},t.exports=n},{}],458:[function(e,t,r){function n(){try{this.selectedKey=localStorage.getItem(a)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=o),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=e("./device-info.js"),o=(e("./util.js"),"CardboardV1"),a="WEBVR_CARDBOARD_VIEWER";n.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},n.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},n.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},n.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},n.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},n.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},n.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&i.Viewers[this.selectedKey]){this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(a,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},n.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div"),n=r.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div");(n=i.style).boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var o in e)i.appendChild(this.createChoice_(o,e[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(i),t},n.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},n.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,r.appendChild(n),r.appendChild(i),r},n.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",t),r},t.exports=n},{"./device-info.js":442,"./util.js":457}],459:[function(e,t,r){function n(){function e(e,t,r){var n=document.createElement("source");n.src=r,n.type="video/"+t,e.appendChild(n)}var t=document.createElement("video");t.setAttribute("loop",""),e(t,"webm",o.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),e(t,"mp4",o.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){t.paused&&t.play()},this.release=function(){t.pause()}}function i(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var o=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?i:n}()},{"./util.js":457}],460:[function(e,t,r){function n(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=c,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return o.frameDataFromPose(e,this.getPose(),this)})}var o=e("./util.js"),a=e("./cardboard-vr-display.js"),u=e("./mouse-keyboard-vr-display.js"),s=e("./base.js").VRDisplay,c=e("./base.js").VRFrameData,l=e("./base.js").HMDVRDevice,f=e("./base.js").PositionSensorVRDevice,h=e("./display-wrappers.js").VRDisplayHMDDevice,p=e("./display-wrappers.js").VRDisplayPositionSensorDevice,d=e("../package.json").version;n.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},n.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},n.prototype.connectDisplay=function(e){e.fireVRDisplayConnect_(),this.displays.push(e)},n.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new a,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new p(e)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new u,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new p(e)))),this.devicesPopulated=!0}},n.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var e=new window.VRFrameData,t=window.VRDisplay.prototype.getFrameData;window.VRFrameData=c,window.VRDisplay.prototype.getFrameData=function(r){t.call(this,e),r.pose=e.pose,o.copyArray(e.leftProjectionMatrix,r.leftProjectionMatrix),o.copyArray(e.rightProjectionMatrix,r.rightProjectionMatrix),o.copyArray(e.leftViewMatrix,r.leftViewMatrix),o.copyArray(e.rightViewMatrix,r.rightViewMatrix)}}if(window.VRDisplay=s,navigator&&!navigator.vrEnabled){var r=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return r.isCardboardCompatible()&&(r.isFullScreenAvailable()||o.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=c)},n.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=l,window.PositionSensorVRDevice=f},n.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(e);var t,r=this.nativeGetVRDisplaysFunc.call(navigator),n=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return o.race([r,n]).then(function(r){return clearTimeout(t),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?r.concat(e):r.length>0?r:e})},n.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,r){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(r){for(var n=0;n<r.length;++n)e.devices.push(new h(r[n])),e.devices.push(new p(r[n]));e.devicesPopulated=!0,t(e.devices)},r);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var n=0;n<r.length;++n)r[n]instanceof l&&e.devices.push(r[n]),r[n]instanceof f&&e.devices.push(r[n]);e.devicesPopulated=!0,t(e.devices)},r)}e.populateDevices(),t(e.devices)}catch(e){r(e)}})},n.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},n.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},n.version=d,t.exports.WebVRPolyfill=n},{"../package.json":436,"./base.js":437,"./cardboard-vr-display.js":440,"./display-wrappers.js":443,"./mouse-keyboard-vr-display.js":449,"./util.js":457}],461:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}],462:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":143}],463:[function(e,t,r){"use strict";function n(e,t){var r=[];return t=+t||0,i(e.hi(e.shape[0]-1),r,t),r}t.exports=n;var i=e("./lib/zc-core")},{"./lib/zc-core":462}]},{},[31])(31)});
