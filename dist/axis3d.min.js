!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).axis3d=t()}}(function(){return function t(e,r,n){function i(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r||t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./orthographic");Object.defineProperty(r,"OrthographicCamera",{enumerable:!0,get:function(){return n.OrthographicCamera}});var i=t("./perspective");Object.defineProperty(r,"PerspectiveCamera",{enumerable:!0,get:function(){return i.PerspectiveCamera}})},{"./orthographic":2,"./perspective":3}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.OrthographicCameraContext=r.OrthographicCamera=r.kDefaultCameraNear=r.kDefaultCameraFar=void 0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=t("../core/camera"),h=(t("../utils"),n(t("orthographic-camera"))),p=n(t("defined")),d=(t("gl-vec4"),r.kDefaultCameraFar=1e3),g=r.kDefaultCameraNear=.1,y=(r.OrthographicCamera=function(t){function e(t,r){o(this,e);var n=new y(t,c({},r));return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,c({},r,{context:n})))}return u(e,t),e}(f.Camera),r.OrthographicCameraContext=function(t){function e(t,r){o(this,e);var n=(0,p.default)(r.far,d),u=(0,p.default)(r.near,g),s=(0,h.default)({position:[].concat(i(r.position||[0,0,0])),near:u,far:n});return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,c({},r,{controller:s})))}return u(e,t),l(e,[{key:"updateCameraViewport",value:function(t){var e=t.viewportWidth,r=t.viewportHeight,n=t.viewport,i=void 0===n?this.initialViewport:n,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,a=void 0===o?i:o;Object.assign(this.controller.viewport,a||[-e,-r,e,r])}}]),e}(f.CameraContext))},{"../core/camera":4,"../utils":55,defined:146,"gl-vec4":300,"orthographic-camera":353}],3:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.PerspectiveCameraContext=r.PerspectiveCamera=r.kDefaultCameraFieldOfView=r.kDefaultCameraNear=r.kDefaultCameraFar=void 0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h=t("../core/camera"),p=t("../utils"),d=n(t("perspective-camera")),g=n(t("defined")),y=r.kDefaultCameraFar=1e3,m=r.kDefaultCameraNear=.01,M=r.kDefaultCameraFieldOfView=(0,p.radians)(60),v=(r.PerspectiveCamera=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var n=new v(t,r);return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({},r,{context:n})))}return u(e,t),e}(h.Camera),r.PerspectiveCameraContext=function(t){function e(t,r){o(this,e);var n=(0,g.default)(r.fov,r.fieldOfView,M),u=(0,g.default)(r.far,y),s=(0,g.default)(r.near,m),l=(0,d.default)({direction:[].concat(i(r.direction||[0,0,-1])),position:[].concat(i(r.position||[0,0,0])),near:s,fov:n,far:u}),c=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({},r,{controller:l})));return c.fov=function(){return c.updateCameraController.apply(c,arguments),c.controller.fov},c}return u(e,t),l(e,[{key:"updateCameraController",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fov,r=void 0===t?this.controller.fov:t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fov,i=void 0===n?r:n;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateCameraController",this).apply(this,arguments),i&&this.controller.fov!=i&&(this.controller.fov=i),this.controller.update()}}]),e}(h.CameraContext))},{"../core/camera":4,"../utils":55,defined:146,"perspective-camera":358}],4:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.CameraUniforms=r.CameraContext=r.Camera=void 0;var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h=t("../core/object3d"),p=t("../math"),d=t("../stats"),g=n(t("eye-vector")),y=n(t("defined")),m=n(t("gl-mat4")),M=n(t("gl-vec3")),v=n(t("gl-quat")),b=new p.Quaternion,w=m.default.identity([]),x=(r.Camera=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),(0,d.registerStat)("Camera");var n=r.context,i=void 0===n?new x(t,r):n,s=r.uniforms,l=void 0===s?new D(t,r):s,c=t.regl({context:i,uniforms:l});return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({},r,{update:function(t,e,r){o(t),c(e,r)}})))}return s(e,t),e}(h.Object3D),r.CameraContext=function(t){function e(t,r){a(this,e);var n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({},r,{computeTransformMatrix:!1,computeLocalMatrix:!1}))),i=r.initialTarget,s=void 0===i?new p.Vector3(0,0,0):i,l=r.controller;if(null==l)throw TypeError("CameraContext expects a controller.");var c=m.default.identity([]),h=new p.Vector3(0,0,0);return Object.defineProperties(n,{initialViewport:{get:function(){return r.viewport},enumerable:!1},initialTarget:{get:function(){return s},enumerable:!1},viewMatrix:{get:function(){return c},enumerable:!1},controller:{get:function(){return l},enumerable:!1}}),n.aspect=function(t){return t.viewportWidth/t.viewportHeight},n.projection=function(){return n.updateCameraController.apply(n,arguments),l.projection.slice()},n.view=function(){return n.computeViewMatrix.apply(n,arguments)},n.direction=function(){return n.updateCameraController.apply(n,arguments),l.direction},n.target=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target;return o(t),(0,y.default)(e,s)},n.near=function(){return n.updateCameraController.apply(n,arguments),l.near},n.far=function(){return n.updateCameraController.apply(n,arguments),l.far},n.eye=function(){return(0,g.default)(c,h),h},n.up=function(){return n.updateCameraController.apply(n,arguments),l.up},n.createPickingRay=function(t){var e=t.viewportHeight,r=0,n=0;return function(t){return t(function(t){var i=t.currentX,o=t.currentY;r=i,n=e-o}),l.createPickingRay([r,n])}},n.viewport=function(t,e){return o(t),e=e||{},(0,y.default)(e.viewport,r.viewport,null)},n}return s(e,t),c(e,[{key:"computeViewMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.position,n=void 0===r?this.initialPosition:r,i=e.rotation,a=void 0===i?this.initialRotation:i,u=e.target,s=void 0===u?this.initialTarget:u,l=e.scale,c=void 0===l?this.initialScale:l;if(o(t),this.updateCameraController.apply(this,arguments),this.updateCameraViewport.apply(this,arguments),n&&a&&c){var f=(this.localMatrix,this.viewMatrix),h=this.controller;return h.identity(),h.translate(n),h.lookAt(M.default.multiply([],s,c)),h.update(),v.default.normalize(b,a),m.default.copy(f,h.view),m.default.fromQuat(w,b),m.default.multiply(f,f,w),f}}},{key:"updateCameraController",value:function(t){var e=t.near,r=void 0===e?this.controller.near:e,n=t.far,i=void 0===n?this.controller.far:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.near,u=void 0===a?r:a,s=o.far,l=void 0===s?i:s,c=!1;l&&this.controller.far!=l&&(this.controller.far=l,c=!0),u&&this.controller.near!=u&&(this.controller.near=u,c=!0),c&&this.controller.update()}},{key:"updateCameraViewport",value:function(t){var e=t.viewportTop,r=void 0===e?-1:e,n=t.viewportLeft,i=void 0===n?-1:n,o=t.viewportWidth,a=t.viewportHeight,u=t.viewport,s=void 0===u?null:u,l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,c=void 0===l?s:l;Object.assign(this.controller.viewport,c||[i,r,o,a])}}]),e}(h.Object3DContext)),D=r.CameraUniforms=function t(e,r){a(this,t),this["camera.projection"]=function(t){return t.projection},this["camera.aspect"]=function(t){return t.aspect},this["camera.view"]=function(t){return t.view},this["camera.eye"]=function(t){return[].concat(i(t.eye))}}},{"../core/object3d":17,"../math":47,"../stats":54,defined:146,"eye-vector":155,"gl-mat4":188,"gl-quat":213,"gl-vec3":270}],5:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,r){for(;r.length<e;)r=""+t+r;return r}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Color=void 0;var c="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":l(t)},f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../math/vector_swizzle_map")),d=t("../utils"),g=(t("./command"),t("../math")),y=n(t("color-string")),m=n(t("color-space")),M=n(t("clamp"));r.Color=function(t){function e(){o(this,e);for(var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,0,0,0,0)),r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.set(n),t}return u(e,t),f(e,[{key:"onchange",value:function(t,e){var r=this.elements;3==t?r[t]=(0,M.default)(e,0,1):e>255?r[t]=1:e>1?r[t]=e/255:e<0&&(r[t]=0)}},{key:"set",value:function(){for(var t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return 1==n.length&&(n=n[0]),n=e.parseInput(n),n?(t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this)).call.apply(t,[this].concat(i(n))):this}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex",e=arguments[1];"hex"==t&&(e=!0);var r=this.toArray(e);return"name"==t&&(t="keyword"),y.default.to[t](r)}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toArray",this).call(this);if(t)for(var n=0;n<3;++n)r[n]*=255,r[n]|=0;return[].concat(i(r))}},{key:"valueOf",value:function(){var t=this.toString("hex",!0).replace("#","");return t=s(0,6,t),Function("return 0x"+t)()}}],[{key:"swizzles",value:function(){return p.Color}},{key:"parseInput",value:function(t){if((0,d.isArrayLike)(t)&&1==t.length&&(t=t[0]),"string"==typeof t?t=e.parseString(t):"number"==typeof t&&(t=e.parseInt(t)),null==t)return null;var r=t[3]||0;if(t&&"object"==(void 0===t?"undefined":c(t)))if("rgb"==t.model)t=t.value,r=t[3];else if(r=t.value?t.value[3]:t[3],m.default[t.model])try{t=m.default[t.model].rgb(t.value)}catch(t){console.warn("Color conversation failed",t)}return[].concat(i([].concat(i(t)).slice(0,3)),[r||1])}},{key:"parseString",value:function(t){return"string"==typeof t?y.default.get(t.replace(/\s+/g,""))||null:null}},{key:"parseInt",value:function(t){if("number"==typeof t){var r=e.parseString("#"+s(0,6,t.toString("16")));if(r)return r;if(r=e.parseString("rgba("+(0,M.default)(t>>24&255,0,255)+","+(0,M.default)(t>>16&255,0,255)+","+(0,M.default)(t>>8&255,0,255)+","+(0,M.default)(255&t,0,1)+")"))return r}return null}}]),e}(g.Vector4)},{"../math":47,"../math/vector_swizzle_map":51,"../utils":55,"./command":6,clamp:98,"color-space":113,"color-string":137}],6:[function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=0;r.Command=function(t){function e(t){var r,a;if(i(this,e),"function"!=typeof t)throw new TypeError("Command constructor expects a function.");var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e.codegen(function(t){return t.apply(t,Array.prototype.slice.call(arguments,1))}))),s=u,l=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return u.apply(void 0,[t].concat(r))},c=e.id();return a=Object.assign(function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return l.call.apply(l,[s].concat(e))},(r={},n(r,"this",s),n(r,"id",c),r)),o(u,a)}return a(e,t),s(e,null,[{key:"id",value:function(){return l++}},{key:"count",value:function(){return l}},{key:"codegen",value:function(t){if("function"!=typeof t)throw new TypeError("Expecting a function.");return"return ("+String(t)+").apply(this, arguments);"}}]),e}(Function)},{}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Context=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=t("../stats"),h=t("events"),p=n(t("defined")),d=n(t("global/window")),g=n(t("dom-events")),y=(t("glslify"),n(t("regl")));r.Context=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.default;o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));(0,f.registerStat)("Context"),n.setMaxListeners(1/0),n._hasFocus=!1,n._reglContext=null,t.regl=(0,p.default)(t.regl,t.gl||{}),t.element&&"CANVAS"==t.element.nodeName?t.regl.canvas=t.element:t.element&&t.element.nodeName?t.regl.container=t.element:"string"==typeof t.element&&(t.regl.container=t.element),r(l({},t.regl,{attributes:l({},t.regl.attributes||{}),extensions:[].concat(i(t.regl.extensions||[]),["OES_texture_float"]),optionalExtensions:[].concat(i(t.regl.optionalExtensions||[])),onDone:function(t,e){if(t)return n.emit("error",t);n._regl=e,n._domElement=n._regl._gl.canvas,n._isDestroyed=!1}}));var u=function(){n.blur()},s=function(){n.focus()},c=function(){n.blur()},h=function(t){t.target==n._domElement?n.focus():n.blur()};return g.default.on(n._domElement,"focus",s),g.default.on(n._domElement,"blur",u),g.default.on(d.default,"blur",function(){return c}),g.default.on(document,"mousedown",h),g.default.on(document,"touchstart",h),n.once("beforedestroy",function(){g.default.off(n._domElement,"focus",s),g.default.off(n._domElement,"blur",u),g.default.off(d.default,"blur",c),g.default.off(document,"mousedown",h),g.default.off(document,"touchstart",h)}),n}return u(e,t),c(e,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"destroy",value:function(){return this.emit("beforedestroy"),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._hasFocus=!1,this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._domElement,delete this._reglContext,this.emit("destroy"),this}},{key:"refresh",value:function(){return this._regl&&"function"==typeof this._regl._refresh&&this._regl.refresh(),this}},{key:"reglContext",get:function(){return this._reglContext||null}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl._gl||null}}]),e}(h.EventEmitter)},{"../stats":54,defined:146,"dom-events":147,events:151,"global/window":318,glslify:329,regl:397}],8:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.ExtrudeGeometry=r.kDefaultExtrudeGeometryPathSteps=r.kDefaultExtrudeGeometryPathZCoefficient=void 0;var l=t("../utils"),c=t("./geometry"),f=n(t("extrude")),h=n(t("extrude-by-path")),p=n(t("extrude-edges")),d=n(t("clean-pslg")),g=(t("defined"),n(t("cdt2d")));r.kDefaultExtrudeGeometryPathZCoefficient=.001,r.kDefaultExtrudeGeometryPathSteps=10,r.ExtrudeGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.positions,n=t.edges,u=t.cells,s=t.path,c=t.closed,y=void 0===c||c;o(this,e);var m=null;if(0==(0,l.isArrayLike)(r))throw new TypeError("Expecting positions to be an array.");if(0==r.length)throw new TypeError("Empty positions array given.");if(null==s)m=(0,f.default)(r,{bottom:-1,top:1});else{if(y=Boolean(y),0==(0,l.isArrayLike)(s))throw new TypeError("Expecting path to be an array.");if(0==s.length)throw new TypeError("Empty path array given.");if(null==n){var M=[].concat(i(p.default.faces(r)));n=[];for(var v=0;v<M.length;v+=2)n.push([M[v],M[v+1]])}else{if(0==(0,l.isArrayLike)(n))throw new TypeError("Expecting edges to be an array.");if(0==n.length)throw new TypeError("Empty edges array given.")}if(null==u)u=(0,g.default)(r);else{if(u&&0==(0,l.isArrayLike)(u))throw new TypeError("Expecting cells to be an array.");if(0==u.length)throw new TypeError("Empty cells array given.")}(0,d.default)(r,n),m=(0,h.default)({positions:r,closed:y,edges:n,cells:u,path:s})}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:m}))}return u(e,t),e}(c.Geometry)},{"../utils":55,"./geometry":10,cdt2d:92,"clean-pslg":99,defined:146,extrude:154,"extrude-by-path":152,"extrude-edges":153}],9:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.FrameState=r.FrameUniforms=r.FrameContext=r.Frame=r.kDefaultFrameClearState=r.kDefaultFrameDepthState=r.kDefaultFrameCullingState=r.kDefaultFrameBlendingState=void 0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l=t("./material"),c=t("../stats"),f=t("./command"),h=(t("../utils"),t("./color"),function(t){return t&&t.__esModule?t:{default:t}}(t("defined"))),p=r.kDefaultFrameBlendingState=Object.seal({equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}}),d=r.kDefaultFrameCullingState=Object.seal({enable:!0,face:"back"}),g=r.kDefaultFrameDepthState=Object.seal({enable:!0,range:[0,1],func:"less",mask:!0}),y=r.kDefaultFrameClearState=Object.seal({color:[17/255,17/255,17/255,1],depth:1}),m=(r.Frame=function(t){function e(t){function r(t){return l.init(h).enqueue(t),function(){l.cancelFrame()}}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),(0,c.incrementStat)("Frame");var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),u=new M(t,o.uniforms||{}),l=new m(t,o.context||{}),f=new v(t,o.state||{}),h=t.regl(s({uniforms:u,context:l},f));return a}return o(e,t),e}(f.Command),r.FrameContext=function(){function t(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),Object.assign(this,i);var o=s({},y,i.clear),a=[],u=[];Object.defineProperties(this,{reglContext:{enumerable:!1,writable:!0,value:null},isCancelled:{enumerable:!1,writable:!0,value:!1},clearState:{get:function(){return o},enumerable:!1},queue:{get:function(){return u},enumerable:!1},loop:{enumerable:!1,writable:!0,value:null},ctx:{get:function(){return e},enumerable:!1}}),this.lights=function(){return a},this.cancel=function(){return function(){r.cancelFrame.apply(r,arguments)}},this.clear=function(){return function(){r.clearBuffers.apply(r,arguments)}},this.regl=function(){return e.regl},this.gl=function(){return e.gl}}return u(t,[{key:"enqueue",value:function(t){return this.queue.push(t),this}},{key:"dequeue",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,u=this.queue[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;"function"==typeof s&&s.apply(void 0,[this.reglContext].concat(e))}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return this}},{key:"init",value:function(t){var e=this;return(this.isCancelled||null==this.loop)&&(this.isCancelled=!1,this.loop=this.ctx.regl.frame(function(){t(function(){(0,c.registerStat)("Frame refresh");try{e.onrefresh.apply(e,arguments)}catch(t){e.cancelFrame(),e.ctx.emit("error",t)}})})),this}},{key:"cancelFrame",value:function(){this.loop&&(this.queue.splice(0,-1),this.loop.cancel(),this.ctx._reglContext=this.reglContext=this.loop=null)}},{key:"clearBuffers",value:function(t){this.ctx.regl.clear(s({},this.clearState,t))}},{key:"onrefresh",value:function(t){this.reglContext=t,this.ctx._reglContext=t,this.clearBuffers(),t.lights.splice(0,t.lights.length);for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.dequeue.apply(this,r)}}]),t}()),M=r.FrameUniforms=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),Object.assign(this,r),this.time=function(t){return t.time},this.tick=function(t){return t.tick}},v=r.FrameState=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),Object.assign(this,s({},r)),delete this.blending,delete this.culling,this.frag=(0,h.default)(r.frag,r.fragmentShader,l.kDefaultMaterialFragmentShader),this.blend=s({},p,r.blend||r.blending),this.cull=s({},d,r.cull||r.culling),this.depth=s({},g,r.depth);for(var i in this)null==this[i]&&delete this[i]}},{"../stats":54,"../utils":55,"./color":5,"./command":6,"./material":15,defined:146}],10:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Geometry=void 0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../math/vector"),s=n(t("bound-points")),l=(t("screen-projected-lines"),n(t("mesh-reindex"))),c=n(t("unindex-mesh")),f=n(t("normals"));r.Geometry=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.complex,n=void 0===r?null:r,i=e.flatten,a=void 0!==i&&i;o(this,t),Object.defineProperty(this,"_complex",{enumerable:!1,writable:!1,value:{}}),this.flatten=a,this.complex=n||null}return a(t,[{key:"computeBoundingBox",value:function(){return(0,s.default)(this.positions).map(function(t){switch(t.length){case 3:return new(Function.prototype.bind.apply(u.Vector3,[null].concat(i(t))));case 2:return new(Function.prototype.bind.apply(u.Vector2,[null].concat(i(t))))}})}},{key:"complex",set:function(e){if(e instanceof t&&(e=e.complex),e){if(this.flatten&&e.cells){var r=e.cells.map(function(t){return t.slice()}),n=(0,l.default)((0,c.default)(e.positions,r));try{e.normals=f.default.vertexNormals(n.cells,n.positions)}catch(t){console.warn("Unable to compute vertex normals.")}Object.assign(e,n)}if(null==e.normals&&e.positions&&e.cells)try{e.normals=f.default.vertexNormals(e.cells,e.positions)}catch(t){console.warn("Unable to compute vertex normals.")}}return Object.assign(this._complex,e),e},get:function(){return this._complex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),t}()},{"../math/vector":50,"bound-points":76,"mesh-reindex":341,normals:352,"screen-projected-lines":406,"unindex-mesh":425}],11:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.GeometryBufferState=r.GeometryBuffer=r.kDefaultGeometryBufferFragmentShader=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=t("../stats"),l=t("./command"),c=function(t){return t&&t.__esModule?t:{default:t}}(t("glsl-inject-defines")),f=(t("glslify"),r.kDefaultGeometryBufferFragmentShader="#extension GL_EXT_draw_buffers: require\nprecision mediump float;\n#define GLSLIFY 1\n\n/**\n * Shader uniforms.\n */\n\n#ifdef HAS_ALBEDO\nuniform vec4 color;\n#endif\n\n/**\n * Shader IO.\n */\n\n#ifdef HAS_NORMALS\nvarying vec3 vnormal;\n#endif\n\n#ifdef HAS_POSITIONS\nvarying vec3 vposition;\n#endif\n\n/**\n * Shader entry.\n */\n\nvoid main () {\n#ifdef HAS_ALBEDO\n  gl_FragData[0] = color;\n#endif\n\n#ifdef HAS_NORMALS\n  gl_FragData[1] = vec4(vnormal, 1.0);\n#endif\n\n#ifdef HAS_POSITIONS\n  gl_FragData[2] = vec4(vposition, 1.0);\n#endif\n}\n"),h=(r.GeometryBuffer=function(t){function e(t){function r(e,r){var n=!1;return"function"==typeof e&&(r=e,e={}),e=e||{},r=r||function(){},d(function(e){var i=e.viewportWidth,o=e.viewportHeight,u=e.clear;if(i!=y&&(y=i,n=!0),o!=g&&(g=o,n=!0),n)try{a.resize(y,g)}catch(e){t.emit("error",e)}p(function(){u(),r.apply(void 0,arguments)})}),this}var o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fbo,a=void 0===o?null:o;if(n(this,e),!t.regl.hasExtension("webgl_draw_buffers"))throw new Error("GeometryBuffer needs the 'webgl_draw_buffers' extension.");(0,s.incrementStat)("GeometryBuffer");var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),c=initialState.state,f=void 0===c?new h(t,initialState):c,p=t.regl(u({},f)),d=t.regl(),g=0,y=0;return l}return o(e,t),e}(l.Command),r.GeometryBufferState=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var i=r.fbo,o=void 0===i?null:i,a=r.fragmentShader,u=void 0===a?f:a,s=r.framebuffer,l=void 0===s?o||e.regl.framebuffer({color:[e.regl.texture({type:"float"}),e.regl.texture({type:"float"}),e.regl.texture({type:"float"})]}):s,h={};l.color&&l.color[0]&&(h.HAS_ALBEDO=1),l.color&&l.color[1]&&(h.HAS_NORMALS=1),l.color&&l.color[2]&&(h.HAS_POSITIONS=1),this.framebuffer=l,this.frag=(0,c.default)(u,h)})},{"../stats":54,"./command":6,"glsl-inject-defines":319,glslify:329}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./extrude_geometry");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})});var i=t("./geometry_buffer");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./geometry");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./object3d");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})});var u=t("./command");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return u[t]}})});var s=t("./texture");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var l=t("./context");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return l[t]}})});var c=t("./material");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return c[t]}})});var f=t("./camera");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return f[t]}})});var h=t("./stream");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return h[t]}})});var p=t("./frame");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return p[t]}})});var d=t("./light");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return d[t]}})});var g=t("./color");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return g[t]}})});var y=t("./input");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return y[t]}})});var m=t("./mesh");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return m[t]}})});var M=t("./text");Object.keys(M).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return M[t]}})})},{"./camera":4,"./color":5,"./command":6,"./context":7,"./extrude_geometry":8,"./frame":9,"./geometry":10,"./geometry_buffer":11,"./input":13,"./light":14,"./material":15,"./mesh":16,"./object3d":17,"./stream":18,"./text":19,"./texture":20}],13:[function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.InputContext=r.Input=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l=t("./stream"),c=function(t){return t&&t.__esModule?t:{default:t}}(t("defined")),f=(r.Input=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var n=r.context,a=void 0===n?new f(t,r):n,u=r.init,l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s({context:a},r)));return"function"==typeof u&&u(t,s({},r,{context:a,stream:a.stream})),l}return a(e,t),e}(l.Stream),r.InputContext=function(t){function e(t){function r(t){return h=null==t?null:f.reduce(function(e,r){return s({},e,n({},r,t[r]))},{})}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s({transform:r},a))),l=a.props,f=void 0===l?[]:l,h=null,p=!0,d=!1,g=void 0;try{for(var y,m=f[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)!function(){var t=y.value;u[t]=function(){return h?(0,c.default)(h[t],void 0):void 0}}()}catch(t){d=!0,g=t}finally{try{!p&&m.return&&m.return()}finally{if(d)throw g}}return u}return a(e,t),e}(l.StreamContext))},{"./stream":18,defined:146}],14:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.LightContext=r.Light=r.kDefaultLighType=r.kDefaultLightColor=r.kDefaultLightRadius=r.kDefaultLightAmbient=r.kDefaultLightRotation=r.kDefaultLightPosition=r.kDefaultLightIntensity=void 0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../math"),p=t("../stats"),d=t("../light/types"),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),y=t("./color"),m=(t("./mesh"),t("./object3d")),M=n(t("defined")),v=n(t("gl-vec3")),b=n(t("gl-mat4")).default.identity([]),w=0,x=r.kDefaultLightIntensity=10,D=r.kDefaultLightPosition=new h.Vector3(0,0,0),j=(r.kDefaultLightRotation=new h.Quaternion,r.kDefaultLightAmbient=.1),N=r.kDefaultLightRadius=50,A=r.kDefaultLightColor=new y.Color("white"),L=r.kDefaultLighType=d.BasicLightType,T=(r.Light=function(t){function e(t){function r(t,r,n){var a=t.transform,u=void 0===a?b:a,s=t.position,l=void 0===s?g:s,c=t.lights,h=r.intensity,p=void 0===h?f:h,y=(r.rotation,r.ambient),w=void 0===y?m:y,x=r.visible,D=void 0===x?E:x,j=r.radius,N=void 0===j?O:j,A=r.color,L=void 0===A?S:A,T=r.type,I=void 0===T?z:T,_=r.transform,C=void 0===_?u:_,P=r.position,U=void 0===P?l:P,B=r.lights,Y=void 0===B?c:B,R={},F=0;switch(I||z){case d.DirectionalLightType:F=1;break;case d.PointLightType:F=0}Object.assign(R,{typeName:e.typeName(I),intensity:(0,M.default)(p,f),position:[].concat(i((0,M.default)(U,g)),[F]),ambient:(0,M.default)(w,m),visible:(0,M.default)(D,E),radius:(0,M.default)(N,O),color:(0,M.default)(L,[].concat(i(S))),type:(0,M.default)(I,z)}),v.default.transformMat4(R.position,R.position,C),Y.push(R),Q(arguments[1]||{},function(t,e){o(t),k(e||{},function(){n.apply(void 0,arguments)})})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),(0,p.incrementStat)("Light");var s=t.regl,l=n.intensity,f=void 0===l?x:l,h=n.position,g=void 0===h?D:h,y=(n.rotation,n.ambient),m=void 0===y?j:y,w=n.visible,E=void 0===w||w,I=n.radius,O=void 0===I?N:I,_=n.color,S=void 0===_?A:_,C=n.type,z=void 0===C?L:C,k=(void 0===n.id&&e.id(),n.update||function(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,arguments[1])()}),P=n.context,Q=s({context:void 0===P?new T:P});return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,c({},n,{update:r})))}return s(e,t),f(e,null,[{key:"id",value:function(){return w++}},{key:"typeName",value:function(t){return(0,M.default)(Object.keys(g).find(function(e){return t==g[e]}),t)}}]),e}(m.Object3D),r.LightContext=function(t){function e(t,r){return a(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return s(e,t),e}(m.Object3DContext))},{"../light/types":40,"../math":47,"../stats":54,"./color":5,"./mesh":16,"./object3d":17,defined:146,"gl-mat4":188,"gl-vec3":270}],15:[function(t,e,r){"use strict";function n(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.MaterialMap=r.MaterialUniforms=r.MaterialContext=r.MaterialState=r.Material=r.kDefaultMaterialDepthState=r.kDefaultMaterialCullingState=r.kDefaultMaterialBlendingState=r.kDefaultMaterialType=r.kDefaultMaterialColor=r.kDefaultMaterialOpacity=r.kDefaultMaterialFragmentShader=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=t("../utils"),h=t("../stats"),p=t("./command"),d=(t("./texture"),t("./color")),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../material/types")),y=t("../light/limits"),m=(t("glsl-inject-defines"),function(t){return t&&t.__esModule?t:{default:t}}(t("defined"))),M=(t("glslify"),t("gl-vec4"),109),v=r.kDefaultMaterialFragmentShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n};\n\n/**\n * Module dependencies.\n */\n\nstruct DirectionalLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n/**\n * Module exports.\n */\n\n// @TODO(werle) inject these defines at runtime\n#ifndef MAX_SPOT_LIGHTS\n#define MAX_SPOT_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n/**\n * The SpotLightsContext structure encapsulates all known\n * SpotLights for a shader program. The total count and pointers\n * toall SpotLights are in this structure.\n */\n\n// @TODO(werle) - implement this\n//struct SpotLightsContext {\n  //int count;\n  //SpotLight lights[MAX_SPOT_LIGHTS];\n//};\n\n/**\n * The DirectionalLightsContext structure encapsulates all known\n * DirectionalLights for a shader program. The total count and pointers\n * toall DirectionalLights are in this structure.\n */\n\nstruct DirectionalLightsContext {\n  int count;\n  DirectionalLight lights[MAX_DIRECTIONAL_LIGHTS];\n};\n\n/**\n * The AmbientLightsContext structure encapsulates all known\n * AmbientLights for a shader program. The total count and pointers\n * toall AmbientLights are in this structure.\n */\n\nstruct AmbientLightsContext {\n  int count;\n  AmbientLight lights[MAX_AMBIENT_LIGHTS];\n};\n\n/**\n * The PointLightsContext structure encapsulates all known\n * PointLights for a shader program. The total count and pointers\n * toall PointLights are in this structure.\n */\n\nstruct PointLightsContext {\n  int count;\n  PointLight lights[MAX_POINT_LIGHTS];\n};\n\n/**\n * The LightContext structure encapsulates all possible lights by\n * providing light contexts for ambient, directional, point, and\n * spot light types.\n */\n\nstruct LightContext {\n  DirectionalLightsContext directional;\n  AmbientLightsContext ambient;\n  PointLightsContext point;\n};\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\nstruct Material {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE Material\n#endif\n\n// default material\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader uniforms.\n//\nuniform MATERIAL_TYPE material;\nuniform LightContext lightContext;\nuniform Camera camera;\n\n#ifdef HAS_MAP\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\nuniform Map map;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\nstruct PositionedLight {\n  vec4 position;\n  vec4 color;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// unpack\n\nPositionedLight unpack_1(DirectionalLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight unpack_0(PointLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\n//compute\n/**\n * Module dependencies.\n */\n\n/**\n * Module exports.\n */\n\n/**\n * Computes a positioned light source attenuation for a given\n * direction vector.\n * Adapted from {@link https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl}\n */\n\nfloat computeAttenuation(PositionedLight light, vec3 direction) {\n  float attenuation;\n  if (0.0 == light.position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(\n      clamp(1.0 - length(direction)/light.radius, 0.0, 1.0),\n      2.0);\n  }\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 compute(vec4 lightPosition, vec3 position) {\n  if (lightPosition.w == 0.0) {\n    return normalize(lightPosition.xyz);\n  } else {\n    return lightPosition.xyz - position;\n  }\n}\n\n/**\n * Module dependencies.\n */\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n/**\n * Module exports.\n */\n\n/**\n * Computes the diffuse intensity value relative to a given positioned\n * light source and a geometry with a given direction.\n */\n\nfloat computeDiffuseFromGeometryWithDirection(PositionedLight light,\n                                              GeometryContext geometry,\n                                              Camera camera,\n                                              LambertMaterial material,\n                                              vec3 direction)\n{\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  float diffuse = orenNayarDiffuse(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.roughness,\n      material.albedo);\n\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  return diffuse;\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\n\nvoid applyPositionedLight_0(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 direction = compute(light.position, geometry.position);\n  float attenuation = computeAttenuation(light, direction);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   material,\n                   direction);\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n    ambient\n  + attenuation\n  + combined\n  ;\n}\n\n// adapted from https://github.com/freeman-lab/gl-lambert-material/blob/master/fragment.glsl\nvoid main_0() {\n  GeometryContext geometry_0 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_0.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_1(light),\n                           geometry_0,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_0(light),\n                           geometry_0,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n// unpack\n\n// utils\n\n#define toLambertMaterial(m) LambertMaterial(m.emissive, m.ambient, m.color, m.roughness, m.opacity, m.albedo, m.type)\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\n\nvoid applyPositionedLight_1(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 specular = vec3(0.0);\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  vec3 direction = compute(light.position, geometry.position);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   toLambertMaterial(material),\n                   direction);\n\n  if (material.shininess > 0.0 || material.shininess < 0.0) {\n    float power =\n      blinnPhongSpecular(normalize(direction),\n            viewpoint,\n            geometry.normal,\n            material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n     ambient\n   + combined\n   + specular\n   ;\n}\n\nvoid main_1() {\n  GeometryContext geometry_1 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_1.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_1(light),\n                           geometry_1,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_0(light),\n                           geometry_1,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Flat shading model.\n//\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n//\n// Shader entry.\n//\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  gl_FragColor = material.color;\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, geometry.uv);\n  }\n#endif\n\n  gl_FragColor.a = material.opacity;\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_0();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_1();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_2();\n}\n#elif defined SHADER_MAIN_BODY\nSHADER_MAIN_BODY_SOURCE\n#else\nvoid main() {\n  discard;\n}\n#endif\n",b=r.kDefaultMaterialOpacity=1,w=r.kDefaultMaterialColor=new d.Color(100/255,110/255,1),x=r.kDefaultMaterialType=g.MaterialType,D=r.kDefaultMaterialBlendingState={equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},j=r.kDefaultMaterialCullingState={enable:!0,face:"back"},N=r.kDefaultMaterialDepthState={enable:!0,range:[0,1],func:"less",mask:!0},A=r.Material=function(t){function e(t){function r(t,e){"function"==typeof t&&(e=t,t={}),t=(0,f.isArrayLike)(t)?[].concat(i(t)):l({},t||{}),e=e||function(){};var r=(0,f.isArrayLike)(t)?{}:t.map;return c.injectContext(r||{},function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;"function"==typeof r?r(function(r){v(t,e)}):v(t,e)}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,h.incrementStat)("Material");var u=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),s=n.materialMap,c=void 0===s?new I(t,n):s,p=n.uniforms,d=void 0===p?new E(t,n):p,g=n.context,y=void 0===g?new T(t,n):g,m=n.state,M=void 0===m?new L(t,n):m,v=t.regl(l({},M,{uniforms:d,context:y}));return u}return u(e,t),c(e,null,[{key:"id",value:function(){return M++}},{key:"typeName",value:function(t){return(0,m.default)(Object.keys(g).find(function(e){return t==g[e]}),t,"Material").replace(/Type$/,"")}}]),e}(p.Command),L=r.MaterialState=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),r.blending&&(r.blend=r.blending,delete r.blending),r.culling&&(r.cull=r.culling,delete r.culling),null==r.blend&&(r.blend={}),null==r.cull&&(r.cull={}),null==r.depth&&(r.depth={});var i=r.fragmentShader,a=void 0===i?v:i,u=r.fragmentShaderMain,s=r.type,c=void 0===s?g.MaterialType:s,h=A.typeName(c),p=l({MATERIAL_TYPE:h},r.shaderDefines);"string"==typeof u?(p.SHADER_MAIN_BODY=1,a=a.replace("SHADER_MAIN_BODY_SOURCE",u)):p["use"+h]=1,null!=r.map&&(p.HAS_MAP=1);for(var d in g)p[""+d]=g[d];p.MAX_POINT_LIGHTS=y.kMaxPointLights,p.MAX_AMBIENT_LIGHTS=y.kMaxAmbientLights,p.MAX_DIRECTIONAL_LIGHTS=y.kMaxDirectionalLights;for(var M in p)a="#define "+M+" "+p[M]+"\n"+a;this.frag=a,this.blend={equation:function(){return(0,m.default)(r.blend.equation,D.equation)},enable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.blend,o=void 0===i?void 0:i,a=e.opacity,u=void 0===a?(0,m.default)(r.opacity,1):a,s=e.transparent,l=void 0===s?(0,m.default)(r.transparent,!1):s,c=e.blending,f=void 0===c?(0,m.default)(o,r.blend.enable,D.enable):c;return n(t),!!(u<1||l)||("boolean"==typeof f?f:l)},color:function(){return(0,f.ensureRGBA)((0,m.default)(r.blend.color,D.color))},func:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.opacity,o=void 0===i?(0,m.default)(r.opacity,1):i,a=e.transparent,u=void 0===a?(0,m.default)(r.transparent,!1):a;return n(t),o<1||u?{src:"src alpha",dst:"one"}:(0,m.default)(r.blend.func,D.func)}},this.cull={enable:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cull,i=void 0===e?r.cull.enable:e;return n(t),Boolean((0,m.default)(i,j.enable))},face:function(t,e){var i=e.cullFace,o=void 0===i?r.cull.face:i;return n(t),(0,m.default)(o,j.face)}},this.depth={enable:function(){return(0,m.default)(r.depth.enable,N.enable)},range:function(){return(0,m.default)(r.depth.range,N.range)},func:function(){return(0,m.default)(r.depth.func,N.func)},mask:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.opacity,o=void 0===i?(0,m.default)(r.opacity,1):i,a=e.transparent,u=void 0===a?(0,m.default)(r.transparent,r.blend.enable,N.enable,!1):a;return n(t),!!(o<1||u)||(0,m.default)(r.depth.mask,N.mask)}}},T=r.MaterialContext=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=r.type,a=void 0===i?g.MaterialType:i;void 0===r.id&&A.id(),this.opacity=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).opacity,i=void 0===e?r.opacity:e;return n(t),(0,m.default)(i,b)},this.type=function(){return(0,m.default)(a,g.MaterialType)},this.color=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).color,i=void 0===e?r.color:e;return n(t),(0,f.ensureRGBA)((0,m.default)(i,w))}},E=r.MaterialUniforms=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=e.regl.texture();this["material.opacity"]=function(t){var e=t.opacity,n=void 0===e?r.opacity:e;return(0,m.default)(n,b)},this["material.color"]=function(t){var e=t.color,n=void 0===e?r.color:e;return(0,m.default)(n,w)},this["material.type"]=function(t){var e=t.type,n=void 0===e?r.type:e;return(0,m.default)(n,x)},this["map.resolution"]=function(t){var e=t.textureResolution;return(0,m.default)(e,[0,0])},this["map.data"]=function(t){var e=t.texture;return t.textureData,(0,m.default)(e,n)}},I=r.MaterialMap=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.injectContext=e.regl({context:{map:function(t,e){var i=e.map,o=void 0===i?r.map:i;return n(t),o}}})}},{"../light/limits":38,"../material/types":45,"../stats":54,"../utils":55,"./color":5,"./command":6,"./texture":20,defined:146,"gl-vec4":300,"glsl-inject-defines":319,glslify:329}],16:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.MeshAttributes=r.MeshUniforms=r.MeshState=r.MeshContext=r.Mesh=r.kDefaultMeshVertexShader=r.kDefaultMeshPrimitive=r.kDefaultMeshWireframeThickness=r.kDefaultMeshWireframePrimitive=void 0;var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h=t("../utils"),p=t("./object3d"),d=t("../math"),g=t("../stats"),y=t("./geometry"),m=n(t("glsl-inject-defines")),M=n(t("defined")),v=(t("glslify"),n(t("clamp"))),b=n(t("gl-mat4")),w=n(t("gl-mat3")),x=(t("gl-vec4"),n(t("gl-vec3"))),D=n(t("gl-vec2")),j=b.default.identity([]),N=w.default.identity([]),A=r.kDefaultMeshWireframePrimitive="line strip",L=r.kDefaultMeshWireframeThickness=1,T=r.kDefaultMeshPrimitive="triangles",E=r.kDefaultMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n/**\n */\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n};\n\n//\n// Shader uniforms.\n//\nuniform Camera camera;\nuniform Mesh mesh;\n\n//\n// Shader IO.\n//\n\n#ifdef HAS_POSITIONS\nattribute vec3 position;\n#endif\n\n#ifdef HAS_NORMALS\nattribute vec3 normal;\n#endif\n\n#ifdef HAS_UVS\nattribute vec2 uv;\n#endif\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n#ifdef HAS_TRANSFORM_FUNC\n  TRANSFORM_FUNC_SOURCE\n#endif\n\nvoid main() {\n\n#if defined HAS_POSITIONS\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  gl_Position =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0);\n#endif\n\n#ifdef HAS_NORMALS\n  vnormal = normalize(mesh.modelNormal * normal);\n#endif\n\n#ifdef HAS_UVS\n  vuv = uv;\n#endif\n\n#ifdef HAS_TRANSFORM_FUNC\n  transform();\n#endif\n}\n\n",I=(r.Mesh=function(t){function e(t){function r(t,e,r){o(t),b(e,function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n[0].visible,v(e,function(){!1===e.visible?w(e,r):0!=e.draw?(w(e),r.apply(void 0,n)):w(e,r)})})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),(0,g.incrementStat)("Mesh"),0==n.geometry instanceof y.Geometry&&(n.geometry=new y.Geometry({complex:n.geometry}));var i=n.attributes,s=void 0===i?new S(t,n):i,l=n.uniforms,c=void 0===l?new _(t,n):l,h=n.context,p=void 0===h?new I(t,n):h,d=n.state,m=void 0===d?new O(t,n):d,M=n.update,v=void 0===M?function(t,e){return o(t),e()}:M,b=t.regl({context:p}),w=t.regl(f({},m,{attributes:s,uniforms:c}));return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({},n,{context:p,update:r})))}return s(e,t),e}(p.Object3D),r.MeshContext=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),s=r.geometry;return Object.defineProperties(n,i({computedBoundingBox:{enumerable:!1,writable:!0,value:null},computedSize:{enumerable:!1,writable:!0,value:null}},"computedSize",{enumerable:!1,writable:!0,value:null})),n.geometry=s,n.boundingBox=function(){return n.computeBoundingBox.apply(n,arguments)},n.size=function(){return n.computeSize.apply(n,arguments)},n.visible=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).visible;return o(t),(0,M.default)(e,r.visible,!0)},n}return s(e,t),c(e,[{key:"computeBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null==this.geometry?null:(1!=t&&null!=this.computedBoundingBox||(this.computedBoundingBox=this.geometry.computeBoundingBox()),this.computedBoundingBox)}},{key:"computeSize",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scale,e=void 0===t?1:t;if(null==this.geometry)return null;if(this.computedSize)return this.computedSize;this.computeBoundingBox();var r=this.computedBoundingBox,n=r[0].length,i=r[0],o=r[1],a=null;switch(n){case 3:a=x.default.subtract(new d.Vector3,o,i);break;case 2:a=D.default.subtract(new d.Vector2,o,i);break;default:return null}switch(n){case 3:x.default.multiply(a,a,e);break;case 2:D.default.multiply(a,a,e)}this.computedSize=a}}]),e}(p.Object3DContext)),O=r.MeshState=function t(e,r){a(this,t);var n=r.frag,i=void 0===n?null:n,u=r.vert,s=void 0===u?E:u,l=r.geometry,c=void 0===l?null:l,h=r.vertexShaderTransform,p=f({},r.shaderDefines);c.positions&&(p.HAS_POSITIONS=1),c.normals&&(p.HAS_NORMALS=1),c.uvs&&(p.HAS_UVS=1),"string"==typeof h&&(p.HAS_TRANSFORM_FUNC=1,"string"==typeof s&&(s=s.replace("TRANSFORM_FUNC_SOURCE",h))),this.vert="string"==typeof s?(0,m.default)(s,p):null,this.frag="string"==typeof i?(0,m.default)(i,p):null,this.lineWidth=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.wireframeThickness,i=void 0===n?r.wireframeThickness:n,a=e.lineWidth,u=void 0===a?1:a;return o(t),Math.max(1,(0,M.default)(i,u,L))},this.primitive=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.primitive,i=void 0===n?null:n,a=e.wireframe,u=void 0!==a&&a;return o(t),"string"==typeof i?i:u?(0,M.default)(r.wireframePrimitive,A):"string"==typeof r.primitive?r.primitive:T},this.elements=c&&c.cells?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(void 0===e.wireframe&&r.wireframe,e.count),i=void 0===n?r.count:n;o(t);var a=c.cells;return a&&"number"==typeof i&&(i=(0,v.default)(Math.floor(i),0,a.length),a=a.slice(0,i)),a}:null,this.count=!c||c.cells?null:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,n=void 0===e?c.positions.length:e;return o(t),null!=n?n:r.count?r.count:c&&c.complex?c.positions.length:null};for(var d in this)null==this[d]&&delete this[d]},_=r.MeshUniforms=function t(e,r){a(this,t),this["mesh.model"]=function(t){return t.transform||j},this["mesh.modelNormal"]=function(t){var e=t.transform;return(0,h.isArrayLike)(e)?w.default.normalFromMat4([],e)||N:N},this["material.opacity"]=function(t){var e=t.opacity,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).opacity,n=void 0===r?e:r;return(0,M.default)(n,1)},this["material.color"]=function(t){var e=t.color,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).color,n=void 0===r?e:r;return(0,h.ensureRGBA)(n)};for(var n in this)null==this[n]&&delete this[n]},S=r.MeshAttributes=function t(e,r){a(this,t);var n=r.geometry;this.position=(0,M.default)(n.positions,null),this.normal=(0,M.default)(n.normals,null),this.uv=(0,M.default)(n.uvs,null);for(var i in this)null==this[i]&&delete this[i]}},{"../math":47,"../stats":54,"../utils":55,"./geometry":10,"./object3d":17,clamp:98,defined:146,"gl-mat3":170,"gl-mat4":188,"gl-vec2":240,"gl-vec3":270,"gl-vec4":300,"glsl-inject-defines":319,glslify:329}],17:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Object3DContext=r.Object3D=void 0;var c="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":l(t)},f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../stats"),p=t("../math"),d=t("./command"),g=(t("../utils"),n(t("defined"))),y=n(t("gl-mat4")),m=(t("gl-vec4"),t("gl-vec3"),t("gl-vec2"),t("gl-quat"),111),M=(y.default.identity([]),r.Object3D=function(t){function e(t){function r(t,e){return"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":c(t))&&t?t:{},e="function"==typeof e?e:function(){},p(t,function(t,r,n){"function"==typeof s?s(t,r||{},e):"function"==typeof e&&e(t,r||{})}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),(0,h.incrementStat)("Object3D");var i=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),o=n.update,s=void 0===o?null:o;if(null!=s&&"function"!=typeof s)throw new TypeError("Expecting update function to be a function. Got "+(void 0===s?"undefined":c(s))+".");var l=n.context,f=void 0===l?new v(t,n):l;if(0==f instanceof v)throw new TypeError("Expecting instance of Object3DContext given.");var p=t.regl({context:f});return i}return s(e,t),f(e,null,[{key:"id",value:function(){return m++}},{key:"count",value:function(){var t=(0,h.getStats)("Object3D");return t?t.length:0}}]),e}(d.Command)),v=r.Object3DContext=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var u=n.computeTransformMatrix,s=void 0===u||u,l=n.computeLocalMatrix,c=void 0===l||l,f=n.rotation,h=void 0===f?[0,0,0,1]:f,d=n.position,m=void 0===d?[0,0,0]:d,v=n.scale,b=void 0===v?[1,1,1]:v,w=n.id,x=void 0===w?M.id():w,D=y.default.identity([]),j=y.default.identity([]);Object.defineProperties(this,{shouldComputeTransformMatrix:{enumerable:!1,value:s},shouldComputeLocalMatrix:{enumerable:!1,value:c},initialRotation:{get:function(){return h},enumerable:!1},initialPosition:{get:function(){return m},enumerable:!1},initialScale:{get:function(){return b},enumerable:!1},transformMatrix:{get:function(){return D},enumerable:!1},localMatrix:{get:function(){return j},enumerable:!1}}),this.id=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t),e=e||{},null!=e.id?(0,g.default)(e.id,x):x},this.scale=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t),e=e||{};var r=(0,g.default)(e.scale,b);if("number"==typeof r)return[r,r,r];if(r instanceof p.Vector)return[].concat(i(r));if(Array.isArray(r))return[].concat(i(r));if(null!=r)try{return[].concat(i(r))}catch(t){return[r,r,r]}},this.position=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t),e=e||{};var r=(0,g.default)(e.position,m);if(r instanceof p.Vector)return[].concat(i(r));if(Array.isArray(r))return[].concat(i(r));if(null!=r)try{return[].concat(i(r))}catch(t){return[r,r,r]}},this.rotation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t),e=e||{};var r=(0,g.default)(e.rotation,h);return r instanceof p.Vector?[].concat(i(r)):Array.isArray(r)?[].concat(i(r)):[0,0,0,1]},this.transform=function(){return r.computeTransformMatrix.apply(r,arguments)},this.matrix=function(){return r.computeLocalMatrix.apply(r,arguments)}}return f(t,[{key:"computeTransformMatrix",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).transform,e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).transform;return this.computeLocalMatrix.apply(this,arguments),!1===this.shouldComputeTransformMatrix?this.transformMatrix:(t&&y.default.multiply(this.transformMatrix,t,this.localMatrix),e&&y.default.multiply(this.transformMatrix,e,this.transformMatrix),this.transformMatrix)}},{key:"computeLocalMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.rotation,n=void 0===r?this.initialRotation:r,i=e.position,a=void 0===i?this.initialPosition:i,u=e.scale,s=void 0===u?this.initialScale:u;return o(t),!1===this.shouldComputeLocalMatrix?this.localMatrix:("number"==typeof s&&(s=[s,s,s]),y.default.fromRotationTranslation(this.localMatrix,n,a),y.default.scale(this.localMatrix,this.localMatrix,s),this.localMatrix)}}]),t}()},{"../math":47,"../stats":54,"../utils":55,"./command":6,defined:146,"gl-mat4":188,"gl-quat":213,"gl-vec2":240,"gl-vec3":270,"gl-vec4":300}],18:[function(t,e,r){"use strict";function n(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.StreamContext=r.Stream=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l=t("./command"),c=t("through2"),f=function(t){return t&&t.__esModule?t:{default:t}}(t("defined")),h=(r.Stream=function(t){function e(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return null!=t.data&&s&&s.stream?s.stream.write(t.data,function(){l(t,e)}):l(t,e),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),u=n.context,s=void 0===u?new h(t,n):u,l=t.regl({context:s});return a}return a(e,t),e}(l.Command),r.StreamContext=function t(e){function r(t,e,r){n(e),"function"==typeof l&&(t=(0,f.default)(l(t),t)),null!=t&&(h=t,this.push(h)),r()}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=o.stream,u=void 0===a?(0,c.obj)(r):a,l=o.transform,h=null;u.on("error",function(t){e.emit("error",t)}),this.stream=u,this.data=function(){return s({},h)}})},{"./command":6,defined:146,through2:418}],19:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.TextContext=r.Text=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":s(t)},f=t("./extrude_geometry"),h=t("./object3d"),p=t("./command"),d=t("./mesh"),g=n(t("vectorize-text")),y=n(t("defined")),m=(t("unindex-mesh"),{}),M={},v={},b=(r.Text=function(t){function e(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],r=n(t);return x(function(){w(t||{},function(){"function"==typeof r?r(t,e):e.apply(void 0,arguments)})}),this}function n(e){"string"==typeof e&&(e={text:e});var r=e.text,n="object"==(void 0===e?"undefined":c(e))?JSON.stringify(e):null,i=null,o=null,a=null;if("string"==typeof r&&"string"==typeof n&&"function"==typeof v[n])a=v[n];else if("string"==typeof n){o=(0,g.default)(r,l({textBaseline:(0,y.default)(e.baseline,"hanging"),orientation:"ccw",textAlign:(0,y.default)(e.align,"center"),width:1},e));var u=Array(10).fill([]).map(function(t,e){return[0,0,.001*e]});i=new f.ExtrudeGeometry(l({},o,{path:u})),a=new d.Mesh(t,{geometry:i}),M[n]=o,m[n]=i,v[n]=a}return a}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var u=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),s=i.context,p=void 0===s?new b(t,i):s,w=t.regl({context:p}),x=new h.Object3D(t,{scale:[1,-1,1]});return u}return u(e,t),e}(p.Command),r.TextContext=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.text=function(t,e){return i(t),e=e||{},(0,y.default)(e.text,r.text,null)}})},{"./command":6,"./extrude_geometry":8,"./mesh":16,"./object3d":17,defined:146,"unindex-mesh":425,"vectorize-text":432}],20:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureState=r.TextureContext=r.Texture=r.kDefaultTextureState=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=t("../stats"),f=t("./command"),h=function(t){return t&&t.__esModule?t:{default:t}}(t("global/window")),p=h.default.HTMLVideoElement,d=h.default.HTMLCanvasElement,g=h.default.HTMLImageElement,y=function(t){return t instanceof d},m=function(t){return t instanceof p},M=function(t){return t instanceof g},v=p.HAVE_CURRENT_DATA,b=void 0===v?2:v,w=p.HAVE_ENOUGH_DATA,x=void 0===w?4:w,D=r.kDefaultTextureState=Object.seal({min:"linear",mag:"linear"}),j=r.Texture=function(t){function e(t){function r(t,e){return"function"==typeof t&&(e=t,t={}),t=t||{},e=e||function(){},u.update(s({},o,t)),h(e),this}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),(0,c.incrementStat)("Texture");var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),u=new A(t,o||{}),l=o.context,f=void 0===l?new N(t,u,o):l,h=t.regl({context:f});return a}return o(e,t),l(e,null,[{key:"isTextureDataReady",value:function(t){return!!(t&&m(t)&&t.readyState>=x)||!!((t&&M(t)||y(t))&&t.width&&t.height)}},{key:"getTextureDataResolution",value:function(t,e){return M(e)||y(e)?[e.width,e.height]:m(e)?[e.videoWidth||0,e.videoHeight||0]:e&&e.shape?e.shape:t.shape?t.shape:t.width&&t.height?[t.width,t.height]:[0,0]}}]),e}(f.Command),N=r.TextureContext=function t(e,r){arguments.length>2&&void 0!==arguments[2]&&arguments[2],n(this,t),Object.defineProperties(this,{data:{enumerable:!1,get:function(){return r.data}},textureState:{enumerable:!1,get:function(){return r}}}),this.textureResolution=function(){return j.getTextureDataResolution(r,r.data)},this.textureData=function(){return r.data},this.texture=function(){return r.texture}},A=r.TextureState=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),Object.assign(this,s({},D,r));var i=e.regl.texture(s({},this)),o=r.data,a=void 0===o?null:o,u=0,l=null;Object.defineProperties(this,{ctx:{enumerable:!1,get:function(){return e}},data:{enumerable:!0,get:function(){return a||null},set:function(t){a=t}},texture:{enumerable:!1,get:function(){return i}},lastVideoUpdate:{enumerable:!1,set:function(t){u=t},get:function(){return u}},previouslyUploadedData:{enumerable:!1,set:function(t){l=t},get:function(){return l}}})}return l(t,[{key:"update",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,e=void 0===t?this.data:t,r=this.ctx.regl.now(),n=!1;if(j.isTextureDataReady(e)&&(m(e)&&e.readyState>=b?(n=!0,r-this.lastVideoUpdate>=.01&&(this.lastVideoUpdate=r)):e!=this.previouslyUploadedData&&(n=!0)),n){var i=j.getTextureDataResolution(this,e);i[0]>0&&i[1]>0||(n=!1)}if(n&&e){if(this.data=e,this.previouslyUploadedData=e,"function"!=typeof this.texture)throw new TypeError("TextureState expects .texture to be a function. Got "+u(this.texture)+".");this.texture(this)}return n}}]),t}()},{"../stats":54,"./command":6,"global/window":318}],21:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.BoxGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-cube")),l=t("../core/geometry");r.BoxGeometry=function(t){function e(t){n(this,e),null!=t&&"object"==(void 0===t?"undefined":u(t))||(t={});var r=t,o=r.segments,a=r.x,l=r.y,c=r.z;if(null==o&&(o=1),null==a&&(a=1),null==l&&(l=1),null==c&&(c=1),"number"!=typeof a)throw new TypeError("Expecting '.x' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof l)throw new TypeError("Expecting '.y' to a be a number. Got "+(void 0===l?"undefined":u(l))+".");if("number"!=typeof c)throw new TypeError("Expecting '.z' to a be a number. Got "+(void 0===c?"undefined":u(c))+".");if("number"!=typeof o&&"object"!=(void 0===o?"undefined":u(o)))throw new TypeError("Expecting '.segments' to be an object or 'number'. Got "+(void 0===o?"undefined":u(o)));if("number"==typeof o)o={x:o,y:o,z:o};else if("object"==(void 0===o?"undefined":u(o))){if("number"!=typeof o.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(o.x)+".");if("number"!=typeof o.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(o.y)+".");if("number"!=typeof o.z)throw new TypeError("Expecting '.segments.z' to a be a number. Got "+u(o.z)+".")}var f=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,s.default)(a,l,c,o.x,o.y,o.z)}));return f.size={x:a,y:l,z:c},f.segments=o,f}return o(e,t),e}(l.Geometry)},{"../core/geometry":10,"primitive-cube":369}],22:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.CapsuleGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-capsule")),l=t("../core/geometry");r.CapsuleGeometry=function(t){function e(t){n(this,e),null!=t&&"object"==(void 0===t?"undefined":u(t))||(t={});var r=t,o=r.radius,a=void 0===o?a||1:o,l=r.height,c=void 0===l?c||.5:l,f=r.segments,h=void 0===f?h||12:f,p=r.resolution,d=void 0===p?d||24:p;for(var g in t)if(t.hasOwnProperty(g)&&"number"!=typeof t[g])throw new TypeError("Expecting '"+g+"' to be a number. Got "+u(t[g])+".");var y=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,s.default)(a,c,d,h)}));return y.radius=a,y.height=c,y.segments=h,y.resolution=d,y}return o(e,t),e}(l.Geometry)},{"../core/geometry":10,"primitive-capsule":368}],23:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.CylinderGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-cylinder")),l=t("../core/geometry");r.CylinderGeometry=function(t){function e(t){n(this,e),null!=t&&"object"==(void 0===t?"undefined":u(t))||(t={});var r=t,o=r.height,a=void 0===o?a||5:o,l=r.radiusTop,c=void 0===l?c||1:l,f=r.radiusBottom,h=void 0===f?h||1:f,p=r.radialSegments,d=void 0===p?d||50:p,g=r.heightSegments,y=void 0===g?y||50:g;for(var m in t)if(t.hasOwnProperty(m)&&"number"!=typeof t[m])throw new TypeError("Expecting '"+m+"' to be a number. Got "+u(t[m])+".");var M=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,s.default)(c,h,a,d,y)}));return M.height=a,M.radiusTop=c,M.radiusBottom=h,M.radialSegments=d,M.heightSegments=y,M}return o(e,t),e}(l.Geometry)},{"../core/geometry":10,"primitive-cylinder":370}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./triangle");Object.defineProperty(r,"TriangleGeometry",{enumerable:!0,get:function(){return n.TriangleGeometry}});var i=t("./cylinder");Object.defineProperty(r,"CylinderGeometry",{enumerable:!0,get:function(){return i.CylinderGeometry}});var o=t("./capsule");Object.defineProperty(r,"CapsuleGeometry",{enumerable:!0,get:function(){return o.CapsuleGeometry}});var a=t("./sphere");Object.defineProperty(r,"SphereGeometry",{enumerable:!0,get:function(){return a.SphereGeometry}});var u=t("./plane");Object.defineProperty(r,"PlaneGeometry",{enumerable:!0,get:function(){return u.PlaneGeometry}});var s=t("./torus");Object.defineProperty(r,"TorusGeometry",{enumerable:!0,get:function(){return s.TorusGeometry}});var l=t("./box");Object.defineProperty(r,"BoxGeometry",{enumerable:!0,get:function(){return l.BoxGeometry}})},{"./box":21,"./capsule":22,"./cylinder":23,"./plane":25,"./sphere":26,"./torus":27,"./triangle":28}],25:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.PlaneGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-plane")),l=t("../core/geometry");r.PlaneGeometry=function(t){function e(t){n(this,e),null!=t&&"object"==(void 0===t?"undefined":u(t))||(t={});var r=t,o=r.size,a=void 0===o?a||{x:1,y:1}:o,l=r.segments,c=void 0===l?c||{x:5,y:5}:l,f=r.quads,h=void 0===f?h||!1:f;if("number"==typeof c)c={x:c,y:c};else if("object"==(void 0===c?"undefined":u(c))){if("number"!=typeof c.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(c.x)+".");if("number"!=typeof c.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(c.y)+".")}if("number"==typeof a)a={x:a,y:a};else if("object"==(void 0===a?"undefined":u(a))){if("number"!=typeof a.x)throw new TypeError("Expecting '.size.x' to a be a number. Got "+u(a.x)+".");if("number"!=typeof a.y)throw new TypeError("Expecting '.size.y' to a be a number. Got "+u(a.y)+".")}var p=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,s.default)(a.x,a.y,c.x,c.y,{quads:h})}));return p.size=a,p.quads=h,p.segments=c,p}return o(e,t),e}(l.Geometry)},{"../core/geometry":10,"primitive-plane":371}],26:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.SphereGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":a(t)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-sphere")),l=t("../core/geometry");r.SphereGeometry=function(t){function e(t){n(this,e),null!=t&&"object"==(void 0===t?"undefined":u(t))||(t={});var r=t,o=r.radius,a=void 0===o?a||1:o,l=r.segments,c=void 0===l?c||32:l;if("number"!=typeof a)throw new TypeError("Expecting 'radius' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof c)throw new TypeError("Expecting 'segments' to a be a number. Got "+(void 0===c?"undefined":u(c))+".");var f=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,s.default)(a,{segments:c})}));return f.radius=a,f.segments=c,f}return o(e,t),e}(l.Geometry)},{"../core/geometry":10,"primitive-sphere":372}],27:[function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.TorusGeometry=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)},l=function(t){return t&&t.__esModule?t:{default:t}}(t("primitive-torus")),c=t("../core/geometry");r.TorusGeometry=function(t){function e(t){var r;i(this,e),null!=t&&"object"==(void 0===t?"undefined":s(t))||(t={});var a=t,u=a.majorSegments,c=void 0===u?c||32:u,f=a.minorSegments,h=void 0===f?h||64:f,p=a.majorRadius,d=void 0===p?d||1:p,g=a.minorRadius,y=void 0===g?y||.5:g,m=a.arc,M=void 0===m?M||2*Math.PI:m;for(var v in t)if(t.hasOwnProperty(v)&&"number"!=typeof t[v])throw new TypeError("Expecting '"+v+"' to a be a number. Got "+s(t[v])+".");var b=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:(0,l.default)((r={majorSegments:c,minorSegments:h,majorRadius:d},n(r,"minorSegments",h),n(r,"arc",M),r))}));return b.majorSegments=c,b.minorSegments=h,b.majorRadius=d,b.minorRadius=y,b.arc=M,b}return a(e,t),e}(c.Geometry)},{"../core/geometry":10,"primitive-torus":373}],28:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.TriangleGeometry=void 0;var u=t("../core/geometry");r.TriangleGeometry=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:{positions:[[-1,-.5*Math.sqrt(3),0],[1,-.5*Math.sqrt(3),0],[0,.5*Math.sqrt(3),0]],normals:[[-1,-1,0],[1,-1,0],[0,1,0]],uvs:[[-1,-.5*Math.sqrt(3)],[1,-.5*Math.sqrt(3)],[0,.5*Math.sqrt(3)]]}}))}return o(e,t),e}(u.Geometry)},{"../core/geometry":10}],29:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){for(var e in t)!function(e){if("function"==typeof t[e]){var n=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return new(Function.prototype.bind.apply(t[e],[null].concat(n)))},i=!0,o=!1,a=void 0;try{for(var u,s=Object.getOwnPropertyNames(t[e])[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;null==n[l]&&(n[l]=t[e][l])}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}Object.defineProperty(r,e,{get:function(){return n}})}else Object.defineProperty(r,e,{get:function(){return t[e]}})}(e)}[n(t("./core")),n(t("./mesh")),n(t("./math")),n(t("./input")),n(t("./light")),n(t("./cameras")),n(t("./material")),n(t("./geometry"))].forEach(i)},{"./cameras":1,"./core":12,"./geometry":24,"./input":30,"./light":37,"./material":42,"./math":47,"./mesh":52}],30:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./orientation");Object.defineProperty(r,"OrientationInput",{enumerable:!0,get:function(){return n.OrientationInput}});var i=t("./keyboard");Object.defineProperty(r,"KeyboardInput",{enumerable:!0,get:function(){return i.KeyboardInput}});var o=t("./mouse");Object.defineProperty(r,"MouseInput",{enumerable:!0,get:function(){return o.MouseInput}});var a=t("./touch");Object.defineProperty(r,"TouchInput",{enumerable:!0,get:function(){return a.TouchInput}})},{"./keyboard":31,"./mouse":32,"./orientation":33,"./touch":34}],31:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardInput=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)},c=t("../stats"),f=t("../core/command"),h=n(t("keycode")),p=n(t("dom-events"));r.KeyboardInput=function(t){function e(t){function r(){f()}function n(e){if(t.hasFocus){var r=e.which||e.keyCode||e.charCode;null!=r&&(g[r]=!0,y[(0,h.default)(r)]=!0)}}function a(e){var r=e.which||e.keyCode||e.charCode;t.hasFocus&&null!=r&&(g[r]=!1,y[(0,h.default)(r)]=!1)}function u(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":l(t))&&t?t:{},(e="function"==typeof e?e:function(){})(s({},t,{keycodes:g,keys:y}))}function f(){for(var t in g)g[t]=!1;for(var e in y)y[e]=!1}arguments.length>1&&void 0!==arguments[1]&&arguments[1],i(this,e),(0,c.registerStat)("KeyboardInput");var d=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u)),g={},y={};return p.default.on(document,"keydown",n,!1),p.default.on(document,"keyup",a,!1),t.on("blur",r),t.once("destroy",function(){t.off("blur",r),p.default.off(document,"keydown",n),p.default.off(document,"keyup",a)}),d}return a(e,t),e}(f.Command)},{"../core/command":6,"../stats":54,"dom-events":147,keycode:338}],32:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseInput=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)},c=t("../stats"),f=t("../core/command"),h=n(t("mouse-change")),p=n(t("mouse-wheel")),d=n(t("defined")),g=n(t("dom-events")),y=n(t("raf"));r.MouseInput=function(t){function e(t){function r(t,e,r){u(t,e,r)}function n(t,e,r){!1!==M&&f(t,e,r)}function a(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":l(t))&&t?t:{},(e="function"==typeof e?e:function(){})(s({},t,{wheel:b,allowWheel:(0,d.default)(t.allowWheel,M)},s({},w,{currentX:(0,d.default)(t.currentX,w.currentX),currentY:(0,d.default)(t.currentY,w.currentY)})))}function u(t,e,r){w.buttons=t,(0,y.default)(function(){w.deltaX=0,w.deltaY=0}),w.currentX==e&&w.currentY==r||(w.prevX=w.currentX,w.prevY=w.currentY,w.deltaX=e-w.currentX,w.deltaY=r-w.currentY,w.currentX=e,w.currentY=r)}function f(t,e,r){(0,y.default)(function(){return Object.assign(b,{deltaX:0,deltaY:0,deltaZ:0})});var n=b.currentX,i=b.currentY,o=b.currentZ;Object.assign(b,{currentX:n+t,currentY:i+e,currentZ:o+r,deltaX:t,deltaY:e,deltaZ:r,prevX:n,prevY:i,prevZ:o})}var m=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowWheel,M=void 0===m||m;i(this,e),(0,c.registerStat)("MouseInput");var v=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a)),b={currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},w={buttons:0,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0};t.on("blur",function(){w.buttons=0});var x=(0,h.default)(t.domElement,r),D=(0,p.default)(t.domElement,n);return t.once("destroy",function(){x.enabled=!1,g.default.off(t.domElement,D)}),v}return a(e,t),e}(f.Command)},{"../core/command":6,"../stats":54,defined:146,"dom-events":147,"mouse-change":342,"mouse-wheel":345,raf:376}],33:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.OrientationInput=r.globalState=void 0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":l(t)};t("webvr-polyfill");t("../utils");var h=t("../math"),p=t("../stats"),d=t("../core/command"),g=n(t("global/window")),y=n(t("dom-events")),m=(t("gl-quat"),n(t("raf"))),M=r.globalState={hasDeviceOrientation:!1,absolute:null,currentAlpha:0,currentBeta:90,currentGamma:0,deltaAlpha:0,deltaBeta:0,deltaGamma:0,prevAlpha:0,prevBeta:0,prevGamma:0};y.default.on(g.default,"deviceorientation",function(t){var e=t.alpha,r=t.beta,n=t.gamma,i=t.absolute;null!=e&&null!=r&&null!=n?(M.hasDeviceOrientation=!0,Object.assign(M,{absolute:i,currentAlpha:e,currentBeta:r,currentGamma:n,deltaAlpha:e-M.currentAlpha,deltaBeta:r-M.currentBeta,deltaGamma:n-M.currentGamma,prevAlpha:M.currentAlpha,prevBeta:M.currentBeta,prevGamma:M.currentGamma}),(0,m.default)(function(){return Object.assign(M,{deltaAlpha:0,deltaBeta:0,deltaGamma:0})})):M.hasDeviceOrientation=!1}),y.default.on(g.default,"devicemotion",function(t){Object.assign(M,{accelerationIncludingGravity:t.accelerationIncludingGravity,acceleration:t.acceleration,rotationRate:t.rotationRate,interval:t.interval})});r.OrientationInput=function(t){function e(t){function r(t){Object.assign(m,t)}function n(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":f(t))&&t?t:{},e="function"==typeof e?e:function(){},s(),e(c({},M,{deviceRotation:d,deviceEuler:g}))}function s(){m.length&&(m[0].getFrameData(y),d.set.apply(d,i(y.pose.orientation||[0,0,0,1])),g.set.apply(g,i(h.Euler.fromQuaternion(d))))}o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a(this,e),(0,p.registerStat)("OrienationInput");var l=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n)),d=new h.Quaternion,g=new h.Euler,y=new VRFrameData,m=[];return navigator.getVRDisplays().then(r).catch(function(e){t.emit("error",e)}),l}return s(e,t),e}(d.Command)},{"../core/command":6,"../math":47,"../stats":54,"../utils":55,"dom-events":147,"gl-quat":213,"global/window":318,raf:376,"webvr-polyfill":447}],34:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.TouchInput=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":s(t)},f=t("../stats"),h=t("../core/command"),p=t("touch-position"),d=n(t("dom-events")),g=n(t("raf"));r.TouchInput=function(t){function e(t){function r(t){var e=t.touches[0].clientX,r=t.touches[0].clientY;t.preventDefault(),m.touches=t.targetTouches,m.currentX=e,m.currentY=r,m.deltaX=0,m.deltaY=0,m.prevX=0,m.prevY=0}function n(t){t.preventDefault(),(0,g.default)(function(){m.touches=null,m.currentX=0,m.currentY=0,m.deltaX=0,m.deltaY=0,m.prevX=0,m.prevY=0})}function u(t){h(t.clientX,t.clientY)}function s(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":c(t))&&t?t:{},(e="function"==typeof e?e:function(){})(l({},t,m))}function h(t,e){(0,g.default)(function(){m.deltaX=0,m.deltaY=0}),m.currentX!=t&&m.currentY!=e&&(m.prevX=m.currentX,m.prevY=m.currentY,m.deltaX=t-m.currentX,m.deltaY=e-m.currentY,m.currentX=t,m.currentY=e)}i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o(this,e),(0,f.registerStat)("TouchInput");var y=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s)),m={touches:null,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},M=(0,p.emitter)({element:t.domElement});return M.on("move",u),d.default.on(t.domElement,"touchstart",r),d.default.on(t.domElement,"touchend",n),t.once("destroy",function(){M.dispose(),d.default.of(t.domElement,"touchstart",r),d.default.of(t.domElement,"touchend",n)}),y}return u(e,t),e}(h.Command)},{"../core/command":6,"../stats":54,"dom-events":147,raf:376,"touch-position":420}],35:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.AmbientLight=r.kDefaultAmbientLightContextEntry=r.kDefaultAmbientLightAmbient=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("./types"),c=t("./limits"),f=t("../stats"),h=t("../core/light"),p=function(t){return t&&t.__esModule?t:{default:t}}(t("defined")),d=r.kDefaultAmbientLightAmbient=.01,g=r.kDefaultAmbientLightContextEntry={identifier:"ambient",type:l.AmbientLightType,max:c.kMaxAmbientLights,defaults:{color:[0,0,0,0],visible:!1}};r.AmbientLight=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(0,f.incrementStat)("AmbientLight"),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u({},r,{ambient:(0,p.default)(r.ambient,d),type:(0,p.default)(r.type,l.AmbientLightType)})))}return o(e,t),s(e,null,[{key:"contextEntry",value:function(){return g}}]),e}(h.Light)},{"../core/light":14,"../stats":54,"./limits":38,"./types":40,defined:146}],36:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionalLight=r.kDefaultDirectionalLightContextEntry=r.kDefaultDirectionalLightAmbient=r.kDefaultDirectionalLightRadius=r.kDefaultDirectionalLightIntensity=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("./types"),c=t("./limits"),f=t("../stats"),h=t("../core/light"),p=(t("defined"),function(t){return t&&t.__esModule?t:{default:t}}(t("gl-mat4"))),d=r.kDefaultDirectionalLightIntensity=.5,g=r.kDefaultDirectionalLightRadius=.05,y=r.kDefaultDirectionalLightAmbient=.005,m=r.kDefaultDirectionalLightContextEntry={identifier:"directional",type:l.DirectionalLightType,max:c.kMaxDirectionalLights,defaults:{transform:p.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};r.DirectionalLight=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(0,f.incrementStat)("DirectionalLight"),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u({type:l.DirectionalLightType,radius:g,ambient:y,intensity:d},r)))}return o(e,t),s(e,null,[{key:"contextEntry",value:function(){return m}}]),e}(h.Light)},{"../core/light":14,"../stats":54,"./limits":38,"./types":40,defined:146,"gl-mat4":188}],37:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./directional");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})});var i=t("./ambient");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./point");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./types");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})})},{"./ambient":35,"./directional":36,"./point":39,"./types":40}],38:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.kMaxAmbientLights=16,r.kMaxDirectionalLights=12,r.kMaxPointLights=12},{}],39:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.PointLight=r.kDefaultPointLightContextEntry=r.kDefaultPointLightRadius=r.kDefaultPointLightAmbient=r.kDefaultPointLightIntensity=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=t("./types"),f=t("./directional"),h=t("./limits"),p=t("../stats"),d=n(t("defined")),g=n(t("gl-mat4")),y=r.kDefaultPointLightIntensity=.4,m=r.kDefaultPointLightAmbient=5e-4,M=r.kDefaultPointLightRadius=5e-4,v=r.kDefaultPointLightContextEntry={identifier:"point",type:c.PointLightType,max:h.kMaxPointLights,defaults:{transform:g.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};r.PointLight=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,e),(0,p.incrementStat)("PointLight"),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s({},r,{intensity:(0,d.default)(r.intensity,y),ambient:(0,d.default)(r.ambient,m),radius:(0,d.default)(r.radius,M),type:(0,d.default)(r.type,c.PointLightType)})))}return a(e,t),l(e,null,[{key:"contextEntry",value:function(){return v}}]),e}(f.DirectionalLight)},{"../stats":54,"./directional":36,"./limits":38,"./types":40,defined:146,"gl-mat4":188}],40:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BasicLightType=7077888,r.PointLightType=7077889,r.AmbientLightType=7077890,r.DirectionalLightType=7077891,r.SpotLightType=7077892},{}],41:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.FlatMaterial=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=t("./types"),l=t("../core/material");r.FlatMaterial=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u({type:s.FlatMaterialType},r)))}return o(e,t),e}(l.Material)},{"../core/material":15,"./types":45}],42:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./lambert");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})});var i=t("./phong");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./types");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./flat");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})})},{"./flat":41,"./lambert":43,"./phong":44,"./types":45}],43:[function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.LambertMaterialUniforms=r.LambertMaterialContext=r.LambertMaterial=r.kDefaultLambertMaterialAmbientColor=r.kDefaultLambertMaterialEmissiveColor=r.kDefaultLambertMaterialRoughness=r.kDefaultLambertMaterialAlbedo=void 0;var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h=t("./types"),p=t("../light/directional"),d=t("../light/ambient"),g=t("../light/point"),y=t("../utils"),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../light/types")),M=t("../math/vector"),v=t("../core/color"),b=t("../core/material"),w=function(t){return t&&t.__esModule?t:{default:t}}(t("defined")),x=r.kDefaultLambertMaterialAlbedo=.8,D=r.kDefaultLambertMaterialRoughness=.8,j=r.kDefaultLambertMaterialEmissiveColor=new v.Color("black"),N=r.kDefaultLambertMaterialAmbientColor=new v.Color(51,51,51),A=(r.LambertMaterial=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var n=r.uniforms,i=void 0===n?new A(t,r):n;return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f({type:h.LambertMaterialType},r,{uniforms:i})))}return s(e,t),e}(b.Material),r.LambertMaterialContext=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return s(e,t),e}(b.MaterialContext),r.LambertMaterialUniforms=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),s=[p.DirectionalLight.contextEntry(),d.AmbientLight.contextEntry(),g.PointLight.contextEntry()].concat(o(r.lightContext||[])),l=!0,c=!1,f=void 0;try{for(var h,y=s[Symbol.iterator]();!(l=(h=y.next()).done);l=!0){var M=h.value;n.setLightsInContext(M)}}catch(t){c=!0,f=t}finally{try{!l&&y.return&&y.return()}finally{if(c)throw f}}return n["material.roughness"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).roughness;return i(t),(0,w.default)(e,r.roughness,D)},n["material.emissive"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).emissive;return i(t),[].concat(o((0,w.default)(e,r.emissive,j)))},n["material.albedo"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).albedo;return i(t),(0,w.default)(e,r.albedo,x)},n["material.ambient"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ambient;return i(t),[].concat(o((0,w.default)(e,r.ambient,N)))},n["lightContext.ambient.count"]=function(t){var e=t.lights,r=m.AmbientLightType;return e.filter(Boolean).filter(function(t){return t.type==r}).length},n["lightContext.directional.count"]=function(t){var e=t.lights,r=m.DirectionalLightType;return e.filter(Boolean).filter(function(t){return t.type==r}).length},n["lightContext.point.count"]=function(t){var e=t.lights,r=m.PointLightType;return e.filter(Boolean).filter(function(t){return t.type==r}).length},n}return s(e,t),c(e,[{key:"setLightsInContext",value:function(t){for(var e=this,r=t.identifier,i=t.type,a=t.max,u=t.defaults,s=0;s<a;++s)!function(t){var a="lightContext."+r+".lights["+t+"]";for(var s in u)!function(r,u){Object.assign(e,n({},a+"."+r,function e(n){var a=n.lights,s=arguments.length>1&&arguments[1]!==e?arguments[1]:{},l=a.filter(function(t){return i==t.type})[t],c=l?(0,w.default)(l[r],s[r],u):u;return c instanceof M.Vector?c=[].concat(o(c)):(0,y.isArrayLike)(c)&&(c=[].concat(o(c))),c}))}(s,u[s])}(s)}}]),e}(b.MaterialUniforms))},{"../core/color":5,"../core/material":15,"../light/ambient":35,"../light/directional":36,"../light/point":39,"../light/types":40,"../math/vector":50,"../utils":55,"./types":45,defined:146}],44:[function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.PhongMaterialUniforms=r.PhongMaterial=r.kDefaultPhongMaterialShininess=r.kDefaultPhongMaterialSpecularColor=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=t("./lambert"),f=t("./types"),h=t("../core/color"),p=function(t){return t&&t.__esModule?t:{default:t}}(t("defined")),d=r.kDefaultPhongMaterialSpecularColor=new h.Color(1118481),g=r.kDefaultPhongMaterialShininess=40,y=(r.PhongMaterial=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var n=r.uniforms,i=void 0===n?new y(t,r):n;return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l({type:f.PhongMaterialType},r,{uniforms:i})))}return u(e,t),e}(c.LambertMaterial),r.PhongMaterialUniforms=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var u=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return u["material.shininess"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shininess;return i(t),(0,p.default)(e,r.shininess,g)},u["material.specular"]=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).specular;return i(t),[].concat(n((0,p.default)(e,r.specular,d)))},u}return u(e,t),e}(c.LambertMaterialUniforms))},{"../core/color":5,"./lambert":43,"./types":45,defined:146}],45:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MaterialType=7143424,r.FlatMaterialType=7143425,r.PhongMaterialType=7143426,r.LambertMaterialType=7143427},{}],46:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Euler=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./vector_swizzle_map")),f=t("./vector"),h=n(t("math-euler")),p=n(t("defined")),d=n(t("gl-mat4")),g=d.default.identity([]);r.Euler=function(t){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xyz";i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,p.default)(t,0),(0,p.default)(r,0),(0,p.default)(n,0)));if("string"!=typeof a)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===a?"undefined":s(a))+".");return u.order=a,u}return a(e,t),l(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=t}}],[{key:"swizzles",value:function(){return c.Euler}},{key:"fromQuaternion",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if("string"!=typeof r)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":s(r))+".");r=r.toUpperCase();var n=new h.default,i=d.default.fromQuat(g,t);return n.setFromRotationMatrix({elements:i},r),new e(n.x,n.y,n.z,r)}}]),e}(f.Vector)},{"./vector":50,"./vector_swizzle_map":51,defined:146,"gl-mat4":188,"math-euler":340}],47:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./quaternion");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})});var i=t("./matrix");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./vector");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./euler");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})})},{"./euler":46,"./matrix":48,"./quaternion":49,"./vector":50}],48:[function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0});var u=r.Matrix=function t(){o(this,t)};r.Matrix2=function(t){function e(){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(u),r.Matrix3=function(t){function e(){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(u),r.Matrix4=function(t){function e(){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(u)},{}],49:[function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Quaternion=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./vector_swizzle_map")),f=t("./vector"),h=(t("./euler"),function(t){return t&&t.__esModule?t:{default:t}}(t("defined")));r.Quaternion=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,h.default)(t,0),(0,h.default)(r,0),(0,h.default)(n,0),(0,h.default)(a,1)))}return a(e,t),l(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=t}}],[{key:"swizzles",value:function(){return c.Quaternion}},{key:"fromAxisAngle",value:function(t,r){return quat.setAxisAngle(new e,t,r)}},{key:"fromEuler",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if(null==t||![].concat(n(t)).every(function(t){return t==t&&"number"==typeof t}))throw new TypeError("Expecting euler to have numbers.");if("string"!=typeof(r=r||t.order||null))throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":s(r))+".");var i=Math.cos(.5*t[0]),o=Math.cos(.5*t[1]),a=Math.cos(.5*t[2]),u=Math.sin(.5*t[0]),l=Math.sin(.5*t[1]),c=Math.sin(.5*t[2]),f=0,h=0,p=0,d=1;if("xyz"==r)f=u*o*a+i*l*c,h=i*l*a-u*o*c,p=i*o*c+u*l*a,d=i*o*a-u*l*c;else if("yxz"==r)f=u*o*a+i*l*c,h=i*l*a-u*o*c,p=i*o*c-u*l*a,d=i*o*a+u*l*c;else if("zxy"==r)f=u*o*a-i*l*c,h=i*l*a+u*o*c,p=i*o*c+u*l*a,d=i*o*a-u*l*c;else if("zyx"==r)f=u*o*a-i*l*c,h=i*l*a+u*o*c,p=i*o*c-u*l*a,d=i*o*a+u*l*c;else if("yzx"==r)f=u*o*a+i*l*c,h=i*l*a+u*o*c,p=i*o*c-u*l*a,d=i*o*a-u*l*c;else{if("xzy"!=r)throw new TypeError("Unhandled Euler angle order. Got "+r+".");f=u*o*a-i*l*c,h=i*l*a-u*o*c,p=i*o*c+u*l*a,d=i*o*a+u*l*c}return new e(f,h,p,d)}}]),e}(f.Vector)},{"./euler":46,"./vector":50,"./vector_swizzle_map":51,defined:146}],50:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector4=r.Vector3=r.Vector2=r.Vector1=r.Vector=void 0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=t("../utils"),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./vector_swizzle_map")),h=n(t("get-unique-permutations")),p=n(t("defined")),d=n(t("global/window")),g=Object.getPrototypeOf(Float32Array.prototype).constructor,y=Boolean("object"==d.default.localStorage&&"function"==typeof d.default.localStorage.getItem&&"function"==typeof d.default.localStorage.setItem),m="axis3d:vector:permutations:cache",M=0==y?{}:JSON.parse(d.default.localStorage.getItem(m)||"{}"),v=r.Vector=function(){function t(){for(var e=this,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u(this,t),((0,c.isArrayLike)(n[0])||n[0]instanceof t||n[0]instanceof g)&&(n=n[0]);var o=null;o=n.every(function(t){return t instanceof g})?new Float32Array([].concat(a(n.reduce(function(t,e){return t.concat([].concat(a(e)))},[])))):n instanceof g?n:new Float32Array([].concat(a(n))),(0,c.define)(this,"elements",{get:function(){return o}});for(var s=0;s<o.length;++s)!function(t){(0,c.define)(e,t,{enumerable:!0,get:function(){return o[t]},set:function(r){o[t]=r,e.onchange(t,r)}})}(s);if("function"==typeof this.constructor.swizzles){var l=[];if(M[this.constructor.name])l=M[this.constructor.name];else{var f=!0,p=!1,v=void 0;try{for(var j,N=this.constructor.swizzles()[Symbol.iterator]();!(f=(j=N.next()).done);f=!0){var A,L=j.value;(A=l).push.apply(A,a((0,h.default)(L)))}}catch(t){p=!0,v=t}finally{try{!f&&N.return&&N.return()}finally{if(p)throw v}}}M[this.constructor.name]=Object.assign(M[this.constructor.name]||[],l),y&&d.default.localStorage.setItem(m,JSON.stringify(M));var T=!0,E=!1,I=void 0;try{for(var O,_=l[Symbol.iterator]();!(T=(O=_.next()).done);T=!0)!function(){var t=O.value,r=t.join("");if(e.hasOwnProperty(r))return"continue";(0,c.define)(e,r,{get:function(){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;r.push(e[s])}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}if(!/Vector/.test(e.constructor.name))return new(Function.prototype.bind.apply(e.constructor,[null].concat(r)));switch(r.length){case 4:return new(Function.prototype.bind.apply(D,[null].concat(r)));case 3:return new(Function.prototype.bind.apply(x,[null].concat(r)));case 2:return new(Function.prototype.bind.apply(w,[null].concat(r)));case 1:return new(Function.prototype.bind.apply(b,[null].concat(r)))}}})}()}catch(t){E=!0,I=t}finally{try{!T&&_.return&&_.return()}finally{if(E)throw I}}}}return l(t,[{key:"onchange",value:function(t,e){}},{key:"set",value:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if((0,c.isArrayLike)(r[0])||r[0]instanceof t||r[0]instanceof g)return this.set.apply(this,a(r[0]));for(var i=0;i<r.length;++i)this[i]=(0,p.default)(r[i],this[i]);return this}},{key:"get",value:function(t){return this.elements[t||0]||0}},{key:"toArray",value:function(){return[].concat(a(this.elements))}},{key:"toJSON",value:function(){return this.toArray()}},{key:"valueOf",value:function(){return this.elements}},{key:Symbol.iterator,value:function(){return this.toArray()[Symbol.iterator]()}},{key:"length",get:function(){return this.elements.length}}]),t}();Object.setPrototypeOf(v.prototype,Array.prototype);var b=r.Vector1=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return u(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),l(e,null,[{key:"swizzles",value:function(){return f.Vector}}]),e}(v),w=r.Vector2=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return o(e,t),l(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}}],[{key:"swizzles",value:function(){return f.Vector}}]),e}(v),x=r.Vector3=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return o(e,t),l(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"r",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"g",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"b",get:function(){return this[2]},set:function(t){return this[2]=t}}],[{key:"swizzles",value:function(){return f.Vector}}]),e}(v),D=r.Vector4=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return u(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n,o))}return o(e,t),l(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=t}},{key:"r",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"g",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"b",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"a",get:function(){return this[3]},set:function(t){return this[3]=t}}],[{key:"swizzles",value:function(){return f.Vector}}]),e}(v)},{"../utils":55,"./vector_swizzle_map":51,defined:146,"get-unique-permutations":159,"global/window":318}],51:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){return t.map(function(t){return t.filter(function(t){return!/[rgba]/.test(t)})}).filter(function(t){return t.length})},i=(r.offsetOf=function(t){for(var e=0;e<i.length;++e)if(i[e].indexOf(t)>-1)return e;return-1},r.offsets=[["x","r"],["y","g"],["z","b"],["w","a"]]),o=r.Vector1=[],a=r.Vector2=[["x","y"],["x","x"],["x","y"],["y","x"],["y","y"],["z","x"],["z","y"],["w","x"],["w","y"]],u=r.Vector3=[["x","y","z"],["x","x","x"],["x","x","y"],["x","x","z"],["y","y","x"],["y","y","y"],["y","y","z"],["z","z","x"],["z","z","y"],["z","z","z"],["w","w","x"],["w","w","y"],["w","w","z"],["r","g","b"],["r","r","r"],["r","r","g"],["r","r","b"],["g","g","r"],["g","g","g"],["g","g","b"],["b","b","r"],["b","b","g"],["b","b","b"],["a","a","r"],["a","a","g"],["a","a","b"]],s=r.Vector4=[["x","y","z","w"],["x","x","x","x"],["x","x","x","y"],["x","x","x","z"],["x","x","x","w"],["y","y","y","x"],["y","y","y","y"],["y","y","y","z"],["y","y","y","w"],["z","z","z","x"],["z","z","z","y"],["z","z","z","z"],["z","z","z","w"],["w","w","w","x"],["w","w","w","y"],["w","w","w","z"],["w","w","w","w"],["r","g","b","a"],["r","r","r","r"],["r","r","r","g"],["r","r","r","b"],["r","r","r","a"],["g","g","g","r"],["g","g","g","g"],["g","g","g","b"],["g","g","g","a"],["b","b","b","r"],["b","b","b","g"],["b","b","b","b"],["b","b","b","a"],["a","a","a","r"],["a","a","a","g"],["a","a","a","b"],["a","a","a","a"]],l=r.Vector=[].concat(o).concat(a).concat(u).concat(s);r.Euler=n(u),r.Quaternion=n(l),r.Color=function(t){return t.map(function(t){return t.filter(function(t){return!/[xyzw]/.test(t)})}).filter(function(t){return t.length})}(l)},{}],52:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./lines");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})})},{"./lines":53}],53:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0}),r.LinesMesh=r.kDefaultLinesMeshVertexShader=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=t("../stats"),f=t("../core/geometry"),h=t("../core/mesh"),p=n(t("screen-projected-lines")),d=n(t("mesh-reindex")),g=n(t("unindex-mesh")),y=(t("glslify"),n(t("normals"))),m=r.kDefaultLinesMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n/**\n */\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n};\n\nvec4 linevoffset (vec4 p, vec4 n, float direction_0, float aspect_0) { \n  vec2 sp = p.xy/p.w*vec2(aspect_0,1);\n  vec2 sn = n.xy/n.w*vec2(aspect_0,1);\n  vec2 dir = normalize(sn-sp);\n  vec2 norm = dir.yx*vec2(-1.0/aspect_0,1);\n  return vec4(direction_0*norm,0,0);\n}\n\n//\n// Shader uniforms.\n//\nuniform Mesh mesh;\nuniform Camera camera;\nuniform float time;\nuniform float thickness;\n\n//\n// Shader IO.\n//\nattribute vec3 nextPosition;\nattribute float direction;\nattribute vec3 position;\nattribute vec3 normal;\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\nvec3 lerp(vec3 a, vec3 b, float t) {\n  return vec3(\n    a.x + t * (b.x - a.x),\n    a.y + t * (b.y - a.y),\n    a.z + t * (b.z - a.z)\n  );\n}\n\n//\n// Shader entry.\n//\n\nvoid main() {\n  // @TODO(werle) - abstract to geomorping interface\n  //float p = random(position.xy);\n  //vec3 pos = lerp(position, position + vec3(p, p, p), cos(0.5*time));\n\n  // @TODO(werle) - abstract to geomorping interface\n  //float np = random(nextPosition.yz);\n  //vec3 npos = lerp(nextPosition, nextPosition + vec3(np, np, np), sin(0.1*time));\n  vec4 linePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0)\n    ;\n\n  vec4 nextLinePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(nextPosition, 1.0)\n    ;\n\n  vec4 lineOffset = linevoffset(\n      linePosition,\n      nextLinePosition,\n      direction, camera.aspect);\n\n  gl_Position = linePosition + lineOffset*thickness;\n\n  // GeometryContext\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  vnormal = normalize(mesh.modelNormal * normal);\n}\n";r.LinesMesh=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,c.incrementStat)("LinesMesh");var n=m,u=r.geometry,s=r.thickness,M=void 0===s?.005:s,v=u.complex,b=void 0===v?u:v,w=b.cells.map(function(t){return t.slice()}),x=(0,d.default)((0,g.default)(b.positions,w));b.normals=y.default.vertexNormals(x.cells,x.positions),Object.assign({},b,w);var D=(0,p.default)(b,{attributes:{normals:b.normals}});return D.normals=D.attributes.normals,u=new f.Geometry({complex:D,flatten:!1}),u.complex.normals=D.normals,r.geometry=u,a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l({},r,{primitive:"triangles",geometry:u,vert:n,uniforms:Object.assign(new h.MeshUniforms(t,r),{thickness:function(t,e){var r=e.thickness,n=void 0===r?M:r;return i(t),n}}),attributes:Object.assign(new h.MeshAttributes(t,r),{nextPosition:D.nextPositions,direction:D.directions})})))}return u(e,t),e}(h.Mesh)},{"../core/geometry":10,"../core/mesh":16,"../stats":54,glslify:329,"mesh-reindex":341,normals:352,"screen-projected-lines":406,"unindex-mesh":425}],54:[function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":d(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){if("string"!=typeof t)throw new M(t);return null==y[t]&&(y[t]=[]),y[t]}function u(t,e){a(t);var r=new m(t,e);return y[t].push(r),r}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(t);var r=h(t),n=e;return r&&(n=(r.info||0)+e),u(t,n),n}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(t);var r=h(t),n=0;return r&&(n=r.info-e),u(t,n),n}function c(t){if("string"!=typeof t)throw new M(t);y[t]&&Array.isArray(y[t])?y[t].splice(y[t.length]):y[t]=[]}function f(t){if("string"!=typeof t)throw new M(t);return y[t]?y[t][0]||null:null}function h(t){if(y[t]){var e=y[t].length||0;return y[t][e-1]||null}return null}function p(t){if("string"!=typeof t)throw new M(t);return y[t]||null}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(r,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"===d(Symbol.iterator)?function(t){return void 0===t?"undefined":d(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":d(t)};r.createStatList=a,r.registerStat=u,r.incrementStat=s,r.decrementStat=l,r.clearStats=c,r.headStat=f,r.tailStat=h,r.getStats=p;var y={},m=r.Stat=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o(this,t),"string"!=typeof e)throw new M(e);this.name=e,this.info=r,this.timestamp=Date.now()},M=r.StatNameError=function(t){function e(t){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Expecting stat name to be a string. Got "+(void 0===t?"undefined":g(t))))}return i(e,t),e}(TypeError)},{}],55:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=r.ensureRGBA=r.clampToMaxSize=r.scaleWithCanvas=r.createCanvas=r.makePowerOfTwo=r.nearestPowerOfTwo=r.getScreenOrientation=r.lerp=r.debug=r.radians=r.define=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a=n(t("debug")),u=n(t("global/window")),s=n(t("clamp")),l=Object.getPrototypeOf(Float32Array.prototype).constructor,c=Math.round,f=Math.pow,h=(r.define=function(t,e,r){return Object.defineProperty(t,e,o({},r))},r.radians=function(t){return t==t?t*Math.PI/180:0},r.debug=(0,a.default)("[axis@0.1.13]"),r.lerp=function(t,e,r){return t*(1-r)+e*r},r.getScreenOrientation=function(){switch(u.default.screen.orientation||u.default.screen.mozOrientation){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return u.default.orientation||0},r.nearestPowerOfTwo=function(t){return f(2,c(Math.log(t)/Math.LN2))}),p=r.makePowerOfTwo=function(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=d(),r=e.getContext("2d");return e.width=h(t.width),e.height=h(t.height),r.drawImage(t,0,0,e.width,e.height),e}return t},d=r.createCanvas=function(){return document.createElementNS("http://www.w3.org/1999/xhtml","canvas")},g=r.scaleWithCanvas=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(),i=n.getContext("2d"),o=t.width,a=t.height;return r&&(o=h(o),a=h(a)),n.width=Math.floor(t.width*e),n.height=Math.floor(t.height*e),i.drawImage(t,0,0,o,a,0,0,n.width,n.height),n};r.clampToMaxSize=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height);return g(t,n,r)}return r?p(t):t},r.ensureRGBA=function(t){t=[].concat(i(t||[]));for(var e=0;e<3;++e)"number"!=typeof t[e]?t[e]=0:t[e]=(0,s.default)(t[e],0,1);return"number"!=typeof t[3]?t[3]=1:t[3]=(0,s.default)(t[3],0,1),[].concat(i(t)).slice(0,4)},r.isArrayLike=function(t){return Boolean(t&&(Array.isArray(t)||t instanceof l||"number"==t.length&&"function"==typeof t[Symbol.iterator]))}},{clamp:98,debug:144,"global/window":318}],56:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function o(t){var e,r,i,o,a,u,s=t.length;a=n(t),u=new f(3*s/4-a),i=a>0?s-4:s;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],u[l++]=o>>16&255,u[l++]=o>>8&255,u[l++]=255&o;return 2===a?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,u[l++]=255&o):1===a&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,u[l++]=o>>8&255,u[l++]=255&o),u}function a(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function u(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(n));return i.join("")}function s(t){for(var e,r=t.length,n=r%3,i="",o=[],a=0,s=r-n;a<s;a+=16383)o.push(u(t,a,a+16383>s?s:a+16383));return 1===n?(e=t[r-1],i+=l[e>>2],i+=l[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=l[e>>10],i+=l[e>>4&63],i+=l[e<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=i,r.toByteArray=o,r.fromByteArray=s;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)l[p]=h[p],c[h.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],57:[function(t,e,r){"use strict";function n(t,e){return i(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}var i=t("./lib/rationalize");e.exports=n},{"./lib/rationalize":67}],58:[function(t,e,r){"use strict";function n(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}e.exports=n},{}],59:[function(t,e,r){"use strict";function n(t,e){return i(t[0].mul(e[1]),t[1].mul(e[0]))}var i=t("./lib/rationalize");e.exports=n},{"./lib/rationalize":67}],60:[function(t,e,r){"use strict";function n(t,e){if(i(t))return e?l(t,n(e)):[t[0].clone(),t[1].clone()];var r,c,f=0;if(o(t))r=t.clone();else if("string"==typeof t)r=u(t);else{if(0===t)return[a(0),a(1)];if(t===Math.floor(t))r=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),f-=256;r=a(t)}}if(i(e))r.mul(e[1]),c=e[0].clone();else if(o(e))c=e.clone();else if("string"==typeof e)c=u(e);else if(e)if(e===Math.floor(e))c=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),f+=256;c=a(e)}else c=a(1);return f>0?r=r.ushln(f):f<0&&(c=c.ushln(-f)),s(r,c)}var i=t("./is-rat"),o=t("./lib/is-bn"),a=t("./lib/num-to-bn"),u=t("./lib/str-to-bn"),s=t("./lib/rationalize"),l=t("./div");e.exports=n},{"./div":59,"./is-rat":61,"./lib/is-bn":65,"./lib/num-to-bn":66,"./lib/rationalize":67,"./lib/str-to-bn":68}],61:[function(t,e,r){"use strict";function n(t){return Array.isArray(t)&&2===t.length&&i(t[0])&&i(t[1])}var i=t("./lib/is-bn");e.exports=n},{"./lib/is-bn":65}],62:[function(t,e,r){"use strict";function n(t){return t.cmp(new i(0))}var i=t("bn.js");e.exports=n},{"bn.js":75}],63:[function(t,e,r){"use strict";function n(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var o=0;o<e;o++)n+=r[o]*Math.pow(67108864,o);return i(t)*n}var i=t("./bn-sign");e.exports=n},{"./bn-sign":62}],64:[function(t,e,r){"use strict";function n(t){var e=o(i.lo(t));if(e<32)return e;var r=o(i.hi(t));return r>20?52:r+32}var i=t("double-bits"),o=t("bit-twiddle").countTrailingZeros;e.exports=n},{"bit-twiddle":74,"double-bits":148}],65:[function(t,e,r){"use strict";function n(t){return t&&"object"==typeof t&&Boolean(t.words)}t("bn.js");e.exports=n},{"bn.js":75}],66:[function(t,e,r){"use strict";function n(t){var e=o.exponent(t);return e<52?new i(t):new i(t*Math.pow(2,52-e)).ushln(e-52)}var i=t("bn.js"),o=t("double-bits");e.exports=n},{"bn.js":75,"double-bits":148}],67:[function(t,e,r){"use strict";function n(t,e){var r=o(t),n=o(e);if(0===r)return[i(0),i(1)];if(0===n)return[i(0),i(0)];n<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);return a.cmpn(1)?[t.div(a),e.div(a)]:[t,e]}var i=t("./num-to-bn"),o=t("./bn-sign");e.exports=n},{"./bn-sign":62,"./num-to-bn":66}],68:[function(t,e,r){"use strict";function n(t){return new i(t)}var i=t("bn.js");e.exports=n},{"bn.js":75}],69:[function(t,e,r){"use strict";function n(t,e){return i(t[0].mul(e[0]),t[1].mul(e[1]))}var i=t("./lib/rationalize");e.exports=n},{"./lib/rationalize":67}],70:[function(t,e,r){"use strict";function n(t){return i(t[0])*i(t[1])}var i=t("./lib/bn-sign");e.exports=n},{"./lib/bn-sign":62}],71:[function(t,e,r){"use strict";function n(t,e){return i(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}var i=t("./lib/rationalize");e.exports=n},{"./lib/rationalize":67}],72:[function(t,e,r){"use strict";function n(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var n=e.abs().divmod(r.abs()),a=n.div,u=i(a),s=n.mod,l=e.negative!==r.negative?-1:1;if(0===s.cmpn(0))return l*u;if(u){var c=o(u)+4;return l*(u+(h=i(s.ushln(c).divRound(r)))*Math.pow(2,-c))}var f=r.bitLength()-s.bitLength()+53,h=i(s.ushln(f).divRound(r));return f<1023?l*h*Math.pow(2,-f):(h*=Math.pow(2,-1023),l*h*Math.pow(2,1023-f))}var i=t("./lib/bn-to-num"),o=t("./lib/ctz");e.exports=n},{"./lib/bn-to-num":63,"./lib/ctz":64}],73:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){var a=["function ",t,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?e.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function i(t,e,r,i){return new Function([n("A","x"+t+"y",e,["y"],!1,i),n("B","x"+t+"y",e,["y"],!0,i),n("P","c(x,y)"+t+"0",e,["y","c"],!1,i),n("Q","c(x,y)"+t+"0",e,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],74:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],75:[function(t,e,r){!function(e,r){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}function a(t,e,r){for(var n=0,i=Math.min(t.length,r),o=e;o<i;o++){var a=t.charCodeAt(o)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var u=t.charCodeAt(a)-48;i*=n,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}function s(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function l(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,u=67108863&a,s=a/67108864|0;r.words[0]=u;for(var l=1;l<n;l++){for(var c=s>>>26,f=67108863&s,h=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=h;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+f)/67108864|0,f=67108863&a}r.words[l]=0|f,s=0|c}return 0!==s?r.words[l]=0|s:r.length--,r.strip()}function c(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var u=67108863&n,s=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=s;l++){var c=o-l,f=(0|t.words[c])*(0|e.words[l]),h=67108863&f;u=67108863&(h=h+u|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=u,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function f(t,e,r){return(new h).mulp(t,e,r)}function h(t,e){this.x=t,this.y=e}function p(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function m(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function v(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof e?e.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var b;try{b=t("buffer").Buffer}catch(e){}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,u=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=t.length-6,n=0;r>=e;r-=6)i=a(t,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==e&&(i=a(t,e,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var f=1;for(l=u(t,c,t.length,e),c=0;c<a;c++)f*=e;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){t=t||10,e=0|e||1;var r;if(16===t||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var u=this.words[a],s=(16777215&(u<<i|o)).toString(16);r=0!==(o=u>>>24-i&16777215)||a!==this.length-1?w[6-s.length]+s+r:s+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=x[t],c=D[t];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var h=f.modn(c).toString(t);r=(f=f.idivn(c)).isZero()?h+r:w[l-h.length]+h+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==b),this.toArrayLike(b,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,u,s="le"===e,l=new t(o),c=this.clone();if(s){for(u=0;!c.isZero();u++)a=c.andln(255),c.iushrn(8),l[u]=a;for(;u<o;u++)l[u]=0}else{for(u=0;u<o-i;u++)l[u]=0;for(u=0;!c.isZero();u++)a=c.andln(255),c.iushrn(8),l[o-u-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var n,i;r>0?(n=this,i=t):(n=t,i=this);for(var o=0,a=0;a<i.length;a++)e=(0|n.words[a])-(0|i.words[a])+o,o=e>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)e=(0|n.words[a])+o,o=e>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var j=function(t,e,r){var n,i,o,a=t.words,u=e.words,s=r.words,l=0,c=0|a[0],f=8191&c,h=c>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],m=8191&y,M=y>>>13,v=0|a[3],b=8191&v,w=v>>>13,x=0|a[4],D=8191&x,j=x>>>13,N=0|a[5],A=8191&N,L=N>>>13,T=0|a[6],E=8191&T,I=T>>>13,O=0|a[7],_=8191&O,S=O>>>13,C=0|a[8],z=8191&C,k=C>>>13,P=0|a[9],Q=8191&P,U=P>>>13,B=0|u[0],Y=8191&B,R=B>>>13,F=0|u[1],G=8191&F,V=F>>>13,W=0|u[2],H=8191&W,q=W>>>13,X=0|u[3],Z=8191&X,K=X>>>13,J=0|u[4],$=8191&J,tt=J>>>13,et=0|u[5],rt=8191&et,nt=et>>>13,it=0|u[6],ot=8191&it,at=it>>>13,ut=0|u[7],st=8191&ut,lt=ut>>>13,ct=0|u[8],ft=8191&ct,ht=ct>>>13,pt=0|u[9],dt=8191&pt,gt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(f,Y))|0)+((8191&(i=(i=Math.imul(f,R))+Math.imul(h,Y)|0))<<13)|0;l=((o=Math.imul(h,R))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,Y),i=(i=Math.imul(d,R))+Math.imul(g,Y)|0,o=Math.imul(g,R);var mt=(l+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(h,G)|0))<<13)|0;l=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,Y),i=(i=Math.imul(m,R))+Math.imul(M,Y)|0,o=Math.imul(M,R),n=n+Math.imul(d,G)|0,i=(i=i+Math.imul(d,V)|0)+Math.imul(g,G)|0,o=o+Math.imul(g,V)|0;var Mt=(l+(n=n+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,H)|0))<<13)|0;l=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(b,Y),i=(i=Math.imul(b,R))+Math.imul(w,Y)|0,o=Math.imul(w,R),n=n+Math.imul(m,G)|0,i=(i=i+Math.imul(m,V)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,V)|0,n=n+Math.imul(d,H)|0,i=(i=i+Math.imul(d,q)|0)+Math.imul(g,H)|0,o=o+Math.imul(g,q)|0;var vt=(l+(n=n+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,Z)|0))<<13)|0;l=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,R))+Math.imul(j,Y)|0,o=Math.imul(j,R),n=n+Math.imul(b,G)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,V)|0,n=n+Math.imul(m,H)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(M,H)|0,o=o+Math.imul(M,q)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,K)|0;var bt=(l+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,tt)|0)+Math.imul(h,$)|0))<<13)|0;l=((o=o+Math.imul(h,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(A,Y),i=(i=Math.imul(A,R))+Math.imul(L,Y)|0,o=Math.imul(L,R),n=n+Math.imul(D,G)|0,i=(i=i+Math.imul(D,V)|0)+Math.imul(j,G)|0,o=o+Math.imul(j,V)|0,n=n+Math.imul(b,H)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,q)|0,n=n+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,K)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0;var wt=(l+(n=n+Math.imul(f,rt)|0)|0)+((8191&(i=(i=i+Math.imul(f,nt)|0)+Math.imul(h,rt)|0))<<13)|0;l=((o=o+Math.imul(h,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(E,Y),i=(i=Math.imul(E,R))+Math.imul(I,Y)|0,o=Math.imul(I,R),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,V)|0,n=n+Math.imul(D,H)|0,i=(i=i+Math.imul(D,q)|0)+Math.imul(j,H)|0,o=o+Math.imul(j,q)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(m,$)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var xt=(l+(n=n+Math.imul(f,ot)|0)|0)+((8191&(i=(i=i+Math.imul(f,at)|0)+Math.imul(h,ot)|0))<<13)|0;l=((o=o+Math.imul(h,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(_,Y),i=(i=Math.imul(_,R))+Math.imul(S,Y)|0,o=Math.imul(S,R),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,V)|0,n=n+Math.imul(A,H)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,q)|0,n=n+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,K)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0;var Dt=(l+(n=n+Math.imul(f,st)|0)|0)+((8191&(i=(i=i+Math.imul(f,lt)|0)+Math.imul(h,st)|0))<<13)|0;l=((o=o+Math.imul(h,lt)|0)+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(z,Y),i=(i=Math.imul(z,R))+Math.imul(k,Y)|0,o=Math.imul(k,R),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,V)|0,n=n+Math.imul(E,H)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,q)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(D,$)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,at)|0,n=n+Math.imul(d,st)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(g,st)|0,o=o+Math.imul(g,lt)|0;var jt=(l+(n=n+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,ht)|0)+Math.imul(h,ft)|0))<<13)|0;l=((o=o+Math.imul(h,ht)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(Q,Y),i=(i=Math.imul(Q,R))+Math.imul(U,Y)|0,o=Math.imul(U,R),n=n+Math.imul(z,G)|0,i=(i=i+Math.imul(z,V)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,V)|0,n=n+Math.imul(_,H)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,q)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(D,rt)|0,i=(i=i+Math.imul(D,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(m,st)|0,i=(i=i+Math.imul(m,lt)|0)+Math.imul(M,st)|0,o=o+Math.imul(M,lt)|0,n=n+Math.imul(d,ft)|0,i=(i=i+Math.imul(d,ht)|0)+Math.imul(g,ft)|0,o=o+Math.imul(g,ht)|0;var Nt=(l+(n=n+Math.imul(f,dt)|0)|0)+((8191&(i=(i=i+Math.imul(f,gt)|0)+Math.imul(h,dt)|0))<<13)|0;l=((o=o+Math.imul(h,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(Q,G),i=(i=Math.imul(Q,V))+Math.imul(U,G)|0,o=Math.imul(U,V),n=n+Math.imul(z,H)|0,i=(i=i+Math.imul(z,q)|0)+Math.imul(k,H)|0,o=o+Math.imul(k,q)|0,n=n+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,n=n+Math.imul(A,rt)|0,i=(i=i+Math.imul(A,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(D,ot)|0,i=(i=i+Math.imul(D,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(b,st)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,st)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(m,ft)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(M,ft)|0,o=o+Math.imul(M,ht)|0;var At=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;l=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(Q,H),i=(i=Math.imul(Q,q))+Math.imul(U,H)|0,o=Math.imul(U,q),n=n+Math.imul(z,Z)|0,i=(i=i+Math.imul(z,K)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(I,rt)|0,o=o+Math.imul(I,nt)|0,n=n+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(D,st)|0,i=(i=i+Math.imul(D,lt)|0)+Math.imul(j,st)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(b,ft)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(w,ft)|0,o=o+Math.imul(w,ht)|0;var Lt=(l+(n=n+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(M,dt)|0))<<13)|0;l=((o=o+Math.imul(M,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(Q,Z),i=(i=Math.imul(Q,K))+Math.imul(U,Z)|0,o=Math.imul(U,K),n=n+Math.imul(z,$)|0,i=(i=i+Math.imul(z,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(_,rt)|0,i=(i=i+Math.imul(_,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,n=n+Math.imul(A,st)|0,i=(i=i+Math.imul(A,lt)|0)+Math.imul(L,st)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(D,ft)|0,i=(i=i+Math.imul(D,ht)|0)+Math.imul(j,ft)|0,o=o+Math.imul(j,ht)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,gt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(Q,$),i=(i=Math.imul(Q,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(z,rt)|0,i=(i=i+Math.imul(z,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(E,st)|0,i=(i=i+Math.imul(E,lt)|0)+Math.imul(I,st)|0,o=o+Math.imul(I,lt)|0,n=n+Math.imul(A,ft)|0,i=(i=i+Math.imul(A,ht)|0)+Math.imul(L,ft)|0,o=o+Math.imul(L,ht)|0;var Et=(l+(n=n+Math.imul(D,dt)|0)|0)+((8191&(i=(i=i+Math.imul(D,gt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(Q,rt),i=(i=Math.imul(Q,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(z,ot)|0,i=(i=i+Math.imul(z,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(_,st)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(S,st)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(E,ft)|0,i=(i=i+Math.imul(E,ht)|0)+Math.imul(I,ft)|0,o=o+Math.imul(I,ht)|0;var It=(l+(n=n+Math.imul(A,dt)|0)|0)+((8191&(i=(i=i+Math.imul(A,gt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(Q,ot),i=(i=Math.imul(Q,at))+Math.imul(U,ot)|0,o=Math.imul(U,at),n=n+Math.imul(z,st)|0,i=(i=i+Math.imul(z,lt)|0)+Math.imul(k,st)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(_,ft)|0,i=(i=i+Math.imul(_,ht)|0)+Math.imul(S,ft)|0,o=o+Math.imul(S,ht)|0;var Ot=(l+(n=n+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,gt)|0)+Math.imul(I,dt)|0))<<13)|0;l=((o=o+Math.imul(I,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(Q,st),i=(i=Math.imul(Q,lt))+Math.imul(U,st)|0,o=Math.imul(U,lt),n=n+Math.imul(z,ft)|0,i=(i=i+Math.imul(z,ht)|0)+Math.imul(k,ft)|0,o=o+Math.imul(k,ht)|0;var _t=(l+(n=n+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,gt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,gt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(Q,ft),i=(i=Math.imul(Q,ht))+Math.imul(U,ft)|0,o=Math.imul(U,ht);var St=(l+(n=n+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,gt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,gt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863;var Ct=(l+(n=Math.imul(Q,dt))|0)+((8191&(i=(i=Math.imul(Q,gt))+Math.imul(U,dt)|0))<<13)|0;return l=((o=Math.imul(U,gt))+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,s[0]=yt,s[1]=mt,s[2]=Mt,s[3]=vt,s[4]=bt,s[5]=wt,s[6]=xt,s[7]=Dt,s[8]=jt,s[9]=Nt,s[10]=At,s[11]=Lt,s[12]=Tt,s[13]=Et,s[14]=It,s[15]=Ot,s[16]=_t,s[17]=St,s[18]=Ct,0!==l&&(s[19]=l,r.length++),r};Math.imul||(j=l),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?j(this,t,e):r<63?l(this,t,e):r<1024?c(this,t,e):f(this,t,e)},h.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},h.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},h.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},h.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var u=a<<1,s=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),c=0;c<i;c+=u)for(var f=s,h=l,p=0;p<a;p++){var d=r[c+p],g=n[c+p],y=r[c+p+a],m=n[c+p+a],M=f*y-h*m;m=f*m+h*y,y=M,r[c+p]=d+y,n[c+p]=g+m,r[c+p+a]=d-y,n[c+p+a]=g-m,p!==u&&(M=s*f-l*h,h=s*h+l*f,f=M)}},h.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},h.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},h.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},h.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},h.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},h.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),u=new Array(n),s=new Array(n),l=new Array(n),c=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,u,s,n,i),this.transform(l,o,c,f,n,i);for(var p=0;p<n;p++){var d=u[p]*c[p]-s[p]*f[p];s[p]=u[p]*f[p]+s[p]*c[p],u[p]=d}return this.conjugate(u,s,n),this.transform(u,s,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),f(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=s(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var u=this.words[e]&o,s=(0|this.words[e])-u<<r;this.words[e]=s|a,a=u>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0);var i;i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),u=67108863^67108863>>>o<<o,s=r;if(i-=a,i=Math.max(0,i),s){for(var l=0;l<a;l++)s.words[l]=this.words[l];s.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var f=0|this.words[l];this.words[l]=c<<26-o|f>>>o,c=f&u}return s&&0!==c&&(s.words[s.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o=t.length+r;this._expand(o);var a,u=0;for(i=0;i<t.length;i++){a=(0|this.words[i+r])+u;var s=(0|t.words[i])*e;u=((a-=67108863&s)>>26)-(s/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)a=(0|this.words[i+r])+u,u=a>>26,this.words[i+r]=67108863&a;if(0===u)return this.strip();for(n(-1===u),u=0,i=0;i<this.length;i++)a=-(0|this.words[i])+u,u=a>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,a=0|i.words[i.length-1];0!=(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var u,s=n.length-i.length;if("mod"!==e){(u=new o(null)).length=s+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,s);0===c.negative&&(n=c,u&&(u.words[s]=1));for(var f=s-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=h)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){if(n(!t.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var i,a,u;return 0!==this.negative&&0===t.negative?(u=this.neg().divmod(t,e),"mod"!==e&&(i=u.div.neg()),"div"!==e&&(a=u.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(u=this.divmod(t.neg(),e),"mod"!==e&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&t.negative)?(u=this.neg().divmod(t.neg(),e),"div"!==e&&(a=u.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:u.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),u=new o(0),s=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),f=e.clone();!e.isZero();){for(var h=0,p=1;0==(e.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(r.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(u.isOdd()||s.isOdd())&&(u.iadd(c),s.isub(f)),u.iushrn(1),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(u),a.isub(s)):(r.isub(e),u.isub(i),s.isub(a))}return{a:u,b:s,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var s=0,l=1;0==(e.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(e.iushrn(s);s-- >0;)i.isOdd()&&i.iadd(u),i.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a)):(r.isub(e),a.isub(i))}var h;return(h=0===e.cmpn(1)?i:a).cmpn(0)<0&&h.iadd(t),h},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var u=0|this.words[a];o=(u+=o)>>>26,u&=67108863,this.words[a]=u}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;this.strip();var r;if(this.length>1)r=1;else{e&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var N={k256:null,p224:null,p192:null,p25519:null};p.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},p.prototype.split=function(t,e){t.iushrn(this.n,0,e)},p.prototype.imulK=function(t){return t.imul(this.k)},i(d,p),d.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},d.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(g,p),i(y,p),i(m,p),m.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(N[t])return N[t];var e;if("k256"===t)e=new d;else if("p224"===t)e=new g;else if("p192"===t)e=new y;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new m}return N[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var u=new o(1).toRed(this),s=u.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(s);)c.redIAdd(s);for(var f=this.pow(c,i),h=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();n(y<d);var m=this.pow(f,new o(1).iushln(d-y-1));h=h.redMul(m),f=m.redSqr(),p=p.redMul(f),d=y}return h},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,u=0,s=e.bitLength()%26;for(0===s&&(s=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=s-1;c>=0;c--){var f=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4==++u||0===n&&0===c)&&(i=this.mul(i,r[a]),u=0,a=0)):u=0}s=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new v(t)},i(v,M),v.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},v.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},v.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},v.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},v.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:86}],76:[function(t,e,r){"use strict";function n(t){var e=t.length;if(0===e)return[[],[]];for(var r=t[0].length,n=t[0].slice(),i=t[0].slice(),o=1;o<e;++o)for(var a=t[o],u=0;u<r;++u){var s=a[u];n[u]=Math.min(n[u],s),i[u]=Math.max(i[u],s)}return[n,i]}e.exports=n},{}],77:[function(t,e,r){"use strict";function n(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function i(t,e,r,i){for(var o=0,a=0,u=0,s=t.length;u<s;++u){var l=t[u];if(!n(e,l)){for(var c=0;c<2*e;++c)r[o++]=l[c];i[a++]=u}}return a}function o(t,e,r,n){var o=t.length,a=e.length;if(!(o<=0||a<=0)){var u=t[0].length>>>1;if(!(u<=0)){var s,l=f.mallocDouble(2*u*o),c=f.mallocInt32(o);if((o=i(t,u,l,c))>0){if(1===u&&n)h.init(o),s=h.sweepComplete(u,r,0,o,l,c,0,o,l,c);else{var d=f.mallocDouble(2*u*a),g=f.mallocInt32(a);(a=i(e,u,d,g))>0&&(h.init(o+a),s=1===u?h.sweepBipartite(u,r,0,o,l,c,0,a,d,g):p(u,r,n,o,l,c,a,d,g),f.free(d),f.free(g))}f.free(l),f.free(c)}return s}}}function a(t,e){c.push([t,e])}function u(t){return c=[],o(t,t,a,!0),c}function s(t,e){return c=[],o(t,e,a,!1),c}function l(t,e,r){switch(arguments.length){case 1:return u(t);case 2:return"function"==typeof e?o(t,t,e,!0):s(t,e);case 3:return o(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}}e.exports=l;var c,f=t("typedarray-pool"),h=t("./lib/sweep"),p=t("./lib/intersect")},{"./lib/intersect":79,"./lib/sweep":83,"typedarray-pool":424}],78:[function(t,e,r){"use strict";function n(t,e,r){var n="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),i=["function ",n,"(",x.join(),"){","var ",l,"=2*",o,";"],s="for(var i="+c+","+d+"="+l+"*"+c+";i<"+f+";++i,"+d+"+="+l+"){var x0="+h+"["+a+"+"+d+"],x1="+h+"["+a+"+"+d+"+"+o+"],xi="+p+"[i];",D="for(var j="+g+","+v+"="+l+"*"+g+";j<"+y+";++j,"+v+"+="+l+"){var y0="+m+"["+a+"+"+v+"],"+(r?"y1="+m+"["+a+"+"+v+"+"+o+"],":"")+"yi="+M+"[j];";return t?i.push(s,w,":",D):i.push(D,w,":",s),r?i.push("if(y1<x0||x1<y0)continue;"):e?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+a+"+1;k<"+o+";++k){var r0="+h+"[k+"+d+"],r1="+h+"[k+"+o+"+"+d+"],b0="+m+"[k+"+v+"],b1="+m+"[k+"+o+"+"+v+"];if(r1<b0||b1<r0)continue "+w+";}var "+b+"="+u+"("),e?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:n,code:i.join("")}}function i(t){function e(e,r){var o=n(e,r,t);i.push(o.code),a.push("return "+o.name+"("+x.join()+");")}var r="bruteForce"+(t?"Full":"Partial"),i=[],o=x.slice();t||o.splice(3,0,s);var a=["function "+r+"("+o.join()+"){"];a.push("if("+f+"-"+c+">"+y+"-"+g+"){"),t?(e(!0,!1),a.push("}else{"),e(!1,!1)):(a.push("if("+s+"){"),e(!0,!0),a.push("}else{"),e(!0,!1),a.push("}}else{if("+s+"){"),e(!1,!0),a.push("}else{"),e(!1,!1),a.push("}")),a.push("}}return "+r);var u=i.join("")+a.join("");return new Function(u)()}var o="d",a="ax",u="vv",s="fp",l="es",c="rs",f="re",h="rb",p="ri",d="rp",g="bs",y="be",m="bb",M="bi",v="bp",b="rv",w="Q",x=[o,a,u,c,f,h,p,g,y,m,M];r.partial=i(!1),r.full=i(!0)},{}],79:[function(t,e,r){"use strict";function n(t,e){var r=8*l.log2(e+1)*(t+1)|0,n=l.nextPow2(N*r);L.length<n&&(s.free(L),L=s.mallocInt32(n));var i=l.nextPow2(A*r);T<i&&(s.free(T),T=s.mallocDouble(i))}function i(t,e,r,n,i,o,a,u,s){var l=N*t;L[l]=e,L[l+1]=r,L[l+2]=n,L[l+3]=i,L[l+4]=o,L[l+5]=a;var c=A*t;T[c]=u,T[c+1]=s}function o(t,e,r,n,i,o,a,u,s,l,c){var f=2*t,h=s*f,p=l[h+e];t:for(var d=i,g=i*f;d<o;++d,g+=f){var y=a[g+e],m=a[g+e+t];if(!(p<y||m<p||n&&p===y)){for(var M=u[d],v=e+1;v<t;++v){var y=a[g+v],m=a[g+v+t],b=l[h+v],w=l[h+v+t];if(m<b||w<y)continue t}var x;if(void 0!==(x=n?r(c,M):r(M,c)))return x}}}function a(t,e,r,n,i,o,a,u,s,l){var c=2*t,f=u*c,h=s[f+e];t:for(var p=n,d=n*c;p<i;++p,d+=c){var g=a[p];if(g!==l){var y=o[d+e],m=o[d+e+t];if(!(h<y||m<h)){for(var M=e+1;M<t;++M){var y=o[d+M],m=o[d+M+t],v=s[f+M],b=s[f+M+t];if(m<v||b<y)continue t}var w=r(g,l);if(void 0!==w)return w}}}}function u(t,e,r,u,s,l,c,g,E){n(t,u+c);var I,O=0,_=2*t;for(i(O++,0,0,u,0,c,r?16:0,-1/0,1/0),r||i(O++,0,0,c,0,u,1,-1/0,1/0);O>0;){var S=(O-=1)*N,C=L[S],z=L[S+1],k=L[S+2],P=L[S+3],Q=L[S+4],U=L[S+5],B=O*A,Y=T[B],R=T[B+1],F=1&U,G=!!(16&U),V=s,W=l,H=g,q=E;if(F&&(V=g,W=E,H=s,q=l),!(2&U&&(k=w(t,C,z,k,V,W,R),z>=k)||4&U&&(z=x(t,C,z,k,V,W,Y))>=k)){var X=k-z,Z=Q-P;if(G){if(t*X*(X+Z)<M){if(void 0!==(I=p.scanComplete(t,C,e,z,k,V,W,P,Q,H,q)))return I;continue}}else{if(t*Math.min(X,Z)<y){if(void 0!==(I=f(t,C,e,F,z,k,V,W,P,Q,H,q)))return I;continue}if(t*X*Z<m){if(void 0!==(I=p.scanBipartite(t,C,e,F,z,k,V,W,P,Q,H,q)))return I;continue}}var K=v(t,C,z,k,V,W,Y,R);if(z<K)if(t*(K-z)<y){if(void 0!==(I=h(t,C+1,e,z,K,V,W,P,Q,H,q)))return I}else if(C===t-2){if(void 0!==(I=F?p.sweepBipartite(t,e,P,Q,H,q,z,K,V,W):p.sweepBipartite(t,e,z,K,V,W,P,Q,H,q)))return I}else i(O++,C+1,z,K,P,Q,F,-1/0,1/0),i(O++,C+1,P,Q,z,K,1^F,-1/0,1/0);if(K<k){var J=d(t,C,P,Q,H,q),$=H[_*J+C],tt=b(t,C,J,Q,H,q,$);if(tt<Q&&i(O++,C,K,k,tt,Q,(4|F)+(G?16:0),$,R),P<J&&i(O++,C,K,k,P,J,(2|F)+(G?16:0),Y,$),J+1===tt){if(void 0!==(I=G?a(t,C,e,K,k,V,W,J,H,q[J]):o(t,C,e,F,K,k,V,W,J,H,q[J])))return I}else if(J<tt){var et;if(G){if(et=D(t,C,K,k,V,W,$),K<et){var rt=b(t,C,K,et,V,W,$);if(C===t-2){if(K<rt&&void 0!==(I=p.sweepComplete(t,e,K,rt,V,W,J,tt,H,q)))return I;if(rt<et&&void 0!==(I=p.sweepBipartite(t,e,rt,et,V,W,J,tt,H,q)))return I}else K<rt&&i(O++,C+1,K,rt,J,tt,16,-1/0,1/0),rt<et&&(i(O++,C+1,rt,et,J,tt,0,-1/0,1/0),i(O++,C+1,J,tt,rt,et,1,-1/0,1/0))}}else et=F?j(t,C,K,k,V,W,$):D(t,C,K,k,V,W,$),K<et&&(C===t-2?I=F?p.sweepBipartite(t,e,J,tt,H,q,K,et,V,W):p.sweepBipartite(t,e,K,et,V,W,J,tt,H,q):(i(O++,C+1,K,et,J,tt,F,-1/0,1/0),i(O++,C+1,J,tt,K,et,1^F,-1/0,1/0)))}}}}}e.exports=u;var s=t("typedarray-pool"),l=t("bit-twiddle"),c=t("./brute"),f=c.partial,h=c.full,p=t("./sweep"),d=t("./median"),g=t("./partition"),y=128,m=1<<22,M=1<<22,v=g("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),b=g("lo===p0",["p0"]),w=g("lo<p0",["p0"]),x=g("hi<=p0",["p0"]),D=g("lo<=p0&&p0<=hi",["p0"]),j=g("lo<p0&&p0<=hi",["p0"]),N=6,A=2,L=s.mallocInt32(1024),T=s.mallocDouble(1024)},{"./brute":78,"./median":80,"./partition":81,"./sweep":83,"bit-twiddle":74,"typedarray-pool":424}],80:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){for(var a=2*t,u=a*(r+1)+e,s=r+1;s<n;++s,u+=a)for(var l=i[u],c=s,f=a*(s-1);c>r&&i[f+e]>l;--c,f-=a){for(var h=f,p=f+a,d=0;d<a;++d,++h,++p){var g=i[h];i[h]=i[p],i[p]=g}var y=o[c];o[c]=o[c-1],o[c-1]=y}}function i(t,e,r,i,u,s){if(i<=r+1)return r;for(var l=r,c=i,f=i+r>>>1,h=2*t,p=f,d=u[h*f+e];l<c;){if(c-l<a){n(t,e,l,c,u,s),d=u[h*f+e];break}var g=c-l,y=Math.random()*g+l|0,m=u[h*y+e],M=Math.random()*g+l|0,v=u[h*M+e],b=Math.random()*g+l|0,w=u[h*b+e];m<=v?w>=v?(p=M,d=v):m>=w?(p=y,d=m):(p=b,d=w):v>=w?(p=M,d=v):w>=m?(p=y,d=m):(p=b,d=w);for(var x=h*(c-1),D=h*p,j=0;j<h;++j,++x,++D){N=u[x];u[x]=u[D],u[D]=N}A=s[c-1];s[c-1]=s[p],s[p]=A;for(var x=h*(c-1),D=h*(p=o(t,e,l,c-1,u,s,d)),j=0;j<h;++j,++x,++D){var N=u[x];u[x]=u[D],u[D]=N}var A=s[c-1];if(s[c-1]=s[p],s[p]=A,f<p){for(c=p-1;l<c&&u[h*(c-1)+e]===d;)c-=1;c+=1}else{if(!(p<f))break;for(l=p+1;l<c&&u[h*l+e]===d;)l+=1}}return o(t,e,r,f,u,s,u[h*f+e])}e.exports=i;var o=t("./partition")("lo<p0",["p0"]),a=8},{"./partition":81}],81:[function(t,e,r){"use strict";function n(t,e){var r="abcdef".split("").concat(e),n=[];return t.indexOf("lo")>=0&&n.push("lo=e[k+n]"),t.indexOf("hi")>=0&&n.push("hi=e[k+o]"),r.push(i.replace("_",n.join()).replace("$",t)),Function.apply(void 0,r)}e.exports=n;var i="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],82:[function(t,e,r){"use strict";function n(t,e){e<=4*h?i(0,e-1,t):f(0,e-1,t)}function i(t,e,r){for(var n=2*(t+1),i=t+1;i<=e;++i){for(var o=r[n++],a=r[n++],u=i,s=n-2;u-- >t;){var l=r[s-2],c=r[s-1];if(l<o)break;if(l===o&&c<a)break;r[s]=l,r[s+1]=c,s-=2}r[s]=o,r[s+1]=a}}function o(t,e,r){e*=2;var n=r[t*=2],i=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=i}function a(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function u(t,e,r,n){e*=2,r*=2;var i=n[t*=2],o=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=i,n[r+1]=o}function s(t,e,r,n,i){e*=2,i[t*=2]=i[e],i[e]=r,i[t+1]=i[e+1],i[e+1]=n}function l(t,e,r){e*=2;var n=r[t*=2],i=r[e];return!(n<i)&&(n!==i||r[t+1]>r[e+1])}function c(t,e,r,n){var i=n[t*=2];return i<e||i===e&&n[t+1]<r}function f(t,e,r){var n=(e-t+1)/6|0,p=t+n,d=e-n,g=t+e>>1,y=g-n,m=g+n,M=p,v=y,b=g,w=m,x=d,D=t+1,j=e-1,N=0;l(M,v,r)&&(N=M,M=v,v=N),l(w,x,r)&&(N=w,w=x,x=N),l(M,b,r)&&(N=M,M=b,b=N),l(v,b,r)&&(N=v,v=b,b=N),l(M,w,r)&&(N=M,M=w,w=N),l(b,w,r)&&(N=b,b=w,w=N),l(v,x,r)&&(N=v,v=x,x=N),l(v,b,r)&&(N=v,v=b,b=N),l(w,x,r)&&(N=w,w=x,x=N);for(var A=r[2*v],L=r[2*v+1],T=r[2*w],E=r[2*w+1],I=2*M,O=2*b,_=2*x,S=2*p,C=2*g,z=2*d,k=0;k<2;++k){var P=r[I+k],Q=r[O+k],U=r[_+k];r[S+k]=P,r[C+k]=Q,r[z+k]=U}a(y,t,r),a(m,e,r);for(var B=D;B<=j;++B)if(c(B,A,L,r))B!==D&&o(B,D,r),++D;else if(!c(B,T,E,r))for(;;){if(c(j,T,E,r)){c(j,A,L,r)?(u(B,D,j,r),++D,--j):(o(B,j,r),--j);break}if(--j<B)break}s(t,D-1,A,L,r),s(e,j+1,T,E,r),D-2-t<=h?i(t,D-2,r):f(t,D-2,r),e-(j+2)<=h?i(j+2,e,r):f(j+2,e,r),j-D<=h?i(D,j,r):f(D,j,r)}e.exports=n;var h=32},{}],83:[function(t,e,r){"use strict";function n(t){var e=f.nextPow2(t);d.length<e&&(c.free(d),d=c.mallocInt32(e)),g.length<e&&(c.free(g),g=c.mallocInt32(e)),y.length<e&&(c.free(y),y=c.mallocInt32(e)),m.length<e&&(c.free(m),m=c.mallocInt32(e)),M.length<e&&(c.free(M),M=c.mallocInt32(e)),v.length<e&&(c.free(v),v=c.mallocInt32(e));var r=8*e;b.length<r&&(c.free(b),b=c.mallocDouble(r))}function i(t,e,r,n){var i=e[n],o=t[r-1];t[i]=o,e[o]=i}function o(t,e,r,n){t[r]=n,e[n]=r}function a(t,e,r,n,a,u,s,l,c,f){for(var M=0,v=2*t,w=t-1,x=v-1,D=r;D<n;++D){var j=u[D],N=v*D;b[M++]=a[N+w],b[M++]=-(j+1),b[M++]=a[N+x],b[M++]=j}for(D=s;D<l;++D){var j=f[D]+p,A=v*D;b[M++]=c[A+w],b[M++]=-j,b[M++]=c[A+x],b[M++]=j}var L=M>>>1;h(b,L);for(var T=0,E=0,D=0;D<L;++D){var I=0|b[2*D+1];if(I>=p)I=I-p|0,i(y,m,E--,I);else if(I>=0)i(d,g,T--,I);else if(I<=-p){I=-I-p|0;for(O=0;O<T;++O)if(void 0!==(_=e(d[O],I)))return _;o(y,m,E++,I)}else{I=-I-1|0;for(var O=0;O<E;++O){var _=e(I,y[O]);if(void 0!==_)return _}o(d,g,T++,I)}}}function u(t,e,r,n,a,u,s,l,c,f){for(var p=0,w=2*t,x=t-1,D=w-1,j=r;j<n;++j){var N=u[j]+1<<1,A=w*j;b[p++]=a[A+x],b[p++]=-N,b[p++]=a[A+D],b[p++]=N}for(j=s;j<l;++j){var N=f[j]+1<<1,L=w*j;b[p++]=c[L+x],b[p++]=1|-N,b[p++]=c[L+D],b[p++]=1|N}var T=p>>>1;h(b,T);for(var E=0,I=0,O=0,j=0;j<T;++j){var _=0|b[2*j+1],S=1&_;if(j<T-1&&_>>1==b[2*j+3]>>1&&(S=2,j+=1),_<0){for(var C=-(_>>1)-1,z=0;z<O;++z)if(void 0!==(k=e(M[z],C)))return k;if(0!==S)for(z=0;z<E;++z)if(void 0!==(k=e(d[z],C)))return k;if(1!==S)for(z=0;z<I;++z){var k=e(y[z],C);if(void 0!==k)return k}0===S?o(d,g,E++,C):1===S?o(y,m,I++,C):2===S&&o(M,v,O++,C)}else{C=(_>>1)-1;0===S?i(d,g,E--,C):1===S?i(y,m,I--,C):2===S&&i(M,v,O--,C)}}}function s(t,e,r,n,a,u,s,l,c,f,y,m){var M=0,v=2*t,w=e,x=e+t,D=1,j=1;n?j=p:D=p;for(I=a;I<u;++I){var N=I+D,A=v*I;b[M++]=s[A+w],b[M++]=-N,b[M++]=s[A+x],b[M++]=N}for(I=c;I<f;++I){var N=I+j,L=v*I;b[M++]=y[L+w],b[M++]=-N}var T=M>>>1;h(b,T);for(var E=0,I=0;I<T;++I){var O=0|b[2*I+1];if(O<0){var _=!1;if((N=-O)>=p?(_=!n,N-=p):(_=!!n,N-=1),_)o(d,g,E++,N);else{var S=m[N],C=v*N,z=y[C+e+1],k=y[C+e+1+t];t:for(var P=0;P<E;++P){var Q=d[P],U=v*Q;if(!(k<s[U+e+1]||s[U+e+1+t]<z)){for(var B=e+2;B<t;++B)if(y[C+B+t]<s[U+B]||s[U+B+t]<y[C+B])continue t;var Y,R=l[Q];if(void 0!==(Y=n?r(S,R):r(R,S)))return Y}}}}else i(d,g,E--,O-D)}}function l(t,e,r,n,i,o,a,u,s,l,c){for(var f=0,g=2*t,y=e,m=e+t,M=n;M<i;++M){var v=M+p,w=g*M;b[f++]=o[w+y],b[f++]=-v,b[f++]=o[w+m],b[f++]=v}for(M=u;M<s;++M){var v=M+1,x=g*M;b[f++]=l[x+y],b[f++]=-v}var D=f>>>1;h(b,D);for(var j=0,M=0;M<D;++M){var N=0|b[2*M+1];if(N<0)if((v=-N)>=p)d[j++]=v-p;else{var A=c[v-=1],L=g*v,T=l[L+e+1],E=l[L+e+1+t];t:for(C=0;C<j;++C){var I=d[C],O=a[I];if(O===A)break;var _=g*I;if(!(E<o[_+e+1]||o[_+e+1+t]<T)){for(z=e+2;z<t;++z)if(l[L+z+t]<o[_+z]||o[_+z+t]<l[L+z])continue t;var S=r(O,A);if(void 0!==S)return S}}}else{for(var v=N-p,C=j-1;C>=0;--C)if(d[C]===v){for(var z=C+1;z<j;++z)d[z-1]=d[z];break}--j}}}e.exports={init:n,sweepBipartite:a,sweepComplete:u,scanBipartite:s,scanComplete:l};var c=t("typedarray-pool"),f=t("bit-twiddle"),h=t("./sort"),p=1<<28,d=c.mallocInt32(1024),g=c.mallocInt32(1024),y=c.mallocInt32(1024),m=c.mallocInt32(1024),M=c.mallocInt32(1024),v=c.mallocInt32(1024),b=c.mallocDouble(8192)},{"./sort":82,"bit-twiddle":74,"typedarray-pool":424}],84:[function(t,e,r){},{}],85:[function(t,e,r){(function(e){"use strict";var n=t("buffer"),i=n.Buffer,o=n.SlowBuffer,a=n.kMaxLength||2147483647;r.alloc=function(t,e,r){if("function"==typeof i.alloc)return i.alloc(t,e,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");var n=r,o=e;void 0===o&&(n=void 0,o=0);var u=new i(t);if("string"==typeof o)for(var s=new i(o,n),l=s.length,c=-1;++c<t;)u[c]=s[c%l];else u.fill(o);return u},r.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");return new i(t)},r.from=function(t,r,n){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,r,n);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,r);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var a=n;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var u=new i(t.length);return t.copy(u,0,0,t.length),u}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},r.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=a)throw new RangeError("size is too large");return new o(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:86}],86:[function(t,e,r){(function(e){"use strict";function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,r,n):"string"==typeof e?c(t,e,r):p(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t,e,r,n){return u(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function l(t,e){if(u(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(e,r),a=(t=i(t,n)).write(e,r);return a!==n&&(t=t.slice(0,a)),t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=f(t,e),t}function p(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&J(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),o.alloc(+t)}function y(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return _(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return O(this,e,r);case"base64":return L(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function M(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,u=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<u;l++)if(o(t,l)===o(e,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===s)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(r+s>u&&(r=u-s),l=r;l>=0;l--){for(var f=!0,h=0;h<s;h++)if(o(t,l+h)!==o(e,h)){f=!1;break}if(f)return l}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[r+a]=u}return a}function x(t,e,r,n){return q(G(e,t.length-r),t,r,n)}function D(t,e,r,n){return q(V(e),t,r,n)}function j(t,e,r,n){return D(t,e,r,n)}function N(t,e,r,n){return q(H(e),t,r,n)}function A(t,e,r,n){return q(W(e,t.length-r),t,r,n)}function L(t,e,r){return 0===e&&r===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=r){var s,l,c,f;switch(u){case 1:o<128&&(a=o);break;case 2:128==(192&(s=t[i+1]))&&(f=(31&o)<<6|63&s)>127&&(a=f);break;case 3:s=t[i+1],l=t[i+2],128==(192&s)&&128==(192&l)&&(f=(15&o)<<12|(63&s)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=t[i+1],l=t[i+2],c=t[i+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&s)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=u}return E(n)}function E(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function O(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function _(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=F(t[o]);return i}function S(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function P(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function Q(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||Q(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,i){return i||Q(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function Y(t){if((t=R(t).replace(tt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function R(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function W(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function H(t){return Z.toByteArray(Y(t))}function q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function X(t){return t!==t}var Z=t("base64-js"),K=t("ieee754"),J=t("isarray");r.Buffer=o,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return a(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return s(null,t,e,r)},o.allocUnsafe=function(t){return l(null,t)},o.allocUnsafeSlow=function(t){return l(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)M(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)M(this,e,e+3),M(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)M(this,e,e+7),M(this,e+1,e+6),M(this,e+2,e+5),M(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,u=r-e,s=Math.min(a,u),l=this.slice(n,i),c=t.slice(e,r),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],u=c[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return x(this,t,e,r);case"ascii":return D(this,t,e,r);case"latin1":case"binary":return j(this,t,e,r);case"base64":return N(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||z(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||z(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var o=r-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var u=o.isBuffer(t)?t:G(new o(t,n).toString()),s=u.length;for(a=0;a<r-e;++a)this[a+e]=u[a%s]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":56,ieee754:331,isarray:87}],87:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],88:[function(t,e,r){function n(t,e,r,n,s){o(t,r[0],r[1],0),o(e,r[0],r[1],1),i(t,t,n,s),i(e,e,n,s),a(e,e,t),u(e,e)}var i=t("camera-unproject"),o=t("gl-vec3/set"),a=t("gl-vec3/subtract"),u=t("gl-vec3/normalize");e.exports=n},{"camera-unproject":90,"gl-vec3/normalize":278,"gl-vec3/set":285,"gl-vec3/subtract":288}],89:[function(t,e,r){function n(t,e,r,n){var l=r[0],c=r[1],f=r[2],h=r[3],p=a,d=u;o(s,e[0],e[1],e[2],1),i(s,s,n);var g=s[3];return 0!==g&&(s[0]=s[0]/g,s[1]=s[1]/g,s[2]=s[2]/g),t[0]=l+f/2*s[0]+(0+f/2),t[1]=c+h/2*s[1]+(0+h/2),t[2]=(d-p)/2*s[2]+(d+p)/2,t[3]=0===g?0:1/g,t}var i=t("gl-vec4/transformMat4"),o=t("gl-vec4/set"),a=0,u=1,s=[0,0,0,0];e.exports=n},{"gl-vec4/set":312,"gl-vec4/transformMat4":316}],90:[function(t,e,r){function n(t,e,r,n){var o=r[0],a=r[1],u=r[2],s=r[3],l=e[0],c=e[1],f=e[2];return l-=o,c=s-c-1,c-=a,t[0]=2*l/u-1,t[1]=2*c/s-1,t[2]=2*f-1,i(t,t,n)}var i=t("./lib/projectMat4");e.exports=n},{"./lib/projectMat4":91}],91:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],l=r[3],c=r[4],f=r[5],h=r[6],p=r[7],d=r[8],g=r[9],y=r[10],m=r[11],M=r[12],v=r[13],b=r[14],w=1/(n*l+i*p+o*m+r[15]);return t[0]=(n*a+i*c+o*d+M)*w,t[1]=(n*u+i*f+o*g+v)*w,t[2]=(n*s+i*h+o*y+b)*w,t}e.exports=n},{}],92:[function(t,e,r){"use strict";function n(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function i(t,e){return t[0]-e[0]||t[1]-e[1]}function o(t){return t.map(n).sort(i)}function a(t,e,r){return e in t?t[e]:r}function u(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var n=!!a(r,"delaunay",!0),i=!!a(r,"interior",!0),u=!!a(r,"exterior",!0),h=!!a(r,"infinity",!1);if(!i&&!u||0===t.length)return[];var p=s(t,e);if(n||i!==u||h){for(var d=l(t.length,o(e)),g=0;g<p.length;++g){var y=p[g];d.addTriangle(y[0],y[1],y[2])}return n&&c(t,d),u?i?h?f(d,0,h):d.cells():f(d,1,h):f(d,-1)}return p}var s=t("./lib/monotone"),l=t("./lib/triangulation"),c=t("./lib/delaunay"),f=t("./lib/filter");e.exports=u},{"./lib/delaunay":93,"./lib/filter":94,"./lib/monotone":95,"./lib/triangulation":96}],93:[function(t,e,r){"use strict";function n(t,e,r,n,i,a){var u=e.opposite(n,i);if(!(u<0)){if(i<n){var s=n;n=i,i=s,s=a,a=u,u=s}e.isConstraint(n,i)||o(t[n],t[i],t[a],t[u])<0&&r.push(n,i)}}function i(t,e){for(var r=[],i=t.length,a=e.stars,u=0;u<i;++u)for(var s=a[u],l=1;l<s.length;l+=2)if(!((p=s[l])<u||e.isConstraint(u,p))){for(var c=s[l-1],f=-1,h=1;h<s.length;h+=2)if(s[h-1]===p){f=s[h];break}f<0||o(t[u],t[p],t[c],t[f])<0&&r.push(u,p)}for(;r.length>0;){for(var p=r.pop(),c=-1,f=-1,s=a[u=r.pop()],d=1;d<s.length;d+=2){var g=s[d-1],y=s[d];g===p?f=y:y===p&&(c=g)}c<0||f<0||o(t[u],t[p],t[c],t[f])>=0||(e.flip(u,p),n(t,e,r,c,u,f),n(t,e,r,u,f,c),n(t,e,r,f,p,c),n(t,e,r,p,c,f))}}var o=t("robust-in-sphere")[4];t("binary-search-bounds");e.exports=i},{"binary-search-bounds":97,"robust-in-sphere":398}],94:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,a){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=i,this.next=o,this.boundary=a}function i(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}function o(t,e){for(var r=t.cells(),o=r.length,a=0;a<o;++a){var u=(m=r[a])[0],s=m[1],l=m[2];s<l?s<u&&(m[0]=s,m[1]=l,m[2]=u):l<u&&(m[0]=l,m[1]=u,m[2]=s)}r.sort(i);for(var c=new Array(o),a=0;a<c.length;++a)c[a]=0;var f=[],h=[],p=new Array(3*o),d=new Array(3*o),g=null;e&&(g=[]);for(var y=new n(r,p,d,c,f,h,g),a=0;a<o;++a)for(var m=r[a],M=0;M<3;++M){var u=m[M],s=m[(M+1)%3],v=p[3*a+M]=y.locate(s,u,t.opposite(s,u)),b=d[3*a+M]=t.isConstraint(u,s);v<0&&(b?h.push(a):(f.push(a),c[a]=1),e&&g.push([s,u,-1]))}return y}function a(t,e,r){for(var n=0,i=0;i<t.length;++i)e[i]===r&&(t[n++]=t[i]);return t.length=n,t}function u(t,e,r){var n=o(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;for(var i=1,u=n.active,s=n.next,l=n.flags,c=n.cells,f=n.constraint,h=n.neighbor;u.length>0||s.length>0;){for(;u.length>0;){var p=u.pop();if(l[p]!==-i){l[p]=i;for(var d=(c[p],0);d<3;++d){var g=h[3*p+d];g>=0&&0===l[g]&&(f[3*p+d]?s.push(g):(u.push(g),l[g]=i))}}}var y=s;s=u,u=y,s.length=0,i=-i}var m=a(c,l,e);return r?m.concat(n.boundary):m}var s=t("binary-search-bounds");e.exports=u,n.prototype.locate=function(){var t=[0,0,0];return function(e,r,n){var o=e,a=r,u=n;return r<n?r<e&&(o=r,a=n,u=e):n<e&&(o=n,a=e,u=r),o<0?-1:(t[0]=o,t[1]=a,t[2]=u,s.eq(this.cells,t,i))}}()},{"binary-search-bounds":97}],95:[function(t,e,r){"use strict";function n(t,e,r,n,i){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=i}function i(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function o(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==d&&(r=p(t.a,t.b,e.b))?r:t.idx-e.idx)}function a(t,e){return p(t.a,t.b,e)}function u(t,e,r,n,i){for(var o=h.lt(e,n,a),u=h.gt(e,n,a),s=o;s<u;++s){for(var l=e[s],c=l.lowerIds,f=c.length;f>1&&p(r[c[f-2]],r[c[f-1]],n)>0;)t.push([c[f-1],c[f-2],i]),f-=1;c.length=f,c.push(i);for(var d=l.upperIds,f=d.length;f>1&&p(r[d[f-2]],r[d[f-1]],n)<0;)t.push([d[f-2],d[f-1],i]),f-=1;d.length=f,d.push(i)}}function s(t,e){var r;return(r=t.a[0]<e.a[0]?p(t.a,t.b,e.a):p(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?p(t.a,t.b,e.b):p(e.b,e.a,t.b))||t.idx-e.idx}function l(t,e,r){var i=h.le(t,r,s),o=t[i],a=o.upperIds,u=a[a.length-1];o.upperIds=[u],t.splice(i+1,0,new n(r.a,r.b,r.idx,[u],a))}function c(t,e,r){var n=r.a;r.a=r.b,r.b=n;var i=h.eq(t,r,s),o=t[i];t[i-1].upperIds=o.upperIds,t.splice(i,1)}function f(t,e){for(var r=t.length,a=e.length,s=[],f=0;f<r;++f)s.push(new i(t[f],null,d,f));for(f=0;f<a;++f){var h=e[f],p=t[h[0]],m=t[h[1]];p[0]<m[0]?s.push(new i(p,m,y,f),new i(m,p,g,f)):p[0]>m[0]&&s.push(new i(m,p,y,f),new i(p,m,g,f))}s.sort(o);for(var M=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),v=[new n([M,1],[M,0],-1,[],[],[],[])],b=[],f=0,w=s.length;f<w;++f){var x=s[f],D=x.type;D===d?u(b,v,t,x.a,x.idx):D===y?l(v,t,x):c(v,t,x)}return b}var h=t("binary-search-bounds"),p=t("robust-orientation")[3],d=0,g=1,y=2;e.exports=f},{"binary-search-bounds":97,"robust-orientation":399}],96:[function(t,e,r){"use strict";function n(t,e){this.stars=t,this.edges=e}function i(t,e,r){for(var n=1,i=t.length;n<i;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[i-2],t[n]=t[i-1],void(t.length=i-2)}function o(t,e){for(var r=new Array(t),i=0;i<t;++i)r[i]=[];return new n(r,e)}var a=t("binary-search-bounds");e.exports=o;var u=n.prototype;u.isConstraint=function(){function t(t,e){return t[0]-e[0]||t[1]-e[1]}var e=[0,0];return function(r,n){return e[0]=Math.min(r,n),e[1]=Math.max(r,n),a.eq(this.edges,e,t)>=0}}(),u.removeTriangle=function(t,e,r){var n=this.stars;i(n[t],e,r),i(n[e],r,t),i(n[r],t,e)},u.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},u.opposite=function(t,e){for(var r=this.stars[e],n=1,i=r.length;n<i;n+=2)if(r[n]===t)return r[n-1];return-1},u.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},u.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2)e.push([i[o],i[o+1]]);return e},u.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2){var u=i[o],s=i[o+1];r<Math.min(u,s)&&e.push([r,u,s])}return e}},{"binary-search-bounds":97}],97:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o=["function ",t,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function i(t,e,r,i){return new Function([n("A","x"+t+"y",e,["y"],i),n("P","c(x,y)"+t+"0",e,["y","c"],i),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],98:[function(t,e,r){function n(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t}e.exports=n},{}],99:[function(t,e,r){"use strict";function n(t){var e=w(t);return[D(e,-1/0),D(e,1/0)]}function i(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var i=e[n],o=t[i[0]],a=t[i[1]];r[n]=[D(Math.min(o[0],a[0]),-1/0),D(Math.min(o[1],a[1]),-1/0),D(Math.max(o[0],a[0]),1/0),D(Math.max(o[1],a[1]),1/0)]}return r}function o(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[D(n[0],-1/0),D(n[1],-1/0),D(n[0],1/0),D(n[1],1/0)]}return e}function a(t,e,r){var n=[];return m(r,function(r,i){var o=e[r],a=e[i];if(o[0]!==a[0]&&o[0]!==a[1]&&o[1]!==a[0]&&o[1]!==a[1]){var u=t[o[0]],s=t[o[1]],l=t[a[0]],c=t[a[1]];M(u,s,l,c)&&n.push([r,i])}}),n}function u(t,e,r,n){var i=[];return m(r,n,function(r,n){var o=e[r];if(o[0]!==n&&o[1]!==n){var a=t[n],u=t[o[0]],s=t[o[1]];M(u,s,a,a)&&i.push([r,n])}}),i}function s(t,e,r,n,i){var o,a,u=t.map(function(t){return[v(t[0]),v(t[1])]});for(o=0;o<r.length;++o){var s=r[o];a=s[0];var l=s[1],c=e[a],f=e[l],h=j(x(t[c[0]]),x(t[c[1]]),x(t[f[0]]),x(t[f[1]]));if(h){var p=t.length;t.push([w(h[0]),w(h[1])]),u.push(h),n.push([a,p],[l,p])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=u[t[1]],n=u[e[1]];return b(r[0],n[0])||b(r[1],n[1])}),o=n.length-1;o>=0;--o){var d=n[o],g=e[a=d[0]],y=g[0],m=g[1],M=t[y],D=t[m];if((M[0]-D[0]||M[1]-D[1])<0){var N=y;y=m,m=N}g[0]=y;var A,L=g[1]=d[1];for(i&&(A=g[2]);o>0&&n[o-1][0]===a;){var T=(d=n[--o])[1];i?e.push([L,T,A]):e.push([L,T]),L=T}i?e.push([L,m,A]):e.push([L,m])}return u}function l(t,e,r){for(var i=e.length,o=new y(i),a=[],u=0;u<e.length;++u){var s=e[u],l=n(s[0]),c=n(s[1]);a.push([D(l[0],-1/0),D(c[0],-1/0),D(l[1],1/0),D(c[1],1/0)])}m(a,function(t,e){o.link(t,e)});for(var f=!0,h=new Array(i),u=0;u<i;++u)(d=o.find(u))!==u&&(f=!1,t[d]=[Math.min(t[u][0],t[d][0]),Math.min(t[u][1],t[d][1])]);if(f)return null;for(var p=0,u=0;u<i;++u){var d=o.find(u);d===u?(h[u]=p,t[p++]=t[u]):h[u]=-1}t.length=p;for(u=0;u<i;++u)h[u]<0&&(h[u]=h[o.find(u)]);return h}function c(t,e){return t[0]-e[0]||t[1]-e[1]}function f(t,e){return t[0]-e[0]||t[1]-e[1]||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function h(t,e,r){if(0!==t.length){if(e)for(u=0;u<t.length;++u){var n=e[(o=t[u])[0]],i=e[o[1]];o[0]=Math.min(n,i),o[1]=Math.max(n,i)}else for(u=0;u<t.length;++u){var o=t[u],n=o[0],i=o[1];o[0]=Math.min(n,i),o[1]=Math.max(n,i)}r?t.sort(f):t.sort(c);for(var a=1,u=1;u<t.length;++u){var s=t[u-1],l=t[u];(l[0]!==s[0]||l[1]!==s[1]||r&&l[2]!==s[2])&&(t[a++]=l)}t.length=a}}function p(t,e,r){var n=l(t,[],o(t));return h(e,n,r),!!n}function d(t,e,r){var n=i(t,e),c=a(t,e,n),f=o(t),p=u(t,e,n,f),d=l(t,s(t,e,c,p,r),f);return h(e,d,r),!!d||c.length>0||p.length>0}function g(t,e,r){var n;if(r){n=e;for(var i=new Array(e.length),o=0;o<e.length;++o){u=e[o];i[o]=[u[0],u[1],r[o]]}e=i}for(var a=p(t,e,!!r);d(t,e,!!r);)a=!0;if(r&&a){n.length=0,r.length=0;for(o=0;o<e.length;++o){var u=e[o];n.push([u[0],u[1]]),r.push(u[2])}}return a}e.exports=g;var y=t("union-find"),m=t("box-intersect"),M=t("robust-segment-intersect"),v=t("big-rat"),b=t("big-rat/cmp"),w=t("big-rat/to-float"),x=t("rat-vec"),D=t("nextafter"),j=t("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":100,"big-rat":60,"big-rat/cmp":58,"big-rat/to-float":72,"box-intersect":77,nextafter:351,"rat-vec":378,"robust-segment-intersect":402,"union-find":426}],100:[function(t,e,r){"use strict";function n(t,e){return u(o(t[0],e[1]),o(t[1],e[0]))}function i(t,e,r,i){var o=l(e,t),u=l(i,r),h=n(o,u);if(0===s(h))return null;var p=n(u,l(t,r)),d=a(p,h),g=f(o,d);return c(t,g)}e.exports=i;var o=t("big-rat/mul"),a=t("big-rat/div"),u=t("big-rat/sub"),s=t("big-rat/sign"),l=t("rat-vec/sub"),c=t("rat-vec/add"),f=t("rat-vec/muls")},{"big-rat/div":59,"big-rat/mul":69,"big-rat/sign":70,"big-rat/sub":71,"rat-vec/add":377,"rat-vec/muls":379,"rat-vec/sub":380}],101:[function(t,e,r){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],102:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"cmy",min:[0,0,0],max:[100,100,100],channel:["cyan","magenta","yellow"],alias:["CMY"]}).rgb=function(t){return[255*(1-t[0]/100),255*(1-t[1]/100),255*(1-t[2]/100)]},n.cmy=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(1-e)||0,100*(1-r)||0,100*(1-n)||0]}},{"./rgb":122}],103:[function(t,e,r){"use strict";var n=t("./rgb");e.exports={name:"cmyk",min:[0,0,0,0],max:[100,100,100,100],channel:["cyan","magenta","yellow","black"],alias:["CMYK"],rgb:function(t){var e,r,n,i=t[0]/100,o=t[1]/100,a=t[2]/100,u=t[3]/100;return e=1-Math.min(1,i*(1-u)+u),r=1-Math.min(1,o*(1-u)+u),n=1-Math.min(1,a*(1-u)+u),[255*e,255*r,255*n]}},n.cmyk=function(t){var e,r,n,i,o=t[0]/255,a=t[1]/255,u=t[2]/255;return i=Math.min(1-o,1-a,1-u),e=(1-o-i)/(1-i)||0,r=(1-a-i)/(1-i)||0,n=(1-u-i)/(1-i)||0,[100*e,100*r,100*n,100*i]}},{"./rgb":122}],104:[function(t,e,r){"use strict";var n=t("./xyy"),i=t("./xyz"),o={name:"coloroid",alias:["ATV"],channel:["A","T","V"],min:[10,0,0],max:[76,100,100]};o.table=[[10,59,1.724349,.44987,.53641],[11,55.3,1.740844,.46248,.52444],[12,51.7,1.754985,.47451,.51298],[13,48.2,1.767087,.48601,.50325],[14,44.8,1.775953,.49578,.49052],[15,41.5,1.785073,.5079,.43035],[16,38.2,1.791104,.51874,.46934],[20,34.9,1.794831,.5298,.45783],[21,31.5,1.798664,.54137,.44559],[22,28,1.794819,.55367,.43253],[23,24.4,1.78961,.5668,.41811],[24,20.6,1.809483,.58128,.40176],[25,16.6,1.760983,.59766,.383],[26,12.3,1.723443,.61653,.36061],[30,7.7,1.652891,.63896,.33358],[31,2.8,1.502607,.66619,.2993],[32,-2.5,1.0725,.70061,.26753],[33,-8.4,1.136637,.63925,.22631],[34,-19.8,1.232286,.53962,.19721],[35,-31.6,1.31012,.5034,.17495],[40,-43.2,1.37661,.46041,.15603],[41,-54.6,1.438692,.42386,.13846],[42,-65.8,1.501582,.38991,.12083],[43,-76.8,1.570447,.35586,.10328],[44,-86.8,1.645583,.32195,.08496],[45,-95.8,1.732083,.28657,.05155],[46,-108.4,1.915753,.22202,.01771],[50,-117.2,2.14631,.15664,.05227],[51,-124.7,1.649939,.12736,.0902],[52,-131.8,1.273415,.10813,.12506],[53,-138.5,1.080809,.09414,.15741],[54,-145.1,.957076,.03249,.18958],[55,-152,.868976,.07206,.24109],[56,-163.4,.771731,.05787,.30378],[60,-177.2,.697108,.04353,.35696],[61,171.6,.655803,.03291,.41971],[62,152.4,.623958,.0224,.49954],[63,148.4,.596037,.01196,.60321],[64,136.8,.607413,.00425,.73542],[65,125.4,.659923,.01099,.83391],[66,114.2,.859517,.0805,.77474],[70,103.2,1.195683,.20259,.7046],[71,93.2,1.407534,.28807,.6523],[72,84.2,1.532829,.34422,.6193],[73,77.3,1.603792,.37838,.59533],[74,71.6,1.649448,.4029,.57716],[75,66.9,1.68108,.42141,.56222],[76,62.8,1.704979,.43647,.54895]];var a=o.table,u=[].concat(a.slice(-13),a.slice(0,-13)),s="D65",l=i.whitepoint[2][s][0],c=i.whitepoint[2][s][1],f=i.whitepoint[2][s][2],h=l/(l+c+f),p=c/(l+c+f),d=(l+c+f)/100;n.coloroid=function(t){for(var e,r=t[0],n=t[1],i=t[2],o=10*Math.sqrt(i),a=180*Math.atan2(n-h,r-p)/Math.PI,s=u.length-1,l=0;l<u.length&&!(a>u[l][1]);l++)s=l;var c=(e=Math.abs(u[l+1][1]-a)>Math.abs(u[s][1]-a)?u[l+1]:u[s])[0],f=e[4],g=e[2],y=e[3];return[c,100*i*(p*d-r*d)/(100*(r*g-y*g)+f*g*100*(p*d-r*d)),o]},o.xyy=function(t){for(var e,r=t[0],n=t[1],i=t[2],o=0;o<a.length;o++)if(r<=a[o][0]){e=a[o];break}var u=e[4],s=e[2],l=e[3],c=i*i/100,f=u*s*100;return[(100*c*p*d+100*l*s*n-f*n*p*d)/(100*n*s-f*n*d+100*c*d),(100*c+100*n*u*s-f*n)/(c*d*100+100*n*s-n*f*d),c]},i.coloroid=function(t){return n.coloroid(i.xyy(t))},o.xyz=function(t){return n.xyz(o.xyy(t))},e.exports=o},{"./xyy":127,"./xyz":128}],105:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("mumath/clamp"),o=e.exports={name:"cubehelix",channel:["fraction"],min:[0],max:[1]},a=o.defaults={start:0,rotation:.5,hue:1,gamma:1};o.rgb=function(t,e){e=e||{},t.length&&(t=t[0]);var r=void 0!==e.start?e.start:a.start,n=void 0!==e.rotation?e.rotation:a.rotation,o=void 0!==e.gamma?e.gamma:a.gamma,u=void 0!==e.hue?e.hue:a.hue,s=2*Math.PI*(r/3+1+n*t),l=u*(t=Math.pow(t,o))*(1-t)/2,c=t+l*(-.14861*Math.cos(s)+1.78277*Math.sin(s)),f=t+l*(-.29227*Math.cos(s)-.90649*Math.sin(s)),h=t+l*(1.97294*Math.cos(s));return c=i(c,0,1),f=i(f,0,1),h=i(h,0,1),[255*c,255*f,255*h]},n.cubehelix=function(t){}},{"./rgb":122,"mumath/clamp":347}],106:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./hsl"),o=t("./hsv"),a=t("./hwb"),u=t("mumath/mod");e.exports={name:"hcg",min:[0,0,0],max:[360,100,100],channel:["hue","chroma","gray"],alias:["HCG","HSG"],rgb:function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var i=6*u(e,1),o=u(i,1),a=[0,0,0],s=1-o;switch(Math.floor(i)){case 0:a[0]=1,a[1]=o,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=o;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=o,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}var l=(1-r)*n;return[255*(r*a[0]+l),255*(r*a[1]+l),255*(r*a[2]+l)]},hsl:function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r<1&&r>0&&(n=r<.5?e/(2*r):e/(2*(1-r))),[t[0],100*n,100*r]},hsv:function(t){var e,r=t[1]/100,n=r+t[2]/100*(1-r);if(n>0){var i=r/n;e=[t[0],100*i,100*n]}else e=[t[0],0,100*n];return e},hwb:function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]}},n.hcg=function(t){var e,r,n=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.max(Math.max(n,i),o),s=Math.min(Math.min(n,i),o),l=a-s;return e=l<1?s/(1-l):0,l>0?(r=a===n?u((i-o)/l,6):a===i?2+(o-n)/l:4+(n-i)/l,r/=6,r=u(r,1)):r=0,[360*r,100*l,100*e]},i.hcg=function(t){var e,r=t[1]/100,n=t[2]/100,i=0;if((i=n<.5?2*r*n:2*r*(1-n))<1){var o=(n-.5*i)/(1-i);e=[t[0],100*i,100*o]}else e=[t[0],100*i,0];return e},o.hcg=function(t){var e,r=t[1]/100,n=t[2]/100,i=r*n;if(i<1){var o=(n-i)/(1-i);e=[t[0],100*i,100*o]}else e=[t[0],100*i,0];return e},a.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],100*n,100*i]}},{"./hsl":108,"./hsv":109,"./hwb":112,"./rgb":122,"mumath/mod":348}],107:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("mumath/mod"),o=t("mumath/clamp");(e.exports={name:"hsi",min:[0,0,0],max:[360,100,255],channel:["hue","saturation","intensity"],alias:["HSI"]}).rgb=function(t){var e,r,n,a=i(t[0],0,360)*Math.PI/180,u=o(t[1],0,100)/100,s=o(t[2],0,255)/255,l=Math.PI/3;return a<2*l?(n=s*(1-u),e=s*(1+u*Math.cos(a)/Math.cos(l-a)),r=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))):a<4*l?(a-=2*l,e=s*(1-u),r=s*(1+u*Math.cos(a)/Math.cos(l-a)),n=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))):(a-=4*l,r=s*(1-u),n=s*(1+u*Math.cos(a)/Math.cos(l-a)),e=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))),[255*e,255*r,255*n]},n.hsi=function(t){var e=t[0]+t[1]+t[2],r=t[0]/e,n=t[1]/e,i=t[2]/e,o=Math.acos(.5*(r-n+(r-i))/Math.sqrt((r-n)*(r-n)+(r-i)*(n-i)));i>n&&(o=2*Math.PI-o);var a=1-3*Math.min(r,n,i),u=e/3;return[180*o/Math.PI,100*a,u]}},{"./rgb":122,"mumath/clamp":347,"mumath/mod":348}],108:[function(t,e,r){"use strict";var n=t("./rgb");e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,n,i,o,a=t[0]/360,u=t[1]/100,s=t[2]/100;if(0===u)return o=255*s,[o,o,o];e=2*s-(r=s<.5?s*(1+u):s+u-s*u),i=[0,0,0];for(var l=0;l<3;l++)n=a+1/3*-(l-1),n<0?n++:n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[l]=255*o;return i}},n.hsl=function(t){var e,r,n,i=t[0]/255,o=t[1]/255,a=t[2]/255,u=Math.min(i,o,a),s=Math.max(i,o,a),l=s-u;return s===u?e=0:i===s?e=(o-a)/l:o===s?e=2+(a-i)/l:a===s&&(e=4+(i-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(u+s)/2,r=s===u?0:n<=.5?l/(s+u):l/(2-s-u),[e,100*r,100*n]}},{"./rgb":122}],109:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./hsl");e.exports={name:"hsv",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","value"],alias:["HSV","HSB"],rgb:function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*n*(1-r),u=255*n*(1-r*o),s=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,s,a];case 1:return[u,n,a];case 2:return[a,n,s];case 3:return[a,u,n];case 4:return[s,a,n];case 5:return[n,a,u]}},hsl:function(t){var e,r,n=t[0],i=t[1]/100,o=t[2]/100;return r=(2-i)*o,e=i*o,e/=r<=1?r:2-r,e=e||0,r/=2,[n,100*e,100*r]}},n.hsv=function(t){var e,r,n,i=t[0],o=t[1],a=t[2],u=Math.min(i,o,a),s=Math.max(i,o,a),l=s-u;return r=0===s?0:l/s*100,s===u?e=0:i===s?e=(o-a)/l:o===s?e=2+(a-i)/l:a===s&&(e=4+(i-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=s/255*1e3/10,[e,r,n]},i.hsv=function(t){var e,r,n=t[0],i=t[1]/100,o=t[2]/100;return o*=2,i*=o<=1?o:2-o,r=(o+i)/2,e=2*i/(o+i)||0,[n,100*e,100*r]}},{"./hsl":108,"./rgb":122}],110:[function(t,e,r){"use strict";var n=t("./xyz"),i=t("./lchuv"),o=t("husl");e.exports={name:"husl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSL"],lchuv:o._conv.husl.lch,xyz:function(t){return i.xyz(o._conv.husl.lch(t))},huslp:function(t){return o._conv.lch.huslp(o._conv.husl.lch(t))}},i.husl=o._conv.lch.husl,n.husl=function(t){return o._conv.lch.husl(n.lchuv(t))}},{"./lchuv":118,"./xyz":128,husl:330}],111:[function(t,e,r){"use strict";var n=t("./xyz"),i=t("./lchuv"),o=t("husl");e.exports={name:"huslp",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSLp"],lchuv:o._conv.huslp.lch,xyz:function(t){return i.xyz(o._conv.huslp.lch(t))},husl:function(t){return o._conv.lch.husl(o._conv.huslp.lch(t))}},i.huslp=o._conv.lch.huslp,n.huslp=function(t){return o._conv.lch.huslp(n.lchuv(t))}},{"./lchuv":118,"./xyz":128,husl:330}],112:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./hsv"),o=t("./hsl"),a=e.exports={name:"hwb",min:[0,0,0],max:[360,100,100],channel:["hue","whiteness","blackness"],alias:["HWB"],rgb:function(t){var e,r,n,i,o,a,u,s=t[0]/360,l=t[1]/100,c=t[2]/100,f=l+c;switch(f>1&&(l/=f,c/=f),e=Math.floor(6*s),r=1-c,n=6*s-e,0!=(1&e)&&(n=1-n),i=l+n*(r-l),e){default:case 6:case 0:o=r,a=i,u=l;break;case 1:o=i,a=r,u=l;break;case 2:o=l,a=r,u=i;break;case 3:o=l,a=i,u=r;break;case 4:o=i,a=l,u=r;break;case 5:o=r,a=l,u=i}return[255*o,255*a,255*u]},hsv:function(t){var e,r,n=t[0],i=t[1],o=t[2];return i+o>=100?(e=0,r=100*i/(i+o)):(e=100-i/(1-o/100),r=100-o),[n,e,r]},hsl:function(t){return i.hsl(a.hsv(t))}};n.hwb=function(t){var e=t[0],r=t[1],i=t[2],o=n.hsl(t)[0],a=1/255*Math.min(e,Math.min(r,i));return i=1-1/255*Math.max(e,Math.max(r,i)),[o,100*a,100*i]},i.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[e,0===n?0:n*(1-r/100),100-n]},o.hwb=function(t){return i.hwb(o.hsv(t))}},{"./hsl":108,"./hsv":109,"./rgb":122}],113:[function(t,e,r){"use strict";var n,i={rgb:t("./rgb"),hsl:t("./hsl"),hsv:t("./hsv"),hsi:t("./hsi"),hwb:t("./hwb"),cmyk:t("./cmyk"),cmy:t("./cmy"),xyz:t("./xyz"),xyy:t("./xyy"),yiq:t("./yiq"),yuv:t("./yuv"),ydbdr:t("./ydbdr"),ycgco:t("./ycgco"),ypbpr:t("./ypbpr"),ycbcr:t("./ycbcr"),xvycc:t("./xvycc"),yccbccrc:t("./yccbccrc"),ucs:t("./ucs"),uvw:t("./uvw"),jpeg:t("./jpeg"),lab:t("./lab"),labh:t("./labh"),lms:t("./lms"),lchab:t("./lchab"),luv:t("./luv"),lchuv:t("./lchuv"),husl:t("./husl"),huslp:t("./huslp"),cubehelix:t("./cubehelix"),coloroid:t("./coloroid"),hcg:t("./hcg"),tsl:t("./tsl"),yes:t("./yes"),osaucs:t("./osaucs")};for(var o in i){n=i[o];for(var a in i)n[a]||(n[a]=function(t,e){var r=i[t];return t===e?function(t){return t}:r.xyz&&i.xyz[e]?function(t){return i.xyz[e](r.xyz(t))}:r.rgb&&i.rgb[e]?function(t){return i.rgb[e](r.rgb(t))}:void 0}(o,a))}e.exports=i},{"./cmy":102,"./cmyk":103,"./coloroid":104,"./cubehelix":105,"./hcg":106,"./hsi":107,"./hsl":108,"./hsv":109,"./husl":110,"./huslp":111,"./hwb":112,"./jpeg":114,"./lab":115,"./labh":116,"./lchab":117,"./lchuv":118,"./lms":119,"./luv":120,"./osaucs":121,"./rgb":122,"./tsl":123,"./ucs":124,"./uvw":125,"./xvycc":126,"./xyy":127,"./xyz":128,"./ycbcr":129,"./yccbccrc":130,"./ycgco":131,"./ydbdr":132,"./yes":133,"./yiq":134,"./ypbpr":135,"./yuv":136}],114:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"jpeg",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["JPEG"]}).rgb=function(t){var e=t[0],r=t[1],n=t[2];return[e+1.402*(n-128),e-.34414*(r-128)-.71414*(n-128),e+1.772*(r-128)]},n.jpeg=function(t){var e=t[0],r=t[1],n=t[2];return[.299*e+.587*r+.114*n,128-.168736*e-.331264*r+.5*n,128+.5*e-.418688*r-.081312*n]}},{"./rgb":122}],115:[function(t,e,r){"use strict";var n=t("./xyz");e.exports={name:"lab",min:[0,-100,-100],max:[100,100,100],channel:["lightness","a","b"],alias:["LAB","cielab"],xyz:function(t){var e,r,n,i,o=t[0],a=t[1],u=t[2];return o<=8?(r=100*o/903.3,i=r/100*7.787+16/116):(r=100*Math.pow((o+16)/116,3),i=Math.pow(r/100,1/3)),e=e/95.047<=.008856?e=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n=n/108.883<=.008859?n=108.883*(i-u/200-16/116)/7.787:108.883*Math.pow(i-u/200,3),[e,r,n]}},n.lab=function(t){var e,r,n,i=t[0],o=t[1],a=t[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=116*o-16,r=500*(i-o),n=200*(o-a),[e,r,n]}},{"./xyz":128}],116:[function(t,e,r){"use strict";var n=t("./xyz");e.exports={name:"labh",min:[0,-128,-128],max:[100,128,128],channel:["lightness","a","b"],alias:["LABh","hunter-lab","hlab"],xyz:function(t){var e=t[0],r=e/10,n=r*r;return[(t[1]/17.5*e/10+n)/1.02,n,-(t[2]/7*e/10-n)/.847]}},n.labh=function(t){var e=t[0],r=t[1],n=t[2];return[10*Math.sqrt(r),0===r?0:(1.02*e-r)/Math.sqrt(r)*17.5,0===r?0:(r-.847*n)/Math.sqrt(r)*7]}},{"./xyz":128}],117:[function(t,e,r){"use strict";var n=t("./xyz"),i=t("./lab"),o=e.exports={name:"lchab",min:[0,0,0],max:[100,100,360],channel:["lightness","chroma","hue"],alias:["LCHab","cielch","LCH","HLC","LSH"],xyz:function(t){return i.xyz(o.lab(t))},lab:function(t){var e,r,n,i=t[0],o=t[1];return n=t[2]/360*2*Math.PI,e=o*Math.cos(n),r=o*Math.sin(n),[i,e,r]}};i.lchab=function(t){var e,r,n,i=t[0],o=t[1],a=t[2];return e=Math.atan2(a,o),(r=360*e/2/Math.PI)<0&&(r+=360),n=Math.sqrt(o*o+a*a),[i,n,r]},n.lchab=function(t){return i.lchab(n.lab(t))}},{"./lab":115,"./xyz":128}],118:[function(t,e,r){"use strict";var n=t("./luv"),i=t("./xyz"),o=e.exports={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,r,n,i=t[0],o=t[1];return n=t[2]/360*2*Math.PI,e=o*Math.cos(n),r=o*Math.sin(n),[i,e,r]},xyz:function(t){return n.xyz(o.luv(t))}};n.lchuv=function(t){var e=t[0],r=t[1],n=t[2],i=Math.sqrt(r*r+n*n),o=360*Math.atan2(n,r)/2/Math.PI;return o<0&&(o+=360),[e,i,o]},i.lchuv=function(t){return n.lchuv(i.luv(t))}},{"./luv":120,"./xyz":128}],119:[function(t,e,r){"use strict";var n=t("./xyz"),i=e.exports={name:"lms",min:[0,0,0],max:[100,100,100],channel:["long","medium","short"],matrix:{HPE:[.38971,.68898,-.07868,-.22981,1.1834,.04641,0,0,1],VONKRIES:[.4002,.7076,-.0808,-.2263,1.1653,.0457,0,0,.9182],BFD:[.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0686,1.0296],CAT97:[.8562,.3372,-.1934,-.836,1.8327,.0033,.0357,-.00469,1.0112],CAT00:[.7982,.3389,-.1371,-.5918,1.5512,.0406,8e-4,.0239,.9753],CAT02:[.7328,.4296,-.1624,-.7036,1.6975,.0061,.003,.0136,.9834]}};i.xyz=function(t,e){var r=t[0],n=t[1],i=t[2];return e||(e=[1.096123820835514,-.278869000218287,.182745179382773,.454369041975359,.473533154307412,.072097803717229,-.009627608738429,-.005698031216113,1.015325639954543]),[r*e[0]+n*e[1]+i*e[2],r*e[3]+n*e[4]+i*e[5],r*e[6]+n*e[7]+i*e[8]]},n.lms=function(t,e){var r=t[0],n=t[1],o=t[2];return e||(e=i.matrix.CAT02),[r*e[0]+n*e[1]+o*e[2],r*e[3]+n*e[4]+o*e[5],r*e[6]+n*e[7]+o*e[8]]}},{"./xyz":128}],120:[function(t,e,r){"use strict";var n=t("./xyz");e.exports={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,r){var i,o,a,u,s,l,c,f,h,p,d,g,y;return a=t[0],u=t[1],s=t[2],0===a?[0,0,0]:(e=e||"D65",r=r||2,h=n.whitepoint[r][e][0],p=n.whitepoint[r][e][1],d=n.whitepoint[r][e][2],g=4*h/(h+15*p+3*d),y=9*p/(h+15*p+3*d),i=u/(13*a)+g||0,o=s/(13*a)+y||0,c=a>8?p*Math.pow((a+16)/116,3):p*a*.0011070564598794539,l=9*c*i/(4*o)||0,f=c*(12-3*i-20*o)/(4*o)||0,[l,c,f])}},n.luv=function(t,e,r){var i,o,a,u,s,l,c,f,h,p,d,g,y;e=e||"D65",r=r||2,g=4*(h=n.whitepoint[r][e][0])/(h+15*(p=n.whitepoint[r][e][1])+3*(d=n.whitepoint[r][e][2])),y=9*p/(h+15*p+3*d),i=4*(l=t[0])/(l+15*(c=t[1])+3*(f=t[2]))||0,o=9*c/(l+15*c+3*f)||0;var m=c/p;return a=m<=.008856451679035631?903.2962962962961*m:116*Math.pow(m,1/3)-16,u=13*a*(i-g),s=13*a*(o-y),[a,u,s]}},{"./xyz":128}],121:[function(t,e,r){"use strict";var n=t("./xyz"),i={name:"osaucs",alias:["OSA-UCS"],channel:["L","j","g"],min:[-10,-6,-10],max:[8,12,6]};i.xyz=function(t){throw"Unimplemented"},n.osaucs=function(t){var e=t[0],r=t[1],n=t[2],i=e/(e+r+n),o=r/(e+r+n),a=(4.4934*i*i+4.3034*o*o-4.276*i*o-1.3744*i-2.56439*o+1.8103)*r,u=5.9*(Math.pow(a,1/3)-2/3+.042*Math.pow(Math.max(a,30)-30,1/3)),s=(u-14.3993)/Math.sqrt(2),l=u/(5.9*(Math.pow(a,1/3)-2/3)),c=.779*e+.4194*r-.1648*n,f=-.4493*e+1.3265*r+.0927*n,h=-.1149*e+.3394*r+.717*n;return c=Math.pow(c,1/3)||0,f=Math.pow(f,1/3)||0,h=Math.pow(h,1/3)||0,[s,l*(1.7*c+8*f-9.7*h),l*(-13.7*c+17.7*f-4*h)]},e.exports=i},{"./xyz":128}],122:[function(t,e,r){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],123:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"tsl",min:[0,0,0],max:[1,1,1],channel:["tint","saturation","lightness"]}).rgb=function(t){var e=t[0],r=t[1],n=t[2],i=Math.tan(2*Math.PI*(e-.25));i*=i;var o=Math.sqrt(5*r*r/(9*(1/i+1)))+1/3,a=Math.sqrt(5*r*r/(9*(i+1)))+1/3,u=n/(.185*o+.473*a+.114);return[u*o*255,u*a*255,u*(1-o-a)*255]},n.tsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=(e/(e+r+n)||0)-1/3,o=(r/(e+r+n)||0)-1/3;return[o>0?.5*Math.atan(i/o)/Math.PI+.25:o<0?.5*Math.atan(i/o)/Math.PI+.75:0,Math.sqrt(1.8*(i*i+o*o)),.299*e+.587*r+.114*n]}},{"./rgb":122}],124:[function(t,e,r){"use strict";var n=t("./xyz");(e.exports={name:"ucs",min:[0,0,0],max:[100,100,100],channel:["U","V","W"],alias:["UCS","cie1960"]}).xyz=function(t){var e=t[0],r=t[1];return[1.5*e,r,1.5*e-3*r+2*t[2]]},n.ucs=function(t){var e=t[0],r=t[1];return[2*e/3,r,.5*(3*r-e+t[2])]}},{"./xyz":128}],125:[function(t,e,r){"use strict";var n=t("./ucs"),i=t("./xyz"),o=e.exports={name:"uvw",min:[-134,-140,0],max:[224,122,100],channel:["U","V","W"],alias:["UVW","cieuvw","cie1964"]};o.xyz=function(t,e,r){var n,o,a,u,s,l,c,f,h,p,d,g,y;return u=t[0],s=t[1],0===(a=t[2])?[0,0,0]:(e=e||"D65",r=r||2,h=i.whitepoint[r][e][0],p=i.whitepoint[r][e][1],d=i.whitepoint[r][e][2],g=4*h/(h+15*p+3*d),y=6*p/(h+15*p+3*d),c=Math.pow((a+17)/25,3),n=u/(13*a)+g||0,o=s/(13*a)+y||0,l=1.5*c*n/o,f=c*(2/o-.5*n/o-5),[l,c,f])},i.uvw=function(t,e,r){var n,o,a,u,s,l=t[0],c=t[1],f=t[2];e=e||"D65",r=r||2,u=4*(n=i.whitepoint[r][e][0])/(n+15*(o=i.whitepoint[r][e][1])+3*(a=i.whitepoint[r][e][2])),s=6*o/(n+15*o+3*a);var h=4*l/(l+15*c+3*f)||0,p=6*c/(l+15*c+3*f)||0,d=25*Math.pow(c,1/3)-17;return[13*d*(h-u),13*d*(p-s),d]},o.ucs=function(t){},n.uvw=function(t){}},{"./ucs":124,"./xyz":128}],126:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./ypbpr"),o=e.exports={name:"xvycc",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["xvYCC"]};i.xvycc=function(t){return[16+219*t[0],128+224*t[1],128+224*t[2]]},o.ypbpr=function(t){return[(t[0]-16)/219,(t[1]-128)/224,(t[2]-128)/224]},o.rgb=function(t,e,r){return i.rgb(o.ypbpr(t),e,r)},n.xvycc=function(t,e,r){return i.xvycc(n.ypbpr(t,e,r))}},{"./rgb":122,"./ypbpr":135}],127:[function(t,e,r){"use strict";var n=t("./xyz"),i={name:"xyy",min:[0,0,0],max:[1,1,100],channel:["x","y","Y"],alias:["xyY","Yxy","yxy"]};i.xyz=function(t){var e,r,n,i,o;return i=t[0],o=t[1],r=t[2],0===o?[0,0,0]:(e=i*r/o,n=(1-i-o)*r/o,[e,r,n])},n.xyy=function(t){var e,r,n,i;return r=t[0],n=t[1],i=t[2],e=r+n+i,0===e?[0,0,n]:[r/e,n/e,n]},e.exports=i},{"./xyz":128}],128:[function(t,e,r){"use strict";var n=t("./rgb"),i={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};i.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}},i.max=i.whitepoint[2].D65,i.rgb=function(t,e){e=e||i.whitepoint[2].E;var r,n,o,a=t[0]/e[0],u=t[1]/e[1],s=t[2]/e[2];return r=3.240969941904521*a+-1.537383177570093*u+-.498610760293*s,n=-.96924363628087*a+1.87596750150772*u+.041555057407175*s,o=.055630079696993*a+-.20397695888897*u+1.056971514242878*s,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),[255*r,255*n,255*o]},n.xyz=function(t,e){var r=t[0]/255,n=t[1]/255,o=t[2]/255,a=.41239079926595*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.35758433938387*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.18048078840183*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),u=.21263900587151*r+.71516867876775*n+.072192315360733*o,s=.019330818715591*r+.11919477979462*n+.95053215224966*o;return e=e||i.whitepoint[2].E,[a*e[0],u*e[1],s*e[2]]},e.exports=i},{"./rgb":122}],129:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./ypbpr"),o=e.exports={name:"ycbcr",min:[16,16,16],max:[235,240,240],channel:["Y","Cb","Cr"],alias:["YCbCr","YCC"]};i.ycbcr=function(t){return[16+219*t[0],128+224*t[1],128+224*t[2]]},o.ypbpr=function(t){return[(t[0]-16)/219,(t[1]-128)/224,(t[2]-128)/224]},o.rgb=function(t,e,r){return i.rgb(o.ypbpr(t),e,r)},n.ycbcr=function(t,e,r){return i.ycbcr(n.ypbpr(t,e,r))}},{"./rgb":122,"./ypbpr":135}],130:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./ypbpr");(e.exports={name:"yccbccrc",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Yc","Cbc","Crc"],alias:["YcCbcCrc"]}).rgb=function(t){return i.rgb(t,.0593,.2627)},n.yccbccrc=function(t){return n.ypbpr(t,.0593,.2627)}},{"./rgb":122,"./ypbpr":135}],131:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"ycgco",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Cg","Co"],alias:["YCgCo"]}).rgb=function(t){var e=t[0],r=t[1],n=t[2],i=e-r;return[255*(i+n),255*(e+r),255*(i-n)]},n.ycgco=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[.25*e+.5*r+.25*n,-.25*e+.5*r-.25*n,.5*e-.5*n]}},{"./rgb":122}],132:[function(t,e,r){"use strict";var n=t("./rgb"),i=t("./yuv"),o=e.exports={name:"ydbdr",min:[0,-1.333,-1.333],max:[1,1.333,1.333],channel:["Y","Db","Dr"],alias:["YDbDr"]};o.rgb=function(t){var e=t[0],r=t[1],n=t[2];return[255*(e+92303716148e-15*r-.525912630661865*n),255*(e-.129132898890509*r+.267899328207599*n),255*(e+.664679059978955*r-79202543533e-15*n)]},n.ydbdr=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[.299*e+.587*r+.114*n,-.45*e-.883*r+1.333*n,-1.333*e+1.116*r+.217*n]},i.ydbdr=function(t){return[t[0],3.059*t[1],-2.169*t[2]]},o.yuv=function(t){return[t[0],t[1]/3.059,-t[2]/2.169]}},{"./rgb":122,"./yuv":136}],133:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"yes",min:[0,0,0],max:[1,1,1],channel:["luminance","e-factor","s-factor"]}).rgb=function(t){var e=t[0],r=t[1],n=t[2],i=[1,1.431,.126,1,-.569,.126,1,.431,-1.874];return[255*(e*i[0]+r*i[1]+n*i[2]),255*(e*i[3]+r*i[4]+n*i[5]),255*(e*i[6]+r*i[7]+n*i[8])]},n.yes=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=[.253,.684,.063,.5,-.5,0,.25,.25,-.5];return[e*i[0]+r*i[1]+n*i[2],e*i[3]+r*i[4]+n*i[5],e*i[6]+r*i[7]+n*i[8]]}},{"./rgb":122}],134:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"yiq",min:[0,-.5957,-.5226],max:[1,.5957,.5226],channel:["Y","I","Q"],alias:["YIQ"]}).rgb=function(t){var e,r,n,i=t[0],o=t[1],a=t[2];return e=1*i+.956*o+.621*a,r=1*i+-.272*o+-.647*a,n=1*i+-1.108*o+1.705*a,e=Math.min(Math.max(0,e),1),r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),[255*e,255*r,255*n]},n.yiq=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=.299*e+.587*r+.114*n,o=0,a=0;return e===r&&r===n||(o=.596*e+-.275*r+-.321*n,a=.212*e+-.528*r+.311*n),[i,o,a]}},{"./rgb":122}],135:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"ypbpr",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Pb","Pr"],alias:["YPbPr","Y/PB/PR","YPRPB","PRPBY","PBPRY","Y/Pb/Pr","YPrPb","PrPbY","PbPrY","Y/R-Y/B-Y","Y(R-Y)(B-Y)","R-Y","B-Y"]}).rgb=function(t,e,r){var n=t[0],i=t[1],o=t[2];e=e||.0722;var a=n+2*o*(1-(r=r||.2126)),u=n+2*i*(1-e);return[255*a,(n-r*a-e*u)/(1-r-e)*255,255*u]},n.ypbpr=function(t,e,r){var n=t[0]/255,i=t[1]/255,o=t[2]/255;e=e||.0722;var a=(r=r||.2126)*n+(1-r-e)*i+e*o;return[a,.5*(o-a)/(1-e),.5*(n-a)/(1-r)]}},{"./rgb":122}],136:[function(t,e,r){"use strict";var n=t("./rgb");(e.exports={name:"yuv",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","U","V"],alias:["YUV","EBU"]}).rgb=function(t){var e,r,n,i=t[0],o=t[1],a=t[2];return e=1*i+0*o+1.13983*a,r=1*i+-.39465*o+-.5806*a,n=1*i+2.02311*o+0*a,e=Math.min(Math.max(0,e),1),r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),[255*e,255*r,255*n]},n.yuv=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[.299*e+.587*r+.114*n,-.14713*e+-.28886*r+.436*n,.615*e+-.51499*r+-.10001*n]}},{"./rgb":122}],137:[function(t,e,r){function n(t,e,r){return Math.min(Math.max(e,t),r)}function i(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var o=t("color-name"),a=t("simple-swizzle"),u={};for(var s in o)o.hasOwnProperty(s)&&(u[o[s]]=s);var l=e.exports={to:{}};l.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=l.get.hsl(t),r="hsl";break;case"hwb":e=l.get.hwb(t),r="hwb";break;default:e=l.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},l.get.rgb=function(t){if(!t)return null;var e,r,i,a=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,l=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,c=/(\D+)/,f=[0,0,0,1];if(e=t.match(u)){for(i=e[2],e=e[1],r=0;r<3;r++){var h=2*r;f[r]=parseInt(e.slice(h,h+2),16)}i&&(f[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(e=t.match(a)){for(i=(e=e[1])[3],r=0;r<3;r++)f[r]=parseInt(e[r]+e[r],16);i&&(f[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(e=t.match(s)){for(r=0;r<3;r++)f[r]=parseInt(e[r+1],0);e[4]&&(f[3]=parseFloat(e[4]))}else{if(!(e=t.match(l)))return(e=t.match(c))?"transparent"===e[1]?[0,0,0,0]:(f=o[e[1]])?(f[3]=1,f):null:null;for(r=0;r<3;r++)f[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(f[3]=parseFloat(e[4]))}for(r=0;r<3;r++)f[r]=n(f[r],0,255);return f[3]=n(f[3],0,1),f},l.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,n(parseFloat(r[2]),0,100),n(parseFloat(r[3]),0,100),n(isNaN(i)?1:i,0,1)]}return null},l.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,n(parseFloat(r[2]),0,100),n(parseFloat(r[3]),0,100),n(isNaN(i)?1:i,0,1)]}return null},l.to.hex=function(){var t=a(arguments);return"#"+i(t[0])+i(t[1])+i(t[2])+(t[3]<1?i(Math.round(255*t[3])):"")},l.to.rgb=function(){var t=a(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},l.to.rgb.percent=function(){var t=a(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},l.to.hsl=function(){var t=a(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},l.to.hwb=function(){var t=a(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},l.to.keyword=function(t){return u[t.slice(0,3)]}},{"color-name":101,"simple-swizzle":407}],138:[function(t,e,r){"use strict";function n(t,e,r){var n=u(t[0],-e[0]),i=u(t[1],-e[1]),o=u(r[0],-e[0]),a=u(r[1],-e[1]),c=l(s(n,o),s(i,a));return c[c.length-1]>=0}function i(t,e,r,i){var u=o(e,r,i);if(0===u){var s=a(o(t,e,r)),l=a(o(t,e,i));if(s===l){if(0===s){var c=n(t,e,r);return c===n(t,e,i)?0:c?1:-1}return 0}return 0===l?s>0?-1:n(t,e,i)?-1:1:0===s?l>0?1:n(t,e,r)?1:-1:a(l-s)}var f=o(t,e,r);return f>0?u>0&&o(t,e,i)>0?1:-1:f<0?u>0||o(t,e,i)>0?1:-1:o(t,e,i)>0?1:n(t,e,r)?1:-1}e.exports=i;var o=t("robust-orientation"),a=t("signum"),u=t("two-sum"),s=t("robust-product"),l=t("robust-sum")},{"robust-orientation":399,"robust-product":400,"robust-sum":404,signum:139,"two-sum":423}],139:[function(t,e,r){"use strict";e.exports=function(t){return t<0?-1:t>0?1:0}},{}],140:[function(t,e,r){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===y(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function u(t){return"string"==typeof t}function s(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return"[object RegExp]"===y(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===y(t)}function p(t){return"[object Error]"===y(t)||t instanceof Error}function d(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function y(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=u,r.isSymbol=s,r.isUndefined=l,r.isRegExp=c,r.isObject=f,r.isDate=h,r.isError=p,r.isFunction=d,r.isPrimitive=g,r.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":337}],141:[function(t,e,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(t){var e=new n;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===a){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,o(e)}var o=t("./lib/thunk.js");e.exports=i},{"./lib/thunk.js":143}],142:[function(t,e,r){"use strict";function n(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,u=e.indexArgs.length>0,s=[],l=[],c=0,f=0;for(n=0;n<o;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)f=c,c=t[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.length>0&&s.push("var "+l.join(",")),n=o-1;n>=0;--n)c=t[n],s.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(s.push(r),n=0;n<o;++n){for(f=c,c=t[n],i=0;i<a;++i)s.push(["p",i,"+=d",i,"s",n].join(""));u&&(n>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function i(t,e,r,i){for(var o=e.length,a=r.arrayArgs.length,u=r.blockSize,s=r.indexArgs.length>0,l=[],c=0;c<a;++c)l.push(["var offset",c,"=p",c].join(""));for(c=t;c<o;++c)l.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",u,"){"].join("")),l.push(["s",e[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",e[c],"=",u].join("")),l.push(["j",c,"-=",u,"}"].join("")),s&&l.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<a;++c){for(var f=["offset"+c],h=t;h<o;++h)f.push(["j",h,"*t",c,"p",e[h]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}l.push(n(e,r,i));for(c=t;c<o;++c)l.push("}");return l.join("\n")}function o(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function a(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var u=t.args[a];if(!(u.count<=0)){var s=new RegExp(u.name,"g"),l="",c=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var f=e.offsetArgIndex.indexOf(a);c=e.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var h="l"+a,p="a"+c;if(0===e.arrayBlockIndices[c])1===u.count?"generic"===r[c]?u.lvalue?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),n=n.replace(s,h),o.push([p,".set(",l,",",h,")"].join(""))):n=n.replace(s,[p,".get(",l,")"].join("")):n=n.replace(s,[p,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),n=n.replace(s,h),u.lvalue&&o.push([p,".set(",l,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",l,"]"].join("")),n=n.replace(s,h),u.lvalue&&o.push([p,"[",l,"]=",h].join("")));else{for(var d=[u.name],g=[l],y=0;y<Math.abs(e.arrayBlockIndices[c]);y++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+c+"b"+y);if(s=new RegExp(d.join(""),"g"),l=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(s,[p,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(s,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function u(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+o:e[n]=i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function s(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),c=new Array(t.arrayArgs.length),f=0;f<t.arrayArgs.length;++f)c[f]=e[2*f],s[f]=e[2*f+1];for(var h=[],p=[],d=[],g=[],y=[],f=0;f<t.arrayArgs.length;++f){t.arrayBlockIndices[f]<0?(d.push(0),g.push(r),h.push(r),p.push(r+t.arrayBlockIndices[f])):(d.push(t.arrayBlockIndices[f]),g.push(t.arrayBlockIndices[f]+r),h.push(0),p.push(t.arrayBlockIndices[f]));for(var m=[],M=0;M<s[f].length;M++)d[f]<=s[f][M]&&s[f][M]<g[f]&&m.push(s[f][M]-d[f]);y.push(m)}for(var v=["SS"],b=["'use strict'"],w=[],M=0;M<r;++M)w.push(["s",M,"=SS[",M,"]"].join(""));for(f=0;f<t.arrayArgs.length;++f){v.push("a"+f),v.push("t"+f),v.push("p"+f);for(M=0;M<r;++M)w.push(["t",f,"p",M,"=t",f,"[",d[f]+M,"]"].join(""));for(M=0;M<Math.abs(t.arrayBlockIndices[f]);++M)w.push(["t",f,"b",M,"=t",f,"[",h[f]+M,"]"].join(""))}for(f=0;f<t.scalarArgs.length;++f)v.push("Y"+f);if(t.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var x=new Array(r),f=0;f<r;++f)x[f]="0";w.push(["index=[",x.join(","),"]"].join(""))}for(f=0;f<t.offsetArgs.length;++f){for(var D=t.offsetArgs[f],j=[],M=0;M<D.offset.length;++M)0!==D.offset[M]&&(1===D.offset[M]?j.push(["t",D.array,"p",M].join("")):j.push([D.offset[M],"*t",D.array,"p",M].join("")));0===j.length?w.push("q"+f+"=0"):w.push(["q",f,"=",j.join("+")].join(""))}var N=l([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));(w=w.concat(N)).length>0&&b.push("var "+w.join(","));for(f=0;f<t.arrayArgs.length;++f)b.push("p"+f+"|=0");t.pre.body.length>3&&b.push(a(t.pre,t,c));var A=a(t.body,t,c),L=o(y);L<r?b.push(i(L,y[0],t,A)):b.push(n(y[0],t,A)),t.post.body.length>3&&b.push(a(t.post,t,c)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+b.join("\n")+"\n----------");var T=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",L,u(c)].join("");return new Function(["function ",T,"(",v.join(","),"){",b.join("\n"),"} return ",T].join(""))()}var l=t("uniq");e.exports=s},{uniq:427}],143:[function(t,e,r){"use strict";function n(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],u=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],c=0;c<t.arrayArgs.length;++c){var f=t.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),u.push("array"+f+".data"),u.push("array"+f+".stride"),u.push("array"+f+".offset|0"),c>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(c=0;c<t.scalarArgs.length;++c)u.push("scalar"+t.scalarArgs[c]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",u.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(i.bind(void 0,t))}var i=t("./compile.js");e.exports=n},{"./compile.js":142}],144:[function(t,e,r){(function(n){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+r.humanize(this.diff),e){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,n)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(t){try{null==t?r.storage.removeItem("debug"):r.storage.debug=t}catch(t){}}function s(){var t;try{t=r.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(r=e.exports=t("./debug")).log=a,r.formatArgs=o,r.save=u,r.load=s,r.useColors=i,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},r.enable(s())}).call(this,t("_process"))},{"./debug":145,_process:375}],145:[function(t,e,r){function n(t){var e,n=0;for(e in t)n=(n<<5)-n+t.charCodeAt(e),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function i(t){function e(){if(e.enabled){var t=e,n=+new Date,i=n-(l||n);t.diff=i,t.prev=l,t.curr=n,l=n;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=r.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var a=o[u];e=i.call(t,a),o.splice(u,1),u--}return e}),r.formatArgs.call(t,o),(e.log||r.log||console.log.bind(console)).apply(t,o)}}return e.namespace=t,e.enabled=r.enabled(t),e.useColors=r.useColors(),e.color=n(t),"function"==typeof r.init&&r.init(e),e}function o(t){r.save(t),r.names=[],r.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),n=e.length,i=0;i<n;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))}function a(){r.enable("")}function u(t){var e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1}function s(t){return t instanceof Error?t.stack||t.message:t}(r=e.exports=i.debug=i.default=i).coerce=s,r.disable=a,r.enable=o,r.enabled=u,r.humanize=t("ms"),r.names=[],r.skips=[],r.formatters={};var l},{ms:346}],146:[function(t,e,r){e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],147:[function(t,e,r){var n=t("synthetic-dom-events"),i=function(t,e,r,n){return t.addEventListener(e,r,n||!1)},o=function(t,e,r,n){return t.removeEventListener(e,r,n||!1)},a=function(t,e,r,n){function a(i){o(t,e,a,n),r(i)}i(t,e,a,n)},u=function(t,e,r){var i=n(e,r);t.dispatchEvent(i)};document.addEventListener||(i=function(t,e,r){return t.attachEvent("on"+e,r)}),document.removeEventListener||(o=function(t,e,r){return t.detachEvent("on"+e,r)}),document.dispatchEvent||(u=function(t,e,r){var i=n(e,r);return t.fireEvent("on"+i.type,i)}),e.exports={on:i,off:o,once:a,emit:u}},{"synthetic-dom-events":415}],148:[function(t,e,r){(function(t){function r(t,e){return p[0]=t,p[1]=e,h[0]}function n(t){return h[0]=t,p[0]}function i(t){return h[0]=t,p[1]}function o(t,e){return p[1]=t,p[0]=e,h[0]}function a(t){return h[0]=t,p[1]}function u(t){return h[0]=t,p[0]}function s(t,e){return d.writeUInt32LE(t,0,!0),d.writeUInt32LE(e,4,!0),d.readDoubleLE(0,!0)}function l(t){return d.writeDoubleLE(t,0,!0),d.readUInt32LE(0,!0)}function c(t){return d.writeDoubleLE(t,0,!0),d.readUInt32LE(4,!0)}var f=!1;if("undefined"!=typeof Float64Array){var h=new Float64Array(1),p=new Uint32Array(h.buffer);h[0]=1,f=!0,1072693248===p[1]?(e.exports=function(t){return h[0]=t,[p[0],p[1]]},e.exports.pack=r,e.exports.lo=n,e.exports.hi=i):1072693248===p[0]?(e.exports=function(t){return h[0]=t,[p[1],p[0]]},e.exports.pack=o,e.exports.lo=a,e.exports.hi=u):f=!1}if(!f){var d=new t(8);e.exports=function(t){return d.writeDoubleLE(t,0,!0),[d.readUInt32LE(0,!0),d.readUInt32LE(4,!0)]},e.exports.pack=s,e.exports.lo=l,e.exports.hi=c}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var r=e.exports.lo(t),n=e.exports.hi(t),i=1048575&n;return 2146435072&n&&(i+=1<<20),[r,i]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}}).call(this,t("buffer").Buffer)},{buffer:86}],149:[function(t,e,r){"use strict";function n(t,e,r){var i=0|t[r];if(i<=0)return[];var o,a=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)a[o]=e;else for(o=0;o<i;++o)a[o]=n(t,e,r+1);return a}function i(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function o(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return i(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=o},{}],150:[function(t,e,r){"use strict";function n(t,e){var r=t.length;if("number"!=typeof e){e=0;for(a=0;a<r;++a){var n=t[a];e=Math.max(e,n[0],n[1])}e=1+(0|e)}e|=0;for(var o=new Array(e),a=0;a<e;++a)o[a]=[];for(a=0;a<r;++a)o[(n=t[a])[0]].push(n[1]),o[n[1]].push(n[0]);for(var u=0;u<e;++u)i(o[u],function(t,e){return t-e});return o}e.exports=n;var i=t("uniq")},{uniq:427}],151:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,s,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],u(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,s=0;s<n;s++)l[s].apply(this,o);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(r=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(u=o;u-- >0;)if(r[u]===e||r[u].listener&&r[u].listener===e){n=u;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],152:[function(t,e,r){var n=t("gl-vec3/transformMat4"),i=t("gl-vec3/add"),o=t("gl-vec3/subtract"),a=t("gl-vec3/normalize"),u=t("gl-vec3/cross"),s=t("gl-vec3/dot"),l=t("gl-mat4/identity"),c=t("gl-mat4/rotate"),f=[],h=[],p=[];e.exports=function(t){var e={positions:[],cells:[]},r=t.path,d=t.positions;if(!d)throw new Error("positions not provided");var g=t.edges;if(!g)throw new Error("edges not provided");for(var y=t.cells,m=t.closed,M=d.length,v=r.length,b=g.length,w=0;w<v;w++){var x=[0,0,1];m?o(h,r[(w-1+v)%(v-1)],r[(w+1)%(v-1)]):0===w?o(h,r[w],r[w+1]):w===v-1?o(h,r[w-1],r[w]):o(h,r[w-1],r[w+1]),a(h,h),u(p,x,h);var D=Math.acos(s(x,h));l(f),c(f,f,D,p);var j=r[w][3];j&&c(f,f,j,x);for(I=0;I<M;I++){var N=d[I],A=[N[0],N[1],N[2]||0];n(A,A,f),i(A,A,r[w]),e.positions.push(A)}}for(w=0;w<v-1;w++)for(I=0;I<b;I++){var L=g[I];e.cells.push([w*M+L[0],w*M+L[1],(w+1)*M+L[0]]),e.cells.push([w*M+L[1],(w+1)*M+L[0],(w+1)*M+L[1]])}if(y&&!m&&!1!==t.startCap&&!1!==t.caps)for(w=0;w<y.length;w++){for(var T=[],E=y[w].length,I=0;I<E;I++)T.push(y[w][I]);e.cells.push(T)}if(y&&!m&&!1!==t.endCap&&!1!==t.caps)for(w=0;w<y.length;w++){for(var T=[],E=y[w].length,I=0;I<E;I++)T.push(y[w][I]+(v-1)*M);e.cells.push(T)}return e}},{"gl-mat4/identity":187,"gl-mat4/rotate":195,"gl-vec3/add":259,"gl-vec3/cross":264,"gl-vec3/dot":267,"gl-vec3/normalize":278,"gl-vec3/subtract":288,"gl-vec3/transformMat4":290}],153:[function(t,e,r){function n(t,e,r,n,i){var o=e.length,t=t||new Float32Array(3*o+6);i=i||e;for(var a=1,u=3;a<o;a+=2,u+=6)t[u-3]=e[a-1],t[u-2]=r,t[u-1]=e[a],t[u]=i[a-1],t[u+1]=n,t[u+2]=i[a];return t[u-3]=e[0],t[u-2]=r,t[u-1]=e[1],t[u]=i[0],t[u+1]=n,t[u+2]=i[1],t}function i(t,e){e=e||new Float32Array(t.length-6);for(var r=2,n=t.length,i=6;r<=n;r+=1,i+=3)e[i-2]=r-2,e[i-1]=r-1,e[i-0]=r;return e}e.exports=n,n.faces=i},{}],154:[function(t,e,r){var n=t("pnltri"),i=t("lodash.defaults");e.exports=function(t,e){function r(t){return t=t.map(function(t){return{x:t[0],y:t[1]}}),(new n.Triangulator).triangulate_polygon([t])}i(e=e||{},{top:1,bottom:0,closed:!0});var o,a,u=t.length;return e.top===e.bottom?function(){o=t.map(function(t){return[t[0],t[1],e.top]}),a=r(t)}():function(){o=[],t.forEach(function(t){o.push([t[0],t[1],e.top])}),t.forEach(function(t){o.push([t[0],t[1],e.bottom])}),a=[];for(var n=0;n<u;n++)n===u-1?(a.push([n+u,u,n]),a.push([0,n,u])):(a.push([n+u,n+u+1,n]),a.push([n+1,n,n+u+1]));if(e.closed){var i=r(t),s=i.map(function(t){return t.map(function(t){return t+u})});s=s.map(function(t){return[t[0],t[2],t[1]]}),a=a.concat(i).concat(s)}}(),{positions:o,cells:a}}},{"lodash.defaults":339,pnltri:366}],155:[function(t,e,r){function n(t,e){return e||(e=[]),i(o,t),e[0]=o[12],e[1]=o[13],e[2]=o[14],e}var i=t("gl-mat4/invert"),o=new Float32Array(16);e.exports=n},{"gl-mat4/invert":189}],156:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=o}function i(t){return new n(t._color,t.key,t.value,t.left,t.right,t._count)}function o(t,e){return new n(t,e.key,e.value,e.left,e.right,e._count)}function a(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function u(t,e){this._compare=t,this.root=e}function s(t,e){if(e.left&&(r=s(t,e.left)))return r;var r=t(e.key,e.value);return r||(e.right?s(t,e.right):void 0)}function l(t,e,r,n){if(e(t,n.key)<=0){if(n.left&&(i=l(t,e,r,n.left)))return i;var i=r(n.key,n.value);if(i)return i}if(n.right)return l(t,e,r,n.right)}function c(t,e,r,n,i){var o,a=r(t,i.key),u=r(e,i.key);if(a<=0){if(i.left&&(o=c(t,e,r,n,i.left)))return o;if(u>0&&(o=n(i.key,i.value)))return o}if(u>0&&i.right)return c(t,e,r,n,i.right)}function f(t,e){this.tree=t,this._stack=e}function h(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function p(t){for(var e,r,n,u,s=t.length-1;s>=0;--s){if(e=t[s],0===s)return void(e._color=m);if((r=t[s-1]).left===e){if((n=r.right).right&&n.right._color===y)return n=r.right=i(n),u=n.right=i(n.right),r.right=n.left,n.left=r,n.right=u,n._color=r._color,e._color=m,r._color=m,u._color=m,a(r),a(n),s>1&&((l=t[s-2]).left===r?l.left=n:l.right=n),void(t[s-1]=n);if(n.left&&n.left._color===y)return n=r.right=i(n),u=n.left=i(n.left),r.right=u.left,n.left=u.right,u.left=r,u.right=n,u._color=r._color,r._color=m,n._color=m,e._color=m,a(r),a(n),a(u),s>1&&((l=t[s-2]).left===r?l.left=u:l.right=u),void(t[s-1]=u);if(n._color===m){if(r._color===y)return r._color=m,void(r.right=o(y,n));r.right=o(y,n);continue}n=i(n),r.right=n.left,n.left=r,n._color=r._color,r._color=y,a(r),a(n),s>1&&((l=t[s-2]).left===r?l.left=n:l.right=n),t[s-1]=n,t[s]=r,s+1<t.length?t[s+1]=e:t.push(e),s+=2}else{if((n=r.left).left&&n.left._color===y)return n=r.left=i(n),u=n.left=i(n.left),r.left=n.right,n.right=r,n.left=u,n._color=r._color,e._color=m,r._color=m,u._color=m,a(r),a(n),s>1&&((l=t[s-2]).right===r?l.right=n:l.left=n),void(t[s-1]=n);if(n.right&&n.right._color===y)return n=r.left=i(n),u=n.right=i(n.right),r.left=u.right,n.right=u.left,u.right=r,u.left=n,u._color=r._color,r._color=m,n._color=m,e._color=m,a(r),a(n),a(u),s>1&&((l=t[s-2]).right===r?l.right=u:l.left=u),void(t[s-1]=u);if(n._color===m){if(r._color===y)return r._color=m,void(r.left=o(y,n));r.left=o(y,n);continue}if(n=i(n),r.left=n.right,n.right=r,n._color=r._color,r._color=y,a(r),a(n),s>1){var l=t[s-2];l.right===r?l.right=n:l.left=n}t[s-1]=n,t[s]=r,s+1<t.length?t[s+1]=e:t.push(e),s+=2}}}function d(t,e){return t<e?-1:t>e?1:0}function g(t){return new u(t||d,null)}e.exports=g;var y=0,m=1,M=u.prototype;Object.defineProperty(M,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(M,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(M,"length",{get:function(){return this.root?this.root._count:0}}),M.insert=function(t,e){for(var r=this._compare,i=this.root,s=[],l=[];i;){var c=r(t,i.key);s.push(i),l.push(c),i=c<=0?i.left:i.right}s.push(new n(y,t,e,null,null,1));for(f=s.length-2;f>=0;--f){i=s[f];l[f]<=0?s[f]=new n(i._color,i.key,i.value,s[f+1],i.right,i._count+1):s[f]=new n(i._color,i.key,i.value,i.left,s[f+1],i._count+1)}for(var f=s.length-1;f>1;--f){var h=s[f-1],i=s[f];if(h._color===m||i._color===m)break;var p=s[f-2];if(p.left===h)if(h.left===i){if(!(d=p.right)||d._color!==y){p._color=y,p.left=h.right,h._color=m,h.right=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((g=s[f-3]).left===p?g.left=h:g.right=h);break}h._color=m,p.right=o(m,d),p._color=y,f-=1}else{if(!(d=p.right)||d._color!==y){h.right=i.left,p._color=y,p.left=i.right,i._color=m,i.left=h,i.right=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3&&((g=s[f-3]).left===p?g.left=i:g.right=i);break}h._color=m,p.right=o(m,d),p._color=y,f-=1}else if(h.right===i){if(!(d=p.left)||d._color!==y){p._color=y,p.right=h.left,h._color=m,h.left=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((g=s[f-3]).right===p?g.right=h:g.left=h);break}h._color=m,p.left=o(m,d),p._color=y,f-=1}else{var d=p.left;if(!d||d._color!==y){if(h.left=i.right,p._color=y,p.right=i.left,i._color=m,i.right=h,i.left=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3){var g=s[f-3];g.right===p?g.right=i:g.left=i}break}h._color=m,p.left=o(m,d),p._color=y,f-=1}}return s[0]._color=m,new u(r,s[0])},M.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return s(t,this.root);case 2:return l(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return c(e,r,this._compare,t,this.root)}},Object.defineProperty(M,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new f(this,t)}}),Object.defineProperty(M,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new f(this,t)}}),M.at=function(t){if(t<0)return new f(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new f(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new f(this,[])},M.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new f(this,n)},M.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new f(this,n)},M.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new f(this,n)},M.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new f(this,n)},M.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new f(this,n);r=i<=0?r.left:r.right}return new f(this,[])},M.remove=function(t){var e=this.find(t);return e?e.remove():this},M.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var v=f.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new f(this.tree,this._stack.slice())},v.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new n(r._color,r.key,r.value,r.left,r.right,r._count);for(s=t.length-2;s>=0;--s)(r=t[s]).left===t[s+1]?e[s]=new n(r._color,r.key,r.value,e[s+1],r.right,r._count):e[s]=new n(r._color,r.key,r.value,r.left,e[s+1],r._count);if((r=e[e.length-1]).left&&r.right){var i=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var o=e[i-1];e.push(new n(r._color,o.key,o.value,r.left,r.right,r._count)),e[i-1].key=r.key,e[i-1].value=r.value;for(s=e.length-2;s>=i;--s)r=e[s],e[s]=new n(r._color,r.key,r.value,r.left,e[s+1],r._count);e[i-1].left=e[i]}if((r=e[e.length-1])._color===y){var a=e[e.length-2];a.left===r?a.left=null:a.right===r&&(a.right=null),e.pop();for(s=0;s<e.length;++s)e[s]._count--;return new u(this.tree._compare,e[0])}if(r.left||r.right){r.left?h(r,r.left):r.right&&h(r,r.right),r._color=m;for(s=0;s<e.length-1;++s)e[s]._count--;return new u(this.tree._compare,e[0])}if(1===e.length)return new u(this.tree._compare,null);for(var s=0;s<e.length;++s)e[s]._count--;var l=e[e.length-2];return p(e),l.left===r?l.left=null:l.right=null,new u(this.tree._compare,e[0])},Object.defineProperty(v,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),v.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),v.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),i=e[e.length-1];r[r.length-1]=new n(i._color,i.key,t,i.left,i.right,i._count);for(var o=e.length-2;o>=0;--o)i=e[o],i.left===e[o+1]?r[o]=new n(i._color,i.key,i.value,r[o+1],i.right,i._count):r[o]=new n(i._color,i.key,i.value,i.left,r[o+1],i._count);return new u(this.tree._compare,r[0])},v.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],157:[function(t,e,r){function n(t){if(t<0)return Number("0/0");for(var e=a[0],r=a.length-1;r>0;--r)e+=a[r]/(t+r);var n=t+o+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}var i=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],o=607/128,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.exports=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(n(e));e-=1;for(var r=i[0],o=1;o<9;o++)r+=i[o]/(e+o);var a=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*r},e.exports.log=n},{}],158:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){function e(t){0===t.length&&r.push(n.slice());for(var i=0;i<t.length;i++)t.push(t.shift()),n.push(t[0]),e(t.slice(1)),n.pop()}var r=[],n=[];return e(t),r};r.default=n,e.exports=r.default},{}],159:[function(t,e,r){"use strict";function n(t){for(var e=t.sort(),r=[t[0]],n=1;n<e.length;n++)e[n-1].join("")!==e[n].join("")&&r.push(e[n]);return r}Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(t("get-permutations")),o=function(t){return n((0,i.default)(t))};r.default=o,e.exports=r.default},{"get-permutations":158}],160:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8];return t[0]=a*c-u*l,t[1]=i*l-n*c,t[2]=n*u-i*a,t[3]=u*s-o*c,t[4]=r*c-i*s,t[5]=i*o-r*u,t[6]=o*l-a*s,t[7]=n*s-r*l,t[8]=r*a-n*o,t}e.exports=n},{}],161:[function(t,e,r){function n(t){var e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}e.exports=n},{}],162:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}e.exports=n},{}],163:[function(t,e,r){function n(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}e.exports=n},{}],164:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],l=t[8];return e*(l*o-a*s)+r*(a*u-l*i)+n*(s*i-o*u)}e.exports=n},{}],165:[function(t,e,r){function n(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}e.exports=n},{}],166:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}e.exports=n},{}],167:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}e.exports=n},{}],168:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,s=i+i,l=r*a,c=n*a,f=n*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return t[0]=1-f-d,t[3]=c-m,t[6]=h+y,t[1]=c+m,t[4]=1-l-d,t[7]=p-g,t[2]=h-y,t[5]=p+g,t[8]=1-l-f,t}e.exports=n},{}],169:[function(t,e,r){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}e.exports=n},{}],170:[function(t,e,r){e.exports={adjoint:t("./adjoint"),clone:t("./clone"),copy:t("./copy"),create:t("./create"),determinant:t("./determinant"),frob:t("./frob"),fromMat2:t("./from-mat2"),fromMat4:t("./from-mat4"),fromQuat:t("./from-quat"),identity:t("./identity"),invert:t("./invert"),multiply:t("./multiply"),normalFromMat4:t("./normal-from-mat4"),rotate:t("./rotate"),scale:t("./scale"),str:t("./str"),translate:t("./translate"),transpose:t("./transpose")}},{"./adjoint":160,"./clone":161,"./copy":162,"./create":163,"./determinant":164,"./frob":165,"./from-mat2":166,"./from-mat4":167,"./from-quat":168,"./identity":169,"./invert":171,"./multiply":172,"./normal-from-mat4":173,"./rotate":174,"./scale":175,"./str":176,"./translate":177,"./transpose":178}],171:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=c*a-u*l,h=-c*o+u*s,p=l*o-a*s,d=r*f+n*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-c*n+i*l)*d,t[2]=(u*n-i*a)*d,t[3]=h*d,t[4]=(c*r-i*s)*d,t[5]=(-u*r+i*o)*d,t[6]=p*d,t[7]=(-l*r+n*s)*d,t[8]=(a*r-n*o)*d,t):null}e.exports=n},{}],172:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=r[0],p=r[1],d=r[2],g=r[3],y=r[4],m=r[5],M=r[6],v=r[7],b=r[8];return t[0]=h*n+p*a+d*l,t[1]=h*i+p*u+d*c,t[2]=h*o+p*s+d*f,t[3]=g*n+y*a+m*l,t[4]=g*i+y*u+m*c,t[5]=g*o+y*s+m*f,t[6]=M*n+v*a+b*l,t[7]=M*i+v*u+b*c,t[8]=M*o+v*s+b*f,t}e.exports=n},{}],173:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],m=e[15],M=r*u-n*a,v=r*s-i*a,b=r*l-o*a,w=n*s-i*u,x=n*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,t[0]=(u*E-s*T+l*L)*I,t[1]=(s*A-a*E-l*N)*I,t[2]=(a*T-u*A+l*j)*I,t[3]=(i*T-n*E-o*L)*I,t[4]=(r*E-i*A+o*N)*I,t[5]=(n*A-r*T-o*j)*I,t[6]=(g*D-y*x+m*w)*I,t[7]=(y*b-d*D-m*v)*I,t[8]=(d*x-g*b+m*M)*I,t):null}e.exports=n},{}],174:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(r),p=Math.cos(r);return t[0]=p*n+h*a,t[1]=p*i+h*u,t[2]=p*o+h*s,t[3]=p*a-h*n,t[4]=p*u-h*i,t[5]=p*s-h*o,t[6]=l,t[7]=c,t[8]=f,t}e.exports=n},{}],175:[function(t,e,r){function n(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}e.exports=n},{}],176:[function(t,e,r){function n(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}e.exports=n},{}],177:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=r[0],p=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*n+p*a+l,t[7]=h*i+p*u+c,t[8]=h*o+p*s+f,t}e.exports=n},{}],178:[function(t,e,r){function n(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}e.exports=n},{}],179:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],m=e[15];return t[0]=u*(h*m-p*y)-f*(s*m-l*y)+g*(s*p-l*h),t[1]=-(n*(h*m-p*y)-f*(i*m-o*y)+g*(i*p-o*h)),t[2]=n*(s*m-l*y)-u*(i*m-o*y)+g*(i*l-o*s),t[3]=-(n*(s*p-l*h)-u*(i*p-o*h)+f*(i*l-o*s)),t[4]=-(a*(h*m-p*y)-c*(s*m-l*y)+d*(s*p-l*h)),t[5]=r*(h*m-p*y)-c*(i*m-o*y)+d*(i*p-o*h),t[6]=-(r*(s*m-l*y)-a*(i*m-o*y)+d*(i*l-o*s)),t[7]=r*(s*p-l*h)-a*(i*p-o*h)+c*(i*l-o*s),t[8]=a*(f*m-p*g)-c*(u*m-l*g)+d*(u*p-l*f),t[9]=-(r*(f*m-p*g)-c*(n*m-o*g)+d*(n*p-o*f)),t[10]=r*(u*m-l*g)-a*(n*m-o*g)+d*(n*l-o*u),t[11]=-(r*(u*p-l*f)-a*(n*p-o*f)+c*(n*l-o*u)),t[12]=-(a*(f*y-h*g)-c*(u*y-s*g)+d*(u*h-s*f)),t[13]=r*(f*y-h*g)-c*(n*y-i*g)+d*(n*h-i*f),t[14]=-(r*(u*y-s*g)-a*(n*y-i*g)+d*(n*s-i*u)),t[15]=r*(u*h-s*f)-a*(n*h-i*f)+c*(n*s-i*u),t}e.exports=n},{}],180:[function(t,e,r){function n(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=n},{}],181:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=n},{}],182:[function(t,e,r){function n(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],183:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],h=t[11],p=t[12],d=t[13],g=t[14],y=t[15];return(e*a-r*o)*(f*y-h*g)-(e*u-n*o)*(c*y-h*d)+(e*s-i*o)*(c*g-f*d)+(r*u-n*a)*(l*y-h*p)-(r*s-i*a)*(l*g-f*p)+(n*s-i*u)*(l*d-c*p)}e.exports=n},{}],184:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,s=i+i,l=r*a,c=n*a,f=n*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return t[0]=1-f-d,t[1]=c+m,t[2]=h-y,t[3]=0,t[4]=c-m,t[5]=1-l-d,t[6]=p+g,t[7]=0,t[8]=h+y,t[9]=p-g,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],185:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=n+n,s=i+i,l=o+o,c=n*u,f=n*s,h=n*l,p=i*s,d=i*l,g=o*l,y=a*u,m=a*s,M=a*l;return t[0]=1-(p+g),t[1]=f+M,t[2]=h-m,t[3]=0,t[4]=f-M,t[5]=1-(c+g),t[6]=d+y,t[7]=0,t[8]=h+m,t[9]=d-y,t[10]=1-(c+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}e.exports=n},{}],186:[function(t,e,r){function n(t,e,r,n,i,o,a){var u=1/(r-e),s=1/(i-n),l=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(i+n)*s,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}e.exports=n},{}],187:[function(t,e,r){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],188:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotationTranslation:t("./fromRotationTranslation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":179,"./clone":180,"./copy":181,"./create":182,"./determinant":183,"./fromQuat":184,"./fromRotationTranslation":185,"./frustum":186,"./identity":187,"./invert":189,"./lookAt":190,"./multiply":191,"./ortho":192,"./perspective":193,"./perspectiveFromFieldOfView":194,"./rotate":195,"./rotateX":196,"./rotateY":197,"./rotateZ":198,"./scale":199,"./str":200,"./translate":201,"./transpose":202}],189:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],m=e[15],M=r*u-n*a,v=r*s-i*a,b=r*l-o*a,w=n*s-i*u,x=n*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,t[0]=(u*E-s*T+l*L)*I,t[1]=(i*T-n*E-o*L)*I,t[2]=(g*D-y*x+m*w)*I,t[3]=(h*x-f*D-p*w)*I,t[4]=(s*A-a*E-l*N)*I,t[5]=(r*E-i*A+o*N)*I,t[6]=(y*b-d*D-m*v)*I,t[7]=(c*D-h*b+p*v)*I,t[8]=(a*T-u*A+l*j)*I,t[9]=(n*A-r*T-o*j)*I,t[10]=(d*x-g*b+m*M)*I,t[11]=(f*b-c*x-p*M)*I,t[12]=(u*N-a*L-s*j)*I,t[13]=(r*L-n*N+i*j)*I,t[14]=(g*v-d*w-y*M)*I,t[15]=(c*w-f*v+h*M)*I,t):null}e.exports=n},{}],190:[function(t,e,r){function n(t,e,r,n){var o,a,u,s,l,c,f,h,p,d,g=e[0],y=e[1],m=e[2],M=n[0],v=n[1],b=n[2],w=r[0],x=r[1],D=r[2];return Math.abs(g-w)<1e-6&&Math.abs(y-x)<1e-6&&Math.abs(m-D)<1e-6?i(t):(f=g-w,h=y-x,p=m-D,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=v*p-b*h,a=b*f-M*p,u=M*h-v*f,d=Math.sqrt(o*o+a*a+u*u),d?(d=1/d,o*=d,a*=d,u*=d):(o=0,a=0,u=0),s=h*u-p*a,l=p*o-f*u,c=f*a-h*o,d=Math.sqrt(s*s+l*l+c*c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=o,t[1]=s,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=p,t[11]=0,t[12]=-(o*g+a*y+u*m),t[13]=-(s*g+l*y+c*m),t[14]=-(f*g+h*y+p*m),t[15]=1,t)}var i=t("./identity");e.exports=n},{"./identity":187}],191:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],g=e[12],y=e[13],m=e[14],M=e[15],v=r[0],b=r[1],w=r[2],x=r[3];return t[0]=v*n+b*u+w*f+x*g,t[1]=v*i+b*s+w*h+x*y,t[2]=v*o+b*l+w*p+x*m,t[3]=v*a+b*c+w*d+x*M,v=r[4],b=r[5],w=r[6],x=r[7],t[4]=v*n+b*u+w*f+x*g,t[5]=v*i+b*s+w*h+x*y,t[6]=v*o+b*l+w*p+x*m,t[7]=v*a+b*c+w*d+x*M,v=r[8],b=r[9],w=r[10],x=r[11],t[8]=v*n+b*u+w*f+x*g,t[9]=v*i+b*s+w*h+x*y,t[10]=v*o+b*l+w*p+x*m,t[11]=v*a+b*c+w*d+x*M,v=r[12],b=r[13],w=r[14],x=r[15],t[12]=v*n+b*u+w*f+x*g,t[13]=v*i+b*s+w*h+x*y,t[14]=v*o+b*l+w*p+x*m,t[15]=v*a+b*c+w*d+x*M,t}e.exports=n},{}],192:[function(t,e,r){function n(t,e,r,n,i,o,a){var u=1/(e-r),s=1/(n-i),l=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*u,t[13]=(i+n)*s,t[14]=(a+o)*l,t[15]=1,t}e.exports=n},{}],193:[function(t,e,r){function n(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}e.exports=n},{}],194:[function(t,e,r){function n(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),l=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(i-o)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}e.exports=n},{}],195:[function(t,e,r){function n(t,e,r,n){var i,o,a,u,s,l,c,f,h,p,d,g,y,m,M,v,b,w,x,D,j,N,A,L,T=n[0],E=n[1],I=n[2],O=Math.sqrt(T*T+E*E+I*I);return Math.abs(O)<1e-6?null:(O=1/O,T*=O,E*=O,I*=O,i=Math.sin(r),o=Math.cos(r),a=1-o,u=e[0],s=e[1],l=e[2],c=e[3],f=e[4],h=e[5],p=e[6],d=e[7],g=e[8],y=e[9],m=e[10],M=e[11],v=T*T*a+o,b=E*T*a+I*i,w=I*T*a-E*i,x=T*E*a-I*i,D=E*E*a+o,j=I*E*a+T*i,N=T*I*a+E*i,A=E*I*a-T*i,L=I*I*a+o,t[0]=u*v+f*b+g*w,t[1]=s*v+h*b+y*w,t[2]=l*v+p*b+m*w,t[3]=c*v+d*b+M*w,t[4]=u*x+f*D+g*j,t[5]=s*x+h*D+y*j,t[6]=l*x+p*D+m*j,t[7]=c*x+d*D+M*j,t[8]=u*N+f*A+g*L,t[9]=s*N+h*A+y*L,t[10]=l*N+p*A+m*L,t[11]=c*N+d*A+M*L,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}e.exports=n},{}],196:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*n,t[5]=a*i+c*n,t[6]=u*i+f*n,t[7]=s*i+h*n,t[8]=l*i-o*n,t[9]=c*i-a*n,t[10]=f*i-u*n,t[11]=h*i-s*n,t}e.exports=n},{}],197:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],s=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*n,t[1]=a*i-c*n,t[2]=u*i-f*n,t[3]=s*i-h*n,t[8]=o*n+l*i,t[9]=a*n+c*i,t[10]=u*n+f*i,t[11]=s*n+h*i,t}e.exports=n},{}],198:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],s=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*n,t[1]=a*i+c*n,t[2]=u*i+f*n,t[3]=s*i+h*n,t[4]=l*i-o*n,t[5]=c*i-a*n,t[6]=f*i-u*n,t[7]=h*i-s*n,t}e.exports=n},{}],199:[function(t,e,r){function n(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=n},{}],200:[function(t,e,r){function n(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}e.exports=n},{}],201:[function(t,e,r){function n(t,e,r){var n,i,o,a,u,s,l,c,f,h,p,d,g=r[0],y=r[1],m=r[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*m+e[12],t[13]=e[1]*g+e[5]*y+e[9]*m+e[13],t[14]=e[2]*g+e[6]*y+e[10]*m+e[14],t[15]=e[3]*g+e[7]*y+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*g+u*y+f*m+e[12],t[13]=i*g+s*y+h*m+e[13],t[14]=o*g+l*y+p*m+e[14],t[15]=a*g+c*y+d*m+e[15]),t}e.exports=n},{}],202:[function(t,e,r){function n(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=n},{}],203:[function(t,e,r){e.exports=t("gl-vec4/add")},{"gl-vec4/add":292}],204:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}e.exports=n},{}],205:[function(t,e,r){e.exports=t("gl-vec4/clone")},{"gl-vec4/clone":293}],206:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}e.exports=n},{}],207:[function(t,e,r){e.exports=t("gl-vec4/copy")},{"gl-vec4/copy":294}],208:[function(t,e,r){function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}e.exports=n},{}],209:[function(t,e,r){e.exports=t("gl-vec4/dot")},{"gl-vec4/dot":298}],210:[function(t,e,r){function n(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}e.exports=n},{}],211:[function(t,e,r){e.exports=t("gl-vec4/fromValues")},{"gl-vec4/fromValues":299}],212:[function(t,e,r){function n(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}e.exports=n},{}],213:[function(t,e,r){e.exports={add:t("./add"),calculateW:t("./calculateW"),clone:t("./clone"),conjugate:t("./conjugate"),copy:t("./copy"),create:t("./create"),dot:t("./dot"),fromMat3:t("./fromMat3"),fromValues:t("./fromValues"),identity:t("./identity"),invert:t("./invert"),length:t("./length"),lerp:t("./lerp"),multiply:t("./multiply"),normalize:t("./normalize"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),rotationTo:t("./rotationTo"),scale:t("./scale"),set:t("./set"),setAxes:t("./setAxes"),setAxisAngle:t("./setAxisAngle"),slerp:t("./slerp"),sqlerp:t("./sqlerp"),squaredLength:t("./squaredLength")}},{"./add":203,"./calculateW":204,"./clone":205,"./conjugate":206,"./copy":207,"./create":208,"./dot":209,"./fromMat3":210,"./fromValues":211,"./identity":212,"./invert":214,"./length":215,"./lerp":216,"./multiply":217,"./normalize":218,"./rotateX":219,"./rotateY":220,"./rotateZ":221,"./rotationTo":222,"./scale":223,"./set":224,"./setAxes":225,"./setAxisAngle":226,"./slerp":227,"./sqlerp":228,"./squaredLength":229}],214:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,u=a?1/a:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-i*u,t[3]=o*u,t}e.exports=n},{}],215:[function(t,e,r){e.exports=t("gl-vec4/length")},{"gl-vec4/length":302}],216:[function(t,e,r){e.exports=t("gl-vec4/lerp")},{"gl-vec4/lerp":303}],217:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],s=r[1],l=r[2],c=r[3];return t[0]=n*c+a*u+i*l-o*s,t[1]=i*c+a*s+o*u-n*l,t[2]=o*c+a*l+n*s-i*u,t[3]=a*c-n*u-i*s-o*l,t}e.exports=n},{}],218:[function(t,e,r){e.exports=t("gl-vec4/normalize")},{"gl-vec4/normalize":308}],219:[function(t,e,r){function n(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-n*u,t}e.exports=n},{}],220:[function(t,e,r){function n(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s-o*u,t[1]=i*s+a*u,t[2]=o*s+n*u,t[3]=a*s-i*u,t}e.exports=n},{}],221:[function(t,e,r){function n(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*u,t[1]=i*s-n*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t}e.exports=n},{}],222:[function(t,e,r){function n(t,e,r){var n=i(e,r);return n<-.999999?(o(c,f,e),a(c)<1e-6&&o(c,h,e),u(c,c),l(t,c,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o(c,e,r),t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=1+n,s(t,t))}var i=t("gl-vec3/dot"),o=t("gl-vec3/cross"),a=t("gl-vec3/length"),u=t("gl-vec3/normalize"),s=t("./normalize"),l=t("./setAxisAngle");e.exports=n;var c=[0,0,0],f=[1,0,0],h=[0,1,0]},{"./normalize":218,"./setAxisAngle":226,"gl-vec3/cross":264,"gl-vec3/dot":267,"gl-vec3/length":272,"gl-vec3/normalize":278}],223:[function(t,e,r){e.exports=t("gl-vec4/scale")},{"gl-vec4/scale":310}],224:[function(t,e,r){e.exports=t("gl-vec4/set")},{"gl-vec4/set":312}],225:[function(t,e,r){function n(t,e,r,n){return u[0]=r[0],u[3]=r[1],u[6]=r[2],u[1]=n[0],u[4]=n[1],u[7]=n[2],u[2]=-e[0],u[5]=-e[1],u[8]=-e[2],a(t,o(t,u))}var i=t("gl-mat3/create"),o=t("./fromMat3"),a=t("./normalize");e.exports=n;var u=i()},{"./fromMat3":210,"./normalize":218,"gl-mat3/create":163}],226:[function(t,e,r){function n(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}e.exports=n},{}],227:[function(t,e,r){function n(t,e,r,n){var i,o,a,u,s,l=e[0],c=e[1],f=e[2],h=e[3],p=r[0],d=r[1],g=r[2],y=r[3];return(o=l*p+c*d+f*g+h*y)<0&&(o=-o,p=-p,d=-d,g=-g,y=-y),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-n)*i)/a,s=Math.sin(n*i)/a):(u=1-n,s=n),t[0]=u*l+s*p,t[1]=u*c+s*d,t[2]=u*f+s*g,t[3]=u*h+s*y,t}e.exports=n},{}],228:[function(t,e,r){function n(t,e,r,n,u,s){return i(o,e,u,s),i(a,r,n,s),i(t,o,a,2*s*(1-s)),t}var i=t("./slerp");e.exports=n;var o=[0,0,0,1],a=[0,0,0,1]},{"./slerp":227}],229:[function(t,e,r){e.exports=t("gl-vec4/squaredLength")},{"gl-vec4/squaredLength":314}],230:[function(t,e,r){function n(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}e.exports=n},{}],231:[function(t,e,r){function n(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}e.exports=n},{}],232:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t}e.exports=n},{}],233:[function(t,e,r){function n(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}e.exports=n},{}],234:[function(t,e,r){function n(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}e.exports=n},{}],235:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}e.exports=n},{}],236:[function(t,e,r){function n(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}e.exports=n},{}],237:[function(t,e,r){function n(t,e){return t[0]*e[0]+t[1]*e[1]}e.exports=n},{}],238:[function(t,e,r){function n(t,e,r,n,o,a){var u,s;for(e||(e=2),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,u=r;u<s;u+=e)i[0]=t[u],i[1]=t[u+1],o(i,i,a),t[u]=i[0],t[u+1]=i[1];return t}e.exports=n;var i=t("./create")()},{"./create":233}],239:[function(t,e,r){function n(t,e){var r=new Float32Array(2);return r[0]=t,r[1]=e,r}e.exports=n},{}],240:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat2:t("./transformMat2"),transformMat2d:t("./transformMat2d"),transformMat3:t("./transformMat3"),transformMat4:t("./transformMat4"),forEach:t("./forEach")}},{"./add":230,"./clone":231,"./copy":232,"./create":233,"./cross":234,"./distance":235,"./divide":236,"./dot":237,"./forEach":238,"./fromValues":239,"./length":241,"./lerp":242,"./max":243,"./min":244,"./multiply":245,"./negate":246,"./normalize":247,"./random":248,"./scale":249,"./scaleAndAdd":250,"./set":251,"./squaredDistance":252,"./squaredLength":253,"./subtract":254,"./transformMat2":255,"./transformMat2d":256,"./transformMat3":257,"./transformMat4":258}],241:[function(t,e,r){function n(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}e.exports=n},{}],242:[function(t,e,r){function n(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}e.exports=n},{}],243:[function(t,e,r){function n(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}e.exports=n},{}],244:[function(t,e,r){function n(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}e.exports=n},{}],245:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}e.exports=n},{}],246:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t}e.exports=n},{}],247:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}e.exports=n},{}],248:[function(t,e,r){function n(t,e){e=e||1;var r=2*Math.random()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}e.exports=n},{}],249:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}e.exports=n},{}],250:[function(t,e,r){function n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}e.exports=n},{}],251:[function(t,e,r){function n(t,e,r){return t[0]=e,t[1]=r,t}e.exports=n},{}],252:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}e.exports=n},{}],253:[function(t,e,r){function n(t){var e=t[0],r=t[1];return e*e+r*r}e.exports=n},{}],254:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}e.exports=n},{}],255:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}e.exports=n},{}],256:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}e.exports=n},{}],257:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}e.exports=n},{}],258:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}e.exports=n},{}],259:[function(t,e,r){function n(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}e.exports=n},{}],260:[function(t,e,r){function n(t,e){var r=i(t[0],t[1],t[2]),n=i(e[0],e[1],e[2]);o(r,r),o(n,n);var u=a(r,n);return u>1?0:Math.acos(u)}e.exports=n;var i=t("./fromValues"),o=t("./normalize"),a=t("./dot")},{"./dot":267,"./fromValues":269,"./normalize":278}],261:[function(t,e,r){function n(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}e.exports=n},{}],262:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}e.exports=n},{}],263:[function(t,e,r){function n(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}e.exports=n},{}],264:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2];return t[0]=i*s-o*u,t[1]=o*a-n*s,t[2]=n*u-i*a,t}e.exports=n},{}],265:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}e.exports=n},{}],266:[function(t,e,r){function n(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}e.exports=n},{}],267:[function(t,e,r){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.exports=n},{}],268:[function(t,e,r){function n(t,e,r,n,o,a){var u,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,u=r;u<s;u+=e)i[0]=t[u],i[1]=t[u+1],i[2]=t[u+2],o(i,i,a),t[u]=i[0],t[u+1]=i[1],t[u+2]=i[2];return t}e.exports=n;var i=t("./create")()},{"./create":263}],269:[function(t,e,r){function n(t,e,r){var n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}e.exports=n},{}],270:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),angle:t("./angle"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformMat3:t("./transformMat3"),transformQuat:t("./transformQuat"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),forEach:t("./forEach")}},{"./add":259,"./angle":260,"./clone":261,"./copy":262,"./create":263,"./cross":264,"./distance":265,"./divide":266,"./dot":267,"./forEach":268,"./fromValues":269,"./inverse":271,"./length":272,"./lerp":273,"./max":274,"./min":275,"./multiply":276,"./negate":277,"./normalize":278,"./random":279,"./rotateX":280,"./rotateY":281,"./rotateZ":282,"./scale":283,"./scaleAndAdd":284,"./set":285,"./squaredDistance":286,"./squaredLength":287,"./subtract":288,"./transformMat3":289,"./transformMat4":290,"./transformQuat":291}],271:[function(t,e,r){function n(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}e.exports=n},{}],272:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}e.exports=n},{}],273:[function(t,e,r){function n(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}e.exports=n},{}],274:[function(t,e,r){function n(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}e.exports=n},{}],275:[function(t,e,r){function n(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}e.exports=n},{}],276:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}e.exports=n},{}],277:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}e.exports=n},{}],278:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}e.exports=n},{}],279:[function(t,e,r){function n(t,e){e=e||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}e.exports=n},{}],280:[function(t,e,r){function n(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}e.exports=n},{}],281:[function(t,e,r){function n(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}e.exports=n},{}],282:[function(t,e,r){function n(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}e.exports=n},{}],283:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}e.exports=n},{}],284:[function(t,e,r){function n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}e.exports=n},{}],285:[function(t,e,r){function n(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}e.exports=n},{}],286:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}e.exports=n},{}],287:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}e.exports=n},{}],288:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}e.exports=n},{}],289:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}e.exports=n},{}],290:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}e.exports=n},{}],291:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t}e.exports=n},{}],292:[function(t,e,r){function n(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}e.exports=n},{}],293:[function(t,e,r){function n(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}e.exports=n},{}],294:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}e.exports=n},{}],295:[function(t,e,r){function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}e.exports=n},{}],296:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}e.exports=n},{}],297:[function(t,e,r){function n(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}e.exports=n},{}],298:[function(t,e,r){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}e.exports=n},{}],299:[function(t,e,r){function n(t,e,r,n){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}e.exports=n},{}],300:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformQuat:t("./transformQuat")}},{"./add":292,"./clone":293,"./copy":294,"./create":295,"./distance":296,"./divide":297,"./dot":298,"./fromValues":299,"./inverse":301,"./length":302,"./lerp":303,"./max":304,"./min":305,"./multiply":306,"./negate":307,"./normalize":308,"./random":309,"./scale":310,"./scaleAndAdd":311,"./set":312,"./squaredDistance":313,"./squaredLength":314,"./subtract":315,"./transformMat4":316,"./transformQuat":317}],301:[function(t,e,r){function n(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}e.exports=n},{}],302:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}e.exports=n},{}],303:[function(t,e,r){function n(t,e,r,n){var i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=u+n*(r[3]-u),t}e.exports=n},{}],304:[function(t,e,r){function n(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}e.exports=n},{}],305:[function(t,e,r){function n(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}e.exports=n},{}],306:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}e.exports=n},{}],307:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}e.exports=n},{}],308:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}e.exports=n},{}],309:[function(t,e,r){function n(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),o(t,t,e),t}var i=t("./normalize"),o=t("./scale");e.exports=n},{"./normalize":308,"./scale":310}],310:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}e.exports=n},{}],311:[function(t,e,r){function n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}e.exports=n},{}],312:[function(t,e,r){function n(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}e.exports=n},{}],313:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}e.exports=n},{}],314:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}e.exports=n},{}],315:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}e.exports=n},{}],316:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}e.exports=n},{}],317:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t[3]=e[3],t}e.exports=n},{}],318:[function(t,e,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],319:[function(t,e,r){var n=t("glsl-tokenizer"),i=t("glsl-token-string"),o=t("glsl-token-inject-block");e.exports=function(t,e){if(!e)return t;var r=Object.keys(e);if(0===r.length)return t;for(var a=n(t),u=r.length-1;u>=0;u--){var s=r[u],l=String(e[s]);l&&(l=" "+l),o(a,{type:"preprocessor",data:"#define "+s+l})}return i(a)}},{"glsl-token-inject-block":320,"glsl-token-string":321,"glsl-tokenizer":328}],320:[function(t,e,r){function n(t,e){Array.isArray(e)||(e=[e]);var r=i(t),n=r>0?t[r-1]:null;n&&u.test(n.data)&&t.splice(r++,0,a),t.splice.apply(t,[r,0].concat(e));var o=r+e.length;return t[o]&&/[^\r\n]$/.test(t[o].data)&&t.splice(o,0,a),t}function i(t){for(var e=-1,r=0;r<t.length;r++){var n=t[r];if("preprocessor"===n.type)/^#(extension|version)/.test(n.data)&&(e=Math.max(e,r));else if("keyword"===n.type&&"precision"===n.data){var i=o(t,r);if(-1===i)throw new Error("precision statement not followed by any semicolons!");e=Math.max(e,i)}}return e+1}function o(t,e){for(var r=e;r<t.length;r++)if("operator"===t[r].type&&";"===t[r].data)return r;return-1}e.exports=n;var a={data:"\n",type:"whitespace"},u=/[^\r\n]$/},{}],321:[function(t,e,r){function n(t){for(var e=[],r=0;r<t.length;r++)"eof"!==t[r].type&&e.push(t[r].data);return e.join("")}e.exports=n},{}],322:[function(t,e,r){function n(t){function e(t){t.length&&R.push({type:D[B],data:t,position:V,line:F,column:G})}function r(t){Q=0,P=(q+=t).length;for(var e;z=q[Q],Q<P;){switch(e=Q,B){case f:Q=T();break;case h:Q=L();break;case p:Q=A();break;case d:Q=E();break;case g:Q=_();break;case x:Q=O();break;case y:Q=S();break;case c:Q=C();break;case b:Q=N();break;case l:Q=j()}if(e!==Q)switch(q[e]){case"\n":G=0,++F;break;default:++G}}return U+=Q,q=q.slice(Q),R}function n(t){return Y.length&&e(Y.join("")),B=w,e("(eof)"),R}function j(){return Y=Y.length?[]:Y,"/"===k&&"*"===z?(V=U+Q-1,B=f,k=z,Q+1):"/"===k&&"/"===z?(V=U+Q-1,B=h,k=z,Q+1):"#"===z?(B=p,V=U+Q,Q):/\s/.test(z)?(B=b,V=U+Q,Q):(W=/\d/.test(z),H=/[^\w_]/.test(z),V=U+Q,B=W?g:H?d:c,Q)}function N(){return/[^\s]/g.test(z)?(e(Y.join("")),B=l,Q):(Y.push(z),k=z,Q+1)}function A(){return"\r"!==z&&"\n"!==z||"\\"===k?(Y.push(z),k=z,Q+1):(e(Y.join("")),B=l,Q)}function L(){return A()}function T(){return"/"===z&&"*"===k?(Y.push(z),e(Y.join("")),B=l,Q+1):(Y.push(z),k=z,Q+1)}function E(){if("."===k&&/\d/.test(z))return B=y,Q;if("/"===k&&"*"===z)return B=f,Q;if("/"===k&&"/"===z)return B=h,Q;if("."===z&&Y.length){for(;I(Y););return B=y,Q}if(";"===z||")"===z||"("===z){if(Y.length)for(;I(Y););return e(z),B=l,Q+1}var t=2===Y.length&&"="!==z;if(/[\w_\d\s]/.test(z)||t){for(;I(Y););return B=l,Q}return Y.push(z),k=z,Q+1}function I(t){for(var r,n,i=0;;){if(r=o.indexOf(t.slice(0,t.length+i).join("")),n=o[r],-1===r){if(i--+t.length>0)continue;n=t.slice(0,1).join("")}return e(n),V+=n.length,(Y=Y.slice(n.length)).length}}function O(){return/[^a-fA-F0-9]/.test(z)?(e(Y.join("")),B=l,Q):(Y.push(z),k=z,Q+1)}function _(){return"."===z?(Y.push(z),B=y,k=z,Q+1):/[eE]/.test(z)?(Y.push(z),B=y,k=z,Q+1):"x"===z&&1===Y.length&&"0"===Y[0]?(B=x,Y.push(z),k=z,Q+1):/[^\d]/.test(z)?(e(Y.join("")),B=l,Q):(Y.push(z),k=z,Q+1)}function S(){return"f"===z&&(Y.push(z),k=z,Q+=1),/[eE]/.test(z)?(Y.push(z),k=z,Q+1):"-"===z&&/[eE]/.test(k)?(Y.push(z),k=z,Q+1):/[^\d]/.test(z)?(e(Y.join("")),B=l,Q):(Y.push(z),k=z,Q+1)}function C(){if(/[^\d\w_]/.test(z)){var t=Y.join("");return B=Z.indexOf(t)>-1?v:X.indexOf(t)>-1?M:m,e(Y.join("")),B=l,Q}return Y.push(z),k=z,Q+1}var z,k,P,Q=0,U=0,B=l,Y=[],R=[],F=1,G=0,V=0,W=!1,H=!1,q="",X=a,Z=i;return"300 es"===(t=t||{}).version&&(X=s,Z=u),function(t){return R=[],null!==t?r(t.replace?t.replace(/\r\n/g,"\n"):t):n()}}e.exports=n;var i=t("./lib/literals"),o=t("./lib/operators"),a=t("./lib/builtins"),u=t("./lib/literals-300es"),s=t("./lib/builtins-300es"),l=999,c=9999,f=0,h=1,p=2,d=3,g=4,y=5,m=6,M=7,v=8,b=9,w=10,x=11,D=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":324,"./lib/builtins-300es":323,"./lib/literals":326,"./lib/literals-300es":325,"./lib/operators":327}],323:[function(t,e,r){var n=t("./builtins");n=n.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":324}],324:[function(t,e,r){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],325:[function(t,e,r){var n=t("./literals");e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":326}],326:[function(t,e,r){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],327:[function(t,e,r){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],328:[function(t,e,r){function n(t,e){var r=i(e),n=[];return n=n.concat(r(t)),n=n.concat(r(null))}var i=t("./index");e.exports=n},{"./index":322}],329:[function(t,e,r){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")}},{}],330:[function(t,e,r){(function(){var t,r,n,i,o,a,u,s,l,c,f,h,p,d,g,y,m,M,v,b,w;h={R:[3.240969941904521,-1.537383177570093,-.498610760293],G:[-.96924363628087,1.87596750150772,.041555057407175],B:[.055630079696993,-.20397695888897,1.056971514242878]},p={X:[.41239079926595,.35758433938387,.18048078840183],Y:[.21263900587151,.71516867876775,.072192315360733],Z:[.019330818715591,.11919477979462,.95053215224966]},y=.19783000664283,m=.46831999493879,c=903.2962962,a=.0088564516,s=function(t){var e,r,n,i,o,u,s,l,f,p,d,g,y,m,M,v,b,w;for(M=(m=Math.pow(t+16,3)/1560896)>a?m:t/c,y=[],n=0,o=(p=["R","G","B"]).length;n<o;n++)for(r=p[n],d=h[r],s=d[0],l=d[1],f=d[2],g=[0,1],i=0,u=g.length;i<u;i++)v=g[i],b=(284517*s-94839*f)*M,w=(838422*f+769860*l+731718*s)*t*M-769860*v*t,e=(632260*f-126452*l)*M+126452*v,y.push([b/e,w/e]);return y},l=function(t,e){return(t[1]-e[1])/(e[0]-t[0])},i=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},f=function(t,e){var r,n,i;return i=e[0],r=e[1],n=r/(Math.sin(t)-i*Math.cos(t)),n<0?null:n},g=function(t){var e,r,n,o,a,u,c,f;for(o=[],r=0,n=(u=s(t)).length;r<n;r++)c=u[r],a=c[0],e=c[1],f=l([a,e],[-1/a,0]),o.push(i([f,e+f*a]));return Math.min.apply(Math,o)},d=function(t,e){var r,n,i,o,a,u,l;for(r=e/360*Math.PI*2,a=[],n=0,o=(l=s(t)).length;n<o;n++)u=l[n],null!==(i=f(r,u))&&a.push(i);return Math.min.apply(Math,a)},o=function(t,e){var r,n,i,o;for(o=0,r=n=0,i=t.length-1;0<=i?n<=i:n>=i;r=0<=i?++n:--n)o+=t[r]*e[r];return o},b=function(t,e){var r;return r=Math.pow(10,e),Math.round(t*r)/r},u=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},w=function(t){var e;return e=.055,t>.04045?Math.pow((t+e)/(1+e),2.4):t/12.92},M=function(t){var e,r,n,i,o,a,u;for(t=function(){var e,r,n;for(n=[],e=0,r=t.length;e<r;e++)a=t[e],n.push(b(a,3));return n}(),r=0,i=t.length;r<i;r++){if((e=t[r])<-1e-4||e>1.0001)throw new Error("Illegal rgb value: "+e);e<0&&(e=0),e>1&&(e=1)}for(u=[],n=0,o=t.length;n<o;n++)e=t[n],u.push(Math.round(255*e));return u},(n={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}}).xyz.rgb=function(t){var e,r,n;return n=u(o(h.R,t)),r=u(o(h.G,t)),e=u(o(h.B,t)),[n,r,e]},n.rgb.xyz=function(t){var e,r,n,i,a,u,s;return n=t[0],r=t[1],e=t[2],s=[w(n),w(r),w(e)],i=o(p.X,s),a=o(p.Y,s),u=o(p.Z,s),[i,a,u]},r=function(t){return t<=a?t/1*c:116*Math.pow(t/1,1/3)-16},t=function(t){return t<=8?1*t/c:1*Math.pow((t+16)/116,3)},n.xyz.luv=function(t){var e,n,i,o,a,u,s,l;return o=t[0],a=t[1],u=t[2],s=4*o/(o+15*a+3*u),l=9*a/(o+15*a+3*u),0===(e=r(a))?[0,0,0]:(n=13*e*(s-y),i=13*e*(l-m),[e,n,i])},n.luv.xyz=function(e){var r,n,i,o,a,u,s,l;return r=e[0],n=e[1],i=e[2],0===r?[0,0,0]:(s=n/(13*r)+y,l=i/(13*r)+m,a=t(r),o=0-9*a*s/((s-4)*l-s*l),u=(9*a-15*l*a-l*o)/(3*l),[o,a,u])},n.luv.lch=function(t){var e,r,n,i,o,a;return i=t[0],o=t[1],a=t[2],e=Math.pow(Math.pow(o,2)+Math.pow(a,2),.5),n=Math.atan2(a,o),(r=360*n/2/Math.PI)<0&&(r=360+r),[i,e,r]},n.lch.luv=function(t){var e,r,n,i,o,a;return i=t[0],e=t[1],r=t[2],n=r/360*2*Math.PI,o=Math.cos(n)*e,a=Math.sin(n)*e,[i,o,a]},n.husl.lch=function(t){var e,r,n,i,o;return r=t[0],i=t[1],(n=t[2])>99.9999999?[100,0,r]:n<1e-8?[0,0,r]:(o=d(n,r),e=o/100*i,[n,e,r])},n.lch.husl=function(t){var e,r,n,i,o;return n=t[0],e=t[1],r=t[2],n>99.9999999?[r,0,100]:n<1e-8?[r,0,0]:(o=d(n,r),i=e/o*100,[r,i,n])},n.huslp.lch=function(t){var e,r,n,i,o;return r=t[0],i=t[1],(n=t[2])>99.9999999?[100,0,r]:n<1e-8?[0,0,r]:(o=g(n),e=o/100*i,[n,e,r])},n.lch.huslp=function(t){var e,r,n,i,o;return n=t[0],e=t[1],r=t[2],n>99.9999999?[r,0,100]:n<1e-8?[r,0,0]:(o=g(n),i=e/o*100,[r,i,n])},n.rgb.hex=function(t){var e,r,n,i;for(r="#",n=0,i=(t=M(t)).length;n<i;n++)e=t[n],1===(e=e.toString(16)).length&&(e="0"+e),r+=e;return r},n.hex.rgb=function(t){var e,r,n,i,o;for("#"===t.charAt(0)&&(t=t.substring(1,7)),o=[],e=0,r=(i=[t.substring(0,2),t.substring(2,4),t.substring(4,6)]).length;e<r;e++)n=i[e],o.push(parseInt(n,16)/255);return o},n.lch.rgb=function(t){return n.xyz.rgb(n.luv.xyz(n.lch.luv(t)))},n.rgb.lch=function(t){return n.luv.lch(n.xyz.luv(n.rgb.xyz(t)))},n.husl.rgb=function(t){return n.lch.rgb(n.husl.lch(t))},n.rgb.husl=function(t){return n.lch.husl(n.rgb.lch(t))},n.huslp.rgb=function(t){return n.lch.rgb(n.huslp.lch(t))},n.rgb.huslp=function(t){return n.lch.huslp(n.rgb.lch(t))},(v={}).fromRGB=function(t,e,r){return n.rgb.husl([t,e,r])},v.fromHex=function(t){return n.rgb.husl(n.hex.rgb(t))},v.toRGB=function(t,e,r){return n.husl.rgb([t,e,r])},v.toHex=function(t,e,r){return n.rgb.hex(n.husl.rgb([t,e,r]))},v.p={},v.p.toRGB=function(t,e,r){return n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([t,e,r]))))},v.p.toHex=function(t,e,r){return n.rgb.hex(n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([t,e,r])))))},v.p.fromRGB=function(t,e,r){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz([t,e,r]))))},v.p.fromHex=function(t){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz(n.hex.rgb(t)))))},v._conv=n,v._round=b,v._rgbPrepare=M,v._getBounds=s,v._maxChromaForLH=d,v._maxSafeChromaForL=g,void 0!==e&&null!==e||"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof requirejs&&null!==requirejs||(this.HUSL=v),void 0!==e&&null!==e&&(e.exports=v),"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.husl=v),"undefined"!=typeof requirejs&&null!==requirejs&&!1&&!0&&(void 0)(v)}).call(this)},{}],331:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,l=s>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(e*s-1)*Math.pow(2,i),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*g}},{}],332:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],333:[function(t,e,r){"use strict";function n(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}function i(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function o(t,e){var r=d(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function a(t,e){var r=t.intervals([]);r.push(e),o(t,r)}function u(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?M:(r.splice(n,1),o(t,r),v)}function s(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function l(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function c(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function f(t,e){return t-e}function h(t,e){return t[0]-e[0]||t[1]-e[1]}function p(t,e){return t[1]-e[1]||t[0]-e[0]}function d(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(f);for(var i=e[e.length>>1],o=[],a=[],u=[],r=0;r<t.length;++r){var s=t[r];s[1]<i?o.push(s):i<s[0]?a.push(s):u.push(s)}var l=u,c=u.slice();return l.sort(h),c.sort(p),new n(i,d(o),d(a),l,c)}function g(t){this.root=t}function y(t){return new g(t&&0!==t.length?d(t):null)}var m=t("binary-search-bounds"),M=0,v=1;e.exports=y;var b=n.prototype;b.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},b.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?a(this,t):this.left.insert(t):this.left=d([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?a(this,t):this.right.insert(t):this.right=d([t]);else{var r=m.ge(this.leftPoints,t,h),n=m.ge(this.rightPoints,t,p);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},b.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?u(this,t):2===(a=this.left.remove(t))?(this.left=null,this.count-=1,v):(a===v&&(this.count-=1),a):M;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?u(this,t):2===(a=this.right.remove(t))?(this.right=null,this.count-=1,v):(a===v&&(this.count-=1),a):M;if(1===this.count)return this.leftPoints[0]===t?2:M;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var o=this.left,a=this.right;r.count-=n.count,r.right=n.left,n.left=o,n.right=a}i(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return v}for(o=m.ge(this.leftPoints,t,h);o<this.leftPoints.length&&this.leftPoints[o][0]===t[0];++o)if(this.leftPoints[o]===t){this.count-=1,this.leftPoints.splice(o,1);for(a=m.ge(this.rightPoints,t,p);a<this.rightPoints.length&&this.rightPoints[a][1]===t[1];++a)if(this.rightPoints[a]===t)return this.rightPoints.splice(a,1),v}return M},b.queryPoint=function(t,e){if(t<this.mid)return this.left&&(r=this.left.queryPoint(t,e))?r:s(this.leftPoints,t,e);if(t>this.mid){if(this.right){var r=this.right.queryPoint(t,e);if(r)return r}return l(this.rightPoints,t,e)}return c(this.leftPoints,e)},b.queryInterval=function(t,e,r){if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right){var n=this.right.queryInterval(t,e,r);if(n)return n}return e<this.mid?s(this.leftPoints,e,r):t>this.mid?l(this.rightPoints,t,r):c(this.leftPoints,r)};var w=g.prototype;w.insert=function(t){this.root?this.root.insert(t):this.root=new n(t[0],null,null,[t],[t])},w.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==M}return!1},w.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},w.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":73}],334:[function(t,e,r){"use strict";function n(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e}e.exports=n},{}],335:[function(t,e,r){"use strict";function n(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}e.exports=n},{}],336:[function(t,e,r){"use strict";e.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},{}],337:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}e.exports=function(t){return null!=t&&(n(t)||i(t)||!!t._isBuffer)}},{}],338:[function(t,e,r){var n=(r=e.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var r=String(t),o=n[r.toLowerCase()];return o||((o=i[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0))}).code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=r.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var a=r.names=r.title={};for(o in n)a[n[o]]=o;for(var u in i)n[u]=i[u]},{}],339:[function(t,e,r){function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function i(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function o(t,e){var r=C(t)||y(t)?i(t.length,String):[],n=r.length,o=!!n;for(var a in t)!e&&!I.call(t,a)||o&&("length"==a||f(a,n))||r.push(a);return r}function a(t,e,r,n){return void 0===t||g(t,E[r])&&!I.call(n,r)?e:t}function u(t,e,r){var n=t[e];I.call(t,e)&&g(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function s(t){if(!w(t))return d(t);var e=p(t),r=[];for(var n in t)("constructor"!=n||!e&&I.call(t,n))&&r.push(n);return r}function l(t,e){return e=S(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=S(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=a,n(t,this,u)}}function c(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n?n(r[a],t[a],a,r,t):void 0;u(r,a,void 0===s?t[a]:s)}return r}function f(t,e){return!!(e=null==e?j:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function h(t,e,r){if(!w(r))return!1;var n=typeof e;return!!("number"==n?m(r)&&f(e,r.length):"string"==n&&e in r)&&g(r[e],t)}function p(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||E)}function d(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function g(t,e){return t===e||t!==t&&e!==e}function y(t){return M(t)&&I.call(t,"callee")&&(!_.call(t,"callee")||O.call(t)==N)}function m(t){return null!=t&&b(t.length)&&!v(t)}function M(t){return x(t)&&m(t)}function v(t){var e=w(t)?O.call(t):"";return e==A||e==L}function b(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=j}function w(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){return!!t&&"object"==typeof t}function D(t){return m(t)?o(t,!0):s(t)}var j=9007199254740991,N="[object Arguments]",A="[object Function]",L="[object GeneratorFunction]",T=/^(?:0|[1-9]\d*)$/,E=Object.prototype,I=E.hasOwnProperty,O=E.toString,_=E.propertyIsEnumerable,S=Math.max,C=Array.isArray,z=function(t){return l(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&h(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var u=r[n];u&&t(e,u,n,o)}return e})}(function(t,e,r,n){c(e,D(e),t,n)}),k=l(function(t){return t.push(void 0,a),n(z,void 0,t)});e.exports=k},{}],340:[function(t,e,r){function n(t,e,r){return t<e?e:t>r?r:t}function i(t,e,r,n){if(!(this instanceof i))return new i(t,e,r,n);this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||i.DefaultOrder}e.exports=i,i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.DefaultOrder="XYZ",i.prototype={_x:0,_y:0,_z:0,_order:i.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e){var r=t.elements,i=r[0],o=r[4],a=r[8],u=r[1],s=r[5],l=r[9],c=r[2],f=r[6],h=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(f,s),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(a,h),this._z=Math.atan2(u,s)):(this._y=Math.atan2(-c,i),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-o,s)):(this._y=0,this._z=Math.atan2(u,i))):"ZYX"===e?(this._y=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(f,h),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-o,s))):"YZX"===e?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,s),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,h))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,s),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new i(this._x,this._y,this._z,this._order)}}},{}],341:[function(t,e,r){function n(t){for(var e=[],r=[],n=0,i=0;n<t.length;)r.push([i++,i++,i++]),e.push([t[n++],t[n++],t[n++]],[t[n++],t[n++],t[n++]],[t[n++],t[n++],t[n++]]);return{positions:e,cells:r}}e.exports=n},{}],342:[function(t,e,r){"use strict";function n(t,e){function r(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==y.alt,y.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==y.shift,y.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==y.control,y.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==y.meta,y.meta=!!t.metaKey),e}function n(t,n){var o=i.x(n),a=i.y(n);"buttons"in n&&(t=0|n.buttons),(t!==p||o!==d||a!==g||r(n))&&(p=0|t,d=o||0,g=a||0,e&&e(p,d,g,y))}function o(t){n(0,t)}function a(){(p||d||g||y.shift||y.alt||y.meta||y.control)&&(d=g=0,p=0,y.shift=y.alt=y.control=y.meta=!1,e&&e(0,0,0,y))}function u(t){r(t)&&e&&e(p,d,g,y)}function s(t){0===i.buttons(t)?n(0,t):n(p,t)}function l(t){n(p|i.buttons(t),t)}function c(t){n(p&~i.buttons(t),t)}function f(){m||(m=!0,t.addEventListener("mousemove",s),t.addEventListener("mousedown",l),t.addEventListener("mouseup",c),t.addEventListener("mouseleave",o),t.addEventListener("mouseenter",o),t.addEventListener("mouseout",o),t.addEventListener("mouseover",o),t.addEventListener("blur",a),t.addEventListener("keyup",u),t.addEventListener("keydown",u),t.addEventListener("keypress",u),t!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function h(){m&&(m=!1,t.removeEventListener("mousemove",s),t.removeEventListener("mousedown",l),t.removeEventListener("mouseup",c),t.removeEventListener("mouseleave",o),t.removeEventListener("mouseenter",o),t.removeEventListener("mouseout",o),t.removeEventListener("mouseover",o),t.removeEventListener("blur",a),t.removeEventListener("keyup",u),t.removeEventListener("keydown",u),t.removeEventListener("keypress",u),t!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}e||(e=t,t=window);var p=0,d=0,g=0,y={shift:!1,alt:!1,control:!1,meta:!1},m=!1;f();var M={element:t};return Object.defineProperties(M,{enabled:{get:function(){return m},set:function(t){t?f():h()},enumerable:!0},buttons:{get:function(){return p},enumerable:!0},x:{get:function(){return d},enumerable:!0},y:{get:function(){return g},enumerable:!0},mods:{get:function(){return y},enumerable:!0}}),M}e.exports=n;var i=t("mouse-event")},{"mouse-event":344}],343:[function(t,e,r){function n(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,o=t.clientY||0,a=i(e);return r[0]=n-a.left,r[1]=o-a.top,r}function i(t){return t===window||t===document||t===document.body?o:t.getBoundingClientRect()}var o={left:0,top:0};e.exports=n},{}],344:[function(t,e,r){"use strict";function n(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(1===e)return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0}function i(t){return t.target||t.srcElement||window}function o(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0}function a(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}r.buttons=n,r.element=i,r.x=o,r.y=a},{}],345:[function(t,e,r){"use strict";function n(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=i("ex",t),o=function(t){r&&t.preventDefault();var i=t.deltaX||0,o=t.deltaY||0,a=t.deltaZ||0,u=1;switch(t.deltaMode){case 1:u=n;break;case 2:u=window.innerHeight}if(i*=u,o*=u,a*=u,i||o||a)return e(i,o,a,t)};return t.addEventListener("wheel",o),o}var i=t("to-px");e.exports=n},{"to-px":419}],346:[function(t,e,r){function n(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*f;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*l;case"minutes":case"minute":case"mins":case"min":case"m":return r*s;case"seconds":case"second":case"secs":case"sec":case"s":return r*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function i(t){return t>=c?Math.round(t/c)+"d":t>=l?Math.round(t/l)+"h":t>=s?Math.round(t/s)+"m":t>=u?Math.round(t/u)+"s":t+"ms"}function o(t){return a(t,c,"day")||a(t,l,"hour")||a(t,s,"minute")||a(t,u,"second")||t+" ms"}function a(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var u=1e3,s=60*u,l=60*s,c=24*l,f=365.25*c;e.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return n(t);if("number"===r&&!1===isNaN(t))return e.long?o(t):i(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],347:[function(t,e,r){"use strict";e.exports=function(t,e,r){return r>e?Math.max(Math.min(t,r),e):Math.max(Math.min(t,e),r)}},{}],348:[function(t,e,r){"use strict";e.exports=function(t,e,r){if(void 0===r&&(r=e,e=0),e>r){var n=r;r=e,e=n}var i=r-e;return(t=(t+e)%i-e)<e&&(t+=i),t>r&&(t-=i),t}},{}],349:[function(t,e,r){"use strict";function n(t){return"a"+t}function i(t){return"d"+t}function o(t,e){return"c"+t+"_"+e}function a(t){return"s"+t}function u(t,e){return"t"+t+"_"+e}function s(t){return"o"+t}function l(t){return"x"+t}function c(t){return"p"+t}function f(t,e){return"d"+t+"_"+e}function h(t){return"i"+t}function p(t,e){return"u"+t+"_"+e}function d(t){return"b"+t}function g(t){return"y"+t}function y(t){return"e"+t}function m(t){return"v"+t}function M(t,e,r){for(var n=0,i=0;i<t;++i)e&1<<i&&(n|=1<<r[i]);return n}function v(t,e,r,v,b,T){function E(t,e){Q.push("for(",h(b[t]),"=",e,";",h(b[t]),"<",a(b[t]),";","++",h(b[t]),"){")}function I(t){for(var e=0;e<z;++e)Q.push(c(e),"+=",p(e,b[t]),";");Q.push("}")}function O(t){for(r=t-1;r>=0;--r)E(r,0);for(var e=[],r=0;r<z;++r)T[r]?e.push(i(r)+".get("+c(r)+")"):e.push(i(r)+"["+c(r)+"]");for(r=0;r<v;++r)e.push(l(r));Q.push(D,"[",A,"++]=phase(",e.join(),");");for(r=0;r<t;++r)I(r);for(var n=0;n<z;++n)Q.push(c(n),"+=",p(n,b[t]),";")}function _(t){for(r=0;r<z;++r)T[r]?Q.push(o(r,0),"=",i(r),".get(",c(r),");"):Q.push(o(r,0),"=",i(r),"[",c(r),"];");for(var e=[],r=0;r<z;++r)e.push(o(r,0));for(r=0;r<v;++r)e.push(l(r));Q.push(d(0),"=",D,"[",A,"]=phase(",e.join(),");");for(a=1;a<1<<k;++a)Q.push(d(a),"=",D,"[",A,"+",y(a),"];");for(var n=[],a=1;a<1<<k;++a)n.push("("+d(0)+"!=="+d(a)+")");Q.push("if(",n.join("||"),"){");for(var u=[],r=0;r<k;++r)u.push(h(r));for(r=0;r<z;++r){u.push(o(r,0));for(a=1;a<1<<k;++a)T[r]?Q.push(o(r,a),"=",i(r),".get(",c(r),"+",f(r,a),");"):Q.push(o(r,a),"=",i(r),"[",c(r),"+",f(r,a),"];"),u.push(o(r,a))}for(r=0;r<1<<k;++r)u.push(d(r));for(r=0;r<v;++r)u.push(l(r));Q.push("vertex(",u.join(),");",m(0),"=",x,"[",A,"]=",j,"++;");for(var s=(1<<k)-1,p=d(s),a=0;a<k;++a)if(0==(t&~(1<<a))){for(var g=s^1<<a,M=d(g),b=[],w=g;w>0;w=w-1&g)b.push(x+"["+A+"+"+y(w)+"]");b.push(m(0));for(w=0;w<z;++w)1&a?b.push(o(w,s),o(w,g)):b.push(o(w,g),o(w,s));1&a?b.push(p,M):b.push(M,p);for(w=0;w<v;++w)b.push(l(w));Q.push("if(",p,"!==",M,"){","face(",b.join(),")}")}Q.push("}",A,"+=1;")}function S(){for(var t=1;t<1<<k;++t)Q.push(L,"=",y(t),";",y(t),"=",g(t),";",g(t),"=",L,";")}function C(t,e){if(t<0)_(e);else{O(t),Q.push("if(",a(b[t]),">0){",h(b[t]),"=1;"),C(t-1,e|1<<b[t]);for(var r=0;r<z;++r)Q.push(c(r),"+=",p(r,b[t]),";");t===k-1&&(Q.push(A,"=0;"),S()),E(t,2),C(t-1,e),t===k-1&&(Q.push("if(",h(b[k-1]),"&1){",A,"=0;}"),S()),I(t),Q.push("}")}}var z=T.length,k=b.length;if(k<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var P="extractContour"+b.join("_"),Q=[],U=[],B=[],Y=0;Y<z;++Y)B.push(n(Y));for(Y=0;Y<v;++Y)B.push(l(Y));for(Y=0;Y<k;++Y)U.push(a(Y)+"="+n(0)+".shape["+Y+"]|0");for(Y=0;Y<z;++Y){U.push(i(Y)+"="+n(Y)+".data",s(Y)+"="+n(Y)+".offset|0");for(W=0;W<k;++W)U.push(u(Y,W)+"="+n(Y)+".stride["+W+"]|0")}for(Y=0;Y<z;++Y){U.push(c(Y)+"="+s(Y)),U.push(o(Y,0));for(W=1;W<1<<k;++W){for(var R=[],F=0;F<k;++F)W&1<<F&&R.push("-"+u(Y,F));U.push(f(Y,W)+"=("+R.join("")+")|0"),U.push(o(Y,W)+"=0")}}for(Y=0;Y<z;++Y)for(W=0;W<k;++W){var G=[u(Y,b[W])];W>0&&G.push(u(Y,b[W-1])+"*"+a(b[W-1])),U.push(p(Y,b[W])+"=("+G.join("-")+")|0")}for(Y=0;Y<k;++Y)U.push(h(Y)+"=0");U.push(j+"=0");for(var V=["2"],Y=k-2;Y>=0;--Y)V.push(a(b[Y]));U.push(N+"=("+V.join("*")+")|0",D+"=mallocUint32("+N+")",x+"=mallocUint32("+N+")",A+"=0"),U.push(d(0)+"=0");for(var W=1;W<1<<k;++W){for(var H=[],q=[],F=0;F<k;++F)W&1<<F&&(0===q.length?H.push("1"):H.unshift(q.join("*"))),q.push(a(b[F]));var X="";H[0].indexOf(a(b[k-2]))<0&&(X="-");var Z=M(k,W,b);U.push(y(Z)+"=(-"+H.join("-")+")|0",g(Z)+"=("+X+H.join("-")+")|0",d(Z)+"=0")}U.push(m(0)+"=0",L+"=0"),C(k-1,0),Q.push("freeUint32(",x,");freeUint32(",D,");");var K=["'use strict';","function ",P,"(",B.join(),"){","var ",U.join(),";",Q.join(""),"}","return ",P].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",K)(t,e,r,w.mallocUint32,w.freeUint32)}function b(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var n=t.arrayArguments||1;n<1&&e("Must have at least one array argument");var i=t.scalarArguments||0;i<0&&e("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&e("Must specify vertex creation function"),"function"!=typeof t.cell&&e("Must specify cell creation function"),"function"!=typeof t.phase&&e("Must specify phase function");for(var o=t.getters||[],a=new Array(n),u=0;u<n;++u)o.indexOf(u)>=0?a[u]=!0:a[u]=!1;return v(t.vertex,t.cell,t.phase,i,r,a)}var w=t("typedarray-pool");e.exports=b;var x="V",D="P",j="N",N="Q",A="X",L="T"},{"typedarray-pool":424}],350:[function(t,e,r){function n(t,e){return t[0]-e[0]}function i(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(n);var i=new Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}function o(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return(M=new Function(o))()}if(0===e){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return(M=new Function("TrivialArray",o))(f[t][0])}var o=["'use strict'"],a=s(e),u=a.map(function(t){return"i"+t}),l="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),c=a.map(function(t){return"b"+t}).join(","),h=a.map(function(t){return"c"+t}).join(",");o.push("function "+r+"(a,"+c+","+h+",d){this.data=a","this.shape=["+c+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+r+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),n?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),n?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+l+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var p=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),d=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");for(var g=new Array(e),y=new Array(e),m=0;m<e;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var M=new Function("CTOR_LIST","ORDER",o.join("\n"));return M(f[t],i)}function a(t){if(l(t))return"buffer";if(c)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function u(t,e,r,n){if(void 0===t)return(h=f.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var i=e.length;if(void 0===r){r=new Array(i);for(var u=i-1,s=1;u>=0;--u)r[u]=s,s*=e[u]}if(void 0===n){n=0;for(u=0;u<i;++u)r[u]<0&&(n-=(e[u]-1)*r[u])}for(var l=a(t),c=f[l];c.length<=i+1;)c.push(o(l,c.length-1));var h=c[i+1];return h(t,e,r,n)}var s=t("iota-array"),l=t("is-buffer"),c="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=u},{"iota-array":335,"is-buffer":337}],351:[function(t,e,r){"use strict";function n(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-o:o;var r=i.hi(t),n=i.lo(t);return e>t==t>0?n===a?(r+=1,n=0):n+=1:0===n?(n=a,r-=1):n-=1,i.pack(n,r)}var i=t("double-bits"),o=Math.pow(2,-1074),a=-1>>>0;e.exports=n},{"double-bits":148}],352:[function(t,e,r){r.vertexNormals=function(t,e,r){for(var n=e.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a)i[a]=[0,0,0];for(a=0;a<t.length;++a)for(var u=t[a],s=0,l=u[u.length-1],c=u[0],f=0;f<u.length;++f){s=l,l=c,c=u[(f+1)%u.length];for(var h=e[s],p=e[l],d=e[c],g=new Array(3),y=0,m=new Array(3),M=0,v=0;v<3;++v)g[v]=h[v]-p[v],y+=g[v]*g[v],m[v]=d[v]-p[v],M+=m[v]*m[v];if(y*M>o)for(var b=i[l],w=1/Math.sqrt(y*M),v=0;v<3;++v){var x=(v+1)%3,D=(v+2)%3;b[v]+=w*(m[x]*g[D]-m[D]*g[x])}}for(a=0;a<n;++a){for(var b=i[a],j=0,v=0;v<3;++v)j+=b[v]*b[v];if(j>o)for(var w=1/Math.sqrt(j),v=0;v<3;++v)b[v]*=w;else for(v=0;v<3;++v)b[v]=0}return i},r.faceNormals=function(t,e,r){for(var n=t.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a){for(var u=t[a],s=new Array(3),l=0;l<3;++l)s[l]=e[u[l]];for(var c=new Array(3),f=new Array(3),l=0;l<3;++l)c[l]=s[1][l]-s[0][l],f[l]=s[2][l]-s[0][l];for(var h=new Array(3),p=0,l=0;l<3;++l){var d=(l+1)%3,g=(l+2)%3;h[l]=c[d]*f[g]-c[g]*f[d],p+=h[l]*h[l]}p=p>o?1/Math.sqrt(p):0;for(l=0;l<3;++l)h[l]*=p;i[a]=h}return i}},{}],353:[function(t,e,r){"use strict";function n(t){function e(){var t=n.projection,e=n.direction,i=n.position,o=n.viewport,l=n.view,c=n.near,h=n.far,p=n.up,d=o[0],g=o[1],y=o[2],m=o[3];return u(t,d,y,g,m,c,h),s(r,i,e),a(l,i,r,p),f(),n}t&&"object"==typeof t||(t={});var r=[0,0,0],n=i(t),f=n.update;return n.near=o(t.near,l),n.far=o(t.far,c),e(),n.update=e,n}var i=t("perspective-camera/lib/camera-base"),o=t("defined"),a=t("gl-mat4/lookAt"),u=t("gl-mat4/ortho"),s=t("gl-vec3/add"),l=100,c=1;e.exports=n},{defined:146,"gl-mat4/lookAt":190,"gl-mat4/ortho":192,"gl-vec3/add":259,"perspective-camera/lib/camera-base":359}],354:[function(t,e,r){e.exports=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],355:[function(t,e,r){(function(t){(function(){var r,n,i,o,a,u;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-a)/1e6},n=t.hrtime,r=function(){var t;return 1e9*(t=n())[0]+t[1]},o=r(),u=1e9*t.uptime(),a=o-u):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t("_process"))},{_process:375}],356:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e<i){for(var r=1,n=0;n<e;++n)for(s=0;s<n;++s)if(t[n]<t[s])r=-r;else if(t[n]===t[s])return 0;return r}for(var a=o.mallocUint8(e),n=0;n<e;++n)a[n]=0;for(var r=1,n=0;n<e;++n)if(!a[n]){var u=1;a[n]=1;for(var s=t[n];s!==n;s=t[s]){if(a[s])return o.freeUint8(a),0;u+=1,a[s]=1}1&u||(r=-r)}return o.freeUint8(a),r}e.exports=n;var i=32,o=t("typedarray-pool")},{"typedarray-pool":424}],357:[function(t,e,r){"use strict";function n(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,n,i,u=o.mallocUint32(e),s=o.mallocUint32(e),l=0;for(a(t,s),i=0;i<e;++i)u[i]=t[i];for(i=e-1;i>0;--i)n=s[i],r=u[i],u[i]=u[n],u[n]=r,s[i]=s[r],s[r]=n,l=(l+r)*i;return o.freeUint32(s),o.freeUint32(u),l}function i(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var n,i,o,a=1;for((r=r||new Array(t))[0]=0,o=1;o<t;++o)r[o]=o,a=a*o|0;for(o=t-1;o>0;--o)n=e/a|0,e=e-n*a|0,a=a/o|0,i=0|r[o],r[o]=0|r[n],r[n]=0|i;return r}var o=t("typedarray-pool"),a=t("invert-permutation");r.rank=n,r.unrank=i},{"invert-permutation":334,"typedarray-pool":424}],358:[function(t,e,r){e.exports=t("./lib/camera-perspective")},{"./lib/camera-perspective":361}],359:[function(t,e,r){var n=t("object-assign"),i=t("ray-3d"),o=t("camera-project"),a=t("camera-unproject"),u=t("./camera-look-at"),s=t("camera-picking-ray"),l=t("gl-vec3/add"),c=t("gl-mat4/multiply"),f=t("gl-mat4/invert"),h=t("gl-mat4/identity"),p=t("gl-vec3/set");e.exports=function(t){function e(){if(c(v.projView,v.projection,v.view),!f(v.invProjView,v.projView))throw new Error("camera projection * view is non-invertible")}function r(t){return u(v.direction,v.up,v.position,t),v}function d(){return p(v.position,0,0,0),p(v.direction,0,0,-1),p(v.up,0,1,0),h(v.view),h(v.projection),h(v.projView),h(v.invProjView),v}function g(t){return l(v.position,v.position,t),v}function y(t){var e=new i;return s(e.origin,e.direction,t,v.viewport,v.invProjView),e}function m(t){return o([],t,v.viewport,v.projView)}function M(t){return a([],t,v.viewport,v.invProjView)}t=t||{};var v={projection:h([]),view:h([]),position:t.position||[0,0,0],direction:t.direction||[0,0,-1],up:t.up||[0,1,0],viewport:t.viewport||[-1,-1,1,1],projView:h([]),invProjView:h([])};return n(v,{translate:g,identity:d,lookAt:r,createPickingRay:y,update:e,project:m,unproject:M})}},{"./camera-look-at":360,"camera-picking-ray":88,"camera-project":89,"camera-unproject":90,"gl-mat4/identity":187,"gl-mat4/invert":189,"gl-mat4/multiply":191,"gl-vec3/add":259,"gl-vec3/set":285,"object-assign":362,"ray-3d":381}],360:[function(t,e,r){var n=t("gl-vec3/cross"),i=t("gl-vec3/subtract"),o=t("gl-vec3/normalize"),a=t("gl-vec3/copy"),u=t("gl-vec3/dot"),s=t("gl-vec3/scale"),l=[0,0,0];e.exports=function(t,e,r,c){if(i(l,c,r),o(l,l),!(0===l[0]&&0===l[1]&&0===l[2])){var f=u(l,e);Math.abs(f-1)<1e-9?s(e,t,-1):Math.abs(f+1)<1e-9&&a(e,t),a(t,l),n(l,t,e),o(l,l),n(e,l,t),o(e,e)}}},{"gl-vec3/copy":262,"gl-vec3/cross":264,"gl-vec3/dot":267,"gl-vec3/normalize":278,"gl-vec3/scale":283,"gl-vec3/subtract":288}],361:[function(t,e,r){var n=t("./camera-base"),i=t("object-assign"),o=t("defined"),a=t("gl-mat4/perspective"),u=t("gl-mat4/lookAt"),s=t("gl-vec3/add");e.exports=function(t){function e(){var t=r.viewport[2]/r.viewport[3];return a(r.projection,r.fov,t,Math.abs(r.near),Math.abs(r.far)),s(l,r.position,r.direction),u(r.view,r.position,l,r.up),c(),r}var r=n(t=t||{});r.fov=o(t.fov,Math.PI/4),r.near=o(t.near,1),r.far=o(t.far,100);var l=[0,0,0],c=r.update;return e(),i(r,{update:e})}},{"./camera-base":359,defined:146,"gl-mat4/lookAt":190,"gl-mat4/perspective":193,"gl-vec3/add":259,"object-assign":362}],362:[function(t,e,r){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var r,i,o=n(t),a=1;a<arguments.length;a++){r=arguments[a],i=Object.keys(Object(r));for(var u=0;u<i.length;u++)o[i[u]]=r[i[u]]}return o}},{}],363:[function(t,e,r){"use strict";function n(t,e){function r(t,e){var r=u[e][t[e]];r.splice(r.indexOf(t),1)}function n(t,n,o){for(var a,s,l,c=0;c<2;++c)if(u[c][n].length>0){a=u[c][n][0],l=c;break}s=a[1^l];for(var f=0;f<2;++f)for(var h=u[f][n],p=0;p<h.length;++p){var d=h[p],g=d[1^f];i(e[t],e[n],e[s],e[g])>0&&(a=d,s=g,l=f)}return o?s:(a&&r(a,l),s)}for(var o=0|e.length,a=t.length,u=[new Array(o),new Array(o)],s=0;s<o;++s)u[0][s]=[],u[1][s]=[];for(s=0;s<a;++s){var l=t[s];u[0][l[0]].push(l),u[1][l[1]].push(l)}for(var c=[],s=0;s<o;++s)u[0][s].length+u[1][s].length===0&&c.push([s]);for(s=0;s<o;++s)for(var f=0;f<2;++f){for(var h=[];u[f][s].length>0;){var p=(u[0][s].length,function(t,o){var a=u[o][t][0],s=[t];r(a,o);for(var l=a[1^o];;){for(;l!==t;)s.push(l),l=n(s[s.length-2],l,!1);if(u[0][t].length+u[1][t].length===0)break;var c=s[s.length-1],f=t,h=s[1],p=n(c,f,!0);if(i(e[c],e[f],e[h],e[p])<0)break;s.push(t),l=n(c,f)}return s}(s,f));!function(t,e){return e[1]===e[e.length-1]}(0,p)?(h.length>0&&c.push(h),h=p):h.push.apply(h,p)}h.length>0&&c.push(h)}return c}e.exports=n;var i=t("compare-angle")},{"compare-angle":138}],364:[function(t,e,r){"use strict";function n(t,e){for(var r=i(t,e.length),n=new Array(e.length),o=new Array(e.length),a=[],u=0;u<e.length;++u){var s=r[u].length;o[u]=s,n[u]=!0,s<=1&&a.push(u)}for(;a.length>0;){n[p=a.pop()]=!1;for(var l=r[p],u=0;u<l.length;++u){var c=l[u];0==--o[c]&&a.push(c)}}for(var f=new Array(e.length),h=[],u=0;u<e.length;++u)if(n[u]){var p=h.length;f[u]=p,h.push(e[u])}else f[u]=-1;for(var d=[],u=0;u<t.length;++u){var g=t[u];n[g[0]]&&n[g[1]]&&d.push([f[g[0]],f[g[1]]])}return[d,h]}e.exports=n;var i=t("edges-to-adjacency-list")},{"edges-to-adjacency-list":150}],365:[function(t,e,r){"use strict";function n(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function i(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}function o(t,e){function r(t){for(var r=t.length,n=[0],i=0;i<r;++i){var o=e[t[i]],a=e[t[(i+1)%r]],u=l(-o[0],o[1]),s=l(-o[0],a[1]),f=l(a[0],o[1]),h=l(a[0],a[1]);n=c(n,c(c(u,s),c(f,h)))}return n[n.length-1]>0}function o(t){for(var e=t.length,r=0;r<e;++r)if(!_[t[r]])return!1;return!0}t=(B=h(t,e))[0];for(var p=(e=B[1]).length,d=(t.length,a(t,e.length)),g=0;g<p;++g)if(d[g].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");for(var y=u(t,e),m=(y=y.filter(r)).length,M=new Array(m),v=new Array(m),g=0;g<m;++g){M[g]=g;var b=new Array(m),w=y[g].map(function(t){return e[t]}),x=s([w]),D=0;t:for(E=0;E<m;++E)if(b[E]=0,g!==E){for(var j=(S=y[E]).length,N=0;N<j;++N){var A=x(e[S[N]]);if(0!==A){A<0&&(b[E]=1,D+=1);continue t}}b[E]=1,D+=1}v[g]=[D,g,b]}v.sort(function(t,e){return e[0]-t[0]});for(g=0;g<m;++g)for(var b=v[g],L=b[1],T=b[2],E=0;E<m;++E)T[E]&&(M[E]=L);for(var I=i(m),g=0;g<m;++g)I[g].push(M[g]),I[M[g]].push(g);for(var O={},_=n(p,!1),g=0;g<m;++g)for(var S=y[g],j=S.length,E=0;E<j;++E){var C=S[E],z=S[(E+1)%j],k=Math.min(C,z)+":"+Math.max(C,z);if(k in O){var P=O[k];I[P].push(g),I[g].push(P),_[C]=_[z]=!0}else O[k]=g}for(var Q=[],U=n(m,-1),g=0;g<m;++g)M[g]!==g||o(y[g])?U[g]=-1:(Q.push(g),U[g]=0);for(var B=[];Q.length>0;){var Y=Q.pop(),R=I[Y];f(R,function(t,e){return t-e});var F,G=R.length,V=U[Y];0===V&&(F=[S=y[Y]]);for(g=0;g<G;++g){var W=R[g];U[W]>=0||(U[W]=1^V,Q.push(W),0!==V)||o(S=y[W])||(S.reverse(),F.push(S))}0===V&&B.push(F)}return B}e.exports=o;var a=t("edges-to-adjacency-list"),u=t("planar-dual"),s=t("point-in-big-polygon"),l=t("two-product"),c=t("robust-sum"),f=t("uniq"),h=t("./lib/trim-leaves")},{"./lib/trim-leaves":364,"edges-to-adjacency-list":150,"planar-dual":363,"point-in-big-polygon":367,"robust-sum":404,"two-product":422,uniq:427}],366:[function(t,e,r){var n={REVISION:"2.1.1"};n.Math={random:Math.random,array_shuffle:function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(n.Math.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t},compare_pts_yx:function(t,e){var r=t.y-e.y;if(r<n.Math.EPSILON_N)return-1;if(r>n.Math.EPSILON_P)return 1;var i=t.x-e.x;return i<n.Math.EPSILON_N?-1:i>n.Math.EPSILON_P?1:0},ptsCrossProd:function(t,e,r){return(e.x-t.x)*(r.y-t.y)-(e.y-t.y)*(r.x-t.x)}},n.Math.EPSILON_P=Math.pow(2,-43),n.Math.EPSILON_N=-n.Math.EPSILON_P,n.PolygonData=function(t){if(this.vertices=[],this.segments=[],this.diagonals=[],this.idNextPolyChain=0,this.PolyLeftArr=[],this.monoSubPolyChains=[],this.triangles=[],t)for(var e=0,r=t.length;e<r;e++)this.addPolygonChain(t[e])},n.PolygonData.prototype={constructor:n.PolygonData,nbVertices:function(){return this.vertices.length},getSegments:function(){return this.segments},getFirstSegment:function(){return this.segments[0]},getMonoSubPolys:function(){return this.monoSubPolyChains},getTriangles:function(){return this.triangles.concat()},nbPolyChains:function(){return this.idNextPolyChain},get_PolyLeftArr:function(){return this.PolyLeftArr.concat()},set_PolyLeft_wrong:function(t){this.PolyLeftArr[t]=!1},isClockWise:function(t){var e=t,r=0;do{r+=(e.vFrom.x-e.vTo.x)*(e.vFrom.y+e.vTo.y),e=e.snext}while(e!=t);return r<0},appendVertexEntry:function(t,e){var r={id:this.vertices.length,x:t,y:e};return this.vertices.push(r),r},createSegmentEntry:function(t,e){return{chainId:this.idNextPolyChain,vFrom:t,vTo:e,upward:1==n.Math.compare_pts_yx(e,t),sprev:null,snext:null,rootFrom:null,rootTo:null,is_inserted:!1,trLeft:null,trRight:null,mprev:null,mnext:null,marked:!1}},appendSegmentEntry:function(t){return this.segments.push(t),t},appendDiagonalsEntry:function(t){return this.diagonals.push(t),t},addVertexChain:function(t){function e(t,e){return Math.abs(t.x-e.x)<n.Math.EPSILON_P&&Math.abs(t.y-e.y)<n.Math.EPSILON_P}function r(t,e,r){if(Math.abs(n.Math.ptsCrossProd(e,t,r))>n.Math.EPSILON_P)return!1;var i,o,a;return Math.abs(t.y-e.y)<n.Math.EPSILON_P?(o=e.x,t.x<r.x?(i=t.x,a=r.x):(i=r.x,a=t.x)):(o=e.y,t.y<r.y?(i=t.y,a=r.y):(i=r.y,a=t.y)),i-o<n.Math.EPSILON_P&&o-a<n.Math.EPSILON_P}for(var i,o,a,u=[],s=0;s<t.length;s++)i=this.appendVertexEntry(t[s].x,t[s].y),o=!0,(a=u.length-1)>=0&&(e(i,u[a])?o=!1:a>0&&r(u[a-1],u[a],i)&&u.pop()),o&&u.push(i);return(a=u.length-1)>0&&e(u[a],u[0])&&(u.pop(),a--),a>1&&(r(u[a-1],u[a],u[0])&&(u.pop(),a--),a>1&&r(u[a],u[0],u[1])&&u.shift()),u},addPolygonChain:function(t){var e=this.addVertexChain(t);if(e.length<3)return console.log("Polygon has < 3 vertices!",e),0;for(var r,n,i,o=this.segments.length,a=0;a<e.length-1;a++)r=this.createSegmentEntry(e[a],e[a+1]),i?(r.sprev=i,i.snext=r):n=r,i=r,this.appendSegmentEntry(r);return r=this.createSegmentEntry(e[e.length-1],e[0]),r.sprev=i,i.snext=r,this.appendSegmentEntry(r),n.sprev=r,r.snext=n,this.PolyLeftArr[this.idNextPolyChain++]=!0,this.segments.length-o},create_mono_chains:function(){for(var t,e,r,n,i=0,o=this.segments.length;i<o;i++)t=this.segments[i],this.PolyLeftArr[t.chainId]?(e=t.vTo,t.mprev=t.sprev,t.mnext=t.snext):(e=t.vFrom,t=t.snext,t.mprev=t.snext,t.mnext=t.sprev),(n=t.vFrom.lastInDiag)&&(n.mnext=t,t.mprev=n,t.vFrom.lastInDiag=null),(r=e.firstOutDiag)&&(r.mprev=t,t.mnext=r,e.firstOutDiag=null)},unique_monotone_chains_max:function(){var t,e;this.monoSubPolyChains=[];for(var r=0,i=this.segments.length;r<i;r++)(t=this.segments[r]).marked||(e=function(t){var e,r,i,o=t;for(r=i=t.vFrom,t.marked=!0,t=t.mnext;e=t.vFrom;){if(t.marked){if(e==r)break;return console.log("ERR unique_monotone: segment in two chains",r,t),null}t.marked=!0,1==n.Math.compare_pts_yx(e,i)&&(i=e,o=t),t=t.mnext}return o}(t))&&this.monoSubPolyChains.push(e);return this.monoSubPolyChains},clearTriangles:function(){this.triangles=[]},addTriangle:function(t,e,r){this.triangles.push([t.id,e.id,r.id])}},n.EarClipTriangulator=function(t){this.polyData=t},n.EarClipTriangulator.prototype={constructor:n.EarClipTriangulator,triangulate_polygon_no_holes:function(){var t=this.polyData,e=t.getFirstSegment(),r=e;if(t.isClockWise(e)){do{r.mprev=r.snext,r.mnext=r.sprev,r=r.sprev}while(r!=e);t.set_PolyLeft_wrong(0)}else do{r.mprev=r.sprev,r.mnext=r.snext,r=r.snext}while(r!=e);for(var i=e,o=i;i.mnext!=i.mprev;)if(function(t){var e=t.mprev.vFrom.x,r=t.mprev.vFrom.y,i=t.vFrom.x,o=t.vFrom.y,a=t.mnext.vFrom.x,u=t.mnext.vFrom.y,s=a-i,l=u-o,c=e-a,f=r-u,h=i-e,p=o-r;if(n.Math.EPSILON_P>h*l-s*p)return!1;for(var d=t.mprev.mprev,g=t.mnext;g!=d;){var y=(g=g.mnext).vFrom.x,m=g.vFrom.y,M=y-e,v=m-r;if(0!==M||0!==v){var b=y-i,w=m-o;if(0!==b||0!==w){var x=y-a,D=m-u;if((0!==x||0!==D)&&s*w-l*b>=n.Math.EPSILON_N&&h*v-p*M>=n.Math.EPSILON_N&&c*D-f*x>=n.Math.EPSILON_N)return!1}}}return!0}(i))this.polyData.addTriangle(i.mprev.vFrom,i.vFrom,i.mnext.vFrom),i.mprev.mnext=i.mnext,i.mnext.mprev=i.mprev,i=i.mnext,o=i;else if((i=i.mnext)==o)return!1;return!0}},n.Trapezoid=function(t,e,r,n){this.vHigh=t||{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},this.vLow=e||{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},this.lseg=r,this.rseg=n,this.depth=-1,this.monoDone=!1},n.Trapezoid.prototype={constructor:n.Trapezoid,clone:function(){var t=new n.Trapezoid(this.vHigh,this.vLow,this.lseg,this.rseg);return t.uL=this.uL,t.uR=this.uR,t.dL=this.dL,t.dR=this.dR,t.sink=this.sink,t},splitOffLower:function(t){var e=this.clone();return this.vLow=e.vHigh=t,this.dL=e,e.uL=this,this.dR=e.uR=null,e.dL&&(e.dL.uL=e),e.dR&&(e.dR.uR=e),e}},n.QsNode=function(t){this.trap=t,t.sink=this},n.QsNode.prototype={constructor:n.QsNode},n.QueryStructure=function(t){var e=new n.Trapezoid(null,null,null,null);if(this.trapArray=[],this.appendTrapEntry(e),this.root=new n.QsNode(e),t)for(var r=t.getSegments(),i=0;i<r.length;i++)r[i].rootFrom=r[i].rootTo=this.root,r[i].is_inserted=!1},n.QueryStructure.prototype={constructor:n.QueryStructure,getRoot:function(){return this.root},appendTrapEntry:function(t){t.trapID=this.trapArray.length,this.trapArray.push(t)},cloneTrap:function(t){var e=t.clone();return this.appendTrapEntry(e),e},splitNodeAtPoint:function(t,e,r){var i=t.trap;if(i.vHigh==e)return t;if(i.vLow==e)return t;var o=i.splitOffLower(e);return this.appendTrapEntry(o),t.yval=e,t.trap=null,t.right=new n.QsNode(i),t.left=new n.QsNode(o),r?i.sink:o.sink},fpEqual:function(t,e){return Math.abs(t-e)<n.Math.EPSILON_P},is_left_of:function(t,e,r){var i,o=t.vFrom.x-e.x,a=t.vTo.x-e.x,u=this.fpEqual(t.vFrom.y,e.y);if(this.fpEqual(t.vTo.y,e.y)){if(u)return 0;i=a}else{if(!u)return t.upward?n.Math.ptsCrossProd(t.vFrom,t.vTo,e):n.Math.ptsCrossProd(t.vTo,t.vFrom,e);i=o}return Math.abs(i)<n.Math.EPSILON_P?0:i},segNodes:function(t){this.ptNode(t,!0),this.ptNode(t,!1)},ptNode:function(t,e){var r,i,o;e?(r=t.vFrom,i=t.vTo,o=t.rootFrom):(r=t.vTo,i=t.vFrom,o=t.rootTo);for(var a,u;o;)if(o.yval)o=-1==n.Math.compare_pts_yx(r==o.yval?i:r,o.yval)?o.left:o.right;else{if(!o.seg)return o.trap||console.log("ptNode: unknown type",o),e?t.rootFrom=o:t.rootTo=o,o;if(r==o.seg.vFrom||r==o.seg.vTo){if(this.fpEqual(r.y,i.y)){this.fpEqual(o.seg.vFrom.y,o.seg.vTo.y)?r==o.seg.vFrom?(u=t.upward?i.x>=o.seg.vTo.x:i.x<o.seg.vTo.x,o=(u?t.sprev.upward:o.seg.snext.upward)?o.right:o.left):(u=t.upward?i.x<o.seg.vFrom.x:i.x>=o.seg.vFrom.x,o=(u?t.snext.upward:o.seg.sprev.upward)?o.left:o.right):o=i.x<r.x?o.left:o.right;continue}0===(a=this.is_left_of(o.seg,i,!1))&&(r==o.seg.vFrom?(u=t.upward?i.y>=o.seg.vTo.y:i.y<o.seg.vTo.y,a=u?this.is_left_of(o.seg,t.sprev.vFrom,!1):-this.is_left_of(o.seg,o.seg.snext.vTo,!1)):(u=t.upward?i.y<o.seg.vFrom.y:i.y>=o.seg.vFrom.y,a=u?this.is_left_of(o.seg,t.snext.vTo,!1):-this.is_left_of(o.seg,o.seg.sprev.vFrom,!1)))}else if(0===(a=this.is_left_of(o.seg,r,!0))&&0===(a=this.is_left_of(o.seg,i,!1))){var s=e?t.sprev.vFrom:t.snext.vTo;a=this.is_left_of(o.seg,s,!1)}if(a>0)o=o.left;else{if(!(a<0))return o;o=o.right}}},add_segment:function(t){var e=this;this.segNodes(t);var r,i,o,a,u,s;if(t.upward?(r=t.vFrom,a=t.vTo,i=t.rootFrom,u=t.rootTo,o=t.sprev.is_inserted,s=t.snext.is_inserted):(r=t.vTo,a=t.vFrom,i=t.rootTo,u=t.rootFrom,o=t.snext.is_inserted,s=t.sprev.is_inserted),!s){var l=this.splitNodeAtPoint(u,a,!1);u==i&&(i=l),u=l}var c=u.trap;if(c.uL||c.uR)if(c.vHigh==a){o||(i=this.splitNodeAtPoint(i,r,!0));for(var f,h,p,d,g,y=i.trap,m=c,M=this.trapArray.length+2;m;){if(--M<0)return void console.log("ERR add_segment: infinite loop",m,t,this);if(!m.dL&&!m.dR)return void console.log("ERR add_segment: missing successors",m,t,this);var v=m.sink;v.seg=t,v.trap=null,d&&d.rseg==m.rseg?(f=m,h=d,h.vLow=m.vLow,v.left=new n.QsNode(f),v.right=d.sink):p&&p.lseg==m.lseg?(h=m,f=p,f.vLow=m.vLow,v.left=p.sink,v.right=new n.QsNode(h)):(f=m,h=this.cloneTrap(m),v.left=new n.QsNode(f),v.right=new n.QsNode(h)),m.uL&&m.uR?function(){m.usave?(m.uleft?(h.uL=m.uR,h.uR=m.usave,h.uL.dL=h,h.uR.dR=h):(f.uR=m.uL,f.uL=m.usave,f.uL.dL=f,f.uR.dR=f),f.usave=h.usave=null):m.vHigh==c.vHigh?(h.uR.dR=h,f.uR=h.uL=null):h==m?(h.uL=h.uR,h.uR=null,h.uL.dL=h):(f.uR=f.uL,f.uL=null)}():function(){var t=m.uL||m.uR;t.dL&&t.dR?m==t.dL?(h.uL=null,t.dL=f):(f.uR=null,t.dR=h):(h.uL=null,h.uR=t,t.dR=h)}(),m.dL&&m.dR?g=function(){var r;if(m.vLow==y.vLow&&o)m.dL.uL=f,m.dR.uR=h,f.dL=m.dL,h.dR=m.dR,f.dR=h.dL=null,r=null;else{m.dL.uL=f,m.dR.uR=h;var n,i=e.is_left_of(t,m.vLow,!0);if(i>0)n=!0;else if(i<0)n=!1;else{var a=m.dL.rseg,u=a.upward,s=u?a.vFrom:a.vTo;(i=e.is_left_of(t,s,!1))>0?n=!0:i<0?n=!1:(a=u?a.snext:a.sprev,s=u?a.vTo:a.vFrom,i=e.is_left_of(t,s,!1),n=i>0)}n?(r=m.dR,m.dR.uL=f,f.dL=m.dL,h.dR=null):(r=m.dL,m.dL.uR=h,h.dR=m.dR,f.dL=null),f.dR=h.dL=r}return r}():(g=m.dL?m.dL:m.dR,function(t){m.vLow==y.vLow?(o?m.dL?(t.uL=f,f.dL=t,h.dR=null):(t.uR=h,f.dL=null,h.dR=t):(t.uL=f,t.uR=h,f.dL=h.dR=t),f.dR=h.dL=null):(t.uL&&t.uR&&(t.uL==m?(t.usave=t.uR,t.uleft=!0):(t.usave=t.uL,t.uleft=!1)),t.uL=f,t.uR=h,f.dR=h.dL=t,f.dL=h.dR=null)}(g)),f.rseg&&(f.rseg.trLeft=h),h.lseg&&(h.lseg.trRight=f),f.rseg=h.lseg=t,t.trLeft=f,t.trRight=h,m.vLow!=y.vLow?(p=f,d=h,m=g):m=null}t.is_inserted=!0}else console.log("ERR add_segment: trFirstHigh != segHigh: ",c);else console.log("ERR add_segment: missing trFirst.uX: ",c)},assignDepths:function(t){var e,r,n=[this.trapArray[0]],i=[],o=0;do{for(var a=o%2==1;e=n.pop();)-1==e.depth&&(e.depth=o,e.uL&&n.push(e.uL),e.uR&&n.push(e.uR),e.dL&&n.push(e.dL),e.dR&&n.push(e.dR),(r=e.lseg)&&-1==r.trLeft.depth&&i.push(r.trLeft),(r=e.rseg)&&(-1==r.trRight.depth&&i.push(r.trRight),r.upward!=a&&t.set_PolyLeft_wrong(r.chainId)));n=i,i=[],o++}while(n.length>0)},create_visibility_map:function(t){var e,r,n=t.nbVertices(),i=new Array(n);for(e=0;e<n;e++)i[e]=new Array(8);var o=new Array(n);for(e=0,r=this.trapArray.length;e<r;e++){var a=this.trapArray[e],u=a.uL?a.uR?5:7:a.uR?4:6,s=a.dL?a.dR?1:0:a.dR?3:2;if(a.depth%2==1){if(5==u||1==s||7==u&&3==s||4==u&&0==s){var l=t.appendDiagonalsEntry({vFrom:a.vLow,vTo:a.vHigh,mprev:null,mnext:null,marked:!1}),c=t.appendDiagonalsEntry({vFrom:a.vHigh,vTo:a.vLow,revDiag:l,mprev:null,mnext:null,marked:!1});l.revDiag=c,i[a.vLow.id][s]=l,i[a.vHigh.id][u]=c}}else null!==a.vHigh.id&&(o[a.vHigh.id]=u),null!==a.vLow.id&&(o[a.vLow.id]=s)}var f,h,p,d,g;for(e=0;e<n;e++)if(h=i[e],null!=(p=o[e])){r=p,g=null;do{r++>7&&(r=0),(f=h[r])&&(g?(f.mprev=g,g.mnext=f):(d=f.vFrom,d.firstOutDiag=f),g=f.revDiag)}while(r!=p);g&&(d.lastInDiag=g)}}},n.Trapezoider=function(t){this.polyData=t,this.queryStructure=new n.QueryStructure(this.polyData)},n.Trapezoider.prototype={constructor:n.Trapezoider,optimise_randomlist:function(t){var e=0,r=this.polyData.nbPolyChains();if(1!=r)for(var n=new Array(r),i=t.concat(),o=0;o<i.length;o++){var a=i[o].chainId;n[a]?t[r++]=i[o]:(t[e++]=i[o],n[a]=!0)}},trapezoide_polygon:function(){var t=this.polyData.getSegments().concat();n.Math.array_shuffle(t),this.optimise_randomlist(t);for(var e,r=t.length,i=this.queryStructure,o=0,a=r;o<r;){for(var u=(a=Math.log(a)/Math.LN2)>1?Math.floor(r/a):r;o<u;o++)i.add_segment(t[o]);for(e=o;e<r;e++)this.queryStructure.segNodes(t[e])}for(i.assignDepths(this.polyData),e=0;e<r;e++)t[e].trLeft=t[e].trRight=null},create_visibility_map:function(){return this.queryStructure.create_visibility_map(this.polyData)}},n.MonoSplitter=function(t){this.polyData=t,this.trapezoider=null},n.MonoSplitter.prototype={constructor:n.MonoSplitter,monotonate_trapezoids:function(){this.trapezoider=new n.Trapezoider(this.polyData),this.trapezoider.trapezoide_polygon(),this.trapezoider.create_visibility_map(),this.polyData.create_mono_chains(),this.polyData.unique_monotone_chains_max()}},n.MonoTriangulator=function(t){this.polyData=t},n.MonoTriangulator.prototype={constructor:n.MonoTriangulator,triangulate_all_polygons:function(){var t=this.polyData.getMonoSubPolys();this.polyData.clearTriangles();for(var e=0;e<t.length;e++){var r=t[e],n=r.mprev,i=r.mnext;i.mnext==n?this.polyData.addTriangle(r.vFrom,i.vFrom,n.vFrom):this.triangulate_monotone_polygon(r)}},triangulate_monotone_polygon:function(t){var e=this,r=t.mnext,i=t.vFrom,o=[r.vFrom],a=0,u=(r=r.mnext).vFrom;if(u!=i){for(;u!=i||a>1;)if(a>0){var s=n.Math.ptsCrossProd(o[a],u,o[a-1]);Math.abs(s)<=n.Math.EPSILON_P&&(u!=i&&n.Math.compare_pts_yx(o[a],u)!=n.Math.compare_pts_yx(o[a],o[a-1])||(s=1)),s>0?(this.polyData.addTriangle(o[a-1],o[a],u),a--):(o[++a]=u,u==i?function(){for(console.log("ERR uni-y-monotone: only concave angles left",o);a>1;)a--,e.polyData.addTriangle(o[a-1],o[a],o[a+1])}():(r=r.mnext,u=r.vFrom))}else o[++a]=u,r=r.mnext,u=r.vFrom;this.polyData.addTriangle(o[a-1],o[a],u)}}},n.Triangulator=function(){this.lastPolyData=null},n.Triangulator.prototype={constructor:n.Triangulator,clear_lastData:function(){this.lastPolyData=null},get_PolyLeftArr:function(){return this.lastPolyData?this.lastPolyData.get_PolyLeftArr():null},triangulate_polygon:function(t,e){if(this.clear_lastData(),!t||0===t.length)return[];var r,i=new n.PolygonData(t),o=function(){return!e&&1==i.nbPolyChains()}();return o&&(r=new n.EarClipTriangulator(i),o=r.triangulate_polygon_no_holes()),o||(new n.MonoSplitter(i).monotonate_trapezoids(),(r=new n.MonoTriangulator(i)).triangulate_all_polygons()),this.lastPolyData=i,i.getTriangles()}},void 0!==r?(void 0!==e&&e.exports&&(r=e.exports=n),r.PNLTRI=n):this.PNLTRI=n},{}],367:[function(t,e,r){function n(){return!0}function i(t){return function(e,r){var i=t[e];return!!i&&!!i.queryPoint(r,n)}}function o(t){for(var e={},r=0;r<t.length;++r){var n=t[r],o=n[0][0],a=n[0][1],u=n[1][1],s=[Math.min(a,u),Math.max(a,u)];o in e?e[o].push(s):e[o]=[s]}for(var l={},c=Object.keys(e),r=0;r<c.length;++r){var f=e[c[r]];l[c[r]]=p(f)}return i(l)}function a(t,e){return function(r){var n=d.le(e,r[0]);if(n<0)return 1;var i=t[n];if(!i){if(!(n>0&&e[n]===r[0]))return 1;i=t[n-1]}for(var o=1;i;){var a=i.key,u=f(r,a[0],a[1]);if(a[0][0]<a[1][0])if(u<0)i=i.left;else{if(!(u>0))return 0;o=-1,i=i.right}else if(u>0)i=i.left;else{if(!(u<0))return 0;o=1,i=i.right}}return o}}function u(t){return 1}function s(t){return function(e){return t(e[0],e[1])?0:1}}function l(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}function c(t){for(var e=t.length,r=[],n=[],i=0;i<e;++i)for(var c=t[i],f=c.length,p=f-1,d=0;d<f;p=d++){var g=c[p],y=c[d];g[0]===y[0]?n.push([g,y]):r.push([g,y])}if(0===r.length)return 0===n.length?u:s(o(n));var m=h(r),M=a(m.slabs,m.coordinates);return 0===n.length?M:l(o(n),M)}e.exports=c;var f=t("robust-orientation")[3],h=t("slab-decomposition"),p=t("interval-tree-1d"),d=t("binary-search-bounds")},{"binary-search-bounds":73,"interval-tree-1d":333,"robust-orientation":399,"slab-decomposition":413}],368:[function(t,e,r){function n(t,e,r,n){function i(r,n,i,s){for(var l=1/(r-1),c=0;c<r;c++){var f=Math.cos(2*Math.PI*c*l)*n,h=Math.sin(2*Math.PI*c*l)*n;o.push([t*f,t*i+e*s,t*h]),a.push([f,i,h]);var p=1-c*l,d=.5-(t*i+e*s)/(2*t+e);u.push([p,d])}}void 0===t&&(t=.5),void 0===e&&(e=2*t),void 0===r&&(r=12),void 0===n&&(n=12);for(var o=[],a=[],u=[],s=[],l=r+1,c=r+l,f=1/(l-1),h=1/(r-1),p=0;p<r/2;p++)i(n,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),-.5);for(p=0;p<l;p++)i(n,1,0,p*f-.5);for(p=r/2;p<r;p++)i(n,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),.5);for(p=0;p<c-1;p++)for(var d=0;d<n-1;d++)s.push([p*n+(d+1),p*n+(d+0),(p+1)*n+(d+1)]),s.push([(p+1)*n+(d+0),(p+1)*n+(d+1),p*n+d]);return{positions:o,normals:a,uvs:u,cells:s}}e.exports=n},{}],369:[function(t,e,r){function n(t,e,r,n,i,o){function a(t,e,r,n,i,o,a,h,p,d){for(var g=u,y=0;y<=a;y++)for(b=0;b<=o;b++){var m=s[u]=[0,0,0];m[t]=(-n/2+b*n/o)*p,m[e]=(-i/2+y*i/a)*d,m[r]=h;var M=l[u]=[0,0,0];M[t]=0,M[e]=0,M[r]=h/Math.abs(h);var v=c[u]=[0,0];v[0]=b/o,v[1]=1-y/a,++u}for(y=0;y<a;y++)for(var b=0;b<o;b++){var w=g+y*(o+1)+b;f.push([w,w+o+1,w+o+2]),f.push([w,w+o+2,w+1])}}void 0===t&&(t=1),void 0===e&&(e=t),void 0===r&&(r=t),void 0===n&&(n=1),void 0===i&&(i=n),void 0===o&&(o=n);var u=0,s=[],l=[],c=[],f=[];return a(0,1,2,t,e,n,i,r/2,1,-1),a(0,1,2,t,e,n,i,-r/2,-1,-1),a(2,1,0,r,e,o,i,-t/2,1,-1),a(2,1,0,r,e,o,i,t/2,-1,-1),a(0,2,1,t,r,n,o,e/2,1,1),a(0,2,1,t,r,n,o,-e/2,1,-1),{positions:s,normals:l,uvs:c,cells:f}}e.exports=n},{}],370:[function(t,e,r){function n(t,e,r,n,i){var o=0,a=0,u=[],s=0;t>0&&s++,e>0&&s++;for(var l=(n+1)*(i+1)+(n+2)*s,c=n*i*2+n*s,f=new Array(l),h=new Array(l),p=new Array(l),d=new Array(c),g=(e-t)/r,y=2*Math.PI,m=0;m<=i;m++){for(var M=[],v=m/i,b=v*(e-t)+t,w=0;w<=n;w++){var x=w/n,D=x*y,j=Math.sin(D),N=Math.cos(D);h[o]=[b*j,-v*r+r/2,b*N],f[o]=[j,g,N],p[o]=[x,1-v],M.push(o),o++}u.push(M)}for(w=0;w<n;w++)for(m=0;m<i;m++){var A=u[m][w],L=u[m+1][w],T=u[m+1][w+1],E=u[m][w+1];d[a]=[A,L,E],d[++a]=[L,T,E],a++}var I=function(i){for(var u=(new Array(3).fill(0),!0===i?t:e),s=!0===i?1:-1,l=o,c=1;c<=n;c++)h[o]=[0,r*s/2,0],f[o]=[0,s,0],p[o]=[.5,.5],o++;for(var g=o,c=0;c<=n;c++){var m=c/n*y,M=Math.cos(m),v=Math.sin(m);h[o]=[u*v,r*s/2,u*M],f[o]=[0,s,0],p[o]=[.5*M+.5,.5*v*s+.5],o++}for(c=0;c<n;c++){var b=l+c,w=g+c;!0===i?(d[a]=[w,w+1,b],a++):(d[a]=[w+1,w,b],a++)}};return t>0&&I(!0),e>0&&I(!1),{uvs:p,cells:d,normals:f,positions:h}}e.exports=n},{}],371:[function(t,e,r){function n(t,e,r,n,i){t=t||1,e=e||1,r=r||1,n=n||1;for(var o=!(!i||!i.quads)&&i.quads,a=[],u=[],s=[],l=[],c=0;c<=n;c++)for(var f=0;f<=r;f++){var h=f/r,p=c/n,d=-t/2+h*t,g=e/2-p*e;a.push([d,g,0]),u.push([h,p]),s.push([0,0,1]),c<n&&f<r&&(o?l.push([c*(r+1)+f,(c+1)*(r+1)+f,(c+1)*(r+1)+f+1,c*(r+1)+f+1]):(l.push([c*(r+1)+f,(c+1)*(r+1)+f+1,c*(r+1)+f+1]),l.push([(c+1)*(r+1)+f+1,c*(r+1)+f,(c+1)*(r+1)+f])))}return{positions:a,normals:s,uvs:u,cells:l}}e.exports=n},{}],372:[function(t,e,r){function n(t,e){e=e||{},t=void 0!==t?t:1;for(var r=2+(void 0!==e.segments?e.segments:32),n=2*r,d=[],g=[],y=[],m=[],M=0;M<=r;M++){for(var v=M/r,b=v*Math.PI,w=0;w<=n;w++){var x=w/n,D=x*Math.PI*2;i(f),a(f,f,-b),i(c),o(c,c,D),s(p,h,f),s(p,p,c),u(p,p,-t),g.push(p.slice()),l(p,p),y.push(p.slice()),m.push([x,1-v])}if(M>0)for(var j=g.length,N=j-2*(n+1);N+n+2<j;N++)d.push([N,N+1,N+n+1]),d.push([N+n+1,N+1,N+n+2])}return{cells:d,positions:g,normals:y,uvs:m}}var i=t("gl-mat4/identity"),o=t("gl-mat4/rotateY"),a=t("gl-mat4/rotateZ"),u=t("gl-vec3/scale"),s=t("gl-vec3/transformMat4"),l=t("gl-vec3/normalize"),c=i([]),f=i([]),h=[0,1,0],p=[0,0,0];e.exports=n},{"gl-mat4/identity":187,"gl-mat4/rotateY":197,"gl-mat4/rotateZ":198,"gl-vec3/normalize":278,"gl-vec3/scale":283,"gl-vec3/transformMat4":290}],373:[function(t,e,r){function n(t){for(var e=i((t=t||{}).majorRadius,1),r=i(t.minorRadius,.25),n=i(t.minorSegments,32),u=i(t.majorSegments,64),s=i(t.arc,2*Math.PI),l=2*Math.PI,c=[0,0,0],f=[],h=[],p=[],d=[0,0,0],g=[],y=0;y<=n;y++)for(b=0;b<=u;b++){var m=b/u*s,M=y/n*l;c[0]=e*Math.cos(m),c[1]=e*Math.sin(m);var v=[(e+r*Math.cos(M))*Math.cos(m),(e+r*Math.cos(M))*Math.sin(m),r*Math.sin(M)];h.push(v),o(d,v,c),a(d,d),g.push(d.slice()),f.push([b/u,y/n])}for(y=1;y<=n;y++)for(var b=1;b<=u;b++){var w=(u+1)*y+b-1,x=(u+1)*(y-1)+b-1,D=(u+1)*(y-1)+b,j=(u+1)*y+b;p.push([w,x,j]),p.push([x,D,j])}return{uvs:f,cells:p,normals:g,positions:h}}var i=t("defined"),o=t("gl-vec3/subtract"),a=t("gl-vec3/normalize");e.exports=n},{defined:146,"gl-vec3/normalize":278,"gl-vec3/subtract":288}],374:[function(t,e,r){(function(t){"use strict";function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,u=arguments.length;switch(u){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(u-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(this,t("_process"))},{_process:375}],375:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function u(){y&&d&&(y=!1,d.length?g=d.concat(g):m=-1,g.length&&s())}function s(){if(!y){var t=o(u);y=!0;for(var e=g.length;e;){for(d=g,g=[];++m<e;)d&&d[m].run();m=-1,e=g.length}d=null,y=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var f,h,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var d,g=[],y=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];g.push(new l(t,e)),1!==g.length||y||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],376:[function(t,e,r){(function(r){for(var n=t("performance-now"),i="undefined"==typeof window?r:window,o=["moz","webkit"],a="AnimationFrame",u=i["request"+a],s=i["cancel"+a]||i["cancelRequest"+a],l=0;!u&&l<o.length;l++)u=i[o[l]+"Request"+a],s=i[o[l]+"Cancel"+a]||i[o[l]+"CancelRequest"+a];if(!u||!s){var c=0,f=0,h=[];u=function(t){if(0===h.length){var e=n(),r=Math.max(0,1e3/60-(e-c));c=r+e,setTimeout(function(){var t=h.slice(0);h.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout(function(){throw t},0)}},Math.round(r))}return h.push({handle:++f,callback:t,cancelled:!1}),f},s=function(t){for(var e=0;e<h.length;e++)h[e].handle===t&&(h[e].cancelled=!0)}}e.exports=function(t){return u.call(i,t)},e.exports.cancel=function(){s.apply(i,arguments)},e.exports.polyfill=function(){i.requestAnimationFrame=u,i.cancelAnimationFrame=s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":355}],377:[function(t,e,r){"use strict";function n(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=i(t[o],e[o]);return n}var i=t("big-rat/add");e.exports=n},{"big-rat/add":57}],378:[function(t,e,r){"use strict";function n(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=i(t[r]);return e}e.exports=n;var i=t("big-rat")},{"big-rat":60}],379:[function(t,e,r){"use strict";function n(t,e){for(var r=i(e),n=t.length,a=new Array(n),u=0;u<n;++u)a[u]=o(t[u],r);return a}var i=t("big-rat"),o=t("big-rat/mul");e.exports=n},{"big-rat":60,"big-rat/mul":69}],380:[function(t,e,r){"use strict";function n(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=i(t[o],e[o]);return n}var i=t("big-rat/sub");e.exports=n},{"big-rat/sub":71}],381:[function(t,e,r){function n(t,e){this.origin=t||[0,0,0],this.direction=e||[0,0,-1]}var i=t("ray-triangle-intersection"),o=t("ray-plane-intersection"),a=t("ray-sphere-intersection"),u=t("ray-aabb-intersection"),s=t("gl-vec3/copy"),l=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];e.exports=n,n.prototype.set=function(t,e){this.origin=t,this.direction=e},n.prototype.copy=function(t){s(this.origin,t.origin),s(this.direction,t.direction)},n.prototype.clone=function(){var t=new n;return t.copy(this),t},n.prototype.intersectsSphere=function(t,e){return a(c,this.origin,this.direction,t,e)},n.prototype.intersectsPlane=function(t,e){return o(c,this.origin,this.direction,t,e)},n.prototype.intersectsTriangle=function(t){return i(c,this.origin,this.direction,t)},n.prototype.intersectsBox=function(t){return u(c,this.origin,this.direction,t)},n.prototype.intersectsTriangleCell=function(t,e){var r=t[0],n=t[1],i=t[2];return l[0]=e[r],l[1]=e[n],l[2]=e[i],this.intersectsTriangle(l)}},{"gl-vec3/copy":262,"ray-aabb-intersection":382,"ray-plane-intersection":383,"ray-sphere-intersection":384,"ray-triangle-intersection":385}],382:[function(t,e,r){function n(t,e,r,n){var o=i(e,r,n);if(o===1/0)t=null;else{t=t||[];for(var a=0;a<e.length;a++)t[a]=e[a]+r[a]*o}return t}function i(t,e,r){for(var n=t.length,i=-1/0,o=1/0,a=0;a<n;a++){var u=(r[0][a]-t[a])/e[a],s=(r[1][a]-t[a])/e[a];if(u>s){var l=u;u=s,s=l}if(s<i||u>o)return 1/0;u>i&&(i=u),s<o&&(o=s)}return i>o?1/0:i}e.exports=n,e.exports.distance=i},{}],383:[function(t,e,r){function n(t,e,r,n,l){var c=i(r,n);if(0!==c){var f=-(i(e,n)+l)/c;return f<0?null:(a(s,r,f),o(t,e,s))}return i(n,e)+l===0?u(t,e):null}var i=t("gl-vec3/dot"),o=t("gl-vec3/add"),a=t("gl-vec3/scale"),u=t("gl-vec3/copy");e.exports=n;var s=[0,0,0]},{"gl-vec3/add":259,"gl-vec3/copy":262,"gl-vec3/dot":267,"gl-vec3/scale":283}],384:[function(t,e,r){function n(t,e,r,n,f){a(c,n,e);var h=o(r,c);if(h<0)return null;u(c,e,r,h);var p=i(n,c),d=f*f;return p>d?null:(s(t,r,h-Math.sqrt(d-p)),l(t,t,e))}var i=t("gl-vec3/squaredDistance"),o=t("gl-vec3/dot"),a=t("gl-vec3/subtract"),u=t("gl-vec3/scaleAndAdd"),s=t("gl-vec3/scale"),l=t("gl-vec3/add"),c=[0,0,0];e.exports=n},{"gl-vec3/add":259,"gl-vec3/dot":267,"gl-vec3/scale":283,"gl-vec3/scaleAndAdd":284,"gl-vec3/squaredDistance":286,"gl-vec3/subtract":288}],385:[function(t,e,r){function n(t,e,r,n){a(s,n[1],n[0]),a(l,n[2],n[0]),i(f,r,l);var p=o(s,f);if(p<u)return null;a(c,e,n[0]);var d=o(c,f);if(d<0||d>p)return null;i(h,c,s);var g=o(r,h);if(g<0||d+g>p)return null;var y=o(l,h)/p;return t[0]=e[0]+y*r[0],t[1]=e[1]+y*r[1],t[2]=e[2]+y*r[2],t}var i=t("gl-vec3/cross"),o=t("gl-vec3/dot"),a=t("gl-vec3/subtract"),u=1e-6,s=[0,0,0],l=[0,0,0],c=[0,0,0],f=[0,0,0],h=[0,0,0];e.exports=n},{"gl-vec3/cross":264,"gl-vec3/dot":267,"gl-vec3/subtract":288}],386:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);l.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||u(o,this)}function o(t){t.end()}var a=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=n;var u=t("process-nextick-args"),s=t("core-util-is");s.inherits=t("inherits");var l=t("./_stream_readable"),c=t("./_stream_writable");s.inherits(n,l);for(var f=a(c.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=c.prototype[p])}},{"./_stream_readable":388,"./_stream_writable":390,"core-util-is":140,inherits:332,"process-nextick-args":374}],387:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}e.exports=n;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":389,"core-util-is":140,inherits:332}],388:[function(t,e,r){(function(r){"use strict";function n(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?I(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function i(e,r){T=T||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,r instanceof T&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Q||(Q=t("string_decoder/").StringDecoder),this.decoder=new Q(e.encoding),this.encoding=e.encoding)}function o(e){if(T=T||t("./_stream_duplex"),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),_.call(this)}function a(t,e,r,n,i){var o=c(e,r);if(o)t.emit("error",o);else if(null===r)e.reading=!1,f(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var l;!e.decoder||i||n||(r=e.decoder.write(r),l=!e.objectMode&&0===r.length),i||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&h(t))),d(t,e)}else i||(e.reading=!1);return u(e)}function u(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){return t>=Y?t=Y:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function l(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function c(t,e){var r=null;return S.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(P("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?E(p,t):p(t))}function p(t){P("emit readable"),t.emit("readable"),b(t)}function d(t,e){e.readingMore||(e.readingMore=!0,E(g,t,e))}function g(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(P("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function y(t){return function(){var e=t._readableState;P("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&O(t,"data")&&(e.flowing=!0,b(t))}}function m(t){P("readable nexttick read 0"),t.read(0)}function M(t,e){e.resumeScheduled||(e.resumeScheduled=!0,E(v,t,e))}function v(t,e){e.reading||(P("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;for(P("flow",e.flowing);e.flowing&&null!==t.read(););}function w(t,e){if(0===e.length)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=x(t,e.buffer,e.decoder),r}function x(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?D(t,e):j(t,e),n}function D(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}function j(t,e){var r=C.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0==(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}function N(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,E(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}e.exports=o;var T,E=t("process-nextick-args"),I=t("isarray");o.ReadableState=i;t("events").EventEmitter;var O=function(t,e){return t.listeners(e).length},_=t("./internal/streams/stream"),S=t("buffer").Buffer,C=t("buffer-shims"),z=t("core-util-is");z.inherits=t("inherits");var k=t("util"),P=void 0;P=k&&k.debuglog?k.debuglog("stream"):function(){};var Q,U=t("./internal/streams/BufferList");z.inherits(o,_);var B=["error","close","destroy","pause","resume"];o.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)!==r.encoding&&(t=C.from(t,e),e=""),a(this,r,t,e,!1)},o.prototype.unshift=function(t){return a(this,this._readableState,t,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return Q||(Q=t("string_decoder/").StringDecoder),this._readableState.decoder=new Q(e),this._readableState.encoding=e,this};var Y=8388608;o.prototype.read=function(t){P("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return P("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):h(this),null;if(0===(t=l(t,e))&&e.ended)return 0===e.length&&N(this),null;var n=e.needReadable;P("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,P("length less than watermark",n)),e.ended||e.reading?(n=!1,P("reading or ended",n)):n&&(P("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=l(r,e)));var i;return i=t>0?w(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&N(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,e){function i(t){P("onunpipe"),t===h&&a()}function o(){P("onend"),t.end()}function a(){P("cleanup"),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("drain",g),t.removeListener("error",s),t.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",a),h.removeListener("data",u),m=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function u(e){P("ondata"),M=!1,!1!==t.write(e)||M||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&-1!==L(p.pipes,t))&&!m&&(P("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,M=!0),h.pause())}function s(e){P("onerror",e),f(),t.removeListener("error",s),0===O(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",c),f()}function c(){P("onfinish"),t.removeListener("close",l),f()}function f(){P("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,P("pipe count=%d opts=%j",p.pipesCount,e);var d=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?o:a;p.endEmitted?E(d):h.once("end",d),t.on("unpipe",i);var g=y(h);t.on("drain",g);var m=!1,M=!1;return h.on("data",u),n(t,"error",s),t.once("close",l),t.once("finish",c),t.emit("pipe",h),p.flowing||(P("pipe resume"),h.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=L(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var r=_.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this):E(m,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(P("resume"),t.flowing=!0,M(this,t)),this},o.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(P("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){P("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()))});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<B.length;o++)t.on(B[o],n.emit.bind(n,B[o]));return n._read=function(e){P("wrapped _read",e),r&&(r=!1,t.resume())},n},o._fromList=w}).call(this,t("_process"))},{"./_stream_duplex":386,"./internal/streams/BufferList":391,"./internal/streams/stream":392,_process:375,buffer:86,"buffer-shims":85,"core-util-is":140,events:151,inherits:332,isarray:393,"process-nextick-args":374,"string_decoder/":394,util:84}],389:[function(t,e,r){"use strict";function n(t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);u.call(this,t),this._transformState=new n(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,r){a(e,t,r)}):a(e)})}function a(t,e,r){if(e)return t.emit("error",e);null!==r&&void 0!==r&&t.push(r);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=o;var u=t("./_stream_duplex"),s=t("core-util-is");s.inherits=t("inherits"),s.inherits(o,u),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":386,"core-util-is":140,inherits:332}],390:[function(t,e,r){(function(r){"use strict";function n(){}function i(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function o(e,r){D=D||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,r instanceof D&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function a(e){if(D=D||t("./_stream_duplex"),!(O.call(a,this)||this instanceof D))return new a(e);this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),T.call(this)}function u(t,e){var r=new Error("write after end");t.emit("error",r),j(e,r)}function s(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),j(n,o),i=!1),i}function l(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=I.from(e,r)),e}function c(t,e,r,n,o,a){r||(n=l(e,n,o),E.isBuffer(n)&&(o="buffer"));var u=e.objectMode?1:n.length;e.length+=u;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest=new i(n,o,a),c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,u,n,o,a);return s}function f(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,r,n,i){--e.pendingcb,r?j(i,n):i(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(p(r),e)h(t,r,n,e,i);else{var o=M(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(t,r),n?N(g,t,r,o,i):g(t,r,o,i)}}function g(t,e,r,n){r||y(t,e),e.pendingcb--,n(),b(t,e)}function y(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;f(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new x(e)}else{for(;r;){var u=r.chunk,s=r.encoding,l=r.callback;if(f(t,e,!1,e.objectMode?1:u.length,u,s,l),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function M(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function v(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var r=M(e);return r&&(0===e.pendingcb?(v(t,e),e.finished=!0,t.emit("finish")):v(t,e)),r}function w(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?j(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function x(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}e.exports=a;var D,j=t("process-nextick-args"),N=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:j;a.WritableState=o;var A=t("core-util-is");A.inherits=t("inherits");var L={deprecate:t("util-deprecate")},T=t("./internal/streams/stream"),E=t("buffer").Buffer,I=t("buffer-shims");A.inherits(a,T),o.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(o.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var O;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(O=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(t){return!!O.call(this,t)||t&&t._writableState instanceof o}})):O=function(t){return t instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(t,e,r){var i=this._writableState,o=!1,a=E.isBuffer(t);return"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?u(this,r):(a||s(this,i,t,r))&&(i.pendingcb++,o=c(this,i,a,t,e,r)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||m(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},a.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(this,t("_process"))},{"./_stream_duplex":386,"./internal/streams/stream":392,_process:375,buffer:86,"buffer-shims":85,"core-util-is":140,inherits:332,"process-nextick-args":374,"util-deprecate":428}],391:[function(t,e,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}t("buffer").Buffer;var i=t("buffer-shims");e.exports=n,n.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},n.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},n.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},n.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e}},{buffer:86,"buffer-shims":85}],392:[function(t,e,r){e.exports=t("events").EventEmitter},{events:151}],393:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],394:[function(t,e,r){"use strict";function n(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=n(t);if("string"!=typeof e&&(M.isEncoding===v||!v(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=h,this.end=p,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=d,this.end=g,e=3;break;default:return this.write=y,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function u(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r?0:(i=a(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r?0:(i=a(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0)}function s(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(r);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(r+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(r+2)}}function l(t){var e=this.lastTotal-this.lastNeed,r=s(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){var r=u(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e}function h(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function p(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function d(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function y(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}var M=t("safe-buffer").Buffer,v=M.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=f,o.prototype.text=c,o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":405}],395:[function(t,e,r){(r=e.exports=t("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":386,"./lib/_stream_passthrough.js":387,"./lib/_stream_readable.js":388,"./lib/_stream_transform.js":389,"./lib/_stream_writable.js":390}],396:[function(t,e,r){e.exports=t("./readable").Transform},{"./readable":395}],397:[function(t,e,r){!function(t,n){"object"==typeof r&&void 0!==e?e.exports=n():t.createREGL=n()}(this,function(){"use strict";function t(t){return"undefined"!=typeof btoa?btoa(t):"base64:"+t}function e(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,r){t||e(r)}function n(t){return t?": "+t:""}function i(t,r,i){t in r||e("unknown parameter ("+t+")"+n(i)+". possible values: "+Object.keys(r).join())}function o(t,r){$t(t)||e("invalid parameter type"+n(r)+". must be a typed array")}function a(t,r,i){typeof t!==r&&e("invalid parameter type"+n(i)+". expected "+r+", got "+typeof t)}function u(t,r){t>=0&&(0|t)===t||e("invalid parameter type, ("+t+")"+n(r)+". must be a nonnegative integer")}function s(t,r,i){r.indexOf(t)<0&&e("invalid value"+n(i)+". must be one of: "+r)}function l(t){Object.keys(t).forEach(function(t){ee.indexOf(t)<0&&e('invalid regl constructor argument "'+t+'". must be one of '+ee)})}function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function h(t,e){this.number=t,this.line=e,this.errors=[]}function p(t,e,r){this.file=t,this.line=e,this.message=r}function d(){var t=new Error,e=(t.stack||t).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return n?n[1]:"unknown"}function g(){var t=new Error,e=(t.stack||t).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return n?n[1]:"unknown"}function y(e,r){var n=e.split("\n"),i=1,o=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=r||d(),a.unknown.lines.push(new h(0,""));for(var u=0;u<n.length;++u){var s=n[u],l=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(s);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(i=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[o].name=p[1]?t(p[2]):p[2])}a[o].lines.push(new h(i++,s))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function m(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var r=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);r?e.push(new p(0|r[1],0|r[2],r[3].trim())):t.length>0&&e.push(new p("unknown",0,t))}}),e}function M(t,e){e.forEach(function(e){var r=t[e.file];if(r){var n=r.index[e.line];if(n)return n.errors.push(e),void(r.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}function v(t,e,n,i,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";A(n,"string",u+" shader source must be a string",o);var s=y(n,o),l=m(a);M(s,l),Object.keys(s).forEach(function(t){function e(t,e){n.push(t),i.push(e||"")}var r=s[t];if(r.hasErrors){var n=[""],i=[""];e("file number "+t+": "+r.name+"\n","color:red;text-decoration:underline;font-weight:bold"),r.lines.forEach(function(t){if(t.errors.length>0){e(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var r=0;t.errors.forEach(function(n){var i=n.message,o=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(o){var a=o[1];switch(i=o[2],a){case"assign":a="="}r=Math.max(t.line.indexOf(a,r),0)}else r=0;e(c("| ",6)),e(c("^^^",r+3)+"\n","font-weight:bold"),e(c("| ",6)),e(i+"\n","font-weight:bold")}),e(c("| ",6)+"\n")}else e(c(t.number,4)+"|  "),e(t.line+"\n","color:red")}),"undefined"!=typeof document?(i[0]=n.join("%c"),console.log.apply(console,i)):console.log(n.join(""))}}),r.raise("Error compiling "+u+" shader, "+s[0].name)}}function b(t,e,n,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=y(n,o),s='Error linking program with vertex shader, "'+y(i,o)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+a),r.raise(s)}}function w(t){t._commandRef=d()}function x(t,e,r,n){function i(t){return t?n.id(t):0}function o(t,e){Object.keys(e).forEach(function(e){t[n.id(e)]=!0})}w(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var u=t._attributeSet={};o(u,r.static),o(u,r.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function D(t,r){var n=g();e(t+" in command "+(r||d())+("unknown"===n?"":" called from "+n))}function j(t,e,r){t||D(e,r||d())}function N(t,e,r,i){t in e||D("unknown parameter ("+t+")"+n(r)+". possible values: "+Object.keys(e).join(),i||d())}function A(t,e,r,i){typeof t!==e&&D("invalid parameter type"+n(r)+". expected "+e+", got "+typeof t,i||d())}function L(t){t()}function T(t,e,r){t.texture?s(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):s(t.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")}function E(t,e){return t===ce||t===le||t===fe?2:t===he?4:pe[t]*e}function I(t){return!(t&t-1||!t)}function O(t,e,n){var i,o=e.width,a=e.height,u=e.channels;r(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===re&&t.wrapT===re||r(I(o)&&I(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&r(t.minFilter!==ie&&t.minFilter!==ae&&t.minFilter!==oe&&t.minFilter!==ue,"min filter requires mipmap"):(r(I(o)&&I(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===se&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(t.minFilter===ne&&t.magFilter===ne,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(i=0;i<16;++i)if(s[i]){var l=o>>i,c=a>>i;r(e.mipmask&1<<i,"missing mipmap data");var f=s[i];if(r(f.width===l&&f.height===c,"invalid shape for mip images"),r(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(E(f.type,u)*l/f.unpackAlignment)*f.unpackAlignment;r(f.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||r(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")}function _(t,e,n,i){var o=t.width,a=t.height,u=t.channels;r(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),r(o===a,"cube map must be square"),r(e.wrapS===re&&e.wrapT===re,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var l=n[s];r(l.width===o&&l.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!l.compressed,"can not generate mipmap for compressed textures"),r(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,f=0;f<16;++f){var h=c[f];if(h){var p=o>>f,d=a>>f;r(l.mipmask&1<<f,"missing mipmap data"),r(h.width===p&&h.height===d,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===p*d*Math.max(E(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}function S(t,e){this.id=ge++,this.type=t,this.data=e}function C(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(t){if(0===t.length)return[];var e=t.charAt(0),r=t.charAt(t.length-1);if(t.length>1&&e===r&&('"'===e||"'"===e))return['"'+C(t.substr(1,t.length-2))+'"'];var n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(n)return z(t.substr(0,n.index)).concat(z(n[1])).concat(z(t.substr(n.index+n[0].length)));var i=t.split(".");if(1===i.length)return['"'+C(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(z(i[a]));return o}function k(t){return"["+z(t).join("][")+"]"}function P(t,e){return new S(t,k(e+""))}function Q(t){return"function"==typeof t&&!t._reglType||t instanceof S}function U(t,e){return"function"==typeof t?new S(ye,t):t}function B(){var t={"":0},e=[""];return{id:function(r){var n=t[r];return n||(n=t[r]=e.length,e.push(r),n)},str:function(t){return e[t]}}}function Y(t,e,r){function n(){var e=window.innerWidth,n=window.innerHeight;if(t!==document.body){var i=t.getBoundingClientRect();e=i.right-i.left,n=i.bottom-i.top}o.width=r*e,o.height=r*n,te(o.style,{width:e+"px",height:n+"px"})}function i(){window.removeEventListener("resize",n),t.removeChild(o)}var o=document.createElement("canvas");return te(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",te(t.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:o,onDestroy:i}}function R(t,e){function r(r){try{return t.getContext(r,e)}catch(t){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}function F(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function G(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function V(t){return"string"==typeof t?t.split():(de(Array.isArray(t),"invalid extension array"),t)}function W(t){return"string"==typeof t?(de("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function H(t){var e,r,n,i,o=t||{},a={},u=[],s=[],l="undefined"==typeof window?1:window.devicePixelRatio,c=!1,f=function(t){t&&de.raise(t)},h=function(){};if("string"==typeof o?(de("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),de(e,"invalid query string for element")):"object"==typeof o?F(o)?e=o:G(o)?(i=o,n=i.canvas):(de.constructor(o),"gl"in o?i=o.gl:"canvas"in o?n=W(o.canvas):"container"in o&&(r=W(o.container)),"attributes"in o&&(a=o.attributes,de.type(a,"object","invalid context attributes")),"extensions"in o&&(u=V(o.extensions)),"optionalExtensions"in o&&(s=V(o.optionalExtensions)),"onDone"in o&&(de.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(l=+o.pixelRatio,de(l>0,"invalid pixel ratio"))):de.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?n=e:r=e),!i){if(!n){de("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=Y(r||document.body,f,l);if(!p)return null;n=p.canvas,h=p.onDestroy}i=R(n,a)}return i?{gl:i,canvas:n,container:r,extensions:u,optionalExtensions:s,pixelRatio:l,profile:c,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function q(t,e){function r(e){de.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(t){}return!!r}for(var n={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(t){if(!r(t))throw new Error("(regl): error restoring extension "+t)})}}}function X(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||$t(t.data))}function Z(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n);return r}function K(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function J(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1}function $(t){var e=K(t),r=Ee[J(e)>>2];return r.length>0?r.pop():new ArrayBuffer(e)}function tt(t){Ee[J(t.byteLength)>>2].push(t)}function et(t,e){var r=null;switch(t){case xe:r=new Int8Array($(e),0,e);break;case De:r=new Uint8Array($(e),0,e);break;case je:r=new Int16Array($(2*e),0,e);break;case Ne:r=new Uint16Array($(2*e),0,e);break;case Ae:r=new Int32Array($(4*e),0,e);break;case Le:r=new Uint32Array($(4*e),0,e);break;case Te:r=new Float32Array($(4*e),0,e);break;default:return null}return r.length!==e?r.subarray(0,e):r}function rt(t){tt(t.buffer)}function nt(t,e,r){for(var n=0;n<e;++n)r[n]=t[n]}function it(t,e,r,n){for(var i=0,o=0;o<e;++o)for(var a=t[o],u=0;u<r;++u)n[i++]=a[u]}function ot(t,e,r,n,i,o){for(var a=o,u=0;u<e;++u)for(var s=t[u],l=0;l<r;++l)for(var c=s[l],f=0;f<n;++f)i[a++]=c[f]}function at(t,e,r,n,i){for(var o=1,a=r+1;a<e.length;++a)o*=e[a];var u=e[r];if(e.length-r==4){var s=e[r+1],l=e[r+2],c=e[r+3];for(a=0;a<u;++a)ot(t[a],s,l,c,n,i),i+=o}else for(a=0;a<u;++a)at(t[a],e,r+1,n,i),i+=o}function ut(t,e,r,n){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=n||Ie.allocType(r,i);switch(e.length){case 0:break;case 1:nt(t,e[0],a);break;case 2:it(t,e[0],e[1],a);break;case 3:ot(t,e[0],e[1],e[2],a,0);break;default:at(t,e,0,a,0)}return a}function st(t){for(var e=[],r=t;r.length;r=r[0])e.push(r.length);return e}function lt(t){return 0|Jt[Object.prototype.toString.call(t)]}function ct(t,e){for(var r=0;r<e.length;++r)t[r]=e[r]}function ft(t,e,r,n,i,o,a){for(var u=0,s=0;s<r;++s)for(var l=0;l<n;++l)t[u++]=e[i*s+o*l+a]}function ht(t,e,r){function n(e){this.id=f++,this.buffer=t.createBuffer(),this.type=e,this.usage=ke,this.byteLength=0,this.dimension=1,this.dtype=Qe,this.persistentData=null,r.profile&&(this.stats={size:0})}function i(t,e){var r=p.pop();return r||(r=new n(t)),r.bind(),u(r,e,Pe,0,1,!1),r}function o(t){p.push(t)}function a(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function u(t,e,r,n,i,o){var u;if(t.usage=r,Array.isArray(e)){if(t.dtype=n||Ue,e.length>0){var s;if(Array.isArray(e[0])){u=ze(e);for(var l=1,c=1;c<u.length;++c)l*=u[c];t.dimension=l,a(t,s=Ce(e,u,t.dtype),r),o?t.persistentData=s:Ie.freeType(s)}else if("number"==typeof e[0]){t.dimension=i;var f=Ie.allocType(t.dtype,e.length);ct(f,e),a(t,f,r),o?t.persistentData=f:Ie.freeType(f)}else $t(e[0])?(t.dimension=e[0].length,t.dtype=n||lt(e[0])||Ue,s=Ce(e,[e.length,e[0].length],t.dtype),a(t,s,r),o?t.persistentData=s:Ie.freeType(s)):de.raise("invalid buffer data")}}else if($t(e))t.dtype=n||lt(e),t.dimension=i,a(t,e,r),o&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(X(e)){u=e.shape;var h=e.stride,p=e.offset,d=0,g=0,y=0,m=0;1===u.length?(d=u[0],g=1,y=h[0],m=0):2===u.length?(d=u[0],g=u[1],y=h[0],m=h[1]):de.raise("invalid shape"),t.dtype=n||lt(e.data)||Ue,t.dimension=g;var M=Ie.allocType(t.dtype,d*g);ft(M,e.data,d,g,y,m,p),a(t,M,r),o?t.persistentData=M:Ie.freeType(M)}else de.raise("invalid buffer data")}function s(r){e.bufferCount--;var n=r.buffer;de(n,"buffer must not be deleted already"),t.deleteBuffer(n),r.buffer=null,delete h[r.id]}function l(i,o,a,l){function c(e){var n=ke,i=null,o=0,a=0,s=1;return Array.isArray(e)||$t(e)||X(e)?i=e:"number"==typeof e?o=0|e:e&&(de.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(de(null===i||Array.isArray(i)||$t(i)||X(i),"invalid data for buffer"),i=e.data),"usage"in e&&(de.parameter(e.usage,Se,"invalid buffer usage"),n=Se[e.usage]),"type"in e&&(de.parameter(e.type,_e,"invalid buffer type"),a=_e[e.type]),"dimension"in e&&(de.type(e.dimension,"number","invalid dimension"),s=0|e.dimension),"length"in e&&(de.nni(o,"buffer length must be a nonnegative integer"),o=0|e.length)),d.bind(),i?u(d,i,n,a,s,l):(t.bufferData(d.type,o,n),d.dtype=a||Qe,d.usage=n,d.dimension=s,d.byteLength=o),r.profile&&(d.stats.size=d.byteLength*Be[d.dtype]),c}function f(e,r){de(r+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+r+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,r,e)}function p(t,e){var r,n=0|(e||0);if(d.bind(),Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=Ie.allocType(d.dtype,t.length);ct(i,t),f(i,n),Ie.freeType(i)}else if(Array.isArray(t[0])||$t(t[0])){r=ze(t);var o=Ce(t,r,d.dtype);f(o,n),Ie.freeType(o)}else de.raise("invalid buffer data")}else if($t(t))f(t,n);else if(X(t)){r=t.shape;var a=t.stride,u=0,s=0,l=0,h=0;1===r.length?(u=r[0],s=1,l=a[0],h=0):2===r.length?(u=r[0],s=r[1],l=a[0],h=a[1]):de.raise("invalid shape");var p=Array.isArray(t.data)?d.dtype:lt(t.data),g=Ie.allocType(p,u*s);ft(g,t.data,u,s,l,h,t.offset),f(g,n),Ie.freeType(g)}else de.raise("invalid data for buffer subdata");return c}e.bufferCount++;var d=new n(o);return h[d.id]=d,a||c(i),c._reglType="buffer",c._buffer=d,c.subdata=p,r.profile&&(c.stats=d.stats),c.destroy=function(){s(d)},c}function c(){we(h).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})}var f=0,h={};n.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},n.prototype.destroy=function(){s(this)};var p=[];return r.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(h).forEach(function(e){t+=h[e].stats.size}),t}),{create:l,createStream:i,destroyStream:o,clear:function(){we(h).forEach(s),p.forEach(s)},getBuffer:function(t){return t&&t._buffer instanceof n?t._buffer:null},restore:c,_initBuffer:u}}function pt(t,e,r,n){function i(t){this.id=f++,c[this.id]=this,this.buffer=t,this.primType=Ge,this.vertCount=0,this.type=0}function o(t){var e=p.pop();return e||(e=new i(r.create(null,Ke,!0,!1)._buffer)),u(e,t,Je,-1,-1,0,0),e}function a(t){p.push(t)}function u(n,i,o,a,u,s,l){if(n.buffer.bind(),i){var c=l;l||$t(i)&&(!X(i)||$t(i.data))||(c=e.oes_element_index_uint?Ze:qe),r._initBuffer(n.buffer,i,o,c,3)}else t.bufferData(Ke,s,o),n.buffer.dtype=f||We,n.buffer.usage=o,n.buffer.dimension=3,n.buffer.byteLength=s;var f=l;if(!l){switch(n.buffer.dtype){case We:case Ve:f=We;break;case qe:case He:f=qe;break;case Ze:case Xe:f=Ze;break;default:de.raise("unsupported type for element array")}n.buffer.dtype=f}n.type=f,de(f!==Ze||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=n.buffer.byteLength,f===qe?h>>=1:f===Ze&&(h>>=2)),n.vertCount=h;var p=a;if(a<0){p=Ge;var d=n.buffer.dimension;1===d&&(p=Re),2===d&&(p=Fe),3===d&&(p=Ge)}n.primType=p}function s(t){n.elementsCount--,de(null!==t.buffer,"must not double destroy elements"),delete c[t.id],t.buffer.destroy(),t.buffer=null}function l(t,e){function o(t){if(t)if("number"==typeof t)a(t),l.primType=Ge,l.vertCount=0|t,l.type=We;else{var e=null,r=$e,n=-1,i=-1,s=0,c=0;Array.isArray(t)||$t(t)||X(t)?e=t:(de.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,de(Array.isArray(e)||$t(e)||X(e),"invalid data for element buffer")),"usage"in t&&(de.parameter(t.usage,Se,"invalid element buffer usage"),r=Se[t.usage]),"primitive"in t&&(de.parameter(t.primitive,Ye,"invalid element buffer primitive"),n=Ye[t.primitive]),"count"in t&&(de("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),i=0|t.count),"type"in t&&(de.parameter(t.type,h,"invalid buffer type"),c=h[t.type]),"length"in t?s=0|t.length:(s=i,c===qe||c===He?s*=2:c!==Ze&&c!==Xe||(s*=4))),u(l,e,r,n,i,s,c)}else a(),l.primType=Ge,l.vertCount=0,l.type=We;return o}var a=r.create(null,Ke,!0),l=new i(a._buffer);return n.elementsCount++,o(t),o._reglType="elements",o._elements=l,o.subdata=function(t,e){return a.subdata(t,e),o},o.destroy=function(){s(l)},o}var c={},f=0,h={uint8:We,uint16:qe};e.oes_element_index_uint&&(h.uint32=Ze),i.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:l,createStream:o,destroyStream:a,getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){we(c).forEach(s)}}}function dt(t){for(var e=Ie.allocType(rr,t.length),r=0;r<t.length;++r)if(isNaN(t[r]))e[r]=65535;else if(t[r]===1/0)e[r]=31744;else if(t[r]===-1/0)e[r]=64512;else{tr[0]=t[r];var n=er[0],i=n>>>31<<15,o=(n<<1>>>24)-127,a=n>>13&1023;if(o<-24)e[r]=i;else if(o<-14){var u=-14-o;e[r]=i+(a+1024>>u)}else e[r]=o>15?i+31744:i+(o+15<<10)+a}return e}function gt(t){return Array.isArray(t)||$t(t)}function yt(t){return"[object "+t+"]"}function mt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Mt(t){return!!Array.isArray(t)&&!(0===t.length||!gt(t[0]))}function vt(t){return Object.prototype.toString.call(t)}function bt(t){return vt(t)===dn}function wt(t){return vt(t)===gn}function xt(t){return vt(t)===yn}function Dt(t){return vt(t)===mn}function jt(t){if(!t)return!1;var e=vt(t);return Mn.indexOf(e)>=0||mt(t)||Mt(t)||X(t)}function Nt(t){return 0|Jt[Object.prototype.toString.call(t)]}function At(t,e){var r=e.length;switch(t.type){case kr:case Pr:case Qr:case Ur:var n=Ie.allocType(t.type,r);n.set(e),t.data=n;break;case Dr:t.data=dt(e);break;default:de.raise("unsupported texture type, must specify a typed array")}}function Lt(t,e){return Ie.allocType(t.type===Dr?Ur:t.type,e)}function Tt(t,e){t.type===Dr?(t.data=dt(e),Ie.freeType(e)):t.data=e}function Et(t,e,r,n,i,o){for(var a=t.width,u=t.height,s=t.channels,l=Lt(t,a*u*s),c=0,f=0;f<u;++f)for(var h=0;h<a;++h)for(var p=0;p<s;++p)l[c++]=e[r*h+n*f+i*p+o];Tt(t,l)}function It(t,e,r,n,i,o){var a;if(a=void 0!==bn[t]?bn[t]:pn[t]*vn[e],o&&(a*=6),i){for(var u=0,s=r;s>=1;)u+=a*s*s,s/=2;return u}return a*r*n}function Ot(t,e,r,n,i,o,a){function u(){this.internalformat=ur,this.format=ur,this.type=kr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function s(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function l(t,n){if("object"==typeof n&&n){if("premultiplyAlpha"in n&&(de.type(n.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(de.type(n.flipY,"boolean","invalid texture flip"),t.flipY=n.flipY),"alignment"in n&&(de.oneOf(n.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=n.alignment),"colorSpace"in n&&(de.parameter(n.colorSpace,Q,"invalid colorSpace"),t.colorSpace=Q[n.colorSpace]),"type"in n){var i=n.type;de(e.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),de(e.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),de(e.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(i,U,"invalid texture type"),t.type=U[i]}var o=t.width,a=t.height,u=t.channels,s=!1;"shape"in n?(de(Array.isArray(n.shape)&&n.shape.length>=2,"shape must be an array"),o=n.shape[0],a=n.shape[1],3===n.shape.length&&(u=n.shape[2],de(u>0&&u<=4,"invalid number of channels"),s=!0),de(o>=0&&o<=r.maxTextureSize,"invalid width"),de(a>=0&&a<=r.maxTextureSize,"invalid height")):("radius"in n&&(o=a=n.radius,de(o>=0&&o<=r.maxTextureSize,"invalid radius")),"width"in n&&(o=n.width,de(o>=0&&o<=r.maxTextureSize,"invalid width")),"height"in n&&(a=n.height,de(a>=0&&a<=r.maxTextureSize,"invalid height")),"channels"in n&&(u=n.channels,de(u>0&&u<=4,"invalid number of channels"),s=!0)),t.width=0|o,t.height=0|a,t.channels=0|u;var l=!1;if("format"in n){var c=n.format;de(e.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(c,B,"invalid texture format");var f=t.internalformat=B[c];t.format=Z[f],c in U&&("type"in n||(t.type=U[c])),c in Y&&(t.compressed=!0),l=!0}!s&&l?t.channels=pn[t.format]:s&&!l?t.channels!==hn[t.format]&&(t.format=t.internalformat=hn[t.channels]):l&&s&&de(t.channels===pn[t.format],"number of channels inconsistent with specified format")}}function c(e){t.pixelStorei(an,e.flipY),t.pixelStorei(un,e.premultiplyAlpha),t.pixelStorei(sn,e.colorSpace),t.pixelStorei(on,e.unpackAlignment)}function f(){u.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(t,e){var n=null;if(jt(e)?n=e:e&&(de.type(e,"object","invalid pixel data type"),l(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),jt(e.data)&&(n=e.data)),de(!t.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){de(!n,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,de(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=o&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(n){if($t(n))t.channels=t.channels||4,t.data=n,"type"in e||t.type!==kr||(t.type=Nt(n));else if(mt(n))t.channels=t.channels||4,At(t,n),t.alignment=1,t.needsFree=!0;else if(X(n)){var u=n.data;Array.isArray(u)||t.type!==kr||(t.type=Nt(u));var s,c,f,h,p,d,g=n.shape,y=n.stride;3===g.length?(f=g[2],d=y[2]):(de(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),s=g[0],c=g[1],h=y[0],p=y[1],t.alignment=1,t.width=s,t.height=c,t.channels=f,t.format=t.internalformat=hn[f],t.needsFree=!0,Et(t,u,h,p,d,n.offset)}else if(bt(n)||wt(n))bt(n)?t.element=n:t.element=n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(xt(n))t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if(Dt(n))t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(Mt(n)){var m=t.width||n[0].length,M=t.height||n.length,v=t.channels;v=gt(n[0][0])?v||n[0][0].length:v||1;for(var b=Oe.shape(n),w=1,x=0;x<b.length;++x)w*=b[x];var D=Lt(t,w);Oe.flatten(n,b,"",D),Tt(t,D),t.alignment=1,t.width=m,t.height=M,t.channels=v,t.format=t.internalformat=hn[v],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Ur?de(r.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Dr&&de(r.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(e,r,i){var o=e.element,a=e.data,u=e.internalformat,s=e.format,l=e.type,f=e.width,h=e.height;c(e),o?t.texImage2D(r,i,s,s,l,o):e.compressed?t.compressedTexImage2D(r,i,u,f,h,0,a):e.needsCopy?(n(),t.copyTexImage2D(r,i,s,e.xOffset,e.yOffset,f,h,0)):t.texImage2D(r,i,s,f,h,0,s,l,a)}function d(e,r,i,o,a){var u=e.element,s=e.data,l=e.internalformat,f=e.format,h=e.type,p=e.width,d=e.height;c(e),u?t.texSubImage2D(r,a,i,o,f,h,u):e.compressed?t.compressedTexSubImage2D(r,a,i,o,l,p,d,s):e.needsCopy?(n(),t.copyTexSubImage2D(r,a,i,o,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(r,a,i,o,p,d,f,h,s)}function g(){return K.pop()||new f}function y(t){t.needsFree&&Ie.freeType(t.data),f.call(t),K.push(t)}function m(){u.call(this),this.genMipmaps=!1,this.mipmapHint=tn,this.mipmask=0,this.images=Array(16)}function M(t,e,r){var n=t.images[0]=g();t.mipmask=1,n.width=t.width=e,n.height=t.height=r,n.channels=t.channels=4}function v(t,e){var r=null;if(jt(e))r=t.images[0]=g(),s(r,t),h(r,e),t.mipmask=1;else if(l(t,e),Array.isArray(e.mipmap))for(var n=e.mipmap,i=0;i<n.length;++i)r=t.images[i]=g(),s(r,t),r.width>>=i,r.height>>=i,h(r,n[i]),t.mipmask|=1<<i;else r=t.images[0]=g(),s(r,t),h(r,e),t.mipmask=1;s(t,t.images[0]),(t.compressed&&t.internalformat===jr||t.internalformat===Nr||t.internalformat===Ar||t.internalformat===Lr)&&de(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function b(t,e){for(var r=t.images,n=0;n<r.length;++n){if(!r[n])return;p(r[n],e,n)}}function w(){var t=J.pop()||new m;u.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function x(t){for(var e=t.images,r=0;r<e.length;++r)e[r]&&y(e[r]),e[r]=null;J.push(t)}function D(){this.minFilter=Hr,this.magFilter=Hr,this.wrapS=Fr,this.wrapT=Fr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=tn}function j(t,e){if("min"in e){var n=e.min;de.parameter(n,P),t.minFilter=P[n],fn.indexOf(t.minFilter)>=0&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;de.parameter(i,k),t.magFilter=k[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var u=e.wrap;"string"==typeof u?(de.parameter(u,z),o=a=z[u]):Array.isArray(u)&&(de.parameter(u[0],z),de.parameter(u[1],z),o=z[u[0]],a=z[u[1]])}else{if("wrapS"in e){var s=e.wrapS;de.parameter(s,z),o=z[s]}if("wrapT"in e){var l=e.wrapT;de.parameter(l,z),a=z[l]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var c=e.anisotropic;de("number"==typeof c&&c>=1&&c<=r.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var f=!1;switch(typeof e.mipmap){case"string":de.parameter(e.mipmap,C,"invalid mipmap hint"),t.mipmapHint=C[e.mipmap],t.genMipmaps=!0,f=!0;break;case"boolean":f=t.genMipmaps=e.mipmap;break;case"object":de(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,f=!0;break;default:de.raise("invalid mipmap type")}!f||"min"in e||(t.minFilter=Xr)}}function N(r,n){t.texParameteri(n,Wr,r.minFilter),t.texParameteri(n,Vr,r.magFilter),t.texParameteri(n,Br,r.wrapS),t.texParameteri(n,Yr,r.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(n,nn,r.anisotropic),r.genMipmaps&&(t.hint($r,r.mipmapHint),t.generateMipmap(n))}function A(e){u.call(this),this.mipmask=0,this.internalformat=ur,this.id=$++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new D,a.profile&&(this.stats={size:0})}function L(e){t.activeTexture(cn),t.bindTexture(e.target,e.texture)}function T(){var e=rt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(ir,null)}function E(e){var r=e.texture;de(r,"must not double destroy texture");var n=e.unit,i=e.target;n>=0&&(t.activeTexture(cn+n),t.bindTexture(i,null),rt[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete tt[e.id],o.textureCount--}function I(e,n){function i(t,e){var n=c.texInfo;D.call(n);var o=w();return"number"==typeof t?"number"==typeof e?M(o,0|t,0|e):M(o,0|t,0|t):t?(de.type(t,"object","invalid arguments to regl.texture"),j(n,t),v(o,t)):M(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),c.mipmask=o.mipmask,s(c,o),de.texture2D(n,o,r),c.internalformat=o.internalformat,i.width=o.width,i.height=o.height,L(c),b(o,ir),N(n,ir),T(),x(o),a.profile&&(c.stats.size=It(c.internalformat,c.type,o.width,o.height,n.genMipmaps,!1)),i.format=G[c.internalformat],i.type=V[c.type],i.mag=W[n.magFilter],i.min=H[n.minFilter],i.wrapS=q[n.wrapS],i.wrapT=q[n.wrapT],i}function u(t,e,r,n){de(!!t,"must specify image data");var o=0|e,a=0|r,u=0|n,l=g();return s(l,c),l.width=0,l.height=0,h(l,t),l.width=l.width||(c.width>>u)-o,l.height=l.height||(c.height>>u)-a,de(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),de(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),de(c.mipmask&1<<u,"missing mipmap data"),de(l.data||l.element||l.needsCopy,"missing image data"),L(c),d(l,ir,o,a,u),T(),y(l),i}function l(e,r){var n=0|e,o=0|r||n;if(n===c.width&&o===c.height)return i;i.width=c.width=n,i.height=c.height=o,L(c);for(var u=0;c.mipmask>>u;++u)t.texImage2D(ir,u,c.format,n>>u,o>>u,0,c.format,c.type,null);return T(),a.profile&&(c.stats.size=It(c.internalformat,c.type,n,o,!1,!1)),i}var c=new A(ir);return tt[c.id]=c,o.textureCount++,i(e,n),i.subimage=u,i.resize=l,i._reglType="texture2d",i._texture=c,a.profile&&(i.stats=c.stats),i.destroy=function(){c.decRef()},i}function O(e,n,i,u,c,f){function p(t,e,n,i,o,u){var c,f=I.texInfo;for(D.call(f),c=0;c<6;++c)O[c]=w();if("number"!=typeof t&&t)if("object"==typeof t)if(e)v(O[0],t),v(O[1],e),v(O[2],n),v(O[3],i),v(O[4],o),v(O[5],u);else if(j(f,t),l(I,t),"faces"in t){var h=t.faces;for(de(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),c=0;c<6;++c)de("object"==typeof h[c]&&!!h[c],"invalid input for cube map face"),s(O[c],I),v(O[c],h[c])}else for(c=0;c<6;++c)v(O[c],t);else de.raise("invalid arguments to cube map");else{var d=0|t||1;for(c=0;c<6;++c)M(O[c],d,d)}for(s(I,O[0]),f.genMipmaps?I.mipmask=(O[0].width<<1)-1:I.mipmask=O[0].mipmask,de.textureCube(I,f,O,r),I.internalformat=O[0].internalformat,p.width=O[0].width,p.height=O[0].height,L(I),c=0;c<6;++c)b(O[c],ar+c);for(N(f,or),T(),a.profile&&(I.stats.size=It(I.internalformat,I.type,p.width,p.height,f.genMipmaps,!0)),p.format=G[I.internalformat],p.type=V[I.type],p.mag=W[f.magFilter],p.min=H[f.minFilter],p.wrapS=q[f.wrapS],p.wrapT=q[f.wrapT],c=0;c<6;++c)x(O[c]);return p}function m(t,e,r,n,i){de(!!e,"must specify image data"),de("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|r,a=0|n,u=0|i,l=g();return s(l,I),l.width=0,l.height=0,h(l,e),l.width=l.width||(I.width>>u)-o,l.height=l.height||(I.height>>u)-a,de(I.type===l.type&&I.format===l.format&&I.internalformat===l.internalformat,"incompatible format for texture.subimage"),de(o>=0&&a>=0&&o+l.width<=I.width&&a+l.height<=I.height,"texture.subimage write out of bounds"),de(I.mipmask&1<<u,"missing mipmap data"),de(l.data||l.element||l.needsCopy,"missing image data"),L(I),d(l,ar+t,o,a,u),T(),y(l),p}function E(e){var r=0|e;if(r!==I.width){p.width=I.width=r,p.height=I.height=r,L(I);for(var n=0;n<6;++n)for(var i=0;I.mipmask>>i;++i)t.texImage2D(ar+n,i,I.format,r>>i,r>>i,0,I.format,I.type,null);return T(),a.profile&&(I.stats.size=It(I.internalformat,I.type,p.width,p.height,!1,!0)),p}}var I=new A(or);tt[I.id]=I,o.cubeCount++;var O=new Array(6);return p(e,n,i,u,c,f),p.subimage=m,p.resize=E,p._reglType="textureCube",p._texture=I,a.profile&&(p.stats=I.stats),p.destroy=function(){I.decRef()},p}function _(){for(var e=0;e<et;++e)t.activeTexture(cn+e),t.bindTexture(ir,null),rt[e]=null;we(tt).forEach(E),o.cubeCount=0,o.textureCount=0}function S(){we(tt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;r<32;++r)if(0!=(e.mipmask&1<<r))if(e.target===ir)t.texImage2D(ir,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)t.texImage2D(ar+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);N(e.texInfo,e.target)})}var C={"don't care":tn,"dont care":tn,nice:rn,fast:en},z={repeat:Rr,clamp:Fr,mirror:Gr},k={nearest:Hr,linear:qr},P=te({mipmap:Jr,"nearest mipmap nearest":Xr,"linear mipmap nearest":Zr,"nearest mipmap linear":Kr,"linear mipmap linear":Jr},k),Q={none:0,browser:ln},U={uint8:kr,rgba4:gr,rgb565:mr,"rgb5 a1":yr},B={alpha:sr,luminance:cr,"luminance alpha":fr,rgb:lr,rgba:ur,rgba4:hr,"rgb5 a1":pr,rgb565:dr},Y={};e.ext_srgb&&(B.srgb=wr,B.srgba=xr),e.oes_texture_float&&(U.float32=U.float=Ur),e.oes_texture_half_float&&(U.float16=U["half float"]=Dr),e.webgl_depth_texture&&(te(B,{depth:vr,"depth stencil":br}),te(U,{uint16:Pr,uint32:Qr,"depth stencil":Mr})),e.webgl_compressed_texture_s3tc&&te(Y,{"rgb s3tc dxt1":jr,"rgba s3tc dxt1":Nr,"rgba s3tc dxt3":Ar,"rgba s3tc dxt5":Lr}),e.webgl_compressed_texture_atc&&te(Y,{"rgb atc":Tr,"rgba atc explicit alpha":Er,"rgba atc interpolated alpha":Ir}),e.webgl_compressed_texture_pvrtc&&te(Y,{"rgb pvrtc 4bppv1":Or,"rgb pvrtc 2bppv1":_r,"rgba pvrtc 4bppv1":Sr,"rgba pvrtc 2bppv1":Cr}),e.webgl_compressed_texture_etc1&&(Y["rgb etc1"]=zr);var R=Array.prototype.slice.call(t.getParameter(nr));Object.keys(Y).forEach(function(t){var e=Y[t];R.indexOf(e)>=0&&(B[t]=e)});var F=Object.keys(B);r.textureFormats=F;var G=[];Object.keys(B).forEach(function(t){var e=B[t];G[e]=t});var V=[];Object.keys(U).forEach(function(t){var e=U[t];V[e]=t});var W=[];Object.keys(k).forEach(function(t){var e=k[t];W[e]=t});var H=[];Object.keys(P).forEach(function(t){var e=P[t];H[e]=t});var q=[];Object.keys(z).forEach(function(t){var e=z[t];q[e]=t});var Z=F.reduce(function(t,e){var r=B[e];return r===cr||r===sr||r===cr||r===fr||r===vr||r===br?t[r]=r:r===pr||e.indexOf("rgba")>=0?t[r]=ur:t[r]=lr,t},{}),K=[],J=[],$=0,tt={},et=r.maxTextureUnits,rt=Array(et).map(function(){return null});return te(A.prototype,{bind:function(){var e=this;e.bindCount+=1;var r=e.unit;if(r<0){for(var n=0;n<et;++n){var i=rt[n];if(i){if(i.bindCount>0)continue;i.unit=-1}rt[n]=e,r=n;break}r>=et&&de.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<r+1&&(o.maxTextureUnits=r+1),e.unit=r,t.activeTexture(cn+r),t.bindTexture(e.target,e.texture)}return r},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&E(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(tt).forEach(function(e){t+=tt[e].stats.size}),t}),{create2D:I,createCube:O,clear:_,getTexture:function(t){return null},restore:S}}function _t(t,e,r){return Dn[t]*e*r}function St(t,e,r,n,i,o){function a(t,e,r){this.target=t,this.texture=e,this.renderbuffer=r;var n=0,i=0;e?(n=e.width,i=e.height):r&&(n=r.width,i=r.height),this.width=n,this.height=i}function u(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function s(t,e,r){if(t)if(t.texture){var n=t.texture._texture,i=Math.max(1,n.width),o=Math.max(1,n.height);de(i===e&&o===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var a=t.renderbuffer._renderbuffer;de(a.width===e&&a.height===r,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function l(e,r){r&&(r.texture?t.framebufferTexture2D(Nn,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(Nn,e,An,r.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=Ln,r=null,n=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),de.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(r=i,de(e===Ln)):"textureCube"===o?(r=i,de(e>=Tn&&e<Tn+6,"invalid cube map target")):"renderbuffer"===o?(n=i,e=An):de.raise("invalid regl object for attachment"),new a(e,r,n)}function f(t,e,r,o,u){if(r){var s=n.create2D({width:t,height:e,format:o,type:u});return s._texture.refCount=0,new a(Ln,s,null)}var l=i.create({width:t,height:e,format:o});return l._renderbuffer.refCount=0,new a(An,null,l)}function h(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,r){t&&(t.texture?t.texture.resize(e,r):t.renderbuffer&&t.renderbuffer.resize(e,r))}function d(){this.id=N++,A[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function g(t){t.colorAttachments.forEach(u),u(t.depthAttachment),u(t.stencilAttachment),u(t.depthStencilAttachment)}function y(e){var r=e.framebuffer;de(r,"must not double destroy framebuffer"),t.deleteFramebuffer(r),e.framebuffer=null,o.framebufferCount--,delete A[e.id]}function m(e){var n;t.bindFramebuffer(Nn,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)l(En+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(Nn,En+n,Ln,null,0);t.framebufferTexture2D(Nn,_n,Ln,null,0),t.framebufferTexture2D(Nn,In,Ln,null,0),t.framebufferTexture2D(Nn,On,Ln,null,0),l(In,e.depthAttachment),l(On,e.stencilAttachment),l(_n,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Nn);o!==Sn&&de.raise("framebuffer configuration not supported, status = "+Rn[o]),t.bindFramebuffer(Nn,w.next),w.cur=w.next,t.getError()}function M(t,n){function i(t,n){var o;de(w.next!==u,"can not update framebuffer which is currently in use");var a=e.webgl_draw_buffers,l=0,p=0,d=!0,y=!0,M=null,v=!0,b="rgba",N="uint8",A=1,L=null,T=null,E=null,I=!1;if("number"==typeof t)l=0|t,p=0|n||l;else if(t){de.type(t,"object","invalid arguments for framebuffer");var O=t;if("shape"in O){var _=O.shape;de(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),l=_[0],p=_[1]}else"radius"in O&&(l=p=O.radius),"width"in O&&(l=O.width),"height"in O&&(p=O.height);("color"in O||"colors"in O)&&(M=O.color||O.colors,Array.isArray(M)&&de(1===M.length||a,"multiple render targets not supported")),M||("colorCount"in O&&(A=0|O.colorCount,de(A>0,"invalid color buffer count")),"colorTexture"in O&&(v=!!O.colorTexture,b="rgba4"),"colorType"in O&&(N=O.colorType,v?(de(e.oes_texture_float||!("float"===N||"float32"===N),"you must enable OES_texture_float in order to use floating point framebuffer objects"),de(e.oes_texture_half_float||!("half float"===N||"float16"===N),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===N||"float16"===N?(de(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),b="rgba16f"):"float"!==N&&"float32"!==N||(de(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),b="rgba32f"),de.oneOf(N,j,"invalid color type")),"colorFormat"in O&&(b=O.colorFormat,x.indexOf(b)>=0?v=!0:D.indexOf(b)>=0?v=!1:v?de.oneOf(O.colorFormat,x,"invalid color format for texture"):de.oneOf(O.colorFormat,D,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(I=!(!O.depthTexture&&!O.depthStencilTexture),de(!I||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"==typeof O.depth?d=O.depth:(L=O.depth,y=!1)),"stencil"in O&&("boolean"==typeof O.stencil?y=O.stencil:(T=O.stencil,d=!1)),"depthStencil"in O&&("boolean"==typeof O.depthStencil?d=y=O.depthStencil:(E=O.depthStencil,d=!1,y=!1))}else l=p=1;var S=null,C=null,z=null,k=null;if(Array.isArray(M))S=M.map(c);else if(M)S=[c(M)];else for(S=new Array(A),o=0;o<A;++o)S[o]=f(l,p,v,b,N);de(e.webgl_draw_buffers||S.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),de(S.length<=r.maxColorAttachments,"too many color attachments, not supported"),l=l||S[0].width,p=p||S[0].height,L?C=c(L):d&&!y&&(C=f(l,p,I,"depth","uint32")),T?z=c(T):y&&!d&&(z=f(l,p,!1,"stencil","uint8")),E?k=c(E):!L&&!T&&y&&d&&(k=f(l,p,I,"depth stencil","depth stencil")),de(!!L+!!T+!!E<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var P=null;for(o=0;o<S.length;++o)if(s(S[o],l,p),de(!S[o]||S[o].texture&&zn.indexOf(S[o].texture._texture.format)>=0||S[o].renderbuffer&&Yn.indexOf(S[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),S[o]&&S[o].texture){var Q=kn[S[o].texture._texture.format]*Pn[S[o].texture._texture.type];null===P?P=Q:de(P===Q,"all color attachments much have the same number of bits per pixel.")}return s(C,l,p),de(!C||C.texture&&C.texture._texture.format===Cn||C.renderbuffer&&C.renderbuffer._renderbuffer.format===Qn,"invalid depth attachment for framebuffer object"),s(z,l,p),de(!z||z.renderbuffer&&z.renderbuffer._renderbuffer.format===Un,"invalid stencil attachment for framebuffer object"),s(k,l,p),de(!k||k.texture&&k.texture._texture.format===Bn||k.renderbuffer&&k.renderbuffer._renderbuffer.format===Bn,"invalid depth-stencil attachment for framebuffer object"),g(u),u.width=l,u.height=p,u.colorAttachments=S,u.depthAttachment=C,u.stencilAttachment=z,u.depthStencilAttachment=k,i.color=S.map(h),i.depth=h(C),i.stencil=h(z),i.depthStencil=h(k),i.width=u.width,i.height=u.height,m(u),i}function a(t,e){de(w.next!==u,"can not resize a framebuffer which is currently in use");var r=0|t,n=0|e||r;if(r===u.width&&n===u.height)return i;for(var o=u.colorAttachments,a=0;a<o.length;++a)p(o[a],r,n);return p(u.depthAttachment,r,n),p(u.stencilAttachment,r,n),p(u.depthStencilAttachment,r,n),u.width=i.width=r,u.height=i.height=n,m(u),i}var u=new d;return o.framebufferCount++,i(t,n),te(i,{resize:a,_reglType:"framebuffer",_framebuffer:u,destroy:function(){y(u),g(u)},use:function(t){w.setFBO({framebuffer:i},t)}})}function v(t){function i(t){var r;de(a.indexOf(w.next)<0,"can not update framebuffer which is currently in use");var o=e.webgl_draw_buffers,u={color:null},s=0,l=null,c="rgba",f="uint8",h=1;if("number"==typeof t)s=0|t;else if(t){de.type(t,"object","invalid arguments for framebuffer");var p=t;if("shape"in p){var d=p.shape;de(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),de(d[0]===d[1],"cube framebuffer must be square"),s=d[0]}else"radius"in p&&(s=0|p.radius),"width"in p?(s=0|p.width,"height"in p&&de(p.height===s,"must be square")):"height"in p&&(s=0|p.height);("color"in p||"colors"in p)&&(l=p.color||p.colors,Array.isArray(l)&&de(1===l.length||o,"multiple render targets not supported")),l||("colorCount"in p&&(h=0|p.colorCount,de(h>0,"invalid color buffer count")),"colorType"in p&&(de.oneOf(p.colorType,j,"invalid color type"),f=p.colorType),"colorFormat"in p&&(c=p.colorFormat,de.oneOf(p.colorFormat,x,"invalid color format for texture"))),"depth"in p&&(u.depth=p.depth),"stencil"in p&&(u.stencil=p.stencil),"depthStencil"in p&&(u.depthStencil=p.depthStencil)}else s=1;var g;if(l)if(Array.isArray(l))for(g=[],r=0;r<l.length;++r)g[r]=l[r];else g=[l];else{g=Array(h);var y={radius:s,format:c,type:f};for(r=0;r<h;++r)g[r]=n.createCube(y)}for(u.color=Array(g.length),r=0;r<g.length;++r){var m=g[r];de("function"==typeof m&&"textureCube"===m._reglType,"invalid cube map"),s=s||m.width,de(m.width===s&&m.height===s,"invalid cube map shape"),u.color[r]={target:Tn,data:g[r]}}for(r=0;r<6;++r){for(var v=0;v<g.length;++v)u.color[v].target=Tn+r;r>0&&(u.depth=a[0].depth,u.stencil=a[0].stencil,u.depthStencil=a[0].depthStencil),a[r]?a[r](u):a[r]=M(u)}return te(i,{width:s,height:s,color:g})}function o(t){var e,n=0|t;if(de(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===i.width)return i;var o=i.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)a[e].resize(n);return i.width=i.height=n,i}var a=Array(6);return i(t),te(i,{faces:a,resize:o,_reglType:"framebufferCube",destroy:function(){a.forEach(function(t){t.destroy()})}})}function b(){we(A).forEach(function(e){e.framebuffer=t.createFramebuffer(),m(e)})}var w={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],D=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&D.push("srgba"),e.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&D.push("rgba32f");var j=["uint8"];e.oes_texture_half_float&&j.push("half float","float16"),e.oes_texture_float&&j.push("float","float32");var N=0,A={};return te(w,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof d)return e}return null},create:M,createCube:v,clear:function(){we(A).forEach(y)},restore:b})}function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Fn,this.offset=0,this.stride=0,this.divisor=0}function zt(t,e,r,n,i){for(var o=r.maxAttributes,a=new Array(o),u=0;u<o;++u)a[u]=new Ct;return{Record:Ct,scope:{},state:a}}function kt(t,e,r,n){function i(t,e,r,n){this.name=t,this.id=e,this.location=r,this.info=n}function o(t,e){for(var r=0;r<t.length;++r)if(t[r].id===e.id)return void(t[r].location=e.location);t.push(e)}function a(r,n,i){var o=r===Gn?c:f,a=o[n];if(!a){var u=e.str(n);a=t.createShader(r),t.shaderSource(a,u),t.compileShader(a),de.shaderError(t,a,u,r,i),o[n]=a}return a}function u(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(r,u){var s,l,c=a(Gn,r.fragId),f=a(Vn,r.vertId),h=r.program=t.createProgram();t.attachShader(h,c),t.attachShader(h,f),t.linkProgram(h),de.linkError(t,h,e.str(r.fragId),e.str(r.vertId),u);var p=t.getProgramParameter(h,Wn);n.profile&&(r.stats.uniformsCount=p);var d=r.uniforms;for(s=0;s<p;++s)if(l=t.getActiveUniform(h,s))if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");o(d,new i(y,e.id(y),t.getUniformLocation(h,y),l))}else o(d,new i(l.name,e.id(l.name),t.getUniformLocation(h,l.name),l));var m=t.getProgramParameter(h,Hn);n.profile&&(r.stats.attributesCount=m);var M=r.attributes;for(s=0;s<m;++s)(l=t.getActiveAttrib(h,s))&&o(M,new i(l.name,e.id(l.name),t.getAttribLocation(h,l.name),l))}function l(){c={},f={};for(var t=0;t<p.length;++t)s(p[t])}var c={},f={},h={},p=[],d=0;return n.profile&&(r.getMaxUniformsCount=function(){var t=0;return p.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},r.getMaxAttributesCount=function(){var t=0;return p.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);we(c).forEach(e),c={},we(f).forEach(e),f={},p.forEach(function(e){t.deleteProgram(e.program)}),p.length=0,h={},r.shaderCount=0},program:function(t,e,n){de.command(t>=0,"missing vertex shader",n),de.command(e>=0,"missing fragment shader",n);var i=h[e];i||(i=h[e]={});var o=i[t];return o||(o=new u(e,t),r.shaderCount++,s(o,n),i[t]=o,p.push(o)),o},restore:l,shader:a,frag:-1,vert:-1}}function Pt(t,e,r,n,i,o){function a(a){var u;null===e.next?(de(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Xn):(de(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=e.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?de(u===Xn||u===Kn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):de(u===Xn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var s=0,l=0,c=n.framebufferWidth,f=n.framebufferHeight,h=null;$t(a)?h=a:a&&(de.type(a,"object","invalid arguments to regl.read()"),s=0|a.x,l=0|a.y,de(s>=0&&s<n.framebufferWidth,"invalid x offset for regl.read"),de(l>=0&&l<n.framebufferHeight,"invalid y offset for regl.read"),c=0|(a.width||n.framebufferWidth-s),f=0|(a.height||n.framebufferHeight-l),h=a.data||null),h&&(u===Xn?de(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Kn&&de(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),de(c>0&&c+s<=n.framebufferWidth,"invalid width for read pixels"),de(f>0&&f+l<=n.framebufferHeight,"invalid height for read pixels"),r();var p=c*f*4;return h||(u===Xn?h=new Uint8Array(p):u===Kn&&(h=h||new Float32Array(p))),de.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),de(h.byteLength>=p,"data buffer for regl.read() too small"),t.pixelStorei(Zn,4),t.readPixels(s,l,c,f,qn,u,h),h}function u(t){var r;return e.setFBO({framebuffer:t.framebuffer},function(){r=a(t)}),r}function s(t){return t&&"framebuffer"in t?u(t):a(t)}return s}function Qt(t,e,r,n){function i(){var e=new a(t);return c[e.id]=e,r.vaoCount=l,e}function o(){we(c).forEach(function(t){t&&"function"==typeof t.destroy&&t.destroy()})}function a(t){this.id=-1,this.handle=null,u&&(this.handle=u.createVertexArrayOES(),this.handle&&(this.id=l++)),this.bind=function(){u&&this.handle&&s!==this&&(u.bindVertexArrayOES(this.handle),s=this)},this.unbind=function(){u&&s&&(u.bindVertexArrayOES(null),s=null)},this.destroy=function(){u&&this.handle&&(u.deleteVertexArrayOES(this.handle),l=Math.max(0,l-1),r.vaoCount=l,this.id=-1,this.handle=null)}}var u=e.oes_vertex_array_object,s=null,l=0,c={};return{hasSupport:Boolean(u),create:i,clear:o}}function Ut(t){return Array.prototype.slice.call(t)}function Bt(t){return Ut(t).join("")}function Yt(){function t(t){for(var e=0;e<s.length;++e)if(s[e]===t)return u[e];var r="g"+a++;return u.push(r),s.push(t),r}function e(){function t(){r.push.apply(r,Ut(arguments))}function e(){var t="v"+a++;return n.push(t),arguments.length>0&&(r.push(t,"="),r.push.apply(r,Ut(arguments)),r.push(";")),t}var r=[],n=[];return te(t,{def:e,toString:function(){return Bt([n.length>0?"var "+n+";":"",Bt(r)])}})}function r(){function t(t,e){n(t,e,"=",r.def(t,e),";")}var r=e(),n=e(),i=r.toString,o=n.toString;return te(function(){r.apply(r,Ut(arguments))},{def:r.def,entry:r,exit:n,save:t,set:function(e,n,i){t(e,n),r(e,n,"=",i,";")},toString:function(){return i()+o()}})}function n(){var t=Bt(arguments),e=r(),n=r(),i=e.toString,o=n.toString;return te(e,{then:function(){return e.apply(e,Ut(arguments)),this},else:function(){return n.apply(n,Ut(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Bt(["if(",t,"){",i(),"}",e])}})}function i(t,e){function n(){var t="a"+i.length;return i.push(t),t}var i=[];e=e||0;for(var o=0;o<e;++o)n();var a=r(),u=a.toString;return c[t]=te(a,{arg:n,toString:function(){return Bt(["function(",i.join(),"){",u(),"}"])}})}function o(){var t=['"use strict";',l,"return {"];Object.keys(c).forEach(function(e){t.push('"',e,'":',c[e].toString(),",")}),t.push("}");var e=Bt(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,u.concat(e)).apply(null,s)}var a=0,u=[],s=[],l=e(),c={};return{global:l,link:t,block:e,proc:i,scope:r,cond:n,compile:o}}function Rt(t){return Array.isArray(t)||$t(t)||X(t)}function Ft(t){return t.sort(function(t,e){return t===Si?-1:e===Si?1:t<e?-1:1})}function Gt(t,e,r,n){this.thisDep=t,this.contextDep=e,this.propDep=r,this.append=n}function Vt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Wt(t){return new Gt(!1,!1,!1,t)}function Ht(t,e){var r=t.type;if(r===ri){var n=t.data.length;return new Gt(!0,n>=1,n>=2,e)}if(r===ai){var i=t.data;return new Gt(i.thisDep,i.contextDep,i.propDep,e)}return new Gt(r===oi,r===ii,r===ni,e)}function qt(t,e,r,n,i,o,a,u,s,l,c,f,h,p,d,g){function y(t){return t.replace(".","_")}function m(t,e,r){var n=y(t);rt.push(t),et[n]=tt[n]=!!r,nt[n]=e}function M(t,e,r){var n=y(t);rt.push(t),Array.isArray(r)?(tt[n]=r.slice(),et[n]=r.slice()):tt[n]=et[n]=r,it[n]=e}function v(){var t=Yt(),r=t.link,n=t.global;t.id=ut++,t.batchId="0";var i=r(ot),o=t.shared={props:"a0"};Object.keys(ot).forEach(function(t){o[t]=n.def(i,".",t)}),de.optional(function(){t.CHECK=r(de),t.commandStr=de.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},at.invalidBlendCombinations=Fo});var a=t.next={},u=t.current={};Object.keys(it).forEach(function(t){Array.isArray(tt[t])&&(a[t]=n.def(o.next,".",t),u[t]=n.def(o.current,".",t))});var s=t.constants={};Object.keys(at).forEach(function(t){s[t]=n.def(JSON.stringify(at[t]))}),t.invoke=function(e,n){switch(n.type){case ri:var i=["this",o.context,o.props,t.batchId];return e.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case ni:return e.def(o.props,n.data);case ii:return e.def(o.context,n.data);case oi:return e.def("this",n.data);case ai:return n.data.append(t,e),n.data.ref}},t.attribCache={};var l={};return t.scopeAttrib=function(t){var n=e.id(t);if(n in l)return l[n];var i=c.scope[n];return i||(i=c.scope[n]=new X),l[n]=r(i)},t}function b(t){var e,r=t.static,n=t.dynamic;if(Ci in r){var i=!!r[Ci];(e=Wt(function(t,e){return i})).enable=i}else if(Ci in n){var o=n[Ci];e=Ht(o,function(t,e){return t.invoke(e,o)})}return e}function w(t,e){var r=t.static,n=t.dynamic;if(zi in r){var i=r[zi];return i?(i=s.getFramebuffer(i),de.command(i,"invalid framebuffer object"),Wt(function(t,e){var r=t.link(i),n=t.shared;e.set(n.framebuffer,".next",r);var o=n.context;return e.set(o,"."+Fi,r+".width"),e.set(o,"."+Gi,r+".height"),r})):Wt(function(t,e){var r=t.shared;e.set(r.framebuffer,".next","null");var n=r.context;return e.set(n,"."+Fi,n+"."+Hi),e.set(n,"."+Gi,n+"."+qi),"null"})}if(zi in n){var o=n[zi];return Ht(o,function(t,e){var r=t.invoke(e,o),n=t.shared,i=n.framebuffer,a=e.def(i,".getFramebuffer(",r,")");de.optional(function(){t.assert(e,"!"+r+"||"+a,"invalid framebuffer object")}),e.set(i,".next",a);var u=n.context;return e.set(u,"."+Fi,a+"?"+a+".width:"+u+"."+Hi),e.set(u,"."+Gi,a+"?"+a+".height:"+u+"."+qi),a})}return null}function x(t,e,r){function n(t){if(t in i){var n=i[t];de.commandType(n,"object","invalid "+t,r.commandStr);var a,u,s=!0,l=0|n.x,c=0|n.y;return"width"in n?(a=0|n.width,de.command(a>=0,"invalid "+t,r.commandStr)):s=!1,"height"in n?(u=0|n.height,de.command(u>=0,"invalid "+t,r.commandStr)):s=!1,new Gt(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,function(t,e){var r=t.shared.context,i=a;"width"in n||(i=e.def(r,".",Fi,"-",l));var o=u;return"height"in n||(o=e.def(r,".",Gi,"-",c)),[l,c,i,o]})}if(t in o){var f=o[t],h=Ht(f,function(e,r){var n=e.invoke(r,f);de.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)});var i=e.shared.context,o=r.def(n,".x|0"),a=r.def(n,".y|0"),u=r.def('"width" in ',n,"?",n,".width|0:","(",i,".",Fi,"-",o,")"),s=r.def('"height" in ',n,"?",n,".height|0:","(",i,".",Gi,"-",a,")");return de.optional(function(){e.assert(r,u+">=0&&"+s+">=0","invalid "+t)}),[o,a,u,s]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new Gt(e.thisDep,e.contextDep,e.propDep,function(t,e){var r=t.shared.context;return[0,0,e.def(r,".",Fi),e.def(r,".",Gi)]}):null}var i=t.static,o=t.dynamic,a=n(Si);if(a){var u=a;a=new Gt(a.thisDep,a.contextDep,a.propDep,function(t,e){var r=u.append(t,e),n=t.shared.context;return e.set(n,"."+Vi,r[2]),e.set(n,"."+Wi,r[3]),r})}return{viewport:a,scissor_box:n(_i)}}function D(t){function r(t){if(t in i){var r=e.id(i[t]);de.optional(function(){f.shader(Wo[t],r,de.guessCommand())});var n=Wt(function(){return r});return n.id=r,n}if(t in o){var a=o[t];return Ht(a,function(e,r){var n=e.invoke(r,a),i=r.def(e.shared.strings,".id(",n,")");return de.optional(function(){r(e.shared.shader,".shader(",Wo[t],",",i,",",e.command,");")}),i})}return null}var n,i=t.static,o=t.dynamic,a=r(Pi),u=r(ki),s=null;return Vt(a)&&Vt(u)?(s=f.program(u.id,a.id),n=Wt(function(t,e){return t.link(s)})):n=new Gt(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(t,e){var r,n=t.shared.shader;r=a?a.append(t,e):e.def(n,".",Pi);var i,o=n+".program("+(i=u?u.append(t,e):e.def(n,".",ki))+","+r;return de.optional(function(){o+=","+t.command}),e.def(o+")")}),{frag:a,vert:u,progVar:n,program:s}}function j(t,e){function r(t,r){if(t in n){var a=0|n[t];return de.command(!r||a>=0,"invalid "+t,e.commandStr),Wt(function(t,e){return r&&(t.OFFSET=a),a})}if(t in i){var u=i[t];return Ht(u,function(e,n){var i=e.invoke(n,u);return r&&(e.OFFSET=i,de.optional(function(){e.assert(n,i+">=0","invalid "+t)})),i})}return r&&o?Wt(function(t,e){return t.OFFSET="0",0}):null}var n=t.static,i=t.dynamic,o=function(){if(Qi in n){var t=n[Qi];Rt(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),de.command(t,"invalid elements",e.commandStr));var r=Wt(function(e,r){if(t){var n=e.link(t);return e.ELEMENTS=n,n}return e.ELEMENTS=null,null});return r.value=t,r}if(Qi in i){var o=i[Qi];return Ht(o,function(t,e){var r=t.shared,n=r.isBufferArgs,i=r.elements,a=t.invoke(e,o),u=e.def("null"),s=e.def(n,"(",a,")"),l=t.cond(s).then(u,"=",i,".createStream(",a,");").else(u,"=",i,".getElements(",a,");");return de.optional(function(){t.assert(l.else,"!"+a+"||"+u,"invalid elements")}),e.entry(l),e.exit(t.cond(s).then(i,".destroyStream(",u,");")),t.ELEMENTS=u,u})}return null}(),u=r(Yi,!0);return{elements:o,primitive:function(){if(Ui in n){var t=n[Ui];return de.commandParameter(t,Ye,"invalid primitve",e.commandStr),Wt(function(e,r){return Ye[t]})}if(Ui in i){var r=i[Ui];return Ht(r,function(t,e){var n=t.constants.primTypes,i=t.invoke(e,r);return de.optional(function(){t.assert(e,i+" in "+n,"invalid primitive, must be one of "+Object.keys(Ye))}),e.def(n,"[",i,"]")})}return o?Vt(o)?Wt(o.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return Lo}):new Gt(o.thisDep,o.contextDep,o.propDep,function(t,e){var r=t.ELEMENTS;return e.def(r,"?",r,".primType:",Lo)}):null}(),count:function(){if(Bi in n){var t=0|n[Bi];return de.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),Wt(function(){return t})}if(Bi in i){var r=i[Bi];return Ht(r,function(t,e){var n=t.invoke(e,r);return de.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n})}if(o){if(Vt(o)){if(o)return u?new Gt(u.thisDep,u.contextDep,u.propDep,function(t,e){var r=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return de.optional(function(){t.assert(e,r+">=0","invalid vertex offset/element buffer too small")}),r}):Wt(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var a=Wt(function(){return-1});return de.optional(function(){a.MISSING=!0}),a}var s=new Gt(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,function(t,e){var r=t.ELEMENTS;return t.OFFSET?e.def(r,"?",r,".vertCount-",t.OFFSET,":-1"):e.def(r,"?",r,".vertCount:-1")});return de.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:r(Ri,!1),offset:u}}function N(t,e){var r=t.static,i=t.dynamic,o={};return rt.forEach(function(t){function a(e,n){if(t in r){var a=e(r[t]);o[u]=Wt(function(){return a})}else if(t in i){var s=i[t];o[u]=Ht(s,function(t,e){return n(t,e,t.invoke(e,s))})}}var u=y(t);switch(t){case mi:case si:case ui:case Ai:case hi:case Oi:case wi:case Di:case ji:case gi:return a(function(r){return de.commandType(r,"boolean",t,e.commandStr),r},function(e,r,n){return de.optional(function(){e.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+t,e.commandStr)}),n});case pi:return a(function(r){return de.commandParameter(r,Go,"invalid "+t,e.commandStr),Go[r]},function(e,r,n){var i=e.constants.compareFuncs;return de.optional(function(){e.assert(r,n+" in "+i,"invalid "+t+", must be one of "+Object.keys(Go))}),r.def(i,"[",n,"]")});case di:return a(function(t){return de.command(gt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,r){return de.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array")}),[e.def("+",r,"[0]"),e.def("+",r,"[1]")]});case fi:return a(function(t){de.commandType(t,"object","blend.func",e.commandStr);var r="srcRGB"in t?t.srcRGB:t.src,n="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return de.commandParameter(r,Ro,u+".srcRGB",e.commandStr),de.commandParameter(n,Ro,u+".srcAlpha",e.commandStr),de.commandParameter(i,Ro,u+".dstRGB",e.commandStr),de.commandParameter(o,Ro,u+".dstAlpha",e.commandStr),de.command(-1===Fo.indexOf(r+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+i+")",e.commandStr),[Ro[r],Ro[i],Ro[n],Ro[o]]},function(e,r,n){function i(i,a){var u=r.def('"',i,a,'" in ',n,"?",n,".",i,a,":",n,".",i);return de.optional(function(){e.assert(r,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Ro))}),u}var o=e.constants.blendFuncs;de.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),u=i("dst","RGB");de.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(r,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=r.def(o,"[",a,"]"),l=r.def(o,"[",i("src","Alpha"),"]");return[s,r.def(o,"[",u,"]"),l,r.def(o,"[",i("dst","Alpha"),"]")]});case ci:return a(function(r){return"string"==typeof r?(de.commandParameter(r,K,"invalid "+t,e.commandStr),[K[r],K[r]]):"object"==typeof r?(de.commandParameter(r.rgb,K,t+".rgb",e.commandStr),de.commandParameter(r.alpha,K,t+".alpha",e.commandStr),[K[r.rgb],K[r.alpha]]):void de.commandRaise("invalid blend.equation",e.commandStr)},function(e,r,n){var i=e.constants.blendEquations,o=r.def(),a=r.def(),u=e.cond("typeof ",n,'==="string"');return de.optional(function(){function r(t,r,n){e.assert(t,n+" in "+i,"invalid "+r+", must be one of "+Object.keys(K))}r(u.then,t,n),e.assert(u.else,n+"&&typeof "+n+'==="object"',"invalid "+t),r(u.else,t+".rgb",n+".rgb"),r(u.else,t+".alpha",n+".alpha")}),u.then(o,"=",a,"=",i,"[",n,"];"),u.else(o,"=",i,"[",n,".rgb];",a,"=",i,"[",n,".alpha];"),r(u),[o,a]});case li:return a(function(t){return de.command(gt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Z(4,function(e){return+t[e]})},function(t,e,r){return de.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array")}),Z(4,function(t){return e.def("+",r,"[",t,"]")})});case Li:return a(function(t){return de.commandType(t,"number",u,e.commandStr),0|t},function(t,e,r){return de.optional(function(){t.assert(e,"typeof "+r+'==="number"',"invalid stencil.mask")}),e.def(r,"|0")});case Ti:return a(function(r){de.commandType(r,"object",u,e.commandStr);var n=r.cmp||"keep",i=r.ref||0,o="mask"in r?r.mask:-1;return de.commandParameter(n,Go,t+".cmp",e.commandStr),de.commandType(i,"number",t+".ref",e.commandStr),de.commandType(o,"number",t+".mask",e.commandStr),[Go[n],i,o]},function(t,e,r){var n=t.constants.compareFuncs;return de.optional(function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(r+"&&typeof ",r,'==="object"'),i('!("cmp" in ',r,")||(",r,".cmp in ",n,")")}),[e.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",zo),e.def(r,".ref|0"),e.def('"mask" in ',r,"?",r,".mask|0:-1")]});case Ei:case Ii:return a(function(r){de.commandType(r,"object",u,e.commandStr);var n=r.fail||"keep",i=r.zfail||"keep",o=r.zpass||"keep";return de.commandParameter(n,Vo,t+".fail",e.commandStr),de.commandParameter(i,Vo,t+".zfail",e.commandStr),de.commandParameter(o,Vo,t+".zpass",e.commandStr),[t===Ii?Eo:To,Vo[n],Vo[i],Vo[o]]},function(e,r,n){function i(i){return de.optional(function(){e.assert(r,'!("'+i+'" in '+n+")||("+n+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(Vo))}),r.def('"',i,'" in ',n,"?",o,"[",n,".",i,"]:",zo)}var o=e.constants.stencilOps;return de.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)}),[t===Ii?Eo:To,i("fail"),i("zfail"),i("zpass")]});case xi:return a(function(t){de.commandType(t,"object",u,e.commandStr);var r=0|t.factor,n=0|t.units;return de.commandType(r,"number",u+".factor",e.commandStr),de.commandType(n,"number",u+".units",e.commandStr),[r,n]},function(e,r,n){return de.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)}),[r.def(n,".factor|0"),r.def(n,".units|0")]});case Mi:return a(function(t){var r=0;return"front"===t?r=To:"back"===t&&(r=Eo),de.command(!!r,u,e.commandStr),r},function(t,e,r){return de.optional(function(){t.assert(e,r+'==="front"||'+r+'==="back"',"invalid cull.face")}),e.def(r,'==="front"?',To,":",Eo)});case bi:return a(function(t){return de.command("number"==typeof t&&t>=n.lineWidthDims[0]&&t<=n.lineWidthDims[1],"invalid line width, must positive number between "+n.lineWidthDims[0]+" and "+n.lineWidthDims[1],e.commandStr),t},function(t,e,r){return de.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">="+n.lineWidthDims[0]+"&&"+r+"<="+n.lineWidthDims[1],"invalid line width")}),r});case vi:return a(function(t){return de.commandParameter(t,Ho,u,e.commandStr),Ho[t]},function(t,e,r){return de.optional(function(){t.assert(e,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(r+'==="cw"?'+Io+":"+Oo)});case yi:return a(function(t){return de.command(gt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,r){return de.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")}),Z(4,function(t){return"!!"+r+"["+t+"]"})});case Ni:return a(function(t){de.command("object"==typeof t&&t,u,e.commandStr);var r="value"in t?t.value:1,n=!!t.invert;return de.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[r,n]},function(t,e,r){return de.optional(function(){t.assert(e,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',r,"?+",r,".value:1"),e.def("!!",r,".invert")]})}}),o}function A(t,e){var r=t.static,n=t.dynamic,i={};return Object.keys(r).forEach(function(t){var n,o=r[t];if("number"==typeof o||"boolean"==typeof o)n=Wt(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?n=Wt(function(t){return t.link(o)}):"framebuffer"===a||"framebufferCube"===a?(de.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),n=Wt(function(t){return t.link(o.color[0])})):de.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else gt(o)?n=Wt(function(e){return e.global.def("[",Z(o.length,function(r){return de.command("number"==typeof o[r]||"boolean"==typeof o[r],"invalid uniform "+t,e.commandStr),o[r]}),"]")}):de.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);n.value=o,i[t]=n}),Object.keys(n).forEach(function(t){var e=n[t];i[t]=Ht(e,function(t,r){return t.invoke(r,e)})}),i}function L(t,r){var n=t.static,i=t.dynamic,a={};return Object.keys(n).forEach(function(t){var i=n[t],u=e.id(t),s=new X;if(Rt(i))s.state=ti,s.buffer=o.getBuffer(o.create(i,Zi,!1,!0)),s.type=0;else{var l=o.getBuffer(i);if(l)s.state=ti,s.buffer=l,s.type=0;else if(de.command("object"==typeof i&&i,"invalid data for attribute "+t,r.commandStr),i.constant){var c=i.constant;s.buffer="null",s.state=ei,"number"==typeof c?s.x=c:(de.command(gt(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,r.commandStr),Jn.forEach(function(t,e){e<c.length&&(s[t]=c[e])}))}else{l=Rt(i.buffer)?o.getBuffer(o.create(i.buffer,Zi,!1,!0)):o.getBuffer(i.buffer),de.command(!!l,'missing buffer for attribute "'+t+'"',r.commandStr);var f=0|i.offset;de.command(f>=0,'invalid offset for attribute "'+t+'"',r.commandStr);var h=0|i.stride;de.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',r.commandStr);var p=0|i.size;de.command(!("size"in i)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',r.commandStr);var d=!!i.normalized,g=0;"type"in i&&(de.commandParameter(i.type,_e,"invalid type for attribute "+t,r.commandStr),g=_e[i.type]);var y=0|i.divisor;"divisor"in i&&(de.command(0===y||J,'cannot specify divisor for attribute "'+t+'", instancing not supported',r.commandStr),de.command(y>=0,'invalid divisor for attribute "'+t+'"',r.commandStr)),de.optional(function(){var e=r.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(r){de.command(n.indexOf(r)>=0,'unknown parameter "'+r+'" for attribute pointer "'+t+'" (valid parameters are '+n+")",e)})}),s.buffer=l,s.state=ti,s.size=p,s.normalized=d,s.type=g||l.dtype,s.offset=f,s.stride=h,s.divisor=y}}a[t]=Wt(function(t,e){var r=t.attribCache;if(u in r)return r[u];var n={isStream:!1};return Object.keys(s).forEach(function(t){n[t]=s[t]}),s.buffer&&(n.buffer=t.link(s.buffer),n.type=n.type||n.buffer+".dtype"),r[u]=n,n})}),Object.keys(i).forEach(function(t){function e(e,n){function i(t){n(l[t],"=",o,".",t,"|0;")}var o=e.invoke(n,r),a=e.shared,u=a.isBufferArgs,s=a.buffer;de.optional(function(){e.assert(n,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var l={isStream:n.def(!1)},c=new X;c.state=ti,Object.keys(c).forEach(function(t){l[t]=n.def(""+c[t])});var f=l.buffer,h=l.type;return n("if(",u,"(",o,")){",l.isStream,"=true;",f,"=",s,".createStream(",Zi,",",o,");",h,"=",f,".dtype;","}else{",f,"=",s,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",ei,";","if(typeof "+o+'.constant === "number"){',l[Jn[0]],"=",o,".constant;",Jn.slice(1).map(function(t){return l[t]}).join("="),"=0;","}else{",Jn.map(function(t,e){return l[t]+"="+o+".constant.length>="+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",f,"=",s,".createStream(",Zi,",",o,".buffer);","}else{",f,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",l.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),n("}}"),n.exit("if(",l.isStream,"){",s,".destroyStream(",f,");","}"),l}var r=i[t];a[t]=Ht(r,e)}),a}function T(t){var e=t.static,r=t.dynamic,n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]=Wt(function(t,e){return"number"==typeof r||"boolean"==typeof r?""+r:t.link(r)})}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=Ht(e,function(t,r){return t.invoke(r,e)})}),n}function E(t,e,r,n,o){function a(t){var e=c[t];e&&(h[t]=e)}var u=t.static,s=t.dynamic;de.optional(function(){function t(t){Object.keys(t).forEach(function(t){de.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',o.commandStr)})}var e=[zi,ki,Pi,Qi,Ui,Yi,Bi,Ri,Ci].concat(rt);t(u),t(s)});var l=w(t,o),c=x(t,l,o),f=j(t,o),h=N(t,o),p=D(t,o);a(Si),a(y(_i));var d=Object.keys(h).length>0,g={framebuffer:l,draw:f,shader:p,state:h,dirty:d};return g.profile=b(t,o),g.uniforms=A(r,o),g.attributes=L(e,o),g.context=T(n,o),Object.keys(g.attributes).length&&i.hasSupport&&(g.vao=i.create()),g}function I(t,e,r){var n=t.shared.context,i=t.scope();Object.keys(r).forEach(function(o){e.save(n,"."+o);var a=r[o];i(n,".",o,"=",a.append(t,e),";")}),e(i)}function O(t,e,r,n){var i,o=t.shared,a=o.gl,u=o.framebuffer;$&&(i=e.def(o.extensions,".webgl_draw_buffers"));var s,l=t.constants,c=l.drawBuffer,f=l.backBuffer;s=r?r.append(t,e):e.def(u,".next"),n||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",Bo,",",s,".framebuffer);"),$&&e(i,".drawBuffersWEBGL(",c,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Bo,",null);"),$&&e(i,".drawBuffersWEBGL(",f,");"),e("}",u,".cur=",s,";"),n||e("}")}function _(t,e,r){var n=t.shared,i=n.gl,o=t.current,a=t.next,u=n.current,s=n.next,l=t.cond(u,".dirty");rt.forEach(function(e){var n=y(e);if(!(n in r.state)){var c,f;if(n in a){c=a[n],f=o[n];var h=Z(tt[n].length,function(t){return l.def(c,"[",t,"]")});l(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(i,".",it[n],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else{c=l.def(s,".",n);var p=t.cond(c,"!==",u,".",n);l(p),n in nt?p(t.cond(c).then(i,".enable(",nt[n],");").else(i,".disable(",nt[n],");"),u,".",n,"=",c,";"):p(i,".",it[n],"(",c,");",u,".",n,"=",c,";")}}}),0===Object.keys(r.state).length&&l(u,".dirty=false;"),e(l)}function S(t,e,r,n){var i=t.shared,o=t.current,a=i.current,u=i.gl;Ft(Object.keys(r)).forEach(function(i){var s=r[i];if(!n||n(s)){var l=s.append(t,e);if(nt[i]){var c=nt[i];Vt(s)?l?e(u,".enable(",c,");"):e(u,".disable(",c,");"):e(t.cond(l).then(u,".enable(",c,");").else(u,".disable(",c,");")),e(a,".",i,"=",l,";")}else if(gt(l)){var f=o[i];e(u,".",it[i],"(",l,");",l.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(u,".",it[i],"(",l,");",a,".",i,"=",l,";")}})}function C(t,e){J&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function z(t,e,r,n,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(l=e.def(),"=",o(),";"),"string"==typeof i?t(p,".count+=",i,";"):t(p,".count++;"),d&&(n?(c=e.def(),t(c,"=",y,".getNumPendingQueries();")):t(y,".beginQuery(",p,");"))}function u(t){t(p,".cpuTime+=",o(),"-",l,";"),d&&(n?t(y,".pushScopeStats(",c,",",y,".getNumPendingQueries(),",p,");"):t(y,".endQuery();"))}function s(t){var r=e.def(g,".profile");e(g,".profile=",t,";"),e.exit(g,".profile=",r,";")}var l,c,f,h=t.shared,p=t.stats,g=h.current,y=h.timer,m=r.profile;if(m){if(Vt(m))return void(m.enable?(a(e),u(e.exit),s("true")):s("false"));s(f=m.append(t,e))}else f=e.def(g,".profile");var M=t.block();a(M),e("if(",f,"){",M,"}");var v=t.block();u(v),e.exit("if(",f,"){",v,"}")}function k(t,e,r,n,o){function a(t){switch(t){case co:case go:case vo:return 2;case fo:case yo:case bo:return 3;case ho:case mo:case wo:return 4;default:return 1}}function u(r,n,i){function o(){e("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var r,o=i.type;if(r=i.size?e.def(i.size,"||",n):n,e("if(",c,".type!==",o,"||",c,".size!==",r,"||",d.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",u,".bindBuffer(",Zi,",",h,".buffer);",u,".vertexAttribPointer(",[l,r,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",r,";",d.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),J){var a=i.divisor;e("if(",c,".divisor!==",a,"){",t.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}")}}function a(){e("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");","}if(",Jn.map(function(t,e){return c+"."+t+"!=="+p[e]}).join("||"),"){",u,".vertexAttrib4f(",l,",",p,");",Jn.map(function(t,e){return c+"."+t+"="+p[e]+";"}).join(""),"}")}var u=s.gl,l=e.def(r,".location"),c=e.def(s.attributes,"[",l,"]"),f=i.state,h=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];f===ti?o():f===ei?a():(e("if(",f,"===",ti,"){"),o(),e("}else{"),a(),e("}"))}var s=t.shared,l=n.length&&i.hasSupport?t.link(r.vao):null;l&&e("if(",l,"){",l,".bind(); }"),n.forEach(function(n){var i,s=n.name,l=r.attributes[s];if(l){if(!o(l))return;i=l.append(t,e)}else{if(!o(qo))return;var c=t.scopeAttrib(s);de.optional(function(){t.assert(e,c+".state","missing attribute "+s)}),i={},Object.keys(new X).forEach(function(t){i[t]=e.def(c,".",t)})}u(t.link(n),a(n.info.type),i)})}function P(t,r,n,i,o){for(var a,u=t.shared,s=u.gl,l=0;l<i.length;++l){var c,f=i[l],h=f.name,p=f.info.type,d=n.uniforms[h],g=t.link(f)+".location";if(d){if(!o(d))continue;if(Vt(d)){var y=d.value;if(de.command(null!==y&&void 0!==y,'missing uniform "'+h+'"',t.commandStr),p===No||p===Ao){de.command("function"==typeof y&&(p===No&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||p===Ao&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,t.commandStr);var m=t.link(y._texture||y.color[0]._texture);r(s,".uniform1i(",g,",",m+".bind());"),r.exit(m,".unbind();")}else if(p===xo||p===Do||p===jo){de.optional(function(){de.command(gt(y),"invalid matrix for uniform "+h,t.commandStr),de.command(p===xo&&4===y.length||p===Do&&9===y.length||p===jo&&16===y.length,"invalid length for matrix uniform "+h,t.commandStr)});var M=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),v=2;p===Do?v=3:p===jo&&(v=4),r(s,".uniformMatrix",v,"fv(",g,",false,",M,");")}else{switch(p){case lo:de.commandType(y,"number","uniform "+h,t.commandStr),a="1f";break;case co:de.command(gt(y)&&2===y.length,"uniform "+h,t.commandStr),a="2f";break;case fo:de.command(gt(y)&&3===y.length,"uniform "+h,t.commandStr),a="3f";break;case ho:de.command(gt(y)&&4===y.length,"uniform "+h,t.commandStr),a="4f";break;case Mo:de.commandType(y,"boolean","uniform "+h,t.commandStr),a="1i";break;case po:de.commandType(y,"number","uniform "+h,t.commandStr),a="1i";break;case vo:case go:de.command(gt(y)&&2===y.length,"uniform "+h,t.commandStr),a="2i";break;case bo:case yo:de.command(gt(y)&&3===y.length,"uniform "+h,t.commandStr),a="3i";break;case wo:case mo:de.command(gt(y)&&4===y.length,"uniform "+h,t.commandStr),a="4i"}r(s,".uniform",a,"(",g,",",gt(y)?Array.prototype.slice.call(y):y,");")}continue}c=d.append(t,r)}else{if(!o(qo))continue;c=r.def(u.uniforms,"[",e.id(h),"]")}p===No?r("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):p===Ao&&r("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),de.optional(function(){function e(e,n){t.assert(r,e,'bad data or missing for uniform "'+h+'".  '+n)}function n(t){e("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(r,n){e(u.isArrayLike+"("+c+")&&"+c+".length==="+r,"invalid vector, should have length "+r,t.commandStr)}function o(r){e("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(r===Ji?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case po:n("number");break;case go:i(2,"number");break;case yo:i(3,"number");break;case mo:i(4,"number");break;case lo:n("number");break;case co:i(2,"number");break;case fo:i(3,"number");break;case ho:i(4,"number");break;case Mo:n("boolean");break;case vo:i(2,"boolean");break;case bo:i(3,"boolean");break;case wo:i(4,"boolean");break;case xo:i(4,"number");break;case Do:i(9,"number");break;case jo:i(16,"number");break;case No:o(Ji);break;case Ao:o($i)}});var b=1;switch(p){case No:case Ao:var w=r.def(c,"._texture");r(s,".uniform1i(",g,",",w,".bind());"),r.exit(w,".unbind();");continue;case po:case Mo:a="1i";break;case go:case vo:a="2i",b=2;break;case yo:case bo:a="3i",b=3;break;case mo:case wo:a="4i",b=4;break;case lo:a="1f";break;case co:a="2f",b=2;break;case fo:a="3f",b=3;break;case ho:a="4f",b=4;break;case xo:a="Matrix2fv";break;case Do:a="Matrix3fv";break;case jo:a="Matrix4fv"}if(r(s,".uniform",a,"(",g,","),"M"===a.charAt(0)){var x=Math.pow(p-xo+2,2),D=t.global.def("new Float32Array(",x,")");r("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",Z(x,function(t){return D+"["+t+"]="+c+"["+t+"]"}),",",D,")")}else r(b>1?Z(b,function(t){return c+"["+t+"]"}):c);r(");")}}function Q(t,e,r,n){function i(i){var o=c[i];return o?o.contextDep&&n.contextDynamic||o.propDep?o.append(t,r):o.append(t,e):e.def(l,".",i)}function o(){function t(){r(y,".drawElementsInstancedANGLE(",[h,d,m,p+"<<(("+m+"-"+$n+")>>1)",g],");")}function e(){r(y,".drawArraysInstancedANGLE(",[h,p,d,g],");")}f?M?t():(r("if(",f,"){"),t(),r("}else{"),e(),r("}")):e()}function a(){function t(){r(s+".drawElements("+[h,d,m,p+"<<(("+m+"-"+$n+")>>1)"]+");")}function e(){r(s+".drawArrays("+[h,p,d]+");")}f?M?t():(r("if(",f,"){"),t(),r("}else{"),e(),r("}")):e()}var u=t.shared,s=u.gl,l=u.draw,c=n.draw,f=function(){var i,o=c.elements,a=e;return o?((o.contextDep&&n.contextDynamic||o.propDep)&&(a=r),i=o.append(t,a)):i=a.def(l,".",Qi),i&&a("if("+i+")"+s+".bindBuffer("+Ki+","+i+".buffer.buffer);"),i}(),h=i(Ui),p=i(Yi),d=function(){var i,o=c.count,a=e;return o?((o.contextDep&&n.contextDynamic||o.propDep)&&(a=r),i=o.append(t,a),de.optional(function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(a,i+">=0","missing vertex count")})):(i=a.def(l,".",Bi),de.optional(function(){t.assert(a,i+">=0","missing vertex count")})),i}();if("number"==typeof d){if(0===d)return}else r("if(",d,"){"),r.exit("}");var g,y;J&&(g=i(Ri),y=t.instancing);var m=f+".type",M=c.elements&&Vt(c.elements);J&&("number"!=typeof g||g>=0)?"string"==typeof g?(r("if(",g,">0){"),o(),r("}else if(",g,"<0){"),a(),r("}")):o():a()}function U(t,e,r,n,i){var o=v(),a=o.proc("body",i);return de.optional(function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)}),J&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,r,n),o.compile().body}function B(t,e,r,n){C(t,e),k(t,e,r,n.attributes,function(){return!0}),P(t,e,r,n.uniforms,function(){return!0}),Q(t,e,e,r)}function Y(t,e){var r=t.proc("draw",1);C(t,r),I(t,r,e.context),O(t,r,e.framebuffer),_(t,r,e),S(t,r,e.state),z(t,r,e,!1,!0);var n=e.shader.progVar.append(t,r);if(r(t.shared.gl,".useProgram(",n,".program);"),e.shader.program)B(t,r,e,e.shader.program);else{var i=t.global.def("{}"),o=r.def(n,".id"),a=r.def(i,"[",o,"]");r(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(r){return U(B,t,e,r,1)}),"(",n,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}function R(t,e,r,n){function i(){return!0}t.batchId="a1",C(t,e),k(t,e,r,n.attributes,i),P(t,e,r,n.uniforms,i),Q(t,e,e,r)}function F(t,e,r,n){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}C(t,e);var a=r.contextDep,u=e.def(),s=e.def();t.shared.props=s,t.batchId=u;var l=t.scope(),c=t.scope();if(e(l.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",c,"}",l.exit),r.needsContext&&I(t,c,r.context),r.needsFramebuffer&&O(t,c,r.framebuffer),S(t,c,r.state,i),r.profile&&i(r.profile)&&z(t,c,r,!1,!0),n)k(t,l,r,n.attributes,o),k(t,c,r,n.attributes,i),P(t,l,r,n.uniforms,o),P(t,c,r,n.uniforms,i),Q(t,l,c,r);else{var f=t.global.def("{}"),h=r.shader.progVar.append(t,c),p=c.def(h,".id"),d=c.def(f,"[",p,"]");c(t.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",t.link(function(e){return U(R,t,r,e,2)}),"(",h,");}",d,".call(this,a0[",u,"],",u,");")}}function G(t,e){function r(t){return t.contextDep&&i||t.propDep}var n=t.proc("batch",2);t.batchId="0",C(t,n);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(I(t,n,e.context),o=!1);var a=e.framebuffer,u=!1;a?(a.propDep?i=u=!0:a.contextDep&&i&&(u=!0),u||O(t,n,a)):O(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),_(t,n,e),S(t,n,e.state,function(t){return!r(t)}),e.profile&&r(e.profile)||z(t,n,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=u;var s=e.shader.progVar;if(s.contextDep&&i||s.propDep)F(t,n,e,null);else{var l=s.append(t,n);if(n(t.shared.gl,".useProgram(",l,".program);"),e.shader.program)F(t,n,e,e.shader.program);else{var c=t.global.def("{}"),f=n.def(l,".id"),h=n.def(c,"[",f,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",f,"]=",t.link(function(r){return U(F,t,e,r,2)}),"(",l,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function V(t,r){function n(e){var n=r.shader[e];n&&i.set(o.shader,"."+e,n.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;I(t,i,r.context),r.framebuffer&&r.framebuffer.append(t,i),Ft(Object.keys(r.state)).forEach(function(e){var n=r.state[e].append(t,i);gt(n)?n.forEach(function(r,n){i.set(t.next[e],"["+n+"]",r)}):i.set(o.next,"."+e,n)}),z(t,i,r,!0,!0),[Qi,Yi,Bi,Ri,Ui].forEach(function(e){var n=r.draw[e];n&&i.set(o.draw,"."+e,""+n.append(t,i))}),Object.keys(r.uniforms).forEach(function(n){i.set(o.uniforms,"["+e.id(n)+"]",r.uniforms[n].append(t,i))}),Object.keys(r.attributes).forEach(function(e){var n=r.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new X).forEach(function(t){i.set(o,"."+t,n[t])})}),n(ki),n(Pi),Object.keys(r.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function W(t){if("object"==typeof t&&!gt(t)){for(var e=Object.keys(t),r=0;r<e.length;++r)if(me.isDynamic(t[e[r]]))return!0;return!1}}function H(t,e,r){function n(t,e){a.forEach(function(r){var n=i[r];if(me.isDynamic(n)){var o=t.invoke(e,n);e(c,".",r,"=",o,";")}})}var i=e.static[r];if(i&&W(i)){var o=t.global,a=Object.keys(i),u=!1,s=!1,l=!1,c=t.global.def("{}");a.forEach(function(e){var r=i[e];if(me.isDynamic(r)){"function"==typeof r&&(r=i[e]=me.unbox(r));var n=Ht(r,null);u=u||n.thisDep,l=l||n.propDep,s=s||n.contextDep}else{switch(o(c,".",e,"="),typeof r){case"number":o(r);break;case"string":o('"',r,'"');break;case"object":Array.isArray(r)&&o("[",r.join(),"]");break;default:o(t.link(r))}o(";")}}),e.dynamic[r]=new me.DynamicVariable(ai,{thisDep:u,contextDep:s,propDep:l,ref:c,append:n}),delete e.static[r]}}function q(t,e,r,n,i){var o=v();o.stats=o.link(i),Object.keys(e.static).forEach(function(t){H(o,e,t)}),Xi.forEach(function(e){H(o,t,e)});var a=E(t,e,r,n,o);return Y(o,a),V(o,a),G(o,a),o.compile()}var X=c.Record,K={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(K.min=_o,K.max=So);var J=r.angle_instanced_arrays,$=r.webgl_draw_buffers,tt={dirty:!0,profile:g.profile},et={},rt=[],nt={},it={};m(ui,ro),m(si,eo),M(li,"blendColor",[0,0,0,0]),M(ci,"blendEquationSeparate",[Qo,Qo]),M(fi,"blendFuncSeparate",[Po,ko,Po,ko]),m(hi,io,!0),M(pi,"depthFunc",Uo),M(di,"depthRange",[0,1]),M(gi,"depthMask",!0),M(yi,yi,[!0,!0,!0,!0]),m(mi,to),M(Mi,"cullFace",Eo),M(vi,vi,Oo),M(bi,bi,1),m(wi,ao),M(xi,"polygonOffset",[0,0]),m(Di,uo),m(ji,so),M(Ni,"sampleCoverage",[1,!1]),m(Ai,no),M(Li,"stencilMask",-1),M(Ti,"stencilFunc",[Co,0,-1]),M(Ei,"stencilOpSeparate",[To,zo,zo,zo]),M(Ii,"stencilOpSeparate",[Eo,zo,zo,zo]),m(Oi,oo),M(_i,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),M(Si,Si,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var ot={gl:t,context:p,strings:e,next:et,current:tt,draw:h,elements:a,vao:i,buffer:o,shader:f,attributes:c.state,uniforms:l,framebuffer:s,extensions:r,timer:d,isBufferArgs:Rt},at={primTypes:Ye,compareFuncs:Go,blendFuncs:Ro,blendEquations:K,stencilOps:Vo,glTypes:_e,orientationType:Ho};de.optional(function(){ot.isArrayLike=gt}),$&&(at.backBuffer=[Eo],at.drawBuffer=Z(n.maxDrawbuffers,function(t){return 0===t?[0]:Z(t,function(t){return Yo+t})}));var ut=0;return{next:et,current:tt,compile:q,procs:function(){var e=v(),r=e.proc("poll"),i=e.proc("refresh"),o=e.block();r(o),i(o);var a=e.shared,u=a.gl,s=a.next,l=a.current;o(l,".dirty=false;"),O(e,r),O(e,i,null,!0);var c,f=t.getExtension("angle_instanced_arrays");f&&(c=e.link(f));for(var h=0;h<n.maxAttributes;++h){var p=i.def(a.attributes,"[",h,"]"),d=e.cond(p,".buffer");d.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",Zi,",",p,".buffer.buffer);",u,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),i(d),f&&i(c,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return Object.keys(nt).forEach(function(t){var n=nt[t],a=o.def(s,".",t),c=e.block();c("if(",a,"){",u,".enable(",n,")}else{",u,".disable(",n,")}",l,".",t,"=",a,";"),i(c),r("if(",a,"!==",l,".",t,"){",c,"}")}),Object.keys(it).forEach(function(t){var n,a,c=it[t],f=tt[t],h=e.block();if(h(u,".",c,"("),gt(f)){var p=f.length;n=e.global.def(s,".",t),a=e.global.def(l,".",t),h(Z(p,function(t){return n+"["+t+"]"}),");",Z(p,function(t){return a+"["+t+"]="+n+"["+t+"];"}).join("")),r("if(",Z(p,function(t){return n+"["+t+"]!=="+a+"["+t+"]"}).join("||"),"){",h,"}")}else n=o.def(s,".",t),a=o.def(l,".",t),h(n,");",l,".",t,"=",n,";"),r("if(",n,"!==",a,"){",h,"}");i(h)}),e.compile()}()}}function Xt(){return{bufferCount:0,vaoCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Zt(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}function Kt(t){function e(){if(0===V.length)return j&&j.update(),void(K=null);K=Me.next(e),h();for(var t=V.length-1;t>=0;--t){var r=V[t];r&&r(T,null,0)}m.flush(),j&&j.update()}function r(){!K&&V.length>0&&(K=Me.next(e))}function n(){K&&(Me.cancel(e),K=null)}function i(t){t.preventDefault(),v=!0,n(),W.forEach(function(t){t()})}function o(t){m.getError(),v=!1,b.restore(),k.restore(),S.restore(),P.restore(),Q.restore(),U.restore(),j&&j.restore(),Y.procs.refresh(),r(),X.forEach(function(t){t()})}function a(){V.length=0,n(),G&&(G.removeEventListener(na,i),G.removeEventListener(ia,o)),k.clear(),U.clear(),Q.clear(),P.clear(),C.clear(),S.clear(),_.clear(),j&&j.clear(),Z.forEach(function(t){t()})}function u(t){function e(t){var e={},r={};return Object.keys(t).forEach(function(n){var i=t[n];me.isDynamic(i)?r[n]=me.unbox(i,n):e[n]=i}),{dynamic:r,static:e}}function r(t){for(;p.length<t;)p.push(null);return p}function n(t,e){var n;if(v&&de.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(n=0;n<t;++n)h.call(this,null,e,n);return}if(Array.isArray(t)){for(n=0;n<t.length;++n)h.call(this,t[n],e,n);return}return h.call(this,t,e,0)}if("number"==typeof t){if(t>0)return f.call(this,r(0|t),0|t)}else{if(!Array.isArray(t))return c.call(this,t);if(t.length)return f.call(this,t,t.length)}}de(!!t,"invalid args to regl({...})"),de.type(t,"object","invalid args to regl({...})");var i=e(t.context||{}),o=e(t.uniforms||{}),a=e(t.attributes||{}),u=e(function(t){function e(t){if(t in r){var e=r[t];delete r[t],Object.keys(e).forEach(function(n){r[t+"."+n]=e[n]})}}var r=te({},t);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),r}(t)),s={gpuTime:0,cpuTime:0,count:0},l=Y.compile(u,a,o,i,s),c=l.draw,f=l.batch,h=l.scope,p=[];return te(n,{stats:s})}function s(t,e){var r=0;Y.procs.poll();var n=e.color;n&&(m.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=$o),"depth"in e&&(m.clearDepth(+e.depth),r|=ta),"stencil"in e&&(m.clearStencil(0|e.stencil),r|=ea),de(!!r,"called regl.clear with no buffer specified"),m.clear(r)}function l(t){if(de("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)J(te({framebuffer:t.framebuffer.faces[e]},t),s);else J(t,s);else s(null,t)}function c(t){function e(){function e(){var t=Zt(V,e);V[t]=V[V.length-1],V.length-=1,V.length<=0&&n()}var r=Zt(V,t);de(r>=0,"cannot cancel a frame twice"),V[r]=e}return de.type(t,"function","regl.frame() callback must be a function"),V.push(t),r(),{cancel:e}}function f(){var t=F.viewport,e=F.scissor_box;t[0]=t[1]=e[0]=e[1]=0,T.viewportWidth=T.framebufferWidth=T.drawingBufferWidth=t[2]=e[2]=m.drawingBufferWidth,T.viewportHeight=T.framebufferHeight=T.drawingBufferHeight=t[3]=e[3]=m.drawingBufferHeight}function h(){T.tick+=1,T.time=d(),f(),Y.procs.poll()}function p(){f(),Y.procs.refresh(),j&&j.update()}function d(){return(ve()-N)/1e3}function g(t,e){de.type(e,"function","listener callback must be a function");var r;switch(t){case"frame":return c(e);case"lost":r=W;break;case"restore":r=X;break;case"destroy":r=Z;break;default:de.raise("invalid event, must be one of frame,lost,restore,destroy")}return r.push(e),{cancel:function(){for(var t=0;t<r.length;++t)if(r[t]===e)return r[t]=r[r.length-1],void r.pop()}}}var y=H(t);if(!y)return null;var m=y.gl,M=m.getContextAttributes(),v=m.isContextLost(),b=q(m,y);if(!b)return null;var w=B(),x=Xt(),D=b.extensions,j=Jo(m,D),N=ve(),A=m.drawingBufferWidth,L=m.drawingBufferHeight,T={tick:0,time:0,viewportWidth:A,viewportHeight:L,framebufferWidth:A,framebufferHeight:L,drawingBufferWidth:A,drawingBufferHeight:L,pixelRatio:y.pixelRatio},E={},I={elements:null,primitive:4,count:-1,offset:0,instances:-1},O=be(m,D),_=Qt(m,D,x,y),S=ht(m,x,y),C=pt(m,D,S,x),z=zt(m,D,O,S,w),k=kt(m,w,x,y),P=Ot(m,D,O,function(){Y.procs.poll()},T,x,y),Q=jn(m,D,O,x,y),U=St(m,D,O,P,Q,x),Y=qt(m,w,D,O,_,S,C,P,U,E,z,k,I,T,j,y),R=Pt(m,U,Y.procs.poll,T,M,D),F=Y.next,G=m.canvas,V=[],W=[],X=[],Z=[y.onDestroy],K=null;G&&(G.addEventListener(na,i,!1),G.addEventListener(ia,o,!1));var J=U.setFBO=u({framebuffer:me.define.call(null,oa,"framebuffer")});p();var $=te(u,{clear:l,prop:me.define.bind(null,oa),context:me.define.bind(null,aa),this:me.define.bind(null,ua),draw:u({}),buffer:function(t){return S.create(t,ra,!1,!1)},elements:function(t){return C.create(t,!1)},texture:P.create2D,cube:P.createCube,renderbuffer:Q.create,framebuffer:U.create,framebufferCube:U.createCube,attributes:M,frame:c,on:g,limits:O,hasExtension:function(t){return O.extensions.indexOf(t.toLowerCase())>=0},read:R,destroy:a,_gl:m,_refresh:p,poll:function(){h(),j&&j.update()},now:d,stats:x});return y.onDone(null,$),$}var Jt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},$t=function(t){return Object.prototype.toString.call(t)in Jt},te=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;++n)t[r[n]]=e[r[n]];return t},ee=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],re=33071,ne=9728,ie=9984,oe=9985,ae=9986,ue=9987,se=5126,le=32819,ce=32820,fe=33635,he=34042,pe={};pe[5120]=pe[5121]=1,pe[5122]=pe[5123]=pe[36193]=pe[fe]=pe[le]=pe[ce]=2,pe[5124]=pe[5125]=pe[se]=pe[he]=4;var de=te(r,{optional:L,raise:e,commandRaise:D,command:j,parameter:i,commandParameter:N,constructor:l,type:a,commandType:A,isTypedArray:o,nni:u,oneOf:s,shaderError:v,linkError:b,callSite:g,saveCommandRef:w,saveDrawInfo:x,framebufferFormat:T,guessCommand:d,texture2D:O,textureCube:_}),ge=0,ye=0,me={DynamicVariable:S,define:P,isDynamic:Q,unbox:U,accessor:k},Me={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},ve="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},be=function(t,e){var r=1;e.ext_texture_filter_anisotropic&&(r=t.getParameter(34047));var n=1,i=1;return e.webgl_draw_buffers&&(n=t.getParameter(34852),i=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}},we=function(t){return Object.keys(t).map(function(e){return t[e]})},xe=5120,De=5121,je=5122,Ne=5123,Ae=5124,Le=5125,Te=5126,Ee=Z(8,function(){return[]}),Ie={alloc:$,free:tt,allocType:et,freeType:rt},Oe={shape:st,flatten:ut},_e={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Se={dynamic:35048,stream:35040,static:35044},Ce=Oe.flatten,ze=Oe.shape,ke=35044,Pe=35040,Qe=5121,Ue=5126,Be=[];Be[5120]=1,Be[5122]=2,Be[5124]=4,Be[5121]=1,Be[5123]=2,Be[5125]=4,Be[5126]=4;var Ye={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Re=0,Fe=1,Ge=4,Ve=5120,We=5121,He=5122,qe=5123,Xe=5124,Ze=5125,Ke=34963,Je=35040,$e=35044,tr=new Float32Array(1),er=new Uint32Array(tr.buffer),rr=5123,nr=34467,ir=3553,or=34067,ar=34069,ur=6408,sr=6406,lr=6407,cr=6409,fr=6410,hr=32854,pr=32855,dr=36194,gr=32819,yr=32820,mr=33635,Mr=34042,vr=6402,br=34041,wr=35904,xr=35906,Dr=36193,jr=33776,Nr=33777,Ar=33778,Lr=33779,Tr=35986,Er=35987,Ir=34798,Or=35840,_r=35841,Sr=35842,Cr=35843,zr=36196,kr=5121,Pr=5123,Qr=5125,Ur=5126,Br=10242,Yr=10243,Rr=10497,Fr=33071,Gr=33648,Vr=10240,Wr=10241,Hr=9728,qr=9729,Xr=9984,Zr=9985,Kr=9986,Jr=9987,$r=33170,tn=4352,en=4353,rn=4354,nn=34046,on=3317,an=37440,un=37441,sn=37443,ln=37444,cn=33984,fn=[Xr,Kr,Zr,Jr],hn=[0,cr,fr,lr,ur],pn={};pn[cr]=pn[sr]=pn[vr]=1,pn[br]=pn[fr]=2,pn[lr]=pn[wr]=3,pn[ur]=pn[xr]=4;var dn=yt("HTMLCanvasElement"),gn=yt("CanvasRenderingContext2D"),yn=yt("HTMLImageElement"),mn=yt("HTMLVideoElement"),Mn=Object.keys(Jt).concat([dn,gn,yn,mn]),vn=[];vn[kr]=1,vn[Ur]=4,vn[Dr]=2,vn[Pr]=2,vn[Qr]=4;var bn=[];bn[hr]=2,bn[pr]=2,bn[dr]=2,bn[br]=4,bn[jr]=.5,bn[Nr]=.5,bn[Ar]=1,bn[Lr]=1,bn[Tr]=.5,bn[Er]=1,bn[Ir]=1,bn[Or]=.5,bn[_r]=.25,bn[Sr]=.5,bn[Cr]=.25,bn[zr]=.5;var wn=36161,xn=32854,Dn=[];Dn[xn]=2,Dn[32855]=2,Dn[36194]=2,Dn[33189]=2,Dn[36168]=1,Dn[34041]=4,Dn[35907]=4,Dn[34836]=16,Dn[34842]=8,Dn[34843]=6;var jn=function(t,e,r,n,i){function o(t){this.id=f++,this.refCount=1,this.renderbuffer=t,this.format=xn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(e){var r=e.renderbuffer;de(r,"must not double destroy renderbuffer"),t.bindRenderbuffer(wn,null),t.deleteRenderbuffer(r),e.renderbuffer=null,e.refCount=0,delete h[e.id],n.renderbufferCount--}function u(e,a){function u(e,n){var o=0,a=0,s=xn;if("object"==typeof e&&e){var h=e;if("shape"in h){var p=h.shape;de(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(de.parameter(h.format,l,"invalid renderbuffer format"),s=l[h.format])}else"number"==typeof e?(o=0|e,a="number"==typeof n?0|n:o):e?de.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(de(o>0&&a>0&&o<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),o!==f.width||a!==f.height||s!==f.format)return u.width=f.width=o,u.height=f.height=a,f.format=s,t.bindRenderbuffer(wn,f.renderbuffer),t.renderbufferStorage(wn,s,o,a),i.profile&&(f.stats.size=_t(f.format,f.width,f.height)),u.format=c[f.format],u}function s(e,n){var o=0|e,a=0|n||o;return o===f.width&&a===f.height?u:(de(o>0&&a>0&&o<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),u.width=f.width=o,u.height=f.height=a,t.bindRenderbuffer(wn,f.renderbuffer),t.renderbufferStorage(wn,f.format,o,a),i.profile&&(f.stats.size=_t(f.format,f.width,f.height)),u)}var f=new o(t.createRenderbuffer());return h[f.id]=f,n.renderbufferCount++,u(e,a),u.resize=s,u._reglType="renderbuffer",u._renderbuffer=f,i.profile&&(u.stats=f.stats),u.destroy=function(){f.decRef()},u}function s(){we(h).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(wn,e.renderbuffer),t.renderbufferStorage(wn,e.format,e.width,e.height)}),t.bindRenderbuffer(wn,null)}var l={rgba4:xn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(l.srgba=35907),e.ext_color_buffer_half_float&&(l.rgba16f=34842,l.rgb16f=34843),e.webgl_color_buffer_float&&(l.rgba32f=34836);var c=[];Object.keys(l).forEach(function(t){var e=l[t];c[e]=t});var f=0,h={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var t=0;return Object.keys(h).forEach(function(e){t+=h[e].stats.size}),t}),{create:u,clear:function(){we(h).forEach(a)},restore:s}},Nn=36160,An=36161,Ln=3553,Tn=34069,En=36064,In=36096,On=36128,_n=33306,Sn=36053,Cn=6402,zn=[6408],kn=[];kn[6408]=4;var Pn=[];Pn[5121]=1,Pn[5126]=4,Pn[36193]=2;var Qn=33189,Un=36168,Bn=34041,Yn=[32854,32855,36194,35907,34842,34843,34836],Rn={};Rn[Sn]="complete",Rn[36054]="incomplete attachment",Rn[36057]="incomplete dimensions",Rn[36055]="incomplete, missing attachment",Rn[36061]="unsupported";var Fn=5126,Gn=35632,Vn=35633,Wn=35718,Hn=35721,qn=6408,Xn=5121,Zn=3333,Kn=5126,Jn="xyzw".split(""),$n=5121,ti=1,ei=2,ri=0,ni=1,ii=2,oi=3,ai=4,ui="dither",si="blend.enable",li="blend.color",ci="blend.equation",fi="blend.func",hi="depth.enable",pi="depth.func",di="depth.range",gi="depth.mask",yi="colorMask",mi="cull.enable",Mi="cull.face",vi="frontFace",bi="lineWidth",wi="polygonOffset.enable",xi="polygonOffset.offset",Di="sample.alpha",ji="sample.enable",Ni="sample.coverage",Ai="stencil.enable",Li="stencil.mask",Ti="stencil.func",Ei="stencil.opFront",Ii="stencil.opBack",Oi="scissor.enable",_i="scissor.box",Si="viewport",Ci="profile",zi="framebuffer",ki="vert",Pi="frag",Qi="elements",Ui="primitive",Bi="count",Yi="offset",Ri="instances",Fi=zi+"Width",Gi=zi+"Height",Vi=Si+"Width",Wi=Si+"Height",Hi="drawingBufferWidth",qi="drawingBufferHeight",Xi=[fi,ci,Ti,Ei,Ii,Ni,Si,_i,xi],Zi=34962,Ki=34963,Ji=3553,$i=34067,to=2884,eo=3042,ro=3024,no=2960,io=2929,oo=3089,ao=32823,uo=32926,so=32928,lo=5126,co=35664,fo=35665,ho=35666,po=5124,go=35667,yo=35668,mo=35669,Mo=35670,vo=35671,bo=35672,wo=35673,xo=35674,Do=35675,jo=35676,No=35678,Ao=35680,Lo=4,To=1028,Eo=1029,Io=2304,Oo=2305,_o=32775,So=32776,Co=519,zo=7680,ko=0,Po=1,Qo=32774,Uo=513,Bo=36160,Yo=36064,Ro={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Fo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Go={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wo={frag:35632,vert:35633},Ho={cw:Io,ccw:Oo},qo=new Gt(!1,!1,!1,function(){}),Xo=34918,Zo=34919,Ko=35007,Jo=function(t,e){function r(){return h.pop()||f.createQueryEXT()}function n(t){h.push(t)}function i(t){var e=r();f.beginQueryEXT(Ko,e),p.push(e),l(p.length-1,p.length,t)}function o(){f.endQueryEXT(Ko)}function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function u(){return d.pop()||new a}function s(t){d.push(t)}function l(t,e,r){var n=u();n.startQueryIndex=t,n.endQueryIndex=e,n.sum=0,n.stats=r,g.push(n)}function c(){var t,e,r=p.length;if(0!==r){m.length=Math.max(m.length,r+1),y.length=Math.max(y.length,r+1),y[0]=0,m[0]=0;var i=0;for(t=0,e=0;e<p.length;++e){var o=p[e];f.getQueryObjectEXT(o,Zo)?(i+=f.getQueryObjectEXT(o,Xo),n(o)):p[t++]=o,y[e+1]=i,m[e+1]=t}for(p.length=t,t=0,e=0;e<g.length;++e){var a=g[e],u=a.startQueryIndex,l=a.endQueryIndex;a.sum+=y[l]-y[u];var c=m[u],h=m[l];h===c?(a.stats.gpuTime+=a.sum/1e6,s(a)):(a.startQueryIndex=c,a.endQueryIndex=h,g[t++]=a)}g.length=t}}var f=e.ext_disjoint_timer_query;if(!f)return null;var h=[],p=[],d=[],g=[],y=[],m=[];return{beginQuery:i,endQuery:o,pushScopeStats:l,update:c,getNumPendingQueries:function(){return p.length},clear:function(){h.push.apply(h,p);for(var t=0;t<h.length;t++)f.deleteQueryEXT(h[t]);p.length=0,h.length=0},restore:function(){p.length=0,h.length=0}}},$o=16384,ta=256,ea=1024,ra=34962,na="webglcontextlost",ia="webglcontextrestored",oa=1,aa=2,ua=3;return Kt})},{}],398:[function(t,e,r){"use strict";function n(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function i(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-2,"]"].join("")}return e}function o(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",o(t.slice(0,e)),",",o(t.slice(e)),")"].join("")}function a(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return a(e,t)}function u(t){return!0&t?"-":""}function s(t){if(2===t.length)return[["diff(",a(t[0][0],t[1][1]),",",a(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",o(s(n(t,r))),",",u(r),t[0][r],")"].join(""));return e}function l(t,e){for(var r=[],n=0;n<e-2;++n)r.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return o(r)}function c(t){for(var e=[],r=[],a=i(t),u=0;u<t;++u)a[0][u]="1",a[t-1][u]="w"+u;for(u=0;u<t;++u)0==(1&u)?e.push.apply(e,s(n(a,u))):r.push.apply(r,s(n(a,u)));for(var c=o(e),f=o(r),h="exactInSphere"+t,p=[],u=0;u<t;++u)p.push("m"+u);for(var d=["function ",h,"(",p.join(),"){"],u=0;u<t;++u){d.push("var w",u,"=",l(u,t),";");for(var v=0;v<t;++v)v!==u&&d.push("var w",u,"m",v,"=scale(w",u,",m",v,"[0]);")}return d.push("var p=",c,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",h),new Function("sum","diff","prod","scale",d.join(""))(y,m,g,M)}function f(){return 0}function h(){return 0}function p(){return 0}function d(t){var e=b[t.length];return e||(e=b[t.length]=c(t.length)),e.apply(void 0,t)}var g=t("two-product"),y=t("robust-sum"),m=t("robust-subtract"),M=t("robust-scale"),v=6,b=[f,h,p];!function(){for(;b.length<=v;)b.push(c(b.length));for(var t=[],r=["slow"],n=0;n<=v;++n)t.push("a"+n),r.push("o"+n);for(var i=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=v;++n)i.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),r.push(i.join(""));var o=Function.apply(void 0,r);for(e.exports=o.apply(void 0,[d].concat(b)),n=0;n<=v;++n)e.exports[n]=b[n]}()},{"robust-scale":401,"robust-subtract":403,"robust-sum":404,"two-product":422}],399:[function(t,e,r){"use strict";function n(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function i(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}function o(t){return 1&t?"-":""}function a(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",a(t.slice(0,e)),",",a(t.slice(e)),")"].join("")}function u(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",a(u(n(t,r))),",",o(r),t[0][r],")"].join(""));return e}function s(t){for(var e=[],r=[],o=i(t),s=[],l=0;l<t;++l)0==(1&l)?e.push.apply(e,u(n(o,l))):r.push.apply(r,u(n(o,l))),s.push("m"+l);var d=a(e),g=a(r),y="orientation"+t+"Exact",m=["function ",y,"(",s.join(),"){var p=",d,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",y].join("");return new Function("sum","prod","scale","sub",m)(f,c,h,p)}function l(t){var e=m[t.length];return e||(e=m[t.length]=s(t.length)),e.apply(void 0,t)}var c=t("two-product"),f=t("robust-sum"),h=t("robust-scale"),p=t("robust-subtract"),d=5,g=s(3),y=s(4),m=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),a=i-o;if(i>0){if(o<=0)return a;n=i+o}else{if(!(i<0))return a;if(o>=0)return a;n=-(i+o)}var u=3.3306690738754716e-16*n;return a>=u||a<=-u?a:g(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],u=t[1]-n[1],s=e[1]-n[1],l=r[1]-n[1],c=t[2]-n[2],f=e[2]-n[2],h=r[2]-n[2],p=o*l,d=a*s,g=a*u,m=i*l,M=i*s,v=o*u,b=c*(p-d)+f*(g-m)+h*(M-v),w=7.771561172376103e-16*((Math.abs(p)+Math.abs(d))*Math.abs(c)+(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(M)+Math.abs(v))*Math.abs(h));return b>w||-b>w?b:y(t,e,r,n)}];!function(){for(;m.length<=d;)m.push(s(m.length));for(var t=[],r=["slow"],n=0;n<=d;++n)t.push("a"+n),r.push("o"+n);for(var i=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=d;++n)i.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var o=Function.apply(void 0,r);for(e.exports=o.apply(void 0,[l].concat(m)),n=0;n<=d;++n)e.exports[n]=m[n]}()},{"robust-scale":401,"robust-subtract":403,"robust-sum":404,"two-product":422}],400:[function(t,e,r){"use strict";function n(t,e){if(1===t.length)return o(e,t[0]);if(1===e.length)return o(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(n=0;n<t.length;++n)r=i(r,o(e,t[n]));else for(var n=0;n<e.length;++n)r=i(r,o(t,e[n]));return r}var i=t("robust-sum"),o=t("robust-scale");e.exports=n},{"robust-scale":401,"robust-sum":404}],401:[function(t,e,r){"use strict";function n(t,e){var r=t.length;if(1===r){var n=i(t[0],e);return n[0]?n:[n[1]]}var a=new Array(2*r),u=[.1,.1],s=[.1,.1],l=0;i(t[0],e,u),u[0]&&(a[l++]=u[0]);for(var c=1;c<r;++c){i(t[c],e,s);var f=u[1];o(f,s[0],u),u[0]&&(a[l++]=u[0]);var h=s[1],p=u[1],d=h+p,g=p-(d-h);u[1]=d,g&&(a[l++]=g)}return u[1]&&(a[l++]=u[1]),0===l&&(a[l++]=0),a.length=l,a}var i=t("two-product"),o=t("two-sum");e.exports=n},{"two-product":422,"two-sum":423}],402:[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=0;i<2;++i){var o=t[i],a=e[i],u=Math.min(o,a),s=Math.max(o,a),l=r[i],c=n[i],f=Math.min(l,c);if(Math.max(l,c)<u||s<f)return!1}return!0}function i(t,e,r,i){var a=o(t,r,i),u=o(e,r,i);if(a>0&&u>0||a<0&&u<0)return!1;var s=o(r,t,e),l=o(i,t,e);return!(s>0&&l>0||s<0&&l<0)&&(0!==a||0!==u||0!==s||0!==l||n(t,e,r,i))}e.exports=i;var o=t("robust-orientation")[3]},{"robust-orientation":399}],403:[function(t,e,r){"use strict";function n(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}function i(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return n(t[0],-e[0]);var o,a,u=r+i,s=new Array(u),l=0,c=0,f=0,h=Math.abs,p=t[c],d=h(p),g=-e[f],y=h(g);d<y?(a=p,(c+=1)<r&&(p=t[c],d=h(p))):(a=g,(f+=1)<i&&(g=-e[f],y=h(g))),c<r&&d<y||f>=i?(o=p,(c+=1)<r&&(p=t[c],d=h(p))):(o=g,(f+=1)<i&&(g=-e[f],y=h(g)));for(var m,M,v,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;c<r&&f<i;)d<y?(o=p,(c+=1)<r&&(p=t[c],d=h(p))):(o=g,(f+=1)<i&&(g=-e[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m;for(;c<r;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(c+=1)<r&&(p=t[c]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(f+=1)<i&&(g=-e[f]);return N&&(s[l++]=N),A&&(s[l++]=A),l||(s[l++]=0),s.length=l,s}e.exports=i},{}],404:[function(t,e,r){"use strict";function n(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}function i(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return n(t[0],e[0]);var o,a,u=r+i,s=new Array(u),l=0,c=0,f=0,h=Math.abs,p=t[c],d=h(p),g=e[f],y=h(g);d<y?(a=p,(c+=1)<r&&(p=t[c],d=h(p))):(a=g,(f+=1)<i&&(g=e[f],y=h(g))),c<r&&d<y||f>=i?(o=p,(c+=1)<r&&(p=t[c],d=h(p))):(o=g,(f+=1)<i&&(g=e[f],y=h(g)));for(var m,M,v,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;c<r&&f<i;)d<y?(o=p,(c+=1)<r&&(p=t[c],d=h(p))):(o=g,(f+=1)<i&&(g=e[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m;for(;c<r;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(c+=1)<r&&(p=t[c]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,M=m-A,v=m-M,b=x-M,w=A-v,N=w+b,A=m,(f+=1)<i&&(g=e[f]);return N&&(s[l++]=N),A&&(s[l++]=A),l||(s[l++]=0),s.length=l,s}e.exports=i},{}],405:[function(t,e,r){e.exports=t("buffer")},{buffer:86}],406:[function(t,e,r){e.exports=function(t,e){e||(e={});var r=[],n=[],i=[],o=[],a=e.attributes?{}:null,u=a&&Object.keys(e.attributes);if(a)for(p=0;p<u.length;p++)a[u[p]]=[];for(var s=t.edges||[],l=0;l<s.length;l++){var c=r.length,f=s[l];if(r.push(t.positions[f[0]]),r.push(t.positions[f[0]]),r.push(t.positions[f[1]]),r.push(t.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[1]]),a[d].push(e.attributes[d][f[1]]);n.push(r[c+2],r[c+3],r[c],r[c+1]),i.push(1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3])}for(var h=t.cells||[],l=0;l<h.length;l++){c=r.length;if(2===(f=h[l]).length){if(r.push(t.positions[f[0]]),r.push(t.positions[f[0]]),r.push(t.positions[f[1]]),r.push(t.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[1]]),a[d].push(e.attributes[d][f[1]]);n.push(r[c+2],r[c+3],r[c],r[c+1]),i.push(1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3])}else{if(3!==f.length)throw new Error("expected a triangle, got "+f.length+"-sided cell");if(r.push(t.positions[f[0]]),r.push(t.positions[f[0]]),r.push(t.positions[f[1]]),r.push(t.positions[f[1]]),r.push(t.positions[f[2]]),r.push(t.positions[f[2]]),a)for(var p=0;p<u.length;p++){var d=u[p];a[d].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[0]]),a[d].push(e.attributes[d][f[1]]),a[d].push(e.attributes[d][f[1]]),a[d].push(e.attributes[d][f[2]]),a[d].push(e.attributes[d][f[2]])}n.push(r[c+2],r[c+3],r[c+4],r[c+5],r[c],r[c+1]),i.push(1,-1,1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3]),o.push([c+2,c+3,c+4],[c+2,c+4,c+5]),o.push([c+4,c+5,c],[c+4,c,c+1])}}return{positions:r,cells:o,nextPositions:n,directions:i,attributes:a}}},{}],407:[function(t,e,r){"use strict";var n=t("is-arrayish"),i=Array.prototype.concat,o=Array.prototype.slice,a=e.exports=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var u=t[r];n(u)?e=i.call(e,o.call(u)):e.push(u)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},{"is-arrayish":336}],408:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],409:[function(t,e,r){"use strict";"use restrict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},n.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],u=i[n];a<u?o[r]=n:u<a?o[n]=r:(o[n]=r,++i[r])}}},{}],410:[function(t,e,r){"use strict";"use restrict";function n(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1}function i(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,u=o.length;a<u;++a)e=r(e,o[a]);return e+1}function o(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e}function a(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(l=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var o=t[0]+t[1],a=e[0]+e[1];if(l=o+t[2]-(a+e[2]))return l;var u=i(t[0],t[1]),s=i(e[0],e[1]),l=i(u,t[2])-i(s,e[2]);return l||i(u+t[2],o)-i(s+e[2],a);default:var c=t.slice(0);c.sort();var f=e.slice(0);f.sort();for(var h=0;h<r;++h)if(n=c[h]-f[h])return n;return 0}}function u(t,e){return a(t[0],e[0])}function s(t,e){if(e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];n.sort(u);for(i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}return t.sort(a),t}function l(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(a(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function c(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var o=r+n>>1,u=a(t[o],e);u<=0?(0===u&&(i=o),r=o+1):u>0&&(n=o-1)}return i}function f(t,e){for(var r=new Array(t.length),n=0,i=r.length;n<i;++n)r[n]=[];for(var o=[],n=0,u=e.length;n<u;++n)for(var s=e[n],l=s.length,f=1,h=1<<l;f<h;++f){o.length=v.popCount(f);for(var p=0,d=0;d<l;++d)f&1<<d&&(o[p++]=s[d]);var g=c(t,o);if(!(g<0))for(;r[g++].push(n),!(g>=t.length||0!==a(t[g],o)););}return r}function h(t,e){if(!e)return f(l(d(t,0)),t,0);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];for(var n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,u=o.length;a<u;++a)r[o[a]].push(n);return r}function p(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0|i.length,a=1,u=1<<o;a<u;++a){for(var l=[],c=0;c<o;++c)a>>>c&1&&l.push(i[c]);e.push(l)}return s(e)}function d(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,i=0;i<t.length;++i)for(var o=t[i],a=n;a<1<<o.length;a=v.nextCombination(a)){for(var u=new Array(e+1),l=0,c=0;c<o.length;++c)a&1<<c&&(u[l++]=o[c]);r.push(u)}return s(r)}function g(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;++o){for(var u=new Array(i.length-1),l=0,c=0;l<a;++l)l!==o&&(u[c++]=i[l]);e.push(u)}return s(e)}function y(t,e){for(var r=new b(e),n=0;n<t.length;++n)for(var i=t[n],o=0;o<i.length;++o)for(var a=o+1;a<i.length;++a)r.link(i[o],i[a]);for(var u=[],s=r.ranks,n=0;n<s.length;++n)s[n]=-1;for(n=0;n<t.length;++n){var l=r.find(t[n][0]);s[l]<0?(s[l]=u.length,u.push([t[n].slice(0)])):u[s[l]].push(t[n].slice(0))}return u}function m(t){for(var e=l(s(d(t,0))),r=new b(e.length),n=0;n<t.length;++n)for(var i=t[n],o=0;o<i.length;++o)for(var a=c(e,[i[o]]),u=o+1;u<i.length;++u)r.link(a,c(e,[i[u]]));for(var f=[],h=r.ranks,n=0;n<h.length;++n)h[n]=-1;for(n=0;n<t.length;++n){var p=r.find(c(e,[t[n][0]]));h[p]<0?(h[p]=f.length,f.push([t[n].slice(0)])):f[h[p]].push(t[n].slice(0))}return f}function M(t,e){return e?y(t,e):m(t)}var v=t("bit-twiddle"),b=t("union-find");r.dimension=n,r.countVertices=i,r.cloneCells=o,r.compareCells=a,r.normalize=s,r.unique=l,r.findCell=c,r.incidence=f,r.dual=h,r.explode=p,r.skeleton=d,r.boundary=g,r.connectedComponents=M},{"bit-twiddle":408,"union-find":409}],411:[function(t,e,r){"use strict";function n(t,e,r){return Math.abs(o(t,e,r))/Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function i(t,e,r){function i(t){if(v[t])return 1/0;var r=y[t],i=m[t];return r<0||i<0?1/0:n(e[t],e[r],e[i])}function o(t,e){var r=j[t],n=j[e];j[t]=n,j[e]=r,N[r]=e,N[n]=t}function u(t){return M[j[t]]}function s(t){return 1&t?t-1>>1:(t>>1)-1}function l(t){for(var e=u(t);;){var r=e,n=2*t+1,i=2*(t+1),a=t;if(n<A){var s=u(n);s<r&&(a=n,r=s)}if(i<A&&u(i)<r&&(a=i),a===t)return t;o(t,a),t=a}}function c(t){for(var e=u(t);t>0;){var r=s(t);{if(!(r>=0&&e<u(r)))return t;o(t,r),t=r}}}function f(){if(A>0){var t=j[0];return o(0,A-1),A-=1,l(0),t}return-1}function h(t,e){var r=j[t];return M[r]===e?t:(M[r]=-1/0,c(t),f(),M[r]=e,A+=1,c(A-1))}function p(t,e){if(t[e]<0)return e;var r=e,n=e;do{var i=t[n];if(!v[n]||i<0||i===n)break;if(n=i,i=t[n],!v[n]||i<0||i===n)break;n=i,r=t[r]}while(r!==n);for(var o=e;o!==n;o=t[o])t[o]=n;return n}for(var d=e.length,g=t.length,y=new Array(d),m=new Array(d),M=new Array(d),v=new Array(d),b=0;b<d;++b)y[b]=m[b]=-1,M[b]=1/0,v[b]=!1;for(b=0;b<g;++b){var w=t[b];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],D=w[0];-1!==m[D]?m[D]=-2:m[D]=x,-1!==y[x]?y[x]=-2:y[x]=D}for(var j=[],N=new Array(d),b=0;b<d;++b)(M[b]=i(b))<1/0?(N[b]=j.length,j.push(b)):N[b]=-1;for(var A=j.length,b=A>>1;b>=0;--b)l(b);for(;;){var L=f();if(L<0||M[L]>r)break;!function(t){if(!v[t]){v[t]=!0;var e=y[t],r=m[t];y[r]>=0&&(y[r]=e),m[e]>=0&&(m[e]=r),N[e]>=0&&h(N[e],i(e)),N[r]>=0&&h(N[r],i(r))}}(L)}for(var T=[],b=0;b<d;++b)v[b]||(N[b]=T.length,T.push(e[b].slice()));var E=(T.length,[]);return t.forEach(function(t){var e=p(y,t[0]),r=p(m,t[1]);if(e>=0&&r>=0&&e!==r){var n=N[e],i=N[r];n!==i&&E.push([n,i])}}),a.unique(a.normalize(E)),{positions:T,edges:E}}e.exports=i;var o=t("robust-orientation"),a=t("simplicial-complex")},{"robust-orientation":399,"simplicial-complex":410}],412:[function(t,e,r){"use strict";function n(t,e){var r,n;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var i=Math.min(t[0][1],t[1][1]),a=Math.max(t[0][1],t[1][1]),u=Math.min(e[0][1],e[1][1]),s=Math.max(e[0][1],e[1][1]);return a<u?a-u:i>s?i-s:a-s}r=e[1],n=e[0]}var l,c;t[0][1]<t[1][1]?(l=t[0],c=t[1]):(l=t[1],c=t[0]);var f=o(n,r,l);return f||(f=o(n,r,c))||c-n}function i(t,e){var r,i;if(e[0][0]<e[1][0])r=e[0],i=e[1];else{if(!(e[0][0]>e[1][0]))return n(e,t);r=e[1],i=e[0]}var a,u;if(t[0][0]<t[1][0])a=t[0],u=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,e);a=t[1],u=t[0]}var s=o(r,i,u),l=o(r,i,a);if(s<0){if(l<=0)return s}else if(s>0){if(l>=0)return s}else if(l)return l;if(s=o(u,a,i),l=o(u,a,r),s<0){if(l<=0)return s}else if(s>0){if(l>=0)return s}else if(l)return l;return i[0]-u[0]}e.exports=i;var o=t("robust-orientation")},{"robust-orientation":399}],413:[function(t,e,r){"use strict";function n(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function i(t,e){return t.y-e}function o(t,e){for(var r=null;t;){var n,i,a=t.key;a[0][0]<a[1][0]?(n=a[0],i=a[1]):(n=a[1],i=a[0]);var u=f(n,i,e);if(u<0)t=t.left;else if(u>0)if(e[0]!==a[1][0])r=t,t=t.right;else{if(s=o(t.right,e))return s;t=t.left}else{if(e[0]!==a[1][0])return t;var s=o(t.right,e);if(s)return s;t=t.left}}return r}function a(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function u(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}function s(t){for(var e=t.length,r=2*e,i=new Array(r),o=0;o<e;++o){var s=t[o],l=s[0][0]<s[1][0];i[2*o]=new u(s[0][0],s,l,o),i[2*o+1]=new u(s[1][0],s,!l,o)}i.sort(function(t,e){var r=t.x-e.x;return r||(r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])});for(var f=c(h),p=[],d=[],g=[],o=0;o<r;){for(var y=i[o].x,m=[];o<r;){var M=i[o];if(M.x!==y)break;o+=1,M.segment[0][0]===M.x&&M.segment[1][0]===M.x?M.create&&(M.segment[0][1]<M.segment[1][1]?(m.push(new a(M.segment[0][1],M.index,!0,!0)),m.push(new a(M.segment[1][1],M.index,!1,!1))):(m.push(new a(M.segment[1][1],M.index,!0,!1)),m.push(new a(M.segment[0][1],M.index,!1,!0)))):f=M.create?f.insert(M.segment,M.index):f.remove(M.segment)}p.push(f.root),d.push(y),g.push(m)}return new n(p,d,g)}e.exports=s;var l=t("binary-search-bounds"),c=t("functional-red-black-tree"),f=t("robust-orientation"),h=t("./lib/order-segments");n.prototype.castUp=function(t){var e=l.le(this.coordinates,t[0]);if(e<0)return-1;var r=(this.slabs[e],o(this.slabs[e],t)),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var a=null;if(r&&(a=r.key),e>0){var u=o(this.slabs[e-1],t);u&&(a?h(u.key,a)>0&&(a=u.key,n=u.value):(n=u.value,a=u.key))}var s=this.horizontal[e];if(s.length>0){var c=l.ge(s,t[1],i);if(c<s.length){var p=s[c];if(t[1]===p.y){if(p.closed)return p.index;for(;c<s.length-1&&s[c+1].y===t[1];)if(c+=1,(p=s[c]).closed)return p.index;if(p.y===t[1]&&!p.start){if((c+=1)>=s.length)return n;p=s[c]}}if(p.start)if(a){var d=f(a[0],a[1],[t[0],p.y]);a[0][0]>a[1][0]&&(d=-d),d>0&&(n=p.index)}else n=p.index;else p.y!==t[1]&&(n=p.index)}}}return n}},{"./lib/order-segments":412,"binary-search-bounds":73,"functional-red-black-tree":156,"robust-orientation":399}],414:[function(t,e,r){"use strict";function n(t,e){var r=t.length,n=["'use strict';"],i="surfaceNets"+t.join("_")+"d"+e;n.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&n.push("getters:[0],");for(var o=[],s=[],l=0;l<r;++l)o.push("d"+l),s.push("d"+l);for(l=0;l<1<<r;++l)o.push("v"+l),s.push("v"+l);for(l=0;l<1<<r;++l)o.push("p"+l),s.push("p"+l);o.push("a","b","c"),s.push("a","c"),n.push("vertex:function vertexFunc(",o.join(),"){");for(var c=[],l=0;l<1<<r;++l)c.push("(p"+l+"<<"+l+")");n.push("var m=(",c.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var f=[],h=[];1<<(1<<r)<=128?(n.push("switch(m){"),h=n):n.push("switch(m>>>7){");for(l=0;l<1<<(1<<r);++l){if(1<<(1<<r)>128&&l%128==0){f.length>0&&h.push("}}");var p="vExtra"+f.length;n.push("case ",l>>>7,":",p,"(m&0x7f,",s.join(),");break;"),h=["function ",p,"(m,",s.join(),"){switch(m){"],f.push(h)}h.push("case ",127&l,":");for(var d=new Array(r),g=new Array(r),y=new Array(r),m=new Array(r),M=0,v=0;v<r;++v)d[v]=[],g[v]=[],y[v]=0,m[v]=0;for(v=0;v<1<<r;++v)for(j=0;j<r;++j){var b=v^1<<j;if(!(b>v)&&!(l&1<<b)!=!(l&1<<v)){var w=1;l&1<<b?g[j].push("v"+b+"-v"+v):(g[j].push("v"+v+"-v"+b),w=-w),w<0?(d[j].push("-v"+v+"-v"+b),y[j]+=2):(d[j].push("v"+v+"+v"+b),y[j]-=2),M+=1;for(var x=0;x<r;++x)x!==j&&(b&1<<x?m[x]+=1:m[x]-=1)}}for(var D=[],j=0;j<r;++j)if(0===d[j].length)D.push("d"+j+"-0.5");else{var N="";y[j]<0?N=y[j]+"*c":y[j]>0&&(N="+"+y[j]+"*c");var A=d[j].length/M*.5,L=.5+m[j]/M*.5;D.push("d"+j+"-"+L+"-"+A+"*("+d[j].join("+")+N+")/("+g[j].join("+")+")")}h.push("a.push([",D.join(),"]);","break;")}n.push("}},"),f.length>0&&h.push("}}");for(var T=[],l=0;l<1<<r-1;++l)T.push("v"+l);T.push("c0","c1","p0","p1","a","b","c"),n.push("cell:function cellFunc(",T.join(),"){");var E=u(r-1);n.push("if(p0){b.push(",E.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",E.map(function(t){var e=t.slice();return e.reverse(),"["+e.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(l=0;l<f.length;++l)n.push(f[l].join(""));return new Function("genContour",n.join(""))(a)}function i(t,e){for(var r=s(t,e),n=r.length,i=new Array(n),o=new Array(n),a=0;a<n;++a)i[a]=[r[a]],o[a]=[a];return{positions:i,cells:o}}function o(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return i(t,e);var r=t.order.join()+"-"+t.dtype,o=l[r],e=+e||0;return o||(o=l[r]=n(t.order,t.dtype)),o(t,e)}e.exports=o;var a=t("ndarray-extract-contour"),u=t("triangulate-hypercube"),s=t("zero-crossings"),l={}},{"ndarray-extract-contour":349,"triangulate-hypercube":421,"zero-crossings":460}],415:[function(t,e,r){function n(t,e){return t.ctrlKey==(e.ctrlKey||!1)&&t.altKey==(e.altKey||!1)&&t.shiftKey==(e.shiftKey||!1)&&t.metaKey==(e.metaKey||!1)&&t.keyCode==(e.keyCode||0)&&t.charCode==(e.charCode||0)||((t=document.createEvent("Event")).initEvent(e.type,e.bubbles,e.cancelable),t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.keyCode=e.keyCode||0,t.charCode=e.charCode||0),t}window;var i=document||{},o=(i.documentElement,!0);try{i.createEvent("KeyEvents")}catch(t){o=!1}var a=function(t,e){e=e||{};var r=c(t),a=r;"KeyboardEvent"===r&&o&&(r="KeyEvents",a="KeyEvent");var u=i.createEvent(r),l="init"+a,f="function"==typeof u[l]?l:"initEvent",h=s[f],p=[],d={};e.type=t;for(var g=0;g<h.length;++g){var y=e[m=h[g]];void 0===y&&(y=u[m]),d[m]=!0,p.push(y)}u[f].apply(u,p),"KeyboardEvent"===r&&(u=n(u,e));for(var m in e)d[m]||(u[m]=e[m]);return u},u=function(t,e){e=e||{};var r=i.createEventObject();r.type=t;for(var n in e)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports=i.createEvent?a:u;var s=t("./init.json"),l=t("./types.json"),c=function(){var t={};for(var e in l)for(var r=l[e],n=0;n<r.length;n++)t[r[n]]=e;return function(e){return t[e]||"Event"}}()},{"./init.json":416,"./types.json":417}],416:[function(t,e,r){e.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],417:[function(t,e,r){e.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],418:[function(t,e,r){(function(r){function n(t){a.call(this,t),this._destroyed=!1}function i(t,e,r){r(null,t)}function o(t){return function(e,r,n){return"function"==typeof e&&(n=r,r=e,e={}),"function"!=typeof r&&(r=i),"function"!=typeof n&&(n=null),t(e,r,n)}}var a=t("readable-stream/transform"),u=t("util").inherits,s=t("xtend");u(n,a),n.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;r.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}},e.exports=o(function(t,e,r){var i=new n(t);return i._transform=e,r&&(i._flush=r),i}),e.exports.ctor=o(function(t,e,r){function i(e){if(!(this instanceof i))return new i(e);this.options=s(t,e),n.call(this,this.options)}return u(i,n),i.prototype._transform=e,r&&(i.prototype._flush=r),i}),e.exports.obj=o(function(t,e,r){var i=new n(s({objectMode:!0,highWaterMark:16},t));return i._transform=e,r&&(i._flush=r),i})}).call(this,t("_process"))},{_process:375,"readable-stream/transform":396,util:431,xtend:458}],419:[function(t,e,r){"use strict";function n(t,e){var r=a(getComputedStyle(t).getPropertyValue(e));return r[0]*o(r[1],t)}function i(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var i=n(r,"font-size")/128;return e.removeChild(r),i}function o(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return i(t,e);case"em":return n(e,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}var a=t("parse-unit");e.exports=o;var u=96},{"parse-unit":354}],420:[function(t,e,r){function n(t){function e(t){r(t.targetTouches[0])}function r(t){i(t,a,s),u.emit("move",t)}function n(){a.removeEventListener("mousemove",r,!1),a.removeEventListener("mousedown",r,!1),a.removeEventListener("touchmove",e,!1),a.removeEventListener("touchstart",e,!1)}var a=(t=t||{}).element||window,u=new o,s=t.position||[0,0];return!1!==t.touchstart&&(a.addEventListener("mousedown",r,!1),a.addEventListener("touchstart",e,!1)),a.addEventListener("mousemove",r,!1),a.addEventListener("touchmove",e,!1),u.position=s,u.dispose=n,u}var i=t("mouse-event-offset"),o=t("events").EventEmitter;e.exports=function(t){return n(t).position},e.exports.emitter=function(t){return n(t)}},{events:151,"mouse-event-offset":343}],421:[function(t,e,r){"use strict";function n(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(a(t+1)),r=[],n=0;n<e;++n){for(var u=i.unrank(t,n),s=[0],l=0,c=0;c<u.length;++c)l+=1<<u[c],s.push(l);o(u)<1&&(s[0]=l,s[t]=0),r.push(s)}return r}e.exports=n;var i=t("permutation-rank"),o=t("permutation-parity"),a=t("gamma")},{gamma:157,"permutation-parity":356,"permutation-rank":357}],422:[function(t,e,r){"use strict";function n(t,e,r){var n=t*e,o=i*t,a=o-(o-t),u=t-a,s=i*e,l=s-(s-e),c=e-l,f=u*c-(n-a*l-u*l-a*c);return r?(r[0]=f,r[1]=n,r):[f,n]}e.exports=n;var i=+(Math.pow(2,27)+1)},{}],423:[function(t,e,r){"use strict";function n(t,e,r){var n=t+e,i=n-t,o=e-i,a=t-(n-i);return r?(r[0]=a+o,r[1]=n,r):[a+o,n]}e.exports=n},{}],424:[function(t,e,r){(function(e,n){"use strict";function i(t){if(t){var e=t.length||t.byteLength,r=M.log2(e);x[r].push(t)}}function o(t){i(t.buffer)}function a(t){var t=M.nextPow2(t),e=M.log2(t),r=x[e];return r.length>0?r.pop():new ArrayBuffer(t)}function u(t){return new Uint8Array(a(t),0,t)}function s(t){return new Uint16Array(a(2*t),0,t)}function l(t){return new Uint32Array(a(4*t),0,t)}function c(t){return new Int8Array(a(t),0,t)}function f(t){return new Int16Array(a(2*t),0,t)}function h(t){return new Int32Array(a(4*t),0,t)}function p(t){return new Float32Array(a(4*t),0,t)}function d(t){return new Float64Array(a(8*t),0,t)}function g(t){return b?new Uint8ClampedArray(a(t),0,t):u(t)}function y(t){return new DataView(a(t),0,t)}function m(t){t=M.nextPow2(t);var e=M.log2(t),r=D[e];return r.length>0?r.pop():new n(t)}var M=t("bit-twiddle"),v=t("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:v([32,0]),UINT16:v([32,0]),UINT32:v([32,0]),INT8:v([32,0]),INT16:v([32,0]),INT32:v([32,0]),FLOAT:v([32,0]),DOUBLE:v([32,0]),DATA:v([32,0]),UINT8C:v([32,0]),BUFFER:v([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=e.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=v([32,0])),w.BUFFER||(w.BUFFER=v([32,0]));var x=w.DATA,D=w.BUFFER;r.free=function(t){if(n.isBuffer(t))D[M.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|M.log2(e);x[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=o,r.freeArrayBuffer=i,r.freeBuffer=function(t){D[M.log2(t.length)].push(t)},r.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return a(t);switch(e){case"uint8":return u(t);case"uint16":return s(t);case"uint32":return l(t);case"int8":return c(t);case"int16":return f(t);case"int32":return h(t);case"float":case"float32":return p(t);case"double":case"float64":return d(t);case"uint8_clamped":return g(t);case"buffer":return m(t);case"data":case"dataview":return y(t);default:return null}return null},r.mallocArrayBuffer=a,r.mallocUint8=u,r.mallocUint16=s,r.mallocUint32=l,r.mallocInt8=c,r.mallocInt16=f,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=g,r.mallocDataView=y,r.mallocBuffer=m,r.clearCache=function(){for(var t=0;t<32;++t)w.UINT8[t].length=0,w.UINT16[t].length=0,w.UINT32[t].length=0,w.INT8[t].length=0,w.INT16[t].length=0,w.INT32[t].length=0,w.FLOAT[t].length=0,w.DOUBLE[t].length=0,w.UINT8C[t].length=0,x[t].length=0,D[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":74,buffer:86,dup:149}],425:[function(t,e,r){function n(t,e,r){t.positions&&t.cells&&(r=e,e=t.cells,t=t.positions);var n=t.length?t[0].length:0,i=e.length?e[0].length:0;if(r=r||new Float32Array(e.length*i*n),3===i&&2===n)for(var o=0,a=0,u=e.length;o<u;o+=1){s=e[o];r[a++]=t[s[0]][0],r[a++]=t[s[0]][1],r[a++]=t[s[1]][0],r[a++]=t[s[1]][1],r[a++]=t[s[2]][0],r[a++]=t[s[2]][1]}else if(3===i&&3===n)for(var o=0,a=0,u=e.length;o<u;o+=1){s=e[o];r[a++]=t[s[0]][0],r[a++]=t[s[0]][1],r[a++]=t[s[0]][2],r[a++]=t[s[1]][0],r[a++]=t[s[1]][1],r[a++]=t[s[1]][2],r[a++]=t[s[2]][0],r[a++]=t[s[2]][1],r[a++]=t[s[2]][2]}else for(var o=0,a=0,u=e.length;o<u;o+=1)for(var s=e[o],l=0;l<s.length;l++)for(var c=s[l],f=0;f<n;f++)r[a++]=t[c][f];return r}e.exports=n},{}],426:[function(t,e,r){"use strict";"use restrict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},i.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],u=i[n];a<u?o[r]=n:u<a?o[n]=r:(o[n]=r,++i[r])}}},{}],427:[function(t,e,r){"use strict";function n(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;a<n;++a)if(o=i,i=t[a],e(i,o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}function i(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o,i=n)if(i=n,(n=t[o])!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}function o(t,e,r){return 0===t.length?t:e?(r||t.sort(e),n(t,e)):(r||t.sort(),i(t))}e.exports=o},{}],428:[function(t,e,r){(function(t){function r(t,e){function r(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],429:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],430:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],431:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(e)?n.showHidden=e:e&&r._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function a(t,e){return t}function u(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function s(t,e,n){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return v(i)||(i=s(t,i,n)),i}var o=l(t,e);if(o)return o;var a=Object.keys(e),g=u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),N(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(A(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(j(e))return t.stylize(Date.prototype.toString.call(e),"date");if(N(e))return c(e)}var m="",M=!1,b=["{","}"];if(d(e)&&(M=!0,b=["[","]"]),A(e)&&(m=" [Function"+(e.name?": "+e.name:"")+"]"),x(e)&&(m=" "+RegExp.prototype.toString.call(e)),j(e)&&(m=" "+Date.prototype.toUTCString.call(e)),N(e)&&(m=" "+c(e)),0===a.length&&(!M||0==e.length))return b[0]+m+b[1];if(n<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var w;return w=M?f(t,e,n,g,a):a.map(function(r){return h(t,e,n,g,r,M)}),t.seen.pop(),p(w,m,b)}function l(t,e){if(w(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return M(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],a=0,u=e.length;a<u;++a)O(e,String(a))?o.push(h(t,e,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}function h(t,e,r,n,i,o){var a,u,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?u=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),O(n,i)||(a="["+i+"]"),u||(t.seen.indexOf(l.value)<0?(u=y(r)?s(t,l.value,null):s(t,l.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function p(t,e,r){var n=0;return t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return null==t}function M(t){return"number"==typeof t}function v(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return D(t)&&"[object RegExp]"===T(t)}function D(t){return"object"==typeof t&&null!==t}function j(t){return D(t)&&"[object Date]"===T(t)}function N(t){return D(t)&&("[object Error]"===T(t)||t instanceof Error)}function A(t){return"function"==typeof t}function L(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function T(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var _=/%[sdj%]/g;r.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(t).replace(_,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),u=n[r];r<o;u=n[++r])y(u)||!D(u)?a+=" "+u:a+=" "+i(u);return a},r.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var a=!1;return o};var S,C={};r.debuglog=function(t){if(w(S)&&(S=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(S)){var n=e.pid;C[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else C[t]=function(){};return C[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=y,r.isNullOrUndefined=m,r.isNumber=M,r.isString=v,r.isSymbol=b,r.isUndefined=w,r.isRegExp=x,r.isObject=D,r.isDate=j,r.isError=N,r.isFunction=A,r.isPrimitive=L,r.isBuffer=t("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!D(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":430,_process:375,inherits:429}],432:[function(t,e,r){"use strict";function n(t,e){return"object"==typeof e&&null!==e||(e={}),i(t,e.canvas||o,e.context||a,e)}e.exports=n;var i=t("./lib/vtext"),o=null,a=null;"undefined"!=typeof document&&(o=document.createElement("canvas"),o.width=8192,o.height=1024,a=o.getContext("2d"))},{"./lib/vtext":433}],433:[function(t,e,r){"use strict";function n(t,e,r){for(var n=e.textAlign||"start",i=e.textBaseline||"alphabetic",o=[1<<30,1<<30],a=[0,0],u=t.length,s=0;s<u;++s)for(var l=t[s],c=0;c<2;++c)o[c]=0|Math.min(o[c],l[c]),a[c]=0|Math.max(a[c],l[c]);var f=0;switch(n){case"center":f=-.5*(o[0]+a[0]);break;case"right":case"end":f=-a[0];break;case"left":case"start":f=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(i){case"hanging":case"top":h=-o[1];break;case"middle":h=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-a[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/r;return"lineHeight"in e?p*=+e.lineHeight:"width"in e?p=e.width/(a[0]-o[0]):"height"in e&&(p=e.height/(a[1]-o[1])),t.map(function(t){return[p*(t[0]+f),p*(t[1]+h)]})}function i(t,e,r,n){var i=0|Math.ceil(e.measureText(r).width+2*n);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var o=3*n;t.height<o&&(t.height=o),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff",e.fillText(r,n,2*n);var a=e.getImageData(0,0,i,o);return c(a.data,[o,i,4]).pick(-1,-1,0).transpose(1,0)}function o(t,e){var r=l(t,128);return e?f(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function a(t,e,r,i){var a=o(t,i),u=n(a.positions,e,r),s=a.edges,l="ccw"===e.orientation;if(h(u,s),e.polygons||e.polygon||e.polyline){for(var c=d(s,u),f=new Array(c.length),g=0;g<c.length;++g){for(var y=c[g],m=new Array(y.length),M=0;M<y.length;++M){for(var v=y[M],b=new Array(v.length),w=0;w<v.length;++w)b[w]=u[v[w]].slice();l&&b.reverse(),m[M]=b}f[g]=m}return f}return e.triangles||e.triangulate||e.triangle?{cells:p(u,s,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:s,positions:u}}function u(t,e,r){try{return a(t,e,r,!0)}catch(t){}try{return a(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function s(t,e,r,n){var o=n.size||64,a=n.font||"normal";return r.font=o+"px "+a,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",u(i(e,r,t,o),n,o)}e.exports=s,e.exports.processPixels=u;var l=t("surface-nets"),c=t("ndarray"),f=t("simplify-planar-graph"),h=t("clean-pslg"),p=t("cdt2d"),d=t("planar-graph-to-polyline")},{cdt2d:92,"clean-pslg":99,ndarray:350,"planar-graph-to-polyline":365,"simplify-planar-graph":411,"surface-nets":414}],434:[function(t,e,r){function n(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function i(){this.isPolyfilled=!0,this.displayId=c++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new l}function o(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function a(){}function u(){}var s=t("./util.js"),l=t("./wakelock.js"),c=1e3,f=!1,h=[0,0,.5,1],p=[.5,0,.5,1];i.prototype.getFrameData=function(t){return s.frameDataFromPose(t,this.getPose(),this)},i.prototype.getPose=function(){return this.getImmediatePose()},i.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},i.prototype.cancelAnimationFrame=function(t){return window.cancelAnimationFrame(t)},i.prototype.wrapForFullscreen=function(t){if(s.isIOS())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var e=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",e.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=t;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},i.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),e.insertBefore(t,this.fullscreenWrapper_),e.removeChild(this.fullscreenWrapper_),t}},i.prototype.requestPresent=function(t){var e=this.isPresenting,r=this;return t instanceof Array||(f||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),f=!0),t=[t]),new Promise(function(n,i){if(r.capabilities.canPresent)if(0==t.length||t.length>r.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var o=t[0];if(o.source){var a=o.leftBounds||h,u=o.rightBounds||p;if(e){var l=r.layer_;l.source!==o.source&&(l.source=o.source);for(var c=0;c<4;c++)l.leftBounds[c]=a[c],l.rightBounds[c]=u[c];n()}else{if(r.layer_={predistorted:o.predistorted,source:o.source,leftBounds:a.slice(0),rightBounds:u.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var f=r.wrapForFullscreen(r.layer_.source),d=function(){var t=s.getFullscreenElement();r.isPresenting=f===t,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},g=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))};r.addFullscreenListeners_(f,d,g),s.requestFullscreen(f)?(r.wakelock_.request(),r.waitingForPresent_=!0):(s.isIOS()||s.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||s.isIOS()||(s.exitFullscreen(),i(new Error("Unable to present.")))}}else n()}else i(new Error("VRDisplay is not capable of presenting."))})},i.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,n){t?(!s.exitFullscreen()&&s.isIOS()&&(e.endPresent_(),e.fireVRDisplayPresentChange_()),s.isWebViewAndroid()&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.endPresent_(),e.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},i.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},i.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},i.prototype.addFullscreenListeners_=function(t,e,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=r,e&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",e,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",e,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",e,!1)),r&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",r,!1))},i.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",r,!1),t.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),t.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},i.prototype.beginPresent_=function(){},i.prototype.endPresent_=function(){},i.prototype.submitFrame=function(t){},i.prototype.getEyeParameters=function(t){return null},a.prototype=new o,u.prototype=new o,e.exports.VRFrameData=n,e.exports.VRDisplay=i,e.exports.VRDevice=o,e.exports.HMDVRDevice=a,e.exports.PositionSensorVRDevice=u},{"./util.js":454,"./wakelock.js":456}],435:[function(t,e,r){function n(t){this.gl=t,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,o.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=o.linkProgram(t,u,s,this.attribs),this.uniforms=o.getProgramUniforms(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(t))}var i=t("./cardboard-ui.js"),o=t("./util.js"),a=t("./deps/wglu-preserve-state.js"),u=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");n.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},n.prototype.onResize=function(){var t=this.gl,e=this,r=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];a(t,r,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},n.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,r=this.gl;o.isIOS()||(e.width=o.getScreenWidth()*this.bufferScale,e.height=o.getScreenHeight()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(r){t.bufferWidth=r,t.realCanvasWidth.set.call(e,r),t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(r){t.bufferHeight=r,t.realCanvasHeight.set.call(e,r),t.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,n){t.lastBoundFramebuffer=n||t.framebuffer,t.realBindFramebuffer.call(r,e,t.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(e){switch(e){case r.CULL_FACE:t.cullFace=!0;break;case r.DEPTH_TEST:t.depthTest=!0;break;case r.BLEND:t.blend=!0;break;case r.SCISSOR_TEST:t.scissorTest=!0;break;case r.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(r,e)},r.disable=function(e){switch(e){case r.CULL_FACE:t.cullFace=!1;break;case r.DEPTH_TEST:t.depthTest=!1;break;case r.BLEND:t.blend=!1;break;case r.SCISSOR_TEST:t.scissorTest=!1;break;case r.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(r,e)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(e,n,i,o){t.colorMask[0]=e,t.colorMask[1]=n,t.colorMask[2]=i,t.colorMask[3]=o,t.realColorMask.call(r,e,n,i,o)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(e,n,i,o){t.clearColor[0]=e,t.clearColor[1]=n,t.clearColor[2]=i,t.clearColor[3]=o,t.realClearColor.call(r,e,n,i,o)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(e,n,i,o){t.viewport[0]=e,t.viewport[1]=n,t.viewport[2]=i,t.viewport[3]=o,t.realViewport.call(r,e,n,i,o)},this.isPatched=!0,o.safariCssSizeWorkaround(e)}},n.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;o.isIOS()||(Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight)),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){o.safariCssSizeWorkaround(e)},1)}},n.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3]},n.prototype.submitFrame=function(){var t=this.gl,e=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),a(t,r,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(e.ctxAttribs.alpha||o.isIOS())&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI&&e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor)}),o.isIOS()){var n=t.canvas;n.width==e.bufferWidth&&n.height==e.bufferHeight||(e.bufferWidth=n.width,e.bufferHeight=n.height,e.onResize())}},n.prototype.updateDeviceInfo=function(t){var e=this.gl,r=this,n=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];a(e,n,function(e){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,r.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW),r.indexCount=i.length}})},n.prototype.computeMeshVertices_=function(t,e,r){for(var n=new Float32Array(2*t*e*5),i=r.getLeftEyeVisibleTanAngles(),a=r.getLeftEyeNoLensTanAngles(),u=r.getLeftEyeVisibleScreenRect(a),s=0,l=0;l<2;l++){for(var c=0;c<e;c++)for(var f=0;f<t;f++,s++){var h=f/(t-1),p=c/(e-1),d=h,g=p,y=o.lerp(i[0],i[2],h),m=o.lerp(i[3],i[1],p),M=Math.sqrt(y*y+m*m),v=r.distortion.distortInverse(M),b=m*v/M;h=(y*v/M-a[0])/(a[2]-a[0]),p=(b-a[3])/(a[1]-a[3]),r.device.widthMeters,r.device.heightMeters,h=2*(u.x+h*u.width-.5),p=2*(u.y+p*u.height-.5),n[5*s+0]=h,n[5*s+1]=p,n[5*s+2]=d,n[5*s+3]=g,n[5*s+4]=l}var w=i[2]-i[0];i[0]=-(w+i[0]),i[2]=w-i[2],w=a[2]-a[0],a[0]=-(w+a[0]),a[2]=w-a[2],u.x=1-(u.x+u.width)}return n},n.prototype.computeMeshIndices_=function(t,e){for(var r=new Uint16Array(2*(t-1)*(e-1)*6),n=t/2,i=e/2,o=0,a=0,u=0;u<2;u++)for(var s=0;s<e;s++)for(var l=0;l<t;l++,o++)0!=l&&0!=s&&(l<=n==s<=i?(r[a++]=o,r[a++]=o-t-1,r[a++]=o-t,r[a++]=o-t-1,r[a++]=o,r[a++]=o-1):(r[a++]=o-1,r[a++]=o-t,r[a++]=o,r[a++]=o-t,r[a++]=o-1,r[a++]=o-t-1));return r},n.prototype.getOwnPropertyDescriptor_=function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(e)},r.set=function(t){this.setAttribute(e,t)}),r},e.exports=n},{"./cardboard-ui.js":436,"./deps/wglu-preserve-state.js":438,"./util.js":454}],436:[function(t,e,r){function n(t){this.gl=t,this.attribs={position:0},this.program=i.linkProgram(t,a,u,this.attribs),this.uniforms=i.getProgramUniforms(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=t("./util.js"),o=t("./deps/wglu-preserve-state.js"),a=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),s=Math.PI/180,l=.3125;n.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},n.prototype.listen=function(t,e){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?t(n):n.clientX<42&&n.clientY<42&&e(n)},r.addEventListener("click",this.listener,!1)},n.prototype.onResize=function(){var t=this.gl,e=this,r=[t.ARRAY_BUFFER_BINDING];o(t,r,function(t){function r(t,e){var r=(90-t)*s,n=Math.cos(r),a=Math.sin(r);i.push(l*n*h+o,l*a*h+h),i.push(e*n*h+o,e*a*h+h)}function n(e,r){i.push(p+e,t.drawingBufferHeight-p-r)}var i=[],o=t.drawingBufferWidth/2,a=Math.max(screen.width,screen.height)*window.devicePixelRatio,u=t.drawingBufferWidth/a*window.devicePixelRatio,c=4*u/2,f=42*u,h=28*u/2,p=14*u;i.push(o-c,f),i.push(o-c,t.drawingBufferHeight),i.push(o+c,f),i.push(o+c,t.drawingBufferHeight),e.gearOffset=i.length/2;for(var d=0;d<=6;d++){var g=60*d;r(g,1),r(g+12,1),r(g+20,.75),r(g+40,.75),r(g+48,1)}e.gearVertexCount=i.length/2-e.gearOffset,e.arrowOffset=i.length/2;var y=c/Math.sin(45*s);n(0,h),n(h,0),n(h+y,y),n(y,h+y),n(y,h-y),n(0,h),n(h,2*h),n(h+y,2*h-y),n(y,h-y),n(0,h),n(y,h-c),n(28*u,h-c),n(y,h+c),n(28*u,h+c),e.arrowVertexCount=i.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW)})},n.prototype.render=function(){var t=this.gl,e=this,r=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];o(t,r,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()})},n.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},e.exports=n},{"./deps/wglu-preserve-state.js":438,"./util.js":454}],437:[function(t,e,r){function n(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new s,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new u(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new a(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new l),h.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=t("./cardboard-distorter.js"),o=t("./cardboard-ui.js"),a=t("./device-info.js"),u=t("./dpdb/dpdb.js"),s=t("./sensor-fusion/fusion-pose-sensor.js"),l=t("./rotate-instructions.js"),c=t("./viewer-selector.js"),f=t("./base.js").VRDisplay,h=t("./util.js"),p={LEFT:"left",RIGHT:"right"};n.prototype=new f,n.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.resetPose=function(){this.poseSensor_.resetPose()},n.prototype.getEyeParameters=function(t){var e,r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(t==p.LEFT)r[0]*=-1,e=this.deviceInfo_.getFieldOfViewLeftEye();else{if(t!=p.RIGHT)return console.error("Invalid eye provided: %s",t),null;e=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:e,offset:r,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},n.prototype.onDeviceParamsUpdated_=function(t){h.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},n.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},n.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(t.canvas.width=h.getScreenWidth()*this.bufferScale_,t.canvas.height=h.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new o(t)):(this.distorter_=new i(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(h.isLandscapeMode()&&h.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},n.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},n.prototype.submitFrame=function(t){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var e=this.layer_.source.getContext("webgl").canvas;e.width==this.lastWidth&&e.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=e.width,this.lastHeight=e.height,this.cardboardUI_.render()}},n.prototype.onOrientationChange_=function(t){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},n.prototype.onResize_=function(t){if(this.layer_){var e=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];e.canvas.setAttribute("style",r.join("; ")+";"),h.safariCssSizeWorkaround(e.canvas)}},n.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},n.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},e.exports=n},{"./base.js":434,"./cardboard-distorter.js":435,"./cardboard-ui.js":436,"./device-info.js":439,"./dpdb/dpdb.js":443,"./rotate-instructions.js":448,"./sensor-fusion/fusion-pose-sensor.js":450,"./util.js":454,"./viewer-selector.js":455}],438:[function(t,e,r){function n(t,e,r){if(e){for(var n=[],i=null,o=0;o<e.length;++o)switch(a=e[o]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((s=e[++o])<t.TEXTURE0||s>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(s),n.push(t.getParameter(a),null);break;case t.ACTIVE_TEXTURE:i=t.getParameter(t.ACTIVE_TEXTURE),n.push(null);break;default:n.push(t.getParameter(a))}r(t);for(o=0;o<e.length;++o){var a=e[o],u=n[o];switch(a){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,u);break;case t.COLOR_CLEAR_VALUE:t.clearColor(u[0],u[1],u[2],u[3]);break;case t.COLOR_WRITEMASK:t.colorMask(u[0],u[1],u[2],u[3]);break;case t.CURRENT_PROGRAM:t.useProgram(u);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,u);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,u);break;case t.TEXTURE_BINDING_2D:if((s=e[++o])<t.TEXTURE0||s>t.TEXTURE31)break;t.activeTexture(s),t.bindTexture(t.TEXTURE_2D,u);break;case t.TEXTURE_BINDING_CUBE_MAP:var s=e[++o];if(s<t.TEXTURE0||s>t.TEXTURE31)break;t.activeTexture(s),t.bindTexture(t.TEXTURE_CUBE_MAP,u);break;case t.VIEWPORT:t.viewport(u[0],u[1],u[2],u[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:u?t.enable(a):t.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}i&&t.activeTexture(i)}}else r(t)}e.exports=n},{}],439:[function(t,e,r){function n(t){this.width=t.width||s.getScreenWidth(),this.height=t.height||s.getScreenHeight(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function i(t){this.viewer=f.CardboardV2,this.updateDeviceParams(t),this.distortion=new a(this.viewer.distortionCoefficients)}function o(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}var a=t("./distortion/distortion.js"),u=t("./math-util.js"),s=t("./util.js"),l=new n({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),c=new n({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),f={CardboardV1:new o({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new o({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};i.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},i.prototype.getDevice=function(){return this.device},i.prototype.setViewer=function(t){this.viewer=t,this.distortion=new a(this.viewer.distortionCoefficients)},i.prototype.determineDevice_=function(t){if(!t)return s.isIOS()?(console.warn("Using fallback iOS device measurements."),c):(console.warn("Using fallback Android device measurements."),l);var e=.0254/t.xdpi,r=.0254/t.ydpi;return new n({widthMeters:e*s.getScreenWidth(),heightMeters:r*s.getScreenHeight(),bevelMeters:.001*t.bevelMm})},i.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,r=this.distortion,n=t.screenLensDistance,i=(e.widthMeters-t.interLensDistance)/2,o=t.interLensDistance/2,a=t.baselineLensDistance-e.bevelMeters,s=e.heightMeters-a,l=u.radToDeg*Math.atan(r.distort(i/n)),c=u.radToDeg*Math.atan(r.distort(o/n)),f=u.radToDeg*Math.atan(r.distort(a/n)),h=u.radToDeg*Math.atan(r.distort(s/n));return{leftDegrees:Math.min(l,t.fov),rightDegrees:Math.min(c,t.fov),downDegrees:Math.min(f,t.fov),upDegrees:Math.min(h,t.fov)}},i.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,r=this.distortion,n=Math.tan(-u.degToRad*t.fov),i=Math.tan(u.degToRad*t.fov),o=Math.tan(u.degToRad*t.fov),a=Math.tan(-u.degToRad*t.fov),s=e.widthMeters/4,l=e.heightMeters/2,c=t.baselineLensDistance-e.bevelMeters-l,f=t.interLensDistance/2-s,h=-c,p=t.screenLensDistance,d=r.distort((f-s)/p),g=r.distort((h+l)/p),y=r.distort((f+s)/p),m=r.distort((h-l)/p),M=new Float32Array(4);return M[0]=Math.max(n,d),M[1]=Math.min(i,g),M[2]=Math.min(o,y),M[3]=Math.max(a,m),M},i.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-u.degToRad*t.fov)),o=r.distortInverse(Math.tan(u.degToRad*t.fov)),a=r.distortInverse(Math.tan(u.degToRad*t.fov)),s=r.distortInverse(Math.tan(-u.degToRad*t.fov)),l=e.widthMeters/4,c=e.heightMeters/2,f=t.baselineLensDistance-e.bevelMeters-c,h=t.interLensDistance/2-l,p=-f,d=t.screenLensDistance,g=(h-l)/d,y=(p+c)/d,m=(h+l)/d,M=(p-c)/d;return n[0]=Math.max(i,g),n[1]=Math.min(o,y),n[2]=Math.min(a,m),n[3]=Math.max(s,M),n},i.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,r=this.device,n=e.screenLensDistance,i=(r.widthMeters-e.interLensDistance)/2,o=e.baselineLensDistance-r.bevelMeters,a=(t[0]*n+i)/r.widthMeters,u=(t[1]*n+o)/r.heightMeters,s=(t[2]*n+i)/r.widthMeters,l=(t[3]*n+o)/r.heightMeters;return{x:a,y:l,width:s-a,height:u-l}},i.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},i.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:u.radToDeg*Math.atan(t.outerDist),rightDegrees:u.radToDeg*Math.atan(t.innerDist),downDegrees:u.radToDeg*Math.atan(t.bottomDist),upDegrees:u.radToDeg*Math.atan(t.topDist)}},i.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.viewer,r=this.device,n=e.screenLensDistance,i=r.widthMeters/n,o=r.heightMeters/n,a=r.width/i,u=r.height/o,s=Math.round((t.eyePosX-t.outerDist)*a),l=Math.round((t.eyePosY-t.bottomDist)*u);return{x:s,y:l,width:Math.round((t.eyePosX+t.innerDist)*a)-s,height:Math.round((t.eyePosY+t.topDist)*u)-l}},i.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,r=this.distortion,n=t.screenLensDistance,i=t.interLensDistance/2/n,o=e.widthMeters/n,a=e.heightMeters/n,s=o/2-i,l=(t.baselineLensDistance-e.bevelMeters)/n,c=t.fov,f=r.distortInverse(Math.tan(u.degToRad*c)),h=Math.min(s,f),p=Math.min(i,f),d=Math.min(l,f);return{outerDist:h,innerDist:p,topDist:Math.min(a-l,f),bottomDist:d,eyePosX:s,eyePosY:l}},i.Viewers=f,e.exports=i},{"./distortion/distortion.js":441,"./math-util.js":445,"./util.js":454}],440:[function(t,e,r){function n(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:HMD:"+t.displayId,this.deviceName=t.displayName+" (HMD)"}function i(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+t.displayId,this.deviceName=t.displayName+" (PositionSensor)"}t("./base.js").VRDisplay;var o=t("./base.js").HMDVRDevice,a=t("./base.js").PositionSensorVRDevice;n.prototype=new o,n.prototype.getEyeParameters=function(t){var e=this.display.getEyeParameters(t);return{currentFieldOfView:e.fieldOfView,maximumFieldOfView:e.fieldOfView,minimumFieldOfView:e.fieldOfView,recommendedFieldOfView:e.fieldOfView,eyeTranslation:{x:e.offset[0],y:e.offset[1],z:e.offset[2]},renderRect:{x:"right"==t?e.renderWidth:0,y:0,width:e.renderWidth,height:e.renderHeight}}},n.prototype.setFieldOfView=function(t,e,r,n){},i.prototype=new a,i.prototype.getState=function(){var t=this.display.getPose();return{position:t.position?{x:t.position[0],y:t.position[1],z:t.position[2]}:null,orientation:t.orientation?{x:t.orientation[0],y:t.orientation[1],z:t.orientation[2],w:t.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},e.exports.VRDisplayHMDDevice=n,e.exports.VRDisplayPositionSensorDevice=i},{"./base.js":434}],441:[function(t,e,r){function n(t){this.coefficients=t}n.prototype.distortInverse=function(t){for(var e=0,r=1,n=t-this.distort(e);Math.abs(r-e)>1e-4;){var i=t-this.distort(r),o=r-i*((r-e)/(i-n));e=r,r=o,n=i}return r},n.prototype.distort=function(t){for(var e=t*t,r=0,n=0;n<this.coefficients.length;n++)r=e*(r+this.coefficients[n]);return(r+1)*t},n.prototype.solveLinear_=function(t,e){for(var r=t.length,n=0;n<r-1;++n)for(var i=n+1;i<r;++i){for(var o=t[n][i]/t[n][n],a=n+1;a<r;++a)t[a][i]-=o*t[a][n];e[i]-=o*e[n]}for(var u=new Array(r),n=r-1;n>=0;--n){for(var s=e[n],a=n+1;a<r;++a)s-=t[a][n]*u[a];u[n]=s/t[n][n]}return u},n.prototype.solveLeastSquares_=function(t,e){var r,n,i,o,a=t.length,u=t[0].length;if(a!=e.Length)throw new Error("Matrix / vector dimension mismatch");var s=new Array(u);for(i=0;i<u;++i)for(s[i]=new Array(u),n=0;n<u;++n){for(o=0,r=0;r<a;++r)o+=t[n][r]*t[i][r];s[i][n]=o}var l=new Array(u);for(n=0;n<u;++n){for(o=0,r=0;r<a;++r)o+=t[n][r]*e[r];l[n]=o}return this.solveLinear_(s,l)},n.prototype.approximateInverse=function(t,e){t=t||1,e=e||100;var r,i,o=new Array(6);for(i=0;i<6;++i)o[i]=new Array(e);var a=new Array(e);for(r=0;r<e;++r){var u=t*(r+1)/e,s=this.distort(u),l=s;for(i=0;i<6;++i)l*=s*s,o[i][r]=l;a[r]=u-s}return new n(this.solveLeastSquares_(o,a))},e.exports=n},{}],442:[function(t,e,r){e.exports={format:1,last_updated:"2017-01-12T08:41:55Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel XL/"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel/"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},{}],443:[function(t,e,r){function n(t,e){if(this.dpdb=o,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e;var r=new XMLHttpRequest,n=this;r.open("GET",u,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function i(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}var o=t("./dpdb.json"),a=t("../util.js"),u="https://dpdb.webvr.rocks/dpdb.json";n.prototype.getDeviceParams=function(){return this.deviceParams},n.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},n.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var e=navigator.userAgent||navigator.vendor||window.opera,r=a.getScreenWidth(),n=a.getScreenHeight();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var o=0;o<t.devices.length;o++){var u=t.devices[o];if(u.rules)if("ios"==u.type||"android"==u.type){if(a.isIOS()==("ios"==u.type)){for(var s=!1,l=0;l<u.rules.length;l++){var c=u.rules[l];if(this.matchRule_(c,e,r,n)){s=!0;break}}if(s)return new i({xdpi:u.dpi[0]||u.dpi,ydpi:u.dpi[1]||u.dpi,bevelMm:u.bw})}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return console.warn("No DPDB device match."),null},n.prototype.matchRule_=function(t,e,r,n){if(!t.ua&&!t.res)return!1;if(t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var i=t.res[0],o=t.res[1];if(Math.min(r,n)!=Math.min(i,o)||Math.max(r,n)!=Math.max(i,o))return!1}return!0},e.exports=n},{"../util.js":454,"./dpdb.json":442}],444:[function(t,e,r){var n=t("./util.js"),i=t("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=n.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new i}:new i,window.WebVRPolyfill=i},{"./util.js":454,"./webvr-polyfill.js":457}],445:[function(t,e,r){var n=window.MathUtil||{};n.degToRad=Math.PI/180,n.radToDeg=180/Math.PI,n.Vector2=function(t,e){this.x=t||0,this.y=e||0},n.Vector2.prototype={constructor:n.Vector2,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},n.Vector3=function(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0},n.Vector3.prototype={constructor:n.Vector3,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var e=1/t;this.multiplyScalar(e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,o=t.y,a=t.z,u=t.w,s=u*e+o*n-a*r,l=u*r+a*e-i*n,c=u*n+i*r-o*e,f=-i*e-o*r-a*n;return this.x=s*u+f*-i+l*-a-c*-o,this.y=l*u+f*-o+c*-i-s*-a,this.z=c*u+f*-a+s*-o-l*-i,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,o=e.x,a=e.y,u=e.z;return this.x=n*u-i*a,this.y=i*o-r*u,this.z=r*a-n*o,this}},n.Quaternion=function(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,r){var n=Math.cos(t/2),i=Math.cos(e/2),o=Math.cos(r/2),a=Math.sin(t/2),u=Math.sin(e/2),s=Math.sin(r/2);return this.x=a*i*o+n*u*s,this.y=n*u*o-a*i*s,this.z=n*i*s+a*u*o,this.w=n*i*o-a*u*s,this},setFromEulerYXZ:function(t,e,r){var n=Math.cos(t/2),i=Math.cos(e/2),o=Math.cos(r/2),a=Math.sin(t/2),u=Math.sin(e/2),s=Math.sin(r/2);return this.x=a*i*o+n*u*s,this.y=n*u*o-a*i*s,this.z=n*i*s-a*u*o,this.w=n*i*o+a*u*s,this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(r),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var r=t.x,n=t.y,i=t.z,o=t.w,a=e.x,u=e.y,s=e.z,l=e.w;return this.x=r*l+o*a+n*s-i*u,this.y=n*l+o*u+i*a-r*s,this.z=i*l+o*s+r*u-n*a,this.w=o*l-r*a-n*u-i*s,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this.x,n=this.y,i=this.z,o=this.w,a=o*t.w+r*t.x+n*t.y+i*t.z;if(a<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,a=-a):this.copy(t),a>=1)return this.w=o,this.x=r,this.y=n,this.z=i,this;var u=Math.acos(a),s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-e)*u)/s,c=Math.sin(e*u)/s;return this.w=o*l+this.w*c,this.x=r*l+this.x*c,this.y=n*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(){var t,e;return function(r,i){return void 0===t&&(t=new n.Vector3),e=r.dot(i)+1,e<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this.normalize(),this}}()},e.exports=n},{}],446:[function(t,e,r){function n(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new o.Quaternion,this.rotateStart_=new o.Vector2,this.rotateEnd_=new o.Vector2,this.rotateDelta_=new o.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=t("./base.js").VRDisplay,o=t("./math-util.js"),a=t("./util.js");n.prototype=new i,n.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.onKeyDown_=function(t){38==t.keyCode?this.animatePhi_(this.phi_+.15):39==t.keyCode?this.animateTheta_(this.theta_-.15):40==t.keyCode?this.animatePhi_(this.phi_-.15):37==t.keyCode&&this.animateTheta_(this.theta_+.15)},n.prototype.animateTheta_=function(t){this.animateKeyTransitions_("theta_",t)},n.prototype.animatePhi_=function(t){t=a.clamp(t,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",t)},n.prototype.animateKeyTransitions_=function(t,e){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var r=this[t],n=new Date;this.angleAnimation_=requestAnimationFrame(function i(){var o=new Date-n;if(o>=80)return this[t]=e,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(i.bind(this));var a=o/80;this[t]=r+(e-r)*a}.bind(this))},n.prototype.onMouseDown_=function(t){this.rotateStart_.set(t.clientX,t.clientY),this.isDragging_=!0},n.prototype.onMouseMove_=function(t){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var e=t.movementX||t.mozMovementX||0,r=t.movementY||t.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-e,this.rotateStart_.y-r)}else this.rotateEnd_.set(t.clientX,t.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=a.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},n.prototype.onMouseUp_=function(t){this.isDragging_=!1},n.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},n.prototype.resetPose=function(){this.phi_=0,this.theta_=0},e.exports=n},{"./base.js":434,"./math-util.js":445,"./util.js":454}],447:[function(t,e,r){(function(e){e&&e.window&&(e.document=e.window.document,e.navigator=e.window.navigator),t("./main")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":444}],448:[function(t,e,r){function n(){this.loadIcon_();var t=document.createElement("div"),e=t.style;e.position="fixed",e.top=0,e.right=0,e.bottom=0,e.left=0,e.backgroundColor="gray",e.fontFamily="sans-serif",e.zIndex=1e6;var r=document.createElement("img");r.src=this.icon,(e=r.style).marginLeft="25%",e.marginTop="25%",e.width="50%",t.appendChild(r);var n=document.createElement("div");(e=n.style).textAlign="center",e.fontSize="16px",e.lineHeight="24px",e.margin="24px 25%",e.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(n);var i=document.createElement("div");(e=i.style).backgroundColor="#CFD8DC",e.position="fixed",e.bottom=0,e.width="100%",e.height="48px",e.padding="14px 24px",e.boxSizing="border-box",e.color="#656A6B",t.appendChild(i);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(e=a.style).float="right",e.fontWeight=600,e.textTransform="uppercase",e.borderLeft="1px solid gray",e.paddingLeft="24px",e.textDecoration="none",e.color="#656A6B",i.appendChild(o),i.appendChild(a),this.overlay=t,this.text=n,this.hide()}var i=t("./util.js");n.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img").style;i.isLandscapeMode()?(e.width="20%",e.marginLeft="40%",e.marginTop="3%"):(e.width="50%",e.marginLeft="25%",e.marginTop="25%")},n.prototype.hide=function(){this.overlay.style.display="none"},n.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},n.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},n.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},n.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},e.exports=n},{"./util.js":454}],449:[function(t,e,r){function n(t){this.kFilter=t,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,a.isIOS()?this.filterQ=new o.Quaternion(-1,0,0,1):this.filterQ=new o.Quaternion(1,0,0,1),this.previousFilterQ=new o.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new o.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new o.Vector3,this.measuredGravity=new o.Vector3,this.gyroIntegralQ=new o.Quaternion}var i=t("./sensor-sample.js"),o=t("../math-util.js"),a=t("../util.js");n.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},n.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var r=e-this.previousGyroMeasurement.timestampS;a.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},n.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var r=new o.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new o.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),a.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",o.radToDeg*a.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new o.Quaternion;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},n.prototype.getOrientation=function(){return this.filterQ},n.prototype.accelToQuaternion_=function(t){var e=new o.Vector3;e.copy(t),e.normalize();var r=new o.Quaternion;return r.setFromUnitVectors(new o.Vector3(0,0,-1),e),r.inverse(),r},n.prototype.gyroToQuaternionDelta_=function(t,e){var r=new o.Quaternion,n=new o.Vector3;return n.copy(t),n.normalize(),r.setFromAxisAngle(n,t.length()*e),r},e.exports=n},{"../math-util.js":445,"../util.js":454,"./sensor-sample.js":452}],450:[function(t,e,r){function n(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new u.Vector3,this.gyroscope=new u.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new o(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new a,this.filterToWorldQ=new u.Quaternion,s.isIOS()?this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new u.Quaternion,this.worldToScreenQ=new u.Quaternion,this.originalPoseAdjustQ=new u.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new u.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),s.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new u.Quaternion,this.isFirefoxAndroid=s.isFirefoxAndroid(),this.isIOS=s.isIOS(),this.orientationOut_=new Float32Array(4)}var i=t("./complementary-filter.js"),o=t("./pose-predictor.js"),a=t("../touch-panner.js"),u=t("../math-util.js"),s=t("../util.js");n.prototype.getPosition=function(){return null},n.prototype.getOrientation=function(){var t=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var e=new u.Quaternion;return e.copy(this.filterToWorldQ),e.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||e.multiply(this.touchPanner.getOrientation()),e.multiply(this.predictedQ),e.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(e.x=0,e.z=0,e.normalize()),this.orientationOut_[0]=e.x,this.orientationOut_[1]=e.y,this.orientationOut_[2]=e.z,this.orientationOut_[3]=e.w,this.orientationOut_},n.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),s.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},n.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},n.prototype.updateDeviceMotion_=function(t){var e=t.accelerationIncludingGravity,r=t.rotationRate,n=t.timeStamp/1e3;this.isFirefoxAndroid&&(n/=1e3);var i=n-this.previousTimestampS;if(i<=s.MIN_TIMESTEP||i>s.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n);this.accelerometer.set(-e.x,-e.y,-e.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),this.previousTimestampS=n},n.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},n.prototype.onMessage_=function(t){var e=t.data;e&&e.type&&"devicemotion"===e.type.toLowerCase()&&this.updateDeviceMotion_(e.deviceMotionEvent)},n.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},n.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),s.isIOS()&&s.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},n.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},e.exports=n},{"../math-util.js":445,"../touch-panner.js":453,"../util.js":454,"./complementary-filter.js":449,"./pose-predictor.js":451}],451:[function(t,e,r){function n(t){this.predictionTimeS=t,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=t("../math-util"),o=t("../util");n.prototype.getPrediction=function(t,e,r){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=r,t;var n=new i.Vector3;n.copy(e),n.normalize();var a=e.length();if(a<20*i.degToRad)return o.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*a).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var u=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(n,u),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=r,this.outQ},e.exports=n},{"../math-util":445,"../util":454}],452:[function(t,e,r){function n(t,e){this.set(t,e)}n.prototype.set=function(t,e){this.sample=t,this.timestampS=e},n.prototype.copy=function(t){this.set(t.sample,t.timestampS)},e.exports=n},{}],453:[function(t,e,r){function n(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=t("./math-util.js"),o=t("./util.js");n.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},n.prototype.resetSensor=function(){this.theta=0},n.prototype.onTouchStart_=function(t){t.touches&&1==t.touches.length&&(this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.isTouching=!0)},n.prototype.onTouchMove_=function(t){if(this.isTouching){this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),o.isIOS()&&(this.rotateDelta.x*=-1);var e=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/e.clientWidth*.5}},n.prototype.onTouchEnd_=function(t){this.isTouching=!1},e.exports=n},{"./math-util.js":445,"./util.js":454}],454:[function(t,e,r){var n=window.Util||{};n.MIN_TIMESTEP=.001,n.MAX_TIMESTEP=1,n.base64=function(t,e){return"data:"+t+";base64,"+e},n.clamp=function(t,e,r){return Math.min(Math.max(e,t),r)},n.lerp=function(t,e,r){return t+(e-t)*r},n.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),n.isWebViewAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),n.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),n.isFirefoxAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}(),n.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},n.isTimestampDeltaValid=function(t){return!(isNaN(t)||t<=n.MIN_TIMESTEP||t>n.MAX_TIMESTEP)},n.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},n.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},n.requestFullscreen=function(t){if(n.isWebViewAndroid())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},n.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},n.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},n.linkProgram=function(t,e,r,n){var i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e),t.compileShader(i);var o=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(o,r),t.compileShader(o);var a=t.createProgram();t.attachShader(a,i),t.attachShader(a,o);for(var u in n)t.bindAttribLocation(a,n[u],u);return t.linkProgram(a),t.deleteShader(i),t.deleteShader(o),a},n.getProgramUniforms=function(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i="",o=0;o<n;o++)r[i=t.getActiveUniform(e,o).name.replace("[0]","")]=t.getUniformLocation(e,i);return r},n.orthoMatrix=function(t,e,r,n,i,o,a){var u=1/(e-r),s=1/(n-i),l=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*u,t[13]=(i+n)*s,t[14]=(a+o)*l,t[15]=1,t},n.copyArray=function(t,e){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]},n.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},n.extend=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},n.safariCssSizeWorkaround=function(t){if(n.isIOS()){var e=t.style.width,r=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(r)+"px",setTimeout(function(){t.style.width=e,t.style.height=r},100)}window.Util=n,window.canvas=t},n.isDebug=function(){return n.getQueryParameter("debug")},n.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},n.frameDataFromPose=function(){function t(t,e,r,n){var i=Math.tan(e?e.upDegrees*o:a),u=Math.tan(e?e.downDegrees*o:a),s=Math.tan(e?e.leftDegrees*o:a),l=Math.tan(e?e.rightDegrees*o:a),c=2/(s+l),f=2/(i+u);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(s-l)*c*.5,t[9]=(i-u)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function e(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=n+n,s=i+i,l=o+o,c=n*u,f=n*s,h=n*l,p=i*s,d=i*l,g=o*l,y=a*u,m=a*s,M=a*l;return t[0]=1-(p+g),t[1]=f+M,t[2]=h-m,t[3]=0,t[4]=f-M,t[5]=1-(c+g),t[6]=d+y,t[7]=0,t[8]=h+m,t[9]=d-y,t[10]=1-(c+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function r(t,e,r){var n,i,o,a,u,s,l,c,f,h,p,d,g=r[0],y=r[1],m=r[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*m+e[12],t[13]=e[1]*g+e[5]*y+e[9]*m+e[13],t[14]=e[2]*g+e[6]*y+e[10]*m+e[14],t[15]=e[3]*g+e[7]*y+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*g+u*y+f*m+e[12],t[13]=i*g+s*y+h*m+e[13],t[14]=o*g+l*y+p*m+e[14],t[15]=a*g+c*y+d*m+e[15]),t}function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],m=e[15],M=r*u-n*a,v=r*s-i*a,b=r*l-o*a,w=n*s-i*u,x=n*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,L=f*y-h*g,T=f*m-p*g,E=h*m-p*y,I=M*E-v*T+b*L+w*A-x*N+D*j;return I?(I=1/I,t[0]=(u*E-s*T+l*L)*I,t[1]=(i*T-n*E-o*L)*I,t[2]=(g*D-y*x+m*w)*I,t[3]=(h*x-f*D-p*w)*I,t[4]=(s*A-a*E-l*N)*I,t[5]=(r*E-i*A+o*N)*I,t[6]=(y*b-d*D-m*v)*I,t[7]=(c*D-h*b+p*v)*I,t[8]=(a*T-u*A+l*j)*I,t[9]=(n*A-r*T-o*j)*I,t[10]=(d*x-g*b+m*M)*I,t[11]=(f*b-c*x-p*M)*I,t[12]=(u*N-a*L-s*j)*I,t[13]=(r*L-n*N+i*j)*I,t[14]=(g*v-d*w-y*M)*I,t[15]=(c*w-f*v+h*M)*I,t):null}function i(i,o,a,l,c){t(i,l?l.fieldOfView:null,c.depthNear,c.depthFar),e(o,a.orientation||u,a.position||s),l&&r(o,o,l.offset),n(o,o)}var o=Math.PI/180,a=.25*Math.PI,u=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);return function(t,e,r){return!(!t||!e||(t.pose=e,t.timestamp=e.timestamp,i(t.leftProjectionMatrix,t.leftViewMatrix,e,r.getEyeParameters("left"),r),i(t.rightProjectionMatrix,t.rightViewMatrix,e,r.getEyeParameters("right"),r),0))}}(),n.isInsideCrossDomainIFrame=function(){var t=window.self!==window.top,e=n.getDomainFromUrl(document.referrer),r=n.getDomainFromUrl(window.location.href);return t&&e!==r},n.getDomainFromUrl=function(t){var e;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0]},e.exports=n},{}],455:[function(t,e,r){function n(){try{this.selectedKey=localStorage.getItem(a)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=o),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=t("./device-info.js"),o=(t("./util.js"),"CardboardV1"),a="WEBVR_CARDBOARD_VIEWER";n.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},n.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},n.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},n.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},n.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},n.prototype.fireOnChange_=function(t){for(var e=0;e<this.onChangeCallbacks_.length;e++)this.onChangeCallbacks_[e](t)},n.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&i.Viewers[this.selectedKey]){this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(a,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},n.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add("webvr-polyfill-viewer-selector"),e.style.display="none";var r=document.createElement("div"),n=r.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div");(n=i.style).boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var o in t)i.appendChild(this.createChoice_(o,t[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(r),e.appendChild(i),e},n.prototype.createH1_=function(t){var e=document.createElement("h1"),r=e.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",e.innerHTML=t,e},n.prototype.createChoice_=function(t,e){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",t),n.setAttribute("type","radio"),n.setAttribute("value",t),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",t),i.innerHTML=e,r.appendChild(n),r.appendChild(i),r},n.prototype.createButton_=function(t,e){var r=document.createElement("button");r.innerHTML=t;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",e),r},e.exports=n},{"./device-info.js":439,"./util.js":454}],456:[function(t,e,r){function n(){function t(t,e,r){var n=document.createElement("source");n.src=r,n.type="video/"+e,t.appendChild(n)}var e=document.createElement("video");e.setAttribute("loop",""),t(e,"webm",o.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(e,"mp4",o.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){e.paused&&e.play()},this.release=function(){e.pause()}}function i(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}var o=t("./util.js");e.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?i:n}()},{"./util.js":454}],457:[function(t,e,r){function n(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=l,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(t){return o.frameDataFromPose(t,this.getPose(),this)})}var o=t("./util.js"),a=t("./cardboard-vr-display.js"),u=t("./mouse-keyboard-vr-display.js"),s=t("./base.js").VRDisplay,l=t("./base.js").VRFrameData,c=t("./base.js").HMDVRDevice,f=t("./base.js").PositionSensorVRDevice,h=t("./display-wrappers.js").VRDisplayHMDDevice,p=t("./display-wrappers.js").VRDisplayPositionSensorDevice;n.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},n.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},n.prototype.populateDevices=function(){if(!this.devicesPopulated){var t=null;this.isCardboardCompatible()&&(t=new a,this.displays.push(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(t)),this.devices.push(new p(t)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(t=new u,this.displays.push(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(t)),this.devices.push(new p(t)))),this.devicesPopulated=!0}},n.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var t=new window.VRFrameData,e=window.VRDisplay.prototype.getFrameData;window.VRFrameData=l,window.VRDisplay.prototype.getFrameData=function(r){e.call(this,t),r.pose=t.pose,o.copyArray(t.leftProjectionMatrix,r.leftProjectionMatrix),o.copyArray(t.rightProjectionMatrix,r.rightProjectionMatrix),o.copyArray(t.leftViewMatrix,r.leftViewMatrix),o.copyArray(t.rightViewMatrix,r.rightViewMatrix)}}if(window.VRDisplay=s,navigator&&!navigator.vrEnabled){var r=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return r.isCardboardCompatible()&&(r.isFullScreenAvailable()||o.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=l)},n.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=c,window.PositionSensorVRDevice=f},n.prototype.getVRDisplays=function(){this.populateDevices();var t=this.displays;return this.nativeWebVRAvailable?this.nativeGetVRDisplaysFunc.call(navigator).then(function(e){return window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?e.concat(t):e.length>0?e:t}):new Promise(function(e,r){try{e(t)}catch(t){r(t)}})},n.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var t=this;return new Promise(function(e,r){try{if(!t.devicesPopulated){if(t.nativeWebVRAvailable)return navigator.getVRDisplays(function(r){for(var n=0;n<r.length;++n)t.devices.push(new h(r[n])),t.devices.push(new p(r[n]));t.devicesPopulated=!0,e(t.devices)},r);if(t.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var n=0;n<r.length;++n)r[n]instanceof c&&t.devices.push(r[n]),r[n]instanceof f&&t.devices.push(r[n]);t.devicesPopulated=!0,e(t.devices)},r)}t.populateDevices(),e(t.devices)}catch(t){r(t)}})},n.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},n.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},e.exports.WebVRPolyfill=n},{"./base.js":434,"./cardboard-vr-display.js":437,"./display-wrappers.js":440,"./mouse-keyboard-vr-display.js":446,"./util.js":454}],458:[function(t,e,r){function n(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}e.exports=n;var i=Object.prototype.hasOwnProperty},{}],459:[function(t,e,r){e.exports=t("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":141}],460:[function(t,e,r){"use strict";function n(t,e){var r=[];return e=+e||0,i(t.hi(t.shape[0]-1),r,e),r}e.exports=n;var i=t("./lib/zc-core")},{"./lib/zc-core":459}]},{},[29])(29)});
