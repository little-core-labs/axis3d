!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).axis3d=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n||e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Camera=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("./context"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),p=e("../core"),d=e("../object3d");n.Camera=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.Object3D(e),new s.CameraContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(p.Component)},{"../core":52,"../object3d":91,"../utils":120,"./context":4,"./defaults":8}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),p=e("./inverse-view"),d=e("./info"),y=e("./view"),m=e("./eye");n.CameraContext=function(e){function t(e,n){return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.CameraInfoContext(e,n),new y.CameraViewContext(e,n),new p.CameraInverseViewContext(e,n),new m.CameraEyeContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../../core":52,"../../utils":120,"../defaults":8,"./eye":3,"./info":5,"./inverse-view":6,"./view":7}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraEyeContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../utils"),l=e("../../scope"),p=e("../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=r(e("eye-vector")),m=r(e("gl-mat4")).default.identity([]);n.CameraEyeContext=function(e){function t(e,n){return o(this,t),(0,s.assignDefaults)(n,t.defaults()),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{eye:function(e,t){var n=e.view;return(0,y.default)(n||m)}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":8,"eye-vector":133,"gl-mat4":162}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./inverse-view");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./view");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./info");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./eye");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})})},{"./context":2,"./eye":3,"./info":5,"./inverse-view":6,"./view":7}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraInfoContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../utils"),l=e("../../scope"),p=e("../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=r(e("gl-mat4")),m=r(e("gl-vec3")),b=y.default.identity([]);n.CameraInfoContext=function(e){function t(e,n){return o(this,t),(0,s.assignDefaults)(n,t.defaults()),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{transform:function(){return b},matrix:function(){return b},projection:function(e,t){return(0,s.get)("projection",[t,e,n])||b},aspect:function(e,t){return(0,s.get)("viewportWidth",[t,e])/(0,s.get)("viewportHeight",[t,e])},target:function(e,t){var r=(0,s.get)("scale",[e,t,n]),o=(0,s.get)("target",[t,e,n]);return m.default.multiply([],o,r)},up:function(e,t){return(0,s.get)("up",[t,e,n])},viewport:function(e,t){var r=(0,s.get)("viewport",[t,e,n]),o=(0,s.get)("viewportHeight",[t,e,n]),i=(0,s.get)("viewportWidth",[t,e,n]),a=(0,s.get)("viewportLeft",[t,e,n]),u=(0,s.get)("viewportTop",[t,e,n]);return r||[a||0,u||0,i||0,o||0]}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":8,"gl-mat4":162,"gl-vec3":244}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraInverseViewContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4")),y=d.default.identity([]);n.CameraInverseViewContext=function(e){function t(e,n){return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{invertedView:function(e){var t=e.view;return t?d.default.invert([],t):y}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":8,"gl-mat4":162}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraViewContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../utils"),l=e("../../scope"),p=e("../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=r(e("gl-mat4")),m=r(e("gl-quat")),b=m.default.identity([]),h=y.default.identity([]),v=y.default.identity([]);n.CameraViewContext=function(e){function t(e,n){return o(this,t),(0,s.assignDefaults)(n,t.defaults()),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{view:function(e,t){var n=(0,s.get)("view",[e,t]);if(n)return n;var r=y.default.identity([]),o=(0,s.get)("position",[e,t]),i=(0,s.get)("rotation",[e,t]),a=(0,s.get)("target",[e,t]),u=(0,s.get)("scale",[e,t]),f=(0,s.get)("up",[e,t]);return o&&i&&a&&u?(m.default.normalize(b,i),y.default.fromQuat(h,b),y.default.translate(r,r,o),y.default.lookAt(r,a,o,f),y.default.multiply(r,r,h),y.default.scale(r,r,u),r):v}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":8,"gl-mat4":162,"gl-quat":187}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../object3d/defaults");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});n.uniformName="camera",n.direction=[0,0,-1],n.target=[0,0,0],n.up=[0,1,0]},{"../object3d/defaults":90}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./orthographic");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./perspective");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./uniforms");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./context");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./camera");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})})},{"./camera":1,"./context":4,"./orthographic":17,"./perspective":25,"./uniforms":27}],10:[function(e,t,n){"use strict";function r(e,t,n,r){var a=[];if(o.default.subtract(a,t,n),o.default.normalize(a,a),a.every(Boolean)){var u=o.default.dot(a,r);Math.abs(u-1)<i?o.default.scale(r,e,-1):Math.abs(u+1)<i&&o.default.copy(r,e),o.default.copy(e,a),o.default.cross(a,e,r),o.default.normalize(a,a),o.default.cross(r,a,e),o.default.normalize(r,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.lookAt=r;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-vec3")),i=1e-9},{"gl-vec3":244}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCameraContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./projection"),s=e("./info"),l=e("./view"),p=e("../../../utils"),d=e("../../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),m=e("../../context");n.OrthographicCameraContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,p.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new m.CameraInfoContext(e,n),new s.OrthographicCameraInfoContext(e,n),new l.OrthographicCameraViewContext(e,n),new c.OrthographicCameraProjectionContext(e,n),new m.CameraInverseViewContext(e,n),new m.CameraEyeContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(d.Component)},{"../../../core":52,"../../../utils":120,"../../context":4,"../defaults":16,"./info":13,"./projection":14,"./view":15}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./projection");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./info");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./view");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":11,"./info":13,"./projection":14,"./view":15}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCameraInfoContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../perspective"),s=e("../../../utils"),l=e("../../../scope"),p=e("../../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.OrthographicCameraInfoContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.PerspectiveCameraInfoContext(e,n),new l.ScopedContext(e,{viewport:function(e,t){var r=(0,s.get)("viewport",[t,n]),o=((0,s.get)("viewportHeight",[t,e,n]),(0,s.get)("viewportWidth",[t,e,n]),(0,s.get)("near",[t,e,n]),(0,s.get)("far",[t,e,n]));return r||[-o,-o,o,o]}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},d)}}]),t}(p.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../perspective":25,"../defaults":16}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCameraProjectionContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../scope"),l=e("../../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4")),y=d.default.identity([]);n.OrthographicCameraProjectionContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{projection:function(e,t){var r=d.default.identity(y),o=(0,c.get)("viewport",[t,e,n]),i=(0,c.get)("near",[t,e,n]),a=(0,c.get)("far",[t,e,n]),u=o[0],f=o[1],s=o[2],l=o[3];return d.default.ortho(r,u,s,f,l,i,a),r}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../defaults":16,"gl-mat4":162}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCameraViewContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../perspective"),s=e("../../../utils"),l=(e("../../../scope"),e("../../../core")),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.OrthographicCameraViewContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.PerspectiveCameraViewContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../perspective":25,"../defaults":16}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../defaults");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});n.near=.1,n.far=100},{"../defaults":8}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./orthographic");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./context":12,"./orthographic":18}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCamera=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./context"),s=e("../../utils"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),d=e("../../object3d");n.OrthographicCamera=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.Object3D(e,n),new c.OrthographicCameraContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../object3d":91,"../../utils":120,"./context":12,"./defaults":16}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCameraContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./projection"),s=e("./info"),l=e("./view"),p=e("../../../utils"),d=e("../../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),m=e("../../context");n.PerspectiveCameraContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,p.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new m.CameraInfoContext(e,n),new s.PerspectiveCameraInfoContext(e,n),new l.PerspectiveCameraViewContext(e,n),new c.PerspectiveCameraProjectionContext(e,n),new m.CameraInverseViewContext(e,n),new m.CameraEyeContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(d.Component)},{"../../../core":52,"../../../utils":120,"../../context":4,"../defaults":24,"./info":21,"./projection":22,"./view":23}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./projection");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./view");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./info");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":19,"./info":21,"./projection":22,"./view":23}],21:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCameraInfoContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../scope"),l=e("../../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.PerspectiveCameraInfoContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{direction:function(e,t){return(0,c.get)("direction",[t,e])},near:function(e,t){return(0,c.get)("near",[t,e])},far:function(e,t){return(0,c.get)("far",[t,e])},fov:function(e,t){return(0,c.get)("fov",[t,e])},up:function(e,t){return(0,c.get)("up",[t,e])}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../defaults":24}],22:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCameraProjectionContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../scope"),l=e("../../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4"));n.PerspectiveCameraProjectionContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{projection:function(e,t){var n=d.default.identity([]);if("projection"in t&&t.projection)d.default.copy(n,t.projection);else{var r=(0,c.get)("aspect",[t,e]),o=(0,c.get)("near",[t,e]),i=(0,c.get)("far",[t,e]),a=(0,c.get)("fov",[t,e]);d.default.perspective(n,a,r,o,i)}return n}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../defaults":24,"gl-mat4":162}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCameraViewContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../../utils"),l=e("../../../scope"),p=e("../../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=e("../../look-at"),m=r(e("gl-mat4")),b=r(e("gl-vec3")),h=r(e("gl-quat")),v=h.default.identity([]),g=m.default.identity([]),_=m.default.identity([]);n.PerspectiveCameraViewContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,t),(0,s.assignDefaults)(n,t.defaults()),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{view:function(e,t){var n=(0,s.get)("view",[e,t]);if(n)return n;var r=m.default.identity([]),o=[0,0,0],i=(0,s.get)("direction",[e,t]),a=(0,s.get)("position",[e,t]),u=(0,s.get)("rotation",[e,t]),f=(0,s.get)("target",[e,t]),c=(0,s.get)("scale",[e,t]),l=(0,s.get)("up",[e,t]);return a&&u&&f&&c?((0,y.lookAt)(i,f,a,l),b.default.add(o,a,i),h.default.normalize(v,u),m.default.fromQuat(g,v),m.default.lookAt(r,a,o,l),m.default.multiply(r,r,g),m.default.scale(r,r,c),r):_}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../look-at":10,"../defaults":24,"gl-mat4":162,"gl-quat":187,"gl-vec3":244}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../defaults");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});n.near=.01,n.far=1e3,n.fov=60*Math.PI/180},{"../defaults":8}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./perspective");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./context":20,"./perspective":26}],26:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCamera=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./context"),s=e("../../utils"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),p=e("../../core"),d=e("../../object3d");n.PerspectiveCamera=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.Object3D(e,n),new c.PerspectiveCameraContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(p.Component)},{"../../core":52,"../../object3d":91,"../../utils":120,"./context":20,"./defaults":24}],27:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../shader"),l=e("../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.CameraShaderUniforms=function(e){function t(e,n){r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderUniforms(e,{prefix:i+"."},{invertedView:function(e){return e.invertedView},projection:function(e){return e.projection},aspect:function(e){return e.aspect},view:function(e){return e.view},eye:function(e){return e.eye}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../core":52,"../shader":97,"../utils":120,"./defaults":8}],28:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Compute=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("./core");n.Compute=function(e){function t(e,n,i){var a;r(this,t);for(var f=arguments.length,c=Array(f>3?f-3:0),s=3;s<f;s++)c[s-3]=arguments[s];"function"==typeof i&&c.unshift(i),"function"==typeof n&&c.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var l=e.regl({});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,function(e,t){l(n.compute),l(t)}].concat(c)))}return i(t,e),t}(f.Component)},{"./core":52}],29:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=0;n.Command=function(e){function t(e){var n;if(r(this,t),"function"!=typeof e)throw new TypeError("Command constructor expects a function.");var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.codegen(function(e){return e.apply(e,Array.prototype.slice.call(arguments,1))}))),a=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.apply(void 0,[e].concat(n))};return i.constructor=a.constructor=t,f++,n=Object.assign(a,{this:i}),o(i,n)}return i(t,e),u(t,null,[{key:"count",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return count})},{key:"codegen",value:function(e){if("function"!=typeof e)throw new TypeError("Expecting a function");return'"use strict"; return ('+String(e)+").apply(this, arguments);"}}]),t}(Function)},{}],30:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Component=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./command"),p=e("./entity"),d=0;n.Component=function(e){function t(e){for(var n=arguments.length,a=Array(n>2?n-2:0),u=2;u<n;u++)a[u-2]=arguments[u];var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),"function"==typeof s?(a.unshift(s),s={}):Array.isArray(s)&&(a=s,s={}),a=t.compose(a);var l=new p.Entity(e,s);return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},t="function"==typeof t?t:function(){},e=Array.isArray(e)?e.map(function(e){return f({},s,e)}):f({},s,e),l(e,function(e,n){r(e),a(n,t)})}))}return a(t,e),s(t,null,[{key:"id",value:function(){return++d}},{key:"defaults",value:function(){return{}}},{key:"compose",value:function(){function e(e,t){function r(n){var o=n.shift();"function"==typeof o?n.length?o(e,function(){return r(n)}):t!=o&&o(e,t):r(n)}if("function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},t="function"==typeof t?t:function(){},0==n.length)return t(e);r(n.slice())}for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Array.isArray(n[0])&&(n=n[0]),n=Array.isArray(n)?n:[],e}}]),t}(l.Command)},{"./command":29,"./entity":33}],31:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Context=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==f(Symbol.iterator)?function(e){return void 0===e?"undefined":f(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":f(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=e("events"),d=r(e("defined")),y=r(e("global/document")),m=r(e("global/window")),b=r(e("dom-events")),h=r(e("@littlstar/regl"));n.Context=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.default;i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.setMaxListeners(1/0),r._hasFocus=!1,r._isDestroyed=!1,e.regl=(0,d.default)(e.regl,e.gl||{}),e.gl&&e.gl.context&&(e.regl.gl=e.gl.context,delete e.gl.context),e.canvas&&"object"==s(e.canvas)?e.regl.canvas=e.canvas:e.element&&"CANVAS"==e.element.nodeName?e.regl.canvas=e.element:e.element&&e.element.nodeName?e.regl.container=e.element:"string"==typeof e.element&&(e.regl.container=e.element),n(c({pixelRatio:e.pixelRatio||m.default.devicePixelRatio||1,profile:Boolean(e.profile)},e.regl,{attributes:c({},e.regl.attributes||{}),extensions:[].concat(o(e.regl.extensions||[])),optionalExtensions:["ANGLE_instanced_arrays","EXT_disjoint_timer_query","OES_texture_float","OES_element_index_uint","OES_vertex_array_object"].concat(o(e.regl.optionalExtensions||[])),onDone:function(e,t){if(e)return r.emit("error",e);r._regl=t,r._isDestroyed=!1,t._gl&&t._gl.canvas?r._domElement=r._regl._gl.canvas:r._domElement=null}})),null!=r._domElement&&"undefind"!=typeof m.default&&"undefind"!=typeof y.default){var u=function(e,t,n){b.default.on(e,t,n),r.once("beforedestroy",function(){return b.default.off(e,t,n)})},f=function(){r.blur()},l=function(){r.focus()},p=function(){r.blur()},v=function(e){e.target==r._domElement?r.focus():r.blur()};u(r._domElement,"blur",f),u(r._domElement,"focus",l),u(m.default,"blur",p),u(y.default,"mousedown",v),u(y.default,"touchstart",v)}return r}return u(t,e),l(t,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"destroy",value:function(){return this.emit("beforedestroy"),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._domElement,this._hasFocus=!1,this.emit("destroy"),this}},{key:"refresh",value:function(){return this.regl&&"function"==typeof this.regl._refresh&&this.regl._refresh(),this}},{key:"flush",value:function(){return this.gl&&this.gl.flush(),this}},{key:"poll",value:function(){this.regl&&this.regl&&"function"==typeof this.regl.poll&&this.regl.poll()}},{key:"isDestroyed",get:function(){return Boolean(this._isDestroyed)}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl?this._regl._gl||null:null}}]),t}(p.EventEmitter)},{"@littlstar/regl":122,defined:130,"dom-events":131,events:132,"global/document":277,"global/window":278}],32:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicValueCounter=n.DynamicValue=void 0;var a="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),c=(n.DynamicValue=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e);var u=function(e,t,r){return Object.defineProperty(n,e,{enumerable:!1,get:function(){return t||r}})};u("ctx",t,{}),u("initialState",r,{}),"object"==(void 0===i?"undefined":a(i))&&this.set(i)}return u(e,null,[{key:"createCounter",value:function(){return new c}},{key:"pluck",value:function(t,n,r){var o=void 0;t&&null!=t[n]&&(o=null!=r?t[n][r]:t[n]);for(var i=arguments.length,a=Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return e.primitive(f.default.apply(void 0,[o].concat(a)))}},{key:"primitive",value:function(e){var t=e;if(null==e&&(t=void 0),"object"==(void 0===e?"undefined":a(e))){var n="number"==typeof e.length,o="function"==typeof e[Symbol.iterator];t=n?o?[].concat(r(e)):Array(e.length).fill(0).map(function(t,n){return e[n]}):Object.assign({},e)}return t}}]),u(e,[{key:"set",value:function(t,n){var r=this.initialState.prefix,o=void 0===r?"":r;if(t&&"object"==(void 0===t?"undefined":a(t))){var i=Object.getOwnPropertyDescriptors(t);for(var u in i)try{Object.defineProperty(this,""+o+u,i[u])}catch(e){}}else"string"==typeof t&&null!=n&&(this[""+o+t]=e.primitive(n));return this.purge(),this}},{key:"unset",value:function(e){var t=this.initialState.prefix,n=void 0===t?"":t;return"string"==typeof e&&delete this[""+n+e],this}},{key:"purge",value:function(){for(var e in this)null==this[e]&&delete this[e];return this}}]),e}(),n.DynamicValueCounter=function(){function e(){o(this,e),Object.defineProperties(this,{contexts:{enumerable:!1,value:new Set},map:{enumerable:!1,value:new WeakMap}})}return u(e,[{key:"setContext",value:function(e){var t=this.map.get(e)||new Set;return this.map.set(e,t),0==this.contexts.has(e)&&this.contexts.add(e),this}},{key:"getSetForContext",value:function(e){return this.setContext(e),this.map.get(e)}},{key:"addValueForContext",value:function(e,t){var n=this.getSetForContext(e);return 0==n.has(t)&&n.add(t),this}},{key:"sumSetForContext",value:function(e){return this.getSetForContext(e).size()}},{key:"listSetForContext",value:function(e){return[].concat(r(this.getSetForContext(e)))}},{key:"list",value:function(){return[].concat(r(this.contexts))}}]),e}())},{defined:130}],33:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Entity=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./command"),s=0;n.Entity=function(e){function t(e){r(this,t);var n=t.id(),i=e.regl({context:{entityID:function(){return n}}});return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":u(e))&&e?e:{},i(e,t="function"==typeof t?t:function(){})}))}return i(t,e),f(t,null,[{key:"id",value:function(){return++s}}]),t}(c.Command)},{"./command":29}],34:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Geometry=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(e("bound-points")),u=r(e("defined")),f=r(e("array-flatten")),c=r(e("mesh-reindex")),s=r(e("unindex-mesh")),l=r(e("normals"));n.Geometry=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n={};n=t.positions?t:t.complex;var r=(0,u.default)(t.flatten,n.flatten,!1);Object.defineProperty(this,"_complex",{enumerable:!1,value:{}}),this.flatten=Boolean(r),this.complex=n||null}return i(e,[{key:"computeBoundingBox",value:function(){return(0,a.default)(this.positions)}},{key:"complex",set:function(t){function n(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)for(var a=o.value,u=0;u<3;++u)null==a[u]&&(a[u]=0)}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}if(t instanceof e&&(t=t.complex),t){if(t.positions&&n(t.positions),t.normals&&n(t.normals),this.flatten&&t.cells){var r=t.cells.map(function(e){return e.slice()}),o=(0,c.default)((0,s.default)(t.positions,r));try{t.normals=l.default.vertexNormals(o.cells,o.positions)}catch(e){console.warn("Unable to compute vertex normals.")}Object.assign(t,o)}else t.positions&&!t.cells&&Object.assign(t,(0,c.default)((0,f.default)(t.positions)));if(null==t.normals&&t.positions&&t.cells)try{t.normals=l.default.vertexNormals(t.cells,t.positions)}catch(e){console.warn("Unable to compute vertex normals.")}}return Object.assign(this._complex,t),t},get:function(){return this._complex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),e}()},{"array-flatten":123,"bound-points":124,defined:130,"mesh-reindex":292,normals:293,"unindex-mesh":304}],35:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.WebGLShaderInstancedAttributes=n.WebGLShaderAttributes=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../dynamic"),s=c.DynamicValue.createCounter(),l=n.WebGLShaderAttributes=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];r(this,t),null==i?(i=n,n={}):null==n&&null==i&&(n={},i={});var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return s.addValueForContext(e,a),a}return i(t,e),f(t,null,[{key:"counter",value:function(){return s}},{key:"getTotalUniformCount",value:function(){return t.counter().list().map(function(e){return t.getContextUniformCount(e)}).reduce(function(e,t){return e+t},0)}},{key:"getContextUniformCount",value:function(e){var n=t.counter().listSetForContext(e).reduce(function(e,t){return Object.assign(e,t)},{});return Object.keys(n).length}}]),t}(c.DynamicValue);n.WebGLShaderInstancedAttributes=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];r(this,t),null==i&&"object"==(void 0===n?"undefined":u(n))?(i=n,n={}):null==n&&null==i&&(n={},i={});for(var a in i)i[a]&&"object"==u(i[a])&&("object"==u(i[a].buffer)?"number"!=typeof i[a].divisor&&(i[a].divisor=1):i[a]={buffer:i[a],divisor:1});return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i))}return i(t,e),t}(l)},{"../dynamic":32}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./attributes");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./uniforms");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./attributes":35,"./uniforms":37}],37:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.WebGLShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../dynamic"),s=c.DynamicValue.createCounter();n.WebGLShaderUniforms=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({},n),u({},i)));return s.addValueForContext(e,a),a}return i(t,e),f(t,null,[{key:"counter",value:function(){return s}},{key:"getTotalUniformCount",value:function(){return t.counter().list().map(function(e){return t.getContextUniformCount(e)}).reduce(function(e,t){return e+t},0)}},{key:"getContextUniformCount",value:function(e){var n=t.counter().listSetForContext(e).reduce(function(e,t){return Object.assign(e,t)},{});return Object.keys(n).length}}]),t}(c.DynamicValue)},{"../dynamic":32}],38:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_CAMERA_VARIABLES\n#define GLSL_CAMERA_VARIABLES\n\n#ifndef GLSL_CAMERA_UNIFORM_VARIABLE\n#define GLSL_CAMERA_UNIFORM_VARIABLE camera\n#endif\n\n#endif\n"),r(o,t+"/uniforms",'#define GLSLIFY 1\n#ifndef GLSL_CAMERA_UNIFORMS\n#define GLSL_CAMERA_UNIFORMS\n\n#include "./variables"\n\n#ifdef GLSL_CAMERA\nuniform Camera GLSL_CAMERA_UNIFORM_VARIABLE;\n#endif\n\n#endif\n'),r(o,t+"/camera","#define GLSLIFY 1\n#ifndef GLSL_CAMERA\n#define GLSL_CAMERA\n\nstruct Camera {\n  mat4 invertedView;\n  mat4 projection;\n  mat4 view;\n  vec3 eye;\n};\n\n#endif\n"),o))}).call(this,"/lib/core/glsl/camera")},{glslify:290}],39:[function(e,t,n){(function(t){"use strict";!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t+"/common","#define GLSLIFY 1\n#ifndef GLSL_COMMON\n#define GLSL_COMMON 1\n\n#ifndef M_PI\n#define M_PI 3.141592653589793\n#endif\n\n#ifndef M_E\n#define M_E 2.718281828459045\n#endif\n\n#endif\n"))}).call(this,"/lib/core/glsl/common")},{glslify:290}],40:[function(e,t,n){(function(t){"use strict";!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t+"/main",'#define GLSLIFY 1\n#ifndef GLSL_FRAGMENT_MAIN\n#define GLSL_FRAGMENT_MAIN\n\n#include "../varying/data"\n#include "../varying/read"\n\nvoid InitVarying(inout VaryingData varyingData);\nvoid BeforeMain(inout vec4 fragColor, inout VaryingData varyingData);\nvoid Main(inout vec4 fragColor, inout VaryingData data);\nvoid TransformMain(inout vec4 fragColor, inout VaryingData varyingData);\nvoid AfterMain(inout vec4 fragColor, inout VaryingData varyingData);\n\nvoid main() {\n  VaryingData varyingData = ReadVaryingData();\n  InitVarying(varyingData);\n  BeforeMain(gl_FragColor, varyingData);\n  Main(gl_FragColor, varyingData);\n  TransformMain(gl_FragColor, varyingData);\n  AfterMain(gl_FragColor, varyingData);\n}\n\n#ifdef GLSL_FRAGMENT_MAIN_BEFORE\n  void GLSL_FRAGMENT_MAIN_BEFORE(inout vec4 fragColor,\n                                 inout VaryingData varyingData);\n#endif\n\n#ifdef GLSL_FRAGMENT_MAIN_TRANSFORM\n  void GLSL_FRAGMENT_MAIN_TRANSFORM(inout vec4 fragColor,\n                                    inout VaryingData varyingData);\n#endif\n\n#ifdef GLSL_FRAGMENT_MAIN_AFTER\n  void GLSL_FRAGMENT_MAIN_AFTER(inout vec4 fragColor,\n                                inout VaryingData varyingData);\n#endif\n\nvoid BeforeMain(inout vec4 fragColor,\n                inout VaryingData varyingData) {\n#ifdef GLSL_FRAGMENT_MAIN_BEFORE\n  GLSL_FRAGMENT_MAIN_BEFORE(fragColor, varyingData);\n#endif\n}\n\nvoid TransformMain(inout vec4 fragColor,\n                   inout VaryingData varyingData) {\n#ifdef GLSL_FRAGMENT_MAIN_TRANSFORM\n  GLSL_FRAGMENT_MAIN_TRANSFORM(fragColor, varyingData);\n#endif\n}\n\nvoid AfterMain(inout vec4 fragColor,\n               inout VaryingData varyingData) {\n#ifdef GLSL_FRAGMENT_MAIN_AFTER\n  GLSL_FRAGMENT_MAIN_AFTER(fragColor, varyingData);\n#endif\n}\n\nvoid InitVarying(inout VaryingData varyingData) {\n  varyingData = ReadVaryingData();\n}\n\n#endif\n'))}).call(this,"/lib/core/glsl/fragment")},{glslify:290}],41:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_FRAME_VARIABLES\n#define GLSL_FRAME_VARIABLES\n\n#ifndef GLSL_FRAME_UNIFORM_VARIABLE\n#define GLSL_FRAME_UNIFORM_VARIABLE frame\n#endif\n\n#endif\n"),r(o,t+"/uniforms",'#define GLSLIFY 1\n#ifndef GLSL_FRAME_UNIFORMS\n#define GLSL_FRAME_UNIFORMS\n\n#include "./variables"\n\n#ifdef GLSL_FRAME\nuniform Frame GLSL_FRAME_UNIFORM_VARIABLE;\n#endif\n\n#endif\n'),r(o,t+"/frame","#define GLSLIFY 1\n#ifndef GLSL_FRAME\n#define GLSL_FRAME\n\nstruct Frame {\n  float time;\n  float tick;\n  vec2 resolution;\n};\n\n#endif\n"),o))}).call(this,"/lib/core/glsl/frame")},{glslify:290}],42:[function(e,t,n){(function(t){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.time=n.mesh=n.frame=n.common=n.camera=n.vertex=n.varying=n.texture=n.fragment=n.material=void 0;var o=r(e("./material")),i=r(e("./fragment")),a=r(e("./texture")),u=r(e("./varying")),f=r(e("./vertex")),c=r(e("./camera")),s=r(e("./common")),l=r(e("./frame")),p=r(e("./mesh")),d=r(e("./time"));n.material=o,n.fragment=i,n.texture=a,n.varying=u,n.vertex=f,n.camera=c,n.common=s,n.frame=l,n.mesh=p,n.time=d;for(var y in n)for(var m in n[y]){var b=m.replace(t+"/"+y,"");n[y][b]=n[y][m],delete n[y][m]}}).call(this,"/lib/core/glsl")},{"./camera":38,"./common":39,"./fragment":40,"./frame":41,"./material":43,"./mesh":44,"./texture":45,"./time":46,"./varying":48,"./vertex":51}],43:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/fragment/main",'#define GLSLIFY 1\n#ifndef GLSL_MATERIAL_FRAGMENT_MAIN\n#define GLSL_MATERIAL_FRAGMENT_MAIN\n\n#include "../material"\n#include "../uniforms"\n#include "../variables"\n\n#include "../../mesh/fragment"\n#include "../../fragment/main"\n#include "../../varying/read"\n\nvoid Main(inout vec4 fragColor, inout VaryingData data) {\n  fragColor = MeshFragment(\n      GLSL_MATERIAL_UNIFORM_VARIABLE.color,\n      GLSL_MATERIAL_UNIFORM_VARIABLE.opacity);\n}\n\n#endif\n'),r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_MATERIAL_VARIABLES\n#define GLSL_MATERIAL_VARIABLES\n\n#ifndef GLSL_MATERIAL_UNIFORM_VARIABLE\n#define GLSL_MATERIAL_UNIFORM_VARIABLE material\n#endif\n\n#endif\n"),r(o,t+"/material","#define GLSLIFY 1\n#ifndef GLSL_MATERIAL\n#define GLSL_MATERIAL\n\nstruct Material {\n  vec3 color;\n  float opacity;\n};\n\n#endif\n"),r(o,t+"/uniforms",'#define GLSLIFY 1\n#ifndef GLSL_MATERIAL_UNIFORMS\n#define GLSL_MATERIAL_UNIFORMS\n\n#include "./variables"\n#include "./material"\n\nuniform Material GLSL_MATERIAL_UNIFORM_VARIABLE;\n\n#endif\n'),o))}).call(this,"/lib/core/glsl/material")},{glslify:290}],44:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/vertex/main",'#define GLSLIFY 1\n#ifndef GLSL_MESH_VERTEX_MAIN\n#define GLSL_MESH_VERTEX_MAIN\n\n#include "../variables"\n#include "../uniforms"\n#include "../vertex"\n#include "../mesh"\n\n#include "../../camera/camera"\n#include "../../camera/uniforms"\n\n#ifdef GLSL_MESH_HAS_POSITION\n#include "../../vertex/attributes/position"\n#include "../../varying/position"\n#endif\n\n#ifdef GLSL_MESH_HAS_NORMAL\n#include "../../vertex/attributes/normal"\n#include "../../varying/normal"\n#endif\n\n#ifdef GLSL_MESH_HAS_UV\n#include "../../vertex/attributes/uv"\n#include "../../varying/uv"\n#endif\n\n#include "../../varying/emit"\n#include "../../vertex/main"\n\nvoid Main(inout vec4 vertexPosition, inout VaryingData data) {\n  vertexPosition = MeshVertex(\n      GLSL_CAMERA_UNIFORM_VARIABLE.projection,\n      GLSL_CAMERA_UNIFORM_VARIABLE.view,\n      GLSL_MESH_UNIFORM_VARIABLE.model,\n      GLSL_VERTEX_ATTRIBUTES_POSITION_VARIABLE);\n}\n\n#endif\n'),r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_MESH_VARIABLES\n#define GLSL_MESH_VARIABLES\n\n#ifndef GLSL_MESH_UNIFORM_VARIABLE\n#define GLSL_MESH_UNIFORM_VARIABLE mesh\n#endif\n\n#endif\n"),r(o,t+"/uniforms",'#define GLSLIFY 1\n#ifndef GLSL_MESH_UNIFORMS\n#define GLSL_MESH_UNIFORMS\n\n#include "./variables"\n#include "./mesh"\n\nuniform Mesh GLSL_MESH_UNIFORM_VARIABLE;\n\n#endif\n'),r(o,t+"/fragment","#define GLSLIFY 1\n#ifndef GLSL_MESH_FRAGMENT\n#define GLSL_MESH_FRAGMENT\n\n#ifndef GLSL_MESH_FRAGMENT_DEFAULT_COLOR\n#define GLSL_MESH_FRAGMENT_DEFAULT_COLOR vec4(0.25882352941176473, 0.5254901960784314, 0.9568627450980393, 1.0)\n#endif\n\nvec4 MeshFragment(void) {\n  return vec4(GLSL_MESH_FRAGMENT_DEFAULT_COLOR);\n}\n\nvec4 MeshFragment(vec4 color) {\n  return color;\n}\n\nvec4 MeshFragment(float r, float g, float b, float a) {\n  return MeshFragment(vec4(r, g, b, a));\n}\n\nvec4 MeshFragment(float r, float g, float b) {\n  return MeshFragment(r, g, b, 1.0);\n}\n\nvec4 MeshFragment(float c) {\n  return MeshFragment(c, c, c, 1.0);\n}\n\nvec4 MeshFragment(vec3 color, float opacity) {\n  return MeshFragment(vec4(color, opacity));\n}\n\nvec4 MeshFragment(vec3 color) {\n  return MeshFragment(color, 1.0);\n}\n\n#endif\n"),r(o,t+"/vertex","#define GLSLIFY 1\n#ifndef GLSL_MESH_VERTEX\n#define GLSL_MESH_VERTEX\n\n#ifndef GLSL_MESH_VERTEX_DEFAULT_POSITION\n#define GLSL_MESH_VERTEX_DEFAULT_POSITION vec4(0.0, 0.0, 0.0, 1.0)\n#endif\n\nvec4 MeshVertex(void) {\n  return vec4(GLSL_MESH_VERTEX_DEFAULT_POSITION);\n}\n\nvec4 MeshVertex(vec4 position) {\n  return position;\n}\n\nvec4 MeshVertex(mat4 transform, vec4 position) {\n  return MeshVertex(transform * position);\n}\n\nvec4 MeshVertex(mat4 transform, vec3 position) {\n  return MeshVertex(transform, vec4(position, 1.0));\n}\n\nvec4 MeshVertex(mat4 transform, mat4 model, vec4 position) {\n  return MeshVertex(transform * model * position);\n}\n\nvec4 MeshVertex(mat4 transform, mat4 model, vec3 position) {\n  return MeshVertex(transform, model, vec4(position, 1.0));\n}\n\nvec4 MeshVertex(mat4 projection, mat4 view, mat4 model, vec4 position) {\n  return MeshVertex(projection * view * model, position);\n}\n\nvec4 MeshVertex(mat4 projection, mat4 view, mat4 model, vec3 position) {\n  return MeshVertex(projection, view, model, vec4(position, 1.0));\n}\n\n#endif\n"),r(o,t+"/mesh","#define GLSLIFY 1\n#ifndef GLSL_MESH\n#define GLSL_MESH\n\nstruct Mesh {\n  vec4 rotation;\n  vec3 scale;\n  vec3 position;\n  mat4 model;\n  mat3 modelNormal;\n};\n\n#endif\n"),o))}).call(this,"/lib/core/glsl/mesh")},{glslify:290}],45:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_TEXTURE_VARIABLES\n#define GLSL_TEXTURE_VARIABLES\n\n#ifndef GLSL_TEXTURE_2D_VARIABLE\n#define GLSL_TEXTURE_2D_VARIABLE tex2d\n#endif\n\n#ifndef GLSL_TEXTURE_CUBE_VARIABLE\n#define GLSL_TEXTURE_CUBE_VARIABLE texCube\n#endif\n\n#endif\n"),r(o,t+"/uniforms",'#define GLSLIFY 1\n#ifndef GLSL_TEXTURE_UNIFORMS\n#define GLSL_TEXTURE_UNIFORMS\n\n#include "./variables"\n\n#ifdef GLSL_TEXTURE_2D\nuniform Texture2D GLSL_TEXTURE_2D_VARIABLE;\n#endif\n\n#ifdef GLSL_TEXTURE_CUBE\nuniform TextureCube GLSL_TEXTURE_CUBE_VARIABLE;\n#endif\n\n#endif\n'),r(o,t+"/cube","#define GLSLIFY 1\n#ifndef GLSL_TEXTURE_CUBE\n#define GLSL_TEXTURE_CUBE\n\nstruct TextureCube {\n  vec2 resolution;\n  samplerCube data;\n};\n\n#endif\n"),r(o,t+"/2d","#define GLSLIFY 1\n#ifndef GLSL_TEXTURE_2D\n#define GLSL_TEXTURE_2D\n\nstruct Texture2D {\n  vec2 resolution;\n  sampler2D data;\n};\n\n#endif\n"),o))}).call(this,"/lib/core/glsl/texture")},{glslify:290}],46:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_TIME_VARIABLES\n#define GLSL_TIME_VARIABLES\n\n#ifndef GLSL_TIME_UNIFORM_VARIABLE\n#define GLSL_TIME_UNIFORM_VARIABLE time\n#endif\n\n#endif\n"),r(o,t+"/time",'#define GLSLIFY 1\n#ifndef GLSL_TIME\n#define GLSL_TIME\n\n#include "../frame/frame"\n#include "../frame/uniforms"\n#include "../frame/variables"\n\nfloat GetTime() {\n  return GLSL_FRAME_UNIFORM_VARIABLE.time;\n}\n\n#endif\n'),o))}).call(this,"/lib/core/glsl/time")},{glslify:290}],47:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/position",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_EMIT_POSITION\n#define GLSL_VARYING_EMIT_POSITION\n#ifdef GLSL_VARYING_POSITION\n\n#include "../variables"\n\nvoid EmitVaryingLocalPosition(vec3 position) {\n  GLSL_VARYING_LOCAL_POSITION_VARIABLE = position;\n}\n\nvoid EmitVaryingPosition(mat4 model, vec3 position) {\n  vec4 worldPosition = model * vec4(position, 1.0);\n  GLSL_VARYING_POSITION_VARIABLE = worldPosition.xyz;\n}\n\nvoid EmitVaryingPositions(mat4 model, vec3 position) {\n  EmitVaryingPosition(model, position);\n  EmitVaryingLocalPosition(position);\n}\n\n#endif\n#endif\n'),r(o,t+"/normal",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_EMIT_NORMAL\n#define GLSL_VARYING_EMIT_NORMAL\n#ifdef GLSL_VARYING_NORMAL\n\n#include "../variables"\n\nvoid EmitVaryingLocalNormal(vec3 normal) {\n  GLSL_VARYING_LOCAL_NORMAL_VARIABLE = normalize(normal);\n}\n\nvoid EmitVaryingNormal(mat3 modelNormal, vec3 normal) {\n  GLSL_VARYING_NORMAL_VARIABLE = normalize(modelNormal * normal);\n}\n\nvoid EmitVaryingNormals(mat3 modelNormal, vec3 normal) {\n  EmitVaryingNormal(modelNormal, normal);\n  EmitVaryingLocalNormal(normal);\n}\n\n#endif\n#endif\n'),r(o,t+"/color",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_EMIT_COLOR\n#define GLSL_VARYING_EMIT_COLOR\n#ifdef GLSL_VARYING_COLOR\n\n#include "../variables"\n\nvoid EmitVaryingColor(vec4 color) {\n  GLSL_VARYING_COLOR_VARIABLE = color;\n}\n\nvoid EmitVaryingColor(vec3 color) {\n  EmitVaryingColor(vec4(color, 1.0));\n}\n\nvoid EmitVaryingColors(vec4 color) {\n  EmitVaryingColor(color);\n}\n\nvoid EmitVaryingColors(vec3 color) {\n  EmitVaryingColors(vec4(color, 1.0));\n}\n\n#endif\n#endif\n'),r(o,t+"/uv",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_EMIT_UV\n#define GLSL_VARYING_EMIT_UV\n#ifdef GLSL_VARYING_UV\n\n#include "../variables"\n\nvoid EmitVaryingUv(vec2 uv) {\n  GLSL_VARYING_UV_VARIABLE = uv;\n}\n\nvoid EmitVaryingUvs(vec2 uv) {\n  EmitVaryingUv(uv);\n}\n\n#endif\n#endif\n'),o))}).call(this,"/lib/core/glsl/varying/emit")},{glslify:290}],48:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,i({},e("./emit"),e("./read"),(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_VARYING_VARIABLES\n#define GLSL_VARYING_VARIABLES\n\n#ifndef GLSL_VARYING_COLOR_VARIABLE\n#define GLSL_VARYING_COLOR_VARIABLE vColor\n#endif\n\n#ifndef GLSL_VARYING_POSITION_VARIABLE\n#define GLSL_VARYING_POSITION_VARIABLE vPosition\n#endif\n\n#ifndef GLSL_VARYING_LOCAL_POSITION_VARIABLE\n#define GLSL_VARYING_LOCAL_POSITION_VARIABLE vLocalPosition\n#endif\n\n#ifndef GLSL_VARYING_NORMAL_VARIABLE\n#define GLSL_VARYING_NORMAL_VARIABLE vNormal\n#endif\n\n#ifndef GLSL_VARYING_LOCAL_NORMAL_VARIABLE\n#define GLSL_VARYING_LOCAL_NORMAL_VARIABLE vLocalNormal\n#endif\n\n#ifndef GLSL_VARYING_UV_VARIABLE\n#define GLSL_VARYING_UV_VARIABLE vUv\n#endif\n\n#endif\n"),r(o,t+"/position",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_POSITION\n#define GLSL_VARYING_POSITION\n\n#include "./variables"\n\nvarying vec3 GLSL_VARYING_LOCAL_POSITION_VARIABLE;\nvarying vec3 GLSL_VARYING_POSITION_VARIABLE;\n\n#endif\n'),r(o,t+"/normal",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_NORMAL\n#define GLSL_VARYING_NORMAL\n\n#include "./variables"\n\nvarying vec3 GLSL_VARYING_LOCAL_NORMAL_VARIABLE;\nvarying vec3 GLSL_VARYING_NORMAL_VARIABLE;\n\n#endif\n'),r(o,t+"/color",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_COLOR\n#define GLSL_VARYING_COLOR\n\n#include "./variables"\n\nvarying vec4 GLSL_VARYING_COLOR_VARIABLE;\n\n#endif\n'),r(o,t+"/data","#define GLSLIFY 1\n#ifndef GLSL_VARYING_DATA\n#define GLSL_VARYING_DATA\n\nstruct VaryingData {\n  // exported\n  vec3 localPosition;\n  vec3 localNormal;\n  vec3 position;\n  vec3 normal;\n  vec4 color;\n  vec2 uv;\n\n  // private\n  mat3 modelNormal;\n  mat4 model;\n};\n\nVaryingData CreateVaryingData() {\n  VaryingData data;\n  data.localPosition = vec3(0.0);\n  data.localNormal = vec3(0.0);\n  data.position = vec3(0.0);\n  data.normal = vec3(0.0);\n  data.color = vec4(0.0);\n  data.uv = vec2(0.0);\n\n  data.modelNormal = mat3(1.0);\n  data.model = mat4(1.0);\n  return data;\n}\n\n#endif\n"),r(o,t+"/emit",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_EMIT\n#define GLSL_VARYING_EMIT\n\n#include "./emit/position"\n#include "./emit/normal"\n#include "./emit/color"\n#include "./emit/uv"\n#include "./data"\n\nvoid EmitVaryingData(const in VaryingData data) {\n#if defined(GLSL_VARYING_POSITION) && defined(GLSL_VARYING_EMIT_POSITION)\n  EmitVaryingPositions(data.model, data.position);\n#endif\n\n#if defined(GLSL_VARYING_NORMAL) && defined(GLSL_VARYING_EMIT_NORMAL)\n  EmitVaryingNormals(data.modelNormal, data.normal);\n#endif\n\n#if defined(GLSL_VARYING_COLOR) && defined(GLSL_VARYING_EMIT_COLOR)\n  EmitVaryingColors(data.color);\n#endif\n\n#if defined(GLSL_VARYING_UV) && defined(GLSL_VARYING_EMIT_UV)\n  EmitVaryingUvs(data.uv);\n#endif\n}\n\n#endif\n'),r(o,t+"/read",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_READ\n#define GLSL_VARYING_READ\n\n#include "./read/position"\n#include "./read/normal"\n#include "./read/color"\n#include "./read/uv"\n#include "./data"\n\nVaryingData ReadVaryingData() {\n  VaryingData data = CreateVaryingData();\n#if defined(GLSL_VARYING_POSITION) && defined(GLSL_VARYING_READ_POSITION)\n  data.localPosition = ReadVaryingLocalPosition();\n  data.position = ReadVaryingPosition();\n#endif\n\n#if defined(GLSL_VARYING_NORMAL) && defined(GLSL_VARYING_READ_NORMAL)\n  data.localNormal = ReadVaryingLocalNormal();\n  data.normal = ReadVaryingNormal();\n#endif\n\n#if defined(GLSL_VARYING_COLOR) && defined(GLSL_VARYING_READ_COLOR)\n  data.color = ReadVaryingColor();\n#endif\n\n#if defined(GLSL_VARYING_UV) && defined(GLSL_VARYING_READ_UV)\n  data.uv = ReadVaryingUv();\n#endif\n  return data;\n}\n\n#endif\n'),r(o,t+"/uv",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_UV\n#define GLSL_VARYING_UV\n\n#include "./variables"\n\nvarying vec2 GLSL_VARYING_UV_VARIABLE;\n\n#endif\n'),o)))}).call(this,"/lib/core/glsl/varying")},{"./emit":47,"./read":49,glslify:290}],49:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/position",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_READ_POSITION\n#define GLSL_VARYING_READ_POSITION\n#ifdef GLSL_VARYING_POSITION\n\n#include "../variables"\n\nvec3 ReadVaryingLocalPosition() {\n  return vec3(GLSL_VARYING_LOCAL_POSITION_VARIABLE);\n}\n\nvec3 ReadVaryingPosition() {\n  return vec3(GLSL_VARYING_POSITION_VARIABLE);\n}\n\n#endif\n#endif\n'),r(o,t+"/normal",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_READ_NORMAL\n#define GLSL_VARYING_READ_NORMAL\n#ifdef GLSL_VARYING_NORMAL\n\n#include "../variables"\n\nvec3 ReadVaryingLocalNormal() {\n  return vec3(GLSL_VARYING_LOCAL_NORMAL_VARIABLE);\n}\n\nvec3 ReadVaryingNormal() {\n  return vec3(GLSL_VARYING_NORMAL_VARIABLE);\n}\n\n#endif\n#endif\n'),r(o,t+"/color",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_READ_COLOR\n#define GLSL_VARYING_READ_COLOR\n#ifdef GLSL_VARYING_COLOR\n\n#include "../variables"\n\nvec4 ReadVaryingColor() {\n  return vec4(GLSL_VARYING_COLOR_VARIABLE);\n}\n\n#endif\n#endif\n'),r(o,t+"/uv",'#define GLSLIFY 1\n#ifndef GLSL_VARYING_READ_UV\n#define GLSL_VARYING_READ_UV\n#ifdef GLSL_VARYING_UV\n\n#include "../variables"\n\nvec2 ReadVaryingUv() {\n  return vec2(GLSL_VARYING_UV_VARIABLE);\n}\n\n#endif\n#endif\n'),o))}).call(this,"/lib/core/glsl/varying/read")},{glslify:290}],50:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,(o={},r(o,t+"/variables","#define GLSLIFY 1\n#ifndef GLSL_VERTEX_ATTRIBUTES_VARIABLES\n#define GLSL_VERTEX_ATTRIBUTES_VARIABLES\n\n#ifndef GLSL_VERTEX_ATTRIBUTES_POSITION_VARIABLE\n#define GLSL_VERTEX_ATTRIBUTES_POSITION_VARIABLE position\n#endif\n\n#ifndef GLSL_VERTEX_ATTRIBUTES_NORMAL_VARIABLE\n#define GLSL_VERTEX_ATTRIBUTES_NORMAL_VARIABLE normal\n#endif\n\n#ifndef GLSL_VERTEX_ATTRIBUTES_COLOR_VARIABLE\n#define GLSL_VERTEX_ATTRIBUTES_COLOR_VARIABLE color\n#endif\n\n#ifndef GLSL_VERTEX_ATTRIBUTES_UV_VARIABLE\n#define GLSL_VERTEX_ATTRIBUTES_UV_VARIABLE uv\n#endif\n\n#endif\n"),r(o,t+"/position",'#define GLSLIFY 1\n#ifndef GLSL_VERTEX_ATTRIBUTES_POSITION\n#define GLSL_VERTEX_ATTRIBUTES_POSITION\n\n#include "./variables"\n\nattribute vec3 GLSL_VERTEX_ATTRIBUTES_POSITION_VARIABLE;\n\n#endif\n'),r(o,t+"/normal",'#define GLSLIFY 1\n#ifndef GLSL_VERTEX_ATTRIBUTES_NORMAL\n#define GLSL_VERTEX_ATTRIBUTES_NORMAL\n\n#include "./variables"\n\nattribute vec3 GLSL_VERTEX_ATTRIBUTES_NORMAL_VARIABLE;\n\n#endif\n'),r(o,t+"/color",'#define GLSLIFY 1\n#ifndef GLSL_VERTEX_ATTRIBUTES_COLOR\n#define GLSL_VERTEX_ATTRIBUTES_COLOR\n\n#include "./variables"\n\nattribute vec4 GLSL_VERTEX_ATTRIBUTES_COLOR_VARIABLE;\n\n#endif\n'),r(o,t+"/uv",'#define GLSLIFY 1\n#ifndef GLSL_VERTEX_ATTRIBUTES_UV\n#define GLSL_VERTEX_ATTRIBUTES_UV\n\n#include "./variables"\n\nattribute vec2 GLSL_VERTEX_ATTRIBUTES_UV_VARIABLE;\n\n#endif\n'),o))}).call(this,"/lib/core/glsl/vertex/attributes")},{glslify:290}],51:[function(e,t,n){(function(t){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};!function(e){e&&e.__esModule}(e("glslify"));Object.assign(n,r({},e("./attributes"),function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t+"/main",'#define GLSLIFY 1\n#ifndef GLSL_VERTEX_MAIN\n#define GLSL_VERTEX_MAIN\n\n#include "../varying/data"\n\nvoid InitVarying(inout VaryingData varyingData);\nvoid BeforeMain(inout vec4 vertexPosition, inout VaryingData varyingData);\nvoid Main(inout vec4 vertexPosition, inout VaryingData data);\nvoid TransformMain(inout vec4 vertexPosition, inout VaryingData varyingData);\nvoid AfterMain(inout vec4 vertexPosition, inout VaryingData varyingData);\n\nvoid main() {\n  VaryingData varyingData = CreateVaryingData();\n  InitVarying(varyingData);\n  gl_Position = vec4(vec3(0.0), 1.0);\n  BeforeMain(gl_Position, varyingData);\n  Main(gl_Position, varyingData);\n  TransformMain(gl_Position, varyingData);\n#ifdef GLSL_VARYING_EMIT\n  EmitVaryingData(varyingData);\n#endif\n  AfterMain(gl_Position, varyingData);\n}\n\n#ifdef GLSL_VERTEX_MAIN_BEFORE\n  void GLSL_VERTEX_MAIN_BEFORE(inout vec4 vertexPosition,\n                               inout VaryingData varyingData);\n#endif\n\n#ifdef GLSL_VERTEX_MAIN_TRANSFORM\n  void GLSL_VERTEX_MAIN_TRANSFORM(inout vec4 vertexPosition,\n                                  inout VaryingData varyingData);\n#endif\n\n#ifdef GLSL_VERTEX_MAIN_AFTER\n  void GLSL_VERTEX_MAIN_AFTER(inout vec4 vertexPosition,\n                              inout VaryingData varyingData);\n#endif\n\nvoid BeforeMain(inout vec4 vertexPosition,\n                inout VaryingData varyingData) {\n#ifdef GLSL_VERTEX_MAIN_BEFORE\n  GLSL_VERTEX_MAIN_BEFORE(vertexPosition, varyingData);\n#endif\n}\n\nvoid TransformMain(inout vec4 vertexPosition,\n                   inout VaryingData varyingData) {\n#ifdef GLSL_VERTEX_MAIN_TRANSFORM\n  GLSL_VERTEX_MAIN_TRANSFORM(vertexPosition, varyingData);\n#endif\n}\n\nvoid AfterMain(inout vec4 vertexPosition,\n               inout VaryingData varyingData) {\n#ifdef GLSL_VERTEX_MAIN_AFTER\n  GLSL_VERTEX_MAIN_AFTER(vertexPosition, varyingData);\n#endif\n}\n\nvoid InitVarying(inout VaryingData varyingData) {\n  #ifdef GLSL_VERTEX_ATTRIBUTES_POSITION\n    varyingData.position = position;\n  #endif\n\n  #ifdef GLSL_VERTEX_ATTRIBUTES_NORMAL\n    varyingData.normal = normal;\n  #endif\n\n  #ifdef GLSL_VERTEX_ATTRIBUTES_COLOR\n    varyingData.color = color;\n  #endif\n\n  #ifdef GLSL_VERTEX_ATTRIBUTES_UV\n    varyingData.uv = uv;\n  #endif\n\n  #if defined(GLSL_MESH) && defined(GLSL_MESH_UNIFORMS)\n    varyingData.modelNormal = mesh.modelNormal;\n    varyingData.model = mesh.model;\n  #endif\n}\n\n#endif\n')))}).call(this,"/lib/core/glsl/vertex")},{"./attributes":50,glslify:290}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.libglsl=void 0;var r=e("./component");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./shaderlib");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./geometry");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./command");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./dynamic");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var f=e("./context");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}})});var c=e("./entity");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})});var s=e("./gl");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./glsl"));n.libglsl=l},{"./command":29,"./component":30,"./context":31,"./dynamic":32,"./entity":33,"./geometry":34,"./gl":36,"./glsl":42,"./shaderlib":53}],53:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderLibPreprocessor=n.ShaderLibPlugin=n.ShaderLib=n.kDefaultShaderName=n.kDefaultShaderLibVersion=n.kDefaultShaderLibPrecision=void 0;var f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=e("./dynamic"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./glsl")),y=e("./command"),m=e("path"),b=(r(e("glsl-token-defines")),r(e("glsl-token-string"))),h=r(e("glsl-inject-defines")),v=r(e("glsl-tokenizer")),g=r(e("prepr")),_=r(e("defined")),O="preprocessor",w="block-comment",x="line-comment",S=n.kDefaultShaderLibPrecision="mediump float",j=n.kDefaultShaderLibVersion="100",E=n.kDefaultShaderName="<anonymous>",A=(n.ShaderLib=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.preprocessor,r=void 0===n?void 0:n,o=t.middleware,i=void 0===o?[]:o,u=t.precision,f=void 0===u?S:u,c=t.version,l=void 0===c?j:c,y=t.defines,m=void 0===y?{}:y,b=t.glsl;a(this,e),this.cache=new p.DynamicValue(this),this.store=new p.DynamicValue(this),this.version=(0,_.default)(l||j),this.precision=(0,_.default)(f,S),this.middleware=(0,_.default)(i,[]),this.preprocessor=(0,_.default)(r,new A(this)),this.preprocessor.define(m),this.add(s({},d,b))}return l(e,null,[{key:"defaults",value:function(){return{precision:S,shaderName:E,version:j,defines:{},name:E}}}]),l(e,[{key:"define",value:function(e,t){return this.preprocessor.define(e,t)}},{key:"injectShaderNameDefine",value:function(e,t){var n=/\s?#ifndef SHADER_NAME\s?\n#define SHADER_NAME\s?.*\n#endif\n?$/g;return String(t).replace(n,"")}},{key:"injectShaderPrecision",value:function(e){var t=this.precision,n="precision "+(void 0===t?S:t)+";",r=/[\s|\t]?precision\s+([a-z]+)\s+([a-z|A-Z]+)[\s+]?;[\s|\t|\r]?/g;return e=e.replace(n,"").replace(r,""),n+"\n"+e}},{key:"add",value:function(e,t){var n=this;return"string"==typeof e&&"string"==typeof t?(e=e.replace(/[\/]+/g,"/"),this.store.set(e,t)):e&&"object"==(void 0===e?"undefined":c(e))&&function e(t,r){for(var o in r)t.push(o),"object"==c(r[o])?e(t,r[o]):n.add(t.join("/"),r[o]),t.pop()}([],e),this}},{key:"get",value:function(e){return"string"==typeof e&&"string"==typeof this.store[e]?this.compile(e,this.store[e]):null}},{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./";return t=(0,m.resolve)("/",t),e=e.replace((0,m.extname)(e),""),e=(0,m.resolve)(t,e).slice(1)}},{key:"hash",value:function(e){return"string"!=typeof e?null:String(e).split("").map(function(e){return e.charCodeAt(0)}).reduce(function(e,t){return e+t},0).toString("16")}},{key:"isCached",value:function(e){return"string"==typeof this.cache[this.hash(e)||""]}},{key:"preprocess",value:function(e){var t=this.defines;return e=(0,g.default)(e,t),e=e.split("\n").filter(function(e){return 0==/^\s*$/.test(e)}).join("\n")}},{key:"compile",value:function(e,t){if(!t&&e&&(t=e,e=null),e||(e=E),!t)return null;var n=this.hash(t);return this.cache[n]?this.cache[n]:(t=this.injectShaderNameDefine(e,t),t=this.preprocessor.process(e,t),t=this.injectShaderPrecision(t),t=t.split("\n").filter(function(e){return e.length}).map(function(e){return 1==e.length?e+"\n":e}).join("\n")+"\n",this.cache.set(n,t),t)}},{key:"use",value:function(e){return"function"==typeof e&&this.middleware.push(e),this}},{key:"defines",get:function(){var e=(this.preprocessor||{}).defines;return void 0===e?null:e}}]),e}(),n.ShaderLibPlugin=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(y.Command),n.ShaderLibPreprocessor=function(){function e(t){a(this,e),this.defines=new p.DynamicValue(this),this.shaderLib=t,this.middleware=[]}return l(e,[{key:"define",value:function(e,t){var n=this;return"object"==(void 0===e?"undefined":c(e))?Object.keys(e).map(function(t){return n.define(t,e[t])}).some(function(e){return!0===e}):"string"==typeof e&&(!0===t?t=1:!1===t&&(t=0),null!=t)&&(t=String(t))!=this.defines[e]&&(this.defines.set(e,t),!0)}},{key:"undefine",value:function(e){return this.defines.unset(e),this}},{key:"process",value:function(e,t){function n(e,t,r){var o=(0,v.default)(e,{version:l}),a=!0,u=!1,c=void 0;try{for(var s,d=o[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)!function(){var e=s.value,o=function(){return t.push(e)};switch(e.type){case w:case x:break;case O:var a=RegExp(/[\s|\t]?#include[\s]+([<|"]?.*[>|"]?)$/);switch(e.data.match(/(#[a-z]+)\s?/)[0].trim()){case"#define":var u=e.data.match(/#define[\s]+(.*)/);u&&(u[1].match(/.*[\s]+(.*)/)||(e.data=e.data+" 1")),o();break;case"#include":var c=e.data.match(a)||[],l=f(c,2),d=(l[0],l[1]),y=d.replace(/^["|<](.*)["|>]/,"$1").trim(),m=d[0].trim(),b=d[d.trim().length-1].trim(),h=function(e,t){return new e((t||"")+"\n\tat (glsl) "+p.join("\n\tat (glsl) "))};if(-1==["<",'"'].indexOf(m)){var v="Unexpected token '"+m+"'. Expecting '<' or '\"'.";throw h(SyntaxError,v)}if(-1==[">",'"'].indexOf(b)){var g="Unexpected token '"+b+"'. Expecting "+("<"==m?"'>'":"'\"'")+".";throw h(SyntaxError,g)}if("<"==m&&">"!=b){var _="Unexpected token '"+b+"'. Expecting '>'.";throw h(SyntaxError,_)}if('"'==m&&'"'!=b){var S="Unexpected token '"+b+"'. Expecting '\"'.";throw h(SyntaxError,S)}var j="<"==m&&">"==b?"/":r,E="."!=y[0]?"./":"",A=i.resolve(""+E+y,j),L=i.get(A);if(!L)throw h(ReferenceError,"glsl lib "+d+" not found.");p.push(y+":"+e.line),n(L+"\n",t,j),p.pop();break;default:o()}break;default:o()}}()}catch(e){u=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}}var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.shaderLib,a=this.defines,u=i.middleware,l=i.version,p=[],d=[];return o=o&&"object"==(void 0===o?"undefined":c(o))?o:{},"string"==typeof t&&(t=(0,h.default)(t,s({},a,o.defines))),n("\n"+t+"\n",d,e!=E?(0,m.dirname)(e):"/"),t=(0,b.default)(d),u.filter(function(e){return"function"==typeof e}).reduce(function(e,t){return(0,_.default)(t(i,r,e,o),e)},t).replace("#define GLSLIFY 1\n","")}}]),e}())},{"./command":29,"./dynamic":32,"./glsl":42,defined:130,"glsl-inject-defines":279,"glsl-token-defines":280,"glsl-token-string":282,"glsl-tokenizer":289,path:295,prepr:296}],54:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FrameContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../scope"),l=e("../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.FrameContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{regl:function(){return e?e.regl:null},gl:function(){return e?e.gl:null},cancel:function(e){var t=e.frame,n=e.frames;return function(){t&&(t.cancel(),n.splice(n.indexOf(t),1))}},clear:function(e,t){return function(r){e.regl.clear(u({},r||(0,c.get)("clear",[t,n])))}},cancelAll:function(e){var t=e.frames,n=(e.frame,e.loop);return function(){if(t){var e=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)i.value.cancel()}catch(e){r=!0,o=e}finally{try{!e&&a.return&&a.return()}finally{if(r)throw o}}t.splice(0,t.length)}n&&(n.cancel(),n=null)}}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../core":52,"../scope":94,"../utils":120,"./defaults":55}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.autoClear=!0,n.uniformName="frame",n.blending={equation:"add",enable:!1,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},n.culling={enable:!0,face:"back"},n.depth={enable:!0,range:[0,1],func:"less",mask:!0},n.clear={color:[17/255,17/255,17/255,1],depth:1}},{}],56:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Frame=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../scope"),l=e("../core"),p=e("./context"),d=e("./state"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.Frame=function(e){function t(e){function n(t,n){var r=null,o=null;return o={cancel:function(){r=!0},onframe:function(){if(r)y.splice(y.indexOf(o,1));else try{n(function(){return h(t)})}catch(t){e.emit("error",t),a()}}}}function i(){var t=!0,n=!1,r=void 0;try{for(var o,i=y[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.onframe()}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}O=e.regl.frame(function(){try{!0===u.autoClear&&g();var t=!0,n=!1,r=void 0;try{for(var o,i=y[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.onframe()}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}catch(t){try{var f=!0,c=!1,s=void 0;try{for(var l,p=y[Symbol.iterator]();!(f=(l=p.next()).done);f=!0)l.value.cancel()}catch(e){c=!0,s=e}finally{try{!f&&p.return&&p.return()}finally{if(c)throw s}}}catch(t){e.emit("error",t)}a()}})}function a(){try{var t=!0,n=!1,r=void 0;try{for(var o,i=y[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.cancel()}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}catch(t){e.emit("error",t)}y.splice(0,y.length)}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(u,t.defaults());var f=u.frames,y=void 0===f?[]:f,m=new p.FrameContext(e,u),b=new d.FrameState(e,u),h=e.regl({}),v=function(){return h(function(e){return(0,e.clear)()})},g=l.Component.compose(m,v),_=l.Component.compose(b,m),O=null;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u,function(t,r){null==O&&i();var o=new s.ScopedContext(e,{frame:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a}),frames:y,loop:O}),a=n(r,l.Component.compose(o,_));y.push(a)}))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(l.Component)},{"../core":52,"../scope":94,"../utils":120,"./context":54,"./defaults":55,"./state":58}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./uniforms");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./frame");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./state");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":54,"./frame":56,"./state":58,"./uniforms":59}],58:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FrameState=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=(e("../material"),e("../core")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.FrameState=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.regl({depth:u({},n.depth),blend:u({},n.blending),cull:u({},n.culling)})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../core":52,"../material":65,"../utils":120,"./defaults":55}],59:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FrameShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../shader"),l=e("../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.FrameShaderUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderUniforms(e,{prefix:i+"."},{resolution:function(e){return[e.drawingBufferWidth,e.drawingBufferHeight]},time:function(e){return e.time},tick:function(e){return e.tick}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../core":52,"../shader":97,"../utils":120,"./defaults":55}],60:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FrameBuffer=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../scope"),l=e("../core");n.FrameBuffer=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=new s.ScopedContext(e),a=e.regl.framebuffer(u({},n)),f=e.regl({framebuffer:a});return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{framebufferPointer:function(){return f}}),function(e,t){i(function(e){var n=e.texturePointer,r=e.viewportWidth,o=e.viewportHeight;n({width:r,height:o,wrap:"clamp"}),a({color:n}),a.resize(r,o),f(t)})}))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return{depth:!0}}}]),t}(l.Component)},{"../core":52,"../scope":94,"../utils":120}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./framebuffer");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})},{"./framebuffer":60}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./camera");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./compute");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./core");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./frame");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./framebuffer");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var f=e("./material");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}})});var c=e("./mesh");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})});var s=e("./object3d");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var l=e("./scissor");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var p=e("./scope");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}})});var d=e("./shader");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}})});var y=e("./texture");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return y[e]}})});var m=e("./viewport");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}})})},{"./camera":9,"./compute":28,"./core":52,"./frame":57,"./framebuffer":61,"./material":65,"./mesh":77,"./object3d":91,"./scissor":93,"./scope":94,"./shader":97,"./texture":118,"./viewport":121}],63:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MaterialContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../scope"),l=e("../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.MaterialContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{lineWidth:function(e,t){return(0,c.get)("lineWidth",[t,e])},wireframe:function(e,t){return(0,c.get)("wireframe",[t,e])},opacity:function(e,t){return(0,c.get)("opacity",[t,e])},color:function(e,t){return(0,c.ensureRGB)((0,c.get)("color",[t,e]))}})))}return i(t,e),f(t,null,[{key:"defualts",value:function(){return u({},p)}}]),t}(l.Component)},{"../core":52,"../scope":94,"../utils":120,"./defaults":64}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.uniformName="material",n.opacity=1,n.color=[100/255,110/255,1],n.wireframePrimitive="line strip",n.primitive="triangles",n.lineWidth=1,n.blending={equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},n.culling={enable:!1,face:"back"},n.depth={enable:!0,range:[0,1],func:"less",mask:!0}},{}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./material");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./shader");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./state");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":63,"./material":66,"./shader":67,"./state":70}],66:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Material=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./shader"),s=e("../frame"),l=e("./context"),p=e("../utils"),d=e("./state"),y=e("../core"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.Material=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,p.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.MaterialState(e,n),new l.MaterialContext(e,n),new c.MaterialShaderUniforms(e,n),new s.FrameShaderUniforms(e,n),new c.MaterialShader(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},m)}}]),t}(y.Component)},{"../core":52,"../frame":57,"../utils":120,"./context":63,"./defaults":64,"./shader":67,"./state":70}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./uniforms");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./shader");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./shader":68,"./uniforms":69}],68:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MaterialShader=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../core"),l=e("../../shader"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MaterialShader=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return n.fragmentShader,o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.Shader(e,{glsl:n.glsl||{},fragmentShader:function(e){return e.fragmentShader||"\n          #define GLSL_MATERIAL_UNIFORM_VARIABLE "+i+"\n          #include <material/fragment/main>\n          "}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(s.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":64}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MaterialShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../shader"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MaterialShaderUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderUniforms(e,{prefix:i+"."},{opacity:function(e,t){return(0,c.get)("opacity",[t,e,n])},color:function(e,t){return(0,c.ensureRGB)((0,c.get)("color",[t,e,n]))}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":64}],70:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MaterialState=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.MaterialState=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,e.regl({blend:{equation:function(e,t){return(0,c.get)("equation",[t.blending,e.blending,n.blending])},color:function(e,t){return(0,c.ensureRGBA)((0,c.get)("color",[t.blending,e.blending,n.blending]))},enable:function(e,t){return(0,c.get)("enable",[t.blending,e.blending,n.blending])},func:function(e,t){return(0,c.get)("func",[t.blending,e.blending,n.blending])}},cull:{enable:function(e,t){return Boolean((0,c.get)("enable",[t.culling,e.culling,n.culling]))},face:function(e,t){return String((0,c.get)("face",[t.culling,e.culling,n.culling]))}},depth:{enable:function(e,t){return Boolean((0,c.get)("enable",[t.depth,e.depth,n.depth]))},range:function(e,t){return(0,c.get)("range",[t.depth,e.depth,n.depth])},func:function(e,t){return(0,c.get)("func",[t.depth,e.depth,n.depth])},mask:function(e,t){return(0,c.get)("mask",[t.depth,e.depth,n.depth])}}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../core":52,"../utils":120,"./defaults":64}],71:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshBoundingBoxContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MeshBoundingBoxContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=new WeakMap;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{boundingBox:function(e){var t=e.geometry;if(t){if(i.has(t))return i.get(t);if("function"==typeof t.computeBoundingBox){var n=t.computeBoundingBox();return i.set(t,n),n}return null}return null}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":76}],72:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./bounding-box"),s=e("./geometry"),l=e("./size"),p=e("../../utils"),d=e("../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MeshContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,p.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.MeshGeometryContext(e,n),new c.MeshBoundingBoxContext(e,n),new l.MeshSizeContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(d.Component)},{"../../core":52,"../../utils":120,"../defaults":76,"./bounding-box":71,"./geometry":73,"./size":75}],73:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshGeometryContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MeshGeometryContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.geometry;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{geometry:function(){return i}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":76}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./bounding-box");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./geometry");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./context");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./size");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./bounding-box":71,"./context":72,"./geometry":73,"./size":75}],75:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshSizeContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../utils"),l=e("../../scope"),p=e("../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=r(e("gl-vec2")),m=r(e("gl-vec3"));n.MeshSizeContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,s.assignDefaults)(n,t.defaults());var r=new WeakMap;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{size:function(e){var t=e.boundingBox,n=e.scale;if(!t)return[0,0];if(r.has(t))return r.get(t);n||(n=[1,1,1]);var o=t&&t[0].length,i=t[0],a=t[1],u=[];switch(o){case 3:m.default.subtract(u,a,i),m.default.multiply(u,u,n);break;case 2:y.default.subtract(u,a,i),y.default.multiply(u,u,n)}return r.set(t,u),u}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":76,"gl-vec2":214,"gl-vec3":244}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.uniformName="mesh",n.wireframePrimitive="line strip",n.primitive="triangles",n.lineWidth=1},{}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./context");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./shader");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./state");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./mesh");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":74,"./mesh":78,"./shader":81,"./state":84}],78:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Mesh=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../camera"),s=e("../frame"),l=e("../utils"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),d=e("../core"),y=e("../object3d"),m=e("./context"),b=e("./state"),h=e("./shader");n.Mesh=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,l.assignDefaults)(n,t.defaults()),null==n.geometry.complex&&(n.geometry=new d.Geometry({complex:n.geometry}));var i=e.regl({}),a=e.regl(u({},n.regl));return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new y.Object3D(e,n),new m.MeshContext(e,n),new b.MeshState(e,n),new h.MeshShaderDefines(e,n),new h.MeshShaderAttributes(e,n),new h.MeshShaderUniforms(e,n),new h.MeshShader(e,n),new c.CameraShaderUniforms(e,u({},n.camera)),new s.FrameShaderUniforms(e,u({},n.frame)),function(e,t){a(e),i(t)}))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(d.Component)},{"../camera":9,"../core":52,"../frame":57,"../object3d":91,"../utils":120,"./context":74,"./defaults":76,"./shader":81,"./state":84}],79:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshShaderAttributes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../shader"),s=e("../../utils"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MeshShaderAttributes=function(e){function t(e,n){r(this,t),(0,s.assignDefaults)(n,t.defaults());var i=n.geometry,a={};return i&&(a.position=i.positions||null,a.normal=i.normals||null,a.uv=i.uvs||null),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.ShaderAttributes(e,a)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":76}],80:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshShaderDefines=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../shader"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.MeshShaderDefines=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderDefines(e,{GLSL_MESH_HAS_POSITION:function(e){return!!e.geometry.positions||null},GLSL_MESH_HAS_NORMAL:function(e){return!!e.geometry.normals||null},GLSL_MESH_HAS_UV:function(e){return!!e.geometry.uvs||null}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":76}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./attributes");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./uniforms");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./defines");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./shader");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./attributes":79,"./defines":80,"./shader":82,"./uniforms":83}],82:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshShader=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),p=e("../../shader");n.MeshShader=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new p.Shader(e,u({glsl:n.glsl||{},vertexShader:function(e){var r=e.vertexShader,o=n.uniformName;return"string"==typeof r?r:"string"==typeof n.vertexShader?n.vertexShader:t.createVertexShader({uniformName:o})}},n))))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}},{key:"createVertexShader",value:function(){return"\n    #define GLSL_MESH_UNIFORM_VARIABLE "+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).uniformName+"\n    #include <mesh/vertex/main>\n    "}}]),t}(s.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":76}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshShaderUniforms=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../utils"),l=e("../../shader"),p=e("../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=r(e("gl-mat4")),m=r(e("gl-mat3")),b=y.default.identity([]),h=m.default.identity([]);n.MeshShaderUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,s.assignDefaults)(n,t.defaults());var r=n.uniformName;return n.prefix=r+".",i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ShaderUniforms(e,n,{position:function(e,t){return(0,s.get)("position",[e,t,n])},rotation:function(e,t){return(0,s.get)("rotation",[e,t,n])},scale:function(e,t){return(0,s.get)("scale",[e,t,n])},modelNormal:function(e){var t=e.transform;return(0,s.isArrayLike)(t)?m.default.normalFromMat4([],t)||h:h},model:function(e){var t=e.transform;return(0,s.isArrayLike)(t)?t:b}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"../defaults":76,"gl-mat3":144,"gl-mat4":162}],84:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshState=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils"),s=e("../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),p=function(e){return e&&e.__esModule?e:{default:e}}(e("defined"));n.MeshState=function(e){function t(e,n){r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.geometry,a={primitive:function(e,t){return(0,c.get)("wireframe",[t,e])?(0,c.get)("wireframePrimitive",[t,e]):(0,c.get)("primitive",[t,e])},lineWidth:function(e,t){return Math.max(1,(0,c.get)("lineWidth",[t,e]))}};return i&&i.cells?a.elements=function(e,t){var n=i.cells,r=(0,c.get)("count",[t,e]);return n&&"number"==typeof r?n.slice(0,(0,p.default)(Math.floor(r),0,n.length)):n}:i&&(a.count=function(e,t){return(0,c.get)("count",[t,e])||i.positions.length}),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,e.regl(a)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../core":52,"../utils":120,"./defaults":76,defined:130}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3DContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./transform"),s=e("./matrix"),l=e("./trs"),p=e("../../utils"),d=e("../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.Object3DContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,p.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.Object3DTRSContext(e,n),new s.Object3DMatrixContext(e,n),new c.Object3DTransformContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(d.Component)},{"../../core":52,"../../utils":120,"../defaults":90,"./matrix":87,"./transform":88,"./trs":89}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./transform");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./matrix");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./trs");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":85,"./matrix":87,"./transform":88,"./trs":89}],87:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3DMatrixContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4"));n.Object3DMatrixContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{matrix:function(e,t){var r=d.default.identity([]),o=(0,c.get)("position",[e,t]),i=(0,c.get)("rotation",[e,t]),a=(0,c.get)("scale",[e,t,n]);return d.default.fromRotationTranslation(r,i,o),d.default.scale(r,r,a),r}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":90,"gl-mat4":162}],88:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3DTransformContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4"));n.Object3DTransformContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{transform:function(e,t){var n=e.matrix,r=e.transform,o=d.default.identity([]),i=(t||{}).transform;return r&&d.default.multiply(o,r,n),i&&d.default.multiply(o,i,o),o}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":90,"gl-mat4":162}],89:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3DTRSContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../scope"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.Object3DTRSContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{scale:function(e,t){var r=(0,c.get)("scale",[t,n,e]);return"number"==typeof r?[r,r,r]:r},position:function(e,t){return(0,c.get)("position",[t,n,e])},rotation:function(e,t){return(0,c.get)("rotation",[t,n,e])}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../scope":94,"../../utils":120,"../defaults":90}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.rotation=[0,0,0,1],n.position=[0,0,0],n.scale=[1,1,1]},{}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./object3d");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./context":86,"./object3d":92}],92:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3D=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./context"),s=e("../utils"),l=e("../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.Object3D=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.Object3DContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../core":52,"../utils":120,"./context":86,"./defaults":90}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Scissor=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("./core");n.Scissor=function(e){function t(e,n,i){var a;r(this,t);for(var f=arguments.length,c=Array(f>3?f-3:0),s=3;s<f;s++)c[s-3]=arguments[s];"function"==typeof i&&c.unshift(i),"function"==typeof n&&c.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var l=e.regl({scissor:{enable:!0,box:n.scissor}});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,l].concat(c)))}return i(t,e),t}(f.Component)},{"./core":52}],94:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ScopedContext=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("./core");n.ScopedContext=function(e){function t(e,n,i){var a;r(this,t);for(var c=arguments.length,s=Array(c>3?c-3:0),l=3;l<c;l++)s[l-3]=arguments[l];"function"==typeof i&&s.unshift(i),"function"==typeof n&&s.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var p=e.regl({context:new f.DynamicValue(e,{},i)});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,p].concat(s)))}return i(t,e),t}(f.Component)},{"./core":52}],95:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderInstancedAttributes=n.ShaderAttributes=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("../core");n.ShaderAttributes=function(e){function t(e,n,i){var a;r(this,t);for(var c=arguments.length,s=Array(c>3?c-3:0),l=3;l<c;l++)s[l-3]=arguments[l];"function"==typeof i&&s.unshift(i),"function"==typeof n&&s.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var p=e.regl({attributes:new f.WebGLShaderAttributes(e,n,i)});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,{},p].concat(s)))}return i(t,e),t}(f.Component),n.ShaderInstancedAttributes=function(e){function t(e,n,i){var a;r(this,t);for(var c=arguments.length,s=Array(c>3?c-3:0),l=3;l<c;l++)s[l-3]=arguments[l];"function"==typeof i&&s.unshift(i),"function"==typeof n&&s.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var p=e.regl({attributes:new f.WebGLShaderInstancedAttributes(e,n,i)});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,{},p].concat(s)))}return i(t,e),t}(f.Component)},{"../core":52}],96:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderDefines=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("../scope"),c=e("../core");n.ShaderDefines=function(e){function t(e,n,i){r(this,t);for(var a=arguments.length,c=Array(a>3?a-3:0),s=3;s<a;s++)c[s-3]=arguments[s];return"function"==typeof i&&c.unshift(i),"function"==typeof n&&c.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new f.ScopedContext(e,n,{defines:function(){var e={};for(var t in i){var n=i[t];e[t]="function"==typeof n?n.apply(void 0,arguments):n,null==e[t]&&delete e[t]}return e}})))}return i(t,e),t}(c.Component)},{"../core":52,"../scope":94}],97:[function(e,t,n){arguments[4][81][0].apply(n,arguments)},{"./attributes":95,"./defines":96,"./shader":98,"./uniforms":99,dup:81}],98:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.Shader=void 0;"function"==typeof Symbol&&u(Symbol.iterator);var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../core"),l=e("../utils"),p=e("../scope");r.Shader=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,l.assignDefaults)(r,t.defaults());var a=r.defines;r.shaderName,new s.ShaderLib(f({},r,{defines:a})),new p.ScopedContext(e,{defines:function(e){return t.toString=function(){return e.toString()},t}(function(e){var t=e.defines;return f({},t,a)})});return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},s.ShaderLib.defaults(),{defines:{}})}}]),t}(s.Component)},{"../core":52,"../scope":94,"../utils":120}],99:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderUniforms=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("../core");n.ShaderUniforms=function(e){function t(e,n,i){var a;r(this,t);for(var c=arguments.length,s=Array(c>3?c-3:0),l=3;l<c;l++)s[l-3]=arguments[l];"function"==typeof i&&s.unshift(i),"function"==typeof n&&s.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var p=e.regl({uniforms:new f.WebGLShaderUniforms(e,n,i)});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,p].concat(s)))}return i(t,e),t}(f.Component)},{"../core":52}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),p=e("./pointer"),d=e("./data"),y=e("./info");n.TextureContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.TextureDataContext(e,n),new p.TexturePointerContext(e,n),new y.TextureInfoContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../../../core":52,"../../../utils":120,"../defaults":105,"./data":101,"./info":103,"./pointer":104}],101:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureDataContext=void 0;var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../../utils"),l=e("../../../scope"),p=e("../../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=e("../../utils");n.TextureDataContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{textureData:function(e,t){var n=(0,s.get)("data",[t,e]);if(n&&(0,y.isTextureDataReady)(n)){var r=(0,y.getTextureDataResolution)(n),o=u(r,2),i=o[0],a=o[1];if(i&&a)return n}return null}})))}return i(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":105}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./context");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./pointer");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./data");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=e("./info");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./context":100,"./data":101,"./info":103,"./pointer":104}],103:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureInfoContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../"),l=e("../../../utils"),p=e("../../../scope"),d=e("../../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.TextureInfoContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,l.assignDefaults)(n,t.defaults());var i=n.uniformName,a=void 0===i?s.TextureShaderUniforms.defaults().uniformName:i;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new p.ScopedContext(e,{textureUniformName:function(){return a},textureResolution:function(e){var t=e.textureData;return(0,c.getTextureDataResolution)(t)}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},y)}}]),t}(d.Component)},{"../":106,"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":105}],104:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TexturePointerContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../scope"),l=e("../../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),d=(function(e){e&&e.__esModule}(e("raf")),e("../../utils"));n.TexturePointerContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=e.regl.texture(u({},n)),a=new WeakMap;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ScopedContext(e,{texturePointer:function(t,r){var o=t.textureData,f=r.copy,c=i;return o&&(c=a.get(o)||i,(0,d.isImage)(o)?a.has(o)||(0,d.isTextureDataReady)(o)&&(c=e.regl.texture(u({},n,{data:o})),a.set(o,c)):(0,d.isVideo)(o)&&(a.has(o)||(c=e.regl.texture(u({},n)),a.set(o,c)),(0,d.isTextureDataReady)(o)&&c(u({},n,{data:o})))),null==o&&f&&c(u({},n,{copy:f})),c}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":105,raf:299}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.min="linear",n.mag="linear"},{}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./uniforms");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./context");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=e("./texture");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})},{"./context":102,"./texture":107,"./uniforms":108}],107:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Texture=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./context"),s=e("../../utils"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),p=e("../../core");n.Texture=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.TextureContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(p.Component)},{"../../core":52,"../../utils":120,"./context":102,"./defaults":105}],108:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../shader"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.TextureShaderUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderUniforms(e,{prefix:i+"."},{resolution:function(e){return e.textureResolution},data:function(e){return e.texturePointer}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p,{uniformName:"tex2d"})}}]),t}(l.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"./defaults":105}],109:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTextureContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../../utils"),s=e("../../../core"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),p=e("./pointer"),d=e("./data"),y=e("./info");n.CubeTextureContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,c.assignDefaults)(n,t.defaults()),n.uniformName,o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new d.CubeTextureDataContext(e,n),new p.CubeTexturePointerContext(e,n),new y.CubeTextureInfoContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(s.Component)},{"../../../core":52,"../../../utils":120,"../defaults":114,"./data":110,"./info":112,"./pointer":113}],110:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTextureDataContext=void 0;var f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../../../utils"),p=e("../../../scope"),d=e("../../../core"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),m=e("../../utils");n.CubeTextureDataContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,t),(0,l.assignDefaults)(n,t.defaults()),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new p.ScopedContext(e,{cubeTextureData:function(e,t){var o=(0,l.get)("data",[t,e,n]);if(o&&Array.isArray(o)&&o.some(m.isCubeTextureDataReady)){var i=(0,m.getCubeTextureDataResolution)(o),a=f(i,2),u=a[0],c=a[1];if(u&&c)return[].concat(r(o))}return null}})))}return a(t,e),s(t,null,[{key:"defaults",value:function(){return c({},y)}}]),t}(d.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":114}],111:[function(e,t,n){arguments[4][102][0].apply(n,arguments)},{"./context":109,"./data":110,"./info":112,"./pointer":113,dup:102}],112:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTextureInfoContext=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../../utils"),l=e("../../../scope"),p=e("../../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults"));n.CubeTextureInfoContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,s.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{cubeTextureUniformName:function(){return i},cubeTextureResolution:function(e){var t=e.cubeTextureData;return(0,c.getCubeTextureDataResolution)(t)}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},d)}}]),t}(p.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":114}],113:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTexturePointerContext=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../../utils"),l=e("../../../scope"),p=e("../../../core"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../defaults")),y=e("../../utils");n.CubeTexturePointerContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,s.assignDefaults)(n,t.defaults());var a=e.regl.cube(f({},n.texture)),u=Array(6).fill(null);return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new l.ScopedContext(e,{cubeTexturePointer:function(e){var t=e.cubeTextureData,n=!1;if(Array.isArray(t))for(var o=0;o<u.length;++o)u[o]!=t[o]&&(0,y.isCubeTextureDataReady)(t[[o]])&&(u[o]=t[o],n=!0);for(var i=(0,y.getCubeTextureDataResolution)(u),f=0;f<u.length;++f)null!=u[f]&&(0,y.isCubeTextureDataReady)(u[f])||(u[f]={shape:i});return n&&a.apply(void 0,r(u)),a}})))}return a(t,e),c(t,null,[{key:"defaults",value:function(){return f({},d)}}]),t}(p.Component)},{"../../../core":52,"../../../scope":94,"../../../utils":120,"../../utils":119,"../defaults":114}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.uniformName="texCube",n.texture={min:"linear",mag:"linear"}},{}],115:[function(e,t,n){arguments[4][106][0].apply(n,arguments)},{"./context":111,"./texture":116,"./uniforms":117,dup:106}],116:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTexture=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./context"),s=e("../../utils"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults")),p=e("../../core");n.CubeTexture=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,s.assignDefaults)(n,t.defaults()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new c.CubeTextureContext(e,n)))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},l)}}]),t}(p.Component)},{"../../core":52,"../../utils":120,"./context":111,"./defaults":114}],117:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTextureShaderUniforms=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils"),s=e("../../shader"),l=e("../../core"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./defaults"));n.CubeTextureShaderUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,c.assignDefaults)(n,t.defaults());var i=n.uniformName;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,new s.ShaderUniforms(e,{prefix:i+"."},{resolution:function(e){return e.cubeTextureResolution},data:function(e){return e.cubeTexturePointer}})))}return i(t,e),f(t,null,[{key:"defaults",value:function(){return u({},p)}}]),t}(l.Component)},{"../../core":52,"../../shader":97,"../../utils":120,"./defaults":114}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./cube");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=e("./2d");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{"./2d":106,"./cube":115}],119:[function(e,t,n){"use strict";function r(e){var t=o(e);return!!(t[0]&&t[1]&&(m(e)&&e.readyState>d||(b(e)||y(e))&&e.width&&e.height))}function o(e){return b(e)||y(e)?[e.width,e.height]:m(e)?[e.videoWidth||0,e.videoHeight||0]:e&&e.shape?e.shape:[0,0]}function i(e){return!!(m(e)&&e.readyState>d)||!(!b(e)&&!y(e)||!e.width||!e.height)}function a(e){return Array.isArray(e)?(e=e.filter(function(e){return e}).filter(function(e){return b(e)||m(e)||e.shape.every(Boolean)})[0],a(e)):b(e)||y(e)?[e.width,e.height]:m(e)?[e.videoWidth||0,e.videoHeight||0]:e&&e.shape?e.shape:[0,0]}Object.defineProperty(n,"__esModule",{value:!0}),n.isImage=n.isVideo=n.isCanvas=void 0,n.isTextureDataReady=r,n.getTextureDataResolution=o,n.isCubeTextureDataReady=i,n.getCubeTextureDataResolution=a;var u=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window")),f=u.default.HTMLVideoElement,c=u.default.HTMLCanvasElement,s=u.default.HTMLImageElement,l=f||{},p=l.HAVE_CURRENT_DATA,d=void 0===p?2:p,y=n.isCanvas=function(e){return e instanceof c},m=n.isVideo=function(e){return e instanceof f},b=n.isImage=function(e){return e instanceof s}},{"global/window":278}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.isArrayLike=n.ensureRGB=n.ensureRGBA=n.clampToMaxSize=n.scaleWithCanvas=n.makePowerOfTwo=n.getScreenOrientation=n.createCanvas=n.nearestPowerOfTwo=n.get=n.assignDefaults=n.lerp=n.radians=n.debug=void 0;var a="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=r(e("debug")),c=r(e("is-typedarray")),s=r(e("global/document")),l=r(e("global/window")),p=r(e("clamp")),d=Object.getPrototypeOf(Float32Array.prototype).constructor,y=l.default.HTMLImageElement,m=l.default.HTMLCanvasElement,b=(n.debug=(0,f.default)("[axis@0.4.0]"),n.radians=function(e){return e==e?e*Math.PI/180:0},n.lerp=function(e,t,n){return e*(1-n)+t*n},n.assignDefaults=function(e,t){return Object.assign(e,u({},t,e))},n.get=function(e,t){return(t.filter(function(e){return e}).find(function(t){return null!=t[e]})||{})[e]},n.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}),h=n.createCanvas=function(){return s.default.createElementNS("http://www.w3.org/1999/xhtml","canvas")},v=(n.getScreenOrientation=function(){var e=null;switch("object"==a(l.default.screen)&&("object"==a(l.default.screen.orientation)?e=l.default.screen.orientation.type:"string"==typeof l.default.screen.orientation?e=l.default.screen.orientation:"object"==a(l.default.screen.mozOrientation)?e=l.default.screen.mozOrientation.type:"string"==typeof l.default.screen.mozOrientation&&(e=l.default.screen.mozOrientation)),e){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0;default:return l.default.orientation||l.default.mozOrientation||0}},n.makePowerOfTwo=function(e){if(e instanceof y||e instanceof m){var t=h(),n=t.getContext("2d");return t.width=b(e.width),t.height=b(e.height),n.drawImage(e,0,0,t.width,t.height),t}return e}),g=n.scaleWithCanvas=function(e,t,n){var r=h(),o=r.getContext("2d"),i=e.width,a=e.height;return n&&(i=b(i),a=b(a)),r.width=Math.floor(e.width*t),r.height=Math.floor(e.height*t),o.drawImage(e,0,0,i,a,0,0,r.width,r.height),r},_=(n.clampToMaxSize=function(e,t,n){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height);return g(e,r,n)}return n?v(e):e},n.ensureRGBA=function(e){e=[].concat(o(e||[]));for(var t=0;t<3;++t)"number"!=typeof e[t]?e[t]=0:e[t]=(0,p.default)(e[t],0,1);return"number"!=typeof e[3]?e[3]=1:e[3]=(0,p.default)(e[3],0,1),[].concat(o(e)).slice(0,4)});n.ensureRGB=function(e){return _(e).slice(0,3)},n.isArrayLike=function(e){return Boolean(e&&(Array.isArray(e)||e instanceof d||(0,c.default)(e)||"number"==e.length||"function"==typeof e[Symbol.iterator]))}},{clamp:126,debug:128,"global/document":277,"global/window":278,"is-typedarray":291}],121:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;var u="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=e("./core");n.Viewport=function(e){function t(e,n,i){var a;r(this,t);for(var f=arguments.length,c=Array(f>3?f-3:0),s=3;s<f;s++)c[s-3]=arguments[s];"function"==typeof i&&c.unshift(i),"function"==typeof n&&c.unshift(n),"object"!=(void 0===n?"undefined":u(n))&&(n={}),"object"!=(void 0===i?"undefined":u(i))&&(i=n);var l=e.regl({viewport:n.viewport});return o(this,(a=t.__proto__||Object.getPrototypeOf(t)).call.apply(a,[this,e,l].concat(c)))}return i(t,e),t}(f.Component)},{"./core":52}],122:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o){"object"===(void 0===n?"undefined":r(n))&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):e.createREGL=o()}(void 0,function(){function e(e){return"undefined"!=typeof btoa?btoa(e):"base64:"+e}function t(e){var t=new Error("(regl) "+e);throw console.error(t),t}function n(e,n){e||t(n)}function o(e){return e?": "+e:""}function i(e,n,r){e in n||t("unknown parameter ("+e+")"+o(r)+". possible values: "+Object.keys(n).join())}function a(e,n){et(e)||t("invalid parameter type"+o(n)+". must be a typed array")}function u(e,n,i){(void 0===e?"undefined":r(e))!==n&&t("invalid parameter type"+o(i)+". expected "+n+", got "+(void 0===e?"undefined":r(e)))}function f(e,n){e>=0&&(0|e)===e||t("invalid parameter type, ("+e+")"+o(n)+". must be a nonnegative integer")}function c(e,n,r){n.indexOf(e)<0&&t("invalid value"+o(r)+". must be one of: "+n)}function s(e){Object.keys(e).forEach(function(e){nt.indexOf(e)<0&&t('invalid regl constructor argument "'+e+'". must be one of '+nt)})}function l(e,t){for(e+="";e.length<t;)e=" "+e;return e}function p(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function d(e,t){this.number=e,this.line=t,this.errors=[]}function y(e,t,n){this.file=e,this.line=t,this.message=n}function m(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function b(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function h(t,n){var r=t.split("\n"),o=1,i=0,a={unknown:new p,0:new p};a.unknown.name=a[0].name=n||m(),a.unknown.lines.push(new d(0,""));for(var u=0;u<r.length;++u){var f=r[u],c=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(f);if(c)switch(c[1]){case"line":var s=/(\d+)(\s+\d+)?/.exec(c[2]);s&&(o=0|s[1],s[2]&&((i=0|s[2])in a||(a[i]=new p)));break;case"define":var l=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);l&&(a[i].name=l[1]?e(l[2]):l[2])}a[i].lines.push(new d(o++,f))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function v(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);n?t.push(new y(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new y("unknown",0,e))}}),t}function g(e,t){t.forEach(function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}function _(e,t,r,o,i){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(t),u=o===e.FRAGMENT_SHADER?"fragment":"vertex";A(r,"string",u+" shader source must be a string",i);var f=h(r,i),c=v(a);g(f,c),Object.keys(f).forEach(function(e){function t(e,t){r.push(e),o.push(t||"")}var n=f[e];if(n.hasErrors){var r=[""],o=[""];t("file number "+e+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(e){if(e.errors.length>0){t(l(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),t(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var n=0;e.errors.forEach(function(r){var o=r.message,i=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(o);if(i){var a=i[1];switch(o=i[2],a){case"assign":a="="}n=Math.max(e.line.indexOf(a,n),0)}else n=0;t(l("| ",6)),t(l("^^^",n+3)+"\n","font-weight:bold"),t(l("| ",6)),t(o+"\n","font-weight:bold")}),t(l("| ",6)+"\n")}else t(l(e.number,4)+"|  "),t(e.line+"\n","color:red")}),"undefined"!=typeof document?(o[0]=r.join("%c"),console.log.apply(console,o)):console.log(r.join(""))}}),n.raise("Error compiling "+u+" shader, "+f[0].name)}}function O(e,t,r,o,i){if(!e.getProgramParameter(t,e.LINK_STATUS)){var a=e.getProgramInfoLog(t),u=h(r,i),f='Error linking program with vertex shader, "'+h(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+a),n.raise(f)}}function w(e){e._commandRef=m()}function x(e,t,n,r){function o(e){return e?r.id(e):0}function i(e,t){Object.keys(t).forEach(function(t){e[r.id(t)]=!0})}w(e),e._fragId=o(e.static.frag),e._vertId=o(e.static.vert);var a=e._uniformSet={};i(a,t.static),i(a,t.dynamic);var u=e._attributeSet={};i(u,n.static),i(u,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function S(e,n){var r=b();t(e+" in command "+(n||m())+("unknown"===r?"":" called from "+r))}function j(e,t,n){e||S(t,n||m())}function E(e,t,n,r){e in t||S("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join(),r||m())}function A(e,t,n,i){(void 0===e?"undefined":r(e))!==t&&S("invalid parameter type"+o(n)+". expected "+t+", got "+(void 0===e?"undefined":r(e)),i||m())}function L(e){e()}function M(e,t,n){e.texture?c(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):c(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}function P(e,t){return e===lt||e===st||e===pt?2:e===dt?4:yt[e]*t}function T(e){return!(e&e-1||!e)}function C(e,t,r){var o,i=t.width,a=t.height,u=t.channels;n(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),e.wrapS===rt&&e.wrapT===rt||n(T(i)&&T(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==a&&n(e.minFilter!==it&&e.minFilter!==ut&&e.minFilter!==at&&e.minFilter!==ft,"min filter requires mipmap"):(n(T(i)&&T(a),"texture must be a square power of 2 to support mipmapping"),n(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===ct&&(r.extensions.indexOf("oes_texture_float_linear")<0&&n(e.minFilter===ot&&e.magFilter===ot,"filter not supported, must enable oes_texture_float_linear"),n(!e.genMipmaps,"mipmap generation not supported with float textures"));var f=t.images;for(o=0;o<16;++o)if(f[o]){var c=i>>o,s=a>>o;n(t.mipmask&1<<o,"missing mipmap data");var l=f[o];if(n(l.width===c&&l.height===s,"invalid shape for mip images"),n(l.format===t.format&&l.internalformat===t.internalformat&&l.type===t.type,"incompatible type for mip image"),l.compressed);else if(l.data){var p=Math.ceil(P(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;n(l.data.byteLength===p*s,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else e.genMipmaps||n(0==(t.mipmask&1<<o),"extra mipmap data");t.compressed&&n(!e.genMipmaps,"mipmap generation for compressed images not supported")}function R(e,t,r,o){var i=e.width,a=e.height,u=e.channels;n(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),n(i===a,"cube map must be square"),n(t.wrapS===rt&&t.wrapT===rt,"wrap mode not supported by cube map");for(var f=0;f<r.length;++f){var c=r[f];n(c.width===i&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(n(!c.compressed,"can not generate mipmap for compressed textures"),n(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var s=c.images,l=0;l<16;++l){var p=s[l];if(p){var d=i>>l,y=a>>l;n(c.mipmask&1<<l,"missing mipmap data"),n(p.width===d&&p.height===y,"invalid shape for mip images"),n(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed||(p.data?n(p.data.byteLength===d*y*Math.max(P(p.type,u),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy)}}}}function k(e,t){this.id=bt++,this.type=e,this.data=t}function I(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function D(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+I(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return D(e.substr(0,r.index)).concat(D(r[1])).concat(D(e.substr(r.index+r[0].length)));var o=e.split(".");if(1===o.length)return['"'+I(e)+'"'];for(var i=[],a=0;a<o.length;++a)i=i.concat(D(o[a]));return i}function V(e){return"["+D(e).join("][")+"]"}function G(e,t){return new k(e,V(t+""))}function N(e){return"function"==typeof e&&!e._reglType||e instanceof k}function F(e,t){return"function"==typeof e?new k(ht,e):e}function B(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function U(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;if(e!==document.body){var o=e.getBoundingClientRect();t=o.right-o.left,r=o.bottom-o.top}i.width=n*t,i.height=n*r,tt(i.style,{width:t+"px",height:r+"px"})}function o(){window.removeEventListener("resize",r),e.removeChild(i)}var i=document.createElement("canvas");return tt(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",tt(e.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:o}}function z(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function Y(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function q(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function X(e){return"string"==typeof e?e.split():(mt(Array.isArray(e),"invalid extension array"),e)}function H(e){return"string"==typeof e?(mt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function W(e){var t,n,o,i,a=e||{},u={},f=[],c=[],s="undefined"==typeof window?1:window.devicePixelRatio,l=!1,p=function(e){e&&mt.raise(e)},d=function(){};if("string"==typeof a?(mt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(a),mt(t,"invalid query string for element")):"object"===(void 0===a?"undefined":r(a))?Y(a)?t=a:q(a)?o=(i=a).canvas:(mt.constructor(a),"gl"in a?i=a.gl:"canvas"in a?o=H(a.canvas):"container"in a&&(n=H(a.container)),"attributes"in a&&(u=a.attributes,mt.type(u,"object","invalid context attributes")),"extensions"in a&&(f=X(a.extensions)),"optionalExtensions"in a&&(c=X(a.optionalExtensions)),"onDone"in a&&(mt.type(a.onDone,"function","invalid or missing onDone callback"),p=a.onDone),"profile"in a&&(l=!!a.profile),"pixelRatio"in a&&mt((s=+a.pixelRatio)>0,"invalid pixel ratio")):mt.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?o=t:n=t),!i){if(!o){mt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var y=U(n||document.body,p,s);if(!y)return null;o=y.canvas,d=y.onDestroy}i=z(o,u)}return i?{gl:i,canvas:o,container:n,extensions:f,optionalExtensions:c,pixelRatio:s,profile:l,onDone:p,onDestroy:d}:(d(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function K(e,t){function n(t){mt.type(t,"string","extension name must be string");var n,o=t.toLowerCase();try{n=r[o]=e.getExtension(o)}catch(e){}return!!n}for(var r={},o=0;o<t.extensions.length;++o){var i=t.extensions[o];if(!n(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(!n(e))throw new Error("(regl): error restoring extension "+e)})}}}function $(e){return!!e&&"object"===(void 0===e?"undefined":r(e))&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||et(e.data))}function Q(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function Z(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function J(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1}function ee(e){var t=Z(e),n=Pt[J(t)>>2];return n.length>0?n.pop():new ArrayBuffer(t)}function te(e){Pt[J(e.byteLength)>>2].push(e)}function ne(e,t){var n=null;switch(e){case xt:n=new Int8Array(ee(t),0,t);break;case St:n=new Uint8Array(ee(t),0,t);break;case jt:n=new Int16Array(ee(2*t),0,t);break;case Et:n=new Uint16Array(ee(2*t),0,t);break;case At:n=new Int32Array(ee(4*t),0,t);break;case Lt:n=new Uint32Array(ee(4*t),0,t);break;case Mt:n=new Float32Array(ee(4*t),0,t);break;default:return null}return n.length!==t?n.subarray(0,t):n}function re(e){te(e.buffer)}function oe(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function ie(e,t,n,r){for(var o=0,i=0;i<t;++i)for(var a=e[i],u=0;u<n;++u)r[o++]=a[u]}function ae(e,t,n,r,o,i){for(var a=i,u=0;u<t;++u)for(var f=e[u],c=0;c<n;++c)for(var s=f[c],l=0;l<r;++l)o[a++]=s[l]}function ue(e,t,n,r,o){for(var i=1,a=n+1;a<t.length;++a)i*=t[a];var u=t[n];if(t.length-n==4){var f=t[n+1],c=t[n+2],s=t[n+3];for(a=0;a<u;++a)ae(e[a],f,c,s,r,o),o+=i}else for(a=0;a<u;++a)ue(e[a],t,n+1,r,o),o+=i}function fe(e,t,n,r){var o=1;if(t.length)for(var i=0;i<t.length;++i)o*=t[i];else o=0;var a=r||Tt.allocType(n,o);switch(t.length){case 0:break;case 1:oe(e,t[0],a);break;case 2:ie(e,t[0],t[1],a);break;case 3:ae(e,t[0],t[1],t[2],a,0);break;default:ue(e,t,0,a,0)}return a}function ce(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}function se(e){return 0|Je[Object.prototype.toString.call(e)]}function le(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function pe(e,t,n,r,o,i,a){for(var u=0,f=0;f<n;++f)for(var c=0;c<r;++c)e[u++]=t[o*f+i*c+a]}function de(e,t,n){function r(t){this.id=l++,this.buffer=e.createBuffer(),this.type=t,this.usage=Vt,this.byteLength=0,this.dimension=1,this.dtype=Nt,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(e,t){var n=d.pop();return n||(n=new r(e)),n.bind(),u(n,t,Gt,0,1,!1),n}function i(e){d.push(e)}function a(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function u(e,t,n,r,o,i){var u;if(e.usage=n,Array.isArray(t)){if(e.dtype=r||Ft,t.length>0){var f;if(Array.isArray(t[0])){u=Dt(t);for(var c=1,s=1;s<u.length;++s)c*=u[s];e.dimension=c,a(e,f=It(t,u,e.dtype),n),i?e.persistentData=f:Tt.freeType(f)}else if("number"==typeof t[0]){e.dimension=o;var l=Tt.allocType(e.dtype,t.length);le(l,t),a(e,l,n),i?e.persistentData=l:Tt.freeType(l)}else et(t[0])?(e.dimension=t[0].length,e.dtype=r||se(t[0])||Ft,a(e,f=It(t,[t.length,t[0].length],e.dtype),n),i?e.persistentData=f:Tt.freeType(f)):mt.raise("invalid buffer data")}}else if(et(t))e.dtype=r||se(t),e.dimension=o,a(e,t,n),i&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if($(t)){u=t.shape;var p=t.stride,d=t.offset,y=0,m=0,b=0,h=0;1===u.length?(y=u[0],m=1,b=p[0],h=0):2===u.length?(y=u[0],m=u[1],b=p[0],h=p[1]):mt.raise("invalid shape"),e.dtype=r||se(t.data)||Ft,e.dimension=m;var v=Tt.allocType(e.dtype,y*m);pe(v,t.data,y,m,b,h,d),a(e,v,n),i?e.persistentData=v:Tt.freeType(v)}else mt.raise("invalid buffer data")}function f(n){t.bufferCount--;var r=n.buffer;mt(r,"buffer must not be deleted already"),e.deleteBuffer(r),n.buffer=null,delete p[n.id]}function c(o,i,a,c){function s(t){var r=Vt,o=null,i=0,a=0,f=1;return Array.isArray(t)||et(t)||$(t)?o=t:"number"==typeof t?i=0|t:t&&(mt.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(mt(null===o||Array.isArray(o)||et(o)||$(o),"invalid data for buffer"),o=t.data),"usage"in t&&(mt.parameter(t.usage,kt,"invalid buffer usage"),r=kt[t.usage]),"type"in t&&(mt.parameter(t.type,Rt,"invalid buffer type"),a=Rt[t.type]),"dimension"in t&&(mt.type(t.dimension,"number","invalid dimension"),f=0|t.dimension),"length"in t&&(mt.nni(i,"buffer length must be a nonnegative integer"),i=0|t.length)),y.bind(),o?u(y,o,r,a,f,c):(e.bufferData(y.type,i,r),y.dtype=a||Nt,y.usage=r,y.dimension=f,y.byteLength=i),n.profile&&(y.stats.size=y.byteLength*Bt[y.dtype]),s}function l(t,n){mt(n+t.byteLength<=y.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+y.byteLength),e.bufferSubData(y.type,n,t)}function d(e,t){var n,r=0|(t||0);if(y.bind(),Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=Tt.allocType(y.dtype,e.length);le(o,e),l(o,r),Tt.freeType(o)}else if(Array.isArray(e[0])||et(e[0])){n=Dt(e);var i=It(e,n,y.dtype);l(i,r),Tt.freeType(i)}else mt.raise("invalid buffer data")}else if(et(e))l(e,r);else if($(e)){n=e.shape;var a=e.stride,u=0,f=0,c=0,p=0;1===n.length?(u=n[0],f=1,c=a[0],p=0):2===n.length?(u=n[0],f=n[1],c=a[0],p=a[1]):mt.raise("invalid shape");var d=Array.isArray(e.data)?y.dtype:se(e.data),m=Tt.allocType(d,u*f);pe(m,e.data,u,f,c,p,e.offset),l(m,r),Tt.freeType(m)}else mt.raise("invalid data for buffer subdata");return s}t.bufferCount++;var y=new r(i);return p[y.id]=y,a||s(o),s._reglType="buffer",s._buffer=y,s.subdata=d,n.profile&&(s.stats=y.stats),s.destroy=function(){f(y)},s}function s(){wt(p).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})}var l=0,p={};r.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){f(this)};var d=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(p).forEach(function(t){e+=p[t].stats.size}),e}),{create:c,createStream:o,destroyStream:i,clear:function(){wt(p).forEach(f),d.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof r?e._buffer:null},restore:s,_initBuffer:u}}function ye(e,t,n,r){function o(e){this.id=l++,s[this.id]=this,this.buffer=e,this.primType=qt,this.vertCount=0,this.type=0}function i(e){var t=d.pop();return t||(t=new o(n.create(null,Zt,!0,!1)._buffer)),u(t,e,Jt,-1,-1,0,0),t}function a(e){d.push(e)}function u(r,o,i,a,u,f,c){if(r.buffer.bind(),o){var s=c;c||et(o)&&(!$(o)||et(o.data))||(s=t.oes_element_index_uint?Qt:Kt),n._initBuffer(r.buffer,o,i,s,3)}else e.bufferData(Zt,f,i),r.buffer.dtype=l||Ht,r.buffer.usage=i,r.buffer.dimension=3,r.buffer.byteLength=f;var l=c;if(!c){switch(r.buffer.dtype){case Ht:case Xt:l=Ht;break;case Kt:case Wt:l=Kt;break;case Qt:case $t:l=Qt;break;default:mt.raise("unsupported type for element array")}r.buffer.dtype=l}r.type=l,mt(l!==Qt||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=r.buffer.byteLength,l===Kt?p>>=1:l===Qt&&(p>>=2)),r.vertCount=p;var d=a;if(a<0){d=qt;var y=r.buffer.dimension;1===y&&(d=zt),2===y&&(d=Yt),3===y&&(d=qt)}r.primType=d}function f(e){r.elementsCount--,mt(null!==e.buffer,"must not double destroy elements"),delete s[e.id],e.buffer.destroy(),e.buffer=null}function c(e,t){function i(e){if(e)if("number"==typeof e)a(e),c.primType=qt,c.vertCount=0|e,c.type=Ht;else{var t=null,n=en,r=-1,o=-1,f=0,s=0;Array.isArray(e)||et(e)||$(e)?t=e:(mt.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,mt(Array.isArray(t)||et(t)||$(t),"invalid data for element buffer")),"usage"in e&&(mt.parameter(e.usage,kt,"invalid element buffer usage"),n=kt[e.usage]),"primitive"in e&&(mt.parameter(e.primitive,Ut,"invalid element buffer primitive"),r=Ut[e.primitive]),"count"in e&&(mt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),o=0|e.count),"type"in e&&(mt.parameter(e.type,p,"invalid buffer type"),s=p[e.type]),"length"in e?f=0|e.length:(f=o,s===Kt||s===Wt?f*=2:s!==Qt&&s!==$t||(f*=4))),u(c,t,n,r,o,f,s)}else a(),c.primType=qt,c.vertCount=0,c.type=Ht;return i}var a=n.create(null,Zt,!0),c=new o(a._buffer);return r.elementsCount++,i(e),i._reglType="elements",i._elements=c,i.subdata=function(e,t){return a.subdata(e,t),i},i.destroy=function(){f(c)},i}var s={},l=0,p={uint8:Ht,uint16:Kt};t.oes_element_index_uint&&(p.uint32=Qt),o.prototype.bind=function(){this.buffer.bind()};var d=[];return{create:c,createStream:i,destroyStream:a,getElements:function(e){return"function"==typeof e&&e._elements instanceof o?e._elements:null},clear:function(){wt(s).forEach(f)}}}function me(e){for(var t=Tt.allocType(rn,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{tn[0]=e[n];var r=nn[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)t[n]=o;else if(i<-14){var u=-14-i;t[n]=o+(a+1024>>u)}else t[n]=i>15?o+31744:o+(i+15<<10)+a}return t}function be(e){return Array.isArray(e)||et(e)}function he(e){return"[object "+e+"]"}function ve(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function ge(e){return!!Array.isArray(e)&&!(0===e.length||!be(e[0]))}function _e(e){return Object.prototype.toString.call(e)}function Oe(e){return _e(e)===mr}function we(e){return _e(e)===br}function xe(e){return _e(e)===hr}function Se(e){return _e(e)===vr}function je(e){if(!e)return!1;var t=_e(e);return gr.indexOf(t)>=0||(ve(e)||ge(e)||$(e))}function Ee(e){return 0|Je[Object.prototype.toString.call(e)]}function Ae(e,t){var n=t.length;switch(e.type){case Gn:case Nn:case Fn:case Bn:var r=Tt.allocType(e.type,n);r.set(t),e.data=r;break;case jn:e.data=me(t);break;default:mt.raise("unsupported texture type, must specify a typed array")}}function Le(e,t){return Tt.allocType(e.type===jn?Bn:e.type,t)}function Me(e,t){e.type===jn?(e.data=me(t),Tt.freeType(t)):e.data=t}function Pe(e,t,n,r,o,i){for(var a=e.width,u=e.height,f=e.channels,c=Le(e,a*u*f),s=0,l=0;l<u;++l)for(var p=0;p<a;++p)for(var d=0;d<f;++d)c[s++]=t[n*p+r*l+o*d+i];Me(e,c)}function Te(e,t,n,r,o,i){var a;if(a=void 0!==Or[e]?Or[e]:yr[e]*_r[t],i&&(a*=6),o){for(var u=0,f=n;f>=1;)u+=a*f*f,f/=2;return u}return a*n*r}function Ce(e,t,n,o,i,a,u){function f(){this.internalformat=cn,this.format=cn,this.type=Gn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function c(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function s(e,o){if("object"===(void 0===o?"undefined":r(o))&&o){if("premultiplyAlpha"in o&&(mt.type(o.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=o.premultiplyAlpha),"flipY"in o&&(mt.type(o.flipY,"boolean","invalid texture flip"),e.flipY=o.flipY),"alignment"in o&&(mt.oneOf(o.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=o.alignment),"colorSpace"in o&&(mt.parameter(o.colorSpace,N,"invalid colorSpace"),e.colorSpace=N[o.colorSpace]),"type"in o){var i=o.type;mt(t.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),mt(t.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),mt(t.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),mt.parameter(i,F,"invalid texture type"),e.type=F[i]}var a=e.width,u=e.height,f=e.channels,c=!1;"shape"in o?(mt(Array.isArray(o.shape)&&o.shape.length>=2,"shape must be an array"),a=o.shape[0],u=o.shape[1],3===o.shape.length&&(f=o.shape[2],mt(f>0&&f<=4,"invalid number of channels"),c=!0),mt(a>=0&&a<=n.maxTextureSize,"invalid width"),mt(u>=0&&u<=n.maxTextureSize,"invalid height")):("radius"in o&&(a=u=o.radius,mt(a>=0&&a<=n.maxTextureSize,"invalid radius")),"width"in o&&(a=o.width,mt(a>=0&&a<=n.maxTextureSize,"invalid width")),"height"in o&&(u=o.height,mt(u>=0&&u<=n.maxTextureSize,"invalid height")),"channels"in o&&(f=o.channels,mt(f>0&&f<=4,"invalid number of channels"),c=!0)),e.width=0|a,e.height=0|u,e.channels=0|f;var s=!1;if("format"in o){var l=o.format;mt(t.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),mt.parameter(l,B,"invalid texture format");var p=e.internalformat=B[l];e.format=Q[p],l in F&&("type"in o||(e.type=F[l])),l in U&&(e.compressed=!0),s=!0}!c&&s?e.channels=yr[e.format]:c&&!s?e.channels!==dr[e.format]&&(e.format=e.internalformat=dr[e.channels]):s&&c&&mt(e.channels===yr[e.format],"number of channels inconsistent with specified format")}}function l(t){e.pixelStorei(ur,t.flipY),e.pixelStorei(fr,t.premultiplyAlpha),e.pixelStorei(cr,t.colorSpace),e.pixelStorei(ar,t.unpackAlignment)}function p(){f.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(e,t){var r=null;if(je(t)?r=t:t&&(mt.type(t,"object","invalid pixel data type"),s(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),je(t.data)&&(r=t.data)),mt(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){mt(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,mt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=o&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(et(r))e.channels=e.channels||4,e.data=r,"type"in t||e.type!==Gn||(e.type=Ee(r));else if(ve(r))e.channels=e.channels||4,Ae(e,r),e.alignment=1,e.needsFree=!0;else if($(r)){var u=r.data;Array.isArray(u)||e.type!==Gn||(e.type=Ee(u));var f,c,l,p,d,y,m=r.shape,b=r.stride;3===m.length?(l=m[2],y=b[2]):(mt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,y=1),f=m[0],c=m[1],p=b[0],d=b[1],e.alignment=1,e.width=f,e.height=c,e.channels=l,e.format=e.internalformat=dr[l],e.needsFree=!0,Pe(e,u,p,d,y,r.offset)}else if(Oe(r)||we(r))Oe(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(xe(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(Se(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(ge(r)){var h=e.width||r[0].length,v=e.height||r.length,g=e.channels;g=be(r[0][0])?g||r[0][0].length:g||1;for(var _=Ct.shape(r),O=1,w=0;w<_.length;++w)O*=_[w];var x=Le(e,O);Ct.flatten(r,_,"",x),Me(e,x),e.alignment=1,e.width=h,e.height=v,e.channels=g,e.format=e.internalformat=dr[g],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Bn?mt(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===jn&&mt(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function y(t,n,r){var i=t.element,a=t.data,u=t.internalformat,f=t.format,c=t.type,s=t.width,p=t.height;l(t),i?e.texImage2D(n,r,f,f,c,i):t.compressed?e.compressedTexImage2D(n,r,u,s,p,0,a):t.needsCopy?(o(),e.copyTexImage2D(n,r,f,t.xOffset,t.yOffset,s,p,0)):e.texImage2D(n,r,f,s,p,0,f,c,a)}function m(t,n,r,i,a){var u=t.element,f=t.data,c=t.internalformat,s=t.format,p=t.type,d=t.width,y=t.height;l(t),u?e.texSubImage2D(n,a,r,i,s,p,u):t.compressed?e.compressedTexSubImage2D(n,a,r,i,c,d,y,f):t.needsCopy?(o(),e.copyTexSubImage2D(n,a,r,i,t.xOffset,t.yOffset,d,y)):e.texSubImage2D(n,a,r,i,d,y,s,p,f)}function b(){return Z.pop()||new p}function h(e){e.needsFree&&Tt.freeType(e.data),p.call(e),Z.push(e)}function v(){f.call(this),this.genMipmaps=!1,this.mipmapHint=nr,this.mipmask=0,this.images=Array(16)}function g(e,t,n){var r=e.images[0]=b();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function _(e,t){var n=null;if(je(t))c(n=e.images[0]=b(),e),d(n,t),e.mipmask=1;else if(s(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,o=0;o<r.length;++o)c(n=e.images[o]=b(),e),n.width>>=o,n.height>>=o,d(n,r[o]),e.mipmask|=1<<o;else c(n=e.images[0]=b(),e),d(n,t),e.mipmask=1;c(e,e.images[0]),(e.compressed&&e.internalformat===En||e.internalformat===An||e.internalformat===Ln||e.internalformat===Mn)&&mt(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function O(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;y(n[r],t,r)}}function w(){var e=J.pop()||new v;f.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function x(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&h(t[n]),t[n]=null;J.push(e)}function S(){this.minFilter=Kn,this.magFilter=Kn,this.wrapS=qn,this.wrapT=qn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=nr}function j(e,t){if("min"in t){var o=t.min;mt.parameter(o,G),e.minFilter=G[o],pr.indexOf(e.minFilter)>=0&&(e.genMipmaps=!0)}if("mag"in t){var i=t.mag;mt.parameter(i,V),e.magFilter=V[i]}var a=e.wrapS,u=e.wrapT;if("wrap"in t){var f=t.wrap;"string"==typeof f?(mt.parameter(f,D),a=u=D[f]):Array.isArray(f)&&(mt.parameter(f[0],D),mt.parameter(f[1],D),a=D[f[0]],u=D[f[1]])}else{if("wrapS"in t){var c=t.wrapS;mt.parameter(c,D),a=D[c]}if("wrapT"in t){var s=t.wrapT;mt.parameter(s,D),u=D[s]}}if(e.wrapS=a,e.wrapT=u,"anisotropic"in t){var l=t.anisotropic;mt("number"==typeof l&&l>=1&&l<=n.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var p=!1;switch(r(t.mipmap)){case"string":mt.parameter(t.mipmap,I,"invalid mipmap hint"),e.mipmapHint=I[t.mipmap],e.genMipmaps=!0,p=!0;break;case"boolean":p=e.genMipmaps=t.mipmap;break;case"object":mt(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,p=!0;break;default:mt.raise("invalid mipmap type")}!p||"min"in t||(e.minFilter=Qn)}}function E(n,r){e.texParameteri(r,Wn,n.minFilter),e.texParameteri(r,Hn,n.magFilter),e.texParameteri(r,Un,n.wrapS),e.texParameteri(r,zn,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,ir,n.anisotropic),n.genMipmaps&&(e.hint(tr,n.mipmapHint),e.generateMipmap(r))}function A(t){f.call(this),this.mipmask=0,this.internalformat=cn,this.id=ee++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new S,u.profile&&(this.stats={size:0})}function L(t){e.activeTexture(lr),e.bindTexture(t.target,t.texture)}function M(){var t=re[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(an,null)}function P(t){var n=t.texture;mt(n,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(e.activeTexture(lr+r),e.bindTexture(o,null),re[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete te[t.id],a.textureCount--}function T(t,r){function o(e,t){var r=s.texInfo;S.call(r);var i=w();return"number"==typeof e?"number"==typeof t?g(i,0|e,0|t):g(i,0|e,0|e):e?(mt.type(e,"object","invalid arguments to regl.texture"),j(r,e),_(i,e)):g(i,1,1),r.genMipmaps&&(i.mipmask=(i.width<<1)-1),s.mipmask=i.mipmask,c(s,i),mt.texture2D(r,i,n),s.internalformat=i.internalformat,o.width=i.width,o.height=i.height,L(s),O(i,an),E(r,an),M(),x(i),u.profile&&(s.stats.size=Te(s.internalformat,s.type,i.width,i.height,r.genMipmaps,!1)),o.format=q[s.internalformat],o.type=X[s.type],o.mag=H[r.magFilter],o.min=W[r.minFilter],o.wrapS=K[r.wrapS],o.wrapT=K[r.wrapT],o}function i(e,t,n,r){mt(!!e,"must specify image data");var i=0|t,a=0|n,u=0|r,f=b();return c(f,s),f.width=0,f.height=0,d(f,e),f.width=f.width||(s.width>>u)-i,f.height=f.height||(s.height>>u)-a,mt(s.type===f.type&&s.format===f.format&&s.internalformat===f.internalformat,"incompatible format for texture.subimage"),mt(i>=0&&a>=0&&i+f.width<=s.width&&a+f.height<=s.height,"texture.subimage write out of bounds"),mt(s.mipmask&1<<u,"missing mipmap data"),mt(f.data||f.element||f.needsCopy,"missing image data"),L(s),m(f,an,i,a,u),M(),h(f),o}function f(t,n){var r=0|t,i=0|n||r;if(r===s.width&&i===s.height)return o;o.width=s.width=r,o.height=s.height=i,L(s);for(var a=0;s.mipmask>>a;++a)e.texImage2D(an,a,s.format,r>>a,i>>a,0,s.format,s.type,null);return M(),u.profile&&(s.stats.size=Te(s.internalformat,s.type,r,i,!1,!1)),o}var s=new A(an);return te[s.id]=s,a.textureCount++,o(t,r),o.subimage=i,o.resize=f,o._reglType="texture2d",o._texture=s,u.profile&&(o.stats=s.stats),o.destroy=function(){s.decRef()},o}function C(t,o,i,f,l,p){function y(e,t,o,i,a,f){var l,p=T.texInfo;for(S.call(p),l=0;l<6;++l)C[l]=w();if("number"!=typeof e&&e)if("object"===(void 0===e?"undefined":r(e)))if(t)_(C[0],e),_(C[1],t),_(C[2],o),_(C[3],i),_(C[4],a),_(C[5],f);else if(j(p,e),s(T,e),"faces"in e){var d=e.faces;for(mt(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),l=0;l<6;++l)mt("object"===r(d[l])&&!!d[l],"invalid input for cube map face"),c(C[l],T),_(C[l],d[l])}else for(l=0;l<6;++l)_(C[l],e);else mt.raise("invalid arguments to cube map");else{var m=0|e||1;for(l=0;l<6;++l)g(C[l],m,m)}for(c(T,C[0]),p.genMipmaps?T.mipmask=(C[0].width<<1)-1:T.mipmask=C[0].mipmask,mt.textureCube(T,p,C,n),T.internalformat=C[0].internalformat,y.width=C[0].width,y.height=C[0].height,L(T),l=0;l<6;++l)O(C[l],fn+l);for(E(p,un),M(),u.profile&&(T.stats.size=Te(T.internalformat,T.type,y.width,y.height,p.genMipmaps,!0)),y.format=q[T.internalformat],y.type=X[T.type],y.mag=H[p.magFilter],y.min=W[p.minFilter],y.wrapS=K[p.wrapS],y.wrapT=K[p.wrapT],l=0;l<6;++l)x(C[l]);return y}function v(e,t,n,r,o){mt(!!t,"must specify image data"),mt("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var i=0|n,a=0|r,u=0|o,f=b();return c(f,T),f.width=0,f.height=0,d(f,t),f.width=f.width||(T.width>>u)-i,f.height=f.height||(T.height>>u)-a,mt(T.type===f.type&&T.format===f.format&&T.internalformat===f.internalformat,"incompatible format for texture.subimage"),mt(i>=0&&a>=0&&i+f.width<=T.width&&a+f.height<=T.height,"texture.subimage write out of bounds"),mt(T.mipmask&1<<u,"missing mipmap data"),mt(f.data||f.element||f.needsCopy,"missing image data"),L(T),m(f,fn+e,i,a,u),M(),h(f),y}function P(t){var n=0|t;if(n!==T.width){y.width=T.width=n,y.height=T.height=n,L(T);for(var r=0;r<6;++r)for(var o=0;T.mipmask>>o;++o)e.texImage2D(fn+r,o,T.format,n>>o,n>>o,0,T.format,T.type,null);return M(),u.profile&&(T.stats.size=Te(T.internalformat,T.type,y.width,y.height,!1,!0)),y}}var T=new A(un);te[T.id]=T,a.cubeCount++;var C=new Array(6);return y(t,o,i,f,l,p),y.subimage=v,y.resize=P,y._reglType="textureCube",y._texture=T,u.profile&&(y.stats=T.stats),y.destroy=function(){T.decRef()},y}function R(){for(var t=0;t<ne;++t)e.activeTexture(lr+t),e.bindTexture(an,null),re[t]=null;wt(te).forEach(P),a.cubeCount=0,a.textureCount=0}function k(){wt(te).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;n<32;++n)if(0!=(t.mipmask&1<<n))if(t.target===an)e.texImage2D(an,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)e.texImage2D(fn+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);E(t.texInfo,t.target)})}var I={"don't care":nr,"dont care":nr,nice:or,fast:rr},D={repeat:Yn,clamp:qn,mirror:Xn},V={nearest:Kn,linear:$n},G=tt({mipmap:er,"nearest mipmap nearest":Qn,"linear mipmap nearest":Zn,"nearest mipmap linear":Jn,"linear mipmap linear":er},V),N={none:0,browser:sr},F={uint8:Gn,rgba4:hn,rgb565:gn,"rgb5 a1":vn},B={alpha:sn,luminance:pn,"luminance alpha":dn,rgb:ln,rgba:cn,rgba4:yn,"rgb5 a1":mn,rgb565:bn},U={};t.ext_srgb&&(B.srgb=xn,B.srgba=Sn),t.oes_texture_float&&(F.float32=F.float=Bn),t.oes_texture_half_float&&(F.float16=F["half float"]=jn),t.webgl_depth_texture&&(tt(B,{depth:On,"depth stencil":wn}),tt(F,{uint16:Nn,uint32:Fn,"depth stencil":_n})),t.webgl_compressed_texture_s3tc&&tt(U,{"rgb s3tc dxt1":En,"rgba s3tc dxt1":An,"rgba s3tc dxt3":Ln,"rgba s3tc dxt5":Mn}),t.webgl_compressed_texture_atc&&tt(U,{"rgb atc":Pn,"rgba atc explicit alpha":Tn,"rgba atc interpolated alpha":Cn}),t.webgl_compressed_texture_pvrtc&&tt(U,{"rgb pvrtc 4bppv1":Rn,"rgb pvrtc 2bppv1":kn,"rgba pvrtc 4bppv1":In,"rgba pvrtc 2bppv1":Dn}),t.webgl_compressed_texture_etc1&&(U["rgb etc1"]=Vn);var z=Array.prototype.slice.call(e.getParameter(on));Object.keys(U).forEach(function(e){var t=U[e];z.indexOf(t)>=0&&(B[e]=t)});var Y=Object.keys(B);n.textureFormats=Y;var q=[];Object.keys(B).forEach(function(e){var t=B[e];q[t]=e});var X=[];Object.keys(F).forEach(function(e){var t=F[e];X[t]=e});var H=[];Object.keys(V).forEach(function(e){var t=V[e];H[t]=e});var W=[];Object.keys(G).forEach(function(e){var t=G[e];W[t]=e});var K=[];Object.keys(D).forEach(function(e){var t=D[e];K[t]=e});var Q=Y.reduce(function(e,t){var n=B[t];return n===pn||n===sn||n===pn||n===dn||n===On||n===wn?e[n]=n:n===mn||t.indexOf("rgba")>=0?e[n]=cn:e[n]=ln,e},{}),Z=[],J=[],ee=0,te={},ne=n.maxTextureUnits,re=Array(ne).map(function(){return null});return tt(A.prototype,{bind:function(){var t=this;t.bindCount+=1;var n=t.unit;if(n<0){for(var r=0;r<ne;++r){var o=re[r];if(o){if(o.bindCount>0)continue;o.unit=-1}re[r]=t,n=r;break}n>=ne&&mt.raise("insufficient number of texture units"),u.profile&&a.maxTextureUnits<n+1&&(a.maxTextureUnits=n+1),t.unit=n,e.activeTexture(lr+n),e.bindTexture(t.target,t.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&P(this)}}),u.profile&&(a.getTotalTextureSize=function(){var e=0;return Object.keys(te).forEach(function(t){e+=te[t].stats.size}),e}),{create2D:T,createCube:C,clear:R,getTexture:function(e){return null},restore:k}}function Re(e,t,n){return Sr[e]*t*n}function ke(e,t,n,o,i,a){function u(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,o=0;t?(r=t.width,o=t.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function f(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function c(e,t,n){if(e)if(e.texture){var r=e.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);mt(o===t&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;mt(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function s(t,n){n&&(n.texture?e.framebufferTexture2D(Er,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(Er,t,Ar,n.renderbuffer._renderbuffer.renderbuffer))}function l(e){var t=Lr,n=null,o=null,i=e;"object"===(void 0===e?"undefined":r(e))&&(i=e.data,"target"in e&&(t=0|e.target)),mt.type(i,"function","invalid attachment data");var a=i._reglType;return"texture2d"===a?(n=i,mt(t===Lr)):"textureCube"===a?(n=i,mt(t>=Mr&&t<Mr+6,"invalid cube map target")):"renderbuffer"===a?(o=i,t=Ar):mt.raise("invalid regl object for attachment"),new u(t,n,o)}function p(e,t,n,r,a){if(n){var f=o.create2D({width:e,height:t,format:r,type:a});return f._texture.refCount=0,new u(Lr,f,null)}var c=i.create({width:e,height:t,format:r});return c._renderbuffer.refCount=0,new u(Ar,null,c)}function d(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}function m(){this.id=E++,A[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function b(e){e.colorAttachments.forEach(f),f(e.depthAttachment),f(e.stencilAttachment),f(e.depthStencilAttachment)}function h(t){var n=t.framebuffer;mt(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete A[t.id]}function v(t){var r;e.bindFramebuffer(Er,t.framebuffer);var o=t.colorAttachments;for(r=0;r<o.length;++r)s(Pr+r,o[r]);for(r=o.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(Er,Pr+r,Lr,null,0);e.framebufferTexture2D(Er,Rr,Lr,null,0),e.framebufferTexture2D(Er,Tr,Lr,null,0),e.framebufferTexture2D(Er,Cr,Lr,null,0),s(Tr,t.depthAttachment),s(Cr,t.stencilAttachment),s(Rr,t.depthStencilAttachment);var i=e.checkFramebufferStatus(Er);i!==kr&&mt.raise("framebuffer configuration not supported, status = "+zr[i]),e.bindFramebuffer(Er,w.next),w.cur=w.next,e.getError()}function g(e,r){function o(e,r){var i;mt(w.next!==u,"can not update framebuffer which is currently in use");var a=t.webgl_draw_buffers,f=0,s=0,y=!0,m=!0,h=null,g=!0,_="rgba",O="uint8",E=1,A=null,L=null,M=null,P=!1;if("number"==typeof e)f=0|e,s=0|r||f;else if(e){mt.type(e,"object","invalid arguments for framebuffer");var T=e;if("shape"in T){var C=T.shape;mt(Array.isArray(C)&&C.length>=2,"invalid shape for framebuffer"),f=C[0],s=C[1]}else"radius"in T&&(f=s=T.radius),"width"in T&&(f=T.width),"height"in T&&(s=T.height);("color"in T||"colors"in T)&&(h=T.color||T.colors,Array.isArray(h)&&mt(1===h.length||a,"multiple render targets not supported")),h||("colorCount"in T&&(E=0|T.colorCount,mt(E>0,"invalid color buffer count")),"colorTexture"in T&&(g=!!T.colorTexture,_="rgba4"),"colorType"in T&&(O=T.colorType,g?(mt(t.oes_texture_float||!("float"===O||"float32"===O),"you must enable OES_texture_float in order to use floating point framebuffer objects"),mt(t.oes_texture_half_float||!("half float"===O||"float16"===O),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===O||"float16"===O?(mt(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_="rgba16f"):"float"!==O&&"float32"!==O||(mt(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_="rgba32f"),mt.oneOf(O,j,"invalid color type")),"colorFormat"in T&&(_=T.colorFormat,x.indexOf(_)>=0?g=!0:S.indexOf(_)>=0?g=!1:g?mt.oneOf(T.colorFormat,x,"invalid color format for texture"):mt.oneOf(T.colorFormat,S,"invalid color format for renderbuffer"))),("depthTexture"in T||"depthStencilTexture"in T)&&(P=!(!T.depthTexture&&!T.depthStencilTexture),mt(!P||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in T&&("boolean"==typeof T.depth?y=T.depth:(A=T.depth,m=!1)),"stencil"in T&&("boolean"==typeof T.stencil?m=T.stencil:(L=T.stencil,y=!1)),"depthStencil"in T&&("boolean"==typeof T.depthStencil?y=m=T.depthStencil:(M=T.depthStencil,y=!1,m=!1))}else f=s=1;var R=null,k=null,I=null,D=null;if(Array.isArray(h))R=h.map(l);else if(h)R=[l(h)];else for(R=new Array(E),i=0;i<E;++i)R[i]=p(f,s,g,_,O);mt(t.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),mt(R.length<=n.maxColorAttachments,"too many color attachments, not supported"),f=f||R[0].width,s=s||R[0].height,A?k=l(A):y&&!m&&(k=p(f,s,P,"depth","uint32")),L?I=l(L):m&&!y&&(I=p(f,s,!1,"stencil","uint8")),M?D=l(M):!A&&!L&&m&&y&&(D=p(f,s,P,"depth stencil","depth stencil")),mt(!!A+!!L+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var V=null;for(i=0;i<R.length;++i)if(c(R[i],f,s),mt(!R[i]||R[i].texture&&Dr.indexOf(R[i].texture._texture.format)>=0||R[i].renderbuffer&&Ur.indexOf(R[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),R[i]&&R[i].texture){var G=Vr[R[i].texture._texture.format]*Gr[R[i].texture._texture.type];null===V?V=G:mt(V===G,"all color attachments much have the same number of bits per pixel.")}return c(k,f,s),mt(!k||k.texture&&k.texture._texture.format===Ir||k.renderbuffer&&k.renderbuffer._renderbuffer.format===Nr,"invalid depth attachment for framebuffer object"),c(I,f,s),mt(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Fr,"invalid stencil attachment for framebuffer object"),c(D,f,s),mt(!D||D.texture&&D.texture._texture.format===Br||D.renderbuffer&&D.renderbuffer._renderbuffer.format===Br,"invalid depth-stencil attachment for framebuffer object"),b(u),u.width=f,u.height=s,u.colorAttachments=R,u.depthAttachment=k,u.stencilAttachment=I,u.depthStencilAttachment=D,o.color=R.map(d),o.depth=d(k),o.stencil=d(I),o.depthStencil=d(D),o.width=u.width,o.height=u.height,v(u),o}function i(e,t){mt(w.next!==u,"can not resize a framebuffer which is currently in use");var n=0|e,r=0|t||n;if(n===u.width&&r===u.height)return o;for(var i=u.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(u.depthAttachment,n,r),y(u.stencilAttachment,n,r),y(u.depthStencilAttachment,n,r),u.width=o.width=n,u.height=o.height=r,v(u),o}var u=new m;return a.framebufferCount++,o(e,r),tt(o,{resize:i,_reglType:"framebuffer",_framebuffer:u,destroy:function(){h(u),b(u)},use:function(e){w.setFBO({framebuffer:o},e)}})}function _(e){function r(e){var n;mt(a.indexOf(w.next)<0,"can not update framebuffer which is currently in use");var i=t.webgl_draw_buffers,u={color:null},f=0,c=null,s="rgba",l="uint8",p=1;if("number"==typeof e)f=0|e;else if(e){mt.type(e,"object","invalid arguments for framebuffer");var d=e;if("shape"in d){var y=d.shape;mt(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),mt(y[0]===y[1],"cube framebuffer must be square"),f=y[0]}else"radius"in d&&(f=0|d.radius),"width"in d?(f=0|d.width,"height"in d&&mt(d.height===f,"must be square")):"height"in d&&(f=0|d.height);("color"in d||"colors"in d)&&(c=d.color||d.colors,Array.isArray(c)&&mt(1===c.length||i,"multiple render targets not supported")),c||("colorCount"in d&&(p=0|d.colorCount,mt(p>0,"invalid color buffer count")),"colorType"in d&&(mt.oneOf(d.colorType,j,"invalid color type"),l=d.colorType),"colorFormat"in d&&(s=d.colorFormat,mt.oneOf(d.colorFormat,x,"invalid color format for texture"))),"depth"in d&&(u.depth=d.depth),"stencil"in d&&(u.stencil=d.stencil),"depthStencil"in d&&(u.depthStencil=d.depthStencil)}else f=1;var m;if(c)if(Array.isArray(c))for(m=[],n=0;n<c.length;++n)m[n]=c[n];else m=[c];else{m=Array(p);var b={radius:f,format:s,type:l};for(n=0;n<p;++n)m[n]=o.createCube(b)}for(u.color=Array(m.length),n=0;n<m.length;++n){var h=m[n];mt("function"==typeof h&&"textureCube"===h._reglType,"invalid cube map"),f=f||h.width,mt(h.width===f&&h.height===f,"invalid cube map shape"),u.color[n]={target:Mr,data:m[n]}}for(n=0;n<6;++n){for(var v=0;v<m.length;++v)u.color[v].target=Mr+n;n>0&&(u.depth=a[0].depth,u.stencil=a[0].stencil,u.depthStencil=a[0].depthStencil),a[n]?a[n](u):a[n]=g(u)}return tt(r,{width:f,height:f,color:m})}function i(e){var t,o=0|e;if(mt(o>0&&o<=n.maxCubeMapSize,"invalid radius for cube fbo"),o===r.width)return r;var i=r.color;for(t=0;t<i.length;++t)i[t].resize(o);for(t=0;t<6;++t)a[t].resize(o);return r.width=r.height=o,r}var a=Array(6);return r(e),tt(r,{faces:a,resize:i,_reglType:"framebufferCube",destroy:function(){a.forEach(function(e){e.destroy()})}})}function O(){wt(A).forEach(function(t){t.framebuffer=e.createFramebuffer(),v(t)})}var w={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],S=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&S.push("srgba"),t.ext_color_buffer_half_float&&S.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&S.push("rgba32f");var j=["uint8"];t.oes_texture_half_float&&j.push("half float","float16"),t.oes_texture_float&&j.push("float","float32");var E=0,A={};return tt(w,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof m)return t}return null},create:g,createCube:_,clear:function(){wt(A).forEach(h)},restore:O})}function Ie(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yr,this.offset=0,this.stride=0,this.divisor=0}function De(e,t,n,r,o){for(var i=n.maxAttributes,a=new Array(i),u=0;u<i;++u)a[u]=new Ie;return{Record:Ie,scope:{},state:a}}function Ve(e,t,n,r){function o(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function i(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function a(n,r,o){var i=n===qr?s:l,a=i[r];if(!a){var u=t.str(r);a=e.createShader(n),e.shaderSource(a,u),e.compileShader(a),mt.shaderError(e,a,u,n,o),i[r]=a}return a}function u(e,t){this.id=y++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function f(n,u){var f,c,s=a(qr,n.fragId),l=a(Xr,n.vertId),p=n.program=e.createProgram();e.attachShader(p,s),e.attachShader(p,l),e.linkProgram(p),mt.linkError(e,p,t.str(n.fragId),t.str(n.vertId),u);var d=e.getProgramParameter(p,Hr);r.profile&&(n.stats.uniformsCount=d);var y=n.uniforms;for(f=0;f<d;++f)if(c=e.getActiveUniform(p,f))if(c.size>1)for(var m=0;m<c.size;++m){var b=c.name.replace("[0]","["+m+"]");i(y,new o(b,t.id(b),e.getUniformLocation(p,b),c))}else i(y,new o(c.name,t.id(c.name),e.getUniformLocation(p,c.name),c));var h=e.getProgramParameter(p,Wr);r.profile&&(n.stats.attributesCount=h);var v=n.attributes;for(f=0;f<h;++f)(c=e.getActiveAttrib(p,f))&&i(v,new o(c.name,t.id(c.name),e.getAttribLocation(p,c.name),c))}function c(){s={},l={};for(var e=0;e<d.length;++e)f(d[e])}var s={},l={},p={},d=[],y=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return d.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return d.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);wt(s).forEach(t),s={},wt(l).forEach(t),l={},d.forEach(function(t){e.deleteProgram(t.program)}),d.length=0,p={},n.shaderCount=0},program:function(e,t,r){mt.command(e>=0,"missing vertex shader",r),mt.command(t>=0,"missing fragment shader",r);var o=p[t];o||(o=p[t]={});var i=o[e];return i||(i=new u(t,e),n.shaderCount++,f(i,r),o[e]=i,d.push(i)),i},restore:c,shader:a,frag:-1,vert:-1}}function Ge(e,t,n,r,o,i){function a(a){var u;null===t.next?(mt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=$r):(mt(null!==t.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=t.next.colorAttachments[0].texture._texture.type,i.oes_texture_float?mt(u===$r||u===Zr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):mt(u===$r,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,c=0,s=r.framebufferWidth,l=r.framebufferHeight,p=null;et(a)?p=a:a&&(mt.type(a,"object","invalid arguments to regl.read()"),f=0|a.x,c=0|a.y,mt(f>=0&&f<r.framebufferWidth,"invalid x offset for regl.read"),mt(c>=0&&c<r.framebufferHeight,"invalid y offset for regl.read"),s=0|(a.width||r.framebufferWidth-f),l=0|(a.height||r.framebufferHeight-c),p=a.data||null),p&&(u===$r?mt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Zr&&mt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),mt(s>0&&s+f<=r.framebufferWidth,"invalid width for read pixels"),mt(l>0&&l+c<=r.framebufferHeight,"invalid height for read pixels"),n();var d=s*l*4;return p||(u===$r?p=new Uint8Array(d):u===Zr&&(p=p||new Float32Array(d))),mt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),mt(p.byteLength>=d,"data buffer for regl.read() too small"),e.pixelStorei(Qr,4),e.readPixels(f,c,s,l,Kr,u,p),p}function u(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=a(e)}),n}function f(e){return e&&"framebuffer"in e?u(e):a(e)}return f}function Ne(e,t,n,r){function o(){return c}function i(){var t=new u(e);return l[t.id]=t,n.vaoCount=s,c=t,t}function a(){wt(l).forEach(function(e){e&&"function"==typeof e.destroy&&e.destroy()})}function u(e){this.id=-1,this.handle=null,f&&(this.handle=f.createVertexArrayOES(),this.handle&&(this.id=s++)),this.bind=function(){f&&this.handle&&f.bindVertexArrayOES(this.handle)},this.unbind=function(){f&&f.bindVertexArrayOES(null)},this.destroy=function(){f&&this.handle&&(f.deleteVertexArrayOES(this.handle),s=Math.max(0,s-1),n.vaoCount=s,this.id=-1,this.handle=null)}}var f=t.oes_vertex_array_object,c=null,s=0,l={};return{getShared:o,hasSupport:Boolean(f),create:i,clear:a}}function Fe(e){return Array.prototype.slice.call(e)}function Be(e){return Fe(e).join("")}function Ue(){function e(e){for(var t=0;t<f.length;++t)if(f[t]===e)return u[t];var n="g"+a++;return u.push(n),f.push(e),n}function t(){function e(){n.push.apply(n,Fe(arguments))}function t(){var e="v"+a++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Fe(arguments)),n.push(";")),e}var n=[],r=[];return tt(e,{def:t,toString:function(){return Be([r.length>0?"var "+r+";":"",Be(n)])}})}function n(){function e(e,t){r(e,t,"=",n.def(e,t),";")}var n=t(),r=t(),o=n.toString,i=r.toString;return tt(function(){n.apply(n,Fe(arguments))},{def:n.def,entry:n,exit:r,save:e,set:function(t,r,o){e(t,r),n(t,r,"=",o,";")},toString:function(){return o()+i()}})}function r(){var e=Be(arguments),t=n(),r=n(),o=t.toString,i=r.toString;return tt(t,{then:function(){return t.apply(t,Fe(arguments)),this},else:function(){return r.apply(r,Fe(arguments)),this},toString:function(){var t=i();return t&&(t="else{"+t+"}"),Be(["if(",e,"){",o(),"}",t])}})}function o(e,t){function r(){var e="a"+o.length;return o.push(e),e}var o=[];t=t||0;for(var i=0;i<t;++i)r();var a=n(),u=a.toString;return s[e]=tt(a,{arg:r,toString:function(){return Be(["function(",o.join(),"){",u(),"}"])}})}function i(){var e=['"use strict";',c,"return {"];Object.keys(s).forEach(function(t){e.push('"',t,'":',s[t].toString(),",")}),e.push("}");var t=Be(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,u.concat(t)).apply(null,f)}var a=0,u=[],f=[],c=t(),s={};return{global:c,link:e,block:t,proc:o,scope:n,cond:r,compile:i}}function ze(e){return Array.isArray(e)||et(e)||$(e)}function Ye(e){return e.sort(function(e,t){return e===Io?-1:t===Io?1:e<t?-1:1})}function qe(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function Xe(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function He(e){return new qe(!1,!1,!1,e)}function We(e,t){var n=e.type;if(n===ro){var r=e.data.length;return new qe(!0,r>=1,r>=2,t)}if(n===uo){var o=e.data;return new qe(o.thisDep,o.contextDep,o.propDep,t)}return new qe(n===ao,n===io,n===oo,t)}function Ke(e,t,n,o,i,a,u,f,c,s,l,p,d,y,m,b){function h(e){return e.replace(".","_")}function v(e,t,n){var r=h(e);re.push(e),ne[r]=te[r]=!!n,oe[r]=t}function g(e,t,n){var r=h(e);re.push(e),Array.isArray(n)?(te[r]=n.slice(),ne[r]=n.slice()):te[r]=ne[r]=n,ie[r]=t}function _(){var e=Ue(),n=e.link,r=e.global;e.id=fe++,e.batchId="0";var o=n(ae),i=e.shared={props:"a0"};Object.keys(ae).forEach(function(e){i[e]=r.def(o,".",e)}),mt.optional(function(){e.CHECK=n(mt),e.commandStr=mt.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},ue.invalidBlendCombinations=Yi});var a=e.next={},u=e.current={};Object.keys(ie).forEach(function(e){Array.isArray(te[e])&&(a[e]=r.def(i.next,".",e),u[e]=r.def(i.current,".",e))});var f=e.constants={};Object.keys(ue).forEach(function(e){f[e]=r.def(JSON.stringify(ue[e]))}),e.invoke=function(t,r){switch(r.type){case ro:var o=["this",i.context,i.props,e.batchId];return t.def(n(r.data),".call(",o.slice(0,Math.max(r.data.length+1,4)),")");case oo:return t.def(i.props,r.data);case io:return t.def(i.context,r.data);case ao:return t.def("this",r.data);case uo:return r.data.append(e,t),r.data.ref}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var r=t.id(e);if(r in c)return c[r];var o=l.scope[r];return o||(o=l.scope[r]=new $),c[r]=n(o)},e}function O(e){var t,n=e.static,r=e.dynamic;if(Do in n){var o=!!n[Do];(t=He(function(e,t){return o})).enable=o}else if(Do in r){var i=r[Do];t=We(i,function(e,t){return e.invoke(t,i)})}return t}function w(e,t){var n=e.static,r=e.dynamic;if(Vo in n){var o=n[Vo];return o?(o=c.getFramebuffer(o),mt.command(o,"invalid framebuffer object"),He(function(e,t){var n=e.link(o),r=e.shared;t.set(r.framebuffer,".next",n);var i=r.context;return t.set(i,"."+qo,n+".width"),t.set(i,"."+Xo,n+".height"),n})):He(function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+qo,r+"."+Ko),t.set(r,"."+Xo,r+"."+$o),"null"})}if(Vo in r){var i=r[Vo];return We(i,function(e,t){var n=e.invoke(t,i),r=e.shared,o=r.framebuffer,a=t.def(o,".getFramebuffer(",n,")");mt.optional(function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")}),t.set(o,".next",a);var u=r.context;return t.set(u,"."+qo,a+"?"+a+".width:"+u+"."+Ko),t.set(u,"."+Xo,a+"?"+a+".height:"+u+"."+$o),a})}return null}function x(e,t,n){function r(e){if(e in o){var r=o[e];mt.commandType(r,"object","invalid "+e,n.commandStr);var a,u,f=!0,c=0|r.x,s=0|r.y;return"width"in r?(a=0|r.width,mt.command(a>=0,"invalid "+e,n.commandStr)):f=!1,"height"in r?(u=0|r.height,mt.command(u>=0,"invalid "+e,n.commandStr)):f=!1,new qe(!f&&t&&t.thisDep,!f&&t&&t.contextDep,!f&&t&&t.propDep,function(e,t){var n=e.shared.context,o=a;"width"in r||(o=t.def(n,".",qo,"-",c));var i=u;return"height"in r||(i=t.def(n,".",Xo,"-",s)),[c,s,o,i]})}if(e in i){var l=i[e],p=We(l,function(t,n){var r=t.invoke(n,l);mt.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)});var o=t.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",qo,"-",i,")"),f=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Xo,"-",a,")");return mt.optional(function(){t.assert(n,u+">=0&&"+f+">=0","invalid "+e)}),[i,a,u,f]});return t&&(p.thisDep=p.thisDep||t.thisDep,p.contextDep=p.contextDep||t.contextDep,p.propDep=p.propDep||t.propDep),p}return t?new qe(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",qo),t.def(n,".",Xo)]}):null}var o=e.static,i=e.dynamic,a=r(Io);if(a){var u=a;a=new qe(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=u.append(e,t),r=e.shared.context;return t.set(r,"."+Ho,n[2]),t.set(r,"."+Wo,n[3]),n})}return{viewport:a,scissor_box:r(ko)}}function S(e){function n(e){if(e in o){var n=t.id(o[e]);mt.optional(function(){p.shader(Hi[e],n,mt.guessCommand())});var r=He(function(){return n});return r.id=n,r}if(e in i){var a=i[e];return We(a,function(t,n){var r=t.invoke(n,a),o=n.def(t.shared.strings,".id(",r,")");return mt.optional(function(){n(t.shared.shader,".shader(",Hi[e],",",o,",",t.command,");")}),o})}return null}var r,o=e.static,i=e.dynamic,a=n(No),u=n(Go),f=null;return Xe(a)&&Xe(u)?(f=p.program(u.id,a.id),r=He(function(e,t){return e.link(f)})):r=new qe(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(e,t){var n,r=e.shared.shader;n=a?a.append(e,t):t.def(r,".",No);var o,i=r+".program("+(o=u?u.append(e,t):t.def(r,".",Go))+","+n;return mt.optional(function(){i+=","+e.command}),t.def(i+")")}),{frag:a,vert:u,progVar:r,program:f}}function j(e,t){function n(e,n){if(e in r){var a=0|r[e];return mt.command(!n||a>=0,"invalid "+e,t.commandStr),He(function(e,t){return n&&(e.OFFSET=a),a})}if(e in o){var u=o[e];return We(u,function(t,r){var o=t.invoke(r,u);return n&&(t.OFFSET=o,mt.optional(function(){t.assert(r,o+">=0","invalid "+e)})),o})}return n&&i?He(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,o=e.dynamic,i=function(){if(Fo in r){var e=r[Fo];ze(e)?e=u.getElements(u.create(e,!0)):e&&(e=u.getElements(e),mt.command(e,"invalid elements",t.commandStr));var n=He(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null});return n.value=e,n}if(Fo in o){var i=o[Fo];return We(i,function(e,t){var n=e.shared,r=n.isBufferArgs,o=n.elements,a=e.invoke(t,i),u=t.def("null"),f=t.def(r,"(",a,")"),c=e.cond(f).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return mt.optional(function(){e.assert(c.else,"!"+a+"||"+u,"invalid elements")}),t.entry(c),t.exit(e.cond(f).then(o,".destroyStream(",u,");")),e.ELEMENTS=u,u})}return null}(),a=n(zo,!0);return{elements:i,primitive:function(){if(Bo in r){var e=r[Bo];return mt.commandParameter(e,Ut,"invalid primitve",t.commandStr),He(function(t,n){return Ut[e]})}if(Bo in o){var n=o[Bo];return We(n,function(e,t){var r=e.constants.primTypes,o=e.invoke(t,n);return mt.optional(function(){e.assert(t,o+" in "+r,"invalid primitive, must be one of "+Object.keys(Ut))}),t.def(r,"[",o,"]")})}return i?Xe(i)?He(i.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return Li}):new qe(i.thisDep,i.contextDep,i.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Li)}):null}(),count:function(){if(Uo in r){var e=0|r[Uo];return mt.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),He(function(){return e})}if(Uo in o){var n=o[Uo];return We(n,function(e,t){var r=e.invoke(t,n);return mt.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(i){if(Xe(i)){if(i)return a?new qe(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return mt.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):He(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var u=He(function(){return-1});return mt.optional(function(){u.MISSING=!0}),u}var f=new qe(i.thisDep||a.thisDep,i.contextDep||a.contextDep,i.propDep||a.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")});return mt.optional(function(){f.DYNAMIC=!0}),f}return null}(),instances:n(Yo,!1),offset:a}}function E(e,t){var n=e.static,i=e.dynamic,a={};return re.forEach(function(e){function u(t,r){if(e in n){var o=t(n[e]);a[f]=He(function(){return o})}else if(e in i){var u=i[e];a[f]=We(u,function(e,t){return r(e,t,e.invoke(t,u))})}}var f=h(e);switch(e){case go:case co:case fo:case Lo:case yo:case Ro:case xo:case jo:case Eo:case ho:return u(function(n){return mt.commandType(n,"boolean",e,t.commandStr),n},function(t,n,r){return mt.optional(function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)}),r});case mo:return u(function(n){return mt.commandParameter(n,qi,"invalid "+e,t.commandStr),qi[n]},function(t,n,r){var o=t.constants.compareFuncs;return mt.optional(function(){t.assert(n,r+" in "+o,"invalid "+e+", must be one of "+Object.keys(qi))}),n.def(o,"[",r,"]")});case bo:return u(function(e){return mt.command(be(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,n){return mt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]});case po:return u(function(e){mt.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,o="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return mt.commandParameter(n,zi,f+".srcRGB",t.commandStr),mt.commandParameter(r,zi,f+".srcAlpha",t.commandStr),mt.commandParameter(o,zi,f+".dstRGB",t.commandStr),mt.commandParameter(i,zi,f+".dstAlpha",t.commandStr),mt.command(-1===Yi.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",t.commandStr),[zi[n],zi[o],zi[r],zi[i]]},function(t,n,r){function o(o,a){var u=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return mt.optional(function(){t.assert(n,u+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys(zi))}),u}var i=t.constants.blendFuncs;mt.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=o("src","RGB"),u=o("dst","RGB");mt.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[f,n.def(i,"[",u,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]});case lo:return u(function(n){return"string"==typeof n?(mt.commandParameter(n,Z,"invalid "+e,t.commandStr),[Z[n],Z[n]]):"object"===(void 0===n?"undefined":r(n))?(mt.commandParameter(n.rgb,Z,e+".rgb",t.commandStr),mt.commandParameter(n.alpha,Z,e+".alpha",t.commandStr),[Z[n.rgb],Z[n.alpha]]):void mt.commandRaise("invalid blend.equation",t.commandStr)},function(t,n,r){var o=t.constants.blendEquations,i=n.def(),a=n.def(),u=t.cond("typeof ",r,'==="string"');return mt.optional(function(){function n(e,n,r){t.assert(e,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(Z))}n(u.then,e,r),t.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(u.else,e+".rgb",r+".rgb"),n(u.else,e+".alpha",r+".alpha")}),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]});case so:return u(function(e){return mt.command(be(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),Q(4,function(t){return+e[t]})},function(e,t,n){return mt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),Q(4,function(e){return t.def("+",n,"[",e,"]")})});case Mo:return u(function(e){return mt.commandType(e,"number",f,t.commandStr),0|e},function(e,t,n){return mt.optional(function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")}),t.def(n,"|0")});case Po:return u(function(n){mt.commandType(n,"object",f,t.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return mt.commandParameter(r,qi,e+".cmp",t.commandStr),mt.commandType(o,"number",e+".ref",t.commandStr),mt.commandType(i,"number",e+".mask",t.commandStr),[qi[r],o,i]},function(e,t,n){var r=e.constants.compareFuncs;return mt.optional(function(){function o(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Di),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case To:case Co:return u(function(n){mt.commandType(n,"object",f,t.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return mt.commandParameter(r,Xi,e+".fail",t.commandStr),mt.commandParameter(o,Xi,e+".zfail",t.commandStr),mt.commandParameter(i,Xi,e+".zpass",t.commandStr),[e===Co?Pi:Mi,Xi[r],Xi[o],Xi[i]]},function(t,n,r){function o(o){return mt.optional(function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(Xi))}),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Di)}var i=t.constants.stencilOps;return mt.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[e===Co?Pi:Mi,o("fail"),o("zfail"),o("zpass")]});case So:return u(function(e){mt.commandType(e,"object",f,t.commandStr);var n=0|e.factor,r=0|e.units;return mt.commandType(n,"number",f+".factor",t.commandStr),mt.commandType(r,"number",f+".units",t.commandStr),[n,r]},function(t,n,r){return mt.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case _o:return u(function(e){var n=0;return"front"===e?n=Mi:"back"===e&&(n=Pi),mt.command(!!n,f,t.commandStr),n},function(e,t,n){return mt.optional(function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),t.def(n,'==="front"?',Mi,":",Pi)});case wo:return u(function(e){return mt.command("number"==typeof e&&e>=o.lineWidthDims[0]&&e<=o.lineWidthDims[1],"invalid line width, must positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],t.commandStr),e},function(e,t,n){return mt.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")}),n});case Oo:return u(function(e){return mt.commandParameter(e,Wi,f,t.commandStr),Wi[e]},function(e,t,n){return mt.optional(function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(n+'==="cw"?'+Ti+":"+Ci)});case vo:return u(function(e){return mt.command(be(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,n){return mt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),Q(4,function(e){return"!!"+n+"["+e+"]"})});case Ao:return u(function(e){mt.command("object"===(void 0===e?"undefined":r(e))&&e,f,t.commandStr);var n="value"in e?e.value:1,o=!!e.invert;return mt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,o]},function(e,t,n){return mt.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]})}}),a}function A(e,t){var n=e.static,r=e.dynamic,o={};return Object.keys(n).forEach(function(e){var r,i=n[e];if("number"==typeof i||"boolean"==typeof i)r=He(function(){return i});else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=He(function(e){return e.link(i)}):"framebuffer"===a||"framebufferCube"===a?(mt.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=He(function(e){return e.link(i.color[0])})):mt.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else be(i)?r=He(function(t){return t.global.def("[",Q(i.length,function(n){return mt.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+e,t.commandStr),i[n]}),"]")}):mt.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=i,o[e]=r}),Object.keys(r).forEach(function(e){var t=r[e];o[e]=We(t,function(e,n){return e.invoke(n,t)})}),o}function L(e,n){var o=e.static,i=e.dynamic,u={};return Object.keys(o).forEach(function(e){var i=o[e],f=t.id(e),c=new $;if(ze(i))c.state=to,c.buffer=a.getBuffer(a.create(i,Zo,!1,!0)),c.type=0;else{var s=a.getBuffer(i);if(s)c.state=to,c.buffer=s,c.type=0;else if(mt.command("object"===(void 0===i?"undefined":r(i))&&i,"invalid data for attribute "+e,n.commandStr),i.constant){var l=i.constant;c.buffer="null",c.state=no,"number"==typeof l?c.x=l:(mt.command(be(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+e,n.commandStr),Jr.forEach(function(e,t){t<l.length&&(c[e]=l[t])}))}else{s=ze(i.buffer)?a.getBuffer(a.create(i.buffer,Zo,!1,!0)):a.getBuffer(i.buffer),mt.command(!!s,'missing buffer for attribute "'+e+'"',n.commandStr);var p=0|i.offset;mt.command(p>=0,'invalid offset for attribute "'+e+'"',n.commandStr);var d=0|i.stride;mt.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',n.commandStr);var y=0|i.size;mt.command(!("size"in i)||y>0&&y<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',n.commandStr);var m=!!i.normalized,b=0;"type"in i&&(mt.commandParameter(i.type,Rt,"invalid type for attribute "+e,n.commandStr),b=Rt[i.type]);var h=0|i.divisor;"divisor"in i&&(mt.command(0===h||J,'cannot specify divisor for attribute "'+e+'", instancing not supported',n.commandStr),mt.command(h>=0,'invalid divisor for attribute "'+e+'"',n.commandStr)),mt.optional(function(){var t=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(n){mt.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",t)})}),c.buffer=s,c.state=to,c.size=y,c.normalized=m,c.type=b||s.dtype,c.offset=p,c.stride=d,c.divisor=h}}u[e]=He(function(e,t){var n=e.attribCache;if(f in n)return n[f];var r={isStream:!1};return Object.keys(c).forEach(function(e){r[e]=c[e]}),c.buffer&&(r.buffer=e.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[f]=r,r})}),Object.keys(i).forEach(function(e){function t(t,r){function o(e){r(c[e],"=",i,".",e,"|0;")}var i=t.invoke(r,n),a=t.shared,u=a.isBufferArgs,f=a.buffer;mt.optional(function(){t.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+u+"("+i+")||"+f+".getBuffer("+i+")||"+f+".getBuffer("+i+".buffer)||"+u+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+a.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')});var c={isStream:r.def(!1)},s=new $;s.state=to,Object.keys(s).forEach(function(e){c[e]=r.def(""+s[e])});var l=c.buffer,p=c.type;return r("if(",u,"(",i,")){",c.isStream,"=true;",l,"=",f,".createStream(",Zo,",",i,");",p,"=",l,".dtype;","}else{",l,"=",f,".getBuffer(",i,");","if(",l,"){",p,"=",l,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",no,";","if(typeof "+i+'.constant === "number"){',c[Jr[0]],"=",i,".constant;",Jr.slice(1).map(function(e){return c[e]}).join("="),"=0;","}else{",Jr.map(function(e,t){return c[e]+"="+i+".constant.length>="+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",u,"(",i,".buffer)){",l,"=",f,".createStream(",Zo,",",i,".buffer);","}else{",l,"=",f,".getBuffer(",i,".buffer);","}",p,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",l,".dtype;",c.normalized,"=!!",i,".normalized;"),o("size"),o("offset"),o("stride"),o("divisor"),r("}}"),r.exit("if(",c.isStream,"){",f,".destroyStream(",l,");","}"),c}var n=i[e];u[e]=We(n,t)}),u}function M(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=He(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=We(t,function(e,n){return e.invoke(n,t)})}),r}function P(e,t,n,r,o){function a(e){var t=s[e];t&&(p[e]=t)}var u=e.static,f=e.dynamic;mt.optional(function(){function e(e){Object.keys(e).forEach(function(e){mt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)})}var t=[Vo,Go,No,Fo,Bo,zo,Uo,Yo,Do].concat(re);e(u),e(f)});var c=w(e,o),s=x(e,c,o),l=j(e,o),p=E(e,o),d=S(e,o);a(Io),a(h(ko));var y=Object.keys(p).length>0,m={framebuffer:c,draw:l,shader:d,state:p,dirty:y};return m.profile=O(e,o),m.uniforms=A(n,o),m.attributes=L(t,o),m.context=M(r,o),Object.keys(t).length&&!i.getShared()&&i.hasSupport&&i.create(),m}function T(e,t,n){var r=e.shared.context,o=e.scope();Object.keys(n).forEach(function(i){t.save(r,"."+i);var a=n[i];o(r,".",i,"=",a.append(e,t),";")}),t(o)}function C(e,t,n,r){var o,i=e.shared,a=i.gl,u=i.framebuffer;ee&&(o=t.def(i.extensions,".webgl_draw_buffers"));var f,c=e.constants,s=c.drawBuffer,l=c.backBuffer;f=n?n.append(e,t):t.def(u,".next"),r||t("if(",f,"!==",u,".cur){"),t("if(",f,"){",a,".bindFramebuffer(",Bi,",",f,".framebuffer);"),ee&&t(o,".drawBuffersWEBGL(",s,"[",f,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Bi,",null);"),ee&&t(o,".drawBuffersWEBGL(",l,");"),t("}",u,".cur=",f,";"),r||t("}")}function R(e,t,n){var r=e.shared,o=r.gl,i=e.current,a=e.next,u=r.current,f=r.next,c=e.cond(u,".dirty");re.forEach(function(t){var r=h(t);if(!(r in n.state)){var s,l;if(r in a){s=a[r],l=i[r];var p=Q(te[r].length,function(e){return c.def(s,"[",e,"]")});c(e.cond(p.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(o,".",ie[r],"(",p,");",p.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"))}else{s=c.def(f,".",r);var d=e.cond(s,"!==",u,".",r);c(d),r in oe?d(e.cond(s).then(o,".enable(",oe[r],");").else(o,".disable(",oe[r],");"),u,".",r,"=",s,";"):d(o,".",ie[r],"(",s,");",u,".",r,"=",s,";")}}}),0===Object.keys(n.state).length&&c(u,".dirty=false;"),t(c)}function k(e,t,n,r){var o=e.shared,i=e.current,a=o.current,u=o.gl;Ye(Object.keys(n)).forEach(function(o){var f=n[o];if(!r||r(f)){var c=f.append(e,t);if(oe[o]){var s=oe[o];Xe(f)?c?t(u,".enable(",s,");"):t(u,".disable(",s,");"):t(e.cond(c).then(u,".enable(",s,");").else(u,".disable(",s,");")),t(a,".",o,"=",c,";")}else if(be(c)){var l=i[o];t(u,".",ie[o],"(",c,");",c.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";")}else t(u,".",ie[o],"(",c,");",a,".",o,"=",c,";")}})}function I(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function D(e,t,n,r,o){function i(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(e){e(c=t.def(),"=",i(),";"),"string"==typeof o?e(d,".count+=",o,";"):e(d,".count++;"),m&&(r?e(s=t.def(),"=",b,".getNumPendingQueries();"):e(b,".beginQuery(",d,");"))}function u(e){e(d,".cpuTime+=",i(),"-",c,";"),m&&(r?e(b,".pushScopeStats(",s,",",b,".getNumPendingQueries(),",d,");"):e(b,".endQuery();"))}function f(e){var n=t.def(y,".profile");t(y,".profile=",e,";"),t.exit(y,".profile=",n,";")}var c,s,l,p=e.shared,d=e.stats,y=p.current,b=p.timer,h=n.profile;if(h){if(Xe(h))return void(h.enable?(a(t),u(t.exit),f("true")):f("false"));f(l=h.append(e,t))}else l=t.def(y,".profile");var v=e.block();a(v),t("if(",l,"){",v,"}");var g=e.block();u(g),t.exit("if(",l,"){",g,"}")}function V(e,t,n,r,o){function i(e){switch(e){case pi:case bi:case _i:return 2;case di:case hi:case Oi:return 3;case yi:case vi:case wi:return 4;default:return 1}}function a(n,r,o){function i(){t("if(!",s,".buffer){",f,".enableVertexAttribArray(",c,");}");var n,i=o.type;if(n=o.size?t.def(o.size,"||",r):r,t("if(",s,".type!==",i,"||",s,".size!==",n,"||",y.map(function(e){return s+"."+e+"!=="+o[e]}).join("||"),"){",f,".bindBuffer(",Zo,",",p,".buffer);",f,".vertexAttribPointer(",[c,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",y.map(function(e){return s+"."+e+"="+o[e]+";"}).join(""),"}"),J){var a=o.divisor;t("if(",s,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[c,a],");",s,".divisor=",a,";}")}}function a(){t("if(",s,".buffer){",f,".disableVertexAttribArray(",c,");","}if(",Jr.map(function(e,t){return s+"."+e+"!=="+d[t]}).join("||"),"){",f,".vertexAttrib4f(",c,",",d,");",Jr.map(function(e,t){return s+"."+e+"="+d[t]+";"}).join(""),"}")}var f=u.gl,c=t.def(n,".location"),s=t.def(u.attributes,"[",c,"]"),l=o.state,p=o.buffer,d=[o.x,o.y,o.z,o.w],y=["buffer","normalized","offset","stride"];l===to?i():l===no?a():(t("if(",l,"===",to,"){"),i(),t("}else{"),a(),t("}"))}var u=e.shared,f=u.vao;f&&t("if(",f,"&&",f,".getShared()){",f,".getShared().bind(); }"),r.forEach(function(r){var u,f=r.name,c=n.attributes[f];if(c){if(!o(c))return;u=c.append(e,t)}else{if(!o(Ki))return;var s=e.scopeAttrib(f);mt.optional(function(){e.assert(t,s+".state","missing attribute "+f)}),u={},Object.keys(new $).forEach(function(e){u[e]=t.def(s,".",e)})}a(e.link(r),i(r.info.type),u)})}function G(e,n,r,o,i){for(var a,u=e.shared,f=u.gl,c=0;c<o.length;++c){var s,l=o[c],p=l.name,d=l.info.type,y=r.uniforms[p],m=e.link(l)+".location";if(y){if(!i(y))continue;if(Xe(y)){var b=y.value;if(mt.command(null!==b&&void 0!==b,'missing uniform "'+p+'"',e.commandStr),d===Ei||d===Ai){mt.command("function"==typeof b&&(d===Ei&&("texture2d"===b._reglType||"framebuffer"===b._reglType)||d===Ai&&("textureCube"===b._reglType||"framebufferCube"===b._reglType)),"invalid texture for uniform "+p,e.commandStr);var h=e.link(b._texture||b.color[0]._texture);n(f,".uniform1i(",m,",",h+".bind());"),n.exit(h,".unbind();")}else if(d===xi||d===Si||d===ji){mt.optional(function(){mt.command(be(b),"invalid matrix for uniform "+p,e.commandStr),mt.command(d===xi&&4===b.length||d===Si&&9===b.length||d===ji&&16===b.length,"invalid length for matrix uniform "+p,e.commandStr)});var v=e.global.def("new Float32Array(["+Array.prototype.slice.call(b)+"])"),g=2;d===Si?g=3:d===ji&&(g=4),n(f,".uniformMatrix",g,"fv(",m,",false,",v,");")}else{switch(d){case li:mt.commandType(b,"number","uniform "+p,e.commandStr),a="1f";break;case pi:mt.command(be(b)&&2===b.length,"uniform "+p,e.commandStr),a="2f";break;case di:mt.command(be(b)&&3===b.length,"uniform "+p,e.commandStr),a="3f";break;case yi:mt.command(be(b)&&4===b.length,"uniform "+p,e.commandStr),a="4f";break;case gi:mt.commandType(b,"boolean","uniform "+p,e.commandStr),a="1i";break;case mi:mt.commandType(b,"number","uniform "+p,e.commandStr),a="1i";break;case _i:case bi:mt.command(be(b)&&2===b.length,"uniform "+p,e.commandStr),a="2i";break;case Oi:case hi:mt.command(be(b)&&3===b.length,"uniform "+p,e.commandStr),a="3i";break;case wi:case vi:mt.command(be(b)&&4===b.length,"uniform "+p,e.commandStr),a="4i"}n(f,".uniform",a,"(",m,",",be(b)?Array.prototype.slice.call(b):b,");")}continue}s=y.append(e,n)}else{if(!i(Ki))continue;s=n.def(u.uniforms,"[",t.id(p),"]")}d===Ei?n("if(",s,"&&",s,'._reglType==="framebuffer"){',s,"=",s,".color[0];","}"):d===Ai&&n("if(",s,"&&",s,'._reglType==="framebufferCube"){',s,"=",s,".color[0];","}"),mt.optional(function(){function t(t,r){e.assert(n,t,'bad data or missing for uniform "'+p+'".  '+r)}function r(e){t("typeof "+s+'==="'+e+'"',"invalid type, expected "+e)}function o(n,r){t(u.isArrayLike+"("+s+")&&"+s+".length==="+n,"invalid vector, should have length "+n,e.commandStr)}function i(n){t("typeof "+s+'==="function"&&'+s+'._reglType==="texture'+(n===ei?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(d){case mi:r("number");break;case bi:o(2,"number");break;case hi:o(3,"number");break;case vi:o(4,"number");break;case li:r("number");break;case pi:o(2,"number");break;case di:o(3,"number");break;case yi:o(4,"number");break;case gi:r("boolean");break;case _i:o(2,"boolean");break;case Oi:o(3,"boolean");break;case wi:o(4,"boolean");break;case xi:o(4,"number");break;case Si:o(9,"number");break;case ji:o(16,"number");break;case Ei:i(ei);break;case Ai:i(ti)}});var _=1;switch(d){case Ei:case Ai:var O=n.def(s,"._texture");n(f,".uniform1i(",m,",",O,".bind());"),n.exit(O,".unbind();");continue;case mi:case gi:a="1i";break;case bi:case _i:a="2i",_=2;break;case hi:case Oi:a="3i",_=3;break;case vi:case wi:a="4i",_=4;break;case li:a="1f";break;case pi:a="2f",_=2;break;case di:a="3f",_=3;break;case yi:a="4f",_=4;break;case xi:a="Matrix2fv";break;case Si:a="Matrix3fv";break;case ji:a="Matrix4fv"}if(n(f,".uniform",a,"(",m,","),"M"===a.charAt(0)){var w=Math.pow(d-xi+2,2),x=e.global.def("new Float32Array(",w,")");n("false,(Array.isArray(",s,")||",s," instanceof Float32Array)?",s,":(",Q(w,function(e){return x+"["+e+"]="+s+"["+e+"]"}),",",x,")")}else n(_>1?Q(_,function(e){return s+"["+e+"]"}):s);n(");")}}function N(e,t,n,r){function o(o){var i=l[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(e,n):i.append(e,t):t.def(c,".",o)}function i(){function e(){n(h,".drawElementsInstancedANGLE(",[d,m,v,y+"<<(("+v+"-"+eo+")>>1)",b],");")}function t(){n(h,".drawArraysInstancedANGLE(",[d,y,m,b],");")}p?g?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}function a(){function e(){n(f+".drawElements("+[d,m,v,y+"<<(("+v+"-"+eo+")>>1)"]+");")}function t(){n(f+".drawArrays("+[d,y,m]+");")}p?g?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}var u=e.shared,f=u.gl,c=u.draw,s=u.vao,l=r.draw,p=function(){var o,i=l.elements,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),o=i.append(e,a)):o=a.def(c,".",Fo),o&&a("if("+o+")"+f+".bindBuffer("+Jo+","+o+".buffer.buffer);"),o}(),d=o(Bo),y=o(zo),m=function(){var o,i=l.count,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),o=i.append(e,a),mt.optional(function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(a,o+">=0","missing vertex count")})):(o=a.def(c,".",Uo),mt.optional(function(){e.assert(a,o+">=0","missing vertex count")})),o}();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");var b,h;J&&(b=o(Yo),h=e.instancing);var v=p+".type",g=l.elements&&Xe(l.elements);s&&t("if(",s,"&&",s,".getShared()){",s,".getShared().bind(); }"),J&&("number"!=typeof b||b>=0)?"string"==typeof b?(n("if(",b,">0){"),i(),n("}else if(",b,"<0){"),a(),n("}")):i():a(),s&&t("if(",s,"&&",s,".getShared()){",s,".getShared().unbind(); }")}function F(e,t,n,r,o){var i=_(),a=i.proc("body",o);return mt.optional(function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr)}),J&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),e(i,a,n,r),i.compile().body}function B(e,t,n,r){I(e,t),V(e,t,n,r.attributes,function(){return!0}),G(e,t,n,r.uniforms,function(){return!0}),N(e,t,t,n)}function U(e,t){var n=e.proc("draw",1);I(e,n),T(e,n,t.context),C(e,n,t.framebuffer),R(e,n,t),k(e,n,t.state),D(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)B(e,n,t,t.shader.program);else{var o=e.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",e.link(function(n){return F(B,e,t,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function z(e,t,n,r){function o(){return!0}e.batchId="a1",I(e,t),V(e,t,n,r.attributes,o),G(e,t,n,r.uniforms,o),N(e,t,t,n)}function Y(e,t,n,r){function o(e){return e.contextDep&&a||e.propDep}function i(e){return!o(e)}I(e,t);var a=n.contextDep,u=t.def(),f=t.def();e.shared.props=f,e.batchId=u;var c=e.scope(),s=e.scope();if(t(c.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",f,"=","a0","[",u,"];",s,"}",c.exit),n.needsContext&&T(e,s,n.context),n.needsFramebuffer&&C(e,s,n.framebuffer),k(e,s,n.state,o),n.profile&&o(n.profile)&&D(e,s,n,!1,!0),r)V(e,c,n,r.attributes,i),V(e,s,n,r.attributes,o),G(e,c,n,r.uniforms,i),G(e,s,n,r.uniforms,o),N(e,c,s,n);else{var l=e.global.def("{}"),p=n.shader.progVar.append(e,s),d=s.def(p,".id"),y=s.def(l,"[",d,"]");s(e.shared.gl,".useProgram(",p,".program);","if(!",y,"){",y,"=",l,"[",d,"]=",e.link(function(t){return F(z,e,n,t,2)}),"(",p,");}",y,".call(this,a0[",u,"],",u,");")}}function q(e,t){function n(e){return e.contextDep&&o||e.propDep}var r=e.proc("batch",2);e.batchId="0",I(e,r);var o=!1,i=!0;Object.keys(t.context).forEach(function(e){o=o||t.context[e].propDep}),o||(T(e,r,t.context),i=!1);var a=t.framebuffer,u=!1;a?(a.propDep?o=u=!0:a.contextDep&&o&&(u=!0),u||C(e,r,a)):C(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(o=!0),R(e,r,t),k(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||D(e,r,t,!1,"a1"),t.contextDep=o,t.needsContext=i,t.needsFramebuffer=u;var f=t.shader.progVar;if(f.contextDep&&o||f.propDep)Y(e,r,t,null);else{var c=f.append(e,r);if(r(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)Y(e,r,t,t.shader.program);else{var s=e.global.def("{}"),l=r.def(c,".id"),p=r.def(s,"[",l,"]");r(e.cond(p).then(p,".call(this,a0,a1);").else(p,"=",s,"[",l,"]=",e.link(function(n){return F(Y,e,t,n,2)}),"(",c,");",p,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}function X(e,n){function r(t){var r=n.shader[t];r&&o.set(i.shader,"."+t,r.append(e,o))}var o=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;T(e,o,n.context),n.framebuffer&&n.framebuffer.append(e,o),Ye(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,o);be(r)?r.forEach(function(n,r){o.set(e.next[t],"["+r+"]",n)}):o.set(i.next,"."+t,r)}),D(e,o,n,!0,!0),[Fo,zo,Uo,Yo,Bo].forEach(function(t){var r=n.draw[t];r&&o.set(i.draw,"."+t,""+r.append(e,o))}),Object.keys(n.uniforms).forEach(function(r){o.set(i.uniforms,"["+t.id(r)+"]",n.uniforms[r].append(e,o))}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,o),i=e.scopeAttrib(t);Object.keys(new $).forEach(function(e){o.set(i,"."+e,r[e])})}),r(Go),r(No),Object.keys(n.state).length>0&&(o(a,".dirty=true;"),o.exit(a,".dirty=true;")),o("a1(",e.shared.context,",a0,",e.batchId,");")}function H(e){if("object"===(void 0===e?"undefined":r(e))&&!be(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(vt.isDynamic(e[t[n]]))return!0;return!1}}function W(e,t,n){function o(e,t){u.forEach(function(n){var r=i[n];if(vt.isDynamic(r)){var o=e.invoke(t,r);t(l,".",n,"=",o,";")}})}var i=t.static[n];if(i&&H(i)){var a=e.global,u=Object.keys(i),f=!1,c=!1,s=!1,l=e.global.def("{}");u.forEach(function(t){var n=i[t];if(vt.isDynamic(n)){"function"==typeof n&&(n=i[t]=vt.unbox(n));var o=We(n,null);f=f||o.thisDep,s=s||o.propDep,c=c||o.contextDep}else{switch(a(l,".",t,"="),void 0===n?"undefined":r(n)){case"number":a(n);break;case"string":a('"',n,'"');break;case"object":Array.isArray(n)&&a("[",n.join(),"]");break;default:a(e.link(n))}a(";")}}),t.dynamic[n]=new vt.DynamicVariable(uo,{thisDep:f,contextDep:c,propDep:s,ref:l,append:o}),delete t.static[n]}}function K(e,t,n,r,o){var i=_();i.stats=i.link(o),Object.keys(t.static).forEach(function(e){W(i,t,e)}),Qo.forEach(function(t){W(i,e,t)});var a=P(e,t,n,r,i);return U(i,a),X(i,a),q(i,a),i.compile()}var $=l.Record,Z={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(Z.min=Ri,Z.max=ki);var J=n.angle_instanced_arrays,ee=n.webgl_draw_buffers,te={dirty:!0,profile:b.profile},ne={},re=[],oe={},ie={};v(fo,oi),v(co,ri),g(so,"blendColor",[0,0,0,0]),g(lo,"blendEquationSeparate",[Ni,Ni]),g(po,"blendFuncSeparate",[Gi,Vi,Gi,Vi]),v(yo,ai,!0),g(mo,"depthFunc",Fi),g(bo,"depthRange",[0,1]),g(ho,"depthMask",!0),g(vo,vo,[!0,!0,!0,!0]),v(go,ni),g(_o,"cullFace",Pi),g(Oo,Oo,Ci),g(wo,wo,1),v(xo,fi),g(So,"polygonOffset",[0,0]),v(jo,ci),v(Eo,si),g(Ao,"sampleCoverage",[1,!1]),v(Lo,ii),g(Mo,"stencilMask",-1),g(Po,"stencilFunc",[Ii,0,-1]),g(To,"stencilOpSeparate",[Mi,Di,Di,Di]),g(Co,"stencilOpSeparate",[Pi,Di,Di,Di]),v(Ro,ui),g(ko,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),g(Io,Io,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ae={gl:e,context:y,strings:t,next:ne,current:te,draw:d,elements:u,vao:i,buffer:a,shader:p,attributes:l.state,uniforms:s,framebuffer:c,extensions:n,timer:m,isBufferArgs:ze},ue={primTypes:Ut,compareFuncs:qi,blendFuncs:zi,blendEquations:Z,stencilOps:Xi,glTypes:Rt,orientationType:Wi};mt.optional(function(){ae.isArrayLike=be}),ee&&(ue.backBuffer=[Pi],ue.drawBuffer=Q(o.maxDrawbuffers,function(e){return 0===e?[0]:Q(e,function(e){return Ui+e})}));var fe=0;return{next:ne,current:te,compile:K,procs:function(){var t=_(),n=t.proc("poll"),r=t.proc("refresh"),i=t.block();n(i),r(i);var a=t.shared,u=a.gl,f=a.next,c=a.current;i(c,".dirty=false;"),C(t,n),C(t,r,null,!0);var s,l=e.getExtension("angle_instanced_arrays");l&&(s=t.link(l));for(var p=0;p<o.maxAttributes;++p){var d=r.def(a.attributes,"[",p,"]"),y=t.cond(d,".buffer");y.then(u,".enableVertexAttribArray(",p,");",u,".bindBuffer(",Zo,",",d,".buffer.buffer);",u,".vertexAttribPointer(",p,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(u,".disableVertexAttribArray(",p,");",u,".vertexAttrib4f(",p,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),r(y),l&&r(s,".vertexAttribDivisorANGLE(",p,",",d,".divisor);")}return Object.keys(oe).forEach(function(e){var o=oe[e],a=i.def(f,".",e),s=t.block();s("if(",a,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",c,".",e,"=",a,";"),r(s),n("if(",a,"!==",c,".",e,"){",s,"}")}),Object.keys(ie).forEach(function(e){var o,a,s=ie[e],l=te[e],p=t.block();if(p(u,".",s,"("),be(l)){var d=l.length;o=t.global.def(f,".",e),a=t.global.def(c,".",e),p(Q(d,function(e){return o+"["+e+"]"}),");",Q(d,function(e){return a+"["+e+"]="+o+"["+e+"];"}).join("")),n("if(",Q(d,function(e){return o+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",p,"}")}else o=i.def(f,".",e),a=i.def(c,".",e),p(o,");",c,".",e,"=",o,";"),n("if(",o,"!==",a,"){",p,"}");r(p)}),t.compile()}()}}function $e(){return{bufferCount:0,vaoCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Qe(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function Ze(e){function t(){if(0===X.length)return j&&j.update(),void(Z=null);Z=gt.next(t),d();for(var e=X.length-1;e>=0;--e){var n=X[e];n&&n(M,null,0)}v.flush(),j&&j.update()}function n(){!Z&&X.length>0&&(Z=gt.next(t))}function o(){Z&&(gt.cancel(t),Z=null)}function i(e){e.preventDefault(),_=!0,o(),H.forEach(function(e){e()})}function a(e){v.getError(),_=!1,O.restore(),V.restore(),k.restore(),G.restore(),N.restore(),F.restore(),j&&j.restore(),U.procs.refresh(),n(),$.forEach(function(e){e()})}function u(){X.length=0,o(),q&&(q.removeEventListener(oa,i),q.removeEventListener(ia,a)),V.clear(),F.clear(),N.clear(),G.clear(),I.clear(),k.clear(),R.clear(),j&&j.clear(),Q.forEach(function(e){e()})}function f(e){function t(e){var t={},n={};return Object.keys(e).forEach(function(r){var o=e[r];vt.isDynamic(o)?n[r]=vt.unbox(o,r):t[r]=o}),{dynamic:n,static:t}}function n(e){for(;d.length<e;)d.push(null);return d}function r(e,t){var r;if(_&&mt.raise("context lost"),"function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(r=0;r<e;++r)p.call(this,null,t,r);return}if(Array.isArray(e)){for(r=0;r<e.length;++r)p.call(this,e[r],t,r);return}return p.call(this,e,t,0)}if("number"==typeof e){if(e>0)return l.call(this,n(0|e),0|e)}else{if(!Array.isArray(e))return s.call(this,e);if(e.length)return l.call(this,e,e.length)}}mt(!!e,"invalid args to regl({...})"),mt.type(e,"object","invalid args to regl({...})");var o=t(e.context||{}),i=t(e.uniforms||{}),a=t(e.attributes||{}),u=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=tt({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}(e)),f={gpuTime:0,cpuTime:0,count:0},c=U.compile(u,a,i,o,f),s=c.draw,l=c.batch,p=c.scope,d=[];return tt(r,{stats:f})}function c(e,t){var n=0;U.procs.poll();var r=t.color;r&&(v.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=ea),"depth"in t&&(v.clearDepth(+t.depth),n|=ta),"stencil"in t&&(v.clearStencil(0|t.stencil),n|=na),mt(!!n,"called regl.clear with no buffer specified"),v.clear(n)}function s(e){if(mt("object"===(void 0===e?"undefined":r(e))&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)J(tt({framebuffer:e.framebuffer.faces[t]},e),c);else J(e,c);else c(null,e)}function l(e){function t(){function t(){var e=Qe(X,t);X[e]=X[X.length-1],X.length-=1,X.length<=0&&o()}var n=Qe(X,e);mt(n>=0,"cannot cancel a frame twice"),X[n]=t}return mt.type(e,"function","regl.frame() callback must be a function"),X.push(e),n(),{cancel:t}}function p(){var e=Y.viewport,t=Y.scissor_box;e[0]=e[1]=t[0]=t[1]=0,M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=e[2]=t[2]=v.drawingBufferWidth,M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=e[3]=t[3]=v.drawingBufferHeight}function d(){M.tick+=1,M.time=m(),p(),U.procs.poll()}function y(){p(),U.procs.refresh(),j&&j.update()}function m(){return(_t()-E)/1e3}function b(e,t){mt.type(t,"function","listener callback must be a function");var n;switch(e){case"frame":return l(t);case"lost":n=H;break;case"restore":n=$;break;case"destroy":n=Q;break;default:mt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}var h=W(e);if(!h)return null;var v=h.gl,g=v.getContextAttributes(),_=v.isContextLost(),O=K(v,h);if(!O)return null;var w=B(),x=$e(),S=O.extensions,j=Ji(v,S),E=_t(),A=v.drawingBufferWidth,L=v.drawingBufferHeight,M={tick:0,time:0,viewportWidth:A,viewportHeight:L,framebufferWidth:A,framebufferHeight:L,drawingBufferWidth:A,drawingBufferHeight:L,pixelRatio:h.pixelRatio},P={},T={elements:null,primitive:4,count:-1,offset:0,instances:-1},C=Ot(v,S),R=Ne(v,S,x,h),k=de(v,x,h),I=ye(v,S,k,x),D=De(v,S,C,k,w),V=Ve(v,w,x,h),G=Ce(v,S,C,function(){U.procs.poll()},M,x,h),N=jr(v,S,C,x,h),F=ke(v,S,C,G,N,x),U=Ke(v,w,S,C,R,k,I,G,F,P,D,V,T,M,j,h),z=Ge(v,F,U.procs.poll,M,g,S),Y=U.next,q=v.canvas,X=[],H=[],$=[],Q=[h.onDestroy],Z=null;q&&(q.addEventListener(oa,i,!1),q.addEventListener(ia,a,!1));var J=F.setFBO=f({framebuffer:vt.define.call(null,aa,"framebuffer")});y();var ee=tt(f,{clear:s,prop:vt.define.bind(null,aa),context:vt.define.bind(null,ua),this:vt.define.bind(null,fa),draw:f({}),buffer:function(e){return k.create(e,ra,!1,!1)},elements:function(e){return I.create(e,!1)},texture:G.create2D,cube:G.createCube,renderbuffer:N.create,framebuffer:F.create,framebufferCube:F.createCube,attributes:g,frame:l,on:b,limits:C,hasExtension:function(e){return C.extensions.indexOf(e.toLowerCase())>=0},read:z,destroy:u,_gl:v,_refresh:y,poll:function(){d(),j&&j.update()},now:m,stats:x});return h.onDone(null,ee),ee}var Je={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},et=function(e){return Object.prototype.toString.call(e)in Je},tt=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},nt=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],rt=33071,ot=9728,it=9984,at=9985,ut=9986,ft=9987,ct=5126,st=32819,lt=32820,pt=33635,dt=34042,yt={};yt[5120]=yt[5121]=1,yt[5122]=yt[5123]=yt[36193]=yt[pt]=yt[st]=yt[lt]=2,yt[5124]=yt[5125]=yt[ct]=yt[dt]=4;var mt=tt(n,{optional:L,raise:t,commandRaise:S,command:j,parameter:i,commandParameter:E,constructor:s,type:u,commandType:A,isTypedArray:a,nni:f,oneOf:c,shaderError:_,linkError:O,callSite:b,saveCommandRef:w,saveDrawInfo:x,framebufferFormat:M,guessCommand:m,texture2D:C,textureCube:R}),bt=0,ht=0,vt={DynamicVariable:k,define:G,isDynamic:N,unbox:F,accessor:V},gt={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},_t="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Ot=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,o=1;return t.webgl_draw_buffers&&(r=e.getParameter(34852),o=e.getParameter(36063)),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938)}},wt=function(e){return Object.keys(e).map(function(t){return e[t]})},xt=5120,St=5121,jt=5122,Et=5123,At=5124,Lt=5125,Mt=5126,Pt=Q(8,function(){return[]}),Tt={alloc:ee,free:te,allocType:ne,freeType:re},Ct={shape:ce,flatten:fe},Rt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},kt={dynamic:35048,stream:35040,static:35044},It=Ct.flatten,Dt=Ct.shape,Vt=35044,Gt=35040,Nt=5121,Ft=5126,Bt=[];Bt[5120]=1,Bt[5122]=2,Bt[5124]=4,Bt[5121]=1,Bt[5123]=2,Bt[5125]=4,Bt[5126]=4;var Ut={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},zt=0,Yt=1,qt=4,Xt=5120,Ht=5121,Wt=5122,Kt=5123,$t=5124,Qt=5125,Zt=34963,Jt=35040,en=35044,tn=new Float32Array(1),nn=new Uint32Array(tn.buffer),rn=5123,on=34467,an=3553,un=34067,fn=34069,cn=6408,sn=6406,ln=6407,pn=6409,dn=6410,yn=32854,mn=32855,bn=36194,hn=32819,vn=32820,gn=33635,_n=34042,On=6402,wn=34041,xn=35904,Sn=35906,jn=36193,En=33776,An=33777,Ln=33778,Mn=33779,Pn=35986,Tn=35987,Cn=34798,Rn=35840,kn=35841,In=35842,Dn=35843,Vn=36196,Gn=5121,Nn=5123,Fn=5125,Bn=5126,Un=10242,zn=10243,Yn=10497,qn=33071,Xn=33648,Hn=10240,Wn=10241,Kn=9728,$n=9729,Qn=9984,Zn=9985,Jn=9986,er=9987,tr=33170,nr=4352,rr=4353,or=4354,ir=34046,ar=3317,ur=37440,fr=37441,cr=37443,sr=37444,lr=33984,pr=[Qn,Jn,Zn,er],dr=[0,pn,dn,ln,cn],yr={};yr[pn]=yr[sn]=yr[On]=1,yr[wn]=yr[dn]=2,yr[ln]=yr[xn]=3,yr[cn]=yr[Sn]=4;var mr=he("HTMLCanvasElement"),br=he("CanvasRenderingContext2D"),hr=he("HTMLImageElement"),vr=he("HTMLVideoElement"),gr=Object.keys(Je).concat([mr,br,hr,vr]),_r=[];_r[Gn]=1,_r[Bn]=4,_r[jn]=2,_r[Nn]=2,_r[Fn]=4;var Or=[];Or[yn]=2,Or[mn]=2,Or[bn]=2,Or[wn]=4,Or[En]=.5,Or[An]=.5,Or[Ln]=1,Or[Mn]=1,Or[Pn]=.5,Or[Tn]=1,Or[Cn]=1,Or[Rn]=.5,Or[kn]=.25,Or[In]=.5,Or[Dn]=.25,Or[Vn]=.5;var wr=36161,xr=32854,Sr=[];Sr[xr]=2,Sr[32855]=2,Sr[36194]=2,Sr[33189]=2,Sr[36168]=1,Sr[34041]=4,Sr[35907]=4,Sr[34836]=16,Sr[34842]=8,Sr[34843]=6;var jr=function(e,t,n,o,i){function a(e){this.id=p++,this.refCount=1,this.renderbuffer=e,this.format=xr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function u(t){var n=t.renderbuffer;mt(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(wr,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete d[t.id],o.renderbufferCount--}function f(t,u){function f(t,o){var a=0,u=0,c=xr;if("object"===(void 0===t?"undefined":r(t))&&t){var d=t;if("shape"in d){var y=d.shape;mt(Array.isArray(y)&&y.length>=2,"invalid renderbuffer shape"),a=0|y[0],u=0|y[1]}else"radius"in d&&(a=u=0|d.radius),"width"in d&&(a=0|d.width),"height"in d&&(u=0|d.height);"format"in d&&(mt.parameter(d.format,s,"invalid renderbuffer format"),c=s[d.format])}else"number"==typeof t?(a=0|t,u="number"==typeof o?0|o:a):t?mt.raise("invalid arguments to renderbuffer constructor"):a=u=1;if(mt(a>0&&u>0&&a<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),a!==p.width||u!==p.height||c!==p.format)return f.width=p.width=a,f.height=p.height=u,p.format=c,e.bindRenderbuffer(wr,p.renderbuffer),e.renderbufferStorage(wr,c,a,u),i.profile&&(p.stats.size=Re(p.format,p.width,p.height)),f.format=l[p.format],f}function c(t,r){var o=0|t,a=0|r||o;return o===p.width&&a===p.height?f:(mt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=p.width=o,f.height=p.height=a,e.bindRenderbuffer(wr,p.renderbuffer),e.renderbufferStorage(wr,p.format,o,a),i.profile&&(p.stats.size=Re(p.format,p.width,p.height)),f)}var p=new a(e.createRenderbuffer());return d[p.id]=p,o.renderbufferCount++,f(t,u),f.resize=c,f._reglType="renderbuffer",f._renderbuffer=p,i.profile&&(f.stats=p.stats),f.destroy=function(){p.decRef()},f}function c(){wt(d).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(wr,t.renderbuffer),e.renderbufferStorage(wr,t.format,t.width,t.height)}),e.bindRenderbuffer(wr,null)}var s={rgba4:xr,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(e){var t=s[e];l[t]=e});var p=0,d={};return a.prototype.decRef=function(){--this.refCount<=0&&u(this)},i.profile&&(o.getTotalRenderbufferSize=function(){var e=0;return Object.keys(d).forEach(function(t){e+=d[t].stats.size}),e}),{create:f,clear:function(){wt(d).forEach(u)},restore:c}},Er=36160,Ar=36161,Lr=3553,Mr=34069,Pr=36064,Tr=36096,Cr=36128,Rr=33306,kr=36053,Ir=6402,Dr=[6408],Vr=[];Vr[6408]=4;var Gr=[];Gr[5121]=1,Gr[5126]=4,Gr[36193]=2;var Nr=33189,Fr=36168,Br=34041,Ur=[32854,32855,36194,35907,34842,34843,34836],zr={};zr[kr]="complete",zr[36054]="incomplete attachment",zr[36057]="incomplete dimensions",zr[36055]="incomplete, missing attachment",zr[36061]="unsupported";var Yr=5126,qr=35632,Xr=35633,Hr=35718,Wr=35721,Kr=6408,$r=5121,Qr=3333,Zr=5126,Jr="xyzw".split(""),eo=5121,to=1,no=2,ro=0,oo=1,io=2,ao=3,uo=4,fo="dither",co="blend.enable",so="blend.color",lo="blend.equation",po="blend.func",yo="depth.enable",mo="depth.func",bo="depth.range",ho="depth.mask",vo="colorMask",go="cull.enable",_o="cull.face",Oo="frontFace",wo="lineWidth",xo="polygonOffset.enable",So="polygonOffset.offset",jo="sample.alpha",Eo="sample.enable",Ao="sample.coverage",Lo="stencil.enable",Mo="stencil.mask",Po="stencil.func",To="stencil.opFront",Co="stencil.opBack",Ro="scissor.enable",ko="scissor.box",Io="viewport",Do="profile",Vo="framebuffer",Go="vert",No="frag",Fo="elements",Bo="primitive",Uo="count",zo="offset",Yo="instances",qo=Vo+"Width",Xo=Vo+"Height",Ho=Io+"Width",Wo=Io+"Height",Ko="drawingBufferWidth",$o="drawingBufferHeight",Qo=[po,lo,Po,To,Co,Ao,Io,ko,So],Zo=34962,Jo=34963,ei=3553,ti=34067,ni=2884,ri=3042,oi=3024,ii=2960,ai=2929,ui=3089,fi=32823,ci=32926,si=32928,li=5126,pi=35664,di=35665,yi=35666,mi=5124,bi=35667,hi=35668,vi=35669,gi=35670,_i=35671,Oi=35672,wi=35673,xi=35674,Si=35675,ji=35676,Ei=35678,Ai=35680,Li=4,Mi=1028,Pi=1029,Ti=2304,Ci=2305,Ri=32775,ki=32776,Ii=519,Di=7680,Vi=0,Gi=1,Ni=32774,Fi=513,Bi=36160,Ui=36064,zi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],qi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Xi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Hi={frag:35632,vert:35633},Wi={cw:Ti,ccw:Ci},Ki=new qe(!1,!1,!1,function(){}),$i=34918,Qi=34919,Zi=35007,Ji=function(e,t){function n(){return p.pop()||l.createQueryEXT()}function r(e){p.push(e)}function o(e){var t=n();l.beginQueryEXT(Zi,t),d.push(t),c(d.length-1,d.length,e)}function i(){l.endQueryEXT(Zi)}function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function u(){return y.pop()||new a}function f(e){y.push(e)}function c(e,t,n){var r=u();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,m.push(r)}function s(){var e,t,n=d.length;if(0!==n){h.length=Math.max(h.length,n+1),b.length=Math.max(b.length,n+1),b[0]=0,h[0]=0;var o=0;for(e=0,t=0;t<d.length;++t){var i=d[t];l.getQueryObjectEXT(i,Qi)?(o+=l.getQueryObjectEXT(i,$i),r(i)):d[e++]=i,b[t+1]=o,h[t+1]=e}for(d.length=e,e=0,t=0;t<m.length;++t){var a=m[t],u=a.startQueryIndex,c=a.endQueryIndex;a.sum+=b[c]-b[u];var s=h[u],p=h[c];p===s?(a.stats.gpuTime+=a.sum/1e6,f(a)):(a.startQueryIndex=s,a.endQueryIndex=p,m[e++]=a)}m.length=e}}var l=t.ext_disjoint_timer_query;if(!l)return null;var p=[],d=[],y=[],m=[],b=[],h=[];return{beginQuery:o,endQuery:i,pushScopeStats:c,update:s,getNumPendingQueries:function(){return d.length},clear:function(){p.push.apply(p,d);for(var e=0;e<p.length;e++)l.deleteQueryEXT(p[e]);d.length=0,p.length=0},restore:function(){d.length=0,p.length=0}}},ea=16384,ta=256,na=1024,ra=34962,oa="webglcontextlost",ia="webglcontextrestored",aa=1,ua=2,fa=3;return Ze})},{}],123:[function(e,t,n){"use strict";function r(e){if(!Array.isArray(e))throw new TypeError("Expected value to be an array");return o(e)}function o(e){return u(e,[])}function i(e,t){if(!Array.isArray(e))throw new TypeError("Expected value to be an array");return a(e,t)}function a(e,t){if("number"!=typeof t)throw new TypeError("Expected the depth to be a number");return f(e,[],t)}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?u(r,t):t.push(r)}return t}function f(e,t,n){n--;for(var r=0;r<e.length;r++){var o=e[r];n>-1&&Array.isArray(o)?f(o,t,n):t.push(o)}return t}t.exports=r,t.exports.from=o,t.exports.depth=i,t.exports.fromDepth=a},{}],124:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0===t)return[[],[]];for(var n=e[0].length,r=e[0].slice(),o=e[0].slice(),i=1;i<t;++i)for(var a=e[i],u=0;u<n;++u){var f=a[u];r[u]=Math.min(r[u],f),o[u]=Math.max(o[u],f)}return[r,o]}t.exports=r},{}],125:[function(e,t,n){"use strict"},{}],126:[function(e,t,n){"use strict";function r(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}t.exports=r},{}],127:[function(e,t,n){"use strict";function r(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*p;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function o(e){return e>=l?Math.round(e/l)+"d":e>=s?Math.round(e/s)+"h":e>=c?Math.round(e/c)+"m":e>=f?Math.round(e/f)+"s":e+"ms"}function i(e){return a(e,l,"day")||a(e,s,"hour")||a(e,c,"minute")||a(e,f,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=1e3,c=60*f,s=60*c,l=24*s,p=365.25*l;t.exports=function(e,t){t=t||{};var n=void 0===e?"undefined":u(e);if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],128:[function(e,t,n){(function(r){"use strict";function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function a(){return"object"===("undefined"==typeof console?"undefined":c(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}}function f(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(n=t.exports=e("./debug")).log=a,n.formatArgs=i,n.save=u,n.load=f,n.useColors=o,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(f())}).call(this,e("_process"))},{"./debug":129,_process:298}],129:[function(e,t,n){"use strict";function r(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function o(e){function t(){if(t.enabled){var e=t,r=+new Date,o=r-(c||r);e.diff=o,e.prev=c,e.curr=r,c=r;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;u++;var o=n.formatters[r];if("function"==typeof o){var a=i[u];t=o.call(e,a),i.splice(u,1),u--}return t}),n.formatArgs.call(e,i),(t.log||n.log||console.log.bind(console)).apply(e,i)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=r(e),"function"==typeof n.init&&n.init(t),t}function i(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,o=0;o<r;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function u(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function f(e){return e instanceof Error?e.stack||e.message:e}(n=t.exports=o.debug=o.default=o).coerce=f,n.disable=a,n.enable=i,n.enabled=u,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c},{ms:127}],130:[function(e,t,n){"use strict";t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],131:[function(e,t,n){"use strict";var r=e("synthetic-dom-events"),o=function(e,t,n,r){return e.addEventListener(t,n,r||!1)},i=function(e,t,n,r){return e.removeEventListener(t,n,r||!1)},a=function(e,t,n,r){function a(o){i(e,t,a,r),n(o)}o(e,t,a,r)},u=function(e,t,n){var o=r(t,n);e.dispatchEvent(o)};document.addEventListener||(o=function(e,t,n){return e.attachEvent("on"+t,n)}),document.removeEventListener||(i=function(e,t,n){return e.detachEvent("on"+t,n)}),document.dispatchEvent||(u=function(e,t,n){var o=r(t,n);return e.fireEvent("on"+o.type,o)}),t.exports={on:o,off:i,once:a,emit:u}},{"synthetic-dom-events":301}],132:[function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"===(void 0===e?"undefined":f(e))&&null!==e}function u(e){return void 0===e}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,f,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(n=this._events[e],u(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(a(n))for(i=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,f=0;f<r;f++)c[f].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,u;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(u=i;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],133:[function(e,t,n){"use strict";function r(e,t){return t||(t=[]),o(i,e),t[0]=i[12],t[1]=i[13],t[2]=i[14],t}var o=e("gl-mat4/invert"),i=new Float32Array(16);t.exports=r},{"gl-mat4/invert":163}],134:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8];return e[0]=a*s-u*c,e[1]=o*c-r*s,e[2]=r*u-o*a,e[3]=u*f-i*s,e[4]=n*s-o*f,e[5]=o*i-n*u,e[6]=i*c-a*f,e[7]=r*f-n*c,e[8]=n*a-r*i,e}t.exports=r},{}],135:[function(e,t,n){"use strict";function r(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}t.exports=r},{}],137:[function(e,t,n){"use strict";function r(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}t.exports=r},{}],138:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],f=e[7],c=e[8];return t*(c*i-a*f)+n*(a*u-c*o)+r*(f*o-i*u)}t.exports=r},{}],139:[function(e,t,n){"use strict";function r(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,f=o+o,c=n*a,s=r*a,l=r*u,p=o*a,d=o*u,y=o*f,m=i*a,b=i*u,h=i*f;return e[0]=1-l-y,e[3]=s-h,e[6]=p+b,e[1]=s+h,e[4]=1-c-y,e[7]=d-m,e[2]=p-b,e[5]=d+m,e[8]=1-c-l,e}t.exports=r},{}],143:[function(e,t,n){"use strict";function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}t.exports=r},{}],144:[function(e,t,n){"use strict";t.exports={adjoint:e("./adjoint"),clone:e("./clone"),copy:e("./copy"),create:e("./create"),determinant:e("./determinant"),frob:e("./frob"),fromMat2:e("./from-mat2"),fromMat4:e("./from-mat4"),fromQuat:e("./from-quat"),identity:e("./identity"),invert:e("./invert"),multiply:e("./multiply"),normalFromMat4:e("./normal-from-mat4"),rotate:e("./rotate"),scale:e("./scale"),str:e("./str"),translate:e("./translate"),transpose:e("./transpose")}},{"./adjoint":134,"./clone":135,"./copy":136,"./create":137,"./determinant":138,"./frob":139,"./from-mat2":140,"./from-mat4":141,"./from-quat":142,"./identity":143,"./invert":145,"./multiply":146,"./normal-from-mat4":147,"./rotate":148,"./scale":149,"./str":150,"./translate":151,"./transpose":152}],145:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=s*a-u*c,p=-s*i+u*f,d=c*i-a*f,y=n*l+r*p+o*d;return y?(y=1/y,e[0]=l*y,e[1]=(-s*r+o*c)*y,e[2]=(u*r-o*a)*y,e[3]=p*y,e[4]=(s*n-o*f)*y,e[5]=(-u*n+o*i)*y,e[6]=d*y,e[7]=(-c*n+r*f)*y,e[8]=(a*n-r*i)*y,e):null}t.exports=r},{}],146:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],p=n[0],d=n[1],y=n[2],m=n[3],b=n[4],h=n[5],v=n[6],g=n[7],_=n[8];return e[0]=p*r+d*a+y*c,e[1]=p*o+d*u+y*s,e[2]=p*i+d*f+y*l,e[3]=m*r+b*a+h*c,e[4]=m*o+b*u+h*s,e[5]=m*i+b*f+h*l,e[6]=v*r+g*a+_*c,e[7]=v*o+g*u+_*s,e[8]=v*i+g*f+_*l,e}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15],v=n*u-r*a,g=n*f-o*a,_=n*c-i*a,O=r*f-o*u,w=r*c-i*u,x=o*c-i*f,S=s*m-l*y,j=s*b-p*y,E=s*h-d*y,A=l*b-p*m,L=l*h-d*m,M=p*h-d*b,P=v*M-g*L+_*A+O*E-w*j+x*S;return P?(P=1/P,e[0]=(u*M-f*L+c*A)*P,e[1]=(f*E-a*M-c*j)*P,e[2]=(a*L-u*E+c*S)*P,e[3]=(o*L-r*M-i*A)*P,e[4]=(n*M-o*E+i*j)*P,e[5]=(r*E-n*L-i*S)*P,e[6]=(m*x-b*w+h*O)*P,e[7]=(b*_-y*x-h*g)*P,e[8]=(y*w-m*_+h*v)*P,e):null}t.exports=r},{}],148:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],p=Math.sin(n),d=Math.cos(n);return e[0]=d*r+p*a,e[1]=d*o+p*u,e[2]=d*i+p*f,e[3]=d*a-p*r,e[4]=d*u-p*o,e[5]=d*f-p*i,e[6]=c,e[7]=s,e[8]=l,e}t.exports=r},{}],149:[function(e,t,n){"use strict";function r(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}t.exports=r},{}],150:[function(e,t,n){"use strict";function r(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}t.exports=r},{}],151:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],p=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=f,e[6]=p*r+d*a+c,e[7]=p*o+d*u+s,e[8]=p*i+d*f+l,e}t.exports=r},{}],152:[function(e,t,n){"use strict";function r(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}t.exports=r},{}],153:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15];return e[0]=u*(p*h-d*b)-l*(f*h-c*b)+m*(f*d-c*p),e[1]=-(r*(p*h-d*b)-l*(o*h-i*b)+m*(o*d-i*p)),e[2]=r*(f*h-c*b)-u*(o*h-i*b)+m*(o*c-i*f),e[3]=-(r*(f*d-c*p)-u*(o*d-i*p)+l*(o*c-i*f)),e[4]=-(a*(p*h-d*b)-s*(f*h-c*b)+y*(f*d-c*p)),e[5]=n*(p*h-d*b)-s*(o*h-i*b)+y*(o*d-i*p),e[6]=-(n*(f*h-c*b)-a*(o*h-i*b)+y*(o*c-i*f)),e[7]=n*(f*d-c*p)-a*(o*d-i*p)+s*(o*c-i*f),e[8]=a*(l*h-d*m)-s*(u*h-c*m)+y*(u*d-c*l),e[9]=-(n*(l*h-d*m)-s*(r*h-i*m)+y*(r*d-i*l)),e[10]=n*(u*h-c*m)-a*(r*h-i*m)+y*(r*c-i*u),e[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+s*(r*c-i*u)),e[12]=-(a*(l*b-p*m)-s*(u*b-f*m)+y*(u*p-f*l)),e[13]=n*(l*b-p*m)-s*(r*b-o*m)+y*(r*p-o*l),e[14]=-(n*(u*b-f*m)-a*(r*b-o*m)+y*(r*f-o*u)),e[15]=n*(u*p-f*l)-a*(r*p-o*l)+s*(r*f-o*u),e}t.exports=r},{}],154:[function(e,t,n){"use strict";function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],155:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],156:[function(e,t,n){"use strict";function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],157:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],f=e[7],c=e[8],s=e[9],l=e[10],p=e[11],d=e[12],y=e[13],m=e[14],b=e[15];return(t*a-n*i)*(l*b-p*m)-(t*u-r*i)*(s*b-p*y)+(t*f-o*i)*(s*m-l*y)+(n*u-r*a)*(c*b-p*d)-(n*f-o*a)*(c*m-l*d)+(r*f-o*u)*(c*y-s*d)}t.exports=r},{}],158:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,f=o+o,c=n*a,s=r*a,l=r*u,p=o*a,d=o*u,y=o*f,m=i*a,b=i*u,h=i*f;return e[0]=1-l-y,e[1]=s+h,e[2]=p-b,e[3]=0,e[4]=s-h,e[5]=1-c-y,e[6]=d+m,e[7]=0,e[8]=p+b,e[9]=d-m,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],159:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=r+r,f=o+o,c=i+i,s=r*u,l=r*f,p=r*c,d=o*f,y=o*c,m=i*c,b=a*u,h=a*f,v=a*c;return e[0]=1-(d+m),e[1]=l+v,e[2]=p-h,e[3]=0,e[4]=l-v,e[5]=1-(s+m),e[6]=y+b,e[7]=0,e[8]=p+h,e[9]=y-b,e[10]=1-(s+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t.exports=r},{}],160:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){var u=1/(n-t),f=1/(o-r),c=1/(i-a);return e[0]=2*i*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*f,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(o+r)*f,e[10]=(a+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*c,e[15]=0,e}t.exports=r},{}],161:[function(e,t,n){"use strict";function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],162:[function(e,t,n){"use strict";t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":153,"./clone":154,"./copy":155,"./create":156,"./determinant":157,"./fromQuat":158,"./fromRotationTranslation":159,"./frustum":160,"./identity":161,"./invert":163,"./lookAt":164,"./multiply":165,"./ortho":166,"./perspective":167,"./perspectiveFromFieldOfView":168,"./rotate":169,"./rotateX":170,"./rotateY":171,"./rotateZ":172,"./scale":173,"./str":174,"./translate":175,"./transpose":176}],163:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15],v=n*u-r*a,g=n*f-o*a,_=n*c-i*a,O=r*f-o*u,w=r*c-i*u,x=o*c-i*f,S=s*m-l*y,j=s*b-p*y,E=s*h-d*y,A=l*b-p*m,L=l*h-d*m,M=p*h-d*b,P=v*M-g*L+_*A+O*E-w*j+x*S;return P?(P=1/P,e[0]=(u*M-f*L+c*A)*P,e[1]=(o*L-r*M-i*A)*P,e[2]=(m*x-b*w+h*O)*P,e[3]=(p*w-l*x-d*O)*P,e[4]=(f*E-a*M-c*j)*P,e[5]=(n*M-o*E+i*j)*P,e[6]=(b*_-y*x-h*g)*P,e[7]=(s*x-p*_+d*g)*P,e[8]=(a*L-u*E+c*S)*P,e[9]=(r*E-n*L-i*S)*P,e[10]=(y*w-m*_+h*v)*P,e[11]=(l*_-s*w-d*v)*P,e[12]=(u*j-a*A-f*S)*P,e[13]=(n*A-r*j+o*S)*P,e[14]=(m*g-y*O-b*v)*P,e[15]=(s*O-l*g+p*v)*P,e):null}t.exports=r},{}],164:[function(e,t,n){"use strict";function r(e,t,n,r){var i,a,u,f,c,s,l,p,d,y,m=t[0],b=t[1],h=t[2],v=r[0],g=r[1],_=r[2],O=n[0],w=n[1],x=n[2];return Math.abs(m-O)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(h-x)<1e-6?o(e):(l=m-O,p=b-w,d=h-x,y=1/Math.sqrt(l*l+p*p+d*d),l*=y,p*=y,d*=y,i=g*d-_*p,a=_*l-v*d,u=v*p-g*l,y=Math.sqrt(i*i+a*a+u*u),y?(i*=y=1/y,a*=y,u*=y):(i=0,a=0,u=0),f=p*u-d*a,c=d*i-l*u,s=l*a-p*i,y=Math.sqrt(f*f+c*c+s*s),y?(f*=y=1/y,c*=y,s*=y):(f=0,c=0,s=0),e[0]=i,e[1]=f,e[2]=l,e[3]=0,e[4]=a,e[5]=c,e[6]=p,e[7]=0,e[8]=u,e[9]=s,e[10]=d,e[11]=0,e[12]=-(i*m+a*b+u*h),e[13]=-(f*m+c*b+s*h),e[14]=-(l*m+p*b+d*h),e[15]=1,e)}var o=e("./identity");t.exports=r},{"./identity":161}],165:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],p=t[9],d=t[10],y=t[11],m=t[12],b=t[13],h=t[14],v=t[15],g=n[0],_=n[1],O=n[2],w=n[3];return e[0]=g*r+_*u+O*l+w*m,e[1]=g*o+_*f+O*p+w*b,e[2]=g*i+_*c+O*d+w*h,e[3]=g*a+_*s+O*y+w*v,g=n[4],_=n[5],O=n[6],w=n[7],e[4]=g*r+_*u+O*l+w*m,e[5]=g*o+_*f+O*p+w*b,e[6]=g*i+_*c+O*d+w*h,e[7]=g*a+_*s+O*y+w*v,g=n[8],_=n[9],O=n[10],w=n[11],e[8]=g*r+_*u+O*l+w*m,e[9]=g*o+_*f+O*p+w*b,e[10]=g*i+_*c+O*d+w*h,e[11]=g*a+_*s+O*y+w*v,g=n[12],_=n[13],O=n[14],w=n[15],e[12]=g*r+_*u+O*l+w*m,e[13]=g*o+_*f+O*p+w*b,e[14]=g*i+_*c+O*d+w*h,e[15]=g*a+_*s+O*y+w*v,e}t.exports=r},{}],166:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){var u=1/(t-n),f=1/(r-o),c=1/(i-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*u,e[13]=(o+r)*f,e[14]=(a+i)*c,e[15]=1,e}t.exports=r},{}],167:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e}t.exports=r},{}],168:[function(e,t,n){"use strict";function r(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),f=2/(a+u),c=2/(o+i);return e[0]=f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-u)*f*.5,e[9]=(o-i)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}t.exports=r},{}],169:[function(e,t,n){"use strict";function r(e,t,n,r){var o,i,a,u,f,c,s,l,p,d,y,m,b,h,v,g,_,O,w,x,S,j,E,A,L=r[0],M=r[1],P=r[2],T=Math.sqrt(L*L+M*M+P*P);return Math.abs(T)<1e-6?null:(T=1/T,L*=T,M*=T,P*=T,o=Math.sin(n),i=Math.cos(n),a=1-i,u=t[0],f=t[1],c=t[2],s=t[3],l=t[4],p=t[5],d=t[6],y=t[7],m=t[8],b=t[9],h=t[10],v=t[11],g=L*L*a+i,_=M*L*a+P*o,O=P*L*a-M*o,w=L*M*a-P*o,x=M*M*a+i,S=P*M*a+L*o,j=L*P*a+M*o,E=M*P*a-L*o,A=P*P*a+i,e[0]=u*g+l*_+m*O,e[1]=f*g+p*_+b*O,e[2]=c*g+d*_+h*O,e[3]=s*g+y*_+v*O,e[4]=u*w+l*x+m*S,e[5]=f*w+p*x+b*S,e[6]=c*w+d*x+h*S,e[7]=s*w+y*x+v*S,e[8]=u*j+l*E+m*A,e[9]=f*j+p*E+b*A,e[10]=c*j+d*E+h*A,e[11]=s*j+y*E+v*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=r},{}],170:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],u=t[6],f=t[7],c=t[8],s=t[9],l=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+c*r,e[5]=a*o+s*r,e[6]=u*o+l*r,e[7]=f*o+p*r,e[8]=c*o-i*r,e[9]=s*o-a*r,e[10]=l*o-u*r,e[11]=p*o-f*r,e}t.exports=r},{}],171:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],f=t[3],c=t[8],s=t[9],l=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-c*r,e[1]=a*o-s*r,e[2]=u*o-l*r,e[3]=f*o-p*r,e[8]=i*r+c*o,e[9]=a*r+s*o,e[10]=u*r+l*o,e[11]=f*r+p*o,e}t.exports=r},{}],172:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],f=t[3],c=t[4],s=t[5],l=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+c*r,e[1]=a*o+s*r,e[2]=u*o+l*r,e[3]=f*o+p*r,e[4]=c*o-i*r,e[5]=s*o-a*r,e[6]=l*o-u*r,e[7]=p*o-f*r,e}t.exports=r},{}],173:[function(e,t,n){"use strict";function r(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],174:[function(e,t,n){"use strict";function r(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}t.exports=r},{}],175:[function(e,t,n){"use strict";function r(e,t,n){var r,o,i,a,u,f,c,s,l,p,d,y,m=n[0],b=n[1],h=n[2];return t===e?(e[12]=t[0]*m+t[4]*b+t[8]*h+t[12],e[13]=t[1]*m+t[5]*b+t[9]*h+t[13],e[14]=t[2]*m+t[6]*b+t[10]*h+t[14],e[15]=t[3]*m+t[7]*b+t[11]*h+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],p=t[9],d=t[10],y=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=f,e[6]=c,e[7]=s,e[8]=l,e[9]=p,e[10]=d,e[11]=y,e[12]=r*m+u*b+l*h+t[12],e[13]=o*m+f*b+p*h+t[13],e[14]=i*m+c*b+d*h+t[14],e[15]=a*m+s*b+y*h+t[15]),e}t.exports=r},{}],176:[function(e,t,n){"use strict";function r(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],177:[function(e,t,n){"use strict";t.exports=e("gl-vec4/add")},{"gl-vec4/add":266}],178:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e}t.exports=r},{}],179:[function(e,t,n){"use strict";t.exports=e("gl-vec4/clone")},{"gl-vec4/clone":267}],180:[function(e,t,n){"use strict";function r(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}t.exports=r},{}],181:[function(e,t,n){"use strict";t.exports=e("gl-vec4/copy")},{"gl-vec4/copy":268}],182:[function(e,t,n){"use strict";function r(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}t.exports=r},{}],183:[function(e,t,n){"use strict";t.exports=e("gl-vec4/dot")},{"gl-vec4/dot":269}],184:[function(e,t,n){"use strict";function r(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e}t.exports=r},{}],185:[function(e,t,n){"use strict";t.exports=e("gl-vec4/fromValues")},{"gl-vec4/fromValues":270}],186:[function(e,t,n){"use strict";function r(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}t.exports=r},{}],187:[function(e,t,n){"use strict";t.exports={add:e("./add"),calculateW:e("./calculateW"),clone:e("./clone"),conjugate:e("./conjugate"),copy:e("./copy"),create:e("./create"),dot:e("./dot"),fromMat3:e("./fromMat3"),fromValues:e("./fromValues"),identity:e("./identity"),invert:e("./invert"),length:e("./length"),lerp:e("./lerp"),multiply:e("./multiply"),normalize:e("./normalize"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),rotationTo:e("./rotationTo"),scale:e("./scale"),set:e("./set"),setAxes:e("./setAxes"),setAxisAngle:e("./setAxisAngle"),slerp:e("./slerp"),sqlerp:e("./sqlerp"),squaredLength:e("./squaredLength")}},{"./add":177,"./calculateW":178,"./clone":179,"./conjugate":180,"./copy":181,"./create":182,"./dot":183,"./fromMat3":184,"./fromValues":185,"./identity":186,"./invert":188,"./length":189,"./lerp":190,"./multiply":191,"./normalize":192,"./rotateX":193,"./rotateY":194,"./rotateZ":195,"./rotationTo":196,"./scale":197,"./set":198,"./setAxes":199,"./setAxisAngle":200,"./slerp":201,"./sqlerp":202,"./squaredLength":203}],188:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-o*u,e[3]=i*u,e}t.exports=r},{}],189:[function(e,t,n){"use strict";t.exports=e("gl-vec4/length")},{"gl-vec4/length":271}],190:[function(e,t,n){"use strict";t.exports=e("gl-vec4/lerp")},{"gl-vec4/lerp":272}],191:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],f=n[1],c=n[2],s=n[3];return e[0]=r*s+a*u+o*c-i*f,e[1]=o*s+a*f+i*u-r*c,e[2]=i*s+a*c+r*f-o*u,e[3]=a*s-r*u-o*f-i*c,e}t.exports=r},{}],192:[function(e,t,n){"use strict";t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":273}],193:[function(e,t,n){"use strict";function r(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),f=Math.cos(n);return e[0]=r*f+a*u,e[1]=o*f+i*u,e[2]=i*f-o*u,e[3]=a*f-r*u,e}t.exports=r},{}],194:[function(e,t,n){"use strict";function r(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),f=Math.cos(n);return e[0]=r*f-i*u,e[1]=o*f+a*u,e[2]=i*f+r*u,e[3]=a*f-o*u,e}t.exports=r},{}],195:[function(e,t,n){"use strict";function r(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),f=Math.cos(n);return e[0]=r*f+o*u,e[1]=o*f-r*u,e[2]=i*f+a*u,e[3]=a*f-i*u,e}t.exports=r},{}],196:[function(e,t,n){"use strict";function r(e,t,n){var r=o(t,n);return r<-.999999?(i(s,l,t),a(s)<1e-6&&i(s,p,t),u(s,s),c(e,s,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i(s,t,n),e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=1+r,f(e,e))}var o=e("gl-vec3/dot"),i=e("gl-vec3/cross"),a=e("gl-vec3/length"),u=e("gl-vec3/normalize"),f=e("./normalize"),c=e("./setAxisAngle");t.exports=r;var s=[0,0,0],l=[1,0,0],p=[0,1,0]},{"./normalize":192,"./setAxisAngle":200,"gl-vec3/cross":238,"gl-vec3/dot":241,"gl-vec3/length":246,"gl-vec3/normalize":252}],197:[function(e,t,n){"use strict";t.exports=e("gl-vec4/scale")},{"gl-vec4/scale":274}],198:[function(e,t,n){"use strict";t.exports=e("gl-vec4/set")},{"gl-vec4/set":275}],199:[function(e,t,n){"use strict";function r(e,t,n,r){return u[0]=n[0],u[3]=n[1],u[6]=n[2],u[1]=r[0],u[4]=r[1],u[7]=r[2],u[2]=-t[0],u[5]=-t[1],u[8]=-t[2],a(e,i(e,u))}var o=e("gl-mat3/create"),i=e("./fromMat3"),a=e("./normalize");t.exports=r;var u=o()},{"./fromMat3":184,"./normalize":192,"gl-mat3/create":137}],200:[function(e,t,n){"use strict";function r(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}t.exports=r},{}],201:[function(e,t,n){"use strict";function r(e,t,n,r){var o,i,a,u,f,c=t[0],s=t[1],l=t[2],p=t[3],d=n[0],y=n[1],m=n[2],b=n[3];return(i=c*d+s*y+l*m+p*b)<0&&(i=-i,d=-d,y=-y,m=-m,b=-b),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,f=Math.sin(r*o)/a):(u=1-r,f=r),e[0]=u*c+f*d,e[1]=u*s+f*y,e[2]=u*l+f*m,e[3]=u*p+f*b,e}t.exports=r},{}],202:[function(e,t,n){"use strict";function r(e,t,n,r,u,f){return o(i,t,u,f),o(a,n,r,f),o(e,i,a,2*f*(1-f)),e}var o=e("./slerp");t.exports=r;var i=[0,0,0,1],a=[0,0,0,1]},{"./slerp":201}],203:[function(e,t,n){"use strict";t.exports=e("gl-vec4/squaredLength")},{"gl-vec4/squaredLength":276}],204:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}t.exports=r},{}],205:[function(e,t,n){"use strict";function r(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}t.exports=r},{}],206:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e}t.exports=r},{}],207:[function(e,t,n){"use strict";function r(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}t.exports=r},{}],208:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}t.exports=r},{}],209:[function(e,t,n){"use strict";function r(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}t.exports=r},{}],210:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}t.exports=r},{}],211:[function(e,t,n){"use strict";function r(e,t){return e[0]*t[0]+e[1]*t[1]}t.exports=r},{}],212:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){var u,f;for(t||(t=2),n||(n=0),f=r?Math.min(r*t+n,e.length):e.length,u=n;u<f;u+=t)o[0]=e[u],o[1]=e[u+1],i(o,o,a),e[u]=o[0],e[u+1]=o[1];return e}t.exports=r;var o=e("./create")()},{"./create":207}],213:[function(e,t,n){"use strict";function r(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}t.exports=r},{}],214:[function(e,t,n){"use strict";t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat2:e("./transformMat2"),transformMat2d:e("./transformMat2d"),transformMat3:e("./transformMat3"),transformMat4:e("./transformMat4"),forEach:e("./forEach")}},{"./add":204,"./clone":205,"./copy":206,"./create":207,"./cross":208,"./distance":209,"./divide":210,"./dot":211,"./forEach":212,"./fromValues":213,"./length":215,"./lerp":216,"./max":217,"./min":218,"./multiply":219,"./negate":220,"./normalize":221,"./random":222,"./scale":223,"./scaleAndAdd":224,"./set":225,"./squaredDistance":226,"./squaredLength":227,"./subtract":228,"./transformMat2":229,"./transformMat2d":230,"./transformMat3":231,"./transformMat4":232}],215:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}t.exports=r},{}],216:[function(e,t,n){"use strict";function r(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e}t.exports=r},{}],217:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}t.exports=r},{}],218:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}t.exports=r},{}],219:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}t.exports=r},{}],220:[function(e,t,n){"use strict";function r(e,t){return e[0]=-t[0],e[1]=-t[1],e}t.exports=r},{}],221:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e}t.exports=r},{}],222:[function(e,t,n){"use strict";function r(e,t){t=t||1;var n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}t.exports=r},{}],223:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}t.exports=r},{}],224:[function(e,t,n){"use strict";function r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}t.exports=r},{}],225:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t,e[1]=n,e}t.exports=r},{}],226:[function(e,t,n){"use strict";function r(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}t.exports=r},{}],227:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];return t*t+n*n}t.exports=r},{}],228:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}t.exports=r},{}],229:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e}t.exports=r},{}],230:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e}t.exports=r},{}],231:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e}t.exports=r},{}],232:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e}t.exports=r},{}],233:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=r},{}],234:[function(e,t,n){"use strict";function r(e,t){var n=o(e[0],e[1],e[2]),r=o(t[0],t[1],t[2]);i(n,n),i(r,r);var u=a(n,r);return u>1?0:Math.acos(u)}t.exports=r;var o=e("./fromValues"),i=e("./normalize"),a=e("./dot")},{"./dot":241,"./fromValues":243,"./normalize":252}],235:[function(e,t,n){"use strict";function r(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}t.exports=r},{}],236:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=r},{}],237:[function(e,t,n){"use strict";function r(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=r},{}],238:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],f=n[2];return e[0]=o*f-i*u,e[1]=i*a-r*f,e[2]=r*u-o*a,e}t.exports=r},{}],239:[function(e,t,n){"use strict";function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)}t.exports=r},{}],240:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}t.exports=r},{}],241:[function(e,t,n){"use strict";function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],242:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){var u,f;for(t||(t=3),n||(n=0),f=r?Math.min(r*t+n,e.length):e.length,u=n;u<f;u+=t)o[0]=e[u],o[1]=e[u+1],o[2]=e[u+2],i(o,o,a),e[u]=o[0],e[u+1]=o[1],e[u+2]=o[2];return e}t.exports=r;var o=e("./create")()},{"./create":237}],243:[function(e,t,n){"use strict";function r(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}t.exports=r},{}],244:[function(e,t,n){"use strict";t.exports={create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":233,"./angle":234,"./clone":235,"./copy":236,"./create":237,"./cross":238,"./distance":239,"./divide":240,"./dot":241,"./forEach":242,"./fromValues":243,"./inverse":245,"./length":246,"./lerp":247,"./max":248,"./min":249,"./multiply":250,"./negate":251,"./normalize":252,"./random":253,"./rotateX":254,"./rotateY":255,"./rotateZ":256,"./scale":257,"./scaleAndAdd":258,"./set":259,"./squaredDistance":260,"./squaredLength":261,"./subtract":262,"./transformMat3":263,"./transformMat4":264,"./transformQuat":265}],245:[function(e,t,n){"use strict";function r(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}t.exports=r},{}],246:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],247:[function(e,t,n){"use strict";function r(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e}t.exports=r},{}],248:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}t.exports=r},{}],249:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}t.exports=r},{}],250:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}t.exports=r},{}],251:[function(e,t,n){"use strict";function r(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}t.exports=r},{}],252:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}t.exports=r},{}],253:[function(e,t,n){"use strict";function r(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e}t.exports=r},{}],254:[function(e,t,n){"use strict";function r(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}t.exports=r},{}],255:[function(e,t,n){"use strict";function r(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}t.exports=r},{}],256:[function(e,t,n){"use strict";function r(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}t.exports=r},{}],257:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}t.exports=r},{}],258:[function(e,t,n){"use strict";function r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}t.exports=r},{}],259:[function(e,t,n){"use strict";function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}t.exports=r},{}],260:[function(e,t,n){"use strict";function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o}t.exports=r},{}],261:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}t.exports=r},{}],262:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=r},{}],263:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}t.exports=r},{}],264:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e}t.exports=r},{}],265:[function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],f=n[2],c=n[3],s=c*r+u*i-f*o,l=c*o+f*r-a*i,p=c*i+a*o-u*r,d=-a*r-u*o-f*i;return e[0]=s*c+d*-a+l*-f-p*-u,e[1]=l*c+d*-u+p*-a-s*-f,e[2]=p*c+d*-f+s*-u-l*-a,e}t.exports=r},{}],266:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}t.exports=r},{}],267:[function(e,t,n){"use strict";function r(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}t.exports=r},{}],268:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}t.exports=r},{}],269:[function(e,t,n){"use strict";function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}t.exports=r},{}],270:[function(e,t,n){"use strict";function r(e,t,n,r){var o=new Float32Array(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o}t.exports=r},{}],271:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)}t.exports=r},{}],272:[function(e,t,n){"use strict";function r(e,t,n,r){var o=t[0],i=t[1],a=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=u+r*(n[3]-u),e}t.exports=r},{}],273:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e}t.exports=r},{}],274:[function(e,t,n){"use strict";function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}t.exports=r},{}],275:[function(e,t,n){"use strict";function r(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}t.exports=r},{}],276:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o}t.exports=r},{}],277:[function(e,t,n){(function(n){"use strict";var r,o=void 0!==n?n:"undefined"!=typeof window?window:{},i=e("min-document");"undefined"!=typeof document?r=document:(r=o["__GLOBAL_DOCUMENT_CACHE@4"])||(r=o["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":125}],278:[function(e,t,n){(function(e){"use strict";var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(e,t,n){"use strict";var r=e("glsl-tokenizer"),o=e("glsl-token-string"),i=e("glsl-token-inject-block");t.exports=function(e,t){if(!t)return e;var n=Object.keys(t);if(0===n.length)return e;for(var a=r(e),u=n.length-1;u>=0;u--){var f=n[u],c=String(t[f]);c&&(c=" "+c),i(a,{type:"preprocessor",data:"#define "+f+c})}return o(a)}},{"glsl-token-inject-block":281,"glsl-token-string":282,"glsl-tokenizer":289}],280:[function(e,t,n){"use strict";function r(e){for(var t={},n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type){var o=r.data.trim();if(!o.indexOf("#define")){var i=o.match(/#define\s+([^\s]+)(.+)?$/i);if(i){var a=(i[1]||"").trim(),u=(i[2]||"").trim();t[a]=u}}}}return t}t.exports=r},{}],281:[function(e,t,n){"use strict";function r(e,t){Array.isArray(t)||(t=[t]);var n=o(e),r=n>0?e[n-1]:null;r&&u.test(r.data)&&e.splice(n++,0,a),e.splice.apply(e,[n,0].concat(t));var i=n+t.length;return e[i]&&/[^\r\n]$/.test(e[i].data)&&e.splice(i,0,a),e}function o(e){for(var t=-1,n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type)/^#(extension|version)/.test(r.data)&&(t=Math.max(t,n));else if("keyword"===r.type&&"precision"===r.data){var o=i(e,n);if(-1===o)throw new Error("precision statement not followed by any semicolons!");t=Math.max(t,o)}}return t+1}function i(e,t){for(var n=t;n<e.length;n++)if("operator"===e[n].type&&";"===e[n].data)return n;return-1}t.exports=r;var a={data:"\n",type:"whitespace"},u=/[^\r\n]$/},{}],282:[function(e,t,n){"use strict";function r(e){for(var t=[],n=0;n<e.length;n++)"eof"!==e[n].type&&t.push(e[n].data);return t.join("")}t.exports=r},{}],283:[function(e,t,n){"use strict";function r(e){function t(e){e.length&&U.push({type:x[F],data:e,position:q,line:z,column:Y})}function n(e){G=0,V=(W+=e).length;for(var t;I=W[G],G<V;){switch(t=G,F){case l:G=L();break;case p:G=A();break;case d:G=E();break;case y:G=M();break;case m:G=C();break;case w:G=T();break;case b:G=R();break;case s:G=k();break;case _:G=j();break;case c:G=S()}if(t!==G)switch(W[t]){case"\n":Y=0,++z;break;default:++Y}}return N+=G,W=W.slice(G),U}function r(e){return B.length&&t(B.join("")),F=O,t("(eof)"),U}function S(){return B=B.length?[]:B,"/"===D&&"*"===I?(q=N+G-1,F=l,D=I,G+1):"/"===D&&"/"===I?(q=N+G-1,F=p,D=I,G+1):"#"===I?(F=d,q=N+G,G):/\s/.test(I)?(F=_,q=N+G,G):(X=/\d/.test(I),H=/[^\w_]/.test(I),q=N+G,F=X?m:H?y:s,G)}function j(){return/[^\s]/g.test(I)?(t(B.join("")),F=c,G):(B.push(I),D=I,G+1)}function E(){return"\r"!==I&&"\n"!==I||"\\"===D?(B.push(I),D=I,G+1):(t(B.join("")),F=c,G)}function A(){return E()}function L(){return"/"===I&&"*"===D?(B.push(I),t(B.join("")),F=c,G+1):(B.push(I),D=I,G+1)}function M(){if("."===D&&/\d/.test(I))return F=b,G;if("/"===D&&"*"===I)return F=l,G;if("/"===D&&"/"===I)return F=p,G;if("."===I&&B.length){for(;P(B););return F=b,G}if(";"===I||")"===I||"("===I){if(B.length)for(;P(B););return t(I),F=c,G+1}var e=2===B.length&&"="!==I;if(/[\w_\d\s]/.test(I)||e){for(;P(B););return F=c,G}return B.push(I),D=I,G+1}function P(e){for(var n,r,o=0;;){if(n=i.indexOf(e.slice(0,e.length+o).join("")),r=i[n],-1===n){if(o--+e.length>0)continue;r=e.slice(0,1).join("")}return t(r),q+=r.length,(B=B.slice(r.length)).length}}function T(){return/[^a-fA-F0-9]/.test(I)?(t(B.join("")),F=c,G):(B.push(I),D=I,G+1)}function C(){return"."===I?(B.push(I),F=b,D=I,G+1):/[eE]/.test(I)?(B.push(I),F=b,D=I,G+1):"x"===I&&1===B.length&&"0"===B[0]?(F=w,B.push(I),D=I,G+1):/[^\d]/.test(I)?(t(B.join("")),F=c,G):(B.push(I),D=I,G+1)}function R(){return"f"===I&&(B.push(I),D=I,G+=1),/[eE]/.test(I)?(B.push(I),D=I,G+1):"-"===I&&/[eE]/.test(D)?(B.push(I),D=I,G+1):/[^\d]/.test(I)?(t(B.join("")),F=c,G):(B.push(I),D=I,G+1)}function k(){if(/[^\d\w_]/.test(I)){var e=B.join("");return F=$.indexOf(e)>-1?g:K.indexOf(e)>-1?v:h,t(B.join("")),F=c,G}return B.push(I),D=I,G+1}var I,D,V,G=0,N=0,F=c,B=[],U=[],z=1,Y=0,q=0,X=!1,H=!1,W="",K=a,$=o;return"300 es"===(e=e||{}).version&&(K=f,$=u),function(e){return U=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):r()}}t.exports=r;var o=e("./lib/literals"),i=e("./lib/operators"),a=e("./lib/builtins"),u=e("./lib/literals-300es"),f=e("./lib/builtins-300es"),c=999,s=9999,l=0,p=1,d=2,y=3,m=4,b=5,h=6,v=7,g=8,_=9,O=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":285,"./lib/builtins-300es":284,"./lib/literals":287,"./lib/literals-300es":286,"./lib/operators":288}],284:[function(e,t,n){"use strict";var r=e("./builtins");r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":285}],285:[function(e,t,n){"use strict";t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],286:[function(e,t,n){"use strict";var r=e("./literals");t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":287}],287:[function(e,t,n){"use strict";t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],288:[function(e,t,n){"use strict";t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],289:[function(e,t,n){"use strict";function r(e,t){var n=o(t),r=[];return r=r.concat(n(e)),r=r.concat(n(null))}var o=e("./index");t.exports=r},{"./index":283}],290:[function(e,t,n){"use strict";t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],291:[function(e,t,n){"use strict";function r(e){return o(e)||i(e)}function o(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return u[a.call(e)]}t.exports=r,r.strict=o,r.loose=i;var a=Object.prototype.toString,u={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},{}],292:[function(e,t,n){"use strict";function r(e){for(var t=[],n=[],r=0,o=0;r<e.length;)n.push([o++,o++,o++]),t.push([e[r++],e[r++],e[r++]],[e[r++],e[r++],e[r++]],[e[r++],e[r++],e[r++]]);return{positions:t,cells:n}}t.exports=r},{}],293:[function(e,t,n){"use strict";n.vertexNormals=function(e,t,n){for(var r=t.length,o=new Array(r),i=void 0===n?1e-6:n,a=0;a<r;++a)o[a]=[0,0,0];for(a=0;a<e.length;++a)for(var u=e[a],f=0,c=u[u.length-1],s=u[0],l=0;l<u.length;++l){f=c,c=s,s=u[(l+1)%u.length];for(var p=t[f],d=t[c],y=t[s],m=new Array(3),b=0,h=new Array(3),v=0,g=0;g<3;++g)m[g]=p[g]-d[g],b+=m[g]*m[g],h[g]=y[g]-d[g],v+=h[g]*h[g];if(b*v>i)for(var _=o[c],O=1/Math.sqrt(b*v),g=0;g<3;++g){var w=(g+1)%3,x=(g+2)%3;_[g]+=O*(h[w]*m[x]-h[x]*m[w])}}for(a=0;a<r;++a){for(var _=o[a],S=0,g=0;g<3;++g)S+=_[g]*_[g];if(S>i)for(var O=1/Math.sqrt(S),g=0;g<3;++g)_[g]*=O;else for(g=0;g<3;++g)_[g]=0}return o},n.faceNormals=function(e,t,n){for(var r=e.length,o=new Array(r),i=void 0===n?1e-6:n,a=0;a<r;++a){for(var u=e[a],f=new Array(3),c=0;c<3;++c)f[c]=t[u[c]];for(var s=new Array(3),l=new Array(3),c=0;c<3;++c)s[c]=f[1][c]-f[0][c],l[c]=f[2][c]-f[0][c];for(var p=new Array(3),d=0,c=0;c<3;++c){var y=(c+1)%3,m=(c+2)%3;p[c]=s[y]*l[m]-s[m]*l[y],d+=p[c]*p[c]}d=d>i?1/Math.sqrt(d):0;for(c=0;c<3;++c)p[c]*=d;o[a]=p}return o}},{}],294:[function(e,t,n){"use strict";function r(e,t){function n(e,t,r){for(var o,i=[],a=0;o=u.exec(e);){if(a++>1e4)throw Error("Circular references in parenthesis");i.push(e.slice(0,o.index)),i.push(n(t[o[1]],t)),e=e.slice(o.index+o[0].length)}return i.push(e),i}if("string"!=typeof e)return[e];var r=[e],o=(t=t||{}).brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],i=t.escape||"___",a=!!t.flat;o.forEach(function(e){function t(t,n,a){var u=r.push(t.slice(e[0].length,-e[1].length))-1;return o.push(u),i+u}var n=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join("")),o=[];r.forEach(function(e,o){for(var i,a=0;e!=i;)if(i=e,e=e.replace(n,t),a++>1e4)throw Error("References have circular dependency. Please, check them.");r[o]=e}),o=o.reverse(),r=r.map(function(t){return o.forEach(function(n){t=t.replace(new RegExp("(\\"+i+n+"(?![0-9]))","g"),e[0]+"$1"+e[1])}),t})});var u=new RegExp("\\"+i+"([0-9]+)");return a?r:n(r[0],r)}function o(e,t){if(t&&t.flat){var n,r=function(t,n){if(null==e[n])throw Error("Reference "+n+"is undefined");return e[n]},o=t&&t.escape||"___",i=e[0];if(!i)return"";for(var a=new RegExp("\\"+o+"([0-9]+)"),u=0;i!=n;){if(u++>1e4)throw Error("Circular references in "+e);n=i,i=i.replace(a,r)}return i}return e.reduce(function e(t,n){return Array.isArray(n)&&(n=n.reduce(e,"")),t+n},"")}function i(e,t){return Array.isArray(e)?o(e,t):r(e,t)}i.parse=r,i.stringify=o,t.exports=i},{}],295:[function(e,t,n){(function(e){"use strict";function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,o="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===a(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),a=Math.min(o.length,i.length),u=a,f=0;f<a;f++)if(o[f]!==i[f]){u=f;break}for(var c=[],f=u;f<o.length;f++)c.push("..");return(c=c.concat(i.slice(u))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return i(e)[3]};var a=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:298}],296:[function(_dereq_,module,exports){"use strict";function preprocess(what,how){function process(e){if(!e)return"";var t=[],n=e,r=/#[A-Za-z0-9_$]+/gi.exec(e);r&&(n=n.slice(0,r.index),e=e.slice(r.index)),n=(n=escape(n,t)).replace(/\bdefined\s*([A-Za-z0-9_$]+)/g,"defined($1)");for(var o in macros)macros[o]instanceof Function&&(n=processFunction(n,o,macros[o]));n=escape(n,t);for(var o in macros)macros[o]instanceof Function||(n=processDefinition(n,o,macros[o]));if(n=unescape(n,t),r){if(/^#def/.test(r[0]))e=define(e);else if(/^#undef/.test(r[0]))e=undefine(e);else if(/^#if/.test(r[0]))e=processIf(e);else if(/^#line/.test(r[0])){i=/#[A-Za-z0-9_]+\s*([-0-9]+)?[^\n]*/.exec(e);macros.__LINE__=parseInt(i[1]),e=e.slice(i.index+i[0].length)}else if(/^#version/.test(r[0])){var i=/#[A-Za-z0-9_]+\s*([-0-9]+)?[^\n]*/.exec(e);macros.__VERSION__=parseInt(i[1]),e=e.slice(i.index+i[0].length)}else{var a=/\n/m.exec(e);n+=e.slice(0,a.index)+"\n",e=e.slice(a.index)}return n+process(e)}return n}function processFunction(e,t,n){var r=[];e=escape(e,r);var o=paren(e,{flat:!0,brackets:"()",escape:"___"}),i=new RegExp(t+"\\s*\\(___([0-9]+)\\)","g");return o=o.map(function(e){return e.replace(i,function(e,r){var i=o[r];if((i=i.trim().length?(i=i.split(/\s*,\s*/)).map(function(e){var t=o.slice();return t[0]=e,paren.stringify(t,{flat:!0,escape:"___"})}).map(function(e){return e}):[]).length!=n.length)throw Error('macro "'+t+'" requires '+n.length+" arguments, but "+i.length+" given");return n.apply(null,i)})}),e=paren.stringify(o,{flat:!0,escape:"___"}),e=unescape(e,r)}function processDefinition(e,t,n){var r=[];return e=escape(e,r),e=e.replace(new RegExp("([^#A-Za-z0-9_$]|^)"+t+"\\s*##\\s*([A-Za-z0-9_$]*)","g"),function(e,t,r){return t+n+r}),e=e.replace(new RegExp("([A-Za-z0-9_$]*)\\s*##\\s*"+t+"([^A-Za-z0-9_$]|$)","g"),function(e,t,r){return t+n+r}),e=e.replace(new RegExp("([^#A-Za-z0-9_$]|^)"+t+"([^A-Za-z0-9_$]|$)","g"),function(e,t,r){return null==macros[n]||macros[n]instanceof Function||(n=macros[n]),t+n+r}),e=e.replace(new RegExp("#"+t+"([^A-Za-z0-9_$]|$)","g"),function(e,t){return'"'+n+'"'+t}),e=unescape(e,r)}function escape(e,t){return e=e.replace(/\/\/[^\n]*$/gm,function(e){return" ___comment"+t.push(e)}),e=e.replace(/\/\*([^\*]|[\r\n]|(\*+([^\*\/]|[\r\n])))*\*+\//g,function(e){return" ___comment"+t.push(e)}),e=e.replace(/\'[^']*\'/g,function(e){return" ___string"+t.push(e)}),e=e.replace(/\"[^"]*\"/g,function(e){return" ___string"+t.push(e)}),e=e.replace(/\`[^`]*\`/g,function(e){return" ___string"+t.push(e)})}function unescape(e,t){return t.forEach(function(t,n){e=e.replace(" ___string"+(n+1),t)}),t.forEach(function(t,n){e=e.replace(" ___comment"+(n+1),t)}),e}function define(e){var t=/#[A-Za-z]+[ ]*([A-Za-z0-9_$]*)(?:\(([^\(\)]*)\))?[ \r]*([^\n]*)$/m.exec(e);e=e.slice(t.index+t[0].length);var n=t[1],r=t[2],o=t[3];if(!n||!o)throw Error('Macro definition "'+t[0]+'" is malformed');if(null!=r){var i=function(){for(var e=o,t=0;t<r.length;t++)e=processDefinition(e,r[t],arguments[t]);return e=process(e)};r=r.trim().length?r.split(/\s*,\s*/):[],Object.defineProperty(i,"length",{value:r.length}),macros[n]=i}else macros[n]=o;return e}function undefine(e){var t=/#[A-Za-z0-9_]+[ ]*([A-Za-z0-9_$]+)/.exec(e);return delete macros[t[1]],e.slice(t.index+t[0].length)}function processIf(str){var match=balanced("#if","#endif",str);if(!match)return str;var body=match.body,post=match.post,elseBody="",matchElse;if((matchElse=/^\s*#else[^\n\r]*$/m.exec(body))&&(elseBody=body.slice(matchElse.index+matchElse[0].length),body=body.slice(0,matchElse.index)),/^def/.test(body)){body=body.slice(3);var nameMatch=/[A-Za-z0-9_$]+/.exec(body),name=nameMatch[0];body=body.slice(name.length+nameMatch.index),str=process(null!=macros[name]?body:elseBody)}else if(/^ndef/.test(body)){body=body.slice(4);var nameMatch=/[A-Za-z0-9_$]+/.exec(body),name=nameMatch[0];body=body.slice(name.length+nameMatch.index),str=process(null==macros[name]?body:elseBody)}else{for(var clauses=body.split(/^\s*#elif\s+/m),result=!1,i=0;i<clauses.length;i++){var clause=clauses[i],exprMatch=/\s*(.*)/.exec(clause),expr=exprMatch[0];clause=clause.slice(expr.length+exprMatch.index),expr=process(expr);try{result=eval(expr)}catch(e){result=!1}if(result){str=process(clause);break}}result||(str=process(elseBody))}var match=/[\n\r]/.exec(post);return match&&(post=post.slice(match.index)),str+post}var source=what+"",macros=extend({__LINE__:0,__FILE__:"_",__VERSION__:100,defined:function(e){return[].slice.call(arguments).every(function(e){return null!=macros[e]})}},how);return process(source)}var paren=_dereq_("parenthesis"),balanced=_dereq_("balanced-match"),extend=_dereq_("xtend/mutable");module.exports=preprocess},{"balanced-match":297,parenthesis:294,"xtend/mutable":305}],297:[function(e,t,n){"use strict";function r(e,t,n){var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function o(e,t,n){var r,o,i,a,u,f=n.indexOf(e),c=n.indexOf(t,f+1),s=f;if(f>=0&&c>0){for(r=[],i=n.length;s<n.length&&s>=0&&!u;)s==f?(r.push(s),f=n.indexOf(e,s+1)):1==r.length?u=[r.pop(),c]:((o=r.pop())<i&&(i=o,a=c),c=n.indexOf(t,s+1)),s=f<c&&f>=0?f:c;r.length&&(u=[i,a])}return u}t.exports=r,r.range=o},{}],298:[function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function u(){b&&y&&(b=!1,y.length?m=y.concat(m):h=-1,m.length&&f())}function f(){if(!b){var e=i(u);b=!0;for(var t=m.length;t;){for(y=m,m=[];++h<t;)y&&y[h].run();h=-1,t=m.length}y=null,b=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function s(){}var l,p,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(e){p=o}}();var y,m=[],b=!1,h=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||b||i(f)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],299:[function(e,t,n){(function(n){"use strict";for(var r=e("performance-now"),o="undefined"==typeof window?n:window,i=["moz","webkit"],a="AnimationFrame",u=o["request"+a],f=o["cancel"+a]||o["cancelRequest"+a],c=0;!u&&c<i.length;c++)u=o[i[c]+"Request"+a],f=o[i[c]+"Cancel"+a]||o[i[c]+"CancelRequest"+a];if(!u||!f){var s=0,l=0,p=[];u=function(e){if(0===p.length){var t=r(),n=Math.max(0,1e3/60-(t-s));s=n+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(s)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return p.push({handle:++l,callback:e,cancelled:!1}),l},f=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}t.exports=function(e){return u.call(o,e)},t.exports.cancel=function(){f.apply(o,arguments)},t.exports.polyfill=function(){o.requestAnimationFrame=u,o.cancelAnimationFrame=f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":300}],300:[function(e,t,n){(function(e){"use strict";(function(){var n,r,o,i,a,u;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},r=e.hrtime,i=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),u=1e9*e.uptime(),a=i-u):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(void 0)}).call(this,e("_process"))},{_process:298}],301:[function(e,t,n){"use strict";function r(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||((e=document.createEvent("Event")).initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}var o=document||{},i=!0;try{o.createEvent("KeyEvents")}catch(e){i=!1}var a=function(e,t){t=t||{};var n=s(e),a=n;"KeyboardEvent"===n&&i&&(n="KeyEvents",a="KeyEvent");var u=o.createEvent(n),c="init"+a,l="function"==typeof u[c]?c:"initEvent",p=f[l],d=[],y={};t.type=e;for(var m=0;m<p.length;++m){var b=t[h=p[m]];void 0===b&&(b=u[h]),y[h]=!0,d.push(b)}u[l].apply(u,d),"KeyboardEvent"===n&&(u=r(u,t));for(var h in t)y[h]||(u[h]=t[h]);return u},u=function(e,t){t=t||{};var n=o.createEventObject();n.type=e;for(var r in t)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports=o.createEvent?a:u;var f=e("./init.json"),c=e("./types.json"),s=function(){var e={};for(var t in c)for(var n=c[t],r=0;r<n.length;r++)e[n[r]]=t;return function(t){return e[t]||"Event"}}()},{"./init.json":302,"./types.json":303}],302:[function(e,t,n){t.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],303:[function(e,t,n){t.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],304:[function(e,t,n){"use strict";function r(e,t,n){e.positions&&e.cells&&(n=t,t=e.cells,e=e.positions);var r=e.length?e[0].length:0,o=t.length?t[0].length:0;if(n=n||new Float32Array(t.length*o*r),3===o&&2===r)for(var i=0,a=0,u=t.length;i<u;i+=1){f=t[i];n[a++]=e[f[0]][0],n[a++]=e[f[0]][1],n[a++]=e[f[1]][0],n[a++]=e[f[1]][1],n[a++]=e[f[2]][0],n[a++]=e[f[2]][1]}else if(3===o&&3===r)for(var i=0,a=0,u=t.length;i<u;i+=1){f=t[i];n[a++]=e[f[0]][0],n[a++]=e[f[0]][1],n[a++]=e[f[0]][2],n[a++]=e[f[1]][0],n[a++]=e[f[1]][1],n[a++]=e[f[1]][2],n[a++]=e[f[2]][0],n[a++]=e[f[2]][1],n[a++]=e[f[2]][2]}else for(var i=0,a=0,u=t.length;i<u;i+=1)for(var f=t[i],c=0;c<f.length;c++)for(var s=f[c],l=0;l<r;l++)n[a++]=e[s][l];return n}t.exports=r},{}],305:[function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)o.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var o=Object.prototype.hasOwnProperty},{}]},{},[62])(62)});
