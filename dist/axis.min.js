(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Axis = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraCommand=exports.kDefaultCameraFieldOfView=exports.kDefaultCameraNear=exports.kDefaultCameraFar=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);}return e}; var _perspectiveCamera=require("perspective-camera"); var _perspectiveCamera2=_interopRequireDefault(_perspectiveCamera); var _eyeVector=require("eye-vector"); var _eyeVector2=_interopRequireDefault(_eyeVector); var _utils=require("./utils"); var _object3d=require("./object3d"); var _stats=require("./stats"); var _math=require("./math"); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _glMat=require("gl-mat4"); var _glMat2=_interopRequireDefault(_glMat); var _glVec=require("gl-vec3"); var _glVec2=_interopRequireDefault(_glVec); var _glQuat=require("gl-quat"); var _glQuat2=_interopRequireDefault(_glQuat); var scratch=_glMat2.default.identity([]); var isArray=Array.isArray;module.exports=exports=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(CameraCommand,[null].concat(t)))};var kDefaultCameraFar=exports.kDefaultCameraFar=1e3; var kDefaultCameraNear=exports.kDefaultCameraNear=.01; var kDefaultCameraFieldOfView=exports.kDefaultCameraFieldOfView=(0,_utils.radians)(60); var kMat4Identity=_glMat2.default.identity([]); var CameraCommand=exports.CameraCommand=function(e){function t(e){function r(e){var t=e.fov,r=void 0===t?p.fov:t,n=e.far,o=void 0===n?p.far:n,a=e.near,i=void 0===a?p.near:a,u=!1;r&&p.fov!=r&&(p.fov=r,u=!0),o&&p.far!=o&&(p.far=o,u=!0),i&&p.near!=i&&(p.near=i,u=!0),u&&(console.log("update"),p.update());}function n(e){var t=e.viewportTop,n=void 0===t?-1:t,o=e.viewportLeft,u=void 0===o?-1:o,f=e.viewportWidth,c=e.viewportHeight,l=e.position,s=e.rotation,d=e.scale,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=y.target,m=void 0===_?[].concat(_toConsumableArray(a)):_;if(r(y),Object.assign(p.viewport,[u,n,f,c]),l&&s&&d)return p.identity(),_glMat2.default.identity(i),_glVec2.default.multiply(p.position,l,d),p.lookAt(_glVec2.default.multiply([],m,d)),p.update(),_glMat2.default.copy(i,p.view),_glMat2.default.scale(i,i,d),_glMat2.default.multiply(i,i,_glMat2.default.fromQuat([],_glQuat2.default.normalize([],s))),i}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.registerStat)("Camera");var a=o.target||new _math.Vector(0,0,0),i=_glMat2.default.identity([]),u=new _math.Vector(0,0,0),f=(0,_defined2.default)(o.fov,o.fieldOfView,kDefaultCameraFieldOfView),c=(0,_defined2.default)(o.far,kDefaultCameraFar),l=(0,_defined2.default)(o.near,kDefaultCameraNear),p=(0,_perspectiveCamera2.default)({position:[].concat(_toConsumableArray(o.position||[0,0,0])),near:l,fov:f,far:c}),s={aspect:function(e){var t=e.viewportWidth,r=e.viewportHeight;return t/r},projection:function(e,t){return _objectDestructuringEmpty(e),r(t),p.projection.slice()},view:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n.apply(void 0,arguments),i}),direction:function(e,t){return _objectDestructuringEmpty(e),r(t),p.direction},near:function(e,t){return _objectDestructuringEmpty(e),r(t),p.near},far:function(e,t){return _objectDestructuringEmpty(e),r(t),p.far},fov:function(e,t){return _objectDestructuringEmpty(e),r(t),p.fov},eye:function(){return(0,_eyeVector2.default)(i,u),u},up:function(e,t){return _objectDestructuringEmpty(e),r(t),p.up},createPickingRay:function(e){var t=e.viewportHeight,r=0,n=0;return function(e){return e(function(e){var o=e.currentX,a=e.currentY;r=o,n=t-a;}),p.createPickingRay([r,n])}}},d={projection:function(e){var t=e.projection;return t},aspect:function(e){var t=e.aspect;return t},view:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.view;return t||kMat4Identity}),eye:function(){return[].concat(_toConsumableArray(u))}},y=e.regl({context:s,uniforms:d}),_=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},o,{transform:!1,update:function(e,t,r){_objectDestructuringEmpty(e),y(t,r);}})));return _}return _inherits(t,e),t}(_object3d.Object3DCommand);

},{"./math":35,"./object3d":40,"./stats":42,"./utils":44,"defined":54,"eye-vector":57,"gl-mat4":87,"gl-quat":112,"gl-vec3":169,"perspective-camera":238}],2:[function(require,module,exports){
'use strict';

function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":_typeof(n))&&"function"!=typeof n?t:n}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":_typeof(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n);}function codegen(t){return"return "+encode(t)+".apply(this, arguments);"}function commandRunnerWrap(t){if(this&&"function"==typeof t){for(var n=arguments.length,o=Array(n>1?n-1:0),e=1;e<n;e++)o[e-1]=arguments[e];return t.apply(t,o)}return this}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0});var encode=function(t){return"("+String(t)+")"}; var noop=function(){};module.exports=exports=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return new(Function.prototype.bind.apply(Command,[null].concat(n)))};var Command=exports.Command=function(t){function n(t){var o;_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,codegen(commandRunnerWrap)));t="function"==typeof t?t:noop;var r=function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.apply(void 0,[t].concat(o))},u=e;return o=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.call.apply(r,[u].concat(n))},_possibleConstructorReturn(e,o)}return _inherits(n,t),n}(Function);

},{}],3:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof3(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof3(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Context=exports.defaults=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)}; var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(); var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);}return e}; var _stats=require("./stats"); var _events=require("events"); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _domEvents=require("dom-events"); var _domEvents2=_interopRequireDefault(_domEvents); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var _regl=require("regl"); var _regl2=_interopRequireDefault(_regl); var defaults=exports.defaults={clear:{color:[17/255,17/255,17/255,1],depth:1}};module.exports=exports=function(e,t){return new Context(_extends({},defaults,e),t)};var Context=exports.Context=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_regl2.default;_classCallCheck(this,t),(0,_stats.registerStat)("Context");var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._state=_extends({},e),r._hasFocus=!1,r._reglContext=null,n.regl=(0,_defined2.default)(n.regl,n.gl||{}),n.element&&"CANVAS"==n.element.nodeName?n.regl.canvas=n.element:n.element&&n.element.nodeName?n.regl.container=n.element:"string"==typeof n.element&&(n.regl.container=n.element),o(_extends({},n.regl,{attributes:_extends({},n.regl.attributes||{}),extensions:[].concat(_toConsumableArray(n.regl.extensions||[]),["OES_texture_float"]),optionalExtensions:[].concat(_toConsumableArray(n.regl.optionalExtensions||[])),onDone:function(e,t){return e?r.emit("error",e):(r._regl=t,r._domElement=r._regl._gl.canvas,void(r._isDestroyed=!1))}})),r.setMaxListeners(1/0),_domEvents2.default.on(r._domElement,"focus",function(){return r.focus()}),_domEvents2.default.on(r._domElement,"blur",function(){return r.blur()}),_domEvents2.default.on(window,"blur",function(){return r.blur()}),_domEvents2.default.on(document,"mousedown",function(e){e.target==r._domElement?ctx.focus():ctx.blur();}),r}return _inherits(t,e),_createClass(t,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"update",value:function(e){return e&&"object"==("undefined"==typeof e?"undefined":_typeof(e))&&Object.assign(this._state,e),this}},{key:"clear",value:function(){return this._regl&&this._state&&this._regl.clear(this._state.clear),this}},{key:"destroy",value:function(){return this.clear(),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._state={},this._hasFocus=!1,this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._domElement,delete this._reglContext,this}},{key:"refresh",value:function(){return this._regl&&"function"==typeof this._regl._refresh&&this._regl.refresh(),this}},{key:"reglContext",get:function(){return this._reglContext||null}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl._gl||null}}]),t}(_events.EventEmitter);

},{"./stats":42,"defined":54,"dom-events":55,"events":56,"glslify":39,"regl":254}],4:[function(require,module,exports){
'use strict';

function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?n:t}function _inherits(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(n){return"undefined"==typeof n?"undefined":_typeof2(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":"undefined"==typeof n?"undefined":_typeof2(n)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrameCommand=void 0;var _command=require("./command"); var _utils=require("./utils"); var _stats=require("./stats"); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var kDefaultFragmentShader="precision mediump float;\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n};\n\nstruct DirectionalLight {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// Exports\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\nstruct AmbientLightsContext {\n  int count;\n  AmbientLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct DirectionalLightsContext {\n  int count;\n  DirectionalLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct PointLightsContext {\n  int count;\n  PointLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct LightContext {\n  AmbientLightsContext ambient;\n  DirectionalLightsContext directional;\n  PointLightsContext point;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE FlatMaterial\n#endif\n\n// default material\n#ifndef useFlatMaterial\n#define useFlatMaterial 1\n#endif\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader uniforms.\n//\nuniform MATERIAL_TYPE material;\nuniform LightContext lightContext;\nuniform vec3 eye;\n\n#ifdef HAS_MAP\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\nuniform Map map;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n//utils\n// adapted from https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl\n\nfloat computeAttenuation(vec4 position, vec3 direction, float radius) {\n  float attenuation;\n  float angle;\n\n  if (0.0 == position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(clamp(1.0 - length(direction)/radius, 0.0, 1.0), 2.0);\n  }\n\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 computeDirection(vec4 lightPosition, vec3 position) {\n  vec3 direction;\n\n  if (lightPosition.w == 0.0) {\n    direction = normalize(lightPosition.xyz);\n  } else {\n    direction = lightPosition.xyz - position;\n  }\n\n  return direction;\n}\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\nprecision mediump float;\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 32\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 128\n#endif\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\nstruct PositionedLight_0 {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nPositionedLight_0\nPositionedLightUnpackDirectional_0(DirectionalLight light) {\n  return PositionedLight_0(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight_0\nPositionedLightUnpackPoint_0(PointLight light) {\n  return PositionedLight_0(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nvoid applyPositionedLight_0(\n    PositionedLight_0 light,\n    GeometryContext geometry,\n    in vec3 surfaceColor,\n    inout vec3 fragColor) {\n  if (false == light.visible) {\n    return;\n  }\n\n  vec3 viewpoint = normalize(eye - geometry.position);\n  vec3 direction = computeDirection(light.position, geometry.position);\n  vec3 ambient = light.ambient * material.ambient.xyz;\n\n  float attenuation =\n    computeAttenuation(\n        light.position,\n        direction,\n        light.radius);\n\n  float diffuse =\n    orenNayarDiffuse(\n        normalize(direction),\n        normalize(viewpoint),\n        geometry.normal,\n        material.roughness,\n        material.albedo);\n\n  // clamp coef\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  vec3 combined = diffuse * light.color.xyz * light.intensity;\n\n  // sum\n  fragColor +=\n    ambient\n  + attenuation\n  * combined\n  * surfaceColor\n  ;\n}\n\nvoid main_0() {\n  GeometryContext geometry = getGeometryContext();\n  vec3 fragColor = vec3(0.0);\n  vec3 surfaceColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, 1.0 - geometry.uv).rgb;\n  } else\n#endif\n  {\n    surfaceColor = material.color.xyz;\n  }\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    if (i >= lightContext.ambient.count) {\n      break;\n    }\n\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (light.visible) {\n      fragColor += (\n        vec4(surfaceColor, material.opacity) * light.color * material.ambient\n      ).xyz;\n    }\n  }\n\n  // adapted from https://github.com/freeman-lab/gl-lambert-material/blob/master/fragment.glsl\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    if (i >= lightContext.directional.count) {\n      break;\n    }\n\n    DirectionalLight light = lightContext.directional.lights[i];\n    applyPositionedLight_0(\n      PositionedLightUnpackDirectional_0(light),\n      geometry,\n      surfaceColor.xyz,\n      fragColor);\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    if (i >= lightContext.point.count) {\n      break;\n    }\n\n    PointLight light = lightContext.point.lights[i];\n    applyPositionedLight_0(\n      PositionedLightUnpackPoint_0(light),\n      geometry,\n      surfaceColor,\n      fragColor);\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n\n  //vec3 gamma = vec3(1.0/2.2);\n  //fragColor += vec4(pow(fragColor.xyz, gamma), 1.0);\n\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n//utils\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\nprecision mediump float;\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 32\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 128\n#endif\n\nstruct PositionedLight_1 {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nPositionedLight_1\nPositionedLightUnpackDirectional_1(DirectionalLight light) {\n  return PositionedLight_1(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight_1\nPositionedLightUnpackPoint_1(PointLight light) {\n  return PositionedLight_1(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nvoid applyPositionedLight_1(\n    PositionedLight_1 light,\n    GeometryContext geometry,\n    in vec3 surfaceColor,\n    inout vec3 fragColor) {\n  if (false == light.visible) {\n    return;\n  }\n\n  vec3 viewpoint = normalize(eye - geometry.position);\n  vec3 direction = computeDirection(light.position, geometry.position);\n  vec3 ambient = light.ambient * material.ambient.xyz;\n\n  float diffuse =\n    orenNayarDiffuse(\n        normalize(direction),\n        viewpoint,\n        geometry.normal,\n        material.roughness,\n        material.albedo);\n\n  // clamp coef\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  vec3 specular = vec3(0.0);\n\n  if (material.shininess > 0.0) {\n    float power = blinnPhongSpecular(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined = diffuse * surfaceColor * light.color.xyz * light.intensity;\n\n  fragColor += ambient + combined + specular;\n  ;\n}\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  vec3 fragColor = vec3(0.0);\n  vec3 surfaceColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, 1.0 - geometry.uv).rgb;\n  } else\n#endif\n  {\n    surfaceColor = material.color.xyz;\n  }\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    if (i >= lightContext.ambient.count) {\n      break;\n    }\n\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (light.visible) {\n      fragColor += (\n        vec4(surfaceColor, material.opacity) * light.color * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    if (i >= lightContext.directional.count) {\n      break;\n    }\n\n    DirectionalLight light = lightContext.directional.lights[i];\n    applyPositionedLight_1(\n      PositionedLightUnpackDirectional_1(light),\n      geometry,\n      surfaceColor.xyz,\n      fragColor);\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    if (i >= lightContext.point.count) {\n      break;\n    }\n\n    PointLight light = lightContext.point.lights[i];\n    applyPositionedLight_1(\n      PositionedLightUnpackPoint_1(light),\n      geometry,\n      surfaceColor,\n      fragColor);\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Flat shading model.\n//\nprecision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n//\n// Shader entry.\n//\n\nvoid main_1() {\n  GeometryContext geometry = getGeometryContext();\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, 1.0 - geometry.uv);\n  } else\n#endif\n  {\n    gl_FragColor = material.color;\n  }\n\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  } else {\n    gl_FragColor.a = material.opacity;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_0();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_2();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_1();\n}\n#elif defined SHADER_MAIN_BODY\nvoid main() {\n  SHADER_MAIN_BODY\n}\n#else\nvoid main() {\n  discard;\n}\n#endif\n";module.exports=exports=function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];return new(Function.prototype.bind.apply(FrameCommand,[null].concat(t)))};var FrameCommand=exports.FrameCommand=function(n){function t(n){function i(){f&&(r.splice(0,-1),f.cancel(),n._reglContext=l=f=null);}function e(){0==s&&(s=!0,f=o.frame(function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),s=1;s<e;s++)o[s-1]=arguments[s];l=t,n._reglContext=l;var f=l;f.viewportWidth,f.viewportHeight;try{c(function(t){n.reset(),n.clear(),a.splice(0,a.length);var i=!0,e=!1,s=void 0;try{for(var f,c=r[Symbol.iterator]();!(i=(f=c.next()).done);i=!0){var u=f.value;"function"==typeof u&&u.apply(void 0,[l].concat(o));}}catch(n){e=!0,s=n;}finally{try{!i&&c.return&&c.return();}finally{if(e)throw s}}});}catch(t){n.emit("error",t),i();}}));}_classCallCheck(this,t),(0,_stats.incrementStat)("Frame");var o=n.regl,r=[],a=[],l=null,s=!1,f=null,c=o({frag:kDefaultFragmentShader,context:{resolution:function(n){var t=n.viewportWidth,i=n.viewportHeight;return[t,i]},lights:function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){return a})},uniforms:{time:function(n){var t=n.time;return t}},blend:{equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},cull:{enable:!0,face:"back"},depth:{enable:!0,range:[0,1],mask:!0,func:"less"}}),u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(n){return r.push(n),(0,_stats.registerStat)("Frame refresh"),e(),i}));return u}return _inherits(t,n),t}(_command.Command);

},{"./command":2,"./stats":42,"./utils":44,"glslify":39}],5:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==("undefined"==typeof o?"undefined":_typeof(o))&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof o?"undefined":_typeof(o)));e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxGeometry=void 0;var _geo3dBox=require("geo-3d-box"); var _geo3dBox2=_interopRequireDefault(_geo3dBox); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];return new(Function.prototype.bind.apply(BoxGeometry,[null].concat(o)))};var BoxGeometry=exports.BoxGeometry=function(e){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.size,n=void 0===t?1:t,r=e.segments,i=void 0===r?1:r;return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,{flatten:!0,complex:(0,_geo3dBox2.default)({size:n,segments:i})}))}return _inherits(o,e),o}(_geometry.Geometry);

},{"./geometry":8,"geo-3d-box":58}],6:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CapsuleGeometry=void 0;var _primitiveCapsule=require("primitive-capsule"); var _primitiveCapsule2=_interopRequireDefault(_primitiveCapsule); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(CapsuleGeometry,[null].concat(t)))};var CapsuleGeometry=exports.CapsuleGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.radius,r=void 0===o?1:o,n=e.height,i=void 0===n?.5:n,u=e.segments,p=void 0===u?12:u,f=e.resolution,l=void 0===f?24:f;return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:(0,_primitiveCapsule2.default)(r,i,l,p)}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8,"primitive-capsule":242}],7:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CylinderGeometry=void 0;var _primitiveCylinder=require("primitive-cylinder"); var _primitiveCylinder2=_interopRequireDefault(_primitiveCylinder); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(CylinderGeometry,[null].concat(t)))};var CylinderGeometry=exports.CylinderGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.height,r=void 0===o?5:o,n=e.radiusTop,i=void 0===n?1:n,u=e.radiusBottom,y=void 0===u?1:u,f=e.radialSegments,l=void 0===f?50:f,p=e.heightSegments,c=void 0===p?50:p;return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:(0,_primitiveCylinder2.default)(i,y,r,l,c)}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8,"primitive-cylinder":243}],8:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=void 0;var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l);}}return function(n,t,l){return t&&e(n.prototype,t),l&&e(n,l),n}}(); var _screenProjectedLines=require("screen-projected-lines"); var _screenProjectedLines2=_interopRequireDefault(_screenProjectedLines); var _meshReindex=require("mesh-reindex"); var _meshReindex2=_interopRequireDefault(_meshReindex); var _unindexMesh=require("unindex-mesh"); var _unindexMesh2=_interopRequireDefault(_unindexMesh); var _angleNormals=require("angle-normals"); var _angleNormals2=_interopRequireDefault(_angleNormals);module.exports=exports=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return new(Function.prototype.bind.apply(Geometry,[null].concat(n)))};var Geometry=exports.Geometry=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.complex,l=void 0===t?null:t,r=n.flatten,i=void 0!==r&&r;_classCallCheck(this,e),Object.defineProperty(this,"simplicialComplex",{enumerable:!1,writable:!0,value:null}),this.flatten=i,this.complex=l||null;}return _createClass(e,[{key:"complex",set:function(n){if(n instanceof e&&(n=n.complex),n){if(this.flatten&&n.cells){var t=n.cells.map(function(e){return e.slice()}),l=(0,_meshReindex2.default)((0,_unindexMesh2.default)(n.positions,t));n.normals=(0,_angleNormals2.default)(l.cells,l.positions),Object.assign(n,l);}null==n.normals&&n.positions&&n.cells&&(n.normals=(0,_angleNormals2.default)(n.cells,n.positions));}return this.simplicialComplex=n,n},get:function(){return this.simplicialComplex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),e}();

},{"angle-normals":45,"mesh-reindex":229,"screen-projected-lines":255,"unindex-mesh":261}],9:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=exports.BoxGeometry=exports.TorusGeometry=exports.PlaneGeometry=exports.SphereGeometry=exports.CapsuleGeometry=exports.CylinderGeometry=exports.TriangleGeometry=void 0;var _triangle=require("./triangle"); var _triangle2=_interopRequireDefault(_triangle); var _cylinder=require("./cylinder"); var _cylinder2=_interopRequireDefault(_cylinder); var _capsule=require("./capsule"); var _capsule2=_interopRequireDefault(_capsule); var _sphere=require("./sphere"); var _sphere2=_interopRequireDefault(_sphere); var _plane=require("./plane"); var _plane2=_interopRequireDefault(_plane); var _torus=require("./torus"); var _torus2=_interopRequireDefault(_torus); var _box=require("./box"); var _box2=_interopRequireDefault(_box); var _geometry=require("./geometry"); var _geometry2=_interopRequireDefault(_geometry);exports.TriangleGeometry=_triangle2.default,exports.CylinderGeometry=_cylinder2.default,exports.CapsuleGeometry=_capsule2.default,exports.SphereGeometry=_sphere2.default,exports.PlaneGeometry=_plane2.default,exports.TorusGeometry=_torus2.default,exports.BoxGeometry=_box2.default,exports.Geometry=_geometry2.default;

},{"./box":5,"./capsule":6,"./cylinder":7,"./geometry":8,"./plane":10,"./sphere":11,"./torus":12,"./triangle":13}],10:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaneGeometry=void 0;var _primitivePlane=require("primitive-plane"); var _primitivePlane2=_interopRequireDefault(_primitivePlane); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(PlaneGeometry,[null].concat(t)))};var PlaneGeometry=exports.PlaneGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.segments,n=void 0===o?{x:1,y:1}:o,r=e.size,i=void 0===r?{x:1,y:1}:r;return _classCallCheck(this,t),n="number"==typeof n?{x:n,y:n}:n,i="number"==typeof i?{x:i,y:i}:i,_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:(0,_primitivePlane2.default)(n.x,n.y,i.x,i.y,{quad:!1})}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8,"primitive-plane":244}],11:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SphereGeometry=void 0;var _primitiveSphere=require("primitive-sphere"); var _primitiveSphere2=_interopRequireDefault(_primitiveSphere); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(SphereGeometry,[null].concat(t)))};var SphereGeometry=exports.SphereGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var o=e.radius,r=void 0===o?1:o,n=e.segments,i=void 0===n?32:n;return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:(0,_primitiveSphere2.default)(r,{segments:i})}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8,"primitive-sphere":245}],12:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TorusGeometry=void 0;var _primitiveTorus=require("primitive-torus"); var _primitiveTorus2=_interopRequireDefault(_primitiveTorus); var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(TorusGeometry,[null].concat(t)))};var TorusGeometry=exports.TorusGeometry=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.majorSegments,n=void 0===r?32:r,i=o.minorSegments,u=void 0===i?64:i,f=o.majorRadius,p=void 0===f?1:f,s=(o.minorRadius,o.arc),y=void 0===s?2*Math.PI:s;return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:(0,_primitiveTorus2.default)((e={majorSegments:n,minorSegments:u,majorRadius:p},_defineProperty(e,"minorSegments",u),_defineProperty(e,"arc",y),e))}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8,"primitive-torus":246}],13:[function(require,module,exports){
'use strict';

function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TriangleGeometry=void 0;var _geometry=require("./geometry");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(TriangleGeometry,[null].concat(t)))};var TriangleGeometry=exports.TriangleGeometry=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{flatten:!0,complex:{positions:[[-0,.5,0],[.5,-.5,0],[-.5,-.5,0]],normals:[[-0,1,0],[1,-1,0],[-1,-1,0]],uvs:[[-0,.5],[.5,-.5],[-.5,-.5]]}}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"./geometry":8}],14:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":_typeof(n))&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GeometryBufferComand=void 0;var _stats=require("./stats"); var _glslInjectDefines=require("glsl-inject-defines"); var _glslInjectDefines2=_interopRequireDefault(_glslInjectDefines); var _command=require("./command"); var _vector=require("./math/vector"); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var frag="#extension GL_EXT_draw_buffers: require\nprecision mediump float;\n#define GLSLIFY 1\n\n/**\n * Shader uniforms.\n */\n\n#ifdef HAS_ALBEDO\nuniform vec4 color;\n#endif\n\n/**\n * Shader IO.\n */\n\n#ifdef HAS_NORMALS\nvarying vec3 vnormal;\n#endif\n\n#ifdef HAS_POSITIONS\nvarying vec3 vposition;\n#endif\n\n/**\n * Shader entry.\n */\n\nvoid main () {\n#ifdef HAS_ALBEDO\n  gl_FragData[0] = color;\n#endif\n\n#ifdef HAS_NORMALS\n  gl_FragData[1] = vec4(vnormal, 1.0);\n#endif\n\n#ifdef HAS_POSITIONS\n  gl_FragData[2] = vec4(vposition, 1.0);\n#endif\n}\n";module.exports=exports=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return new(Function.prototype.bind.apply(GeometryBufferComand,[null].concat(n)))};var GeometryBufferComand=exports.GeometryBufferComand=function(e){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.fbo,r=void 0===o?null:o;_classCallCheck(this,n),(0,_stats.incrementStat)("GeometryBuffer");var f=e.regl;if(!f.hasExtension("webgl_draw_buffers"))throw new Error("GeometryBufferComand needs the 'webgl_draw_buffers' extension.");r=r||f.framebuffer({color:[f.texture({type:"float"}),f.texture({type:"float"}),f.texture({type:"float"})]});var i={};r.color&&r.color[0]&&(i.HAS_ALBEDO=""),r.color&&r.color[1]&&(i.HAS_NORMALS=""),r.color&&r.color[2]&&(i.HAS_POSITIONS="");var l=f({framebuffer:r,frag:(0,_glslInjectDefines2.default)(frag,i)}),u=0,a=0;return _possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,function(n,t){var o=!1;if("function"==typeof n&&(t=n,n={}),n=n||{},t=t||function(){},a!=e.reglContext.viewportWidth&&(a=e.reglContext.viewportWidth,o=!0),u!=e.reglContext.viewportHeight&&(u=e.reglContext.viewportHeight,o=!0),o)try{r.resize(a,u);}catch(e){console.error(e);}l(function(){e.clear(),t.apply(void 0,arguments);});}))}return _inherits(n,e),n}(_command.Command);

},{"./command":2,"./math/vector":37,"./stats":42,"glsl-inject-defines":217,"glslify":39}],15:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mesh=exports.Lines=exports.Frame=exports.Camera=exports.Context=exports.Texture=exports.Command=exports.Object3D=exports.GeometryBuffer=void 0;var _material=require("./material");Object.keys(_material).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _material[e]}});});var _geometry=require("./geometry");Object.keys(_geometry).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _geometry[e]}});});var _light=require("./light");Object.keys(_light).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _light[e]}});});var _input=require("./input");Object.keys(_input).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _input[e]}});});var _math=require("./math");Object.keys(_math).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _math[e]}});});var _geometry_buffer=require("./geometry_buffer"); var _geometry_buffer2=_interopRequireDefault(_geometry_buffer); var _object3d=require("./object3d"); var _object3d2=_interopRequireDefault(_object3d); var _command=require("./command"); var _command2=_interopRequireDefault(_command); var _texture=require("./texture"); var _texture2=_interopRequireDefault(_texture); var _context=require("./context"); var _context2=_interopRequireDefault(_context); var _camera=require("./camera"); var _camera2=_interopRequireDefault(_camera); var _frame=require("./frame"); var _frame2=_interopRequireDefault(_frame); var _lines=require("./lines"); var _lines2=_interopRequireDefault(_lines); var _mesh=require("./mesh"); var _mesh2=_interopRequireDefault(_mesh);exports.GeometryBuffer=_geometry_buffer2.default,exports.Object3D=_object3d2.default,exports.Command=_command2.default,exports.Texture=_texture2.default,exports.Context=_context2.default,exports.Camera=_camera2.default,exports.Frame=_frame2.default,exports.Lines=_lines2.default,exports.Mesh=_mesh2.default;

},{"./camera":1,"./command":2,"./context":3,"./frame":4,"./geometry":9,"./geometry_buffer":14,"./input":16,"./light":23,"./lines":27,"./material":29,"./math":35,"./mesh":38,"./object3d":40,"./texture":43}],16:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TouchInput=exports.MouseInput=exports.KeyboardInput=exports.OrientationInput=void 0;var _orientation=require("./orientation"); var _orientation2=_interopRequireDefault(_orientation); var _keyboard=require("./keyboard"); var _keyboard2=_interopRequireDefault(_keyboard); var _mouse=require("./mouse"); var _mouse2=_interopRequireDefault(_mouse); var _touch=require("./touch"); var _touch2=_interopRequireDefault(_touch);exports.OrientationInput=_orientation2.default,exports.KeyboardInput=_keyboard2.default,exports.MouseInput=_mouse2.default,exports.TouchInput=_touch2.default;

},{"./keyboard":17,"./mouse":18,"./orientation":19,"./touch":20}],17:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardInputCommand=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);}return e}; var _stats=require("../stats"); var _command=require("../command"); var _keycode=require("keycode"); var _keycode2=_interopRequireDefault(_keycode); var _domEvents=require("dom-events"); var _domEvents2=_interopRequireDefault(_domEvents);module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(KeyboardInputCommand,[null].concat(t)))};var KeyboardInputCommand=exports.KeyboardInputCommand=function(e){function t(e){function o(){for(var e in n)n[e]=!1;for(var t in r)r[t]=!1;}arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.registerStat)("KeyboardInput");var n={},r={};_domEvents2.default.on(document,"keydown",function(t){if(0!=e.hasFocus){var o=t.which||t.keyCode||t.charCode;null!=o&&(n[o]=!0,r[(0,_keycode2.default)(o)]=!0);}},!1),_domEvents2.default.on(document,"keyup",function(t){if(0!=e.hasFocus){var o=t.which||t.keyCode||t.charCode;null!=o&&(n[o]=!1,r[(0,_keycode2.default)(o)]=!1);}},!1),e.on("blur",function(){o();});var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},(t=t||function(){})(_extends({},e,{keycodes:n,keys:r}));}));return u}return _inherits(t,e),t}(_command.Command);

},{"../command":2,"../stats":42,"dom-events":55,"keycode":227}],18:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof3(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof3(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MouseInputCommand=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);}return e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)}; var _stats=require("../stats"); var _command=require("../command"); var _mouseChange=require("mouse-change"); var _mouseChange2=_interopRequireDefault(_mouseChange); var _mouseWheel=require("mouse-wheel"); var _mouseWheel2=_interopRequireDefault(_mouseWheel); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _domEvents=require("dom-events"); var _domEvents2=_interopRequireDefault(_domEvents); var _raf=require("raf"); var _raf2=_interopRequireDefault(_raf);module.exports=exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(MouseInputCommand,[null].concat(t)))};var MouseInputCommand=exports.MouseInputCommand=function(e){function t(e){function n(e,t){"function"==typeof e&&(t=e,e={}),e="object"==("undefined"==typeof e?"undefined":_typeof(e))&&e?e:{},t="function"==typeof t?t:function(){},o(buttons,currentX,currentY),t(_extends({},e,{wheel:l,allowWheel:(0,_defined2.default)(e.allowWheel,i)},_extends({},a,{currentX:(0,_defined2.default)(e.currentX,a.currentX),currentY:(0,_defined2.default)(e.currentY,a.currentY)})));}function o(e,t,n){a.currentX==t&&a.currentY==n||(a.prevX=a.currentX,a.prevY=a.currentY,a.deltaX=t-a.currentX,a.deltaY=n-a.currentY,a.currentX=t,a.currentY=n),a.buttons=e,(0,_raf2.default)(function(){a.deltaX=0,a.deltaY=0;});}function r(e,t,n){var o=l.currentX,r=l.currentY,u=l.currentZ;Object.assign(l,{currentX:o+e,currentY:r+t,currentZ:u+n,deltaX:e,deltaY:t,deltaZ:n,prevX:o,prevY:r,prevZ:u}),(0,_raf2.default)(function(){return Object.assign(l,{deltaX:0,deltaY:0,deltaZ:0})});}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=u.allowWheel,i=void 0===f||f;_classCallCheck(this,t),(0,_stats.registerStat)("MouseInput");var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n)),l={currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},a={buttons:0,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0};return e.on("blur",function(){a.buttons=0;}),(0,_mouseChange2.default)(e.domElement,function(e,t,n){o(e,t,n);}),(0,_mouseWheel2.default)(e.domElement,function(e,t,n){!1!==i&&r(e,t,n);}),c}return _inherits(t,e),t}(_command.Command);

},{"../command":2,"../stats":42,"defined":54,"dom-events":55,"mouse-change":230,"mouse-wheel":233,"raf":248}],19:[function(require,module,exports){
'use strict';

function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrientationInputCommand=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);}return t};require("webvr-polyfill");var _quaternion=require("../math/quaternion"); var _stats=require("../stats"); var _command=require("../command"); var _domEvents=require("dom-events"); var _domEvents2=_interopRequireDefault(_domEvents); var _glQuat=require("gl-quat"); var _glQuat2=_interopRequireDefault(_glQuat); var _raf=require("raf"); var _raf2=_interopRequireDefault(_raf); var _math=require("../math"); var _utils=require("../utils"); var vrFrameData=new VRFrameData; var vrDisplays=[];navigator.getVRDisplays().then(function(t){Object.assign(vrDisplays,t);}).catch(function(t){console.error(t.stack||t);});var globalState={hasDeviceOrientation:!1,absolute:null,currentAlpha:0,currentBeta:90,currentGamma:0,deltaAlpha:0,deltaBeta:0,deltaGamma:0,prevAlpha:0,prevBeta:0,prevGamma:0};_domEvents2.default.on(window,"deviceorientation",function(t){var e=t.alpha,n=t.beta,r=t.gamma,a=t.absolute;return null==e||null==n||null==r?void(globalState.hasDeviceOrientation=!1):(globalState.hasDeviceOrientation=!0,Object.assign(globalState,{absolute:a,currentAlpha:e,currentBeta:n,currentGamma:r,deltaAlpha:e-globalState.currentAlpha,deltaBeta:n-globalState.currentBeta,deltaGamma:r-globalState.currentGamma,prevAlpha:globalState.currentAlpha,prevBeta:globalState.currentBeta,prevGamma:globalState.currentGamma}),void(0,_raf2.default)(function(){return Object.assign(globalState,{deltaAlpha:0,deltaBeta:0,deltaGamma:0})}))}),_domEvents2.default.on(window,"devicemotion",function(t){Object.assign(globalState,{accelerationIncludingGravity:t.accelerationIncludingGravity,acceleration:t.acceleration,rotationRate:t.rotationRate,interval:t.interval});}),module.exports=exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(OrientationInputCommand,[null].concat(e)))};var OrientationInputCommand=exports.OrientationInputCommand=function(t){function e(t){function n(){vrDisplays.length&&(vrDisplays[0].getFrameData(vrFrameData),a.set.apply(a,_toConsumableArray(vrFrameData.pose.orientation||[0,0,0,1])),o.set.apply(o,_toConsumableArray((0,_quaternion.computeEuler)(a))));}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(r),_classCallCheck(this,e),(0,_stats.registerStat)("OrienationInput");var a=new _math.Quaternion,o=new _math.Euler,i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{},e=e||function(){},n(),e(_extends({},globalState,{deviceRotation:a,deviceEuler:o}));}));return i}return _inherits(e,t),e}(_command.Command);

},{"../command":2,"../math":35,"../math/quaternion":36,"../stats":42,"../utils":44,"dom-events":55,"gl-quat":112,"raf":248,"webvr-polyfill":262}],20:[function(require,module,exports){
'use strict';

function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TouchInputCommand=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);}return t}; var _touchPosition=require("touch-position"); var _stats=require("../stats"); var _command=require("../command"); var _domEvents=require("dom-events"); var _domEvents2=_interopRequireDefault(_domEvents); var _raf=require("raf"); var _raf2=_interopRequireDefault(_raf);module.exports=exports=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return new(Function.prototype.bind.apply(TouchInputCommand,[null].concat(e)))};var TouchInputCommand=exports.TouchInputCommand=function(t){function e(t){function o(t,e,o){u=t,c==e&&a==o||(y=c,v=a,s=e-c,d=o-a,c=e,a=o,(0,_raf2.default)(function(){s=0,d=0;}));}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.touches,u=void 0===r?null:r,i=n.currentX,c=void 0===i?0:i,f=n.currentY,a=void 0===f?0:f,l=n.deltaX,s=void 0===l?0:l,p=n.deltaY,d=void 0===p?0:p,m=n.prevX,y=void 0===m?0:m,_=n.prevY,v=void 0===_?0:_,h=n.touch,b=void 0===h?(0,_touchPosition.emitter)({element:t.domElement}):h;_classCallCheck(this,e),(0,_stats.registerStat)("TouchInput");var E=!1,C=!1;_domEvents2.default.on(document,"touchstart",function(e){e.target==t.domElement?t.focus():t.blur();}),_domEvents2.default.on(t.domElement,"touchstart",function(t){var e=t.touches[0].clientX,o=t.touches[0].clientY;t.preventDefault(),C=!0,u=t.targetTouches,c=e,a=o,s=0,d=0,y=0,v=0;}),_domEvents2.default.on(t.domElement,"touchend",function(t){t.preventDefault(),(0,_raf2.default)(function(){E=!1,C=!1,u=null,c=0,a=0,s=0,d=0,y=0,v=0;});}),b.on("move",function(t){var e=t.clientX,n=t.clientY;E=!0,o(u,e,n);});var S=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{},e=e||function(){},"currentX"in t&&(c=t.currentX),"currentY"in t&&(a=t.currentY),o(u,c,a),e(_extends({},t,{hasMovement:E,hasTouch:C,currentX:c,currentY:a,touches:u,deltaX:s,deltaY:d,prevX:y,prevY:v}));}));return S}return _inherits(e,t),e}(_command.Command);

},{"../command":2,"../stats":42,"dom-events":55,"raf":248,"touch-position":260}],21:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmbientLightCommand=exports.kMaxAmbientLights=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);}return t}; var _stats=require("../stats"); var _light=require("./light"); var _types=require("./types");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return new(Function.prototype.bind.apply(AmbientLightCommand,[null].concat(e)))};var kMaxAmbientLights=exports.kMaxAmbientLights=16; var AmbientLightCommand=exports.AmbientLightCommand=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("AmbientLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},o,{ambient:.01,type:_types.AmbientLight})))}return _inherits(e,t),e}(_light.LightCommand);

},{"../stats":42,"./light":24,"./types":26}],22:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLightCommand=exports.kMaxDirectionalLights=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);}return t}; var _stats=require("../stats"); var _light=require("./light"); var _types=require("./types");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return new(Function.prototype.bind.apply(DirectionalLightCommand,[null].concat(e)))};var kMaxDirectionalLights=exports.kMaxDirectionalLights=32; var DirectionalLightCommand=exports.DirectionalLightCommand=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("DirectionalLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},o,{intensity:5,radius:80,type:_types.DirectionalLight})))}return _inherits(e,t),e}(_light.LightCommand);

},{"../stats":42,"./light":24,"./types":26}],23:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Light=exports.PointLight=exports.AmbientLight=exports.DirectionalLight=void 0;var _directional=require("./directional"); var _directional2=_interopRequireDefault(_directional); var _ambient=require("./ambient"); var _ambient2=_interopRequireDefault(_ambient); var _point=require("./point"); var _point2=_interopRequireDefault(_point); var _light=require("./light"); var _light2=_interopRequireDefault(_light);exports.DirectionalLight=_directional2.default,exports.AmbientLight=_ambient2.default,exports.PointLight=_point2.default,exports.Light=_light2.default;

},{"./ambient":21,"./directional":22,"./light":24,"./point":25}],24:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightCommand=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);}return e}; var _types=require("./types"); var types=_interopRequireWildcard(_types); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _glVec=require("gl-vec3"); var _glVec2=_interopRequireDefault(_glVec); var _stats=require("../stats"); var _object3d=require("../object3d"); var _mesh=require("../mesh"); var _flat=require("../material/flat"); var LIGHT_COMMAND_COUNTER=0;module.exports=exports=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return new(Function.prototype.bind.apply(LightCommand,[null].concat(t)))};var LightCommand=exports.LightCommand=function(e){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.incrementStat)("Light");var n=e.regl,r=(LIGHT_COMMAND_COUNTER++,o.intensity),i=void 0===r?10:r,u=o.position,a=void 0===u?[0,0,0]:u,f=(o.rotation,o.ambient),l=void 0===f?.1:f,d=o.visible,s=void 0===d||d,c=o.radius,p=void 0===c?50:c,y=o.color,_=void 0===y?[1,1,1,1]:y,b=o.type,m=void 0===b?types[0]:b,v={},h=new _flat.FlatMaterialCommand(e),g=n({context:v});return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},o,{transform:!1,update:function e(t,n,r){var u=t.transform,f=t.position,d=t.lights,c=n.intensity,y=void 0===c?i:c,b=(n.rotation,n.ambient),v=void 0===b?l:b,C=n.visible,O=void 0===C?s:C,j=n.radius,w=void 0===j?p:j,q=n.color,S=void 0===q?_:q,D=n.type,E=void 0===D?m:D,R=Object.keys(types).find(function(e){return(E||m)==types[e]}),x=0;(E||m)==types.DirectionalLight?x=1:(E||m)==types.PointLight&&(x=0);var A={};A.intensity=(0,_defined2.default)(y,i),A.position=(0,_defined2.default)([].concat(_toConsumableArray(f||a),[x])),A.ambient=(0,_defined2.default)(v,l),A.visible=(0,_defined2.default)(O,s),A.radius=(0,_defined2.default)(w,p),A.color=(0,_defined2.default)(S,_),A.type=(0,_defined2.default)(E,m),A.typeName=R,_glVec2.default.transformMat4(A.position,A.position,u),d.push(A);var e=o.update||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_objectDestructuringEmpty(e);var t=arguments[1];return t()};h(arguments[1],function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(t),g(o,function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(t),e(o,function(){r.apply(void 0,arguments);});});});}})))}return _inherits(t,e),t}(_object3d.Object3DCommand);

},{"../material/flat":28,"../mesh":38,"../object3d":40,"../stats":42,"./types":26,"defined":54,"gl-vec3":169}],25:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLightCommand=exports.kMaxPointLights=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);}return t}; var _stats=require("../stats"); var _light=require("./light"); var _types=require("./types"); var _sphere=require("../geometry/sphere"); var _geometry=require("../geometry/geometry"); var _mesh=require("../mesh");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return new(Function.prototype.bind.apply(PointLightCommand,[null].concat(e)))};var kMaxPointLights=exports.kMaxPointLights=128; var PointLightCommand=exports.PointLightCommand=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("PointLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},o,{intensity:.5,ambient:.005,radius:.01,type:_types.PointLight,update:function(t,e){var o=function(){};"function"==typeof t&&(e=t,t={}),t=t||{},(e=e||o)();}})))}return _inherits(e,t),e}(_light.LightCommand);

},{"../geometry/geometry":8,"../geometry/sphere":11,"../mesh":38,"../stats":42,"./light":24,"./types":26}],26:[function(require,module,exports){
'use strict';

Object.defineProperty(exports,"__esModule",{value:!0});var i=0; var id=function(){return i++}; var Light=exports.Light=id(); var SpotLight=exports.SpotLight=id(); var PointLight=exports.PointLight=id(); var AmbientLight=exports.AmbientLight=id(); var DirectionalLight=exports.DirectionalLight=id();

},{}],27:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":_typeof(n))&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinesCommand=void 0;var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);}return e}; var _stats=require("./stats"); var _mesh=require("./mesh"); var _screenProjectedLines=require("screen-projected-lines"); var _screenProjectedLines2=_interopRequireDefault(_screenProjectedLines); var _geometry2=require("./geometry"); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var _angleNormals=require("angle-normals"); var _angleNormals2=_interopRequireDefault(_angleNormals); var _meshReindex=require("mesh-reindex"); var _meshReindex2=_interopRequireDefault(_meshReindex); var _unindexMesh=require("unindex-mesh"); var _unindexMesh2=_interopRequireDefault(_unindexMesh); var kDefaultVertexShader="precision highp float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\nvec4 linevoffset (vec4 p, vec4 n, float direction_0, float aspect_0) { \n  vec2 sp = p.xy/p.w*vec2(aspect_0,1);\n  vec2 sn = n.xy/n.w*vec2(aspect_0,1);\n  vec2 dir = normalize(sn-sp);\n  vec2 norm = dir.yx*vec2(-1.0/aspect_0,1);\n  return vec4(direction_0*norm,0,0);\n}\n\n//\n// Shader uniforms.\n//\nuniform float aspect;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat3 modelNormal;\nuniform mat4 view;\nuniform float time;\nuniform float thickness;\n\n//\n// Shader IO.\n//\nattribute vec3 nextPosition;\nattribute float direction;\nattribute vec3 position;\nattribute vec3 normal;\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\nvec3 lerp(vec3 a, vec3 b, float t) {\n  return vec3(\n    a.x + t * (b.x - a.x),\n    a.y + t * (b.y - a.y),\n    a.z + t * (b.z - a.z)\n  );\n}\n\n//\n// Shader entry.\n//\n\nvoid main() {\n  // @TODO(werle) - abstract to geomorping interface\n  //float p = random(position.xy);\n  //vec3 pos = lerp(position, position + vec3(p, p, p), cos(0.5*time));\n\n  // @TODO(werle) - abstract to geomorping interface\n  //float np = random(nextPosition.yz);\n  //vec3 npos = lerp(nextPosition, nextPosition + vec3(np, np, np), sin(0.1*time));\n  vec4 linePosition = projection * view * model * vec4(position, 1.0);\n  vec4 nextLinePosition = projection * view * model * vec4(nextPosition, 1.0);\n  vec4 lineOffset = linevoffset(\n      linePosition,\n      nextLinePosition,\n      direction, aspect);\n\n  gl_Position = linePosition + lineOffset*thickness;\n\n  // GeometryContext\n  vposition = (model * vec4(position, 1.0)).xyz;\n  vnormal = normalize(modelNormal * normal);\n}\n";module.exports=exports=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return new(Function.prototype.bind.apply(LinesCommand,[null].concat(n)))};var LinesCommand=exports.LinesCommand=function(e){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),(0,_stats.incrementStat)("Lines");var o=kDefaultVertexShader,r=t.geometry,i=t.thickness,s=void 0===i?.005:i,a=r,l=a.complex,c=void 0===l?r:l,u=c.cells.map(function(e){return e.slice()}),f=(0,_meshReindex2.default)((0,_unindexMesh2.default)(c.positions,u));c.normals=(0,_angleNormals2.default)(f.cells,f.positions),Object.assign({},c,u);var p=(0,_screenProjectedLines2.default)(c,{attributes:{normals:c.normals}});return p.normals=p.attributes.normals,r=new _geometry2.Geometry({complex:p,flatten:!1}),r.complex.normals=p.normals,_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,_extends({},t,{primitive:"triangles",geometry:r,vert:o,uniforms:{thickness:function(e,n){var t=n.thickness,o=void 0===t?s:t;return _objectDestructuringEmpty(e),o}},attributes:{nextPosition:p.nextPositions,direction:p.directions}})))}return _inherits(n,e),n}(_mesh.MeshCommand);

},{"./geometry":9,"./mesh":38,"./stats":42,"angle-normals":45,"glslify":39,"mesh-reindex":229,"screen-projected-lines":255,"unindex-mesh":261}],28:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlatMaterialCommand=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);}return t}; var _material=require("./material"); var _types=require("./types");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return new(Function.prototype.bind.apply(FlatMaterialCommand,[null].concat(e)))};var FlatMaterialCommand=exports.FlatMaterialCommand=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},o,{type:_types.FlatMaterial})))}return _inherits(e,t),e}(_material.MaterialCommand);

},{"./material":31,"./types":33}],29:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Material=exports.FlatMaterial=exports.PhongMaterial=exports.LambertMaterial=void 0;var _lambert=require("./lambert"); var _lambert2=_interopRequireDefault(_lambert); var _phong=require("./phong"); var _phong2=_interopRequireDefault(_phong); var _flat=require("./flat"); var _flat2=_interopRequireDefault(_flat); var _material=require("./material"); var _material2=_interopRequireDefault(_material);exports.LambertMaterial=_lambert2.default,exports.PhongMaterial=_phong2.default,exports.FlatMaterial=_flat2.default,exports.Material=_material2.default;

},{"./flat":28,"./lambert":30,"./material":31,"./phong":32}],30:[function(require,module,exports){
'use strict';

function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LambertMaterialCommand=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);}return t}; var _types=require("../light/types"); var lightTypes=_interopRequireWildcard(_types); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _ambient=require("../light/ambient"); var _directional=require("../light/directional"); var _point=require("../light/point"); var _material=require("./material"); var _types2=require("./types");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(LambertMaterialCommand,[null].concat(e)))};var LambertMaterialCommand=exports.LambertMaterialCommand=function(t){function e(t){function n(e){for(var n=e.which,r=e.type,i=e.max,o=e.defaults,a=function(e){var i="lightContext."+n+".lights["+e+"]",a=function(n,o){Object.assign(p,_defineProperty({},i+"."+n,function i(a,l){_objectDestructuringEmpty(a);var u=t.reglContext.lights,f=u===i?[]:u,s=f.filter(Boolean).filter(function(t){return t.type==r}),c=null;return c=s[e]?(0,_defined2.default)(s[e][n],l[n],o):o}));};for(var l in o)a(l,o[l]);},l=0;l<i;++l)a(l);}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var i=r.roughness,o=void 0===i?.8:i,a=r.emissive,l=void 0===a?[0,0,0,1]:a,u=r.ambient,f=void 0===u?[.5,.5,.5,1]:u,s=r.albedo,c=void 0===s?.6:s,p=_extends({"material.roughness":function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.roughness,r=void 0===n?o:n;return _objectDestructuringEmpty(t),r},"material.emissive":function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.emissive,r=void 0===n?l:n;return _objectDestructuringEmpty(t),r},"material.albedo":function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.albedo,r=void 0===n?c:n;return _objectDestructuringEmpty(t),r},"material.ambient":function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ambient,r=void 0===n?f:n;return _objectDestructuringEmpty(t),r},"lightContext.ambient.count":function(t){var e=t.lights,n=lightTypes.AmbientLight,r=e.filter(Boolean).filter(function(t){return t.type==n}).length;return r},"lightContext.directional.count":function(t){var e=t.lights,n=lightTypes.DirectionalLight,r=e.filter(Boolean).filter(function(t){return t.type==n}).length;return r},"lightContext.point.count":function(t){var e=t.lights,n=lightTypes.PointLight,r=e.filter(Boolean).filter(function(t){return t.type==n}).length;return r}},r.uniforms),y=_extends({},r.shaderDefines),d=[{which:"ambient",type:lightTypes.AmbientLight,max:_ambient.kMaxAmbientLights,defaults:{color:[0,0,0,0],visible:!1}},{which:"directional",type:lightTypes.DirectionalLight,max:_directional.kMaxDirectionalLights,defaults:{position:[0,0,0,0],color:[0,0,0,0],visible:!1,radius:0,ambient:0,intensity:0}},{which:"point",type:lightTypes.PointLight,max:_point.kMaxPointLights,defaults:{position:[0,0,0,0],color:[0,0,0,0],visible:!1,radius:0,ambient:0,intensity:0}}].concat(_toConsumableArray(r.lightContext||[])),h=!0,m=!1,b=void 0;try{for(var _,g=d[Symbol.iterator]();!(h=(_=g.next()).done);h=!0){var v=_.value;n(v);}}catch(t){m=!0,b=t;}finally{try{!h&&g.return&&g.return();}finally{if(m)throw b}}var x=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},r,{shaderDefines:y,uniforms:p,type:r.type||_types2.LambertMaterial})));return x}return _inherits(e,t),e}(_material.MaterialCommand);

},{"../light/ambient":21,"../light/directional":22,"../light/point":25,"../light/types":26,"./material":31,"./types":33,"defined":54}],31:[function(require,module,exports){
'use strict';

function _interopRequireWildcard(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}function _defineProperty(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _objectDestructuringEmpty(n){if(null==n)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?n:e}function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(n){return"undefined"==typeof n?"undefined":_typeof2(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":"undefined"==typeof n?"undefined":_typeof2(n)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaterialCommand=void 0;var _extends=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);}return n}; var _glslInjectDefines=require("glsl-inject-defines"); var _glslInjectDefines2=_interopRequireDefault(_glslInjectDefines); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var _glVec=require("gl-vec4"); var _glVec2=_interopRequireDefault(_glVec); var _types=require("./types"); var types=_interopRequireWildcard(_types); var _texture=require("../texture"); var _stats=require("../stats"); var _command=require("../command"); var _utils=require("../utils"); var kDefaultFragmentShader="precision mediump float;\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n};\n\nstruct DirectionalLight {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// Exports\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\nstruct AmbientLightsContext {\n  int count;\n  AmbientLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct DirectionalLightsContext {\n  int count;\n  DirectionalLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct PointLightsContext {\n  int count;\n  PointLight lights[MAX_AMBIENT_LIGHTS];\n};\n\nstruct LightContext {\n  AmbientLightsContext ambient;\n  DirectionalLightsContext directional;\n  PointLightsContext point;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE FlatMaterial\n#endif\n\n// default material\n#ifndef useFlatMaterial\n#define useFlatMaterial 1\n#endif\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader uniforms.\n//\nuniform MATERIAL_TYPE material;\nuniform LightContext lightContext;\nuniform vec3 eye;\n\n#ifdef HAS_MAP\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\nuniform Map map;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n//utils\n// adapted from https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl\n\nfloat computeAttenuation(vec4 position, vec3 direction, float radius) {\n  float attenuation;\n  float angle;\n\n  if (0.0 == position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(clamp(1.0 - length(direction)/radius, 0.0, 1.0), 2.0);\n  }\n\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 computeDirection(vec4 lightPosition, vec3 position) {\n  vec3 direction;\n\n  if (lightPosition.w == 0.0) {\n    direction = normalize(lightPosition.xyz);\n  } else {\n    direction = lightPosition.xyz - position;\n  }\n\n  return direction;\n}\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\nprecision mediump float;\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 32\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 128\n#endif\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\nstruct PositionedLight_0 {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nPositionedLight_0\nPositionedLightUnpackDirectional_0(DirectionalLight light) {\n  return PositionedLight_0(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight_0\nPositionedLightUnpackPoint_0(PointLight light) {\n  return PositionedLight_0(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nvoid applyPositionedLight_0(\n    PositionedLight_0 light,\n    GeometryContext geometry,\n    in vec3 surfaceColor,\n    inout vec3 fragColor) {\n  if (false == light.visible) {\n    return;\n  }\n\n  vec3 viewpoint = normalize(eye - geometry.position);\n  vec3 direction = computeDirection(light.position, geometry.position);\n  vec3 ambient = light.ambient * material.ambient.xyz;\n\n  float attenuation =\n    computeAttenuation(\n        light.position,\n        direction,\n        light.radius);\n\n  float diffuse =\n    orenNayarDiffuse(\n        normalize(direction),\n        normalize(viewpoint),\n        geometry.normal,\n        material.roughness,\n        material.albedo);\n\n  // clamp coef\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  vec3 combined = diffuse * light.color.xyz * light.intensity;\n\n  // sum\n  fragColor +=\n    ambient\n  + attenuation\n  * combined\n  * surfaceColor\n  ;\n}\n\nvoid main_0() {\n  GeometryContext geometry = getGeometryContext();\n  vec3 fragColor = vec3(0.0);\n  vec3 surfaceColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, 1.0 - geometry.uv).rgb;\n  } else\n#endif\n  {\n    surfaceColor = material.color.xyz;\n  }\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    if (i >= lightContext.ambient.count) {\n      break;\n    }\n\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (light.visible) {\n      fragColor += (\n        vec4(surfaceColor, material.opacity) * light.color * material.ambient\n      ).xyz;\n    }\n  }\n\n  // adapted from https://github.com/freeman-lab/gl-lambert-material/blob/master/fragment.glsl\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    if (i >= lightContext.directional.count) {\n      break;\n    }\n\n    DirectionalLight light = lightContext.directional.lights[i];\n    applyPositionedLight_0(\n      PositionedLightUnpackDirectional_0(light),\n      geometry,\n      surfaceColor.xyz,\n      fragColor);\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    if (i >= lightContext.point.count) {\n      break;\n    }\n\n    PointLight light = lightContext.point.lights[i];\n    applyPositionedLight_0(\n      PositionedLightUnpackPoint_0(light),\n      geometry,\n      surfaceColor,\n      fragColor);\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n\n  //vec3 gamma = vec3(1.0/2.2);\n  //fragColor += vec4(pow(fragColor.xyz, gamma), 1.0);\n\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n//utils\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\nprecision mediump float;\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 32\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 128\n#endif\n\nstruct PositionedLight_1 {\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nPositionedLight_1\nPositionedLightUnpackDirectional_1(DirectionalLight light) {\n  return PositionedLight_1(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight_1\nPositionedLightUnpackPoint_1(PointLight light) {\n  return PositionedLight_1(\n    light.position,\n    light.color,\n    light.visible,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nvoid applyPositionedLight_1(\n    PositionedLight_1 light,\n    GeometryContext geometry,\n    in vec3 surfaceColor,\n    inout vec3 fragColor) {\n  if (false == light.visible) {\n    return;\n  }\n\n  vec3 viewpoint = normalize(eye - geometry.position);\n  vec3 direction = computeDirection(light.position, geometry.position);\n  vec3 ambient = light.ambient * material.ambient.xyz;\n\n  float diffuse =\n    orenNayarDiffuse(\n        normalize(direction),\n        viewpoint,\n        geometry.normal,\n        material.roughness,\n        material.albedo);\n\n  // clamp coef\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  vec3 specular = vec3(0.0);\n\n  if (material.shininess > 0.0) {\n    float power = blinnPhongSpecular(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined = diffuse * surfaceColor * light.color.xyz * light.intensity;\n\n  fragColor += ambient + combined + specular;\n  ;\n}\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  vec3 fragColor = vec3(0.0);\n  vec3 surfaceColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, 1.0 - geometry.uv).rgb;\n  } else\n#endif\n  {\n    surfaceColor = material.color.xyz;\n  }\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    if (i >= lightContext.ambient.count) {\n      break;\n    }\n\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (light.visible) {\n      fragColor += (\n        vec4(surfaceColor, material.opacity) * light.color * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    if (i >= lightContext.directional.count) {\n      break;\n    }\n\n    DirectionalLight light = lightContext.directional.lights[i];\n    applyPositionedLight_1(\n      PositionedLightUnpackDirectional_1(light),\n      geometry,\n      surfaceColor.xyz,\n      fragColor);\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    if (i >= lightContext.point.count) {\n      break;\n    }\n\n    PointLight light = lightContext.point.lights[i];\n    applyPositionedLight_1(\n      PositionedLightUnpackPoint_1(light),\n      geometry,\n      surfaceColor,\n      fragColor);\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Flat shading model.\n//\nprecision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n//\n// Shader entry.\n//\n\nvoid main_1() {\n  GeometryContext geometry = getGeometryContext();\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, 1.0 - geometry.uv);\n  } else\n#endif\n  {\n    gl_FragColor = material.color;\n  }\n\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  } else {\n    gl_FragColor.a = material.opacity;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_0();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_2();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_1();\n}\n#elif defined SHADER_MAIN_BODY\nvoid main() {\n  SHADER_MAIN_BODY\n}\n#else\nvoid main() {\n  discard;\n}\n#endif\n";module.exports=exports=function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(MaterialCommand,[null].concat(e)))};var MaterialCommand=exports.MaterialCommand=function(n){function e(n){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Material");var o=i.transparent,r=void 0!==o&&o,a=i.blending,l=void 0===a?{}:a,s=i.opacity,c=void 0===s?1:s,f=i.culling,u=void 0===f?{}:f,d=i.shader,g=void 0===d?kDefaultFragmentShader:d,m=i.color,p=void 0===m?[100/255,110/255,1,1]:m,h=i.depth,v=void 0===h?{}:h,y=i.type,_=void 0===y?types.Material:y,b=i.map,C=void 0===b?null:b,L=n.regl,x=_extends({equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},l);"boolean"==typeof l&&(x.enable=l),"boolean"==typeof r&&(x.enable=r);var A=_extends({enable:!0,face:"back"},u),P=_extends({enable:!0,range:[0,1],mask:!0,func:"less"},v);l=_extends({},x),u=_extends({},A),v=_extends({},P);var M=L.texture(),D=_extends({"material.opacity":function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.opacity,i=void 0===t?c:t;return _objectDestructuringEmpty(n),i},"material.color":function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.color,i=void 0===t?p:t;return _objectDestructuringEmpty(n),(0,_utils.ensureRGBA)(i)},"material.type":function(){return _||types.Material},"map.resolution":function(n){var e=n.textureResolution,t=n.textureData;return t?e||[0,0]:[0,0]},"map.data":function(n){var e=n.texture,t=n.textureData;return t?e:M}},i.uniforms),I=Object.keys(types).find(function(n){return _==types[n]}),T=_extends((t={},_defineProperty(t,"use"+I,1),_defineProperty(t,"MATERIAL_TYPE",I),t),i.shaderDefines);null!=C&&(T.HAS_MAP=1);for(var S in types)T[S+"Type"]=types[S];for(var E in T)g="#define "+E+" "+T[E]+"\n"+g;var N=L({context:{map:function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(e);var i=t||{},o=i.map,n=void 0===o?C:o;return n}}}),G=L({uniforms:D,frag:g,blend:{equation:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.opacity,e.transparent;return _objectDestructuringEmpty(n),l.equation},enable:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.transparent,i=void 0===t?(0,_defined2.default)(r,l.enable):t,o=e.blending,a=void 0===o?l.enable:o,s=e.opacity,f=void 0===s?c:s;return _objectDestructuringEmpty(n),!!(f<1||i)||("boolean"==typeof a?a:i)},color:function(){return(0,_utils.ensureRGBA)(l.color)},func:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.transparent,i=void 0===t?r:t,o=e.opacity,a=void 0===o?c:o;return _objectDestructuringEmpty(n),a<1||i?{src:"src alpha",dst:"one"}:l.func}},cull:{enable:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.cull,i=void 0===t?u.enable:t;return _objectDestructuringEmpty(n),Boolean(i)},face:function(n,e){var t=e.cullFace,i=void 0===t?u.face:t;return _objectDestructuringEmpty(n),i}},depth:{enable:function(){return v.enable},range:function(){return v.range},func:function(){return v.func},mask:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.opacity,i=void 0===t?i:t,o=e.transparent;return _objectDestructuringEmpty(n),!!(i<1||o)||v.mask}},context:{materialOpacity:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.opacity,i=void 0===t?c:t;return _objectDestructuringEmpty(n),i},materialType:function(){return _||types.Material},materialColor:function(n){var e=n.color,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.color,o=void 0===i?e||p:i;return(0,_utils.ensureRGBA)(o)},mapResolution:function(n){var e=n.textureResolution;return e||[0,0]},mapData:function(n){var e=n.texture,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.map,o=void 0===i?C:i;return e||o}}});return _possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,function(n,e){var t=function(){};"function"==typeof n&&(e=n,n={}),n=Array.isArray(n)?[].concat(_toConsumableArray(n)):_extends({},n||{}),e=e||t;var i=Array.isArray(n)?{}:n.map;N(i||{},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.map;"function"==typeof i?i(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.mapResolution;G(n,e);}):G(n,e);});}))}return _inherits(e,n),e}(_command.Command);

},{"../command":2,"../stats":42,"../texture":43,"../utils":44,"./types":33,"defined":54,"gl-vec4":199,"glsl-inject-defines":217,"glslify":39}],32:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhongMaterialCommand=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}return e}; var _types=require("../light/types"); var lightTypes=_interopRequireWildcard(_types); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _lambert=require("./lambert"); var _ambient=require("../light/ambient"); var _directional=require("../light/directional"); var _point=require("../light/point"); var _types2=require("./types");module.exports=exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(PhongMaterialCommand,[null].concat(t)))};var PhongMaterialCommand=exports.PhongMaterialCommand=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=n.shininess,o=void 0===r?20:r,i=n.specular,u=void 0===i?[0,0,0,1]:i,a={"material.shininess":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shininess,r=void 0===n?o:n;return _objectDestructuringEmpty(e),r},"material.specular":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.specular,r=void 0===n?u:n;return _objectDestructuringEmpty(e),r}},l={};return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},n,{shaderDefines:l,uniforms:a,type:n.type||_types2.PhongMaterial})))}return _inherits(t,e),t}(_lambert.LambertMaterialCommand);

},{"../light/ambient":21,"../light/directional":22,"../light/point":25,"../light/types":26,"./lambert":30,"./types":33,"defined":54}],33:[function(require,module,exports){
'use strict';

Object.defineProperty(exports,"__esModule",{value:!0});var i=0; var id=function(){return i++}; var Material=exports.Material=id(); var FlatMaterial=exports.FlatMaterial=id(); var PhongMaterial=exports.PhongMaterial=id(); var LambertMaterial=exports.LambertMaterial=id();

},{}],34:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}function computeQuaternion(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz",o=Math.cos(.5*e[0]),n=Math.cos(.5*e[1]),r=Math.cos(.5*e[2]),i=Math.sin(.5*e[0]),u=Math.sin(.5*e[1]),f=Math.sin(.5*e[2]),c=0,l=0,y=0,p=1;return"xyz"==t?(c=i*n*r+o*u*f,l=o*u*r-i*n*f,y=o*n*f+i*u*r,p=o*n*r-i*u*f):"yxz"==t?(c=i*n*r+o*u*f,l=o*u*r-i*n*f,y=o*n*f-i*u*r,p=o*n*r+i*u*f):"zxy"==t?(c=i*n*r-o*u*f,l=o*u*r+i*n*f,y=o*n*f+i*u*r,p=o*n*r-i*u*f):"zyx"==t?(c=i*n*r-o*u*f,l=o*u*r+i*n*f,y=o*n*f-i*u*r,p=o*n*r+i*u*f):"yzx"==t?(c=i*n*r+o*u*f,l=o*u*r+i*n*f,y=o*n*f-i*u*r,p=o*n*r-i*u*f):"xzy"==t&&(c=i*n*r-o*u*f,l=o*u*r-i*n*f,y=o*n*f+i*u*r,p=o*n*r+i*u*f),[c,l,y,p]}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Euler=void 0,exports.computeQuaternion=computeQuaternion;var _vector=require("./vector"); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var Euler=exports.Euler=function(e){function t(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xyz";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,_defined2.default)(e,0),(0,_defined2.default)(o,0),(0,_defined2.default)(n,0)));return i.order=r,i}return _inherits(t,e),t}(_vector.Vector);

},{"./vector":37,"defined":54}],35:[function(require,module,exports){
'use strict';

Object.defineProperty(exports,"__esModule",{value:!0});var _quaternion=require("./quaternion");Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return _quaternion.Quaternion}});var _vector=require("./vector");Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return _vector.Vector}});var _euler=require("./euler");Object.defineProperty(exports,"Euler",{enumerable:!0,get:function(){return _euler.Euler}});

},{"./euler":34,"./quaternion":36,"./vector":37}],36:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}function computeEuler(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz",r=new _mathEuler2.default;return r.setFromRotationMatrix({elements:_glMat2.default.fromQuat([],e)},t.toUpperCase()),new _vector.Vector(r.x,r.y,r.z)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quaternion=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o);}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();exports.computeEuler=computeEuler;var _euler=require("./euler"); var _mathEuler=require("math-euler"); var _mathEuler2=_interopRequireDefault(_mathEuler); var _vector=require("./vector"); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _clamp=require("clamp"); var _clamp2=_interopRequireDefault(_clamp); var _glQuat=require("gl-quat"); var _glQuat2=_interopRequireDefault(_glQuat); var _glMat=require("gl-mat4"); var _glMat2=_interopRequireDefault(_glMat); var Quaternion=exports.Quaternion=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,_defined2.default)(e,0),(0,_defined2.default)(r,0),(0,_defined2.default)(o,0),(0,_defined2.default)(n,1)))}return _inherits(t,e),_createClass(t,null,[{key:"fromAxisAngle",value:function(e,r){return _glQuat2.default.setAxisAngle(new t,e,r)}}]),t}(_vector.Vector);

},{"./euler":34,"./vector":37,"clamp":51,"defined":54,"gl-mat4":87,"gl-quat":112,"math-euler":228}],37:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof3(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof3(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)}; var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(); var _utils=require("../utils"); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _glVec=require("gl-vec4"); var _glVec2=_interopRequireDefault(_glVec); var _glVec3=require("gl-vec3"); var _glVec4=_interopRequireDefault(_glVec3); var _glVec5=require("gl-vec2"); var _glVec6=_interopRequireDefault(_glVec5); var Vector=exports.Vector=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(_classCallCheck(this,e),1==r.length&&"object"==_typeof(r[0])){var i=r[0];r[0]=i.x||i[0]||void 0,r[1]=i.y||i[1]||void 0,r[2]=i.z||i[2]||void 0,r[3]=i.w||i[3]||void 0,r=r.filter(function(e){return void 0!==e});}var u=new Float32Array([].concat(_toConsumableArray(r))),l=[[0,1,2,3],["x","y","z","w"],["r","g","b","a"]],f=!0,a=!1,c=void 0;try{for(var y,s=l[Symbol.iterator]();!(f=(y=s.next()).done);f=!0)for(var d=y.value,m=function(e){return null==u[e]?"break":void(0,_utils.define)(t,d[e],{enumerable:!0,set:function(t){return u[e]=t},get:function(){return u[e]}})},_=0;_<d.length;++_){var p=m(_);if("break"===p)break}}catch(e){a=!0,c=e;}finally{try{!f&&s.return&&s.return();}finally{if(a)throw c}}(0,_utils.define)(this,"elements",{get:function(){return u}});}return _createClass(e,[{key:"set",value:function(t,n,r,o){if(t instanceof e)return this.set(t.x,t.y,t.z,t.w);switch(arguments.length){case 4:this.elements[3]=(0,_defined2.default)(o,this.elements[3]);case 3:this.elements[2]=(0,_defined2.default)(r,this.elements[2]);case 2:this.elements[1]=(0,_defined2.default)(n,this.elements[1]);case 1:this.elements[0]=(0,_defined2.default)(t,this.elements[0]);}return this}},{key:"toArray",value:function(){return[].concat(_toConsumableArray(this.elements))}},{key:"toJSON",value:function(){return this.toArray()}},{key:"valueOf",value:function(){return this.elements}},{key:Symbol.iterator,value:function(){return this.toArray()[Symbol.iterator]()}},{key:"length",get:function(){return this.elements.length},set:function(e){}},{key:"ref",get:function(){return this.elements}},{key:"componentLength",get:function(){return this.elements.length}}]),e}();

},{"../utils":44,"defined":54,"gl-vec2":139,"gl-vec3":169,"gl-vec4":199}],38:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}; var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshCommand=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}return e}; var _math=require("./math"); var _utils=require("./utils"); var _object3d=require("./object3d"); var _stats=require("./stats"); var _geometry=require("./geometry"); var _boundPoints=require("bound-points"); var _boundPoints2=_interopRequireDefault(_boundPoints); var _glslInjectDefines=require("glsl-inject-defines"); var _glslInjectDefines2=_interopRequireDefault(_glslInjectDefines); var _defined=require("defined"); var _defined2=_interopRequireDefault(_defined); var _glslify=require("glslify"); var _glslify2=_interopRequireDefault(_glslify); var _clamp=require("clamp"); var _clamp2=_interopRequireDefault(_clamp); var _glMat=require("gl-mat4"); var _glMat2=_interopRequireDefault(_glMat); var _glMat3=require("gl-mat3"); var _glMat4=_interopRequireDefault(_glMat3); var _glVec=require("gl-vec4"); var _glVec2=_interopRequireDefault(_glVec); var _glVec3=require("gl-vec3"); var _glVec4=_interopRequireDefault(_glVec3); var _glVec5=require("gl-vec2"); var _glVec6=_interopRequireDefault(_glVec5); var _glQuat=require("gl-quat"); var _glQuat2=_interopRequireDefault(_glQuat); var identity=_glMat2.default.identity([]); var kDefaultMeshWireframePrimitive="line strip"; var kDefaultWireframeThickness=1; var kDefaultMeshPrimitive="triangles"; var kDefaultVertexShader="precision highp float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n\n//\n// Shader uniforms.\n//\nuniform float aspect;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat3 modelNormal;\nuniform mat4 view;\nuniform float time;\n\n//\n// Shader IO.\n//\n\n#ifdef HAS_POSITIONS\nattribute vec3 position;\n#endif\n\n#ifdef HAS_NORMALS\nattribute vec3 normal;\n#endif\n\n#ifdef HAS_UVS\nattribute vec2 uv;\n#endif\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\nvoid main() {\n\n#if defined HAS_POSITIONS\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  vposition = (model * vec4(position, 1.0)).xyz;\n#endif\n\n#ifdef HAS_NORMALS\n  vnormal = normalize(modelNormal * normal);\n#endif\n\n#ifdef HAS_UVS\n  vuv = uv;\n#endif\n}\n";module.exports=exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(MeshCommand,[null].concat(t)))};var MeshCommand=exports.MeshCommand=function(e){function t(e){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _objectDestructuringEmpty(t),_objectDestructuringEmpty(e),function(){return _&&null==p&&(p=(0,_boundPoints2.default)(_.positions).map(function(e){return new(Function.prototype.bind.apply(_math.Vector,[null].concat(_toConsumableArray(e))))})),p}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _objectDestructuringEmpty(r),function(){if(null==_)return null;n();var e=p[0].length,r=p[0],i=p[1],o=null;switch(e){case 3:o=_glVec4.default.subtract([],i,r);break;case 2:o=_glVec6.default.subtract([],i,r);break;default:return null}switch(e){case 3:return _glVec4.default.multiply(o,o,t);case 2:return _glVec6.default.multiply(o,o,t)}}}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.incrementStat)("Mesh");var o=i.regl,u=void 0===o?{}:o,l=i.vert,a=void 0===l?kDefaultVertexShader:l,f=i.frag,s=void 0===f?null:f,c=i.primitive,d=void 0===c?"triangles":c,m=i.geometry,_=void 0===m?null:m,p=null,g=function(){},v={wireframeThickness:i.wireframeThickness||kDefaultWireframeThickness,wireframe:Boolean(i.wireframe),count:i.count||void 0},y={},b={model:function(e){var t=e.transform;return t||identity},modelNormal:function(e){var t=e.transform;return Array.isArray(t)?_glMat4.default.normalFromMat4([],t):identity},"material.opacity":function(e){var t=e.materialOpacity,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.opacity,i=void 0===r?t:r;return(0,_defined2.default)(i,1)},"material.color":function(e){var t=e.materialColor,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.color,i=void 0===r?t:r;return(0,_utils.ensureRGBA)(i)}},h=_extends({},u.context,{boundingBox:n,geometry:_||null,size:r});if(Object.assign(u,{context:h}),_){Object.assign(y,i.attributes),Object.assign(b,i.uniforms),Object.assign(u,{attributes:y,uniforms:b});var D=_extends({},i.shaderDefines);_.positions&&(y.position=_.positions,D.HAS_POSITIONS=1),_.normals&&(y.normal=_.normals,D.HAS_NORMALS=1),_.uvs&&(y.uv=_.uvs,D.HAS_UVS=1),Object.assign(u,{primitive:_&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.primitive,r=void 0===n?null:n,i=t.wireframe,o=void 0!==i&&i;return _objectDestructuringEmpty(e),r?r:o?kDefaultMeshWireframePrimitive:"string"==typeof d?d:kDefaultMeshPrimitive}}),_.cells?Object.assign(u,{elements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.wireframe,r=(void 0===n?v.wireframe:n,t.count),i=void 0===r?v.count:r;_objectDestructuringEmpty(e);var o=_.cells;return o&&"number"==typeof i&&(i=(0,_defined2.default)(i,o.length),i=(0,_clamp2.default)(Math.floor(i),0,o.length),o=o.slice(0,i)),o}}):Object.assign(u,{count:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.count;return _objectDestructuringEmpty(e),null!=n?n:i.count?i.count:_&&_.complex?_.positions.length:null}}),"string"==typeof a&&(u.vert=(0,_glslInjectDefines2.default)(a,D)),"string"==typeof s&&(u.frag=(0,_glslInjectDefines2.default)(s,D));for(var S in u)void 0===u[S]&&delete u[S];_&&(g=e.regl(_extends({lineWidth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.wireframeThickness,r=void 0===n?v.wireframeThickness:n,i=t.lineWidth,o=void 0===i?1:i;return _objectDestructuringEmpty(e),Math.max(r||o,1)}},u)));}var j=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},i,{update:function t(n,r,o){_objectDestructuringEmpty(n);var u=function(){},l=function(e){return void(r[e]||i[e]||u)(r)},t=i.update||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_objectDestructuringEmpty(e);var t=arguments[1];return t()};t(r,function(){null==e.reglContext?o(_extends({},e.reglContext||{})):(e.reglContext.geometry=_,!1===r.visible?g(r,o):0!=r.draw?(l("beforeDraw"),g(r),l("afterDraw"),o(_extends({},e.reglContext),r)):g(r,o),delete e.reglContext.geometry);});}})));return j}return _inherits(t,e),t}(_object3d.Object3DCommand);

},{"./geometry":9,"./math":35,"./object3d":40,"./stats":42,"./utils":44,"bound-points":46,"clamp":51,"defined":54,"gl-mat3":69,"gl-mat4":87,"gl-quat":112,"gl-vec2":139,"gl-vec3":169,"gl-vec4":199,"glsl-inject-defines":217,"glslify":39}],39:[function(require,module,exports){
'use strict';

module.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),o=[],r=0;r<e.length-1;r++)o.push(e[r],n[r]||"");return o.push(e[r]),o.join("")};

},{}],40:[function(require,module,exports){
'use strict';

function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof3(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof3(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Object3DCommand=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)}; var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o);}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(); var _math=require("./math"); var _stats=require("./stats"); var _command=require("./command"); var _utils=require("./utils"); var _glMat=require("gl-mat4"); var _glMat2=_interopRequireDefault(_glMat); var _glVec=require("gl-vec4"); var _glVec2=_interopRequireDefault(_glVec); var _glVec3=require("gl-vec3"); var _glVec4=_interopRequireDefault(_glVec3); var _glVec5=require("gl-vec2"); var _glVec6=_interopRequireDefault(_glVec5); var _glQuat=require("gl-quat"); var _glQuat2=_interopRequireDefault(_glQuat); var OBJECT_COMMAND_NEXT_ID=0; var kMat4Identity=_glMat2.default.identity([]);module.exports=exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Object3DCommand,[null].concat(e)))};var Object3DCommand=exports.Object3DCommand=function(t){function e(t){function n(t,e){"function"==typeof t&&(e=t,t={}),t="object"==("undefined"==typeof t?"undefined":_typeof(t))&&t?t:{},e="function"==typeof e?e:function(){},h(t,function(t,n){"function"==typeof l?l(t,n||{},e):"function"==typeof e&&e(t,n||{});});}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Object3D");var r=o.transform,i=void 0===r||r,u=o.update,l=void 0===u?null:u,a=o.id,f=void 0===a?e.id():a,c=o.rotation,y=void 0===c?[0,0,0,1]:c,p=o.position,d=void 0===p?[0,0,0]:p,s=o.scale,_=void 0===s?[1,1,1]:s,m=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n)),b=_glMat2.default.identity([]),g=_glMat2.default.identity([]),v={id:function(){return f},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.scale;return _objectDestructuringEmpty(t),n||_},position:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.position;return _objectDestructuringEmpty(t),n||d},rotation:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.rotation;return _objectDestructuringEmpty(t),n||y},transform:function(t){var e=t.transform,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.transform,r=n.rotation,u=void 0===r?y:r,l=n.position,a=void 0===l?d:l,f=n.scale,c=void 0===f?_:f;return!1===i?kMat4Identity:(e=e?[].concat(_toConsumableArray(e)):_glMat2.default.identity([]),_glMat2.default.identity(g),_glMat2.default.identity(b),_glMat2.default.fromRotationTranslation(g,u,a),_glMat2.default.scale(g,g,c),_glMat2.default.multiply(b,e,g),o&&_glMat2.default.multiply(b,o,b),b)}},h=t.regl({context:v});return m}return _inherits(e,t),_createClass(e,null,[{key:"id",value:function(){return OBJECT_COMMAND_NEXT_ID++}}]),e}(_command.Command);

},{"./command":2,"./math":35,"./stats":42,"./utils":44,"gl-mat4":87,"gl-quat":112,"gl-vec2":139,"gl-vec3":169,"gl-vec4":199}],41:[function(require,module,exports){
module.exports={
  "name": "axis3d",
  "version": "0.0.13",
  "description": "",
  "scripts": {
    "test": "node test",
    "build": "browserify app/main.js -o public/js/bundle.js"
  },
  "keywords": [
    "axis",
    "webgl",
    "3d",
    "axis3d",
    "graphics",
    "regl"
  ],
  "author": "Joseph Werle <werle@littlstar.com>",
  "license": "MIT",
  "dependencies": {
    "angle-normals": "^1.0.0",
    "bound-points": "^1.0.0",
    "clamp": "^1.0.1",
    "debug": "^2.2.0",
    "defined": "^1.0.0",
    "dom-events": "^0.1.1",
    "eye-vector": "^1.0.0",
    "geo-3d-box": "^2.0.2",
    "gl-mat4": "^1.1.4",
    "gl-quat": "^1.0.0",
    "gl-vec2": "^1.0.0",
    "gl-vec3": "^1.0.3",
    "gl-vec4": "^1.0.1",
    "glsl-diffuse-lambert": "^1.0.0",
    "glsl-diffuse-oren-nayar": "^1.0.2",
    "glsl-inject-defines": "^1.0.3",
    "glsl-inverse": "^1.0.0",
    "glsl-random": "^0.0.5",
    "glsl-specular-blinn-phong": "^1.0.1",
    "glsl-transpose": "^1.0.0",
    "glslify": "^6.0.0",
    "keycode": "^2.1.4",
    "math-euler": "^0.1.1",
    "mesh-reindex": "^1.0.0",
    "mouse-change": "^1.3.0",
    "mouse-wheel": "^1.2.0",
    "perspective-camera": "^2.0.1",
    "primitive-capsule": "^2.0.2",
    "primitive-cylinder": "^1.0.1",
    "primitive-plane": "^1.0.1",
    "primitive-quad": "^1.0.1",
    "primitive-sphere": "^2.0.0",
    "primitive-torus": "^1.0.4",
    "raf": "^3.3.0",
    "regl": "^1.3.0",
    "screen-projected-lines": "^1.2.0",
    "touch-position": "^2.0.0",
    "unindex-mesh": "^2.0.0",
    "webvr-polyfill": "^0.9.25",
    "yields-keycode": "^1.1.0"
  },
  "browserify": {
    "transform": [
      "babelify"
    ]
  },
  "standard": {
    "ignore": [
      "public",
      "dist",
      "build",
      "lib"
    ]
  },
  "devDependencies": {
    "babel-cli": "^6.14.0",
    "babel-core": "^6.14.0",
    "babel-eslint": "^6.1.2",
    "babel-plugin-glslify": "^1.0.2",
    "babel-plugin-transform-dead-code-elimination": "^2.2.2",
    "babel-preset-es2015": "^6.14.0",
    "babel-preset-stage-0": "^6.5.0",
    "babelify": "^7.3.0",
    "browserify": "^13.1.0",
    "budo": "^9.0.0",
    "bunny": "^1.0.1",
    "color-shader-functions": "^0.0.2",
    "control-panel": "^1.2.0",
    "esdoc-es7-plugin": "0.0.3",
    "glslify-babel": "^1.0.1",
    "glslify-fancy-imports": "^1.0.1",
    "glslify-import": "^3.0.0",
    "glslify-live": "^2.1.1",
    "icosphere": "^1.0.0",
    "rollupify": "^0.3.4",
    "snowden": "^1.0.1",
    "standard": "^8.0.0",
    "tape": "^4.6.3",
    "uglifyify": "^3.0.4"
  }
}

},{}],42:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function createStatList(t){return null==stats[t]&&(stats[t]=[]),stats[t]}function registerStat(t,e){createStatList(t);var a=new Stat(t,e);return stats[t].push(a),a}function incrementStat(t){createStatList(t);var e=tailStat(t),a=1;return e&&(a=e.info+1),registerStat(t,a),a}function decrementStat(t){createStatList(t);var e=tailStat(t),a=0;return e&&(a=e.info-1),registerStat(t,a),a}function resetStat(t){stats[t]=[];}function headStat(t){return stats[t]?stats[t][0]||null:null}function tailStat(t){if(stats[t]){var e=stats[t].length||0;return stats[t][e-1]||null}return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStatList=createStatList,exports.registerStat=registerStat,exports.incrementStat=incrementStat,exports.decrementStat=decrementStat,exports.resetStat=resetStat,exports.headStat=headStat,exports.tailStat=tailStat;var stats=exports.stats={}; var Stat=exports.Stat=function t(e,a){_classCallCheck(this,t),this.name=e,this.info=a,this.timestamp=Date.now();};

},{}],43:[function(require,module,exports){
'use strict';

function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}; var _typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof3(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof3(t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureCommand=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)}; var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);}return t}; var _stats=require("./stats"); var _command=require("./command");module.exports=exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(TextureCommand,[null].concat(e)))};var TextureCommand=exports.TextureCommand=function(t){function e(t){function n(t){if(!t)return!1;if(a(t)){if(t.readyState<t.HAVE_ENOUGH_DATA)return!1}else if((f(t)||u(t))&&(!t.width||!t.height))return!1;return!0}function o(){return f(m)||u(m)?[m.width,m.height]:a(m)?[m.videoWidth,m.videoHeight]:m&&m.shape?m.shape:c.shape?c.shape:c.width&&c.height?[c.width,c.height]:[0,0]}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Texture");var i=t.regl,u=function(t){return t instanceof HTMLCanvasElement},a=function(t){return t instanceof HTMLVideoElement},f=function(t){return t instanceof HTMLImageElement},c=_extends({min:"linear",mag:"linear"},r),l=Object.freeze(_extends({},c));if(c.data){var s=c;s.data;0==n(c.data)&&delete c.data;}var p=i.texture(c),y=i({context:{textureResolution:function(){return o()},textureData:function(){return m},texture:function(){return p}}}),d=0,m=c.data,b=null,_=!1;return _possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,function(t,e){var r=function(){},u=i.now();"function"==typeof t&&(e=t,t={}),t=t||{},e=e||r,c=_extends({},l),_=!1;for(var f in t)"object"!=_typeof(t[f])&&c[f]!=t[f]&&(_=!0),c[f]=t[f];if("data"in t&&m!=t.data&&(m=t.data,_=!0),null==m&&l.data&&n(l.data)&&(m=l.data,_=!0),null==m&&null==l.data&&null!=b&&(_=!0),0==_&&a(m)&&m.readyState>=m.HAVE_CURRENT_DATA&&u-d>=.01&&(d=u,_=!0),0==_){var s=o();s[0]>0&&s[1]>0&&m!=b&&(_=!0);}_&&(b=m,c.data=m,p(c),_=!1),y(e);}))}return _inherits(e,t),e}(_command.Command);

},{"./command":2,"./stats":42}],44:[function(require,module,exports){
'use strict';

function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ensureRGBA=exports.clampToMaxSize=exports.scaleWithCanvas=exports.createCanvas=exports.makePowerOfTwo=exports.nearestPowerOfTwo=exports.getScreenOrientation=exports.isDOMElementInViewport=exports.lerp=exports.debug=exports.radians=exports.define=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);}return e}; var _package=require("./package"); var _debug=require("debug"); var _debug2=_interopRequireDefault(_debug); var _clamp=require("clamp"); var _clamp2=_interopRequireDefault(_clamp); var round=Math.round; var floor=Math.floor; var pow=Math.pow; var define=exports.define=function(e,t,r){return Object.defineProperty(e,t,_extends({},r))}; var radians=exports.radians=function(e){return e==e?e*Math.PI/180:0}; var debug=exports.debug=(0,_debug2.default)("[axis@"+_package.version+"]"); var lerp=exports.lerp=function(e,t,r){return e*(1-r)+t*r}; var isDOMElementInViewport=exports.isDOMElementInViewport=function(e){var t=document.documentElement,r=t.clientWidth,n=t.clientHeight,a=e.getBoundingClientRect(),o=a.top,i=a.left,s=a.bottom,u=a.right,c=window,p=c.innerWidth,d=c.innerHeight,l=d||n,f=p||r;return s>0&&u>0&&i<f&&o<l}; var getScreenOrientation=exports.getScreenOrientation=function(){switch(window.screen.orientation||window.screen.mozOrientation){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return window.orientation||0}; var nearestPowerOfTwo=exports.nearestPowerOfTwo=function(e){return pow(2,round(Math.log(e)/Math.LN2))}; var makePowerOfTwo=exports.makePowerOfTwo=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=createCanvas(),r=t.getContext("2d");return t.width=nearestPowerOfTwo(e.width),t.height=nearestPowerOfTwo(e.height),r.drawImage(e,0,0,t.width,t.height),t}return e}; var createCanvas=exports.createCanvas=function(){return document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}; var scaleWithCanvas=exports.scaleWithCanvas=function(e,t,r){var n=createCanvas(),a=n.getContext("2d"),o=e.width,i=e.height;return r&&(o=nearestPowerOfTwo(o),i=nearestPowerOfTwo(i)),n.width=Math.floor(e.width*t),n.height=Math.floor(e.height*t),a.drawImage(e,0,0,o,i,0,0,n.width,n.height),n}; var clampToMaxSize=exports.clampToMaxSize=function(e,t,r){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height);return scaleWithCanvas(e,n,r)}return r?makePowerOfTwo(e):e}; var ensureRGBA=exports.ensureRGBA=function(e){if(e=[].concat(_toConsumableArray(Array.isArray(e)?e:[])),e.length<4)for(var t=0;t<4;++t)(null==e[t]||"number"!=typeof e[t]||Number.isNaN(e[t]))&&(e[t]=0),e[t]=(0,_clamp2.default)(e[t],0,1);return e.slice(0,4)};

},{"./package":41,"clamp":51,"debug":52}],45:[function(require,module,exports){
'use strict';

function hypot(t,a,r){return Math.sqrt(Math.pow(t,2)+Math.pow(a,2)+Math.pow(r,2))}function weight(t,a,r){return Math.atan2(a,t-r)}function mulAdd(t,a,r,h,o){t[0]+=a*r,t[1]+=a*h,t[2]+=a*o;}function angleNormals(t,a){for(var r=a.length,h=t.length,o=new Array(r),n=0;n<r;++n)o[n]=[0,0,0];for(var n=0;n<h;++n){var e=t[n],u=a[e[0]],p=a[e[1]],i=a[e[2]],l=u[0]-p[0],w=u[1]-p[1],M=u[2]-p[2],d=hypot(l,w,M),f=p[0]-i[0],g=p[1]-i[1],m=p[2]-i[2],s=hypot(f,g,m),v=i[0]-u[0],y=i[1]-u[1],c=i[2]-u[2],A=hypot(v,y,c);if(!(Math.min(d,s,A)<1e-6)){var q=.5*(d+s+A),N=Math.sqrt((q-d)*(q-s)*(q-A)/q),x=w*m-M*g,b=M*f-l*m,j=l*g-w*f,k=hypot(x,b,j);x/=k,b/=k,j/=k,mulAdd(o[e[0]],weight(q,N,s),x,b,j),mulAdd(o[e[1]],weight(q,N,A),x,b,j),mulAdd(o[e[2]],weight(q,N,d),x,b,j);}}for(var n=0;n<r;++n){var z=o[n],B=Math.sqrt(Math.pow(z[0],2)+Math.pow(z[1],2)+Math.pow(z[2],2));B<1e-8?(z[0]=1,z[1]=0,z[2]=0):(z[0]/=B,z[1]/=B,z[2]/=B);}return o}module.exports=angleNormals;

},{}],46:[function(require,module,exports){
'use strict';

function findBounds(r){var n=r.length;if(0===n)return[[],[]];for(var t=r[0].length,e=r[0].slice(),i=r[0].slice(),a=1;a<n;++a)for(var o=r[a],s=0;s<t;++s){var u=o[s];e[s]=Math.min(e[s],u),i[s]=Math.max(i[s],u);}return[e,i]}module.exports=findBounds;

},{}],47:[function(require,module,exports){
'use strict';

function createPickRay(e,r,c,t,u){set(e,c[0],c[1],0),set(r,c[0],c[1],1),unproject(e,e,t,u),unproject(r,r,t,u),sub(r,r,e),normalize(r,r);}var unproject=require("camera-unproject"); var set=require("gl-vec3/set"); var sub=require("gl-vec3/subtract"); var normalize=require("gl-vec3/normalize");module.exports=createPickRay;

},{"camera-unproject":49,"gl-vec3/normalize":177,"gl-vec3/set":184,"gl-vec3/subtract":187}],48:[function(require,module,exports){
'use strict';

function cameraProject(t,m,r,e){var p=r[0],a=r[1],o=r[2],A=r[3],R=NEAR_RANGE,c=FAR_RANGE;set(tmp4,m[0],m[1],m[2],1),transformMat4(tmp4,tmp4,e);var s=tmp4[3];return 0!==s&&(tmp4[0]=tmp4[0]/s,tmp4[1]=tmp4[1]/s,tmp4[2]=tmp4[2]/s),t[0]=p+o/2*tmp4[0]+(0+o/2),t[1]=a+A/2*tmp4[1]+(0+A/2),t[2]=(c-R)/2*tmp4[2]+(c+R)/2,t[3]=0===s?0:1/s,t}var transformMat4=require("gl-vec4/transformMat4"); var set=require("gl-vec4/set"); var NEAR_RANGE=0; var FAR_RANGE=1; var tmp4=[0,0,0,0];module.exports=cameraProject;

},{"gl-vec4/set":211,"gl-vec4/transformMat4":215}],49:[function(require,module,exports){
'use strict';

function unproject(r,t,e,o){var n=e[0],u=e[1],a=e[2],c=e[3],p=t[0],f=t[1],i=t[2];return p-=n,f=c-f-1,f-=u,r[0]=2*p/a-1,r[1]=2*f/c-1,r[2]=2*i-1,transform(r,r,o)}var transform=require("./lib/projectMat4");module.exports=unproject;

},{"./lib/projectMat4":50}],50:[function(require,module,exports){
'use strict';

function project(r,e,o){var t=e[0],c=e[1],n=e[2],p=o[0],u=o[1],j=o[2],a=o[3],d=o[4],f=o[5],i=o[6],l=o[7],m=o[8],s=o[9],v=o[10],x=o[11],b=o[12],g=o[13],h=o[14],k=o[15],q=1/(t*a+c*l+n*x+k);return r[0]=(t*p+c*d+n*m+b)*q,r[1]=(t*u+c*f+n*s+g)*q,r[2]=(t*j+c*i+n*v+h)*q,r}module.exports=project;

},{}],51:[function(require,module,exports){
'use strict';

function clamp(c,e,l){return e<l?c<e?e:c>l?l:c:c<l?l:c>e?e:c}module.exports=clamp;

},{}],52:[function(require,module,exports){
(function (process){
'use strict';

function useColors(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t));}),e.splice(n,0,r);}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e;}catch(e){}}function load(){try{return exports.storage.debug}catch(e){}if("undefined"!=typeof process&&"env"in process)return process.env.DEBUG}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(load());

}).call(this,require('_process'))
},{"./debug":53,"_process":247}],53:[function(require,module,exports){
'use strict';

function selectColor(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}function createDebug(e){function r(){if(r.enabled){var e=r,t=+new Date,o=t-(prevTime||t);e.diff=o,e.prev=prevTime,e.curr=t,prevTime=t;for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];s[0]=exports.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,t){if("%%"===r)return r;a++;var o=exports.formatters[t];if("function"==typeof o){var n=s[a];r=o.call(e,n),s.splice(a,1),a--;}return r}),exports.formatArgs.call(e,s);var p=r.log||exports.log||console.log.bind(console);p.apply(e,s);}}return r.namespace=e,r.enabled=exports.enabled(e),r.useColors=exports.useColors(),r.color=selectColor(e),"function"==typeof exports.init&&exports.init(r),r}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),t=r.length,o=0;o<t;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")));}function disable(){exports.enable("");}function enabled(e){var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime;

},{"ms":234}],54:[function(require,module,exports){
'use strict';

module.exports=function(){for(var o=0;o<arguments.length;o++)if(void 0!==arguments[o])return arguments[o]};

},{}],55:[function(require,module,exports){
'use strict';

var synth=require("synthetic-dom-events");
var on=function(n,e,t,o){return n.addEventListener(e,t,o||!1)};
var off=function(n,e,t,o){return n.removeEventListener(e,t,o||!1)};
var once=function(n,e,t,o){function r(i){off(n,e,r,o),t(i);}on(n,e,r,o);};
var emit=function(n,e,t){var o=synth(e,t);n.dispatchEvent(o);};document.addEventListener||(on=function(n,e,t){return n.attachEvent("on"+e,t)}),document.removeEventListener||(off=function(n,e,t){return n.detachEvent("on"+e,t)}),document.dispatchEvent||(emit=function(n,e,t){var o=synth(e,t);return n.fireEvent("on"+o.type,o)}),module.exports={on:on,off:off,once:once,emit:emit};

},{"synthetic-dom-events":256}],56:[function(require,module,exports){
'use strict';

function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0;}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,i,n,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(i=this._events[e],isUndefined(i))return!1;if(isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s);}else if(isObject(i))for(s=Array.prototype.slice.call(arguments,1),o=i.slice(),n=o.length,r=0;r<n;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var i;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(i=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments));}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},EventEmitter.prototype.removeListener=function(e,t){var i,n,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(i)){for(r=s;r-- >0;)if(i[r]===t||i[r].listener&&i[r].listener===t){n=r;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t);}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],isFunction(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};

},{}],57:[function(require,module,exports){
'use strict';

function getEyeVector(r,t){return t||(t=[]),invert(scratch,r),t[0]=scratch[12],t[1]=scratch[13],t[2]=scratch[14],t}var invert=require("gl-mat4/invert"); var scratch=new Float32Array(16);module.exports=getEyeVector;

},{"gl-mat4/invert":88}],58:[function(require,module,exports){
'use strict';

function _createConfig(n){var e={size:[1,1,1],segments:[1,1,1]};return n&&(Array.isArray(n.size)?e.size=n.size:"number"==typeof n.size&&(e.size=[n.size,n.size,n.size]),Array.isArray(n.segments)?e.segments=n.segments:"number"==typeof n.segments&&(e.segments=[n.segments,n.segments,n.segments])),e}function _flatten(n){for(var e=[],t=0;t<n.length;t++)for(var s=n[t],r=0;r<s.length;r++)e.push(s[r]);return e}function _generatePanel(n){var e=_generateGrid(n),t=_generateCells(n,e),s=_flatten(e),r=_generateUvs(n,s);return{positions:s,cells:t,uvs:r,vertexCount:(n.sx+1)*(n.sy+1)}}function _generateUvs(n,e){return e.map(function(e){return[e[0]/n.wx+.5,e[1]/n.wy+.5]})}function _generateGrid(n){for(var e=n.wy/n.sy,t=n.wy/2,s=n.sy+1,r=Array(s),o=0;o<s;o++)r[o]=_generateRow(n,e*o-t);return r}function _generateRow(n,e){for(var t=n.wx/2,s=n.wx/n.sx,r=n.sx+1,o=Array(r),i=0;i<r;i++)o[i]=[s*i-t,e];return o}function _generateCells(n){function e(e,t){return(n.sx+1)*t+e}for(var t=[],s=0;s<n.sx;s++)for(var r=0;r<n.sy;r++){var o=e(s+0,r+0),i=e(s+1,r+0),a=e(s+1,r+1),u=e(s+0,r+1);t.push([o,i,a]),t.push([a,u,o]);}return t}function _clonePanel(n){return{positions:n.positions,cells:n.cells,uvs:n.uvs,vertexCount:n.vertexCount}}function _generateBoxPanels(n){var e=n.size,t=n.segments,s=_generatePanel({wx:e[0],wy:e[1],sx:t[0],sy:t[1]}),r=_generatePanel({wx:e[2],wy:e[1],sx:t[2],sy:t[1]}),o=_generatePanel({wx:e[0],wy:e[2],sx:t[0],sy:t[2]}),i=_clonePanel(s),a=_clonePanel(r),u=_clonePanel(o);return s.positions=s.positions.map(function(n){return[n[0],n[1],e[2]/2]}),i.positions=i.positions.map(function(n){return[n[0],-n[1],-e[2]/2]}),r.positions=r.positions.map(function(n){return[e[0]/2,-n[1],n[0]]}),a.positions=a.positions.map(function(n){return[-e[0]/2,n[1],n[0]]}),o.positions=o.positions.map(function(n){return[n[0],e[1]/2,-n[1]]}),u.positions=u.positions.map(function(n){return[n[0],-e[1]/2,n[1]]}),s.normals=_makeNormals([0,0,1],s.positions.length),i.normals=_makeNormals([0,0,-1],i.positions.length),r.normals=_makeNormals([1,0,0],r.positions.length),a.normals=_makeNormals([-1,0,0],a.positions.length),o.normals=_makeNormals([0,1,0],o.positions.length),u.normals=_makeNormals([0,-1,0],u.positions.length),[s,i,r,a,o,u]}function _makeNormals(n,e){for(var t=Array(e),s=0;s<e;s++)t[s]=n.slice();return t}function _generateBox(n){var e=_generateBoxPanels(n),t=e.map(function(n){return n.positions}),s=e.map(function(n){return n.uvs}),r=e.map(function(n){return n.normals}),o=_offsetCellIndices(e);return{positions:_flatten(t),uvs:_flatten(s),cells:_flatten(o),normals:_flatten(r)}}function _offsetCellIndices(n){var e=0;return n.map(function(n){var t=n.cells.map(function(n){return n.map(function(n){return n+e})});return e+=n.vertexCount,t})}module.exports=function(n){var e=_createConfig(n);return _generateBox(e)};

},{}],59:[function(require,module,exports){
'use strict';

function adjoint(n,o){var t=o[0],r=o[1],a=o[2],d=o[3],e=o[4],i=o[5],u=o[6],j=o[7],c=o[8];return n[0]=e*c-i*j,n[1]=a*j-r*c,n[2]=r*i-a*e,n[3]=i*u-d*c,n[4]=t*c-a*u,n[5]=a*d-t*i,n[6]=d*j-e*u,n[7]=r*u-t*j,n[8]=t*e-r*d,n}module.exports=adjoint;

},{}],60:[function(require,module,exports){
'use strict';

function clone(e){var n=new Float32Array(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}module.exports=clone;

},{}],61:[function(require,module,exports){
'use strict';

function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o}module.exports=copy;

},{}],62:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}module.exports=create;

},{}],63:[function(require,module,exports){
'use strict';

function determinant(e){var n=e[0],t=e[1],r=e[2],a=e[3],d=e[4],i=e[5],m=e[6],o=e[7],u=e[8];return n*(u*d-i*o)+t*(i*m-u*a)+r*(o*a-d*m)}module.exports=determinant;

},{}],64:[function(require,module,exports){
'use strict';

function frob(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8])}module.exports=frob;

},{}],65:[function(require,module,exports){
'use strict';

function fromMat2d(o,r){return o[0]=r[0],o[1]=r[1],o[2]=0,o[3]=r[2],o[4]=r[3],o[5]=0,o[6]=r[4],o[7]=r[5],o[8]=1,o}module.exports=fromMat2d;

},{}],66:[function(require,module,exports){
'use strict';

function fromMat4(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],o}module.exports=fromMat4;

},{}],67:[function(require,module,exports){
'use strict';

function fromQuat(r,o){var t=o[0],u=o[1],a=o[2],e=o[3],f=t+t,m=u+u,n=a+a,Q=t*f,c=u*f,d=u*m,i=a*f,l=a*m,p=a*n,s=e*f,v=e*m,x=e*n;return r[0]=1-d-p,r[3]=c-x,r[6]=i+v,r[1]=c+x,r[4]=1-Q-p,r[7]=l-s,r[2]=i-v,r[5]=l+s,r[8]=1-Q-d,r}module.exports=fromQuat;

},{}],68:[function(require,module,exports){
'use strict';

function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}module.exports=identity;

},{}],69:[function(require,module,exports){
'use strict';

module.exports={adjoint:require("./adjoint"),clone:require("./clone"),copy:require("./copy"),create:require("./create"),determinant:require("./determinant"),frob:require("./frob"),fromMat2:require("./from-mat2"),fromMat4:require("./from-mat4"),fromQuat:require("./from-quat"),identity:require("./identity"),invert:require("./invert"),multiply:require("./multiply"),normalFromMat4:require("./normal-from-mat4"),rotate:require("./rotate"),scale:require("./scale"),str:require("./str"),translate:require("./translate"),transpose:require("./transpose")};

},{"./adjoint":59,"./clone":60,"./copy":61,"./create":62,"./determinant":63,"./frob":64,"./from-mat2":65,"./from-mat4":66,"./from-quat":67,"./identity":68,"./invert":70,"./multiply":71,"./normal-from-mat4":72,"./rotate":73,"./scale":74,"./str":75,"./translate":76,"./transpose":77}],70:[function(require,module,exports){
'use strict';

function invert(n,r){var e=r[0],t=r[1],u=r[2],i=r[3],l=r[4],o=r[5],v=r[6],a=r[7],c=r[8],d=c*l-o*a,f=-c*i+o*v,m=a*i-l*v,p=e*d+t*f+u*m;return p?(p=1/p,n[0]=d*p,n[1]=(-c*t+u*a)*p,n[2]=(o*t-u*l)*p,n[3]=f*p,n[4]=(c*e-u*v)*p,n[5]=(-o*e+u*i)*p,n[6]=m*p,n[7]=(-a*e+t*v)*p,n[8]=(l*e-t*i)*p,n):null}module.exports=invert;

},{}],71:[function(require,module,exports){
'use strict';

function multiply(l,t,u){var r=t[0],e=t[1],i=t[2],m=t[3],n=t[4],o=t[5],p=t[6],y=t[7],a=t[8],c=u[0],d=u[1],f=u[2],s=u[3],v=u[4],x=u[5],b=u[6],g=u[7],h=u[8];return l[0]=c*r+d*m+f*p,l[1]=c*e+d*n+f*y,l[2]=c*i+d*o+f*a,l[3]=s*r+v*m+x*p,l[4]=s*e+v*n+x*y,l[5]=s*i+v*o+x*a,l[6]=b*r+g*m+h*p,l[7]=b*e+g*n+h*y,l[8]=b*i+g*o+h*a,l}module.exports=multiply;

},{}],72:[function(require,module,exports){
'use strict';

function normalFromMat4(r,o){var n=o[0],a=o[1],l=o[2],m=o[3],t=o[4],u=o[5],e=o[6],F=o[7],M=o[8],c=o[9],d=o[10],f=o[11],i=o[12],p=o[13],s=o[14],v=o[15],x=n*u-a*t,b=n*e-l*t,g=n*F-m*t,h=a*e-l*u,j=a*F-m*u,k=l*F-m*e,q=M*p-c*i,w=M*s-d*i,y=M*v-f*i,z=c*s-d*p,A=c*v-f*p,B=d*v-f*s,C=x*B-b*A+g*z+h*y-j*w+k*q;return C?(C=1/C,r[0]=(u*B-e*A+F*z)*C,r[1]=(e*y-t*B-F*w)*C,r[2]=(t*A-u*y+F*q)*C,r[3]=(l*A-a*B-m*z)*C,r[4]=(n*B-l*y+m*w)*C,r[5]=(a*y-n*A-m*q)*C,r[6]=(p*k-s*j+v*h)*C,r[7]=(s*g-i*k-v*b)*C,r[8]=(i*j-p*g+v*x)*C,r):null}module.exports=normalFromMat4;

},{}],73:[function(require,module,exports){
'use strict';

function rotate(t,o,r){var a=o[0],e=o[1],n=o[2],s=o[3],u=o[4],c=o[5],h=o[6],i=o[7],M=o[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*a+d*s,t[1]=f*e+d*u,t[2]=f*n+d*c,t[3]=f*s-d*a,t[4]=f*u-d*e,t[5]=f*c-d*n,t[6]=h,t[7]=i,t[8]=M,t}module.exports=rotate;

},{}],74:[function(require,module,exports){
'use strict';

function scale(e,r,a){var c=a[0],l=a[1];return e[0]=c*r[0],e[1]=c*r[1],e[2]=c*r[2],e[3]=l*r[3],e[4]=l*r[4],e[5]=l*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}module.exports=scale;

},{}],75:[function(require,module,exports){
'use strict';

function str(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}module.exports=str;

},{}],76:[function(require,module,exports){
'use strict';

function translate(t,r,a){var e=r[0],n=r[1],l=r[2],o=r[3],s=r[4],u=r[5],c=r[6],d=r[7],f=r[8],i=a[0],m=a[1];return t[0]=e,t[1]=n,t[2]=l,t[3]=o,t[4]=s,t[5]=u,t[6]=i*e+m*o+c,t[7]=i*n+m*s+d,t[8]=i*l+m*u+f,t}module.exports=translate;

},{}],77:[function(require,module,exports){
'use strict';

function transpose(e,r){if(e===r){var s=r[1],n=r[2],o=r[5];e[1]=r[3],e[2]=r[6],e[3]=s,e[5]=r[7],e[6]=n,e[7]=o;}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}module.exports=transpose;

},{}],78:[function(require,module,exports){
'use strict';

function adjoint(n,o){var t=o[0],r=o[1],a=o[2],d=o[3],e=o[4],i=o[5],u=o[6],j=o[7],c=o[8],f=o[9],l=o[10],m=o[11],p=o[12],s=o[13],v=o[14],x=o[15];return n[0]=i*(l*x-m*v)-f*(u*x-j*v)+s*(u*m-j*l),n[1]=-(r*(l*x-m*v)-f*(a*x-d*v)+s*(a*m-d*l)),n[2]=r*(u*x-j*v)-i*(a*x-d*v)+s*(a*j-d*u),n[3]=-(r*(u*m-j*l)-i*(a*m-d*l)+f*(a*j-d*u)),n[4]=-(e*(l*x-m*v)-c*(u*x-j*v)+p*(u*m-j*l)),n[5]=t*(l*x-m*v)-c*(a*x-d*v)+p*(a*m-d*l),n[6]=-(t*(u*x-j*v)-e*(a*x-d*v)+p*(a*j-d*u)),n[7]=t*(u*m-j*l)-e*(a*m-d*l)+c*(a*j-d*u),n[8]=e*(f*x-m*s)-c*(i*x-j*s)+p*(i*m-j*f),n[9]=-(t*(f*x-m*s)-c*(r*x-d*s)+p*(r*m-d*f)),n[10]=t*(i*x-j*s)-e*(r*x-d*s)+p*(r*j-d*i),n[11]=-(t*(i*m-j*f)-e*(r*m-d*f)+c*(r*j-d*i)),n[12]=-(e*(f*v-l*s)-c*(i*v-u*s)+p*(i*l-u*f)),n[13]=t*(f*v-l*s)-c*(r*v-a*s)+p*(r*l-a*f),n[14]=-(t*(i*v-u*s)-e*(r*v-a*s)+p*(r*u-a*i)),n[15]=t*(i*l-u*f)-e*(r*l-a*f)+c*(r*u-a*i),n}module.exports=adjoint;

},{}],79:[function(require,module,exports){
'use strict';

function clone(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}module.exports=clone;

},{}],80:[function(require,module,exports){
'use strict';

function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}module.exports=copy;

},{}],81:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}module.exports=create;

},{}],82:[function(require,module,exports){
'use strict';

function determinant(e){var n=e[0],t=e[1],r=e[2],a=e[3],d=e[4],i=e[5],m=e[6],o=e[7],u=e[8],c=e[9],f=e[10],l=e[11],p=e[12],s=e[13],v=e[14],x=e[15],b=n*i-t*d,g=n*m-r*d,h=n*o-a*d,j=t*m-r*i,k=t*o-a*i,q=r*o-a*m,w=u*s-c*p,y=u*v-f*p,z=u*x-l*p,A=c*v-f*s,B=c*x-l*s,C=f*x-l*v;return b*C-g*B+h*A+j*z-k*y+q*w}module.exports=determinant;

},{}],83:[function(require,module,exports){
'use strict';

function fromQuat(r,o){var t=o[0],u=o[1],a=o[2],e=o[3],f=t+t,m=u+u,n=a+a,Q=t*f,c=u*f,d=u*m,i=a*f,l=a*m,p=a*n,s=e*f,v=e*m,x=e*n;return r[0]=1-d-p,r[1]=c+x,r[2]=i-v,r[3]=0,r[4]=c-x,r[5]=1-Q-p,r[6]=l+s,r[7]=0,r[8]=i+v,r[9]=l-s,r[10]=1-Q-d,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}module.exports=fromQuat;

},{}],84:[function(require,module,exports){
'use strict';

function fromRotationTranslation(o,n,t){var r=n[0],a=n[1],i=n[2],e=n[3],f=r+r,l=a+a,m=i+i,s=r*f,u=r*l,R=r*m,T=a*l,c=a*m,d=i*m,p=e*f,v=e*l,x=e*m;return o[0]=1-(T+d),o[1]=u+x,o[2]=R-v,o[3]=0,o[4]=u-x,o[5]=1-(s+d),o[6]=c+p,o[7]=0,o[8]=R+v,o[9]=c-p,o[10]=1-(s+T),o[11]=0,o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=1,o}module.exports=fromRotationTranslation;

},{}],85:[function(require,module,exports){
'use strict';

function frustum(u,r,t,e,f,m,n){var o=1/(t-r),s=1/(f-e),a=1/(m-n);return u[0]=2*m*o,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*m*s,u[6]=0,u[7]=0,u[8]=(t+r)*o,u[9]=(f+e)*s,u[10]=(n+m)*a,u[11]=-1,u[12]=0,u[13]=0,u[14]=n*m*2*a,u[15]=0,u}module.exports=frustum;

},{}],86:[function(require,module,exports){
'use strict';

function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}module.exports=identity;

},{}],87:[function(require,module,exports){
'use strict';

module.exports={create:require("./create"),clone:require("./clone"),copy:require("./copy"),identity:require("./identity"),transpose:require("./transpose"),invert:require("./invert"),adjoint:require("./adjoint"),determinant:require("./determinant"),multiply:require("./multiply"),translate:require("./translate"),scale:require("./scale"),rotate:require("./rotate"),rotateX:require("./rotateX"),rotateY:require("./rotateY"),rotateZ:require("./rotateZ"),fromRotationTranslation:require("./fromRotationTranslation"),fromQuat:require("./fromQuat"),frustum:require("./frustum"),perspective:require("./perspective"),perspectiveFromFieldOfView:require("./perspectiveFromFieldOfView"),ortho:require("./ortho"),lookAt:require("./lookAt"),str:require("./str")};

},{"./adjoint":78,"./clone":79,"./copy":80,"./create":81,"./determinant":82,"./fromQuat":83,"./fromRotationTranslation":84,"./frustum":85,"./identity":86,"./invert":88,"./lookAt":89,"./multiply":90,"./ortho":91,"./perspective":92,"./perspectiveFromFieldOfView":93,"./rotate":94,"./rotateX":95,"./rotateY":96,"./rotateZ":97,"./scale":98,"./str":99,"./translate":100,"./transpose":101}],88:[function(require,module,exports){
'use strict';

function invert(n,r){var e=r[0],t=r[1],u=r[2],i=r[3],l=r[4],o=r[5],v=r[6],a=r[7],c=r[8],d=r[9],f=r[10],m=r[11],p=r[12],s=r[13],x=r[14],b=r[15],g=e*o-t*l,h=e*v-u*l,j=e*a-i*l,k=t*v-u*o,q=t*a-i*o,w=u*a-i*v,y=c*s-d*p,z=c*x-f*p,A=c*b-m*p,B=d*x-f*s,C=d*b-m*s,D=f*b-m*x,E=g*D-h*C+j*B+k*A-q*z+w*y;return E?(E=1/E,n[0]=(o*D-v*C+a*B)*E,n[1]=(u*C-t*D-i*B)*E,n[2]=(s*w-x*q+b*k)*E,n[3]=(f*q-d*w-m*k)*E,n[4]=(v*A-l*D-a*z)*E,n[5]=(e*D-u*A+i*z)*E,n[6]=(x*j-p*w-b*h)*E,n[7]=(c*w-f*j+m*h)*E,n[8]=(l*C-o*A+a*y)*E,n[9]=(t*A-e*C-i*y)*E,n[10]=(p*q-s*j+b*g)*E,n[11]=(d*j-c*q-m*g)*E,n[12]=(o*z-l*B-v*y)*E,n[13]=(e*B-t*z+u*y)*E,n[14]=(s*h-p*k-x*g)*E,n[15]=(c*k-d*h+f*g)*E,n):null}module.exports=invert;

},{}],89:[function(require,module,exports){
'use strict';

function lookAt(t,a,e,r){var i,o,s,h,n,M,d,q,u,b,l=a[0],y=a[1],k=a[2],v=r[0],A=r[1],c=r[2],f=e[0],m=e[1],p=e[2];return Math.abs(l-f)<1e-6&&Math.abs(y-m)<1e-6&&Math.abs(k-p)<1e-6?identity(t):(d=l-f,q=y-m,u=k-p,b=1/Math.sqrt(d*d+q*q+u*u),d*=b,q*=b,u*=b,i=A*u-c*q,o=c*d-v*u,s=v*q-A*d,b=Math.sqrt(i*i+o*o+s*s),b?(b=1/b,i*=b,o*=b,s*=b):(i=0,o=0,s=0),h=q*s-u*o,n=u*i-d*s,M=d*o-q*i,b=Math.sqrt(h*h+n*n+M*M),b?(b=1/b,h*=b,n*=b,M*=b):(h=0,n=0,M=0),t[0]=i,t[1]=h,t[2]=d,t[3]=0,t[4]=o,t[5]=n,t[6]=q,t[7]=0,t[8]=s,t[9]=M,t[10]=u,t[11]=0,t[12]=-(i*l+o*y+s*k),t[13]=-(h*l+n*y+M*k),t[14]=-(d*l+q*y+u*k),t[15]=1,t)}var identity=require("./identity");module.exports=lookAt;

},{"./identity":86}],90:[function(require,module,exports){
'use strict';

function multiply(l,t,u){var r=t[0],e=t[1],i=t[2],m=t[3],n=t[4],o=t[5],p=t[6],y=t[7],a=t[8],c=t[9],d=t[10],f=t[11],s=t[12],v=t[13],x=t[14],b=t[15],g=u[0],h=u[1],j=u[2],k=u[3];return l[0]=g*r+h*n+j*a+k*s,l[1]=g*e+h*o+j*c+k*v,l[2]=g*i+h*p+j*d+k*x,l[3]=g*m+h*y+j*f+k*b,g=u[4],h=u[5],j=u[6],k=u[7],l[4]=g*r+h*n+j*a+k*s,l[5]=g*e+h*o+j*c+k*v,l[6]=g*i+h*p+j*d+k*x,l[7]=g*m+h*y+j*f+k*b,g=u[8],h=u[9],j=u[10],k=u[11],l[8]=g*r+h*n+j*a+k*s,l[9]=g*e+h*o+j*c+k*v,l[10]=g*i+h*p+j*d+k*x,l[11]=g*m+h*y+j*f+k*b,g=u[12],h=u[13],j=u[14],k=u[15],l[12]=g*r+h*n+j*a+k*s,l[13]=g*e+h*o+j*c+k*v,l[14]=g*i+h*p+j*d+k*x,l[15]=g*m+h*y+j*f+k*b,l}module.exports=multiply;

},{}],91:[function(require,module,exports){
'use strict';

function ortho(o,r,t,e,n,u,h){var a=1/(r-t),c=1/(e-n),d=1/(u-h);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*d,o[11]=0,o[12]=(r+t)*a,o[13]=(n+e)*c,o[14]=(h+u)*d,o[15]=1,o}module.exports=ortho;

},{}],92:[function(require,module,exports){
'use strict';

function perspective(e,t,r,p,n){var a=1/Math.tan(t/2),c=1/(p-n);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+p)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*p*c,e[15]=0,e}module.exports=perspective;

},{}],93:[function(require,module,exports){
'use strict';

function perspectiveFromFieldOfView(e,t,a,r){var h=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),M=Math.tan(t.rightDegrees*Math.PI/180),s=2/(n+M),o=2/(h+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=-((n-M)*s*.5),e[9]=(h-i)*o*.5,e[10]=r/(a-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*a/(a-r),e[15]=0,e}module.exports=perspectiveFromFieldOfView;

},{}],94:[function(require,module,exports){
'use strict';

function rotate(t,a,r,e){var o,n,s,h,u,M,l,c,i,b,d,f,m,p,q,v,x,g,j,k,w,y,z,A,B=e[0],C=e[1],D=e[2],E=Math.sqrt(B*B+C*C+D*D);return Math.abs(E)<1e-6?null:(E=1/E,B*=E,C*=E,D*=E,o=Math.sin(r),n=Math.cos(r),s=1-n,h=a[0],u=a[1],M=a[2],l=a[3],c=a[4],i=a[5],b=a[6],d=a[7],f=a[8],m=a[9],p=a[10],q=a[11],v=B*B*s+n,x=C*B*s+D*o,g=D*B*s-C*o,j=B*C*s-D*o,k=C*C*s+n,w=D*C*s+B*o,y=B*D*s+C*o,z=C*D*s-B*o,A=D*D*s+n,t[0]=h*v+c*x+f*g,t[1]=u*v+i*x+m*g,t[2]=M*v+b*x+p*g,t[3]=l*v+d*x+q*g,t[4]=h*j+c*k+f*w,t[5]=u*j+i*k+m*w,t[6]=M*j+b*k+p*w,t[7]=l*j+d*k+q*w,t[8]=h*y+c*z+f*A,t[9]=u*y+i*z+m*A,t[10]=M*y+b*z+p*A,t[11]=l*y+d*z+q*A,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)}module.exports=rotate;

},{}],95:[function(require,module,exports){
'use strict';

function rotateX(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[4],s=o[5],u=o[6],c=o[7],h=o[8],i=o[9],M=o[10],X=o[11];return o!==t&&(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[4]=n*e+h*a,t[5]=s*e+i*a,t[6]=u*e+M*a,t[7]=c*e+X*a,t[8]=h*e-n*a,t[9]=i*e-s*a,t[10]=M*e-u*a,t[11]=X*e-c*a,t}module.exports=rotateX;

},{}],96:[function(require,module,exports){
'use strict';

function rotateY(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[0],s=o[1],u=o[2],c=o[3],h=o[8],i=o[9],M=o[10],Y=o[11];return o!==t&&(t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=n*e-h*a,t[1]=s*e-i*a,t[2]=u*e-M*a,t[3]=c*e-Y*a,t[8]=n*a+h*e,t[9]=s*a+i*e,t[10]=u*a+M*e,t[11]=c*a+Y*e,t}module.exports=rotateY;

},{}],97:[function(require,module,exports){
'use strict';

function rotateZ(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[0],s=o[1],u=o[2],c=o[3],h=o[4],i=o[5],M=o[6],Z=o[7];return o!==t&&(t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=n*e+h*a,t[1]=s*e+i*a,t[2]=u*e+M*a,t[3]=c*e+Z*a,t[4]=h*e-n*a,t[5]=i*e-s*a,t[6]=M*e-u*a,t[7]=Z*e-c*a,t}module.exports=rotateZ;

},{}],98:[function(require,module,exports){
'use strict';

function scale(e,r,a){var c=a[0],l=a[1],n=a[2];return e[0]=r[0]*c,e[1]=r[1]*c,e[2]=r[2]*c,e[3]=r[3]*c,e[4]=r[4]*l,e[5]=r[5]*l,e[6]=r[6]*l,e[7]=r[7]*l,e[8]=r[8]*n,e[9]=r[9]*n,e[10]=r[10]*n,e[11]=r[11]*n,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}module.exports=scale;

},{}],99:[function(require,module,exports){
'use strict';

function str(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}module.exports=str;

},{}],100:[function(require,module,exports){
'use strict';

function translate(t,r,a){var e,n,l,o,s,u,c,d,f,i,m,p,v=a[0],x=a[1],b=a[2];return r===t?(t[12]=r[0]*v+r[4]*x+r[8]*b+r[12],t[13]=r[1]*v+r[5]*x+r[9]*b+r[13],t[14]=r[2]*v+r[6]*x+r[10]*b+r[14],t[15]=r[3]*v+r[7]*x+r[11]*b+r[15]):(e=r[0],n=r[1],l=r[2],o=r[3],s=r[4],u=r[5],c=r[6],d=r[7],f=r[8],i=r[9],m=r[10],p=r[11],t[0]=e,t[1]=n,t[2]=l,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=f,t[9]=i,t[10]=m,t[11]=p,t[12]=e*v+s*x+f*b+r[12],t[13]=n*v+u*x+i*b+r[13],t[14]=l*v+c*x+m*b+r[14],t[15]=o*v+d*x+p*b+r[15]),t}module.exports=translate;

},{}],101:[function(require,module,exports){
'use strict';

function transpose(e,r){if(e===r){var s=r[1],n=r[2],o=r[3],t=r[6],a=r[7],p=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=s,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=t,e[11]=r[14],e[12]=o,e[13]=a,e[14]=p;}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}module.exports=transpose;

},{}],102:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/add");

},{"gl-vec4/add":191}],103:[function(require,module,exports){
'use strict';

function calculateW(a,t){var c=t[0],e=t[1],l=t[2];return a[0]=c,a[1]=e,a[2]=l,a[3]=Math.sqrt(Math.abs(1-c*c-e*e-l*l)),a}module.exports=calculateW;

},{}],104:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/clone");

},{"gl-vec4/clone":192}],105:[function(require,module,exports){
'use strict';

function conjugate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e}module.exports=conjugate;

},{}],106:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/copy");

},{"gl-vec4/copy":193}],107:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}module.exports=create;

},{}],108:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/dot");

},{"gl-vec4/dot":197}],109:[function(require,module,exports){
'use strict';

function fromMat3(r,t){var a,e=t[0]+t[4]+t[8];if(e>0)a=Math.sqrt(e+1),r[3]=.5*a,a=.5/a,r[0]=(t[5]-t[7])*a,r[1]=(t[6]-t[2])*a,r[2]=(t[1]-t[3])*a;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var f=(o+1)%3,s=(o+2)%3;a=Math.sqrt(t[3*o+o]-t[3*f+f]-t[3*s+s]+1),r[o]=.5*a,a=.5/a,r[3]=(t[3*f+s]-t[3*s+f])*a,r[f]=(t[3*f+o]+t[3*o+f])*a,r[s]=(t[3*s+o]+t[3*o+s])*a;}return r}module.exports=fromMat3;

},{}],110:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/fromValues");

},{"gl-vec4/fromValues":198}],111:[function(require,module,exports){
'use strict';

function identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}module.exports=identity;

},{}],112:[function(require,module,exports){
'use strict';

module.exports={add:require("./add"),calculateW:require("./calculateW"),clone:require("./clone"),conjugate:require("./conjugate"),copy:require("./copy"),create:require("./create"),dot:require("./dot"),fromMat3:require("./fromMat3"),fromValues:require("./fromValues"),identity:require("./identity"),invert:require("./invert"),length:require("./length"),lerp:require("./lerp"),multiply:require("./multiply"),normalize:require("./normalize"),rotateX:require("./rotateX"),rotateY:require("./rotateY"),rotateZ:require("./rotateZ"),rotationTo:require("./rotationTo"),scale:require("./scale"),set:require("./set"),setAxes:require("./setAxes"),setAxisAngle:require("./setAxisAngle"),slerp:require("./slerp"),sqlerp:require("./sqlerp"),squaredLength:require("./squaredLength")};

},{"./add":102,"./calculateW":103,"./clone":104,"./conjugate":105,"./copy":106,"./create":107,"./dot":108,"./fromMat3":109,"./fromValues":110,"./identity":111,"./invert":113,"./length":114,"./lerp":115,"./multiply":116,"./normalize":117,"./rotateX":118,"./rotateY":119,"./rotateZ":120,"./rotationTo":121,"./scale":122,"./set":123,"./setAxes":124,"./setAxisAngle":125,"./slerp":126,"./sqlerp":127,"./squaredLength":128}],113:[function(require,module,exports){
'use strict';

function invert(r,e){var n=e[0],t=e[1],i=e[2],o=e[3],u=n*n+t*t+i*i+o*o,v=u?1/u:0;return r[0]=-n*v,r[1]=-t*v,r[2]=-i*v,r[3]=o*v,r}module.exports=invert;

},{}],114:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/length");

},{"gl-vec4/length":201}],115:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/lerp");

},{"gl-vec4/lerp":202}],116:[function(require,module,exports){
'use strict';

function multiply(l,t,u){var r=t[0],e=t[1],i=t[2],m=t[3],n=u[0],o=u[1],p=u[2],y=u[3];return l[0]=r*y+m*n+e*p-i*o,l[1]=e*y+m*o+i*n-r*p,l[2]=i*y+m*p+r*o-e*n,l[3]=m*y-r*n-e*o-i*p,l}module.exports=multiply;

},{}],117:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/normalize");

},{"gl-vec4/normalize":207}],118:[function(require,module,exports){
'use strict';

function rotateX(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c+s*u,t[1]=e*c+n*u,t[2]=n*c-e*u,t[3]=s*c-a*u,t}module.exports=rotateX;

},{}],119:[function(require,module,exports){
'use strict';

function rotateY(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c-n*u,t[1]=e*c+s*u,t[2]=n*c+a*u,t[3]=s*c-e*u,t}module.exports=rotateY;

},{}],120:[function(require,module,exports){
'use strict';

function rotateZ(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c+e*u,t[1]=e*c-a*u,t[2]=n*c+s*u,t[3]=s*c-n*u,t}module.exports=rotateZ;

},{}],121:[function(require,module,exports){
'use strict';

function rotationTo(e,t,c){var r=vecDot(t,c);return r<-.999999?(vecCross(tmpvec3,xUnitVec3,t),vecLength(tmpvec3)<1e-6&&vecCross(tmpvec3,yUnitVec3,t),vecNormalize(tmpvec3,tmpvec3),quatAxisAngle(e,tmpvec3,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(vecCross(tmpvec3,t,c),e[0]=tmpvec3[0],e[1]=tmpvec3[1],e[2]=tmpvec3[2],e[3]=1+r,quatNormalize(e,e))}var vecDot=require("gl-vec3/dot"); var vecCross=require("gl-vec3/cross"); var vecLength=require("gl-vec3/length"); var vecNormalize=require("gl-vec3/normalize"); var quatNormalize=require("./normalize"); var quatAxisAngle=require("./setAxisAngle");module.exports=rotationTo;var tmpvec3=[0,0,0]; var xUnitVec3=[1,0,0]; var yUnitVec3=[0,1,0];

},{"./normalize":117,"./setAxisAngle":125,"gl-vec3/cross":163,"gl-vec3/dot":166,"gl-vec3/length":171,"gl-vec3/normalize":177}],122:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/scale");

},{"gl-vec4/scale":209}],123:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/set");

},{"gl-vec4/set":211}],124:[function(require,module,exports){
'use strict';

function setAxes(r,a,t,e){return matr[0]=t[0],matr[3]=t[1],matr[6]=t[2],matr[1]=e[0],matr[4]=e[1],matr[7]=e[2],matr[2]=-a[0],matr[5]=-a[1],matr[8]=-a[2],normalize(r,fromMat3(r,matr))}var mat3create=require("gl-mat3/create"); var fromMat3=require("./fromMat3"); var normalize=require("./normalize");module.exports=setAxes;var matr=mat3create();

},{"./fromMat3":109,"./normalize":117,"gl-mat3/create":62}],125:[function(require,module,exports){
'use strict';

function setAxisAngle(e,s,t){t*=.5;var n=Math.sin(t);return e[0]=n*s[0],e[1]=n*s[1],e[2]=n*s[2],e[3]=Math.cos(t),e}module.exports=setAxisAngle;

},{}],126:[function(require,module,exports){
'use strict';

function slerp(s,t,a,e){var n,r,h,i,o,M=t[0],l=t[1],p=t[2],u=t[3],c=a[0],d=a[1],f=a[2],m=a[3];return r=M*c+l*d+p*f+u*m,r<0&&(r=-r,c=-c,d=-d,f=-f,m=-m),1-r>1e-6?(n=Math.acos(r),h=Math.sin(n),i=Math.sin((1-e)*n)/h,o=Math.sin(e*n)/h):(i=1-e,o=e),s[0]=i*M+o*c,s[1]=i*l+o*d,s[2]=i*p+o*f,s[3]=i*u+o*m,s}module.exports=slerp;

},{}],127:[function(require,module,exports){
'use strict';

function sqlerp(e,p,r,t,l,s){return slerp(temp1,p,l,s),slerp(temp2,r,t,s),slerp(e,temp1,temp2,2*s*(1-s)),e}var slerp=require("./slerp");module.exports=sqlerp;var temp1=[0,0,0,1]; var temp2=[0,0,0,1];

},{"./slerp":126}],128:[function(require,module,exports){
'use strict';

module.exports=require("gl-vec4/squaredLength");

},{"gl-vec4/squaredLength":213}],129:[function(require,module,exports){
'use strict';

function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d}module.exports=add;

},{}],130:[function(require,module,exports){
'use strict';

function clone(e){var n=new Float32Array(2);return n[0]=e[0],n[1]=e[1],n}module.exports=clone;

},{}],131:[function(require,module,exports){
'use strict';

function copy(o,c){return o[0]=c[0],o[1]=c[1],o}module.exports=copy;

},{}],132:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}module.exports=create;

},{}],133:[function(require,module,exports){
'use strict';

function cross(r,o,s){var c=o[0]*s[1]-o[1]*s[0];return r[0]=r[1]=0,r[2]=c,r}module.exports=cross;

},{}],134:[function(require,module,exports){
'use strict';

function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}module.exports=distance;

},{}],135:[function(require,module,exports){
'use strict';

function divide(d,e,i){return d[0]=e[0]/i[0],d[1]=e[1]/i[1],d}module.exports=divide;

},{}],136:[function(require,module,exports){
'use strict';

function dot(o,t){return o[0]*t[0]+o[1]*t[1]}module.exports=dot;

},{}],137:[function(require,module,exports){
'use strict';

function forEach(e,c,r,v,t,a){var n,o;for(c||(c=2),r||(r=0),o=v?Math.min(v*c+r,e.length):e.length,n=r;n<o;n+=c)vec[0]=e[n],vec[1]=e[n+1],t(vec,vec,a),e[n]=vec[0],e[n+1]=vec[1];return e}module.exports=forEach;var vec=require("./create")();

},{"./create":132}],138:[function(require,module,exports){
'use strict';

function fromValues(r,e){var o=new Float32Array(2);return o[0]=r,o[1]=e,o}module.exports=fromValues;

},{}],139:[function(require,module,exports){
'use strict';

module.exports={create:require("./create"),clone:require("./clone"),fromValues:require("./fromValues"),copy:require("./copy"),set:require("./set"),add:require("./add"),subtract:require("./subtract"),multiply:require("./multiply"),divide:require("./divide"),min:require("./min"),max:require("./max"),scale:require("./scale"),scaleAndAdd:require("./scaleAndAdd"),distance:require("./distance"),squaredDistance:require("./squaredDistance"),length:require("./length"),squaredLength:require("./squaredLength"),negate:require("./negate"),normalize:require("./normalize"),dot:require("./dot"),cross:require("./cross"),lerp:require("./lerp"),random:require("./random"),transformMat2:require("./transformMat2"),transformMat2d:require("./transformMat2d"),transformMat3:require("./transformMat3"),transformMat4:require("./transformMat4"),forEach:require("./forEach")};

},{"./add":129,"./clone":130,"./copy":131,"./create":132,"./cross":133,"./distance":134,"./divide":135,"./dot":136,"./forEach":137,"./fromValues":138,"./length":140,"./lerp":141,"./max":142,"./min":143,"./multiply":144,"./negate":145,"./normalize":146,"./random":147,"./scale":148,"./scaleAndAdd":149,"./set":150,"./squaredDistance":151,"./squaredLength":152,"./subtract":153,"./transformMat2":154,"./transformMat2d":155,"./transformMat3":156,"./transformMat4":157}],140:[function(require,module,exports){
'use strict';

function length(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}module.exports=length;

},{}],141:[function(require,module,exports){
'use strict';

function lerp(r,e,l,n){var o=e[0],p=e[1];return r[0]=o+n*(l[0]-o),r[1]=p+n*(l[1]-p),r}module.exports=lerp;

},{}],142:[function(require,module,exports){
'use strict';

function max(a,m,t){return a[0]=Math.max(m[0],t[0]),a[1]=Math.max(m[1],t[1]),a}module.exports=max;

},{}],143:[function(require,module,exports){
'use strict';

function min(n,i,m){return n[0]=Math.min(i[0],m[0]),n[1]=Math.min(i[1],m[1]),n}module.exports=min;

},{}],144:[function(require,module,exports){
'use strict';

function multiply(l,t,u){return l[0]=t[0]*u[0],l[1]=t[1]*u[1],l}module.exports=multiply;

},{}],145:[function(require,module,exports){
'use strict';

function negate(e,n){return e[0]=-n[0],e[1]=-n[1],e}module.exports=negate;

},{}],146:[function(require,module,exports){
'use strict';

function normalize(r,e){var n=e[0],o=e[1],t=n*n+o*o;return t>0&&(t=1/Math.sqrt(t),r[0]=e[0]*t,r[1]=e[1]*t),r}module.exports=normalize;

},{}],147:[function(require,module,exports){
'use strict';

function random(a,n){n=n||1;var o=2*Math.random()*Math.PI;return a[0]=Math.cos(o)*n,a[1]=Math.sin(o)*n,a}module.exports=random;

},{}],148:[function(require,module,exports){
'use strict';

function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e}module.exports=scale;

},{}],149:[function(require,module,exports){
'use strict';

function scaleAndAdd(d,e,n,A){return d[0]=e[0]+n[0]*A,d[1]=e[1]+n[1]*A,d}module.exports=scaleAndAdd;

},{}],150:[function(require,module,exports){
'use strict';

function set(e,t,n){return e[0]=t,e[1]=n,e}module.exports=set;

},{}],151:[function(require,module,exports){
'use strict';

function squaredDistance(e,r){var a=r[0]-e[0],n=r[1]-e[1];return a*a+n*n}module.exports=squaredDistance;

},{}],152:[function(require,module,exports){
'use strict';

function squaredLength(e){var r=e[0],n=e[1];return r*r+n*n}module.exports=squaredLength;

},{}],153:[function(require,module,exports){
'use strict';

function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t}module.exports=subtract;

},{}],154:[function(require,module,exports){
'use strict';

function transformMat2(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[2]*o,r[1]=a[1]*n+a[3]*o,r}module.exports=transformMat2;

},{}],155:[function(require,module,exports){
'use strict';

function transformMat2d(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[2]*o+a[4],r[1]=a[1]*n+a[3]*o+a[5],r}module.exports=transformMat2d;

},{}],156:[function(require,module,exports){
'use strict';

function transformMat3(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[3]*o+a[6],r[1]=a[1]*n+a[4]*o+a[7],r}module.exports=transformMat3;

},{}],157:[function(require,module,exports){
'use strict';

function transformMat4(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[4]*o+a[12],r[1]=a[1]*n+a[5]*o+a[13],r}module.exports=transformMat4;

},{}],158:[function(require,module,exports){
'use strict';

function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d[2]=e[2]+n[2],d}module.exports=add;

},{}],159:[function(require,module,exports){
'use strict';

function angle(r,e){var a=fromValues(r[0],r[1],r[2]),o=fromValues(e[0],e[1],e[2]);normalize(a,a),normalize(o,o);var l=dot(a,o);return l>1?0:Math.acos(l)}module.exports=angle;var fromValues=require("./fromValues"); var normalize=require("./normalize"); var dot=require("./dot");

},{"./dot":166,"./fromValues":168,"./normalize":177}],160:[function(require,module,exports){
'use strict';

function clone(e){var n=new Float32Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}module.exports=clone;

},{}],161:[function(require,module,exports){
'use strict';

function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}module.exports=copy;

},{}],162:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}module.exports=create;

},{}],163:[function(require,module,exports){
'use strict';

function cross(r,o,s){var c=o[0],e=o[1],n=o[2],t=s[0],u=s[1],a=s[2];return r[0]=e*a-n*u,r[1]=n*t-c*a,r[2]=c*u-e*t,r}module.exports=cross;

},{}],164:[function(require,module,exports){
'use strict';

function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}module.exports=distance;

},{}],165:[function(require,module,exports){
'use strict';

function divide(d,e,i){return d[0]=e[0]/i[0],d[1]=e[1]/i[1],d[2]=e[2]/i[2],d}module.exports=divide;

},{}],166:[function(require,module,exports){
'use strict';

function dot(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]}module.exports=dot;

},{}],167:[function(require,module,exports){
'use strict';

function forEach(e,c,r,v,t,a){var n,o;for(c||(c=3),r||(r=0),o=v?Math.min(v*c+r,e.length):e.length,n=r;n<o;n+=c)vec[0]=e[n],vec[1]=e[n+1],vec[2]=e[n+2],t(vec,vec,a),e[n]=vec[0],e[n+1]=vec[1],e[n+2]=vec[2];return e}module.exports=forEach;var vec=require("./create")();

},{"./create":162}],168:[function(require,module,exports){
'use strict';

function fromValues(r,e,o){var a=new Float32Array(3);return a[0]=r,a[1]=e,a[2]=o,a}module.exports=fromValues;

},{}],169:[function(require,module,exports){
'use strict';

module.exports={create:require("./create"),clone:require("./clone"),angle:require("./angle"),fromValues:require("./fromValues"),copy:require("./copy"),set:require("./set"),add:require("./add"),subtract:require("./subtract"),multiply:require("./multiply"),divide:require("./divide"),min:require("./min"),max:require("./max"),scale:require("./scale"),scaleAndAdd:require("./scaleAndAdd"),distance:require("./distance"),squaredDistance:require("./squaredDistance"),length:require("./length"),squaredLength:require("./squaredLength"),negate:require("./negate"),inverse:require("./inverse"),normalize:require("./normalize"),dot:require("./dot"),cross:require("./cross"),lerp:require("./lerp"),random:require("./random"),transformMat4:require("./transformMat4"),transformMat3:require("./transformMat3"),transformQuat:require("./transformQuat"),rotateX:require("./rotateX"),rotateY:require("./rotateY"),rotateZ:require("./rotateZ"),forEach:require("./forEach")};

},{"./add":158,"./angle":159,"./clone":160,"./copy":161,"./create":162,"./cross":163,"./distance":164,"./divide":165,"./dot":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./length":171,"./lerp":172,"./max":173,"./min":174,"./multiply":175,"./negate":176,"./normalize":177,"./random":178,"./rotateX":179,"./rotateY":180,"./rotateZ":181,"./scale":182,"./scaleAndAdd":183,"./set":184,"./squaredDistance":185,"./squaredLength":186,"./subtract":187,"./transformMat3":188,"./transformMat4":189,"./transformQuat":190}],170:[function(require,module,exports){
'use strict';

function inverse(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}module.exports=inverse;

},{}],171:[function(require,module,exports){
'use strict';

function length(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}module.exports=length;

},{}],172:[function(require,module,exports){
'use strict';

function lerp(r,e,l,n){var o=e[0],p=e[1],t=e[2];return r[0]=o+n*(l[0]-o),r[1]=p+n*(l[1]-p),r[2]=t+n*(l[2]-t),r}module.exports=lerp;

},{}],173:[function(require,module,exports){
'use strict';

function max(a,m,t){return a[0]=Math.max(m[0],t[0]),a[1]=Math.max(m[1],t[1]),a[2]=Math.max(m[2],t[2]),a}module.exports=max;

},{}],174:[function(require,module,exports){
'use strict';

function min(n,i,m){return n[0]=Math.min(i[0],m[0]),n[1]=Math.min(i[1],m[1]),n[2]=Math.min(i[2],m[2]),n}module.exports=min;

},{}],175:[function(require,module,exports){
'use strict';

function multiply(l,t,u){return l[0]=t[0]*u[0],l[1]=t[1]*u[1],l[2]=t[2]*u[2],l}module.exports=multiply;

},{}],176:[function(require,module,exports){
'use strict';

function negate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}module.exports=negate;

},{}],177:[function(require,module,exports){
'use strict';

function normalize(r,e){var n=e[0],o=e[1],t=e[2],a=n*n+o*o+t*t;return a>0&&(a=1/Math.sqrt(a),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a),r}module.exports=normalize;

},{}],178:[function(require,module,exports){
'use strict';

function random(a,t){t=t||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,o=Math.sqrt(1-n*n)*t;return a[0]=Math.cos(r)*o,a[1]=Math.sin(r)*o,a[2]=n*t,a}module.exports=random;

},{}],179:[function(require,module,exports){
'use strict';

function rotateX(t,a,o,r){var e=[],n=[];return e[0]=a[0]-o[0],e[1]=a[1]-o[1],e[2]=a[2]-o[2],n[0]=e[0],n[1]=e[1]*Math.cos(r)-e[2]*Math.sin(r),n[2]=e[1]*Math.sin(r)+e[2]*Math.cos(r),t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}module.exports=rotateX;

},{}],180:[function(require,module,exports){
'use strict';

function rotateY(t,a,o,r){var e=[],n=[];return e[0]=a[0]-o[0],e[1]=a[1]-o[1],e[2]=a[2]-o[2],n[0]=e[2]*Math.sin(r)+e[0]*Math.cos(r),n[1]=e[1],n[2]=e[2]*Math.cos(r)-e[0]*Math.sin(r),t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}module.exports=rotateY;

},{}],181:[function(require,module,exports){
'use strict';

function rotateZ(t,a,o,r){var e=[],n=[];return e[0]=a[0]-o[0],e[1]=a[1]-o[1],e[2]=a[2]-o[2],n[0]=e[0]*Math.cos(r)-e[1]*Math.sin(r),n[1]=e[0]*Math.sin(r)+e[1]*Math.cos(r),n[2]=e[2],t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t}module.exports=rotateZ;

},{}],182:[function(require,module,exports){
'use strict';

function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e[2]=c[2]*l,e}module.exports=scale;

},{}],183:[function(require,module,exports){
'use strict';

function scaleAndAdd(d,e,n,A){return d[0]=e[0]+n[0]*A,d[1]=e[1]+n[1]*A,d[2]=e[2]+n[2]*A,d}module.exports=scaleAndAdd;

},{}],184:[function(require,module,exports){
'use strict';

function set(e,t,n,o){return e[0]=t,e[1]=n,e[2]=o,e}module.exports=set;

},{}],185:[function(require,module,exports){
'use strict';

function squaredDistance(e,r){var a=r[0]-e[0],n=r[1]-e[1],s=r[2]-e[2];return a*a+n*n+s*s}module.exports=squaredDistance;

},{}],186:[function(require,module,exports){
'use strict';

function squaredLength(e){var r=e[0],n=e[1],t=e[2];return r*r+n*n+t*t}module.exports=squaredLength;

},{}],187:[function(require,module,exports){
'use strict';

function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t[2]=r[2]-u[2],t}module.exports=subtract;

},{}],188:[function(require,module,exports){
'use strict';

function transformMat3(r,t,a){var n=t[0],o=t[1],e=t[2];return r[0]=n*a[0]+o*a[3]+e*a[6],r[1]=n*a[1]+o*a[4]+e*a[7],r[2]=n*a[2]+o*a[5]+e*a[8],r}module.exports=transformMat3;

},{}],189:[function(require,module,exports){
'use strict';

function transformMat4(r,t,a){var n=t[0],o=t[1],e=t[2],f=a[3]*n+a[7]*o+a[11]*e+a[15];return f=f||1,r[0]=(a[0]*n+a[4]*o+a[8]*e+a[12])/f,r[1]=(a[1]*n+a[5]*o+a[9]*e+a[13])/f,r[2]=(a[2]*n+a[6]*o+a[10]*e+a[14])/f,r}module.exports=transformMat4;

},{}],190:[function(require,module,exports){
'use strict';

function transformQuat(r,t,a){var n=t[0],o=t[1],u=t[2],e=a[0],f=a[1],m=a[2],s=a[3],Q=s*n+f*u-m*o,c=s*o+m*n-e*u,d=s*u+e*o-f*n,i=-e*n-f*o-m*u;return r[0]=Q*s+i*-e+c*-m-d*-f,r[1]=c*s+i*-f+d*-e-Q*-m,r[2]=d*s+i*-m+Q*-f-c*-e,r}module.exports=transformQuat;

},{}],191:[function(require,module,exports){
'use strict';

function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d[2]=e[2]+n[2],d[3]=e[3]+n[3],d}module.exports=add;

},{}],192:[function(require,module,exports){
'use strict';

function clone(e){var n=new Float32Array(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}module.exports=clone;

},{}],193:[function(require,module,exports){
'use strict';

function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o}module.exports=copy;

},{}],194:[function(require,module,exports){
'use strict';

function create(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}module.exports=create;

},{}],195:[function(require,module,exports){
'use strict';

function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+s*s)}module.exports=distance;

},{}],196:[function(require,module,exports){
'use strict';

function divide(d,e,i){return d[0]=e[0]/i[0],d[1]=e[1]/i[1],d[2]=e[2]/i[2],d[3]=e[3]/i[3],d}module.exports=divide;

},{}],197:[function(require,module,exports){
'use strict';

function dot(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]}module.exports=dot;

},{}],198:[function(require,module,exports){
'use strict';

function fromValues(r,e,o,a){var u=new Float32Array(4);return u[0]=r,u[1]=e,u[2]=o,u[3]=a,u}module.exports=fromValues;

},{}],199:[function(require,module,exports){
'use strict';

module.exports={create:require("./create"),clone:require("./clone"),fromValues:require("./fromValues"),copy:require("./copy"),set:require("./set"),add:require("./add"),subtract:require("./subtract"),multiply:require("./multiply"),divide:require("./divide"),min:require("./min"),max:require("./max"),scale:require("./scale"),scaleAndAdd:require("./scaleAndAdd"),distance:require("./distance"),squaredDistance:require("./squaredDistance"),length:require("./length"),squaredLength:require("./squaredLength"),negate:require("./negate"),inverse:require("./inverse"),normalize:require("./normalize"),dot:require("./dot"),lerp:require("./lerp"),random:require("./random"),transformMat4:require("./transformMat4"),transformQuat:require("./transformQuat")};

},{"./add":191,"./clone":192,"./copy":193,"./create":194,"./distance":195,"./divide":196,"./dot":197,"./fromValues":198,"./inverse":200,"./length":201,"./lerp":202,"./max":203,"./min":204,"./multiply":205,"./negate":206,"./normalize":207,"./random":208,"./scale":209,"./scaleAndAdd":210,"./set":211,"./squaredDistance":212,"./squaredLength":213,"./subtract":214,"./transformMat4":215,"./transformQuat":216}],200:[function(require,module,exports){
'use strict';

function inverse(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}module.exports=inverse;

},{}],201:[function(require,module,exports){
'use strict';

function length(t){var e=t[0],n=t[1],r=t[2],h=t[3];return Math.sqrt(e*e+n*n+r*r+h*h)}module.exports=length;

},{}],202:[function(require,module,exports){
'use strict';

function lerp(r,e,l,n){var o=e[0],p=e[1],t=e[2],u=e[3];return r[0]=o+n*(l[0]-o),r[1]=p+n*(l[1]-p),r[2]=t+n*(l[2]-t),r[3]=u+n*(l[3]-u),r}module.exports=lerp;

},{}],203:[function(require,module,exports){
'use strict';

function max(a,m,t){return a[0]=Math.max(m[0],t[0]),a[1]=Math.max(m[1],t[1]),a[2]=Math.max(m[2],t[2]),a[3]=Math.max(m[3],t[3]),a}module.exports=max;

},{}],204:[function(require,module,exports){
'use strict';

function min(n,i,m){return n[0]=Math.min(i[0],m[0]),n[1]=Math.min(i[1],m[1]),n[2]=Math.min(i[2],m[2]),n[3]=Math.min(i[3],m[3]),n}module.exports=min;

},{}],205:[function(require,module,exports){
'use strict';

function multiply(l,t,u){return l[0]=t[0]*u[0],l[1]=t[1]*u[1],l[2]=t[2]*u[2],l[3]=t[3]*u[3],l}module.exports=multiply;

},{}],206:[function(require,module,exports){
'use strict';

function negate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}module.exports=negate;

},{}],207:[function(require,module,exports){
'use strict';

function normalize(r,e){var n=e[0],o=e[1],t=e[2],a=e[3],i=n*n+o*o+t*t+a*a;return i>0&&(i=1/Math.sqrt(i),r[0]=n*i,r[1]=o*i,r[2]=t*i,r[3]=a*i),r}module.exports=normalize;

},{}],208:[function(require,module,exports){
'use strict';

function random(a,e){return e=e||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),vecNormalize(a,a),vecScale(a,a,e),a}var vecNormalize=require("./normalize"); var vecScale=require("./scale");module.exports=random;

},{"./normalize":207,"./scale":209}],209:[function(require,module,exports){
'use strict';

function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e[2]=c[2]*l,e[3]=c[3]*l,e}module.exports=scale;

},{}],210:[function(require,module,exports){
'use strict';

function scaleAndAdd(d,e,n,A){return d[0]=e[0]+n[0]*A,d[1]=e[1]+n[1]*A,d[2]=e[2]+n[2]*A,d[3]=e[3]+n[3]*A,d}module.exports=scaleAndAdd;

},{}],211:[function(require,module,exports){
'use strict';

function set(e,t,n,o,r){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e}module.exports=set;

},{}],212:[function(require,module,exports){
'use strict';

function squaredDistance(e,r){var a=r[0]-e[0],n=r[1]-e[1],s=r[2]-e[2],t=r[3]-e[3];return a*a+n*n+s*s+t*t}module.exports=squaredDistance;

},{}],213:[function(require,module,exports){
'use strict';

function squaredLength(e){var r=e[0],n=e[1],t=e[2],u=e[3];return r*r+n*n+t*t+u*u}module.exports=squaredLength;

},{}],214:[function(require,module,exports){
'use strict';

function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t[2]=r[2]-u[2],t[3]=r[3]-u[3],t}module.exports=subtract;

},{}],215:[function(require,module,exports){
'use strict';

function transformMat4(r,t,a){var n=t[0],o=t[1],e=t[2],f=t[3];return r[0]=a[0]*n+a[4]*o+a[8]*e+a[12]*f,r[1]=a[1]*n+a[5]*o+a[9]*e+a[13]*f,r[2]=a[2]*n+a[6]*o+a[10]*e+a[14]*f,r[3]=a[3]*n+a[7]*o+a[11]*e+a[15]*f,r}module.exports=transformMat4;

},{}],216:[function(require,module,exports){
'use strict';

function transformQuat(r,t,a){var n=t[0],o=t[1],u=t[2],e=a[0],f=a[1],m=a[2],s=a[3],Q=s*n+f*u-m*o,c=s*o+m*n-e*u,d=s*u+e*o-f*n,i=-e*n-f*o-m*u;return r[0]=Q*s+i*-e+c*-m-d*-f,r[1]=c*s+i*-f+d*-e-Q*-m,r[2]=d*s+i*-m+Q*-f-c*-e,r[3]=t[3],r}module.exports=transformQuat;

},{}],217:[function(require,module,exports){
'use strict';

var tokenize=require("glsl-tokenizer");
var stringify=require("glsl-token-string");
var inject=require("glsl-token-inject-block");module.exports=function(e,r){if(!r)return e;var t=Object.keys(r);if(0===t.length)return e;for(var n=tokenize(e),i=t.length-1;i>=0;i--){var o=t[i],l=String(r[o]);l&&(l=" "+l),inject(n,{type:"preprocessor",data:"#define "+o+l});}return stringify(n)};

},{"glsl-token-inject-block":218,"glsl-token-string":219,"glsl-tokenizer":226}],218:[function(require,module,exports){
'use strict';

function glslTokenInject(e,t){Array.isArray(t)||(t=[t]);var n=getStartIndex(e),r=n>0?e[n-1]:null;r&&regex.test(r.data)&&e.splice(n++,0,newline),e.splice.apply(e,[n,0].concat(t));var a=n+t.length;return e[a]&&/[^\r\n]$/.test(e[a].data)&&e.splice(a,0,newline),e}function getStartIndex(e){for(var t=-1,n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type)/^#(extension|version)/.test(r.data)&&(t=Math.max(t,n));else if("keyword"===r.type&&"precision"===r.data){var a=findNextSemicolon(e,n);if(a===-1)throw new Error("precision statement not followed by any semicolons!");t=Math.max(t,a);}}return t+1}function findNextSemicolon(e,t){for(var n=t;n<e.length;n++)if("operator"===e[n].type&&";"===e[n].data)return n;return-1}module.exports=glslTokenInject;var newline={data:"\n",type:"whitespace"}; var regex=/[^\r\n]$/;

},{}],219:[function(require,module,exports){
'use strict';

function toString(t){for(var o=[],n=0;n<t.length;n++)"eof"!==t[n].type&&o.push(t[n].data);return o.join("")}module.exports=toString;

},{}],220:[function(require,module,exports){
'use strict';

function tokenize(e){function t(e){e.length&&b.push({type:map[M],data:e,position:I,line:C,column:g});}function n(e){T=0,P+=e,p=P.length;for(var t;h=P[T],T<p;){switch(t=T,M){case BLOCK_COMMENT:T=l();break;case LINE_COMMENT:T=o();break;case PREPROCESSOR:T=u();break;case OPERATOR:T=O();break;case INTEGER:T=c();break;case HEX:T=E();break;case FLOAT:T=f();break;case TOKEN:T=N();break;case WHITESPACE:T=s();break;case NORMAL:T=i();}if(t!==T)switch(P[t]){case"\n":g=0,++C;break;default:++g;}}return L+=T,P=P.slice(T),b}function r(e){return A.length&&t(A.join("")),M=EOF,t("(eof)"),b}function i(){return A=A.length?[]:A,"/"===R&&"*"===h?(I=L+T-1,M=BLOCK_COMMENT,R=h,T+1):"/"===R&&"/"===h?(I=L+T-1,M=LINE_COMMENT,R=h,T+1):"#"===h?(M=PREPROCESSOR,I=L+T,T):/\s/.test(h)?(M=WHITESPACE,I=L+T,T):(d=/\d/.test(h),k=/[^\w_]/.test(h),I=L+T,M=d?INTEGER:k?OPERATOR:TOKEN,T)}function s(){return/[^\s]/g.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function u(){return"\r"!==h&&"\n"!==h||"\\"===R?(A.push(h),R=h,T+1):(t(A.join("")),M=NORMAL,T)}function o(){return u()}function l(){return"/"===h&&"*"===R?(A.push(h),t(A.join("")),M=NORMAL,T+1):(A.push(h),R=h,T+1)}function O(){if("."===R&&/\d/.test(h))return M=FLOAT,T;if("/"===R&&"*"===h)return M=BLOCK_COMMENT,T;if("/"===R&&"/"===h)return M=LINE_COMMENT,T;if("."===h&&A.length){for(;a(A););return M=FLOAT,T}if(";"===h||")"===h||"("===h){if(A.length)for(;a(A););return t(h),M=NORMAL,T+1}var e=2===A.length&&"="!==h;if(/[\w_\d\s]/.test(h)||e){for(;a(A););return M=NORMAL,T}return A.push(h),R=h,T+1}function a(e){for(var n,r,i=0;;){if(n=operators.indexOf(e.slice(0,e.length+i).join("")),r=operators[n],n===-1){if(i--+e.length>0)continue;r=e.slice(0,1).join("");}return t(r),I+=r.length,A=A.slice(r.length),A.length}}function E(){return/[^a-fA-F0-9]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function c(){return"."===h?(A.push(h),M=FLOAT,R=h,T+1):/[eE]/.test(h)?(A.push(h),M=FLOAT,R=h,T+1):"x"===h&&1===A.length&&"0"===A[0]?(M=HEX,A.push(h),R=h,T+1):/[^\d]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function f(){return"f"===h&&(A.push(h),R=h,T+=1),/[eE]/.test(h)?(A.push(h),R=h,T+1):"-"===h&&/[eE]/.test(R)?(A.push(h),R=h,T+1):/[^\d]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function N(){if(/[^\d\w_]/.test(h)){var e=A.join("");return M=_.indexOf(e)>-1?KEYWORD:j.indexOf(e)>-1?BUILTIN:IDENT,t(A.join("")),M=NORMAL,T}return A.push(h),R=h,T+1}var h,R,p,T=0,L=0,M=NORMAL,A=[],b=[],C=1,g=0,I=0,d=!1,k=!1,P="";e=e||{};var j=builtins100,_=literals100;return"300 es"===e.version&&(j=builtins300es,_=literals300es),function(e){return b=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):r()}}module.exports=tokenize;var literals100=require("./lib/literals"); var operators=require("./lib/operators"); var builtins100=require("./lib/builtins"); var literals300es=require("./lib/literals-300es"); var builtins300es=require("./lib/builtins-300es"); var NORMAL=999; var TOKEN=9999; var BLOCK_COMMENT=0; var LINE_COMMENT=1; var PREPROCESSOR=2; var OPERATOR=3; var INTEGER=4; var FLOAT=5; var IDENT=6; var BUILTIN=7; var KEYWORD=8; var WHITESPACE=9; var EOF=10; var HEX=11; var map=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];

},{"./lib/builtins":222,"./lib/builtins-300es":221,"./lib/literals":224,"./lib/literals-300es":223,"./lib/operators":225}],221:[function(require,module,exports){
'use strict';

var v100=require("./builtins");v100=v100.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),module.exports=v100.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);

},{"./builtins":222}],222:[function(require,module,exports){
'use strict';

module.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"];

},{}],223:[function(require,module,exports){
'use strict';

var v100=require("./literals");module.exports=v100.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]);

},{"./literals":224}],224:[function(require,module,exports){
'use strict';

module.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];

},{}],225:[function(require,module,exports){
'use strict';

module.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];

},{}],226:[function(require,module,exports){
'use strict';

function tokenizeString(e,n){var t=tokenize(n),i=[];return i=i.concat(t(e)),i=i.concat(t(null))}var tokenize=require("./index");module.exports=tokenizeString;

},{"./index":220}],227:[function(require,module,exports){
'use strict';

exports=module.exports=function(e){if(e&&"object"==typeof e){var a=e.which||e.keyCode||e.charCode;a&&(e=a);}if("number"==typeof e)return names[e];var o=String(e),s=codes[o.toLowerCase()];if(s)return s;var s=aliases[o.toLowerCase()];return s?s:1===o.length?o.charCodeAt(0):void 0};var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222}; var aliases=exports.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases)codes[alias]=aliases[alias];

},{}],228:[function(require,module,exports){
'use strict';

function clamp(t,a,h){return t<a?a:t>h?h:t}function Euler(t,a,h,i){return this instanceof Euler?(this._x=t||0,this._y=a||0,this._z=h||0,void(this._order=i||Euler.DefaultOrder)):new Euler(t,a,h,i)}module.exports=Euler,Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler.DefaultOrder="XYZ",Euler.prototype={_x:0,_y:0,_z:0,_order:Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback();},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback();},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback();},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback();},set:function(t,a,h,i){return this._x=t,this._y=a,this._z=h,this._order=i||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,a){var h=t.elements,i=h[0],n=h[4],s=h[8],e=h[1],r=h[5],_=h[9],o=h[2],c=h[6],u=h[10];return a=a||this._order,"XYZ"===a?(this._y=Math.asin(clamp(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-_,u),this._z=Math.atan2(-n,i)):(this._x=Math.atan2(c,r),this._z=0)):"YXZ"===a?(this._x=Math.asin(-clamp(_,-1,1)),Math.abs(_)<.99999?(this._y=Math.atan2(s,u),this._z=Math.atan2(e,r)):(this._y=Math.atan2(-o,i),this._z=0)):"ZXY"===a?(this._x=Math.asin(clamp(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(-o,u),this._z=Math.atan2(-n,r)):(this._y=0,this._z=Math.atan2(e,i))):"ZYX"===a?(this._y=Math.asin(-clamp(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(c,u),this._z=Math.atan2(e,i)):(this._x=0,this._z=Math.atan2(-n,r))):"YZX"===a?(this._z=Math.asin(clamp(e,-1,1)),Math.abs(e)<.99999?(this._x=Math.atan2(-_,r),this._y=Math.atan2(-o,i)):(this._x=0,this._y=Math.atan2(s,u))):"XZY"===a?(this._z=Math.asin(-clamp(n,-1,1)),Math.abs(n)<.99999?(this._x=Math.atan2(c,r),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-_,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+a),this._order=a,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new Euler(this._x,this._y,this._z,this._order)}};

},{}],229:[function(require,module,exports){
'use strict';

function reindex(e){for(var n=[],r=[],o=0,s=0;o<e.length;)r.push([s++,s++,s++]),n.push([e[o++],e[o++],e[o++]],[e[o++],e[o++],e[o++]],[e[o++],e[o++],e[o++]]);return{positions:n,cells:r}}module.exports=reindex;

},{}],230:[function(require,module,exports){
'use strict';

function mouseListen(e,n){function t(e){var n=!1;return"altKey"in e&&(n=n||e.altKey!==w.alt,w.alt=!!e.altKey),"shiftKey"in e&&(n=n||e.shiftKey!==w.shift,w.shift=!!e.shiftKey),"ctrlKey"in e&&(n=n||e.ctrlKey!==w.control,w.control=!!e.ctrlKey),"metaKey"in e&&(n=n||e.metaKey!==w.meta,w.meta=!!e.metaKey),n}function o(e,o){var r=mouse.x(o),s=mouse.y(o);"buttons"in o&&(e=0|o.buttons),(e!==L||r!==l||s!==E||t(o))&&(L=0|e,l=r||0,E=s||0,n&&n(L,l,E,w));}function r(e){o(0,e);}function s(){(L||l||E||w.shift||w.alt||w.meta||w.control)&&(l=E=0,L=0,w.shift=w.alt=w.control=w.meta=!1,n&&n(0,0,0,w));}function i(e){t(e)&&n&&n(L,l,E,w);}function u(e){0===mouse.buttons(e)?o(0,e):o(L,e);}function v(e){o(L|mouse.buttons(e),e);}function m(e){o(L&~mouse.buttons(e),e);}function d(){c||(c=!0,e.addEventListener("mousemove",u),e.addEventListener("mousedown",v),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",r),e.addEventListener("mouseenter",r),e.addEventListener("mouseout",r),e.addEventListener("mouseover",r),e.addEventListener("blur",s),e.addEventListener("keyup",i),e.addEventListener("keydown",i),e.addEventListener("keypress",i),e!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)));}function a(){c&&(c=!1,e.removeEventListener("mousemove",u),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",r),e.removeEventListener("mouseenter",r),e.removeEventListener("mouseout",r),e.removeEventListener("mouseover",r),e.removeEventListener("blur",s),e.removeEventListener("keyup",i),e.removeEventListener("keydown",i),e.removeEventListener("keypress",i),e!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)));}n||(n=e,e=window);var L=0,l=0,E=0,w={shift:!1,alt:!1,control:!1,meta:!1},c=!1;d();var f={element:e};return Object.defineProperties(f,{enabled:{get:function(){return c},set:function(e){e?d():a();},enumerable:!0},buttons:{get:function(){return L},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return E},enumerable:!0},mods:{get:function(){return w},enumerable:!0}}),f}module.exports=mouseListen;var mouse=require("mouse-event");

},{"mouse-event":232}],231:[function(require,module,exports){
'use strict';

function mouseEventOffset(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var o=t.clientX||0,r=t.clientY||0,i=getBoundingClientOffset(e);return n[0]=o-i.left,n[1]=r-i.top,n}function getBoundingClientOffset(t){return t===window||t===document||t===document.body?rootPosition:t.getBoundingClientRect()}var rootPosition={left:0,top:0};module.exports=mouseEventOffset;

},{}],232:[function(require,module,exports){
'use strict';

function mouseButtons(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function mouseElement(e){return e.target||e.srcElement||window}function mouseRelativeX(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=mouseElement(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function mouseRelativeY(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=mouseElement(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}exports.buttons=mouseButtons,exports.element=mouseElement,exports.x=mouseRelativeX,exports.y=mouseRelativeY;

},{}],233:[function(require,module,exports){
'use strict';

function mouseWheelListen(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=toPX("ex",e),i=function(e){n&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,s=e.deltaMode,u=1;switch(s){case 1:u=r;break;case 2:u=window.innerHeight;}if(i*=u,o*=u,a*=u,i||o||a)return t(i,o,a,e)};return e.addEventListener("wheel",i),i}var toPX=require("to-px");module.exports=mouseWheelListen;

},{"to-px":259}],234:[function(require,module,exports){
'use strict';

function parse(e){if(e=String(e),!(e.length>1e4)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"hrs":case"hr":case"h":return a*h;case"minutes":case"minute":case"mins":case"min":case"m":return a*m;case"seconds":case"second":case"secs":case"sec":case"s":return a*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3; var m=60*s; var h=60*m; var d=24*h; var y=365.25*d;module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return parse(s);if("number"===r&&isNaN(s)===!1)return e.long?fmtLong(s):fmtShort(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};

},{}],235:[function(require,module,exports){
'use strict';

function ToObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}module.exports=Object.assign||function(e,t){for(var n,r,c=ToObject(e),o=1;o<arguments.length;o++){n=arguments[o],r=Object.keys(Object(n));for(var l=0;l<r.length;l++)c[r[l]]=n[r[l]];}return c};

},{}],236:[function(require,module,exports){
'use strict';

module.exports=function(r,t){t||(t=[0,""]),r=String(r);var a=parseFloat(r,10);return t[0]=a,t[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t};

},{}],237:[function(require,module,exports){
(function (process){
'use strict';

(function(){var e,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(e()-r)/1e6},n=process.hrtime,e=function(){var e;return e=n(),1e9*e[0]+e[1]},r=e()):Date.now?(module.exports=function(){return Date.now()-r},r=Date.now()):(module.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime());}).call(undefined);

}).call(this,require('_process'))
},{"_process":247}],238:[function(require,module,exports){
'use strict';

module.exports=require("./lib/camera-perspective");

},{"./lib/camera-perspective":241}],239:[function(require,module,exports){
'use strict';

var assign=require("object-assign");
var Ray=require("ray-3d");
var cameraProject=require("camera-project");
var cameraUnproject=require("camera-unproject");
var cameraLookAt=require("./camera-look-at");
var cameraPickRay=require("camera-picking-ray");
var add=require("gl-vec3/add");
var multiply4x4=require("gl-mat4/multiply");
var invert4x4=require("gl-mat4/invert");
var identity4x4=require("gl-mat4/identity");
var setVec3=require("gl-vec3/set");module.exports=function(e){function i(){multiply4x4(u.projView,u.projection,u.view);var e=invert4x4(u.invProjView,u.projView);if(!e)throw new Error("camera projection * view is non-invertible")}function r(e){return cameraLookAt(u.direction,u.up,u.position,e),u}function t(){return setVec3(u.position,0,0,0),setVec3(u.direction,0,0,-1),setVec3(u.up,0,1,0),identity4x4(u.view),identity4x4(u.projection),identity4x4(u.projView),identity4x4(u.invProjView),u}function n(e){return add(u.position,u.position,e),u}function o(e){var i=new Ray;return cameraPickRay(i.origin,i.direction,e,u.viewport,u.invProjView),i}function a(e){return cameraProject([],e,u.viewport,u.projView)}function c(e){return cameraUnproject([],e,u.viewport,u.invProjView)}e=e||{};var u={projection:identity4x4([]),view:identity4x4([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:identity4x4([]),invProjView:identity4x4([])};return assign(u,{translate:n,identity:t,lookAt:r,createPickingRay:o,update:i,project:a,unproject:c})};

},{"./camera-look-at":240,"camera-picking-ray":47,"camera-project":48,"camera-unproject":49,"gl-mat4/identity":86,"gl-mat4/invert":88,"gl-mat4/multiply":90,"gl-vec3/add":158,"gl-vec3/set":184,"object-assign":235,"ray-3d":249}],240:[function(require,module,exports){
'use strict';

var cross=require("gl-vec3/cross");
var sub=require("gl-vec3/subtract");
var normalize=require("gl-vec3/normalize");
var copy=require("gl-vec3/copy");
var dot=require("gl-vec3/dot");
var scale=require("gl-vec3/scale");
var tmp=[0,0,0];
var epsilon=1e-9;module.exports=function(e,r,o,t){sub(tmp,t,o),normalize(tmp,tmp);var p=0===tmp[0]&&0===tmp[1]&&0===tmp[2];if(!p){var s=dot(tmp,r);Math.abs(s-1)<epsilon?scale(r,e,-1):Math.abs(s+1)<epsilon&&copy(r,e),copy(e,tmp),cross(tmp,e,r),normalize(tmp,tmp),cross(r,tmp,e),normalize(r,r);}};

},{"gl-vec3/copy":161,"gl-vec3/cross":163,"gl-vec3/dot":166,"gl-vec3/normalize":177,"gl-vec3/scale":182,"gl-vec3/subtract":187}],241:[function(require,module,exports){
'use strict';

var create=require("./camera-base");
var assign=require("object-assign");
var defined=require("defined");
var perspective=require("gl-mat4/perspective");
var lookAt4x4=require("gl-mat4/lookAt");
var add=require("gl-vec3/add");module.exports=function(e){function r(){var e=a.viewport[2]/a.viewport[3];return perspective(a.projection,a.fov,e,Math.abs(a.near),Math.abs(a.far)),add(i,a.position,a.direction),lookAt4x4(a.view,a.position,i,a.up),t(),a}e=e||{};var a=create(e);a.fov=defined(e.fov,Math.PI/4),a.near=defined(e.near,1),a.far=defined(e.far,100);var i=[0,0,0],t=a.update;return r(),assign(a,{update:r})};

},{"./camera-base":239,"defined":54,"gl-mat4/lookAt":89,"gl-mat4/perspective":92,"gl-vec3/add":158,"object-assign":235}],242:[function(require,module,exports){
'use strict';

function createCapsule(a,r,s,t){function o(s,t,o,n){for(var u=1/(s-1),M=0;M<s;M++){var e=Math.cos(2*Math.PI*M*u)*t,p=Math.sin(2*Math.PI*M*u)*t;h.push([a*e,a*o+r*n,a*p]),i.push([e,o,p]);var f=1-M*u,c=.5-(a*o+r*n)/(2*a+r);v.push([f,c]);}}void 0===a&&(a=.5),void 0===r&&(r=2*a),void 0===s&&(s=12),void 0===t&&(t=12);for(var h=[],i=[],v=[],n=[],u=s+1,M=s+u,e=1/(u-1),p=1/(s-1),f=0;f<s/2;f++)o(t,Math.sin(Math.PI*f*p),Math.sin(Math.PI*(f*p-.5)),-.5);for(var f=0;f<u;f++)o(t,1,0,f*e-.5);for(var f=s/2;f<s;f++)o(t,Math.sin(Math.PI*f*p),Math.sin(Math.PI*(f*p-.5)),.5);for(var f=0;f<M-1;f++)for(var c=0;c<t-1;c++)n.push([f*t+(c+1),f*t+(c+0),(f+1)*t+(c+1)]),n.push([(f+1)*t+(c+0),(f+1)*t+(c+1),f*t+c]);return{positions:h,normals:i,uvs:v,cells:n}}module.exports=createCapsule;

},{}],243:[function(require,module,exports){
'use strict';

function createCylinderMesh(r,a,e,n,o){var s=0,v=0,t=[],f=0;r>0&&f++,a>0&&f++;for(var h=(n+1)*(o+1)+(n+2)*f,i=n*o*2+n*f,l=new Array(h),c=new Array(h),u=new Array(h),y=new Array(i),M=(a-r)/e,w=2*Math.PI,A=0;A<=o;A++){for(var p=[],d=A/o,m=d*(a-r)+r,C=0;C<=n;C++){var x=C/n,I=x*w,P=Math.sin(I),b=Math.cos(I);c[s]=[m*P,-d*e+e/2,m*b],l[s]=[P,M,b],u[s]=[x,1-d],p.push(s),s++;}t.push(p);}for(var C=0;C<n;C++)for(var A=0;A<o;A++){var g=t[A][C],j=t[A+1][C],k=t[A+1][C+1],q=t[A][C+1];y[v]=[g,j,q],v++,y[v]=[j,k,q],v++;}var z=function(o){for(var t=(new Array(3).fill(0),o===!0?r:a),f=o===!0?1:-1,h=s,i=1;i<=n;i++)c[s]=[0,e*f/2,0],l[s]=[0,f,0],u[s]=[.5,.5],s++;for(var M=s,i=0;i<=n;i++){var A=i/n,p=A*w,d=Math.cos(p),m=Math.sin(p);c[s]=[t*m,e*f/2,t*d],l[s]=[0,f,0],u[s]=[.5*d+.5,.5*m*f+.5],s++;}for(var i=0;i<n;i++){var C=h+i,x=M+i;o===!0?(y[v]=[x,x+1,C],v++):(y[v]=[x+1,x,C],v++);}};return r>0&&z(!0),a>0&&z(!1),{uvs:u,cells:y,normals:l,positions:c}}module.exports=createCylinderMesh;

},{}],244:[function(require,module,exports){
'use strict';

function createPlane(s,u,r,a,e){s=s||1,u=u||1,r=r||1,a=a||1;for(var o=!(!e||!e.quads)&&e.quads,p=[],n=[],h=[],l=[],t=0;t<=a;t++)for(var c=0;c<=r;c++){var v=c/r,d=t/a,f=-s/2+v*s,i=u/2-d*u;p.push([f,i,0]),n.push([v,d]),h.push([0,0,1]),t<a&&c<r&&(o?l.push([t*(r+1)+c,(t+1)*(r+1)+c,(t+1)*(r+1)+c+1,t*(r+1)+c+1]):(l.push([t*(r+1)+c,(t+1)*(r+1)+c+1,t*(r+1)+c+1]),l.push([(t+1)*(r+1)+c+1,t*(r+1)+c,(t+1)*(r+1)+c])));}return{positions:p,normals:h,uvs:n,cells:l}}module.exports=createPlane;

},{}],245:[function(require,module,exports){
'use strict';

function primitiveSphere(t,e){e=e||{},t="undefined"!=typeof t?t:1;for(var r="undefined"!=typeof e.segments?e.segments:32,a=2+r,m=2*a,i=[],o=[],n=[],p=[],s=0;s<=a;s++){for(var c=s/a,l=c*Math.PI,u=0;u<=m;u++){var f=u/m,d=f*Math.PI*2;identity(matRotZ),rotateZ(matRotZ,matRotZ,-l),identity(matRotY),rotateY(matRotY,matRotY,d),transformMat4(tmpVec3,up,matRotZ),transformMat4(tmpVec3,tmpVec3,matRotY),scale(tmpVec3,tmpVec3,-t),o.push(tmpVec3.slice()),normalize(tmpVec3,tmpVec3),n.push(tmpVec3.slice()),p.push([f,1-c]);}if(s>0)for(var v=o.length,h=v-2*(m+1);h+m+2<v;h++)i.push([h,h+1,h+m+1]),i.push([h+m+1,h+1,h+m+2]);}return{cells:i,positions:o,normals:n,uvs:p}}var identity=require("gl-mat4/identity"); var rotateY=require("gl-mat4/rotateY"); var rotateZ=require("gl-mat4/rotateZ"); var scale=require("gl-vec3/scale"); var transformMat4=require("gl-vec3/transformMat4"); var normalize=require("gl-vec3/normalize"); var matRotY=identity([]); var matRotZ=identity([]); var up=[0,1,0]; var tmpVec3=[0,0,0];module.exports=primitiveSphere;

},{"gl-mat4/identity":86,"gl-mat4/rotateY":96,"gl-mat4/rotateZ":97,"gl-vec3/normalize":177,"gl-vec3/scale":182,"gl-vec3/transformMat4":189}],246:[function(require,module,exports){
'use strict';

function createTorusMesh(e){e=e||{};for(var r=defined(e.majorRadius,1),s=defined(e.minorRadius,.25),a=defined(e.minorSegments,32),i=defined(e.majorSegments,64),o=defined(e.arc,2*Math.PI),n=2*Math.PI,t=[0,0,0],u=[],d=[],h=[],c=[0,0,0],f=[],m=0;m<=a;m++)for(var v=0;v<=i;v++){var M=v/i*o,l=m/a*n;t[0]=r*Math.cos(M),t[1]=r*Math.sin(M);var p=[(r+s*Math.cos(l))*Math.cos(M),(r+s*Math.cos(l))*Math.sin(M),s*Math.sin(l)];d.push(p),sub(c,p,t),normalize(c,c),f.push(c.slice()),u.push([v/i,m/a]);}for(var m=1;m<=a;m++)for(var v=1;v<=i;v++){var g=(i+1)*m+v-1,b=(i+1)*(m-1)+v-1,q=(i+1)*(m-1)+v,z=(i+1)*m+v;h.push([g,b,z]),h.push([b,q,z]);}return{uvs:u,cells:h,normals:f,positions:d}}var defined=require("defined"); var sub=require("gl-vec3/subtract"); var normalize=require("gl-vec3/normalize");module.exports=createTorusMesh;

},{"defined":54,"gl-vec3/normalize":177,"gl-vec3/subtract":187}],247:[function(require,module,exports){
'use strict';

function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue());}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length;}currentQueue=null,draining=!1,runClearTimeout(e);}}function Item(e,t){this.fun=e,this.array=t;}function noop(){}var process=module.exports={}; var cachedSetTimeout; var cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout;}catch(e){cachedSetTimeout=defaultSetTimout;}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout;}catch(e){cachedClearTimeout=defaultClearTimeout;}}();var queue=[]; var draining=!1; var currentQueue; var queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue);},Item.prototype.run=function(){this.fun.apply(null,this.array);},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],248:[function(require,module,exports){
(function (global){
'use strict';

for(var now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(e){if(0===queue.length){var o=now(),a=Math.max(0,frameDuration-(o-last));last=a+o,setTimeout(function(){var e=queue.slice(0);queue.length=0;for(var o=0;o<e.length;o++)if(!e[o].cancelled)try{e[o].callback(last);}catch(e){setTimeout(function(){throw e},0);}},Math.round(a));}return queue.push({handle:++id,callback:e,cancelled:!1}),id},caf=function(e){for(var o=0;o<queue.length;o++)queue[o].handle===e&&(queue[o].cancelled=!0);};}module.exports=function(e){return raf.call(root,e)},module.exports.cancel=function(){caf.apply(root,arguments);},module.exports.polyfill=function(){root.requestAnimationFrame=raf,root.cancelAnimationFrame=caf;};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"performance-now":237}],249:[function(require,module,exports){
'use strict';

function Ray(t,e){this.origin=t||[0,0,0],this.direction=e||[0,0,-1];}var intersectRayTriangle=require("ray-triangle-intersection"); var intersectRayPlane=require("ray-plane-intersection"); var intersectRaySphere=require("ray-sphere-intersection"); var intersectRayBox=require("ray-aabb-intersection"); var copy3=require("gl-vec3/copy"); var tmpTriangle=[[0,0,0],[0,0,0],[0,0,0]]; var tmp3=[0,0,0];module.exports=Ray,Ray.prototype.set=function(t,e){this.origin=t,this.direction=e;},Ray.prototype.copy=function(t){copy3(this.origin,t.origin),copy3(this.direction,t.direction);},Ray.prototype.clone=function(){var t=new Ray;return t.copy(this),t},Ray.prototype.intersectsSphere=function(t,e){return intersectRaySphere(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsPlane=function(t,e){return intersectRayPlane(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsTriangle=function(t){return intersectRayTriangle(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsBox=function(t){return intersectRayBox(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsTriangleCell=function(t,e){var i=t[0],r=t[1],n=t[2];return tmpTriangle[0]=e[i],tmpTriangle[1]=e[r],tmpTriangle[2]=e[n],this.intersectsTriangle(tmpTriangle)};

},{"gl-vec3/copy":161,"ray-aabb-intersection":250,"ray-plane-intersection":251,"ray-sphere-intersection":252,"ray-triangle-intersection":253}],250:[function(require,module,exports){
'use strict';

function intersection(e,n,r,t){var i=distance(n,r,t);if(i===1/0)e=null;else{e=e||[];for(var o=0;o<n.length;o++)e[o]=n[o]+r[o]*i;}return e}function distance(e,n,r){for(var t=e.length,i=-(1/0),o=+(1/0),a=0;a<t;a++){var s=(r[0][a]-e[a])/n[a],c=(r[1][a]-e[a])/n[a];if(s>c){var u=s;s=c,c=u;}if(c<i||s>o)return 1/0;s>i&&(i=s),c<o&&(o=c);}return i>o?1/0:i}module.exports=intersection,module.exports.distance=distance;

},{}],251:[function(require,module,exports){
'use strict';

function intersectRayPlane(e,r,a,l,c){var t=dot(a,l);if(0!==t){var d=-(dot(r,l)+c)/t;return d<0?null:(scale(v0,a,d),add(e,r,v0))}return dot(l,r)+c===0?copy(e,r):null}var dot=require("gl-vec3/dot"); var add=require("gl-vec3/add"); var scale=require("gl-vec3/scale"); var copy=require("gl-vec3/copy");module.exports=intersectRayPlane;var v0=[0,0,0];

},{"gl-vec3/add":158,"gl-vec3/copy":161,"gl-vec3/dot":166,"gl-vec3/scale":182}],252:[function(require,module,exports){
'use strict';

function intersectRaySphere(e,r,t,d,a){sub(tmp,d,r);var s=dot(t,tmp);if(s<0)return null;scaleAndAdd(tmp,r,t,s);var u=squaredDist(d,tmp),c=a*a;return u>c?null:(scale(e,t,s-Math.sqrt(c-u)),add(e,e,r))}var squaredDist=require("gl-vec3/squaredDistance"); var dot=require("gl-vec3/dot"); var sub=require("gl-vec3/subtract"); var scaleAndAdd=require("gl-vec3/scaleAndAdd"); var scale=require("gl-vec3/scale"); var add=require("gl-vec3/add"); var tmp=[0,0,0];module.exports=intersectRaySphere;

},{"gl-vec3/add":158,"gl-vec3/dot":166,"gl-vec3/scale":182,"gl-vec3/scaleAndAdd":183,"gl-vec3/squaredDistance":185,"gl-vec3/subtract":187}],253:[function(require,module,exports){
'use strict';

function intersectTriangle(e,r,c,t){sub(edge1,t[1],t[0]),sub(edge2,t[2],t[0]),cross(pvec,c,edge2);var v=dot(edge1,pvec);if(v<EPSILON)return null;sub(tvec,r,t[0]);var u=dot(tvec,pvec);if(u<0||u>v)return null;cross(qvec,tvec,edge1);var s=dot(c,qvec);if(s<0||u+s>v)return null;var d=dot(edge2,qvec)/v;return e[0]=r[0]+d*c[0],e[1]=r[1]+d*c[1],e[2]=r[2]+d*c[2],e}var cross=require("gl-vec3/cross"); var dot=require("gl-vec3/dot"); var sub=require("gl-vec3/subtract"); var EPSILON=1e-6; var edge1=[0,0,0]; var edge2=[0,0,0]; var tvec=[0,0,0]; var pvec=[0,0,0]; var qvec=[0,0,0];module.exports=intersectTriangle;

},{"gl-vec3/cross":163,"gl-vec3/dot":166,"gl-vec3/subtract":187}],254:[function(require,module,exports){
'use strict';

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.createREGL=t();}(undefined,function(){"use strict";function e(e){return"undefined"!=typeof btoa?btoa(e):"base64:"+e}function t(e){var t=new Error("(regl) "+e);throw console.error(t),t}function r(e,r){e||t(r);}function n(e){return e?": "+e:""}function a(e,r,a){e in r||t("unknown parameter ("+e+")"+n(a)+". possible values: "+Object.keys(r).join());}function i(e,r){Je(e)||t("invalid parameter type"+n(r)+". must be a typed array");}function o(e,r,a){typeof e!==r&&t("invalid parameter type"+n(a)+". expected "+r+", got "+typeof e);}function f(e,r){e>=0&&(0|e)===e||t("invalid parameter type, ("+e+")"+n(r)+". must be a nonnegative integer");}function u(e,r,a){r.indexOf(e)<0&&t("invalid value"+n(a)+". must be one of: "+r);}function s(e){Object.keys(e).forEach(function(e){et.indexOf(e)<0&&t('invalid regl constructor argument "'+e+'". must be one of '+et);});}function c(e,t){for(e+="";e.length<t;)e=" "+e;return e}function l(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1;}function m(e,t){this.number=e,this.line=t,this.errors=[];}function d(e,t,r){this.file=e,this.line=t,this.message=r;}function p(){var e=new Error,t=(e.stack||e).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return n?n[1]:"unknown"}function h(){var e=new Error,t=(e.stack||e).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return n?n[1]:"unknown"}function b(t,r){var n=t.split("\n"),a=1,i=0,o={unknown:new l,0:new l};o.unknown.name=o[0].name=r||p(),o.unknown.lines.push(new m(0,""));for(var f=0;f<n.length;++f){var u=n[f],s=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(u);if(s)switch(s[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(s[2]);c&&(a=0|c[1],c[2]&&(i=0|c[2],i in o||(o[i]=new l)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(s[2]);d&&(o[i].name=d[1]?e(d[2]):d[2]);}o[i].lines.push(new m(a++,u));}return Object.keys(o).forEach(function(e){var t=o[e];t.lines.forEach(function(e){t.index[e.number]=e;});}),o}function g(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var r=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);r?t.push(new d(0|r[1],0|r[2],r[3].trim())):e.length>0&&t.push(new d("unknown",0,e));}}),t}function v(e,t){t.forEach(function(t){var r=e[t.file];if(r){var n=r.index[t.line];if(n)return n.errors.push(t),void(r.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t);});}function y(e,t,n,a,i){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(t),f=a===e.FRAGMENT_SHADER?"fragment":"vertex";E(n,"string",f+" shader source must be a string",i);var u=b(n,i),s=g(o);v(u,s),Object.keys(u).forEach(function(e){function t(e,t){n.push(e),a.push(t||"");}var r=u[e];if(r.hasErrors){var n=[""],a=[""];t("file number "+e+": "+r.name+"\n","color:red;text-decoration:underline;font-weight:bold"),r.lines.forEach(function(e){if(e.errors.length>0){t(c(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),t(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var r=0;e.errors.forEach(function(n){var a=n.message,i=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(a);if(i){var o=i[1];switch(a=i[2],o){case"assign":o="=";}r=Math.max(e.line.indexOf(o,r),0);}else r=0;t(c("| ",6)),t(c("^^^",r+3)+"\n","font-weight:bold"),t(c("| ",6)),t(a+"\n","font-weight:bold");}),t(c("| ",6)+"\n");}else t(c(e.number,4)+"|  "),t(e.line+"\n","color:red");}),"undefined"!=typeof document?(a[0]=n.join("%c"),console.log.apply(console,a)):console.log(n.join(""));}}),r.raise("Error compiling "+f+" shader, "+u[0].name);}}function x(e,t,n,a,i){if(!e.getProgramParameter(t,e.LINK_STATUS)){var o=e.getProgramInfoLog(t),f=b(n,i),u=b(a,i),s='Error linking program with vertex shader, "'+u[0].name+'", and fragment shader "'+f[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+o,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+o),r.raise(s);}}function w(e){e._commandRef=p();}function k(e,t,r,n){function a(e){return e?n.id(e):0}function i(e,t){Object.keys(t).forEach(function(t){e[n.id(t)]=!0;});}w(e),e._fragId=a(e.static.frag),e._vertId=a(e.static.vert);var o=e._uniformSet={};i(o,t.static),i(o,t.dynamic);var f=e._attributeSet={};i(f,r.static),i(f,r.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic;}function S(e,r){var n=h();t(e+" in command "+(r||p())+("unknown"===n?"":" called from "+n));}function A(e,t,r){e||S(t,r||p());}function _(e,t,r,a){e in t||S("unknown parameter ("+e+")"+n(r)+". possible values: "+Object.keys(t).join(),a||p());}function E(e,t,r,a){typeof e!==t&&S("invalid parameter type"+n(r)+". expected "+t+", got "+typeof e,a||p());}function T(e){e();}function D(e,t,r){e.texture?u(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):u(e.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment");}function j(e,t){return e===ht||e===pt||e===bt?2:e===gt?4:yt[e]*t}function O(e){return!(e&e-1||!e)}function C(e,t,n){var a,i=t.width,o=t.height,f=t.channels;r(i>0&&i<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),e.wrapS===tt&&e.wrapT===tt||r(O(i)&&O(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==o&&r(e.minFilter!==nt&&e.minFilter!==it&&e.minFilter!==at&&e.minFilter!==ot,"min filter requires mipmap"):(r(O(i)&&O(o),"texture must be a square power of 2 to support mipmapping"),r(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===dt&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(e.minFilter===rt&&e.magFilter===rt,"filter not supported, must enable oes_texture_float_linear"),r(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(a=0;a<16;++a)if(u[a]){var s=i>>a,c=o>>a;r(t.mipmask&1<<a,"missing mipmap data");var l=u[a];if(r(l.width===s&&l.height===c,"invalid shape for mip images"),r(l.format===t.format&&l.internalformat===t.internalformat&&l.type===t.type,"incompatible type for mip image"),l.compressed);else if(l.data){var m=Math.ceil(j(l.type,f)*s/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===m*c,"invalid data for image, buffer size is inconsistent with image format");}else l.element||l.copy;}else e.genMipmaps||r(0===(t.mipmask&1<<a),"extra mipmap data");t.compressed&&r(!e.genMipmaps,"mipmap generation for compressed images not supported");}function F(e,t,n,a){var i=e.width,o=e.height,f=e.channels;r(i>0&&i<=a.maxTextureSize&&o>0&&o<=a.maxTextureSize,"invalid texture shape"),r(i===o,"cube map must be square"),r(t.wrapS===tt&&t.wrapT===tt,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var s=n[u];r(s.width===i&&s.height===o,"inconsistent cube map face shape"),t.genMipmaps&&(r(!s.compressed,"can not generate mipmap for compressed textures"),r(1===s.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=s.images,l=0;l<16;++l){var m=c[l];if(m){var d=i>>l,p=o>>l;r(s.mipmask&1<<l,"missing mipmap data"),r(m.width===d&&m.height===p,"invalid shape for mip images"),r(m.format===e.format&&m.internalformat===e.internalformat&&m.type===e.type,"incompatible type for mip image"),m.compressed||(m.data?r(m.data.byteLength===d*p*Math.max(j(m.type,f),m.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):m.element||m.copy);}}}}function z(e,t){this.id=wt++,this.type=e,this.data=t;}function B(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function P(e){if(0===e.length)return[];var t=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&t===r&&('"'===t||"'"===t))return['"'+B(e.substr(1,e.length-2))+'"'];var n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(n)return P(e.substr(0,n.index)).concat(P(n[1])).concat(P(e.substr(n.index+n[0].length)));var a=e.split(".");if(1===a.length)return['"'+B(e)+'"'];for(var i=[],o=0;o<a.length;++o)i=i.concat(P(a[o]));return i}function R(e){return"["+P(e).join("][")+"]"}function L(e,t){return new z(e,R(t+""))}function I(e){return"function"==typeof e&&!e._reglType||e instanceof z}function M(e,t){return"function"==typeof e?new z(kt,e):e}function W(){var e={"":0},t=[""];return{id:function(r){var n=e[r];return n?n:(n=e[r]=t.length,t.push(r),n)},str:function(e){return t[e]}}}function H(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();t=a.right-a.left,n=a.bottom-a.top;}i.width=r*t,i.height=r*n,Ze(i.style,{width:t+"px",height:n+"px"});}function a(){window.removeEventListener("resize",n),e.removeChild(i);}var i=document.createElement("canvas");return Ze(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",Ze(e.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:i,onDestroy:a}}function G(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}function U(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function N(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function q(e){return"string"==typeof e?e.split():(xt(Array.isArray(e),"invalid extension array"),e)}function Q(e){return"string"==typeof e?(xt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function V(e){var t,r,n,a,i=e||{},o={},f=[],u=[],s="undefined"==typeof window?1:window.devicePixelRatio,c=!1,l=function(e){e&&xt.raise(e);},m=function(){};if("string"==typeof i?(xt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(i),xt(t,"invalid query string for element")):"object"==typeof i?U(i)?t=i:N(i)?(a=i,n=a.canvas):(xt.constructor(i),"gl"in i?a=i.gl:"canvas"in i?n=Q(i.canvas):"container"in i&&(r=Q(i.container)),"attributes"in i&&(o=i.attributes,xt.type(o,"object","invalid context attributes")),"extensions"in i&&(f=q(i.extensions)),"optionalExtensions"in i&&(u=q(i.optionalExtensions)),"onDone"in i&&(xt.type(i.onDone,"function","invalid or missing onDone callback"),l=i.onDone),"profile"in i&&(c=!!i.profile),"pixelRatio"in i&&(s=+i.pixelRatio,xt(s>0,"invalid pixel ratio"))):xt.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?n=t:r=t),!a){if(!n){xt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var d=H(r||document.body,l,s);if(!d)return null;n=d.canvas,m=d.onDestroy;}a=G(n,o);}return a?{gl:a,canvas:n,container:r,extensions:f,optionalExtensions:u,pixelRatio:s,profile:c,onDone:l,onDestroy:m}:(m(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Y(e,t){function r(t){xt.type(t,"string","extension name must be string");var r,a=t.toLowerCase();try{r=n[a]=e.getExtension(a);}catch(e){}return!!r}for(var n={},a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!r(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(!r(e))throw new Error("(regl): error restoring extension "+e)});}}}function X(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||Je(e.data))}function $(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function K(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function J(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1}function Z(e){var t=K(e),r=ur[J(t)>>2];return r.length>0?r.pop():new ArrayBuffer(t)}function ee(e){ur[J(e.byteLength)>>2].push(e);}function te(e,t){var r=null;switch(e){case tr:r=new Int8Array(Z(t),0,t);break;case rr:r=new Uint8Array(Z(t),0,t);break;case nr:r=new Int16Array(Z(2*t),0,t);break;case ar:r=new Uint16Array(Z(2*t),0,t);break;case ir:r=new Int32Array(Z(4*t),0,t);break;case or:r=new Uint32Array(Z(4*t),0,t);break;case fr:r=new Float32Array(Z(4*t),0,t);break;default:return null}return r.length!==t?r.subarray(0,t):r}function re(e){ee(e.buffer);}function ne(e,t,r){for(var n=0;n<t;++n)r[n]=e[n];}function ae(e,t,r,n){for(var a=0,i=0;i<t;++i)for(var o=e[i],f=0;f<r;++f)n[a++]=o[f];}function ie(e,t,r,n,a,i){for(var o=i,f=0;f<t;++f)for(var u=e[f],s=0;s<r;++s)for(var c=u[s],l=0;l<n;++l)a[o++]=c[l];}function oe(e,t,r,n,a){for(var i=1,o=r+1;o<t.length;++o)i*=t[o];var f=t[r];if(t.length-r===4){var u=t[r+1],s=t[r+2],c=t[r+3];for(o=0;o<f;++o)ie(e[o],u,s,c,n,a),a+=i;}else for(o=0;o<f;++o)oe(e[o],t,r+1,n,a),a+=i;}function fe(e,t,r,n){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;var o=n||sr.allocType(r,a);switch(t.length){case 0:break;case 1:ne(e,t[0],o);break;case 2:ae(e,t[0],t[1],o);break;case 3:ie(e,t[0],t[1],t[2],o,0);break;default:oe(e,t,0,o,0);}return o}function ue(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t}function se(e){return 0|Ke[Object.prototype.toString.call(e)]}function ce(e,t){for(var r=0;r<t.length;++r)e[r]=t[r];}function le(e,t,r,n,a,i,o){for(var f=0,u=0;u<r;++u)for(var s=0;s<n;++s)e[f++]=t[a*u+i*s+o];}function me(e,t,r){function n(t){this.id=l++,this.buffer=e.createBuffer(),this.type=t,this.usage=_r,this.byteLength=0,this.dimension=1,this.dtype=Tr,this.persistentData=null,r.profile&&(this.stats={size:0});}function a(e,t){var r=d.pop();return r||(r=new n(e)),r.bind(),f(r,t,Er,0,1,!1),r}function i(e){d.push(e);}function o(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n);}function f(e,t,r,n,a,i){var f;if(e.usage=r,Array.isArray(t)){if(e.dtype=n||Dr,t.length>0){var u;if(Array.isArray(t[0])){f=Ar(t);for(var s=1,c=1;c<f.length;++c)s*=f[c];e.dimension=s,u=Sr(t,f,e.dtype),o(e,u,r),i?e.persistentData=u:sr.freeType(u);}else if("number"==typeof t[0]){e.dimension=a;var l=sr.allocType(e.dtype,t.length);ce(l,t),o(e,l,r),i?e.persistentData=l:sr.freeType(l);}else Je(t[0])?(e.dimension=t[0].length,e.dtype=n||se(t[0])||Dr,u=Sr(t,[t.length,t[0].length],e.dtype),o(e,u,r),i?e.persistentData=u:sr.freeType(u)):xt.raise("invalid buffer data");}}else if(Je(t))e.dtype=n||se(t),e.dimension=a,o(e,t,r),i&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(X(t)){f=t.shape;var m=t.stride,d=t.offset,p=0,h=0,b=0,g=0;1===f.length?(p=f[0],h=1,b=m[0],g=0):2===f.length?(p=f[0],h=f[1],b=m[0],g=m[1]):xt.raise("invalid shape"),e.dtype=n||se(t.data)||Dr,e.dimension=h;var v=sr.allocType(e.dtype,p*h);le(v,t.data,p,h,b,g,d),o(e,v,r),i?e.persistentData=v:sr.freeType(v);}else xt.raise("invalid buffer data");}function u(r){t.bufferCount--;var n=r.buffer;xt(n,"buffer must not be deleted already"),e.deleteBuffer(n),r.buffer=null,delete m[r.id];}function s(a,i,o,s){function c(t){var n=_r,a=null,i=0,o=0,u=1;return Array.isArray(t)||Je(t)||X(t)?a=t:"number"==typeof t?i=0|t:t&&(xt.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(xt(null===a||Array.isArray(a)||Je(a)||X(a),"invalid data for buffer"),a=t.data),"usage"in t&&(xt.parameter(t.usage,kr,"invalid buffer usage"),n=kr[t.usage]),"type"in t&&(xt.parameter(t.type,yr,"invalid buffer type"),o=yr[t.type]),"dimension"in t&&(xt.type(t.dimension,"number","invalid dimension"),u=0|t.dimension),"length"in t&&(xt.nni(i,"buffer length must be a nonnegative integer"),i=0|t.length)),p.bind(),a?f(p,a,n,o,u,s):(e.bufferData(p.type,i,n),p.dtype=o||Tr,p.usage=n,p.dimension=u,p.byteLength=i),r.profile&&(p.stats.size=p.byteLength*jr[p.dtype]),c}function l(t,r){xt(r+t.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+r+" to a buffer of size "+p.byteLength),e.bufferSubData(p.type,r,t);}function d(e,t){var r,n=0|(t||0);if(p.bind(),Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var a=sr.allocType(p.dtype,e.length);ce(a,e),l(a,n),sr.freeType(a);}else if(Array.isArray(e[0])||Je(e[0])){r=Ar(e);var i=Sr(e,r,p.dtype);l(i,n),sr.freeType(i);}else xt.raise("invalid buffer data");}else if(Je(e))l(e,n);else if(X(e)){r=e.shape;var o=e.stride,f=0,u=0,s=0,m=0;1===r.length?(f=r[0],u=1,s=o[0],m=0):2===r.length?(f=r[0],u=r[1],s=o[0],m=o[1]):xt.raise("invalid shape");var d=Array.isArray(e.data)?p.dtype:se(e.data),h=sr.allocType(d,f*u);le(h,e.data,f,u,s,m,e.offset),l(h,n),sr.freeType(h);}else xt.raise("invalid data for buffer subdata");return c}t.bufferCount++;var p=new n(i);return m[p.id]=p,o||c(a),c._reglType="buffer",c._buffer=p,c.subdata=d,r.profile&&(c.stats=p.stats),c.destroy=function(){u(p);},c}function c(){er(m).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage);});}var l=0,m={};n.prototype.bind=function(){e.bindBuffer(this.type,this.buffer);},n.prototype.destroy=function(){u(this);};var d=[];return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(m).forEach(function(t){e+=m[t].stats.size;}),e}),{create:s,createStream:a,destroyStream:i,clear:function(){er(m).forEach(u),d.forEach(u);},getBuffer:function(e){return e&&e._buffer instanceof n?e._buffer:null},restore:c,_initBuffer:f}}function de(e,t,r,n){function a(e){this.id=l++,c[this.id]=this,this.buffer=e,this.primType=Mr,this.vertCount=0,this.type=0;}function i(e){var t=d.pop();return t||(t=new a(r.create(null,Qr,!0,!1)._buffer)),f(t,e,Vr,-1,-1,0,0),t}function o(e){d.push(e);}function f(n,a,i,o,f,u,s){if(n.buffer.bind(),a){var c=s;s||Je(a)&&(!X(a)||Je(a.data))||(c=t.oes_element_index_uint?qr:Ur),r._initBuffer(n.buffer,a,i,c,3);}else e.bufferData(Qr,u,i),n.buffer.dtype=l||Hr,n.buffer.usage=i,n.buffer.dimension=3,n.buffer.byteLength=u;var l=s;if(!s){switch(n.buffer.dtype){case Hr:case Wr:l=Hr;break;case Ur:case Gr:l=Ur;break;case qr:case Nr:l=qr;break;default:xt.raise("unsupported type for element array");}n.buffer.dtype=l;}n.type=l,xt(l!==qr||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var m=f;m<0&&(m=n.buffer.byteLength,l===Ur?m>>=1:l===qr&&(m>>=2)),n.vertCount=m;var d=o;if(o<0){d=Mr;var p=n.buffer.dimension;1===p&&(d=Lr),2===p&&(d=Ir),3===p&&(d=Mr);}n.primType=d;}function u(e){n.elementsCount--,xt(null!==e.buffer,"must not double destroy elements"),delete c[e.id],e.buffer.destroy(),e.buffer=null;}function s(e,t){function i(e){if(e)if("number"==typeof e)o(e),s.primType=Mr,s.vertCount=0|e,s.type=Hr;else{var t=null,r=Yr,n=-1,a=-1,u=0,c=0;Array.isArray(e)||Je(e)||X(e)?t=e:(xt.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,xt(Array.isArray(t)||Je(t)||X(t),"invalid data for element buffer")),"usage"in e&&(xt.parameter(e.usage,kr,"invalid element buffer usage"),r=kr[e.usage]),"primitive"in e&&(xt.parameter(e.primitive,Rr,"invalid element buffer primitive"),n=Rr[e.primitive]),"count"in e&&(xt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),a=0|e.count),"type"in e&&(xt.parameter(e.type,m,"invalid buffer type"),c=m[e.type]),"length"in e?u=0|e.length:(u=a,c===Ur||c===Gr?u*=2:c!==qr&&c!==Nr||(u*=4))),f(s,t,r,n,a,u,c);}else o(),s.primType=Mr,s.vertCount=0,s.type=Hr;return i}var o=r.create(null,Qr,!0),s=new a(o._buffer);return n.elementsCount++,i(e),i._reglType="elements",i._elements=s,i.subdata=function(e,t){return o.subdata(e,t),i},i.destroy=function(){u(s);},i}var c={},l=0,m={uint8:Hr,uint16:Ur};t.oes_element_index_uint&&(m.uint32=qr),a.prototype.bind=function(){this.buffer.bind();};var d=[];return{create:s,createStream:i,destroyStream:o,getElements:function(e){return"function"==typeof e&&e._elements instanceof a?e._elements:null},clear:function(){er(c).forEach(u);}}}function pe(e){for(var t=sr.allocType(Kr,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-(1/0))t[r]=64512;else{Xr[0]=e[r];var n=$r[0],a=n>>>31<<15,i=(n<<1>>>24)-127,o=n>>13&1023;if(i<-24)t[r]=a;else if(i<-14){var f=-14-i;t[r]=a+(o+1024>>f);}else i>15?t[r]=a+31744:t[r]=a+(i+15<<10)+o;}return t}function he(e){return Array.isArray(e)||Je(e)}function be(e){return"[object "+e+"]"}function ge(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function ve(e){if(!Array.isArray(e))return!1;var t=e.length;return!(0===t||!he(e[0]))}function ye(e){return Object.prototype.toString.call(e)}function xe(e){return ye(e)===sa}function we(e){return ye(e)===ca}function ke(e){return ye(e)===la}function Se(e){return ye(e)===ma}function Ae(e){if(!e)return!1;var t=ye(e);return da.indexOf(t)>=0||(ge(e)||ve(e)||X(e))}function _e(e){return 0|Ke[Object.prototype.toString.call(e)]}function Ee(e,t){var r=t.length;switch(e.type){case Fn:case zn:case Bn:case Pn:var n=sr.allocType(e.type,r);n.set(t),e.data=n;break;case yn:e.data=pe(t);break;default:xt.raise("unsupported texture type, must specify a typed array");}}function Te(e,t){return sr.allocType(e.type===yn?Pn:e.type,t)}function De(e,t){e.type===yn?(e.data=pe(t),sr.freeType(t)):e.data=t;}function je(e,t,r,n,a,i){for(var o=e.width,f=e.height,u=e.channels,s=o*f*u,c=Te(e,s),l=0,m=0;m<f;++m)for(var d=0;d<o;++d)for(var p=0;p<u;++p)c[l++]=t[r*d+n*m+a*p+i];De(e,c);}function Oe(e,t,r,n,a,i){var o;if(o="undefined"!=typeof ha[e]?ha[e]:ua[e]*pa[t],i&&(o*=6),a){for(var f=0,u=r;u>=1;)f+=o*u*u,u/=2;return f}return o*r*n}function Ce(e,t,r,n,a,i,o){function f(){this.internalformat=rn,this.format=rn,this.type=Fn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0;}function u(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels;}function s(e,n){if("object"==typeof n&&n){if("premultiplyAlpha"in n&&(xt.type(n.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(xt.type(n.flipY,"boolean","invalid texture flip"),e.flipY=n.flipY),"alignment"in n&&(xt.oneOf(n.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=n.alignment),"colorSpace"in n&&(xt.parameter(n.colorSpace,I,"invalid colorSpace"),e.colorSpace=I[n.colorSpace]),"type"in n){var a=n.type;xt(t.oes_texture_float||!("float"===a||"float32"===a),"you must enable the OES_texture_float extension in order to use floating point textures."),xt(t.oes_texture_half_float||!("half float"===a||"float16"===a),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),xt(t.webgl_depth_texture||!("uint16"===a||"uint32"===a||"depth stencil"===a),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),xt.parameter(a,M,"invalid texture type"),e.type=M[a];}var i=e.width,o=e.height,f=e.channels,u=!1;"shape"in n?(xt(Array.isArray(n.shape)&&n.shape.length>=2,"shape must be an array"),i=n.shape[0],o=n.shape[1],3===n.shape.length&&(f=n.shape[2],xt(f>0&&f<=4,"invalid number of channels"),u=!0),xt(i>=0&&i<=r.maxTextureSize,"invalid width"),xt(o>=0&&o<=r.maxTextureSize,"invalid height")):("radius"in n&&(i=o=n.radius,xt(i>=0&&i<=r.maxTextureSize,"invalid radius")),"width"in n&&(i=n.width,xt(i>=0&&i<=r.maxTextureSize,"invalid width")),"height"in n&&(o=n.height,xt(o>=0&&o<=r.maxTextureSize,"invalid height")),"channels"in n&&(f=n.channels,xt(f>0&&f<=4,"invalid number of channels"),u=!0)),e.width=0|i,e.height=0|o,e.channels=0|f;var s=!1;if("format"in n){var c=n.format;xt(t.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),xt.parameter(c,W,"invalid texture format");var l=e.internalformat=W[c];e.format=$[l],c in M&&("type"in n||(e.type=M[c])),c in H&&(e.compressed=!0),s=!0;}!u&&s?e.channels=ua[e.format]:u&&!s?e.channels!==fa[e.format]&&(e.format=e.internalformat=fa[e.channels]):s&&u&&xt(e.channels===ua[e.format],"number of channels inconsistent with specified format");}}function c(t){e.pixelStorei(ta,t.flipY),e.pixelStorei(ra,t.premultiplyAlpha),e.pixelStorei(na,t.colorSpace),e.pixelStorei(ea,t.unpackAlignment);}function l(){f.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1;}function m(e,t){var n=null;if(Ae(t)?n=t:t&&(xt.type(t,"object","invalid pixel data type"),s(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),Ae(t.data)&&(n=t.data)),xt(!e.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){xt(!n,"can not specify copy and data field for the same texture");var i=a.viewportWidth,o=a.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||o-e.yOffset,e.needsCopy=!0,xt(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<o&&e.width>0&&e.width<=i&&e.height>0&&e.height<=o,"copy texture read out of bounds");}else if(n){if(Je(n))e.channels=e.channels||4,e.data=n,"type"in t||e.type!==Fn||(e.type=_e(n));else if(ge(n))e.channels=e.channels||4,Ee(e,n),e.alignment=1,e.needsFree=!0;else if(X(n)){var f=n.data;Array.isArray(f)||e.type!==Fn||(e.type=_e(f));var u,c,l,m,d,p,h=n.shape,b=n.stride;3===h.length?(l=h[2],p=b[2]):(xt(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),u=h[0],c=h[1],m=b[0],d=b[1],e.alignment=1,e.width=u,e.height=c,e.channels=l,e.format=e.internalformat=fa[l],e.needsFree=!0,je(e,f,m,d,p,n.offset);}else if(xe(n)||we(n))xe(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ke(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(Se(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(ve(n)){var g=e.width||n[0].length,v=e.height||n.length,y=e.channels;y=he(n[0][0])?y||n[0][0].length:y||1;for(var x=cr.shape(n),w=1,k=0;k<x.length;++k)w*=x[k];var S=Te(e,w);cr.flatten(n,x,"",S),De(e,S),e.alignment=1,e.width=g,e.height=v,e.channels=y,e.format=e.internalformat=fa[y],e.needsFree=!0;}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Pn?xt(r.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===yn&&xt(r.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled");}function d(t,r,a){var i=t.element,o=t.data,f=t.internalformat,u=t.format,s=t.type,l=t.width,m=t.height;c(t),i?e.texImage2D(r,a,u,u,s,i):t.compressed?e.compressedTexImage2D(r,a,f,l,m,0,o):t.needsCopy?(n(),e.copyTexImage2D(r,a,u,t.xOffset,t.yOffset,l,m,0)):e.texImage2D(r,a,u,l,m,0,u,s,o);}function p(t,r,a,i,o){var f=t.element,u=t.data,s=t.internalformat,l=t.format,m=t.type,d=t.width,p=t.height;c(t),f?e.texSubImage2D(r,o,a,i,l,m,f):t.compressed?e.compressedTexSubImage2D(r,o,a,i,s,d,p,u):t.needsCopy?(n(),e.copyTexSubImage2D(r,o,a,i,t.xOffset,t.yOffset,d,p)):e.texSubImage2D(r,o,a,i,d,p,l,m,u);}function h(){return K.pop()||new l}function b(e){e.needsFree&&sr.freeType(e.data),l.call(e),K.push(e);}function g(){f.call(this),this.genMipmaps=!1,this.mipmapHint=$n,this.mipmask=0,this.images=Array(16);}function v(e,t,r){var n=e.images[0]=h();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4;}function y(e,t){var r=null;if(Ae(t))r=e.images[0]=h(),u(r,e),m(r,t),e.mipmask=1;else if(s(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,a=0;a<n.length;++a)r=e.images[a]=h(),u(r,e),r.width>>=a,r.height>>=a,m(r,n[a]),e.mipmask|=1<<a;else r=e.images[0]=h(),u(r,e),m(r,t),e.mipmask=1;u(e,e.images[0]),(e.compressed&&e.internalformat===xn||e.internalformat===wn||e.internalformat===kn||e.internalformat===Sn)&&xt(e.width%4===0&&e.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4");}function x(e,t){for(var r=e.images,n=0;n<r.length;++n){if(!r[n])return;d(r[n],t,n);}}function w(){var e=J.pop()||new g;f.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function k(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&b(t[r]),t[r]=null;J.push(e);}function S(){this.minFilter=Un,this.magFilter=Un,this.wrapS=Mn,this.wrapT=Mn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$n;}function A(e,t){if("min"in t){var n=t.min;xt.parameter(n,L),e.minFilter=L[n],oa.indexOf(e.minFilter)>=0&&(e.genMipmaps=!0);}if("mag"in t){var a=t.mag;xt.parameter(a,R),e.magFilter=R[a];}var i=e.wrapS,o=e.wrapT;if("wrap"in t){var f=t.wrap;"string"==typeof f?(xt.parameter(f,P),i=o=P[f]):Array.isArray(f)&&(xt.parameter(f[0],P),xt.parameter(f[1],P),i=P[f[0]],o=P[f[1]]);}else{if("wrapS"in t){var u=t.wrapS;xt.parameter(u,P),i=P[u];}if("wrapT"in t){var s=t.wrapT;xt.parameter(s,P),o=P[s];}}if(e.wrapS=i,e.wrapT=o,"anisotropic"in t){var c=t.anisotropic;xt("number"==typeof c&&c>=1&&c<=r.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic;}if("mipmap"in t){var l=!1;switch(typeof t.mipmap){case"string":xt.parameter(t.mipmap,B,"invalid mipmap hint"),e.mipmapHint=B[t.mipmap],e.genMipmaps=!0,l=!0;break;case"boolean":l=e.genMipmaps=t.mipmap;break;case"object":xt(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,l=!0;break;default:xt.raise("invalid mipmap type");}!l||"min"in t||(e.minFilter=qn);}}function _(r,n){e.texParameteri(n,Gn,r.minFilter),e.texParameteri(n,Hn,r.magFilter),e.texParameteri(n,Rn,r.wrapS),e.texParameteri(n,Ln,r.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(n,Zn,r.anisotropic),r.genMipmaps&&(e.hint(Xn,r.mipmapHint),e.generateMipmap(n));}function E(t){f.call(this),this.mipmask=0,this.internalformat=rn,this.id=Z++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new S,o.profile&&(this.stats={size:0});}function T(t){e.activeTexture(ia),e.bindTexture(t.target,t.texture);}function D(){var t=re[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(Zr,null);}function j(t){var r=t.texture;xt(r,"must not double destroy texture");var n=t.unit,a=t.target;n>=0&&(e.activeTexture(ia+n),e.bindTexture(a,null),re[n]=null),e.deleteTexture(r),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ee[t.id],i.textureCount--;}function O(t,n){function a(e,t){var n=c.texInfo;S.call(n);var i=w();return"number"==typeof e?"number"==typeof t?v(i,0|e,0|t):v(i,0|e,0|e):e?(xt.type(e,"object","invalid arguments to regl.texture"),A(n,e),y(i,e)):v(i,1,1),n.genMipmaps&&(i.mipmask=(i.width<<1)-1),c.mipmask=i.mipmask,u(c,i),xt.texture2D(n,i,r),c.internalformat=i.internalformat,a.width=i.width,a.height=i.height,T(c),x(i,Zr),_(n,Zr),D(),k(i),o.profile&&(c.stats.size=Oe(c.internalformat,c.type,i.width,i.height,n.genMipmaps,!1)),a.format=N[c.internalformat],a.type=q[c.type],a.mag=Q[n.magFilter],a.min=V[n.minFilter],a.wrapS=Y[n.wrapS],a.wrapT=Y[n.wrapT],a}function f(e,t,r,n){xt(!!e,"must specify image data");var i=0|t,o=0|r,f=0|n,s=h();return u(s,c),s.width=0,s.height=0,m(s,e),s.width=s.width||(c.width>>f)-i,s.height=s.height||(c.height>>f)-o,xt(c.type===s.type&&c.format===s.format&&c.internalformat===s.internalformat,"incompatible format for texture.subimage"),xt(i>=0&&o>=0&&i+s.width<=c.width&&o+s.height<=c.height,"texture.subimage write out of bounds"),xt(c.mipmask&1<<f,"missing mipmap data"),xt(s.data||s.element||s.needsCopy,"missing image data"),T(c),p(s,Zr,i,o,f),D(),b(s),a}function s(t,r){var n=0|t,i=0|r||n;if(n===c.width&&i===c.height)return a;a.width=c.width=n,a.height=c.height=i,T(c);for(var f=0;c.mipmask>>f;++f)e.texImage2D(Zr,f,c.format,n>>f,i>>f,0,c.format,c.type,null);return D(),o.profile&&(c.stats.size=Oe(c.internalformat,c.type,n,i,!1,!1)),a}var c=new E(Zr);return ee[c.id]=c,i.textureCount++,a(t,n),a.subimage=f,a.resize=s,a._reglType="texture2d",a._texture=c,o.profile&&(a.stats=c.stats),
a.destroy=function(){c.decRef();},a}function C(t,n,a,f,c,l){function d(e,t,n,a,i,f){var c,l=O.texInfo;for(S.call(l),c=0;c<6;++c)C[c]=w();if("number"!=typeof e&&e)if("object"==typeof e)if(t)y(C[0],e),y(C[1],t),y(C[2],n),y(C[3],a),y(C[4],i),y(C[5],f);else if(A(l,e),s(O,e),"faces"in e){var m=e.faces;for(xt(Array.isArray(m)&&6===m.length,"cube faces must be a length 6 array"),c=0;c<6;++c)xt("object"==typeof m[c]&&!!m[c],"invalid input for cube map face"),u(C[c],O),y(C[c],m[c]);}else for(c=0;c<6;++c)y(C[c],e);else xt.raise("invalid arguments to cube map");else{var p=0|e||1;for(c=0;c<6;++c)v(C[c],p,p);}for(u(O,C[0]),l.genMipmaps?O.mipmask=(C[0].width<<1)-1:O.mipmask=C[0].mipmask,xt.textureCube(O,l,C,r),O.internalformat=C[0].internalformat,d.width=C[0].width,d.height=C[0].height,T(O),c=0;c<6;++c)x(C[c],tn+c);for(_(l,en),D(),o.profile&&(O.stats.size=Oe(O.internalformat,O.type,d.width,d.height,l.genMipmaps,!0)),d.format=N[O.internalformat],d.type=q[O.type],d.mag=Q[l.magFilter],d.min=V[l.minFilter],d.wrapS=Y[l.wrapS],d.wrapT=Y[l.wrapT],c=0;c<6;++c)k(C[c]);return d}function g(e,t,r,n,a){xt(!!t,"must specify image data"),xt("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var i=0|r,o=0|n,f=0|a,s=h();return u(s,O),s.width=0,s.height=0,m(s,t),s.width=s.width||(O.width>>f)-i,s.height=s.height||(O.height>>f)-o,xt(O.type===s.type&&O.format===s.format&&O.internalformat===s.internalformat,"incompatible format for texture.subimage"),xt(i>=0&&o>=0&&i+s.width<=O.width&&o+s.height<=O.height,"texture.subimage write out of bounds"),xt(O.mipmask&1<<f,"missing mipmap data"),xt(s.data||s.element||s.needsCopy,"missing image data"),T(O),p(s,tn+e,i,o,f),D(),b(s),d}function j(t){var r=0|t;if(r!==O.width){d.width=O.width=r,d.height=O.height=r,T(O);for(var n=0;n<6;++n)for(var a=0;O.mipmask>>a;++a)e.texImage2D(tn+n,a,O.format,r>>a,r>>a,0,O.format,O.type,null);return D(),o.profile&&(O.stats.size=Oe(O.internalformat,O.type,d.width,d.height,!1,!0)),d}}var O=new E(en);ee[O.id]=O,i.cubeCount++;var C=new Array(6);return d(t,n,a,f,c,l),d.subimage=g,d.resize=j,d._reglType="textureCube",d._texture=O,o.profile&&(d.stats=O.stats),d.destroy=function(){O.decRef();},d}function F(){for(var t=0;t<te;++t)e.activeTexture(ia+t),e.bindTexture(Zr,null),re[t]=null;er(ee).forEach(j),i.cubeCount=0,i.textureCount=0;}function z(){er(ee).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var r=0;r<32;++r)if(0!==(t.mipmask&1<<r))if(t.target===Zr)e.texImage2D(Zr,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;n<6;++n)e.texImage2D(tn+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);_(t.texInfo,t.target);});}var B={"don't care":$n,"dont care":$n,nice:Jn,fast:Kn},P={repeat:In,clamp:Mn,mirror:Wn},R={nearest:Un,linear:Nn},L=Ze({mipmap:Yn,"nearest mipmap nearest":qn,"linear mipmap nearest":Qn,"nearest mipmap linear":Vn,"linear mipmap linear":Yn},R),I={none:0,browser:aa},M={uint8:Fn,rgba4:ln,rgb565:dn,"rgb5 a1":mn},W={alpha:nn,luminance:on,"luminance alpha":fn,rgb:an,rgba:rn,rgba4:un,"rgb5 a1":sn,rgb565:cn},H={};t.ext_srgb&&(W.srgb=gn,W.srgba=vn),t.oes_texture_float&&(M.float32=M.float=Pn),t.oes_texture_half_float&&(M.float16=M["half float"]=yn),t.webgl_depth_texture&&(Ze(W,{depth:hn,"depth stencil":bn}),Ze(M,{uint16:zn,uint32:Bn,"depth stencil":pn})),t.webgl_compressed_texture_s3tc&&Ze(H,{"rgb s3tc dxt1":xn,"rgba s3tc dxt1":wn,"rgba s3tc dxt3":kn,"rgba s3tc dxt5":Sn}),t.webgl_compressed_texture_atc&&Ze(H,{"rgb atc":An,"rgba atc explicit alpha":_n,"rgba atc interpolated alpha":En}),t.webgl_compressed_texture_pvrtc&&Ze(H,{"rgb pvrtc 4bppv1":Tn,"rgb pvrtc 2bppv1":Dn,"rgba pvrtc 4bppv1":jn,"rgba pvrtc 2bppv1":On}),t.webgl_compressed_texture_etc1&&(H["rgb etc1"]=Cn);var G=Array.prototype.slice.call(e.getParameter(Jr));Object.keys(H).forEach(function(e){var t=H[e];G.indexOf(t)>=0&&(W[e]=t);});var U=Object.keys(W);r.textureFormats=U;var N=[];Object.keys(W).forEach(function(e){var t=W[e];N[t]=e;});var q=[];Object.keys(M).forEach(function(e){var t=M[e];q[t]=e;});var Q=[];Object.keys(R).forEach(function(e){var t=R[e];Q[t]=e;});var V=[];Object.keys(L).forEach(function(e){var t=L[e];V[t]=e;});var Y=[];Object.keys(P).forEach(function(e){var t=P[e];Y[t]=e;});var $=U.reduce(function(e,t){var r=W[t];return r===on||r===nn||r===on||r===fn||r===hn||r===bn?e[r]=r:r===sn||t.indexOf("rgba")>=0?e[r]=rn:e[r]=an,e},{}),K=[],J=[],Z=0,ee={},te=r.maxTextureUnits,re=Array(te).map(function(){return null});return Ze(E.prototype,{bind:function(){var t=this;t.bindCount+=1;var r=t.unit;if(r<0){for(var n=0;n<te;++n){var a=re[n];if(a){if(a.bindCount>0)continue;a.unit=-1;}re[n]=t,r=n;break}r>=te&&xt.raise("insufficient number of texture units"),o.profile&&i.maxTextureUnits<r+1&&(i.maxTextureUnits=r+1),t.unit=r,e.activeTexture(ia+r),e.bindTexture(t.target,t.texture);}return r},unbind:function(){this.bindCount-=1;},decRef:function(){--this.refCount<=0&&j(this);}}),o.profile&&(i.getTotalTextureSize=function(){var e=0;return Object.keys(ee).forEach(function(t){e+=ee[t].stats.size;}),e}),{create2D:O,createCube:C,clear:F,getTexture:function(e){return null},restore:z}}function Fe(e,t,r){return Ta[e]*t*r}function ze(e,t,r,n,a,i){function o(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,a=0;t?(n=t.width,a=t.height):r&&(n=r.width,a=r.height),this.width=n,this.height=a;}function f(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef());}function u(e,t,r){if(e)if(e.texture){var n=e.texture._texture,a=Math.max(1,n.width),i=Math.max(1,n.height);xt(a===t&&i===r,"inconsistent width/height for supplied texture"),n.refCount+=1;}else{var o=e.renderbuffer._renderbuffer;xt(o.width===t&&o.height===r,"inconsistent width/height for renderbuffer"),o.refCount+=1;}}function s(t,r){r&&(r.texture?e.framebufferTexture2D(ja,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(ja,t,Oa,r.renderbuffer._renderbuffer.renderbuffer));}function c(e){var t=Ca,r=null,n=null,a=e;"object"==typeof e&&(a=e.data,"target"in e&&(t=0|e.target)),xt.type(a,"function","invalid attachment data");var i=a._reglType;return"texture2d"===i?(r=a,xt(t===Ca)):"textureCube"===i?(r=a,xt(t>=Fa&&t<Fa+6,"invalid cube map target")):"renderbuffer"===i?(n=a,t=Oa):xt.raise("invalid regl object for attachment"),new o(t,r,n)}function l(e,t,r,i,f){if(r){var u=n.create2D({width:e,height:t,format:i,type:f});return u._texture.refCount=0,new o(Ca,u,null)}var s=a.create({width:e,height:t,format:i});return s._renderbuffer.refCount=0,new o(Oa,null,s)}function m(e){return e&&(e.texture||e.renderbuffer)}function d(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r));}function p(){this.id=_++,E[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null;}function h(e){e.colorAttachments.forEach(f),f(e.depthAttachment),f(e.stencilAttachment),f(e.depthStencilAttachment);}function b(t){var r=t.framebuffer;xt(r,"must not double destroy framebuffer"),e.deleteFramebuffer(r),t.framebuffer=null,i.framebufferCount--,delete E[t.id];}function g(t){var n;e.bindFramebuffer(ja,t.framebuffer);var a=t.colorAttachments;for(n=0;n<a.length;++n)s(za+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(ja,za+n,Ca,null,0);e.framebufferTexture2D(ja,Ra,Ca,null,0),e.framebufferTexture2D(ja,Ba,Ca,null,0),e.framebufferTexture2D(ja,Pa,Ca,null,0),s(Ba,t.depthAttachment),s(Pa,t.stencilAttachment),s(Ra,t.depthStencilAttachment);var i=e.checkFramebufferStatus(ja);i!==La&&xt.raise("framebuffer configuration not supported, status = "+fi[i]),e.bindFramebuffer(ja,w.next),w.cur=w.next,e.getError();}function v(e,n){function a(e,n){var i;xt(w.next!==f,"can not update framebuffer which is currently in use");var o=t.webgl_draw_buffers,s=0,d=0,p=!0,b=!0,v=null,y=!0,x="rgba",_="uint8",E=1,T=null,D=null,j=null,O=!1;if("number"==typeof e)s=0|e,d=0|n||s;else if(e){xt.type(e,"object","invalid arguments for framebuffer");var C=e;if("shape"in C){var F=C.shape;xt(Array.isArray(F)&&F.length>=2,"invalid shape for framebuffer"),s=F[0],d=F[1];}else"radius"in C&&(s=d=C.radius),"width"in C&&(s=C.width),"height"in C&&(d=C.height);("color"in C||"colors"in C)&&(v=C.color||C.colors,Array.isArray(v)&&xt(1===v.length||o,"multiple render targets not supported")),v||("colorCount"in C&&(E=0|C.colorCount,xt(E>0,"invalid color buffer count")),"colorTexture"in C&&(y=!!C.colorTexture,x="rgba4"),"colorType"in C&&(_=C.colorType,y?(xt(t.oes_texture_float||!("float"===_||"float32"===_),"you must enable OES_texture_float in order to use floating point framebuffer objects"),xt(t.oes_texture_half_float||!("half float"===_||"float16"===_),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===_||"float16"===_?(xt(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==_&&"float32"!==_||(xt(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),xt.oneOf(_,A,"invalid color type")),"colorFormat"in C&&(x=C.colorFormat,k.indexOf(x)>=0?y=!0:S.indexOf(x)>=0?y=!1:y?xt.oneOf(C.colorFormat,k,"invalid color format for texture"):xt.oneOf(C.colorFormat,S,"invalid color format for renderbuffer"))),("depthTexture"in C||"depthStencilTexture"in C)&&(O=!(!C.depthTexture&&!C.depthStencilTexture),xt(!O||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in C&&("boolean"==typeof C.depth?p=C.depth:(T=C.depth,b=!1)),"stencil"in C&&("boolean"==typeof C.stencil?b=C.stencil:(D=C.stencil,p=!1)),"depthStencil"in C&&("boolean"==typeof C.depthStencil?p=b=C.depthStencil:(j=C.depthStencil,p=!1,b=!1));}else s=d=1;var z=null,B=null,P=null,R=null;if(Array.isArray(v))z=v.map(c);else if(v)z=[c(v)];else for(z=new Array(E),i=0;i<E;++i)z[i]=l(s,d,y,x,_);xt(t.webgl_draw_buffers||z.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),xt(z.length<=r.maxColorAttachments,"too many color attachments, not supported"),s=s||z[0].width,d=d||z[0].height,T?B=c(T):p&&!b&&(B=l(s,d,O,"depth","uint32")),D?P=c(D):b&&!p&&(P=l(s,d,!1,"stencil","uint8")),j?R=c(j):!T&&!D&&b&&p&&(R=l(s,d,O,"depth stencil","depth stencil")),xt(!!T+!!D+!!j<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(i=0;i<z.length;++i)if(u(z[i],s,d),xt(!z[i]||z[i].texture&&Va.indexOf(z[i].texture._texture.format)>=0||z[i].renderbuffer&&oi.indexOf(z[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),z[i]&&z[i].texture){var I=Ya[z[i].texture._texture.format]*Xa[z[i].texture._texture.type];null===L?L=I:xt(L===I,"all color attachments much have the same number of bits per pixel.");}return u(B,s,d),xt(!B||B.texture&&B.texture._texture.format===Qa||B.renderbuffer&&B.renderbuffer._renderbuffer.format===Za,"invalid depth attachment for framebuffer object"),u(P,s,d),xt(!P||P.renderbuffer&&P.renderbuffer._renderbuffer.format===ei,"invalid stencil attachment for framebuffer object"),u(R,s,d),xt(!R||R.texture&&R.texture._texture.format===ti||R.renderbuffer&&R.renderbuffer._renderbuffer.format===ti,"invalid depth-stencil attachment for framebuffer object"),h(f),f.width=s,f.height=d,f.colorAttachments=z,f.depthAttachment=B,f.stencilAttachment=P,f.depthStencilAttachment=R,a.color=z.map(m),a.depth=m(B),a.stencil=m(P),a.depthStencil=m(R),a.width=f.width,a.height=f.height,g(f),a}function o(e,t){xt(w.next!==f,"can not resize a framebuffer which is currently in use");var r=0|e,n=0|t||r;if(r===f.width&&n===f.height)return a;for(var i=f.colorAttachments,o=0;o<i.length;++o)d(i[o],r,n);return d(f.depthAttachment,r,n),d(f.stencilAttachment,r,n),d(f.depthStencilAttachment,r,n),f.width=a.width=r,f.height=a.height=n,g(f),a}var f=new p;return i.framebufferCount++,a(e,n),Ze(a,{resize:o,_reglType:"framebuffer",_framebuffer:f,destroy:function(){b(f),h(f);},use:function(e){w.setFBO({framebuffer:a},e);}})}function y(e){function a(e){var r;xt(o.indexOf(w.next)<0,"can not update framebuffer which is currently in use");var i=t.webgl_draw_buffers,f={color:null},u=0,s=null,c="rgba",l="uint8",m=1;if("number"==typeof e)u=0|e;else if(e){xt.type(e,"object","invalid arguments for framebuffer");var d=e;if("shape"in d){var p=d.shape;xt(Array.isArray(p)&&p.length>=2,"invalid shape for framebuffer"),xt(p[0]===p[1],"cube framebuffer must be square"),u=p[0];}else"radius"in d&&(u=0|d.radius),"width"in d?(u=0|d.width,"height"in d&&xt(d.height===u,"must be square")):"height"in d&&(u=0|d.height);("color"in d||"colors"in d)&&(s=d.color||d.colors,Array.isArray(s)&&xt(1===s.length||i,"multiple render targets not supported")),s||("colorCount"in d&&(m=0|d.colorCount,xt(m>0,"invalid color buffer count")),"colorType"in d&&(xt.oneOf(d.colorType,A,"invalid color type"),l=d.colorType),"colorFormat"in d&&(c=d.colorFormat,xt.oneOf(d.colorFormat,k,"invalid color format for texture"))),"depth"in d&&(f.depth=d.depth),"stencil"in d&&(f.stencil=d.stencil),"depthStencil"in d&&(f.depthStencil=d.depthStencil);}else u=1;var h;if(s)if(Array.isArray(s))for(h=[],r=0;r<s.length;++r)h[r]=s[r];else h=[s];else{h=Array(m);var b={radius:u,format:c,type:l};for(r=0;r<m;++r)h[r]=n.createCube(b);}for(f.color=Array(h.length),r=0;r<h.length;++r){var g=h[r];xt("function"==typeof g&&"textureCube"===g._reglType,"invalid cube map"),u=u||g.width,xt(g.width===u&&g.height===u,"invalid cube map shape"),f.color[r]={target:Fa,data:h[r]};}for(r=0;r<6;++r){for(var y=0;y<h.length;++y)f.color[y].target=Fa+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=v(f);}return Ze(a,{width:u,height:u,color:h})}function i(e){var t,n=0|e;if(xt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a}var o=Array(6);return a(e),Ze(a,{faces:o,resize:i,_reglType:"framebufferCube",destroy:function(){o.forEach(function(e){e.destroy();});}})}function x(){er(E).forEach(function(t){t.framebuffer=e.createFramebuffer(),g(t);});}var w={cur:null,next:null,dirty:!1,setFBO:null},k=["rgba"],S=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&S.push("srgba"),t.ext_color_buffer_half_float&&S.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&S.push("rgba32f");var A=["uint8"];t.oes_texture_half_float&&A.push("half float","float16"),t.oes_texture_float&&A.push("float","float32");var _=0,E={};return Ze(w,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof p)return t}return null},create:v,createCube:y,clear:function(){er(E).forEach(b);},restore:x})}function Be(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ui,this.offset=0,this.stride=0,this.divisor=0;}function Pe(e,t,r,n,a){for(var i=r.maxAttributes,o=new Array(i),f=0;f<i;++f)o[f]=new Be;return{Record:Be,scope:{},state:o}}function Re(e,t,r,n){function a(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n;}function i(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t);}function o(r,n,a){var i=r===si?c:l,o=i[n];if(!o){var f=t.str(n);o=e.createShader(r),e.shaderSource(o,f),e.compileShader(o),xt.shaderError(e,o,f,r,a),i[n]=o;}return o}function f(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0});}function u(r,f){var u,s,c=o(si,r.fragId),l=o(ci,r.vertId),m=r.program=e.createProgram();e.attachShader(m,c),e.attachShader(m,l),e.linkProgram(m),xt.linkError(e,m,t.str(r.fragId),t.str(r.vertId),f);var d=e.getProgramParameter(m,li);n.profile&&(r.stats.uniformsCount=d);var p=r.uniforms;for(u=0;u<d;++u)if(s=e.getActiveUniform(m,u))if(s.size>1)for(var h=0;h<s.size;++h){var b=s.name.replace("[0]","["+h+"]");i(p,new a(b,t.id(b),e.getUniformLocation(m,b),s));}else i(p,new a(s.name,t.id(s.name),e.getUniformLocation(m,s.name),s));var g=e.getProgramParameter(m,mi);n.profile&&(r.stats.attributesCount=g);var v=r.attributes;for(u=0;u<g;++u)s=e.getActiveAttrib(m,u),s&&i(v,new a(s.name,t.id(s.name),e.getAttribLocation(m,s.name),s));}function s(){c={},l={};for(var e=0;e<d.length;++e)u(d[e]);}var c={},l={},m={},d=[],p=0;return n.profile&&(r.getMaxUniformsCount=function(){var e=0;return d.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount);}),e},r.getMaxAttributesCount=function(){var e=0;return d.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount);}),e}),{clear:function(){var t=e.deleteShader.bind(e);er(c).forEach(t),c={},er(l).forEach(t),l={},d.forEach(function(t){e.deleteProgram(t.program);}),d.length=0,m={},r.shaderCount=0;},program:function(e,t,n){xt.command(e>=0,"missing vertex shader",n),xt.command(t>=0,"missing fragment shader",n);var a=m[t];a||(a=m[t]={});var i=a[e];return i||(i=new f(t,e),r.shaderCount++,u(i,n),a[e]=i,d.push(i)),i},restore:s,shader:o,frag:-1,vert:-1}}function Le(e,t,r,n,a,i){function o(o){var f;null===t.next?(xt(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),f=pi):(xt(null!==t.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),f=t.next.colorAttachments[0].texture._texture.type,i.oes_texture_float?xt(f===pi||f===bi,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):xt(f===pi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var u=0,s=0,c=n.framebufferWidth,l=n.framebufferHeight,m=null;Je(o)?m=o:o&&(xt.type(o,"object","invalid arguments to regl.read()"),u=0|o.x,s=0|o.y,xt(u>=0&&u<n.framebufferWidth,"invalid x offset for regl.read"),xt(s>=0&&s<n.framebufferHeight,"invalid y offset for regl.read"),c=0|(o.width||n.framebufferWidth-u),l=0|(o.height||n.framebufferHeight-s),m=o.data||null),m&&(f===pi?xt(m instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):f===bi&&xt(m instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),xt(c>0&&c+u<=n.framebufferWidth,"invalid width for read pixels"),xt(l>0&&l+s<=n.framebufferHeight,"invalid height for read pixels"),r();var d=c*l*4;return m||(f===pi?m=new Uint8Array(d):f===bi&&(m=m||new Float32Array(d))),xt.isTypedArray(m,"data buffer for regl.read() must be a typedarray"),xt(m.byteLength>=d,"data buffer for regl.read() too small"),e.pixelStorei(hi,4),e.readPixels(u,s,c,l,di,f,m),m}function f(e){var r;return t.setFBO({framebuffer:e.framebuffer},function(){r=o(e);}),r}function u(e){return e&&"framebuffer"in e?f(e):o(e)}return u}function Ie(e){return Array.prototype.slice.call(e)}function Me(e){return Ie(e).join("")}function We(){function e(e){for(var t=0;t<u.length;++t)if(u[t]===e)return f[t];var r="g"+o++;return f.push(r),u.push(e),r}function t(){function e(){r.push.apply(r,Ie(arguments));}function t(){var e="v"+o++;return n.push(e),arguments.length>0&&(r.push(e,"="),r.push.apply(r,Ie(arguments)),r.push(";")),e}var r=[],n=[];return Ze(e,{def:t,toString:function(){return Me([n.length>0?"var "+n+";":"",Me(r)])}})}function r(){function e(e,t){n(e,t,"=",r.def(e,t),";");}var r=t(),n=t(),a=r.toString,i=n.toString;return Ze(function(){r.apply(r,Ie(arguments));},{def:r.def,entry:r,exit:n,save:e,set:function(t,n,a){e(t,n),r(t,n,"=",a,";");},toString:function(){return a()+i()}})}function n(){var e=Me(arguments),t=r(),n=r(),a=t.toString,i=n.toString;return Ze(t,{then:function(){return t.apply(t,Ie(arguments)),this},else:function(){return n.apply(n,Ie(arguments)),this},toString:function(){var t=i();return t&&(t="else{"+t+"}"),Me(["if(",e,"){",a(),"}",t])}})}function a(e,t){function n(){var e="a"+a.length;return a.push(e),e}var a=[];t=t||0;for(var i=0;i<t;++i)n();var o=r(),f=o.toString,u=c[e]=Ze(o,{arg:n,toString:function(){return Me(["function(",a.join(),"){",f(),"}"])}});return u}function i(){var e=['"use strict";',s,"return {"];Object.keys(c).forEach(function(t){e.push('"',t,'":',c[t].toString(),",");}),e.push("}");var t=Me(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),r=Function.apply(null,f.concat(t));return r.apply(null,u)}var o=0,f=[],u=[],s=t(),c={};return{global:s,link:e,block:t,proc:a,scope:r,cond:n,compile:i}}function He(e){return Array.isArray(e)||Je(e)||X(e)}function Ge(e){return e.sort(function(e,t){return e===Ji?-1:t===Ji?1:e<t?-1:1})}function Ue(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n;}function Ne(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function qe(e){return new Ue(!1,!1,!1,e)}function Qe(e,t){var r=e.type;if(r===wi){var n=e.data.length;return new Ue(!0,n>=1,n>=2,t)}if(r===_i){var a=e.data;return new Ue(a.thisDep,a.contextDep,a.propDep,t)}return new Ue(r===Ai,r===Si,r===ki,t)}function Ve(e,t,r,n,a,i,o,f,u,s,c,l,m,d,p){function h(e){return e.replace(".","_")}function b(e,t,r){var n=h(e);te.push(e),ee[n]=Z[n]=!!r,re[n]=t;}function g(e,t,r){var n=h(e);te.push(e),Array.isArray(r)?(Z[n]=r.slice(),ee[n]=r.slice()):Z[n]=ee[n]=r,ne[n]=t;}function v(){var e=We(),r=e.link,n=e.global;e.id=oe++,e.batchId="0";var a=r(ae),i=e.shared={props:"a0"};Object.keys(ae).forEach(function(e){i[e]=n.def(a,".",e);}),xt.optional(function(){e.CHECK=r(xt),e.commandStr=xt.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");");},ie.invalidBlendCombinations=pf;});var o=e.next={},f=e.current={};Object.keys(ne).forEach(function(e){Array.isArray(Z[e])&&(o[e]=n.def(i.next,".",e),f[e]=n.def(i.current,".",e));});var u=e.constants={};Object.keys(ie).forEach(function(e){u[e]=n.def(JSON.stringify(ie[e]));}),e.invoke=function(t,n){switch(n.type){case wi:var a=["this",i.context,i.props,e.batchId];return t.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case ki:return t.def(i.props,n.data);case Si:return t.def(i.context,n.data);case Ai:return t.def("this",n.data);case _i:return n.data.append(e,t),n.data.ref}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var n=t.id(e);if(n in c)return c[n];var a=s.scope[n];a||(a=s.scope[n]=new Y);var i=c[n]=r(a);return i},e}function y(e){var t,r=e.static,n=e.dynamic;if(Zi in r){var a=!!r[Zi];t=qe(function(e,t){return a}),t.enable=a;}else if(Zi in n){var i=n[Zi];t=Qe(i,function(e,t){return e.invoke(t,i)});}return t}function x(e,t){var r=e.static,n=e.dynamic;if(eo in r){var a=r[eo];return a?(a=f.getFramebuffer(a),xt.command(a,"invalid framebuffer object"),qe(function(e,t){var r=e.link(a),n=e.shared;t.set(n.framebuffer,".next",r);var i=n.context;return t.set(i,"."+co,r+".width"),t.set(i,"."+lo,r+".height"),r})):qe(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+co,n+"."+bo),t.set(n,"."+lo,n+"."+go),"null"})}if(eo in n){var i=n[eo];return Qe(i,function(e,t){var r=e.invoke(t,i),n=e.shared,a=n.framebuffer,o=t.def(a,".getFramebuffer(",r,")");xt.optional(function(){e.assert(t,"!"+r+"||"+o,"invalid framebuffer object");}),t.set(a,".next",o);var f=n.context;return t.set(f,"."+co,o+"?"+o+".width:"+f+"."+bo),t.set(f,"."+lo,o+"?"+o+".height:"+f+"."+go),o})}return null}function w(e,t,r){function n(e){if(e in a){var n=a[e];xt.commandType(n,"object","invalid "+e,r.commandStr);var o,f,u=!0,s=0|n.x,c=0|n.y;return"width"in n?(o=0|n.width,xt.command(o>=0,"invalid "+e,r.commandStr)):u=!1,"height"in n?(f=0|n.height,xt.command(f>=0,"invalid "+e,r.commandStr)):u=!1,new Ue(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,function(e,t){var r=e.shared.context,a=o;"width"in n||(a=t.def(r,".",co,"-",s));var i=f;return"height"in n||(i=t.def(r,".",lo,"-",c)),[s,c,a,i]})}if(e in i){var l=i[e],m=Qe(l,function(t,r){var n=t.invoke(r,l);xt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e);});var a=t.shared.context,i=r.def(n,".x|0"),o=r.def(n,".y|0"),f=r.def('"width" in ',n,"?",n,".width|0:","(",a,".",co,"-",i,")"),u=r.def('"height" in ',n,"?",n,".height|0:","(",a,".",lo,"-",o,")");return xt.optional(function(){t.assert(r,f+">=0&&"+u+">=0","invalid "+e);}),[i,o,f,u]});return t&&(m.thisDep=m.thisDep||t.thisDep,m.contextDep=m.contextDep||t.contextDep,m.propDep=m.propDep||t.propDep),m}return t?new Ue(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",co),t.def(r,".",lo)]}):null}var a=e.static,i=e.dynamic,o=n(Ji);if(o){var f=o;o=new Ue(o.thisDep,o.contextDep,o.propDep,function(e,t){var r=f.append(e,t),n=e.shared.context;return t.set(n,"."+mo,r[2]),t.set(n,"."+po,r[3]),r});}return{viewport:o,scissor_box:n(Ki)}}function k(e){function r(e){if(e in a){var r=t.id(a[e]);xt.optional(function(){c.shader(gf[e],r,xt.guessCommand());});var n=qe(function(){return r});return n.id=r,n}if(e in i){var o=i[e];return Qe(o,function(t,r){var n=t.invoke(r,o),a=r.def(t.shared.strings,".id(",n,")");return xt.optional(function(){r(t.shared.shader,".shader(",gf[e],",",a,",",t.command,");");}),a})}return null}var n,a=e.static,i=e.dynamic,o=r(ro),f=r(to),u=null;return Ne(o)&&Ne(f)?(u=c.program(f.id,o.id),n=qe(function(e,t){return e.link(u)})):n=new Ue(o&&o.thisDep||f&&f.thisDep,o&&o.contextDep||f&&f.contextDep,o&&o.propDep||f&&f.propDep,function(e,t){var r,n=e.shared.shader;r=o?o.append(e,t):t.def(n,".",ro);var a;a=f?f.append(e,t):t.def(n,".",to);var i=n+".program("+a+","+r;return xt.optional(function(){i+=","+e.command;}),t.def(i+")")}),{frag:o,vert:f,progVar:n,program:u}}function S(e,t){function r(){if(no in f){var e=f[no];He(e)?e=i.getElements(i.create(e,!0)):e&&(e=i.getElements(e),xt.command(e,"invalid elements",t.commandStr));var r=qe(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return r.value=e,r}if(no in u){var n=u[no];return Qe(n,function(e,t){var r=e.shared,a=r.isBufferArgs,i=r.elements,o=e.invoke(t,n),f=t.def("null"),u=t.def(a,"(",o,")"),s=e.cond(u).then(f,"=",i,".createStream(",o,");").else(f,"=",i,".getElements(",o,");");return xt.optional(function(){e.assert(s.else,"!"+o+"||"+f,"invalid elements");}),t.entry(s),t.exit(e.cond(u).then(i,".destroyStream(",f,");")),e.ELEMENTS=f,f})}return null}function n(){if(ao in f){var e=f[ao];return xt.commandParameter(e,Rr,"invalid primitve",t.commandStr),qe(function(t,r){return Rr[e]})}if(ao in u){var r=u[ao];return Qe(r,function(e,t){var n=e.constants.primTypes,a=e.invoke(t,r);return xt.optional(function(){e.assert(t,a+" in "+n,"invalid primitive, must be one of "+Object.keys(Rr));}),t.def(n,"[",a,"]")})}return s?Ne(s)?qe(s.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return Ko}):new Ue(s.thisDep,s.contextDep,s.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",Ko)}):null}function a(e,r){if(e in f){var n=0|f[e];return xt.command(!r||n>=0,"invalid "+e,t.commandStr),qe(function(e,t){return r&&(e.OFFSET=n),n})}if(e in u){var a=u[e];return Qe(a,function(t,n){var i=t.invoke(n,a);return r&&(t.OFFSET=i,xt.optional(function(){t.assert(n,i+">=0","invalid "+e);})),i})}return r&&s?qe(function(e,t){return e.OFFSET="0",0}):null}function o(){if(io in f){var e=0|f[io];return xt.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),qe(function(){return e})}if(io in u){var r=u[io];return Qe(r,function(e,t){var n=e.invoke(t,r);return xt.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count");}),n})}if(s){if(Ne(s)){if(s)return c?new Ue(c.thisDep,c.contextDep,c.propDep,function(e,t){var r=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return xt.optional(function(){e.assert(t,r+">=0","invalid vertex offset/element buffer too small");}),r}):qe(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var n=qe(function(){return-1});return xt.optional(function(){n.MISSING=!0;}),n}var a=new Ue(s.thisDep||c.thisDep,s.contextDep||c.contextDep,s.propDep||c.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")});return xt.optional(function(){a.DYNAMIC=!0;}),a}return null}var f=e.static,u=e.dynamic,s=r(),c=a(oo,!0);return{elements:s,primitive:n(),count:o(),instances:a(fo,!1),offset:c}}function A(e,t){var r=e.static,a=e.dynamic,i={};return te.forEach(function(e){function o(t,n){if(e in r){var o=t(r[e]);i[f]=qe(function(){return o});}else if(e in a){var u=a[e];i[f]=Qe(u,function(e,t){return n(e,t,e.invoke(t,u))});}}var f=h(e);switch(e){case Ri:case Ti:case Ei:case qi:case Ci:case $i:case Wi:case Gi:case Ui:case Bi:return o(function(r){return xt.commandType(r,"boolean",e,t.commandStr),r},function(t,r,n){return xt.optional(function(){t.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+e,t.commandStr);}),n});case Fi:return o(function(r){return xt.commandParameter(r,hf,"invalid "+e,t.commandStr),hf[r]},function(t,r,n){var a=t.constants.compareFuncs;return xt.optional(function(){t.assert(r,n+" in "+a,"invalid "+e+", must be one of "+Object.keys(hf));}),r.def(a,"[",n,"]")});case zi:return o(function(e){return xt.command(he(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,r){xt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array");});var n=t.def("+",r,"[0]"),a=t.def("+",r,"[1]");return[n,a]});case Oi:return o(function(e){xt.commandType(e,"object","blend.func",t.commandStr);var r="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,a="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return xt.commandParameter(r,df,f+".srcRGB",t.commandStr),xt.commandParameter(n,df,f+".srcAlpha",t.commandStr),xt.commandParameter(a,df,f+".dstRGB",t.commandStr),xt.commandParameter(i,df,f+".dstAlpha",t.commandStr),xt.command(pf.indexOf(r+", "+a)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+a+")",t.commandStr),[df[r],df[a],df[n],df[i]]},function(t,r,n){function a(a,o){var f=r.def('"',a,o,'" in ',n,"?",n,".",a,o,":",n,".",a);return xt.optional(function(){t.assert(r,f+" in "+i,"invalid "+e+"."+a+o+", must be one of "+Object.keys(df));}),f}var i=t.constants.blendFuncs;xt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object");});var o=a("src","RGB"),f=a("dst","RGB");xt.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(r,e+".indexOf("+o+'+", "+'+f+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)");});var u=r.def(i,"[",o,"]"),s=r.def(i,"[",a("src","Alpha"),"]"),c=r.def(i,"[",f,"]"),l=r.def(i,"[",a("dst","Alpha"),"]");return[u,c,s,l]});case ji:return o(function(r){return"string"==typeof r?(xt.commandParameter(r,X,"invalid "+e,t.commandStr),[X[r],X[r]]):"object"==typeof r?(xt.commandParameter(r.rgb,X,e+".rgb",t.commandStr),xt.commandParameter(r.alpha,X,e+".alpha",t.commandStr),[X[r.rgb],X[r.alpha]]):void xt.commandRaise("invalid blend.equation",t.commandStr)},function(t,r,n){var a=t.constants.blendEquations,i=r.def(),o=r.def(),f=t.cond("typeof ",n,'==="string"');return xt.optional(function(){function r(e,r,n){t.assert(e,n+" in "+a,"invalid "+r+", must be one of "+Object.keys(X));}r(f.then,e,n),t.assert(f.else,n+"&&typeof "+n+'==="object"',"invalid "+e),r(f.else,e+".rgb",n+".rgb"),r(f.else,e+".alpha",n+".alpha");}),f.then(i,"=",o,"=",a,"[",n,"];"),f.else(i,"=",a,"[",n,".rgb];",o,"=",a,"[",n,".alpha];"),r(f),[i,o]});case Di:return o(function(e){return xt.command(he(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),$(4,function(t){return+e[t]})},function(e,t,r){return xt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array");}),$(4,function(e){return t.def("+",r,"[",e,"]");
})});case Qi:return o(function(e){return xt.commandType(e,"number",f,t.commandStr),0|e},function(e,t,r){return xt.optional(function(){e.assert(t,"typeof "+r+'==="number"',"invalid stencil.mask");}),t.def(r,"|0")});case Vi:return o(function(r){xt.commandType(r,"object",f,t.commandStr);var n=r.cmp||"keep",a=r.ref||0,i="mask"in r?r.mask:-1;return xt.commandParameter(n,hf,e+".cmp",t.commandStr),xt.commandType(a,"number",e+".ref",t.commandStr),xt.commandType(i,"number",e+".mask",t.commandStr),[hf[n],a,i]},function(e,t,r){var n=e.constants.compareFuncs;xt.optional(function(){function a(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func");}a(r+"&&typeof ",r,'==="object"'),a('!("cmp" in ',r,")||(",r,".cmp in ",n,")");});var a=t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",of),i=t.def(r,".ref|0"),o=t.def('"mask" in ',r,"?",r,".mask|0:-1");return[a,i,o]});case Yi:case Xi:return o(function(r){xt.commandType(r,"object",f,t.commandStr);var n=r.fail||"keep",a=r.zfail||"keep",i=r.zpass||"keep";return xt.commandParameter(n,bf,e+".fail",t.commandStr),xt.commandParameter(a,bf,e+".zfail",t.commandStr),xt.commandParameter(i,bf,e+".zpass",t.commandStr),[e===Xi?Zo:Jo,bf[n],bf[a],bf[i]]},function(t,r,n){function a(a){return xt.optional(function(){t.assert(r,'!("'+a+'" in '+n+")||("+n+"."+a+" in "+i+")","invalid "+e+"."+a+", must be one of "+Object.keys(bf));}),r.def('"',a,'" in ',n,"?",i,"[",n,".",a,"]:",of)}var i=t.constants.stencilOps;return xt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e);}),[e===Xi?Zo:Jo,a("fail"),a("zfail"),a("zpass")]});case Hi:return o(function(e){xt.commandType(e,"object",f,t.commandStr);var r=0|e.factor,n=0|e.units;return xt.commandType(r,"number",f+".factor",t.commandStr),xt.commandType(n,"number",f+".units",t.commandStr),[r,n]},function(t,r,n){xt.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e);});var a=r.def(n,".factor|0"),i=r.def(n,".units|0");return[a,i]});case Li:return o(function(e){var r=0;return"front"===e?r=Jo:"back"===e&&(r=Zo),xt.command(!!r,f,t.commandStr),r},function(e,t,r){return xt.optional(function(){e.assert(t,r+'==="front"||'+r+'==="back"',"invalid cull.face");}),t.def(r,'==="front"?',Jo,":",Zo)});case Mi:return o(function(e){return xt.command("number"==typeof e&&e>=n.lineWidthDims[0]&&e<=n.lineWidthDims[1],"invalid line width, must positive number between "+n.lineWidthDims[0]+" and "+n.lineWidthDims[1],t.commandStr),e},function(e,t,r){return xt.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">="+n.lineWidthDims[0]+"&&"+r+"<="+n.lineWidthDims[1],"invalid line width");}),r});case Ii:return o(function(e){return xt.commandParameter(e,vf,f,t.commandStr),vf[e]},function(e,t,r){return xt.optional(function(){e.assert(t,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw");}),t.def(r+'==="cw"?'+ef+":"+tf)});case Pi:return o(function(e){return xt.command(he(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,r){return xt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask");}),$(4,function(e){return"!!"+r+"["+e+"]"})});case Ni:return o(function(e){xt.command("object"==typeof e&&e,f,t.commandStr);var r="value"in e?e.value:1,n=!!e.invert;return xt.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[r,n]},function(e,t,r){xt.optional(function(){e.assert(t,r+"&&typeof "+r+'==="object"',"invalid sample.coverage");});var n=t.def('"value" in ',r,"?+",r,".value:1"),a=t.def("!!",r,".invert");return[n,a]})}}),i}function _(e,t){var r=e.static,n=e.dynamic,a={};return Object.keys(r).forEach(function(e){var n,i=r[e];if("number"==typeof i||"boolean"==typeof i)n=qe(function(){return i});else if("function"==typeof i){var o=i._reglType;"texture2d"===o||"textureCube"===o?n=qe(function(e){return e.link(i)}):"framebuffer"===o||"framebufferCube"===o?(xt.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),n=qe(function(e){return e.link(i.color[0])})):xt.commandRaise('invalid data for uniform "'+e+'"',t.commandStr);}else he(i)?n=qe(function(t){var r=t.global.def("[",$(i.length,function(r){return xt.command("number"==typeof i[r]||"boolean"==typeof i[r],"invalid uniform "+e,t.commandStr),i[r]}),"]");return r}):xt.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);n.value=i,a[e]=n;}),Object.keys(n).forEach(function(e){var t=n[e];a[e]=Qe(t,function(e,r){return e.invoke(r,t)});}),a}function E(e,r){var n=e.static,i=e.dynamic,o={};return Object.keys(n).forEach(function(e){var i=n[e],f=t.id(e),u=new Y;if(He(i))u.state=yi,u.buffer=a.getBuffer(a.create(i,yo,!1,!0)),u.type=0;else{var s=a.getBuffer(i);if(s)u.state=yi,u.buffer=s,u.type=0;else if(xt.command("object"==typeof i&&i,"invalid data for attribute "+e,r.commandStr),i.constant){var c=i.constant;u.buffer="null",u.state=xi,"number"==typeof c?u.x=c:(xt.command(he(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,r.commandStr),gi.forEach(function(e,t){t<c.length&&(u[e]=c[t]);}));}else{s=He(i.buffer)?a.getBuffer(a.create(i.buffer,yo,!1,!0)):a.getBuffer(i.buffer),xt.command(!!s,'missing buffer for attribute "'+e+'"',r.commandStr);var l=0|i.offset;xt.command(l>=0,'invalid offset for attribute "'+e+'"',r.commandStr);var m=0|i.stride;xt.command(m>=0&&m<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',r.commandStr);var d=0|i.size;xt.command(!("size"in i)||d>0&&d<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',r.commandStr);var p=!!i.normalized,h=0;"type"in i&&(xt.commandParameter(i.type,yr,"invalid type for attribute "+e,r.commandStr),h=yr[i.type]);var b=0|i.divisor;"divisor"in i&&(xt.command(0===b||K,'cannot specify divisor for attribute "'+e+'", instancing not supported',r.commandStr),xt.command(b>=0,'invalid divisor for attribute "'+e+'"',r.commandStr)),xt.optional(function(){var t=r.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(r){xt.command(n.indexOf(r)>=0,'unknown parameter "'+r+'" for attribute pointer "'+e+'" (valid parameters are '+n+")",t);});}),u.buffer=s,u.state=yi,u.size=d,u.normalized=p,u.type=h||s.dtype,u.offset=l,u.stride=m,u.divisor=b;}}o[e]=qe(function(e,t){var r=e.attribCache;if(f in r)return r[f];var n={isStream:!1};return Object.keys(u).forEach(function(e){n[e]=u[e];}),u.buffer&&(n.buffer=e.link(u.buffer),n.type=n.type||n.buffer+".dtype"),r[f]=n,n});}),Object.keys(i).forEach(function(e){function t(t,n){function a(e){n(s[e],"=",i,".",e,"|0;");}var i=t.invoke(n,r),o=t.shared,f=o.isBufferArgs,u=o.buffer;xt.optional(function(){t.assert(n,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+f+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+f+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"');});var s={isStream:n.def(!1)},c=new Y;c.state=yi,Object.keys(c).forEach(function(e){s[e]=n.def(""+c[e]);});var l=s.buffer,m=s.type;return n("if(",f,"(",i,")){",s.isStream,"=true;",l,"=",u,".createStream(",yo,",",i,");",m,"=",l,".dtype;","}else{",l,"=",u,".getBuffer(",i,");","if(",l,"){",m,"=",l,".dtype;",'}else if("constant" in ',i,"){",s.state,"=",xi,";","if(typeof "+i+'.constant === "number"){',s[gi[0]],"=",i,".constant;",gi.slice(1).map(function(e){return s[e]}).join("="),"=0;","}else{",gi.map(function(e,t){return s[e]+"="+i+".constant.length>="+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",f,"(",i,".buffer)){",l,"=",u,".createStream(",yo,",",i,".buffer);","}else{",l,"=",u,".getBuffer(",i,".buffer);","}",m,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",l,".dtype;",s.normalized,"=!!",i,".normalized;"),a("size"),a("offset"),a("stride"),a("divisor"),n("}}"),n.exit("if(",s.isStream,"){",u,".destroyStream(",l,");","}"),s}var r=i[e];o[e]=Qe(r,t);}),o}function T(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach(function(e){var r=t[e];n[e]=qe(function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)});}),Object.keys(r).forEach(function(e){var t=r[e];n[e]=Qe(t,function(e,r){return e.invoke(r,t)});}),n}function D(e,t,r,n,a){function i(e){var t=s[e];t&&(l[e]=t);}var o=e.static,f=e.dynamic;xt.optional(function(){function e(e){Object.keys(e).forEach(function(e){xt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',a.commandStr);});}var t=[eo,to,ro,no,ao,oo,io,fo,Zi].concat(te);e(o),e(f);});var u=x(e,a),s=w(e,u,a),c=S(e,a),l=A(e,a),m=k(e,a);i(Ji),i(h(Ki));var d=Object.keys(l).length>0,p={framebuffer:u,draw:c,shader:m,state:l,dirty:d};return p.profile=y(e,a),p.uniforms=_(r,a),p.attributes=E(t,a),p.context=T(n,a),p}function j(e,t,r){var n=e.shared,a=n.context,i=e.scope();Object.keys(r).forEach(function(n){t.save(a,"."+n);var o=r[n];i(a,".",n,"=",o.append(e,t),";");}),t(i);}function O(e,t,r,n){var a,i=e.shared,o=i.gl,f=i.framebuffer;J&&(a=t.def(i.extensions,".webgl_draw_buffers"));var u,s=e.constants,c=s.drawBuffer,l=s.backBuffer;u=r?r.append(e,t):t.def(f,".next"),n||t("if(",u,"!==",f,".cur){"),t("if(",u,"){",o,".bindFramebuffer(",lf,",",u,".framebuffer);"),J&&t(a,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",lf,",null);"),J&&t(a,".drawBuffersWEBGL(",l,");"),t("}",f,".cur=",u,";"),n||t("}");}function C(e,t,r){var n=e.shared,a=n.gl,i=e.current,o=e.next,f=n.current,u=n.next,s=e.cond(f,".dirty");te.forEach(function(t){var n=h(t);if(!(n in r.state)){var c,l;if(n in o){c=o[n],l=i[n];var m=$(Z[n].length,function(e){return s.def(c,"[",e,"]")});s(e.cond(m.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(a,".",ne[n],"(",m,");",m.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"));}else{c=s.def(u,".",n);var d=e.cond(c,"!==",f,".",n);s(d),n in re?d(e.cond(c).then(a,".enable(",re[n],");").else(a,".disable(",re[n],");"),f,".",n,"=",c,";"):d(a,".",ne[n],"(",c,");",f,".",n,"=",c,";");}}}),0===Object.keys(r.state).length&&s(f,".dirty=false;"),t(s);}function F(e,t,r,n){var a=e.shared,i=e.current,o=a.current,f=a.gl;Ge(Object.keys(r)).forEach(function(a){var u=r[a];if(!n||n(u)){var s=u.append(e,t);if(re[a]){var c=re[a];Ne(u)?s?t(f,".enable(",c,");"):t(f,".disable(",c,");"):t(e.cond(s).then(f,".enable(",c,");").else(f,".disable(",c,");")),t(o,".",a,"=",s,";");}else if(he(s)){var l=i[a];t(f,".",ne[a],"(",s,");",s.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";");}else t(f,".",ne[a],"(",s,");",o,".",a,"=",s,";");}});}function z(e,t){K&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"));}function B(e,t,r,n,a){function i(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){s=t.def(),e(s,"=",i(),";"),"string"==typeof a?e(p,".count+=",a,";"):e(p,".count++;"),d&&(n?(c=t.def(),e(c,"=",b,".getNumPendingQueries();")):e(b,".beginQuery(",p,");"));}function f(e){e(p,".cpuTime+=",i(),"-",s,";"),d&&(n?e(b,".pushScopeStats(",c,",",b,".getNumPendingQueries(),",p,");"):e(b,".endQuery();"));}function u(e){var r=t.def(h,".profile");t(h,".profile=",e,";"),t.exit(h,".profile=",r,";");}var s,c,l,m=e.shared,p=e.stats,h=m.current,b=m.timer,g=r.profile;if(g){if(Ne(g))return void(g.enable?(o(t),f(t.exit),u("true")):u("false"));l=g.append(e,t),u(l);}else l=t.def(h,".profile");var v=e.block();o(v),t("if(",l,"){",v,"}");var y=e.block();f(y),t.exit("if(",l,"){",y,"}");}function P(e,t,r,n,a){function i(e){switch(e){case Po:case Mo:case Uo:return 2;case Ro:case Wo:case No:return 3;case Lo:case Ho:case qo:return 4;default:return 1}}function o(r,n,a){function i(){t("if(!",c,".buffer){",u,".enableVertexAttribArray(",s,");}");var r,i=a.type;if(r=a.size?t.def(a.size,"||",n):n,t("if(",c,".type!==",i,"||",c,".size!==",r,"||",p.map(function(e){return c+"."+e+"!=="+a[e]}).join("||"),"){",u,".bindBuffer(",yo,",",m,".buffer);",u,".vertexAttribPointer(",[s,r,i,a.normalized,a.stride,a.offset],");",c,".type=",i,";",c,".size=",r,";",p.map(function(e){return c+"."+e+"="+a[e]+";"}).join(""),"}"),K){var o=a.divisor;t("if(",c,".divisor!==",o,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,o],");",c,".divisor=",o,";}");}}function o(){t("if(",c,".buffer){",u,".disableVertexAttribArray(",s,");","}if(",gi.map(function(e,t){return c+"."+e+"!=="+d[t]}).join("||"),"){",u,".vertexAttrib4f(",s,",",d,");",gi.map(function(e,t){return c+"."+e+"="+d[t]+";"}).join(""),"}");}var u=f.gl,s=t.def(r,".location"),c=t.def(f.attributes,"[",s,"]"),l=a.state,m=a.buffer,d=[a.x,a.y,a.z,a.w],p=["buffer","normalized","offset","stride"];l===yi?i():l===xi?o():(t("if(",l,"===",yi,"){"),i(),t("}else{"),o(),t("}"));}var f=e.shared;n.forEach(function(n){var f,u=n.name,s=r.attributes[u];if(s){if(!a(s))return;f=s.append(e,t);}else{if(!a(yf))return;var c=e.scopeAttrib(u);xt.optional(function(){e.assert(t,c+".state","missing attribute "+u);}),f={},Object.keys(new Y).forEach(function(e){f[e]=t.def(c,".",e);});}o(e.link(n),i(n.info.type),f);});}function R(e,r,n,a,i){for(var o,f=e.shared,u=f.gl,s=0;s<a.length;++s){var c,l=a[s],m=l.name,d=l.info.type,p=n.uniforms[m],h=e.link(l),b=h+".location";if(p){if(!i(p))continue;if(Ne(p)){var g=p.value;if(xt.command(null!==g&&"undefined"!=typeof g,'missing uniform "'+m+'"',e.commandStr),d===Xo||d===$o){xt.command("function"==typeof g&&(d===Xo&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||d===$o&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+m,e.commandStr);var v=e.link(g._texture||g.color[0]._texture);r(u,".uniform1i(",b,",",v+".bind());"),r.exit(v,".unbind();");}else if(d===Qo||d===Vo||d===Yo){xt.optional(function(){xt.command(he(g),"invalid matrix for uniform "+m,e.commandStr),xt.command(d===Qo&&4===g.length||d===Vo&&9===g.length||d===Yo&&16===g.length,"invalid length for matrix uniform "+m,e.commandStr);});var y=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),x=2;d===Vo?x=3:d===Yo&&(x=4),r(u,".uniformMatrix",x,"fv(",b,",false,",y,");");}else{switch(d){case Bo:xt.commandType(g,"number","uniform "+m,e.commandStr),o="1f";break;case Po:xt.command(he(g)&&2===g.length,"uniform "+m,e.commandStr),o="2f";break;case Ro:xt.command(he(g)&&3===g.length,"uniform "+m,e.commandStr),o="3f";break;case Lo:xt.command(he(g)&&4===g.length,"uniform "+m,e.commandStr),o="4f";break;case Go:xt.commandType(g,"boolean","uniform "+m,e.commandStr),o="1i";break;case Io:xt.commandType(g,"number","uniform "+m,e.commandStr),o="1i";break;case Uo:xt.command(he(g)&&2===g.length,"uniform "+m,e.commandStr),o="2i";break;case Mo:xt.command(he(g)&&2===g.length,"uniform "+m,e.commandStr),o="2i";break;case No:xt.command(he(g)&&3===g.length,"uniform "+m,e.commandStr),o="3i";break;case Wo:xt.command(he(g)&&3===g.length,"uniform "+m,e.commandStr),o="3i";break;case qo:xt.command(he(g)&&4===g.length,"uniform "+m,e.commandStr),o="4i";break;case Ho:xt.command(he(g)&&4===g.length,"uniform "+m,e.commandStr),o="4i";}r(u,".uniform",o,"(",b,",",he(g)?Array.prototype.slice.call(g):g,");");}continue}c=p.append(e,r);}else{if(!i(yf))continue;c=r.def(f.uniforms,"[",t.id(m),"]");}d===Xo?r("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):d===$o&&r("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),xt.optional(function(){function t(t,n){e.assert(r,t,'bad data or missing for uniform "'+m+'".  '+n);}function n(e){t("typeof "+c+'==="'+e+'"',"invalid type, expected "+e);}function a(r,n){t(f.isArrayLike+"("+c+")&&"+c+".length==="+r,"invalid vector, should have length "+r,e.commandStr);}function i(r){t("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(r===So?"2d":"Cube")+'"',"invalid texture type",e.commandStr);}switch(d){case Io:n("number");break;case Mo:a(2,"number");break;case Wo:a(3,"number");break;case Ho:a(4,"number");break;case Bo:n("number");break;case Po:a(2,"number");break;case Ro:a(3,"number");break;case Lo:a(4,"number");break;case Go:n("boolean");break;case Uo:a(2,"boolean");break;case No:a(3,"boolean");break;case qo:a(4,"boolean");break;case Qo:a(4,"number");break;case Vo:a(9,"number");break;case Yo:a(16,"number");break;case Xo:i(So);break;case $o:i(Ao);}});var w=1;switch(d){case Xo:case $o:var k=r.def(c,"._texture");r(u,".uniform1i(",b,",",k,".bind());"),r.exit(k,".unbind();");continue;case Io:case Go:o="1i";break;case Mo:case Uo:o="2i",w=2;break;case Wo:case No:o="3i",w=3;break;case Ho:case qo:o="4i",w=4;break;case Bo:o="1f";break;case Po:o="2f",w=2;break;case Ro:o="3f",w=3;break;case Lo:o="4f",w=4;break;case Qo:o="Matrix2fv";break;case Vo:o="Matrix3fv";break;case Yo:o="Matrix4fv";}if(r(u,".uniform",o,"(",b,","),"M"===o.charAt(0)){var S=Math.pow(d-Qo+2,2),A=e.global.def("new Float32Array(",S,")");r("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",$(S,function(e){return A+"["+e+"]="+c+"["+e+"]"}),",",A,")");}else r(w>1?$(w,function(e){return c+"["+e+"]"}):c);r(");");}}function L(e,t,r,n){function a(){var a,i=m.elements,o=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(o=r),a=i.append(e,o)):a=o.def(l,".",no),a&&o("if("+a+")"+c+".bindBuffer("+xo+","+a+".buffer.buffer);"),a}function i(){var a,i=m.count,o=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(o=r),a=i.append(e,o),xt.optional(function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(o,a+">=0","missing vertex count");})):(a=o.def(l,".",io),xt.optional(function(){e.assert(o,a+">=0","missing vertex count");})),a}function o(a){var i=m[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(e,r):i.append(e,t):t.def(l,".",a)}function f(){function e(){r(v,".drawElementsInstancedANGLE(",[p,b,y,h+"<<(("+y+"-"+vi+")>>1)",g],");");}function t(){r(v,".drawArraysInstancedANGLE(",[p,h,b,g],");");}d?x?e():(r("if(",d,"){"),e(),r("}else{"),t(),r("}")):t();}function u(){function e(){r(c+".drawElements("+[p,b,y,h+"<<(("+y+"-"+vi+")>>1)"]+");");}function t(){r(c+".drawArrays("+[p,h,b]+");");}d?x?e():(r("if(",d,"){"),e(),r("}else{"),t(),r("}")):t();}var s=e.shared,c=s.gl,l=s.draw,m=n.draw,d=a(),p=o(ao),h=o(oo),b=i();if("number"==typeof b){if(0===b)return}else r("if(",b,"){"),r.exit("}");var g,v;K&&(g=o(fo),v=e.instancing);var y=d+".type",x=m.elements&&Ne(m.elements);K&&("number"!=typeof g||g>=0)?"string"==typeof g?(r("if(",g,">0){"),f(),r("}else if(",g,"<0){"),u(),r("}")):f():u();}function I(e,t,r,n,a){var i=v(),o=i.proc("body",a);return xt.optional(function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr);}),K&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays")),e(i,o,r,n),i.compile().body}function M(e,t,r,n){z(e,t),P(e,t,r,n.attributes,function(){return!0}),R(e,t,r,n.uniforms,function(){return!0}),L(e,t,t,r);}function W(e,t){var r=e.proc("draw",1);z(e,r),j(e,r,t.context),O(e,r,t.framebuffer),C(e,r,t),F(e,r,t.state),B(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)M(e,r,t,t.shader.program);else{var a=e.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(e.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",e.link(function(r){return I(M,e,t,r,1)}),"(",n,");",o,".call(this,a0);"));}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;");}function H(e,t,r,n){function a(){return!0}e.batchId="a1",z(e,t),P(e,t,r,n.attributes,a),R(e,t,r,n.uniforms,a),L(e,t,t,r);}function G(e,t,r,n){function a(e){return e.contextDep&&o||e.propDep}function i(e){return!a(e)}z(e,t);var o=r.contextDep,f=t.def(),u="a0",s="a1",c=t.def();e.shared.props=c,e.batchId=f;var l=e.scope(),m=e.scope();if(t(l.entry,"for(",f,"=0;",f,"<",s,";++",f,"){",c,"=",u,"[",f,"];",m,"}",l.exit),r.needsContext&&j(e,m,r.context),r.needsFramebuffer&&O(e,m,r.framebuffer),F(e,m,r.state,a),r.profile&&a(r.profile)&&B(e,m,r,!1,!0),n)P(e,l,r,n.attributes,i),P(e,m,r,n.attributes,a),R(e,l,r,n.uniforms,i),R(e,m,r,n.uniforms,a),L(e,l,m,r);else{var d=e.global.def("{}"),p=r.shader.progVar.append(e,m),h=m.def(p,".id"),b=m.def(d,"[",h,"]");m(e.shared.gl,".useProgram(",p,".program);","if(!",b,"){",b,"=",d,"[",h,"]=",e.link(function(t){return I(H,e,r,t,2)}),"(",p,");}",b,".call(this,a0[",f,"],",f,");");}}function U(e,t){function r(e){return e.contextDep&&a||e.propDep}var n=e.proc("batch",2);e.batchId="0",z(e,n);var a=!1,i=!0;Object.keys(t.context).forEach(function(e){a=a||t.context[e].propDep;}),a||(j(e,n,t.context),i=!1);var o=t.framebuffer,f=!1;o?(o.propDep?a=f=!0:o.contextDep&&a&&(f=!0),f||O(e,n,o)):O(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(a=!0),C(e,n,t),F(e,n,t.state,function(e){return!r(e)}),t.profile&&r(t.profile)||B(e,n,t,!1,"a1"),t.contextDep=a,t.needsContext=i,t.needsFramebuffer=f;var u=t.shader.progVar;if(u.contextDep&&a||u.propDep)G(e,n,t,null);else{var s=u.append(e,n);if(n(e.shared.gl,".useProgram(",s,".program);"),t.shader.program)G(e,n,t,t.shader.program);else{var c=e.global.def("{}"),l=n.def(s,".id"),m=n.def(c,"[",l,"]");n(e.cond(m).then(m,".call(this,a0,a1);").else(m,"=",c,"[",l,"]=",e.link(function(r){return I(G,e,t,r,2)}),"(",s,");",m,".call(this,a0,a1);"));}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;");}function N(e,r){function n(t){var n=r.shader[t];n&&a.set(i.shader,"."+t,n.append(e,a));}var a=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;j(e,a,r.context),r.framebuffer&&r.framebuffer.append(e,a),Ge(Object.keys(r.state)).forEach(function(t){var n=r.state[t],o=n.append(e,a);he(o)?o.forEach(function(r,n){a.set(e.next[t],"["+n+"]",r);}):a.set(i.next,"."+t,o);}),B(e,a,r,!0,!0),[no,oo,io,fo,ao].forEach(function(t){var n=r.draw[t];n&&a.set(i.draw,"."+t,""+n.append(e,a));}),Object.keys(r.uniforms).forEach(function(n){a.set(i.uniforms,"["+t.id(n)+"]",r.uniforms[n].append(e,a));}),Object.keys(r.attributes).forEach(function(t){var n=r.attributes[t].append(e,a),i=e.scopeAttrib(t);Object.keys(new Y).forEach(function(e){a.set(i,"."+e,n[e]);});}),n(to),n(ro),Object.keys(r.state).length>0&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;")),a("a1(",e.shared.context,",a0,",e.batchId,");");}function q(e){if("object"==typeof e&&!he(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(St.isDynamic(e[t[r]]))return!0;return!1}}function Q(e,t,r){function n(e,t){o.forEach(function(r){var n=a[r];if(St.isDynamic(n)){var i=e.invoke(t,n);t(c,".",r,"=",i,";");}});}var a=t.static[r];if(a&&q(a)){var i=e.global,o=Object.keys(a),f=!1,u=!1,s=!1,c=e.global.def("{}");o.forEach(function(t){var r=a[t];if(St.isDynamic(r)){"function"==typeof r&&(r=a[t]=St.unbox(r));var n=Qe(r,null);f=f||n.thisDep,s=s||n.propDep,u=u||n.contextDep;}else{switch(i(c,".",t,"="),typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(e.link(r));}i(";");}}),t.dynamic[r]=new St.DynamicVariable(_i,{thisDep:f,contextDep:u,propDep:s,ref:c,append:n}),delete t.static[r];}}function V(e,t,r,n,a){var i=v();i.stats=i.link(a),Object.keys(t.static).forEach(function(e){Q(i,t,e);}),vo.forEach(function(t){Q(i,e,t);});var o=D(e,t,r,n,i);return W(i,o),N(i,o),U(i,o),i.compile()}var Y=s.Record,X={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(X.min=rf,X.max=nf);var K=r.angle_instanced_arrays,J=r.webgl_draw_buffers,Z={dirty:!0,profile:p.profile},ee={},te=[],re={},ne={};b(Ei,To),b(Ti,Eo),g(Di,"blendColor",[0,0,0,0]),g(ji,"blendEquationSeparate",[sf,sf]),g(Oi,"blendFuncSeparate",[uf,ff,uf,ff]),b(Ci,jo,!0),g(Fi,"depthFunc",cf),g(zi,"depthRange",[0,1]),g(Bi,"depthMask",!0),g(Pi,Pi,[!0,!0,!0,!0]),b(Ri,_o),g(Li,"cullFace",Zo),g(Ii,Ii,tf),g(Mi,Mi,1),b(Wi,Co),g(Hi,"polygonOffset",[0,0]),b(Gi,Fo),b(Ui,zo),g(Ni,"sampleCoverage",[1,!1]),b(qi,Do),g(Qi,"stencilMask",-1),g(Vi,"stencilFunc",[af,0,-1]),g(Yi,"stencilOpSeparate",[Jo,of,of,of]),g(Xi,"stencilOpSeparate",[Zo,of,of,of]),b($i,Oo),g(Ki,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),g(Ji,Ji,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ae={gl:e,context:m,strings:t,next:ee,current:Z,draw:l,elements:i,buffer:a,shader:c,attributes:s.state,uniforms:u,framebuffer:f,extensions:r,timer:d,isBufferArgs:He},ie={primTypes:Rr,compareFuncs:hf,blendFuncs:df,blendEquations:X,stencilOps:bf,glTypes:yr,orientationType:vf};xt.optional(function(){ae.isArrayLike=he;}),J&&(ie.backBuffer=[Zo],ie.drawBuffer=$(n.maxDrawbuffers,function(e){return 0===e?[0]:$(e,function(e){return mf+e})}));var oe=0;return{next:ee,current:Z,procs:function(){var t=v(),r=t.proc("poll"),a=t.proc("refresh"),i=t.block();r(i),a(i);var o=t.shared,f=o.gl,u=o.next,s=o.current;i(s,".dirty=false;"),O(t,r),O(t,a,null,!0);var c,l=e.getExtension("angle_instanced_arrays");l&&(c=t.link(l));for(var m=0;m<n.maxAttributes;++m){var d=a.def(o.attributes,"[",m,"]"),p=t.cond(d,".buffer");p.then(f,".enableVertexAttribArray(",m,");",f,".bindBuffer(",yo,",",d,".buffer.buffer);",f,".vertexAttribPointer(",m,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(f,".disableVertexAttribArray(",m,");",f,".vertexAttrib4f(",m,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),a(p),l&&a(c,".vertexAttribDivisorANGLE(",m,",",d,".divisor);");}return Object.keys(re).forEach(function(e){var n=re[e],o=i.def(u,".",e),c=t.block();c("if(",o,"){",f,".enable(",n,")}else{",f,".disable(",n,")}",s,".",e,"=",o,";"),a(c),r("if(",o,"!==",s,".",e,"){",c,"}");}),Object.keys(ne).forEach(function(e){var n,o,c=ne[e],l=Z[e],m=t.block();if(m(f,".",c,"("),he(l)){var d=l.length;n=t.global.def(u,".",e),o=t.global.def(s,".",e),m($(d,function(e){return n+"["+e+"]"}),");",$(d,function(e){return o+"["+e+"]="+n+"["+e+"];"}).join("")),r("if(",$(d,function(e){return n+"["+e+"]!=="+o+"["+e+"]"}).join("||"),"){",m,"}");}else n=i.def(u,".",e),o=i.def(s,".",e),m(n,");",s,".",e,"=",n,";"),r("if(",n,"!==",o,"){",m,"}");a(m);}),t.compile()}(),compile:V}}function Ye(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Xe(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}function $e(e){function t(){if(0===N.length)return A&&A.update(),void($=null);$=At.next(t),m();for(var e=N.length-1;e>=0;--e){var r=N[e];r&&r(D,null,0);}g.flush(),A&&A.update();}function r(){!$&&N.length>0&&($=At.next(t));}function n(){$&&(At.cancel(t),$=null);}function a(e){e.preventDefault(),y=!0,n(),q.forEach(function(e){e();});}function i(e){g.getError(),y=!1,x.restore(),P.restore(),F.restore(),R.restore(),L.restore(),I.restore(),A&&A.restore(),M.procs.refresh(),r(),Q.forEach(function(e){e();});}function o(){N.length=0,n(),U&&(U.removeEventListener(Df,a),U.removeEventListener(jf,i)),P.clear(),I.clear(),L.clear(),R.clear(),z.clear(),F.clear(),A&&A.clear(),X.forEach(function(e){e();});}function f(e){function t(e){function t(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n];});}}var r=Ze({},e);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),r}function r(e){var t={},r={};return Object.keys(e).forEach(function(n){var a=e[n];St.isDynamic(a)?r[n]=St.unbox(a,n):t[n]=a;}),{dynamic:r,static:t}}function n(e){for(;p.length<e;)p.push(null);return p}function a(e,t){var r;if(y&&xt.raise("context lost"),"function"==typeof e)return d.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(r=0;r<e;++r)d.call(this,null,t,r);return}if(Array.isArray(e)){for(r=0;r<e.length;++r)d.call(this,e[r],t,r);return}return d.call(this,e,t,0)}if("number"==typeof e){if(e>0)return m.call(this,n(0|e),0|e)}else{if(!Array.isArray(e))return l.call(this,e);if(e.length)return m.call(this,e,e.length)}}xt(!!e,"invalid args to regl({...})"),xt.type(e,"object","invalid args to regl({...})");var i=r(e.context||{}),o=r(e.uniforms||{}),f=r(e.attributes||{}),u=r(t(e)),s={gpuTime:0,cpuTime:0,count:0},c=M.compile(u,f,o,i,s),l=c.draw,m=c.batch,d=c.scope,p=[];return Ze(a,{stats:s})}function u(e,t){var r=0;M.procs.poll();var n=t.color;n&&(g.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=Af),"depth"in t&&(g.clearDepth(+t.depth),r|=_f),"stencil"in t&&(g.clearStencil(0|t.stencil),r|=Ef),xt(!!r,"called regl.clear with no buffer specified"),g.clear(r);}function s(e){if(xt("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)K(Ze({framebuffer:e.framebuffer.faces[t]},e),u);else K(e,u);else u(null,e);}function c(e){function t(){function t(){var e=Xe(N,t);N[e]=N[N.length-1],N.length-=1,N.length<=0&&n();}var r=Xe(N,e);xt(r>=0,"cannot cancel a frame twice"),N[r]=t;}return xt.type(e,"function","regl.frame() callback must be a function"),N.push(e),r(),{cancel:t}}function l(){var e=G.viewport,t=G.scissor_box;e[0]=e[1]=t[0]=t[1]=0,D.viewportWidth=D.framebufferWidth=D.drawingBufferWidth=e[2]=t[2]=g.drawingBufferWidth,D.viewportHeight=D.framebufferHeight=D.drawingBufferHeight=e[3]=t[3]=g.drawingBufferHeight;}function m(){D.tick+=1,D.time=p(),l(),M.procs.poll();}function d(){l(),M.procs.refresh(),A&&A.update();}function p(){return(_t()-_)/1e3}function h(e,t){xt.type(t,"function","listener callback must be a function");var r;switch(e){case"frame":return c(t);case"lost":r=q;break;case"restore":r=Q;break;case"destroy":r=X;break;default:xt.raise("invalid event, must be one of frame,lost,restore,destroy");}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t)return r[e]=r[r.length-1],void r.pop()}}}var b=V(e);if(!b)return null;var g=b.gl,v=g.getContextAttributes(),y=g.isContextLost(),x=Y(g,b);if(!x)return null;var w=W(),k=Ye(),S=x.extensions,A=Sf(g,S),_=_t(),E=g.drawingBufferWidth,T=g.drawingBufferHeight,D={tick:0,time:0,viewportWidth:E,viewportHeight:T,framebufferWidth:E,framebufferHeight:T,drawingBufferWidth:E,drawingBufferHeight:T,pixelRatio:b.pixelRatio},j={},O={elements:null,primitive:4,count:-1,offset:0,instances:-1},C=Zt(g,S),F=me(g,k,b),z=de(g,S,F,k),B=Pe(g,S,C,F,w),P=Re(g,w,k,b),R=Ce(g,S,C,function(){M.procs.poll();},D,k,b),L=Da(g,S,C,k,b),I=ze(g,S,C,R,L,k),M=Ve(g,w,S,C,F,z,R,I,j,B,P,O,D,A,b),H=Le(g,I,M.procs.poll,D,v,S),G=M.next,U=g.canvas,N=[],q=[],Q=[],X=[b.onDestroy],$=null;U&&(U.addEventListener(Df,a,!1),U.addEventListener(jf,i,!1));var K=I.setFBO=f({framebuffer:St.define.call(null,Of,"framebuffer")});d();var J=Ze(f,{clear:s,prop:St.define.bind(null,Of),context:St.define.bind(null,Cf),this:St.define.bind(null,Ff),draw:f({}),buffer:function(e){return F.create(e,Tf,!1,!1)},elements:function(e){return z.create(e,!1)},texture:R.create2D,cube:R.createCube,renderbuffer:L.create,framebuffer:I.create,framebufferCube:I.createCube,attributes:v,frame:c,on:h,limits:C,hasExtension:function(e){return C.extensions.indexOf(e.toLowerCase())>=0},read:H,destroy:o,_gl:g,_refresh:d,poll:function(){m(),A&&A.update();},now:p,stats:k});return b.onDone(null,J),J}var Ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Je=function(e){return Object.prototype.toString.call(e)in Ke},Ze=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},et=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],tt=33071,rt=9728,nt=9984,at=9985,it=9986,ot=9987,ft=5120,ut=5121,st=5122,ct=5123,lt=5124,mt=5125,dt=5126,pt=32819,ht=32820,bt=33635,gt=34042,vt=36193,yt={};yt[ft]=yt[ut]=1,yt[st]=yt[ct]=yt[vt]=yt[bt]=yt[pt]=yt[ht]=2,yt[lt]=yt[mt]=yt[dt]=yt[gt]=4;var xt=Ze(r,{optional:T,raise:t,commandRaise:S,command:A,parameter:a,commandParameter:_,constructor:s,type:o,commandType:E,isTypedArray:i,nni:f,oneOf:u,shaderError:y,linkError:x,callSite:h,saveCommandRef:w,saveDrawInfo:k,framebufferFormat:D,guessCommand:p,texture2D:C,textureCube:F}),wt=0,kt=0,St={DynamicVariable:z,define:L,isDynamic:I,
unbox:M,accessor:R},At={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},_t="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Et=3408,Tt=3410,Dt=3411,jt=3412,Ot=3413,Ct=3414,Ft=3415,zt=33901,Bt=33902,Pt=3379,Rt=3386,Lt=34921,It=36347,Mt=36348,Wt=35661,Ht=35660,Gt=34930,Ut=36349,Nt=34076,qt=34024,Qt=7936,Vt=7937,Yt=7938,Xt=35724,$t=34047,Kt=36063,Jt=34852,Zt=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter($t));var n=1,a=1;return t.webgl_draw_buffers&&(n=e.getParameter(Jt),a=e.getParameter(Kt)),{colorBits:[e.getParameter(Tt),e.getParameter(Dt),e.getParameter(jt),e.getParameter(Ot)],depthBits:e.getParameter(Ct),stencilBits:e.getParameter(Ft),subpixelBits:e.getParameter(Et),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:e.getParameter(zt),lineWidthDims:e.getParameter(Bt),maxViewportDims:e.getParameter(Rt),maxCombinedTextureUnits:e.getParameter(Wt),maxCubeMapSize:e.getParameter(Nt),maxRenderbufferSize:e.getParameter(qt),maxTextureUnits:e.getParameter(Gt),maxTextureSize:e.getParameter(Pt),maxAttributes:e.getParameter(Lt),maxVertexUniforms:e.getParameter(It),maxVertexTextureUnits:e.getParameter(Ht),maxVaryingVectors:e.getParameter(Mt),maxFragmentUniforms:e.getParameter(Ut),glsl:e.getParameter(Xt),renderer:e.getParameter(Vt),vendor:e.getParameter(Qt),version:e.getParameter(Yt)}},er=function(e){return Object.keys(e).map(function(t){return e[t]})},tr=5120,rr=5121,nr=5122,ar=5123,ir=5124,or=5125,fr=5126,ur=$(8,function(){return[]}),sr={alloc:Z,free:ee,allocType:te,freeType:re},cr={shape:ue,flatten:fe},lr=5120,mr=5122,dr=5124,pr=5121,hr=5123,br=5125,gr=5126,vr=5126,yr={int8:lr,int16:mr,int32:dr,uint8:pr,uint16:hr,uint32:br,float:gr,float32:vr},xr=35048,wr=35040,kr={dynamic:xr,stream:wr,static:35044},Sr=cr.flatten,Ar=cr.shape,_r=35044,Er=35040,Tr=5121,Dr=5126,jr=[];jr[5120]=1,jr[5122]=2,jr[5124]=4,jr[5121]=1,jr[5123]=2,jr[5125]=4,jr[5126]=4;var Or=0,Cr=0,Fr=1,zr=1,Br=4,Pr=4,Rr={points:Or,point:Cr,lines:Fr,line:zr,triangles:Br,triangle:Pr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Lr=0,Ir=1,Mr=4,Wr=5120,Hr=5121,Gr=5122,Ur=5123,Nr=5124,qr=5125,Qr=34963,Vr=35040,Yr=35044,Xr=new Float32Array(1),$r=new Uint32Array(Xr.buffer),Kr=5123,Jr=34467,Zr=3553,en=34067,tn=34069,rn=6408,nn=6406,an=6407,on=6409,fn=6410,un=32854,sn=32855,cn=36194,ln=32819,mn=32820,dn=33635,pn=34042,hn=6402,bn=34041,gn=35904,vn=35906,yn=36193,xn=33776,wn=33777,kn=33778,Sn=33779,An=35986,_n=35987,En=34798,Tn=35840,Dn=35841,jn=35842,On=35843,Cn=36196,Fn=5121,zn=5123,Bn=5125,Pn=5126,Rn=10242,Ln=10243,In=10497,Mn=33071,Wn=33648,Hn=10240,Gn=10241,Un=9728,Nn=9729,qn=9984,Qn=9985,Vn=9986,Yn=9987,Xn=33170,$n=4352,Kn=4353,Jn=4354,Zn=34046,ea=3317,ta=37440,ra=37441,na=37443,aa=37444,ia=33984,oa=[qn,Vn,Qn,Yn],fa=[0,on,fn,an,rn],ua={};ua[on]=ua[nn]=ua[hn]=1,ua[bn]=ua[fn]=2,ua[an]=ua[gn]=3,ua[rn]=ua[vn]=4;var sa=be("HTMLCanvasElement"),ca=be("CanvasRenderingContext2D"),la=be("HTMLImageElement"),ma=be("HTMLVideoElement"),da=Object.keys(Ke).concat([sa,ca,la,ma]),pa=[];pa[Fn]=1,pa[Pn]=4,pa[yn]=2,pa[zn]=2,pa[Bn]=4;var ha=[];ha[un]=2,ha[sn]=2,ha[cn]=2,ha[bn]=4,ha[xn]=.5,ha[wn]=.5,ha[kn]=1,ha[Sn]=1,ha[An]=.5,ha[_n]=1,ha[En]=1,ha[Tn]=.5,ha[Dn]=.25,ha[jn]=.5,ha[On]=.25,ha[Cn]=.5;var ba=36161,ga=32854,va=32855,ya=36194,xa=33189,wa=36168,ka=34041,Sa=35907,Aa=34836,_a=34842,Ea=34843,Ta=[];Ta[ga]=2,Ta[va]=2,Ta[ya]=2,Ta[xa]=2,Ta[wa]=1,Ta[ka]=4,Ta[Sa]=4,Ta[Aa]=16,Ta[_a]=8,Ta[Ea]=6;var Da=function(e,t,r,n,a){function i(e){this.id=l++,this.refCount=1,this.renderbuffer=e,this.format=ga,this.width=0,this.height=0,a.profile&&(this.stats={size:0});}function o(t){var r=t.renderbuffer;xt(r,"must not double destroy renderbuffer"),e.bindRenderbuffer(ba,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete m[t.id],n.renderbufferCount--;}function f(t,o){function f(t,n){var i=0,o=0,u=ga;if("object"==typeof t&&t){var m=t;if("shape"in m){var d=m.shape;xt(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),i=0|d[0],o=0|d[1];}else"radius"in m&&(i=o=0|m.radius),"width"in m&&(i=0|m.width),"height"in m&&(o=0|m.height);"format"in m&&(xt.parameter(m.format,s,"invalid renderbuffer format"),u=s[m.format]);}else"number"==typeof t?(i=0|t,o="number"==typeof n?0|n:i):t?xt.raise("invalid arguments to renderbuffer constructor"):i=o=1;if(xt(i>0&&o>0&&i<=r.maxRenderbufferSize&&o<=r.maxRenderbufferSize,"invalid renderbuffer size"),i!==l.width||o!==l.height||u!==l.format)return f.width=l.width=i,f.height=l.height=o,l.format=u,e.bindRenderbuffer(ba,l.renderbuffer),e.renderbufferStorage(ba,u,i,o),a.profile&&(l.stats.size=Fe(l.format,l.width,l.height)),f.format=c[l.format],f}function u(t,n){var i=0|t,o=0|n||i;return i===l.width&&o===l.height?f:(xt(i>0&&o>0&&i<=r.maxRenderbufferSize&&o<=r.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=i,f.height=l.height=o,e.bindRenderbuffer(ba,l.renderbuffer),e.renderbufferStorage(ba,l.format,i,o),a.profile&&(l.stats.size=Fe(l.format,l.width,l.height)),f)}var l=new i(e.createRenderbuffer());return m[l.id]=l,n.renderbufferCount++,f(t,o),f.resize=u,f._reglType="renderbuffer",f._renderbuffer=l,a.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef();},f}function u(){er(m).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(ba,t.renderbuffer),e.renderbufferStorage(ba,t.format,t.width,t.height);}),e.bindRenderbuffer(ba,null);}var s={rgba4:ga,rgb565:ya,"rgb5 a1":va,depth:xa,stencil:wa,"depth stencil":ka};t.ext_srgb&&(s.srgba=Sa),t.ext_color_buffer_half_float&&(s.rgba16f=_a,s.rgb16f=Ea),t.webgl_color_buffer_float&&(s.rgba32f=Aa);var c=[];Object.keys(s).forEach(function(e){var t=s[e];c[t]=e;});var l=0,m={};return i.prototype.decRef=function(){--this.refCount<=0&&o(this);},a.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(m).forEach(function(t){e+=m[t].stats.size;}),e}),{create:f,clear:function(){er(m).forEach(o);},restore:u}},ja=36160,Oa=36161,Ca=3553,Fa=34069,za=36064,Ba=36096,Pa=36128,Ra=33306,La=36053,Ia=36054,Ma=36055,Wa=36057,Ha=36061,Ga=36193,Ua=5121,Na=5126,qa=6408,Qa=6402,Va=[qa],Ya=[];Ya[qa]=4;var Xa=[];Xa[Ua]=1,Xa[Na]=4,Xa[Ga]=2;var $a=32854,Ka=32855,Ja=36194,Za=33189,ei=36168,ti=34041,ri=35907,ni=34836,ai=34842,ii=34843,oi=[$a,Ka,Ja,ri,ai,ii,ni],fi={};fi[La]="complete",fi[Ia]="incomplete attachment",fi[Wa]="incomplete dimensions",fi[Ma]="incomplete, missing attachment",fi[Ha]="unsupported";var ui=5126,si=35632,ci=35633,li=35718,mi=35721,di=6408,pi=5121,hi=3333,bi=5126,gi="xyzw".split(""),vi=5121,yi=1,xi=2,wi=0,ki=1,Si=2,Ai=3,_i=4,Ei="dither",Ti="blend.enable",Di="blend.color",ji="blend.equation",Oi="blend.func",Ci="depth.enable",Fi="depth.func",zi="depth.range",Bi="depth.mask",Pi="colorMask",Ri="cull.enable",Li="cull.face",Ii="frontFace",Mi="lineWidth",Wi="polygonOffset.enable",Hi="polygonOffset.offset",Gi="sample.alpha",Ui="sample.enable",Ni="sample.coverage",qi="stencil.enable",Qi="stencil.mask",Vi="stencil.func",Yi="stencil.opFront",Xi="stencil.opBack",$i="scissor.enable",Ki="scissor.box",Ji="viewport",Zi="profile",eo="framebuffer",to="vert",ro="frag",no="elements",ao="primitive",io="count",oo="offset",fo="instances",uo="Width",so="Height",co=eo+uo,lo=eo+so,mo=Ji+uo,po=Ji+so,ho="drawingBuffer",bo=ho+uo,go=ho+so,vo=[Oi,ji,Vi,Yi,Xi,Ni,Ji,Ki,Hi],yo=34962,xo=34963,wo=35632,ko=35633,So=3553,Ao=34067,_o=2884,Eo=3042,To=3024,Do=2960,jo=2929,Oo=3089,Co=32823,Fo=32926,zo=32928,Bo=5126,Po=35664,Ro=35665,Lo=35666,Io=5124,Mo=35667,Wo=35668,Ho=35669,Go=35670,Uo=35671,No=35672,qo=35673,Qo=35674,Vo=35675,Yo=35676,Xo=35678,$o=35680,Ko=4,Jo=1028,Zo=1029,ef=2304,tf=2305,rf=32775,nf=32776,af=519,of=7680,ff=0,uf=1,sf=32774,cf=513,lf=36160,mf=36064,df={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],hf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},bf={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},gf={frag:wo,vert:ko},vf={cw:ef,ccw:tf},yf=new Ue(!1,!1,!1,function(){}),xf=34918,wf=34919,kf=35007,Sf=function(e,t){function r(){return m.pop()||l.createQueryEXT()}function n(e){m.push(e);}function a(e){var t=r();l.beginQueryEXT(kf,t),d.push(t),s(d.length-1,d.length,e);}function i(){l.endQueryEXT(kf);}function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null;}function f(){return p.pop()||new o}function u(e){p.push(e);}function s(e,t,r){var n=f();n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,h.push(n);}function c(){var e,t,r=d.length;if(0!==r){g.length=Math.max(g.length,r+1),b.length=Math.max(b.length,r+1),b[0]=0,g[0]=0;var a=0;for(e=0,t=0;t<d.length;++t){var i=d[t];l.getQueryObjectEXT(i,wf)?(a+=l.getQueryObjectEXT(i,xf),n(i)):d[e++]=i,b[t+1]=a,g[t+1]=e;}for(d.length=e,e=0,t=0;t<h.length;++t){var o=h[t],f=o.startQueryIndex,s=o.endQueryIndex;o.sum+=b[s]-b[f];var c=g[f],m=g[s];m===c?(o.stats.gpuTime+=o.sum/1e6,u(o)):(o.startQueryIndex=c,o.endQueryIndex=m,h[e++]=o);}h.length=e;}}var l=t.ext_disjoint_timer_query;if(!l)return null;var m=[],d=[],p=[],h=[],b=[],g=[];return{beginQuery:a,endQuery:i,pushScopeStats:s,update:c,getNumPendingQueries:function(){return d.length},clear:function(){m.push.apply(m,d);for(var e=0;e<m.length;e++)l.deleteQueryEXT(m[e]);d.length=0,m.length=0;},restore:function(){d.length=0,m.length=0;}}},Af=16384,_f=256,Ef=1024,Tf=34962,Df="webglcontextlost",jf="webglcontextrestored",Of=1,Cf=2,Ff=3;return $e});

},{}],255:[function(require,module,exports){
'use strict';

module.exports=function(s,t){t||(t={});var i=[],u=[],p=[],h=[],e=t.attributes?{}:null,o=e&&Object.keys(t.attributes);if(e)for(var r=0;r<o.length;r++)e[o[r]]=[];for(var n=s.edges||[],a=0;a<n.length;a++){var l=i.length,b=n[a];if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]]);}u.push(i[l+2],i[l+3],i[l],i[l+1]),p.push(1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3]);}for(var f=s.cells||[],a=0;a<f.length;a++){var l=i.length,b=f[a];if(2===b.length){if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]]);}u.push(i[l+2],i[l+3],i[l],i[l+1]),p.push(1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3]);}else{if(3!==b.length)throw new Error("expected a triangle, got "+b.length+"-sided cell");if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),i.push(s.positions[b[2]]),i.push(s.positions[b[2]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[2]]),e[g].push(t.attributes[g][b[2]]);}u.push(i[l+2],i[l+3],i[l+4],i[l+5],i[l],i[l+1]),p.push(1,-1,1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3]),h.push([l+2,l+3,l+4],[l+2,l+4,l+5]),h.push([l+4,l+5,l],[l+4,l,l+1]);}}return{positions:i,cells:h,nextPositions:u,directions:p,attributes:e}};

},{}],256:[function(require,module,exports){
'use strict';

function check_kb(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||(e=document.createEvent("Event"),e.initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}var doc=document||{}; var use_key_event=!0;try{doc.createEvent("KeyEvents");}catch(e){use_key_event=!1;}var modern=function(e,t){t=t||{};var n=typeOf(e),r=n;"KeyboardEvent"===n&&use_key_event&&(n="KeyEvents",r="KeyEvent");var o=doc.createEvent(n),y="init"+r,a="function"==typeof o[y]?y:"initEvent",c=initSignatures[a],i=[],v={};t.type=e;for(var d=0;d<c.length;++d){var u=c[d],K=t[u];void 0===K&&(K=o[u]),v[u]=!0,i.push(K);}o[a].apply(o,i),"KeyboardEvent"===n&&(o=check_kb(o,t));for(var u in t)v[u]||(o[u]=t[u]);return o}; var legacy=function(e,t){t=t||{};var n=doc.createEventObject();n.type=e;for(var r in t)void 0!==t[r]&&(n[r]=t[r]);return n};module.exports=doc.createEvent?modern:legacy;var initSignatures=require("./init.json"); var types=require("./types.json"); var typeOf=function(){var e={};for(var t in types)for(var n=types[t],r=0;r<n.length;r++)e[n[r]]=t;return function(t){return e[t]||"Event"}}();

},{"./init.json":257,"./types.json":258}],257:[function(require,module,exports){
module.exports={
  "initEvent" : [
    "type",
    "bubbles",
    "cancelable"
  ],
  "initUIEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "detail"
  ],
  "initMouseEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "detail",
    "screenX",
    "screenY",
    "clientX",
    "clientY",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "button",
    "relatedTarget"
  ],
  "initMutationEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "relatedNode",
    "prevValue",
    "newValue",
    "attrName",
    "attrChange"
  ],
  "initKeyboardEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "keyCode",
    "charCode"
  ],
  "initKeyEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "keyCode",
    "charCode"
  ]
}

},{}],258:[function(require,module,exports){
module.exports={
  "MouseEvent" : [
    "click",
    "mousedown",
    "mouseup",
    "mouseover",
    "mousemove",
    "mouseout"
  ],
  "KeyboardEvent" : [
    "keydown",
    "keyup",
    "keypress"
  ],
  "MutationEvent" : [
    "DOMSubtreeModified",
    "DOMNodeInserted",
    "DOMNodeRemoved",
    "DOMNodeRemovedFromDocument",
    "DOMNodeInsertedIntoDocument",
    "DOMAttrModified",
    "DOMCharacterDataModified"
  ],
  "HTMLEvents" : [
    "load",
    "unload",
    "abort",
    "error",
    "select",
    "change",
    "submit",
    "reset",
    "focus",
    "blur",
    "resize",
    "scroll"
  ],
  "UIEvent" : [
    "DOMFocusIn",
    "DOMFocusOut",
    "DOMActivate"
  ]
}

},{}],259:[function(require,module,exports){
'use strict';

function getPropertyInPX(e,t){var r=parseUnit(getComputedStyle(e).getPropertyValue(t));return r[0]*toPX(r[1],e)}function getSizeBrutal(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var n=getPropertyInPX(r,"font-size")/128;return t.removeChild(r),n}function toPX(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return getSizeBrutal(e,t);case"em":return getPropertyInPX(t,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return PIXELS_PER_INCH;case"cm":return PIXELS_PER_INCH/2.54;case"mm":return PIXELS_PER_INCH/25.4;case"pt":return PIXELS_PER_INCH/72;case"pc":return PIXELS_PER_INCH/6}return 1}var parseUnit=require("parse-unit");module.exports=toPX;var PIXELS_PER_INCH=96;

},{"parse-unit":236}],260:[function(require,module,exports){
'use strict';

function attach(e){function t(e){var t=e.targetTouches[0];n(t);}function n(e){offset(e,r,s),i.emit("move",e);}function o(){r.removeEventListener("mousemove",n,!1),r.removeEventListener("mousedown",n,!1),r.removeEventListener("touchmove",t,!1),r.removeEventListener("touchstart",t,!1);}e=e||{};var r=e.element||window,i=new EventEmitter,s=e.position||[0,0];return e.touchstart!==!1&&(r.addEventListener("mousedown",n,!1),r.addEventListener("touchstart",t,!1)),r.addEventListener("mousemove",n,!1),r.addEventListener("touchmove",t,!1),i.position=s,i.dispose=o,i}var offset=require("mouse-event-offset"); var EventEmitter=require("events").EventEmitter;module.exports=function(e){return attach(e).position},module.exports.emitter=function(e){return attach(e)};

},{"events":56,"mouse-event-offset":231}],261:[function(require,module,exports){
'use strict';

function unindex(e,n,r){e.positions&&e.cells&&(r=n,n=e.cells,e=e.positions);var l=e.length?e[0].length:0,t=n.length?n[0].length:0;if(r=r||new Float32Array(n.length*t*l),3===t&&2===l)for(var o=0,a=0,g=n.length;o<g;o+=1){var h=n[o];r[a++]=e[h[0]][0],r[a++]=e[h[0]][1],r[a++]=e[h[1]][0],r[a++]=e[h[1]][1],r[a++]=e[h[2]][0],r[a++]=e[h[2]][1];}else if(3===t&&3===l)for(var o=0,a=0,g=n.length;o<g;o+=1){var h=n[o];r[a++]=e[h[0]][0],r[a++]=e[h[0]][1],r[a++]=e[h[0]][2],r[a++]=e[h[1]][0],r[a++]=e[h[1]][1],r[a++]=e[h[1]][2],r[a++]=e[h[2]][0],r[a++]=e[h[2]][1],r[a++]=e[h[2]][2];}else for(var o=0,a=0,g=n.length;o<g;o+=1)for(var h=n[o],i=0;i<h.length;i++)for(var s=h[i],f=0;f<l;f++)r[a++]=e[s][f];return r}module.exports=unindex;

},{}],262:[function(require,module,exports){
(function (global){
'use strict';

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.WebVRPolyfill=e();}}(function(){return function e(t,i,M){function s(r,N){if(!i[r]){if(!t[r]){var n="function"==typeof require&&require;if(!N&&n)return n(r,!0);if(A)return A(r,!0);var D=new Error("Cannot find module '"+r+"'");throw D.code="MODULE_NOT_FOUND",D}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return s(i?i:e)},u,u.exports,e,t,i,M);}return i[r].exports}for(var A="function"==typeof require&&require,r=0;r<M.length;r++)s(M[r]);return s}({1:[function(e,t,i){"use strict";function M(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1;}function A(){this._events=new M,this._eventsCount=0;}var r=Object.prototype.hasOwnProperty,N="~";Object.create&&(M.prototype=Object.create(null),(new M).__proto__||(N=!1)),A.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)r.call(e,t)&&i.push(N?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},A.prototype.listeners=function(e,t){var i=N?N+e:e,M=this._events[i];if(t)return!!M;if(!M)return[];if(M.fn)return[M.fn];for(var s=0,A=M.length,r=new Array(A);s<A;s++)r[s]=M[s].fn;return r},A.prototype.emit=function(e,t,i,M,s,A){var r=N?N+e:e;if(!this._events[r])return!1;var n,D,u=this._events[r],a=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),a){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,M),!0;case 5:return u.fn.call(u.context,t,i,M,s),!0;case 6:return u.fn.call(u.context,t,i,M,s,A),!0}for(D=1,n=new Array(a-1);D<a;D++)n[D-1]=arguments[D];u.fn.apply(u.context,n);}else{var o,g=u.length;for(D=0;D<g;D++)switch(u[D].once&&this.removeListener(e,u[D].fn,void 0,!0),a){case 1:u[D].fn.call(u[D].context);break;case 2:u[D].fn.call(u[D].context,t);break;case 3:u[D].fn.call(u[D].context,t,i);break;case 4:u[D].fn.call(u[D].context,t,i,M);break;default:if(!n)for(o=1,n=new Array(a-1);o<a;o++)n[o-1]=arguments[o];u[D].fn.apply(u[D].context,n);}}return!0},A.prototype.on=function(e,t,i){var M=new s(t,i||this),A=N?N+e:e;return this._events[A]?this._events[A].fn?this._events[A]=[this._events[A],M]:this._events[A].push(M):(this._events[A]=M,this._eventsCount++),this},A.prototype.once=function(e,t,i){var M=new s(t,i||this,!0),A=N?N+e:e;return this._events[A]?this._events[A].fn?this._events[A]=[this._events[A],M]:this._events[A].push(M):(this._events[A]=M,this._eventsCount++),this},A.prototype.removeListener=function(e,t,i,s){var A=N?N+e:e;if(!this._events[A])return this;if(!t)return 0===--this._eventsCount?this._events=new M:delete this._events[A],this;var r=this._events[A];if(r.fn)r.fn!==t||s&&!r.once||i&&r.context!==i||(0===--this._eventsCount?this._events=new M:delete this._events[A]);else{for(var n=0,D=[],u=r.length;n<u;n++)(r[n].fn!==t||s&&!r[n].once||i&&r[n].context!==i)&&D.push(r[n]);D.length?this._events[A]=1===D.length?D[0]:D:0===--this._eventsCount?this._events=new M:delete this._events[A];}return this},A.prototype.removeAllListeners=function(e){var t;return e?(t=N?N+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new M:delete this._events[t])):(this._events=new M,this._eventsCount=0),this},A.prototype.off=A.prototype.removeListener,A.prototype.addListener=A.prototype.on,A.prototype.setMaxListeners=function(){return this},A.prefixed=N,A.EventEmitter=A,"undefined"!=typeof t&&(t.exports=A);},{}],2:[function(e,t,i){"use strict";function M(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var M=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==M.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e;}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}}var A=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=s()?Object.assign:function(e,t){for(var i,s,N=M(e),n=1;n<arguments.length;n++){i=Object(arguments[n]);for(var D in i)A.call(i,D)&&(N[D]=i[D]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(i);for(var u=0;u<s.length;u++)r.call(i,s[u])&&(N[s[u]]=i[s[u]]);}}return N};},{}],3:[function(e,t,i){function M(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null;}function s(){this.isPolyfilled=!0,this.displayId=u++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new D;}function A(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName";}function r(){}function N(){}var n=e("./util.js"),D=e("./wakelock.js"),u=1e3,a=!1,o=[0,0,.5,1],g=[.5,0,.5,1];s.prototype.getFrameData=function(e){return n.frameDataFromPose(e,this.getPose(),this)},s.prototype.getPose=function(){return this.getImmediatePose()},s.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},s.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},s.prototype.wrapForFullscreen=function(e){function t(){if(s.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.fullscreenElement_.setAttribute("style",e.join("; ")+";");}}if(n.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var i=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",i.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper");}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var M=this.fullscreenElement_.parentElement;M.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),M.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var s=this;return t(),this.fullscreenWrapper_},s.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},s.prototype.requestPresent=function(e){var t=this.isPresenting,i=this;return e instanceof Array||(a||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),a=!0),e=[e]),new Promise(function(M,s){function A(){var e=n.getFullscreenElement();i.isPresenting=L===e,i.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message);}),i.waitingForPresent_=!1,i.beginPresent_(),M()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),i.removeFullscreenWrapper(),i.wakelock_.release(),i.endPresent_(),i.removeFullscreenListeners_()),i.fireVRDisplayPresentChange_();}function r(){i.waitingForPresent_&&(i.removeFullscreenWrapper(),i.removeFullscreenListeners_(),i.wakelock_.release(),i.waitingForPresent_=!1,i.isPresenting=!1,s(new Error("Unable to present.")));}if(!i.capabilities.canPresent)return void s(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>i.capabilities.maxLayers)return void s(new Error("Invalid number of layers."));var N=e[0];if(!N.source)return void M();var D=N.leftBounds||o,u=N.rightBounds||g;if(t){var a=i.layer_;a.source!==N.source&&(a.source=N.source);for(var j=0;j<4;j++)a.leftBounds[j]!==D[j]&&(a.leftBounds[j]=D[j]),a.rightBounds[j]!==u[j]&&(a.rightBounds[j]=u[j]);return void M()}if(i.layer_={predistorted:N.predistorted,source:N.source,leftBounds:D.slice(0),rightBounds:u.slice(0)},i.waitingForPresent_=!1,i.layer_&&i.layer_.source){var L=i.wrapForFullscreen(i.layer_.source);i.addFullscreenListeners_(L,A,r),n.requestFullscreen(L)?(i.wakelock_.request(),i.waitingForPresent_=!0):n.isIOS()&&(i.wakelock_.request(),i.isPresenting=!0,i.beginPresent_(),i.fireVRDisplayPresentChange_(),M());}i.waitingForPresent_||n.isIOS()||(n.exitFullscreen(),s(new Error("Unable to present.")));})},s.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(i,M){e?(!n.exitFullscreen()&&n.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),i()):M(new Error("Was not presenting to VRDisplay."));})},s.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},s.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e);},s.prototype.addFullscreenListeners_=function(e,t,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=i,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),i&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",i,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",i,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",i,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",i,!1));},s.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1);}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",i,!1),e.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),e.removeEventListener("msfullscreenerror",i,!1);}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null;}},s.prototype.beginPresent_=function(){},s.prototype.endPresent_=function(){},s.prototype.submitFrame=function(e){},s.prototype.getEyeParameters=function(e){return null},r.prototype=new A,N.prototype=new A,t.exports.VRFrameData=M,t.exports.VRDisplay=s,t.exports.VRDevice=A,t.exports.HMDVRDevice=r,t.exports.PositionSensorVRDevice=N;},{"./util.js":22,"./wakelock.js":24}],4:[function(e,t,i){function M(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,A.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=A.linkProgram(e,N,n,this.attribs),this.uniforms=A.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new s(e));}var s=e("./cardboard-ui.js"),A=e("./util.js"),r=e("./deps/wglu-preserve-state.js"),N=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");M.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy();},M.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];r(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor);}),this.cardboardUI&&this.cardboardUI.onResize();},M.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,i=this.gl;A.isIOS()||(t.width=A.getScreenWidth()*this.bufferScale,t.height=A.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(i){e.bufferWidth=i,e.realCanvasWidth.set.call(t,i),e.onResize();}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(i){e.bufferHeight=i,e.realCanvasHeight.set.call(t,i),e.onResize();}})),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,M){e.lastBoundFramebuffer=M?M:e.framebuffer,e.realBindFramebuffer.call(i,t,e.lastBoundFramebuffer);},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!0;break;case i.DEPTH_TEST:e.depthTest=!0;break;case i.BLEND:e.blend=!0;break;case i.SCISSOR_TEST:e.scissorTest=!0;break;case i.STENCIL_TEST:e.stencilTest=!0;}e.realEnable.call(i,t);},i.disable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!1;break;case i.DEPTH_TEST:e.depthTest=!1;break;case i.BLEND:e.blend=!1;break;case i.SCISSOR_TEST:e.scissorTest=!1;break;case i.STENCIL_TEST:e.stencilTest=!1;}e.realDisable.call(i,t);},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(t,M,s,A){e.colorMask[0]=t,e.colorMask[1]=M,e.colorMask[2]=s,e.colorMask[3]=A,e.realColorMask.call(i,t,M,s,A);},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(t,M,s,A){e.clearColor[0]=t,e.clearColor[1]=M,e.clearColor[2]=s,e.clearColor[3]=A,e.realClearColor.call(i,t,M,s,A);},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(t,M,s,A){e.viewport[0]=t,e.viewport[1]=M,e.viewport[2]=s,e.viewport[3]=A,e.realViewport.call(i,t,M,s,A);},this.isPatched=!0,A.safariCssSizeWorkaround(t);}},M.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;A.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){A.safariCssSizeWorkaround(t);},1);}},M.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3];},M.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),r(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||A.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor);}),A.isIOS()){var M=e.canvas;M.width==t.bufferWidth&&M.height==t.bufferHeight||(t.bufferWidth=M.width,t.bufferHeight=M.height,t.onResize());}},M.prototype.updateDeviceInfo=function(e){var t=this.gl,i=this,M=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];r(t,M,function(t){var M=i.computeMeshVertices_(i.meshWidth,i.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,M,t.STATIC_DRAW),!i.indexCount){var s=i.computeMeshIndices_(i.meshWidth,i.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW),i.indexCount=s.length;}});},M.prototype.computeMeshVertices_=function(e,t,i){for(var M=new Float32Array(2*e*t*5),s=i.getLeftEyeVisibleTanAngles(),r=i.getLeftEyeNoLensTanAngles(),N=i.getLeftEyeVisibleScreenRect(r),n=0,D=0;D<2;D++){for(var u=0;u<t;u++)for(var a=0;a<e;a++,n++){var o=a/(e-1),g=u/(t-1),j=o,L=g,I=A.lerp(s[0],s[2],o),c=A.lerp(s[3],s[1],g),T=Math.sqrt(I*I+c*c),E=i.distortion.distortInverse(T),w=I*E/T,y=c*E/T;o=(w-r[0])/(r[2]-r[0]),g=(y-r[3])/(r[1]-r[3]);i.device.widthMeters/i.device.heightMeters;o=2*(N.x+o*N.width-.5),g=2*(N.y+g*N.height-.5),M[5*n+0]=o,M[5*n+1]=g,M[5*n+2]=j,M[5*n+3]=L,M[5*n+4]=D;}var l=s[2]-s[0];s[0]=-(l+s[0]),s[2]=l-s[2],l=r[2]-r[0],r[0]=-(l+r[0]),r[2]=l-r[2],N.x=1-(N.x+N.width);}return M},M.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),M=e/2,s=t/2,A=0,r=0,N=0;N<2;N++)for(var n=0;n<t;n++)for(var D=0;D<e;D++,A++)0!=D&&0!=n&&(D<=M==n<=s?(i[r++]=A,i[r++]=A-e-1,i[r++]=A-e,i[r++]=A-e-1,i[r++]=A,i[r++]=A-1):(i[r++]=A-1,i[r++]=A-e,i[r++]=A,i[r++]=A-e,i[r++]=A-1,i[r++]=A-e-1));return i},M.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e);}),i},t.exports=M;},{"./cardboard-ui.js":5,"./deps/wglu-preserve-state.js":7,"./util.js":22}],5:[function(e,t,i){function M(e){this.gl=e,this.attribs={position:0},this.program=s.linkProgram(e,r,N,this.attribs),this.uniforms=s.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize();}var s=e("./util.js"),A=e("./deps/wglu-preserve-state.js"),r=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),N=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),n=Math.PI/180,D=60,u=12,a=20,o=1,g=.75,j=.3125,L=4,I=28,c=1.5;M.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer);},M.prototype.listen=function(e,t){var i=this.gl.canvas;this.listener=function(M){var s=i.clientWidth/2,A=I*c;M.clientX>s-A&&M.clientX<s+A&&M.clientY>i.clientHeight-A?e(M):M.clientX<A&&M.clientY<A&&t(M);},i.addEventListener("click",this.listener,!1);},M.prototype.onResize=function(){var e=this.gl,t=this,i=[e.ARRAY_BUFFER_BINDING];A(e,i,function(e){function i(e,t){var i=(90-e)*n,M=Math.cos(i),s=Math.sin(i);A.push(j*M*w+r,j*s*w+w),A.push(t*M*w+r,t*s*w+w);}function M(t,i){A.push(y+t,e.drawingBufferHeight-y-i);}var A=[],r=e.drawingBufferWidth/2,N=e.drawingBufferWidth/(screen.width*window.devicePixelRatio);s.isIOS()||(N*=window.devicePixelRatio);var T=L*N/2,E=I*c*N,w=I*N/2,y=(I*c-I)*N;A.push(r-T,E),A.push(r-T,e.drawingBufferHeight),A.push(r+T,E),A.push(r+T,e.drawingBufferHeight),t.gearOffset=A.length/2;for(var l=0;l<=6;l++){var z=l*D;i(z,o),i(z+u,o),i(z+a,g),i(z+(D-a),g),i(z+(D-u),o);}t.gearVertexCount=A.length/2-t.gearOffset,t.arrowOffset=A.length/2;var h=T/Math.sin(45*n);M(0,w),M(w,0),M(w+h,h),M(h,w+h),M(h,w-h),M(0,w),M(w,2*w),M(w+h,2*w-h),M(h,w-h),M(0,w),M(h,w-T),M(I*N,w-T),M(h,w+T),M(I*N,w+T),t.arrowVertexCount=A.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(A),e.STATIC_DRAW);});},M.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];A(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState();});},M.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),s.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount);},t.exports=M;},{"./deps/wglu-preserve-state.js":7,"./util.js":22}],6:[function(e,t,i){function M(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=WebVRConfig.BUFFER_SCALE,this.poseSensor_=new n,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new N(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new r(this.dpdb_.getDeviceParams()),this.viewerSelector_=new u,this.viewerSelector_.on("change",this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new D),o.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this));}var s=e("./cardboard-distorter.js"),A=e("./cardboard-ui.js"),r=e("./device-info.js"),N=e("./dpdb/dpdb.js"),n=e("./sensor-fusion/fusion-pose-sensor.js"),D=e("./rotate-instructions.js"),u=e("./viewer-selector.js"),a=e("./base.js").VRDisplay,o=e("./util.js"),g={LEFT:"left",RIGHT:"right"};M.prototype=new a,M.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},M.prototype.resetPose=function(){this.poseSensor_.resetPose();},M.prototype.getEyeParameters=function(e){var t,i=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==g.LEFT)i[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=g.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye();}return{fieldOfView:t,offset:i,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},M.prototype.onDeviceParamsUpdated_=function(e){o.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_);},M.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds);},M.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=o.getScreenWidth()*this.bufferScale_,e.canvas.height=o.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new A(e)):(this.distorter_=new s(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault();}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault();}.bind(this)),this.rotateInstructions_&&(o.isLandscapeMode()&&o.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_());},M.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler);},M.prototype.submitFrame=function(e){if(this.distorter_)this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render();}},M.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_();},M.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),i=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0"];
t.canvas.setAttribute("style",i.join("; ")+";"),o.safariCssSizeWorkaround(t.canvas);}},M.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_();},M.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e);},t.exports=M;},{"./base.js":3,"./cardboard-distorter.js":4,"./cardboard-ui.js":5,"./device-info.js":8,"./dpdb/dpdb.js":12,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],7:[function(e,t,i){function M(e,t,i){if(!t)return void i(e);for(var M=[],s=null,A=0;A<t.length;++A){var r=t[A];switch(r){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var N=t[++A];if(N<e.TEXTURE0||N>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),M.push(null,null);break}s||(s=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(N),M.push(e.getParameter(r),null);break;case e.ACTIVE_TEXTURE:s=e.getParameter(e.ACTIVE_TEXTURE),M.push(null);break;default:M.push(e.getParameter(r));}}i(e);for(var A=0;A<t.length;++A){var r=t[A],n=M[A];switch(r){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,n);break;case e.COLOR_CLEAR_VALUE:e.clearColor(n[0],n[1],n[2],n[3]);break;case e.COLOR_WRITEMASK:e.colorMask(n[0],n[1],n[2],n[3]);break;case e.CURRENT_PROGRAM:e.useProgram(n);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,n);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,n);break;case e.TEXTURE_BINDING_2D:var N=t[++A];if(N<e.TEXTURE0||N>e.TEXTURE31)break;e.activeTexture(N),e.bindTexture(e.TEXTURE_2D,n);break;case e.TEXTURE_BINDING_CUBE_MAP:var N=t[++A];if(N<e.TEXTURE0||N>e.TEXTURE31)break;e.activeTexture(N),e.bindTexture(e.TEXTURE_CUBE_MAP,n);break;case e.VIEWPORT:e.viewport(n[0],n[1],n[2],n[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:n?e.enable(r):e.disable(r);break;default:console.log("No GL restore behavior for 0x"+r.toString(16));}s&&e.activeTexture(s);}}t.exports=M;},{}],8:[function(e,t,i){function M(e){this.width=e.width||n.getScreenWidth(),this.height=e.height||n.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters;}function s(e){this.viewer=a.CardboardV2,this.updateDeviceParams(e),this.distortion=new r(this.viewer.distortionCoefficients);}function A(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients;}var r=e("./distortion/distortion.js"),N=e("./math-util.js"),n=e("./util.js"),D=new M({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),u=new M({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),a={CardboardV1:new A({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new A({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};s.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device;},s.prototype.getDevice=function(){return this.device},s.prototype.setViewer=function(e){this.viewer=e,this.distortion=new r(this.viewer.distortionCoefficients);},s.prototype.determineDevice_=function(e){if(!e)return n.isIOS()?(console.warn("Using fallback iOS device measurements."),u):(console.warn("Using fallback Android device measurements."),D);var t=.0254,i=t/e.xdpi,s=t/e.ydpi,A=n.getScreenWidth(),r=n.getScreenHeight();return new M({widthMeters:i*A,heightMeters:s*r,bevelMeters:.001*e.bevelMm})},s.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,M=e.screenLensDistance,s=(t.widthMeters-e.interLensDistance)/2,A=e.interLensDistance/2,r=e.baselineLensDistance-t.bevelMeters,n=t.heightMeters-r,D=N.radToDeg*Math.atan(i.distort(s/M)),u=N.radToDeg*Math.atan(i.distort(A/M)),a=N.radToDeg*Math.atan(i.distort(r/M)),o=N.radToDeg*Math.atan(i.distort(n/M));return{leftDegrees:Math.min(D,e.fov),rightDegrees:Math.min(u,e.fov),downDegrees:Math.min(a,e.fov),upDegrees:Math.min(o,e.fov)}},s.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,M=Math.tan(-N.degToRad*e.fov),s=Math.tan(N.degToRad*e.fov),A=Math.tan(N.degToRad*e.fov),r=Math.tan(-N.degToRad*e.fov),n=t.widthMeters/4,D=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-D,a=e.interLensDistance/2-n,o=-u,g=e.screenLensDistance,j=i.distort((a-n)/g),L=i.distort((o+D)/g),I=i.distort((a+n)/g),c=i.distort((o-D)/g),T=new Float32Array(4);return T[0]=Math.max(M,j),T[1]=Math.min(s,L),T[2]=Math.min(A,I),T[3]=Math.max(r,c),T},s.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,M=new Float32Array(4),s=i.distortInverse(Math.tan(-N.degToRad*e.fov)),A=i.distortInverse(Math.tan(N.degToRad*e.fov)),r=i.distortInverse(Math.tan(N.degToRad*e.fov)),n=i.distortInverse(Math.tan(-N.degToRad*e.fov)),D=t.widthMeters/4,u=t.heightMeters/2,a=e.baselineLensDistance-t.bevelMeters-u,o=e.interLensDistance/2-D,g=-a,j=e.screenLensDistance,L=(o-D)/j,I=(g+u)/j,c=(o+D)/j,T=(g-u)/j;return M[0]=Math.max(s,L),M[1]=Math.min(A,I),M[2]=Math.min(r,c),M[3]=Math.max(n,T),M},s.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,M=t.screenLensDistance,s=(i.widthMeters-t.interLensDistance)/2,A=t.baselineLensDistance-i.bevelMeters,r=(e[0]*M+s)/i.widthMeters,N=(e[1]*M+A)/i.heightMeters,n=(e[2]*M+s)/i.widthMeters,D=(e[3]*M+A)/i.heightMeters;return{x:r,y:D,width:n-r,height:N-D}},s.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},s.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},s.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:N.radToDeg*Math.atan(e.outerDist),rightDegrees:N.radToDeg*Math.atan(e.innerDist),downDegrees:N.radToDeg*Math.atan(e.bottomDist),upDegrees:N.radToDeg*Math.atan(e.topDist)}},s.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,M=t.screenLensDistance,s=i.widthMeters/M,A=i.heightMeters/M,r=i.width/s,N=i.height/A,n=Math.round((e.eyePosX-e.outerDist)*r),D=Math.round((e.eyePosY-e.bottomDist)*N);return{x:n,y:D,width:Math.round((e.eyePosX+e.innerDist)*r)-n,height:Math.round((e.eyePosY+e.topDist)*N)-D}},s.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,M=e.screenLensDistance,s=e.interLensDistance/2/M,A=t.widthMeters/M,r=t.heightMeters/M,n=A/2-s,D=(e.baselineLensDistance-t.bevelMeters)/M,u=e.fov,a=i.distortInverse(Math.tan(N.degToRad*u)),o=Math.min(n,a),g=Math.min(s,a),j=Math.min(D,a),L=Math.min(r-D,a);return{outerDist:o,innerDist:g,topDist:L,bottomDist:j,eyePosX:n,eyePosY:D}},s.Viewers=a,t.exports=s;},{"./distortion/distortion.js":10,"./math-util.js":14,"./util.js":22}],9:[function(e,t,i){function M(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)";}function s(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)";}var A=(e("./base.js").VRDisplay,e("./base.js").HMDVRDevice),r=e("./base.js").PositionSensorVRDevice;M.prototype=new A,M.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},M.prototype.setFieldOfView=function(e,t,i,M){},s.prototype=new r,s.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},s.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=M,t.exports.VRDisplayPositionSensorDevice=s;},{"./base.js":3}],10:[function(e,t,i){function M(e){this.coefficients=e;}M.prototype.distortInverse=function(e){for(var t=0,i=1,M=e-this.distort(t);Math.abs(i-t)>1e-4;){var s=e-this.distort(i),A=i-s*((i-t)/(s-M));t=i,i=A,M=s;}return i},M.prototype.distort=function(e){for(var t=e*e,i=0,M=0;M<this.coefficients.length;M++)i=t*(i+this.coefficients[M]);return(i+1)*e},M.prototype.solveLinear_=function(e,t){for(var i=e.length,M=0;M<i-1;++M)for(var s=M+1;s<i;++s){for(var A=e[M][s]/e[M][M],r=M+1;r<i;++r)e[r][s]-=A*e[r][M];t[s]-=A*t[M];}for(var N=new Array(i),M=i-1;M>=0;--M){for(var n=t[M],r=M+1;r<i;++r)n-=e[r][M]*N[r];N[M]=n/e[M][M];}return N},M.prototype.solveLeastSquares_=function(e,t){var i,M,s,A,r=e.length,N=e[0].length;if(r!=t.Length)throw new Error("Matrix / vector dimension mismatch");var n=new Array(N);for(s=0;s<N;++s)for(n[s]=new Array(N),M=0;M<N;++M){for(A=0,i=0;i<r;++i)A+=e[M][i]*e[s][i];n[s][M]=A;}var D=new Array(N);for(M=0;M<N;++M){for(A=0,i=0;i<r;++i)A+=e[M][i]*t[i];D[M]=A;}return this.solveLinear_(n,D)},M.prototype.approximateInverse=function(e,t){e=e||1,t=t||100;var i,s,A=6,r=new Array(A);for(s=0;s<A;++s)r[s]=new Array(t);var N=new Array(t);for(i=0;i<t;++i){var n=e*(i+1)/t,D=this.distort(n),u=D;for(s=0;s<A;++s)u*=D*D,r[s][i]=u;N[i]=n-D;}var a=this.solveLeastSquares_(r,N);return new M(a)},t.exports=M;},{}],11:[function(e,t,i){var M={format:1,last_updated:"2016-01-20T00:18:35Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 "}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 "}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3}]};t.exports=M;},{}],12:[function(e,t,i){function M(e,t){if(this.dpdb=A,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,M=this;i.open("GET",N,!0),i.addEventListener("load",function(){M.loading=!1,i.status>=200&&i.status<=299?(M.dpdb=JSON.parse(i.response),M.recalculateDeviceParams_()):console.error("Error loading online DPDB!");}),i.send();}}function s(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm;}var A=e("./dpdb-cache.js"),r=e("../util.js"),N="https://storage.googleapis.com/cardboard-dpdb/dpdb.json";M.prototype.getDeviceParams=function(){return this.deviceParams},M.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.");},M.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,i=r.getScreenWidth(),M=r.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var A=0;A<e.devices.length;A++){var N=e.devices[A];if(N.rules)if("ios"==N.type||"android"==N.type){if(r.isIOS()==("ios"==N.type)){for(var n=!1,D=0;D<N.rules.length;D++){var u=N.rules[D];if(this.matchRule_(u,t,i,M)){n=!0;break}}if(n){var a=N.dpi[0]||N.dpi,o=N.dpi[1]||N.dpi;return new s({xdpi:a,ydpi:o,bevelMm:N.bw})}}}else console.warn("Device["+A+"] has invalid type.");else console.warn("Device["+A+"] has no rules section.");}return console.warn("No DPDB device match."),null},M.prototype.matchRule_=function(e,t,i,M){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var s=e.res[0],A=e.res[1];if(Math.min(i,M)!=Math.min(s,A)||Math.max(i,M)!=Math.max(s,A))return!1}return!0},t.exports=M;},{"../util.js":22,"./dpdb-cache.js":11}],13:[function(e,t,i){var M=e("./util.js"),s=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=M.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new s;}:new s;},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(e,t,i){var M=window.MathUtil||{};M.degToRad=Math.PI/180,M.radToDeg=180/Math.PI,M.Vector2=function(e,t){this.x=e||0,this.y=t||0;},M.Vector2.prototype={constructor:M.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},M.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0;},M.Vector3.prototype={constructor:M.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t);}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e;},applyQuaternion:function(e){var t=this.x,i=this.y,M=this.z,s=e.x,A=e.y,r=e.z,N=e.w,n=N*t+A*M-r*i,D=N*i+r*t-s*M,u=N*M+s*i-A*t,a=-s*t-A*i-r*M;return this.x=n*N+a*-s+D*-r-u*-A,this.y=D*N+a*-A+u*-s-n*-r,this.z=u*N+a*-r+n*-A-D*-s,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,M=e.y,s=e.z,A=t.x,r=t.y,N=t.z;return this.x=M*N-s*r,this.y=s*A-i*N,this.z=i*r-M*A,this}},M.Quaternion=function(e,t,i,M){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==M?M:1;},M.Quaternion.prototype={constructor:M.Quaternion,set:function(e,t,i,M){return this.x=e,this.y=t,this.z=i,this.w=M,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var M=Math.cos(e/2),s=Math.cos(t/2),A=Math.cos(i/2),r=Math.sin(e/2),N=Math.sin(t/2),n=Math.sin(i/2);return this.x=r*s*A+M*N*n,this.y=M*N*A-r*s*n,this.z=M*s*n+r*N*A,this.w=M*s*A-r*N*n,this},setFromEulerYXZ:function(e,t,i){var M=Math.cos(e/2),s=Math.cos(t/2),A=Math.cos(i/2),r=Math.sin(e/2),N=Math.sin(t/2),n=Math.sin(i/2);return this.x=r*s*A+M*N*n,this.y=M*N*A-r*s*n,this.z=M*s*n-r*N*A,this.w=M*s*A+r*N*n,this},setFromAxisAngle:function(e,t){var i=t/2,M=Math.sin(i);return this.x=e.x*M,this.y=e.y*M,this.z=e.z*M,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,M=e.y,s=e.z,A=e.w,r=t.x,N=t.y,n=t.z,D=t.w;return this.x=i*D+A*r+M*n-s*N,this.y=M*D+A*N+s*r-i*n,this.z=s*D+A*n+i*N-M*r,this.w=A*D-i*r-M*N-s*n,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,M=this.y,s=this.z,A=this.w,r=A*e.w+i*e.x+M*e.y+s*e.z;if(r<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,r=-r):this.copy(e),r>=1)return this.w=A,this.x=i,this.y=M,this.z=s,this;var N=Math.acos(r),n=Math.sqrt(1-r*r);if(Math.abs(n)<.001)return this.w=.5*(A+this.w),this.x=.5*(i+this.x),this.y=.5*(M+this.y),this.z=.5*(s+this.z),this;var D=Math.sin((1-t)*N)/n,u=Math.sin(t*N)/n;return this.w=A*D+this.w*u,this.x=i*D+this.x*u,this.y=M*D+this.y*u,this.z=s*D+this.z*u,this},setFromUnitVectors:function(){var e,t,i=1e-6;return function(s,A){return void 0===e&&(e=new M.Vector3),t=s.dot(A)+1,t<i?(t=0,Math.abs(s.x)>Math.abs(s.z)?e.set(-s.y,s.x,0):e.set(0,-s.z,s.y)):e.crossVectors(s,A),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=M;},{}],15:[function(e,t,i){function M(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new A.Quaternion,this.rotateStart_=new A.Vector2,this.rotateEnd_=new A.Vector2,this.rotateDelta_=new A.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4);}var s=e("./base.js").VRDisplay,A=e("./math-util.js"),r=e("./util.js"),N=.15,n=80,D=.5,u=.3;M.prototype=new s,M.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},M.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+N):39==e.keyCode?this.animateTheta_(this.theta_-N):40==e.keyCode?this.animatePhi_(this.phi_-N):37==e.keyCode&&this.animateTheta_(this.theta_+N);},M.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e);},M.prototype.animatePhi_=function(e){e=r.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e);},M.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var i=this[e],M=new Date;this.angleAnimation_=requestAnimationFrame(function s(){var A=new Date-M;if(A>=n)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(s.bind(this));var r=A/n;this[e]=i+(t-i)*r;}.bind(this));},M.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0;},M.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-i);}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*u,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*D,this.phi_=r.clamp(this.phi_,-Math.PI/2,Math.PI/2);}},M.prototype.onMouseUp_=function(e){this.isDragging_=!1;},M.prototype.isPointerLocked_=function(){var e=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return void 0!==e},M.prototype.resetPose=function(){this.phi_=0,this.theta_=0;},t.exports=M;},{"./base.js":3,"./math-util.js":14,"./util.js":22}],16:[function(e,t,i){function M(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var i=document.createElement("img");i.src=this.icon;var t=i.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(i);var M=document.createElement("div"),t=M.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",M.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(M);var s=document.createElement("div"),t=s.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(s);var A=document.createElement("div");A.style.float="left",A.innerHTML="No Cardboard viewer?";var r=document.createElement("a");r.href="https://www.google.com/get/cardboard/get-cardboard/",r.innerHTML="get one",r.target="_blank";var t=r.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",s.appendChild(A),s.appendChild(r),this.overlay=e,this.text=M,this.hide();}var s=e("./util.js");M.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),i=t.style;s.isLandscapeMode()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%");},M.prototype.hide=function(){this.overlay.style.display="none";},M.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e);},M.prototype.disableShowTemporarily=function(){clearTimeout(this.timer);},M.prototype.update=function(){this.disableShowTemporarily(),!s.isLandscapeMode()&&s.isMobile()?this.show():this.hide();},M.prototype.loadIcon_=function(){this.icon=s.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");
},t.exports=M;},{"./util.js":22}],17:[function(e,t,i){function M(e){this.kFilter=e,this.currentAccelMeasurement=new s,this.currentGyroMeasurement=new s,this.previousGyroMeasurement=new s,r.isIOS()?this.filterQ=new A.Quaternion(-1,0,0,1):this.filterQ=new A.Quaternion(1,0,0,1),this.previousFilterQ=new A.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new A.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new A.Vector3,this.measuredGravity=new A.Vector3,this.gyroIntegralQ=new A.Quaternion;}var s=e("./sensor-sample.js"),A=e("../math-util.js"),r=e("../util.js");M.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t);},M.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i=t-this.previousGyroMeasurement.timestampS;r.isTimestampDeltaValid(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement);},M.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new A.Quaternion;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var M=new A.Quaternion;M.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),M.inverse(),r.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",A.radToDeg*r.getQuaternionAngle(M),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var s=new A.Quaternion;s.copy(this.filterQ),s.multiply(M),this.filterQ.slerp(s,1-this.kFilter),this.previousFilterQ.copy(this.filterQ);},M.prototype.getOrientation=function(){return this.filterQ},M.prototype.accelToQuaternion_=function(e){var t=new A.Vector3;t.copy(e),t.normalize();var i=new A.Quaternion;return i.setFromUnitVectors(new A.Vector3(0,0,-1),t),i.inverse(),i},M.prototype.gyroToQuaternionDelta_=function(e,t){var i=new A.Quaternion,M=new A.Vector3;return M.copy(e),M.normalize(),i.setFromAxisAngle(M,e.length()*t),i},t.exports=M;},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(e,t,i){function M(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new N.Vector3,this.gyroscope=new N.Vector3,this.start(),this.filter=new s(WebVRConfig.K_FILTER),this.posePredictor=new A(WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new r,this.filterToWorldQ=new N.Quaternion,n.isIOS()?this.filterToWorldQ.setFromAxisAngle(new N.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new N.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new N.Quaternion,this.worldToScreenQ=new N.Quaternion,this.originalPoseAdjustQ=new N.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new N.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),n.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new N.Quaternion,this.isFirefoxAndroid=n.isFirefoxAndroid(),this.isIOS=n.isIOS(),this.orientationOut_=new Float32Array(4);}var s=e("./complementary-filter.js"),A=e("./pose-predictor.js"),r=e("../touch-panner.js"),N=e("../math-util.js"),n=e("../util.js");M.prototype.getPosition=function(){return null},M.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new N.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},M.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),n.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor();},M.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e);},M.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,M=e.timeStamp/1e3;this.isFirefoxAndroid&&(M/=1e3);var s=M-this.previousTimestampS;return s<=n.MIN_TIMESTEP||s>n.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=M)):(this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,M),this.filter.addGyroMeasurement(this.gyroscope,M),void(this.previousTimestampS=M))},M.prototype.onOrientationChange_=function(e){this.setScreenTransform_();},M.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){var i=t.type.toLowerCase();"devicemotion"===i&&this.updateDeviceMotion_(t.deviceMotionEvent);}},M.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new N.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new N.Vector3(0,0,1),Math.PI/2);break;case 180:}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse();},M.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),n.isIOS()&&n.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_);},M.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_);},t.exports=M;},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(e,t,i){function M(e){this.predictionTimeS=e,this.previousQ=new s.Quaternion,this.previousTimestampS=null,this.deltaQ=new s.Quaternion,this.outQ=new s.Quaternion;}var s=e("../math-util"),A=e("../util");M.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var M=new s.Vector3;M.copy(t),M.normalize();var r=t.length();if(r<20*s.degToRad)return A.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(s.radToDeg*r).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var N=(i-this.previousTimestampS,r*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(M,N),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},t.exports=M;},{"../math-util":14,"../util":22}],20:[function(e,t,i){function M(e,t){this.set(e,t);}M.prototype.set=function(e,t){this.sample=e,this.timestampS=t;},M.prototype.copy=function(e){this.set(e.sample,e.timestampS);},t.exports=M;},{}],21:[function(e,t,i){function M(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new s.Vector2,this.rotateEnd=new s.Vector2,this.rotateDelta=new s.Vector2,this.theta=0,this.orientation=new s.Quaternion;}var s=e("./math-util.js"),A=e("./util.js"),r=.5;M.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},M.prototype.resetSensor=function(){this.theta=0;},M.prototype.onTouchStart_=function(e){1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0);},M.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),A.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*r;}},M.prototype.onTouchEnd_=function(e){this.isTouching=!1;},t.exports=M;},{"./math-util.js":14,"./util.js":22}],22:[function(e,t,i){var M=e("object-assign"),s=window.Util||{};s.MIN_TIMESTEP=.001,s.MAX_TIMESTEP=1,s.base64=function(e,t){return"data:"+e+";base64,"+t},s.clamp=function(e,t,i){return Math.min(Math.max(t,e),i)},s.lerp=function(e,t,i){return e+(t-e)*i},s.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),s.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),s.isFirefoxAndroid=function(){var e=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return e}}(),s.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},s.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=s.MIN_TIMESTEP)&&!(e>s.MAX_TIMESTEP))},s.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},s.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},s.requestFullscreen=function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen();}return!0},s.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen();}return!0},s.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},s.linkProgram=function(e,t,i,M){var s=e.createShader(e.VERTEX_SHADER);e.shaderSource(s,t),e.compileShader(s);var A=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(A,i),e.compileShader(A);var r=e.createProgram();e.attachShader(r,s),e.attachShader(r,A);for(var N in M)e.bindAttribLocation(r,M[N],N);return e.linkProgram(r),e.deleteShader(s),e.deleteShader(A),r},s.getProgramUniforms=function(e,t){for(var i={},M=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s="",A=0;A<M;A++){var r=e.getActiveUniform(t,A);s=r.name.replace("[0]",""),i[s]=e.getUniformLocation(t,s);}return i},s.orthoMatrix=function(e,t,i,M,s,A,r){var N=1/(t-i),n=1/(M-s),D=1/(A-r);return e[0]=-2*N,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*D,e[11]=0,e[12]=(t+i)*N,e[13]=(s+M)*n,e[14]=(r+A)*D,e[15]=1,e},s.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0);}(navigator.userAgent||navigator.vendor||window.opera),e},s.extend=M,s.safariCssSizeWorkaround=function(e){if(s.isIOS()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(i)+"px",setTimeout(function(){e.style.width=t,e.style.height=i;},100);}window.Util=s,window.canvas=e;},s.isDebug=function(){return s.getQueryParameter("debug")},s.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},s.frameDataFromPose=function(){function e(e,t,i,M){var s=Math.tan(t?t.upDegrees*A:r),N=Math.tan(t?t.downDegrees*A:r),n=Math.tan(t?t.leftDegrees*A:r),D=Math.tan(t?t.rightDegrees*A:r),u=2/(n+D),a=2/(s+N);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=-((n-D)*u*.5),e[9]=(s-N)*a*.5,e[10]=M/(i-M),e[11]=-1,e[12]=0,e[13]=0,e[14]=M*i/(i-M),e[15]=0,e}function t(e,t,i){var M=t[0],s=t[1],A=t[2],r=t[3],N=M+M,n=s+s,D=A+A,u=M*N,a=M*n,o=M*D,g=s*n,j=s*D,L=A*D,I=r*N,c=r*n,T=r*D;return e[0]=1-(g+L),e[1]=a+T,e[2]=o-c,e[3]=0,e[4]=a-T,e[5]=1-(u+L),e[6]=j+I,e[7]=0,e[8]=o+c,e[9]=j-I,e[10]=1-(u+g),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function i(e,t,i){var M,s,A,r,N,n,D,u,a,o,g,j,L=i[0],I=i[1],c=i[2];return t===e?(e[12]=t[0]*L+t[4]*I+t[8]*c+t[12],e[13]=t[1]*L+t[5]*I+t[9]*c+t[13],e[14]=t[2]*L+t[6]*I+t[10]*c+t[14],e[15]=t[3]*L+t[7]*I+t[11]*c+t[15]):(M=t[0],s=t[1],A=t[2],r=t[3],N=t[4],n=t[5],D=t[6],u=t[7],a=t[8],o=t[9],g=t[10],j=t[11],e[0]=M,e[1]=s,e[2]=A,e[3]=r,e[4]=N,e[5]=n,e[6]=D,e[7]=u,e[8]=a,e[9]=o,e[10]=g,e[11]=j,e[12]=M*L+N*I+a*c+t[12],e[13]=s*L+n*I+o*c+t[13],e[14]=A*L+D*I+g*c+t[14],e[15]=r*L+u*I+j*c+t[15]),e}function M(e,t){var i=t[0],M=t[1],s=t[2],A=t[3],r=t[4],N=t[5],n=t[6],D=t[7],u=t[8],a=t[9],o=t[10],g=t[11],j=t[12],L=t[13],I=t[14],c=t[15],T=i*N-M*r,E=i*n-s*r,w=i*D-A*r,y=M*n-s*N,l=M*D-A*N,z=s*D-A*n,h=u*L-a*j,d=u*I-o*j,x=u*c-g*j,O=a*I-o*L,C=a*c-g*L,S=o*c-g*I,p=T*S-E*C+w*O+y*x-l*d+z*h;return p?(p=1/p,e[0]=(N*S-n*C+D*O)*p,e[1]=(s*C-M*S-A*O)*p,e[2]=(L*z-I*l+c*y)*p,e[3]=(o*l-a*z-g*y)*p,e[4]=(n*x-r*S-D*d)*p,e[5]=(i*S-s*x+A*d)*p,e[6]=(I*w-j*z-c*E)*p,e[7]=(u*z-o*w+g*E)*p,e[8]=(r*C-N*x+D*h)*p,e[9]=(M*x-i*C-A*h)*p,e[10]=(j*l-L*w+c*T)*p,e[11]=(a*w-u*l-g*T)*p,e[12]=(N*d-r*O-n*h)*p,e[13]=(i*O-M*d+s*h)*p,e[14]=(L*E-j*y-I*T)*p,e[15]=(u*y-a*E+o*T)*p,e):null}function s(s,A,r,D,u){e(s,D?D.fieldOfView:null,u.depthNear,u.depthFar);var a=r.orientation||N,o=r.position||n;t(A,a,o),D&&i(A,A,D.offset),M(A,A);}var A=Math.PI/180,r=.25*Math.PI,N=new Float32Array([0,0,0,1]),n=new Float32Array([0,0,0]);return function(e,t,i){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,s(e.leftProjectionMatrix,e.leftViewMatrix,t,i.getEyeParameters("left"),i),s(e.rightProjectionMatrix,e.rightViewMatrix,t,i.getEyeParameters("right"),i),!0)}}(),s.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=s.getDomainFromUrl(document.referrer),i=s.getDomainFromUrl(window.location.href);return e&&t!==i},s.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},t.exports=s;},{"object-assign":2}],23:[function(e,t,i){function M(){try{this.selectedKey=localStorage.getItem(N)||r;}catch(e){console.error("Failed to load viewer profile: %s",e);}this.dialog=this.createDialog_(s.Viewers),this.root=null;}var s=e("./device-info.js"),A=e("eventemitter3"),r=(e("./util.js"),"CardboardV1"),N="WEBVR_CARDBOARD_VIEWER",n="webvr-polyfill-viewer-selector";M.prototype=new A,M.prototype.show=function(e){this.root=e,e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block";},M.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none";},M.prototype.getCurrentViewer=function(){return s.Viewers[this.selectedKey]},M.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},M.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!s.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.emit("change",s.Viewers[this.selectedKey]);try{localStorage.setItem(N,this.selectedKey);}catch(e){console.error("Failed to save viewer profile: %s",e);}this.hide();},M.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add(n),t.style.display="none";var i=document.createElement("div"),M=i.style;M.position="fixed",M.left=0,M.top=0,M.width="100%",M.height="100%",M.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var s=280,A=document.createElement("div"),M=A.style;M.boxSizing="border-box",M.position="fixed",M.top="24px",M.left="50%",M.marginLeft=-s/2+"px",M.width=s+"px",M.padding="24px",M.overflow="hidden",M.background="#fafafa",M.fontFamily="'Roboto', sans-serif",M.boxShadow="0px 5px 20px #666",A.appendChild(this.createH1_("Select your viewer"));for(var r in e)A.appendChild(this.createChoice_(r,e[r].label));return A.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(i),t.appendChild(A),t},M.prototype.createH1_=function(e){var t=document.createElement("h1"),i=t.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",t.innerHTML=e,t},M.prototype.createChoice_=function(e,t){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var M=document.createElement("input");M.style.fontSize="30px",M.setAttribute("id",e),M.setAttribute("type","radio"),M.setAttribute("value",e),M.setAttribute("name","field");var s=document.createElement("label");return s.style.marginLeft="4px",s.setAttribute("for",e),s.innerHTML=t,i.appendChild(M),i.appendChild(s),i},M.prototype.createButton_=function(e,t){var i=document.createElement("button");i.innerHTML=e;var M=i.style;return M.float="right",M.textTransform="uppercase",M.color="#1094f7",M.fontSize="14px",M.letterSpacing=0,M.border=0,M.background="none",M.marginTop="16px",i.addEventListener("click",t),i},t.exports=M;},{"./device-info.js":8,"./util.js":22,eventemitter3:1}],24:[function(e,t,i){function M(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play();}),this.request=function(){e.paused&&(e.src=r.base64("video/mp4","AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B"),e.play());},this.release=function(){e.pause(),e.src="";};}function s(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0);},3e4));},this.release=function(){e&&(clearInterval(e),e=null);};}function A(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?s:M}var r=e("./util.js");t.exports=A();},{"./util.js":22}],25:[function(e,t,i){function M(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),s();}function s(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=D,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return A.frameDataFromPose(e,this.getPose(),this)});}var A=e("./util.js"),r=e("./cardboard-vr-display.js"),N=e("./mouse-keyboard-vr-display.js"),n=e("./base.js").VRDisplay,D=e("./base.js").VRFrameData,u=e("./base.js").HMDVRDevice,a=e("./base.js").PositionSensorVRDevice,o=e("./display-wrappers.js").VRDisplayHMDDevice,g=e("./display-wrappers.js").VRDisplayPositionSensorDevice;M.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},M.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},M.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new r,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new o(e)),this.devices.push(new g(e)))),this.isMobile()||WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new N,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new o(e)),this.devices.push(new g(e)))),this.devicesPopulated=!0;}},M.prototype.enablePolyfill=function(){navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=n;var e=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return e.isCardboardCompatible()&&(e.isFullScreenAvailable()||A.isIOS())}}),!1 in window&&(window.VRFrameData=D);},M.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=u,window.PositionSensorVRDevice=a;},M.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;return this.nativeWebVRAvailable?this.nativeGetVRDisplaysFunc.call(navigator).then(function(t){return WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?t.concat(e):t.length>0?t:e}):new Promise(function(t,i){try{t(e);}catch(e){i(e);}})},M.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,i){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(i){for(var M=0;M<i.length;++M)e.devices.push(new o(i[M])),e.devices.push(new g(i[M]));e.devicesPopulated=!0,t(e.devices);},i);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(i){for(var M=0;M<i.length;++M)i[M]instanceof u&&e.devices.push(i[M]),i[M]instanceof a&&e.devices.push(i[M]);e.devicesPopulated=!0,t(e.devices);},i)}e.populateDevices(),t(e.devices);}catch(e){i(e);}})},M.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},M.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR},M.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},t.exports.WebVRPolyfill=M;},{"./base.js":3,"./cardboard-vr-display.js":6,"./display-wrappers.js":9,"./mouse-keyboard-vr-display.js":15,"./util.js":22}]},{},[13])(13)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[15])(15)
});