(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Axis3D = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _orthographic=_dereq_("./orthographic");Object.defineProperty(exports,"OrthographicCamera",{enumerable:!0,get:function(){return _orthographic.OrthographicCamera}});var _perspective=_dereq_("./perspective");Object.defineProperty(exports,"PerspectiveCamera",{enumerable:!0,get:function(){return _perspective.PerspectiveCamera}});

},{"./orthographic":2,"./perspective":3}],2:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==(void 0===r?"undefined":_typeof(r))&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+(void 0===r?"undefined":_typeof(r)));e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrthographicCameraContext=exports.OrthographicCamera=exports.kDefaultCameraNear=exports.kDefaultCameraFar=void 0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_camera=_dereq_("../core/camera"),_utils=_dereq_("../utils"),_orthographicCamera=_dereq_("orthographic-camera"),_orthographicCamera2=_interopRequireDefault(_orthographicCamera),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glVec=_dereq_("gl-vec4"),kDefaultCameraFar=exports.kDefaultCameraFar=1e3,kDefaultCameraNear=exports.kDefaultCameraNear=.1,OrthographicCamera=exports.OrthographicCamera=function(e){function r(e,t){_classCallCheck(this,r);var o=new OrthographicCameraContext(e,_extends({},t));return _possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,_extends({},t,{context:o})))}return _inherits(r,e),r}(_camera.Camera),OrthographicCameraContext=exports.OrthographicCameraContext=function(e){function r(e,t){_classCallCheck(this,r);var o=(0,_defined2.default)(t.far,kDefaultCameraFar),a=(0,_defined2.default)(t.near,kDefaultCameraNear),n=(0,_orthographicCamera2.default)({position:[].concat(_toConsumableArray(t.position||[0,0,0])),near:a,far:o});return _possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,_extends({},t,{controller:n})))}return _inherits(r,e),_createClass(r,[{key:"updateCameraViewport",value:function(e){var r=e.viewportWidth,t=e.viewportHeight,o=e.viewport,a=void 0===o?this.initialViewport:o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.viewport,u=void 0===i?a:i;Object.assign(this.controller.viewport,u||[-r,-t,r,t])}}]),r}(_camera.CameraContext);

},{"../core/camera":4,"../utils":56,"defined":147,"gl-vec4":301,"orthographic-camera":354}],3:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PerspectiveCameraContext=exports.PerspectiveCamera=exports.kDefaultCameraFieldOfView=exports.kDefaultCameraNear=exports.kDefaultCameraFar=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(o)},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_camera=_dereq_("../core/camera"),_utils=_dereq_("../utils"),_perspectiveCamera=_dereq_("perspective-camera"),_perspectiveCamera2=_interopRequireDefault(_perspectiveCamera),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),kDefaultCameraFar=exports.kDefaultCameraFar=1e3,kDefaultCameraNear=exports.kDefaultCameraNear=.01,kDefaultCameraFieldOfView=exports.kDefaultCameraFieldOfView=(0,_utils.radians)(60),PerspectiveCamera=exports.PerspectiveCamera=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var o=new PerspectiveCameraContext(e,r);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},r,{context:o})))}return _inherits(t,e),t}(_camera.Camera),PerspectiveCameraContext=exports.PerspectiveCameraContext=function(e){function t(e,r){_classCallCheck(this,t);var o=(0,_defined2.default)(r.fov,r.fieldOfView,kDefaultCameraFieldOfView),a=(0,_defined2.default)(r.far,kDefaultCameraFar),n=(0,_defined2.default)(r.near,kDefaultCameraNear),i=(0,_perspectiveCamera2.default)({direction:[].concat(_toConsumableArray(r.direction||[0,0,-1])),position:[].concat(_toConsumableArray(r.position||[0,0,0])),near:n,fov:o,far:a}),l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},r,{controller:i})));return l.fov=function(){return l.updateCameraController.apply(l,arguments),l.controller.fov},l}return _inherits(t,e),_createClass(t,[{key:"updateCameraController",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.fov,o=void 0===r?this.controller.fov:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.fov,i=void 0===n?o:n;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateCameraController",this).apply(this,arguments),i&&this.controller.fov!=i&&(this.controller.fov=i),this.controller.update()}}]),t}(_camera.CameraContext);

},{"../core/camera":4,"../utils":56,"defined":147,"perspective-camera":359}],4:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraUniforms=exports.CameraContext=exports.Camera=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_object3d=_dereq_("../core/object3d"),_math=_dereq_("../math"),_stats=_dereq_("../stats"),_eyeVector=_dereq_("eye-vector"),_eyeVector2=_interopRequireDefault(_eyeVector),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),_glVec=_dereq_("gl-vec3"),_glVec2=_interopRequireDefault(_glVec),_glQuat=_dereq_("gl-quat"),_glQuat2=_interopRequireDefault(_glQuat),scratchQuaternion=new _math.Quaternion,scratchMatrix=_glMat2.default.identity([]),Camera=exports.Camera=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.registerStat)("Camera");var o=r.context,n=void 0===o?new CameraContext(e,r):o,i=r.uniforms,a=void 0===i?new CameraUniforms(e,r):i,u=e.regl({context:n,uniforms:a});return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},r,{update:function(e,t,r){_objectDestructuringEmpty(e),u(t,r)}})))}return _inherits(t,e),t}(_object3d.Object3D),CameraContext=exports.CameraContext=function(e){function t(e,r){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},r,{computeTransformMatrix:!1,computeLocalMatrix:!1}))),n=r.initialTarget,i=void 0===n?new _math.Vector3(0,0,0):n,a=r.controller;if(null==a)throw TypeError("CameraContext expects a controller.");var u=_glMat2.default.identity([]),l=new _math.Vector3(0,0,0);return Object.defineProperties(o,{initialViewport:{get:function(){return r.viewport},enumerable:!1},initialTarget:{get:function(){return i},enumerable:!1},viewMatrix:{get:function(){return u},enumerable:!1},controller:{get:function(){return a},enumerable:!1}}),o.aspect=function(e){return e.viewportWidth/e.viewportHeight},o.projection=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[1]&&"projection"in t[1]?t[1].projection:(o.updateCameraController.apply(o,t),a.projection.slice())},o.view=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[1]&&"view"in t[1]?t[1].view:o.computeViewMatrix.apply(o,t)},o.direction=function(){return o.updateCameraController.apply(o,arguments),a.direction},o.target=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.target;return _objectDestructuringEmpty(e),(0,_defined2.default)(r,i)},o.near=function(){return o.updateCameraController.apply(o,arguments),a.near},o.far=function(){return o.updateCameraController.apply(o,arguments),a.far},o.eye=function(){return(0,_eyeVector2.default)(u,l),l},o.up=function(){return o.updateCameraController.apply(o,arguments),a.up},o.createPickingRay=function(e){var t=e.viewportHeight,r=0,o=0;return function(e){return e(function(e){var n=e.currentX,i=e.currentY;r=n,o=t-i}),a.createPickingRay([r,o])}},o.viewport=function(e,t){return _objectDestructuringEmpty(e),t=t||{},(0,_defined2.default)(t.viewport,r.viewport,null)},o}return _inherits(t,e),_createClass(t,[{key:"computeViewMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.position,o=void 0===r?this.initialPosition:r,n=t.rotation,i=void 0===n?this.initialRotation:n,a=t.target,u=void 0===a?this.initialTarget:a,l=t.scale,c=void 0===l?this.initialScale:l;_objectDestructuringEmpty(e);var s=(this.localMatrix,this.viewMatrix),p=this.controller;return this.updateCameraController.apply(this,arguments),this.updateCameraViewport.apply(this,arguments),o&&i&&c?(p.identity(),p.translate(o),p.lookAt(_glVec2.default.multiply([],u,c)),p.update(),_glQuat2.default.normalize(scratchQuaternion,i),_glMat2.default.copy(s,p.view),_glMat2.default.fromQuat(scratchMatrix,scratchQuaternion),_glMat2.default.multiply(s,s,scratchMatrix),s):s}},{key:"updateCameraController",value:function(e){var t=e.near,r=void 0===t?this.controller.near:t,o=e.far,n=void 0===o?this.controller.far:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.near,u=void 0===a?r:a,l=i.far,c=void 0===l?n:l,s=!1;c&&this.controller.far!=c&&(this.controller.far=c,s=!0),u&&this.controller.near!=u&&(this.controller.near=u,s=!0),s&&this.controller.update()}},{key:"updateCameraViewport",value:function(e){var t=e.viewportTop,r=void 0===t?-1:t,o=e.viewportLeft,n=void 0===o?-1:o,i=e.viewportWidth,a=e.viewportHeight,u=e.viewport,l=void 0===u?null:u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=c.viewport,p=void 0===s?l:s;Object.assign(this.controller.viewport,p||[n,r,i,a])}}]),t}(_object3d.Object3DContext),CameraUniforms=exports.CameraUniforms=function e(t,r){_classCallCheck(this,e),this["camera.projection"]=t.regl.context("projection"),this["camera.aspect"]=t.regl.context("aspect"),this["camera.view"]=t.regl.context("view"),this["camera.eye"]=function(e){return[].concat(_toConsumableArray(e.eye))}};

},{"../core/object3d":17,"../math":48,"../stats":55,"defined":147,"eye-vector":156,"gl-mat4":189,"gl-quat":214,"gl-vec3":271}],5:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function leftpad(e,t,r){for(;r.length<t;)r=""+e+r;return r}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var l=Object.getPrototypeOf(t);return null===l?void 0:e(l,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},_vector_swizzle_map=_dereq_("../math/vector_swizzle_map"),VectorSwizzleMap=_interopRequireWildcard(_vector_swizzle_map),_utils=_dereq_("../utils"),_command=_dereq_("./command"),_math=_dereq_("../math"),_colorString=_dereq_("color-string"),_colorString2=_interopRequireDefault(_colorString),_colorSpace=_dereq_("color-space"),_colorSpace2=_interopRequireDefault(_colorSpace),_clamp=_dereq_("clamp"),_clamp2=_interopRequireDefault(_clamp),Color=exports.Color=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,0,0,0)),r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return e.set(o),e}return _inherits(t,e),_createClass(t,[{key:"onchange",value:function(e,t){var r=this.elements;3==e?r[e]=(0,_clamp2.default)(t,0,1):t>255?r[e]=1:t>1?r[e]=t/255:t<0&&(r[e]=0)}},{key:"set",value:function(){for(var e,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return 1==o.length&&(o=o[0]),o=t.parseInput(o),o?(e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this)).call.apply(e,[this].concat(_toConsumableArray(o))):this}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex",t=arguments[1];"hex"==e&&(t=!0);var r=this.toArray(t);return"name"==e&&(e="keyword"),_colorString2.default.to[e](r)}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toArray",this).call(this);if(e)for(var o=0;o<3;++o)r[o]*=255,r[o]|=0;return[].concat(_toConsumableArray(r))}},{key:"valueOf",value:function(){var e=this.toString("hex",!0).replace("#","");return e=leftpad(0,6,e),Function("return 0x"+e)()}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Color}},{key:"parseInput",value:function(e){if((0,_utils.isArrayLike)(e)&&1==e.length&&(e=e[0]),"string"==typeof e?e=t.parseString(e):"number"==typeof e&&(e=t.parseInt(e)),null==e)return null;var r=e[3]||0;if(e&&"object"==(void 0===e?"undefined":_typeof(e)))if("rgb"==e.model)e=e.value,r=e[3];else if(r=e.value?e.value[3]:e[3],_colorSpace2.default[e.model])try{e=_colorSpace2.default[e.model].rgb(e.value)}catch(e){console.warn("Color conversation failed",e)}return[].concat(_toConsumableArray([].concat(_toConsumableArray(e)).slice(0,3)),[r||1])}},{key:"parseString",value:function(e){return"string"==typeof e?_colorString2.default.get(e.replace(/\s+/g,""))||null:null}},{key:"parseInt",value:function(e){if("number"==typeof e){var r=t.parseString("#"+leftpad(0,6,e.toString("16")));if(r)return r;if(r=t.parseString("rgba("+(0,_clamp2.default)(e>>24&255,0,255)+","+(0,_clamp2.default)(e>>16&255,0,255)+","+(0,_clamp2.default)(e>>8&255,0,255)+","+(0,_clamp2.default)(255&e,0,1)+")"))return r}return null}}]),t}(_math.Vector4);

},{"../math":48,"../math/vector_swizzle_map":52,"../utils":56,"./command":6,"clamp":99,"color-space":114,"color-string":138}],6:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),CORE_COMMAND_NEXT_ID=0,Command=exports.Command=function(t){function e(t){var n;if(_classCallCheck(this,e),"function"!=typeof t)throw new TypeError("Command constructor expects a function.");var r=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e.codegen(function(t){return t.apply(t,Array.prototype.slice.call(arguments,1))}))),o=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.call.apply(r,[t,t].concat(n))},c=e.id();return n=Object.assign(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.call.apply(o,[r].concat(e))},{this:this,id:c}),_possibleConstructorReturn(r,n)}return _inherits(e,t),_createClass(e,null,[{key:"id",value:function(){return CORE_COMMAND_NEXT_ID++}},{key:"count",value:function(){return CORE_COMMAND_NEXT_ID}},{key:"codegen",value:function(t){if("function"!=typeof t)throw new TypeError("Expecting a function.");return"return ("+String(t)+").apply(this, arguments);"}}]),e}(Function);

},{}],7:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Context=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_stats=_dereq_("../stats"),_events=_dereq_("events"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_window=_dereq_("global/window"),_window2=_interopRequireDefault(_window),_domEvents=_dereq_("dom-events"),_domEvents2=_interopRequireDefault(_domEvents),_glslify=_dereq_("glslify"),_regl=_dereq_("regl"),_regl2=_interopRequireDefault(_regl),Context=exports.Context=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_regl2.default;_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));(0,_stats.registerStat)("Context"),o.setMaxListeners(1/0),o._hasFocus=!1,o._reglContext=null,e.regl=(0,_defined2.default)(e.regl,e.gl||{}),e.element&&"CANVAS"==e.element.nodeName?e.regl.canvas=e.element:e.element&&e.element.nodeName?e.regl.container=e.element:"string"==typeof e.element&&(e.regl.container=e.element),n(_extends({},e.regl,{attributes:_extends({},e.regl.attributes||{}),extensions:[].concat(_toConsumableArray(e.regl.extensions||[]),["OES_texture_float"]),optionalExtensions:[].concat(_toConsumableArray(e.regl.optionalExtensions||[])),onDone:function(e,t){if(e)return o.emit("error",e);o._regl=t,o._domElement=o._regl._gl.canvas,o._isDestroyed=!1}}));var r=function(){o.blur()},l=function(){o.focus()},u=function(){o.blur()},i=function(e){e.target==o._domElement?o.focus():o.blur()};return _domEvents2.default.on(o._domElement,"focus",l),_domEvents2.default.on(o._domElement,"blur",r),_domEvents2.default.on(_window2.default,"blur",function(){return u}),_domEvents2.default.on(document,"mousedown",i),_domEvents2.default.on(document,"touchstart",i),o.once("beforedestroy",function(){_domEvents2.default.off(o._domElement,"focus",l),_domEvents2.default.off(o._domElement,"blur",r),_domEvents2.default.off(_window2.default,"blur",u),_domEvents2.default.off(document,"mousedown",i),_domEvents2.default.off(document,"touchstart",i)}),o}return _inherits(t,e),_createClass(t,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"destroy",value:function(){return this.emit("beforedestroy"),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._hasFocus=!1,this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._domElement,delete this._reglContext,this.emit("destroy"),this}},{key:"refresh",value:function(){return this._regl&&"function"==typeof this._regl._refresh&&this._regl.refresh(),this}},{key:"reglContext",get:function(){return this._reglContext||null}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl._gl||null}}]),t}(_events.EventEmitter);

},{"../stats":55,"defined":147,"dom-events":148,"events":152,"global/window":319,"glslify":330,"regl":471}],8:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExtrudeGeometry=exports.kDefaultExtrudeGeometryPathSteps=exports.kDefaultExtrudeGeometryPathZCoefficient=void 0;var _utils=_dereq_("../utils"),_geometry=_dereq_("./geometry"),_extrude=_dereq_("extrude"),_extrude2=_interopRequireDefault(_extrude),_extrudeByPath=_dereq_("extrude-by-path"),_extrudeByPath2=_interopRequireDefault(_extrudeByPath),_extrudeEdges=_dereq_("extrude-edges"),_extrudeEdges2=_interopRequireDefault(_extrudeEdges),_cleanPslg=_dereq_("clean-pslg"),_cleanPslg2=_interopRequireDefault(_cleanPslg),_defined=_dereq_("defined"),_cdt2d=_dereq_("cdt2d"),_cdt2d2=_interopRequireDefault(_cdt2d),kDefaultExtrudeGeometryPathZCoefficient=exports.kDefaultExtrudeGeometryPathZCoefficient=.001,kDefaultExtrudeGeometryPathSteps=exports.kDefaultExtrudeGeometryPathSteps=10,ExtrudeGeometry=exports.ExtrudeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.positions,o=e.edges,n=e.cells,i=e.path,u=e.closed,a=void 0===u||u;_classCallCheck(this,t);var l=null;if(0==(0,_utils.isArrayLike)(r))throw new TypeError("Expecting positions to be an array.");if(0==r.length)throw new TypeError("Empty positions array given.");if(null==i)l=(0,_extrude2.default)(r,{bottom:-1,top:1});else{if(a=Boolean(a),0==(0,_utils.isArrayLike)(i))throw new TypeError("Expecting path to be an array.");if(0==i.length)throw new TypeError("Empty path array given.");if(null==o){var s=[].concat(_toConsumableArray(_extrudeEdges2.default.faces(r)));o=[];for(var f=0;f<s.length;f+=2)o.push([s[f],s[f+1]])}else{if(0==(0,_utils.isArrayLike)(o))throw new TypeError("Expecting edges to be an array.");if(0==o.length)throw new TypeError("Empty edges array given.")}if(null==n)n=(0,_cdt2d2.default)(r);else{if(n&&0==(0,_utils.isArrayLike)(n))throw new TypeError("Expecting cells to be an array.");if(0==n.length)throw new TypeError("Empty cells array given.")}(0,_cleanPslg2.default)(r,o),l=(0,_extrudeByPath2.default)({positions:r,closed:a,edges:o,cells:n,path:i})}return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:l}))}return _inherits(t,e),t}(_geometry.Geometry);

},{"../utils":56,"./geometry":10,"cdt2d":93,"clean-pslg":100,"defined":147,"extrude":155,"extrude-by-path":153,"extrude-edges":154}],9:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrameState=exports.FrameUniforms=exports.FrameContext=exports.Frame=exports.kDefaultFrameClearState=exports.kDefaultFrameDepthState=exports.kDefaultFrameCullingState=exports.kDefaultFrameBlendingState=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_material=_dereq_("./material"),_stats=_dereq_("../stats"),_command=_dereq_("./command"),_utils=_dereq_("../utils"),_color=_dereq_("./color"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),kDefaultFrameBlendingState=exports.kDefaultFrameBlendingState=Object.seal({equation:"add",enable:!1,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}}),kDefaultFrameCullingState=exports.kDefaultFrameCullingState=Object.seal({enable:!1,face:"back"}),kDefaultFrameDepthState=exports.kDefaultFrameDepthState=Object.seal({enable:!1,range:[0,1],func:"less",mask:!0}),kDefaultFrameClearState=exports.kDefaultFrameClearState=Object.seal({color:[17/255,17/255,17/255,1],depth:1}),Frame=exports.Frame=function(e){function t(e){function r(e){return i.init(u).enqueue(e),function(){i.cancelFrame()}}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.incrementStat)("Frame");var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r)),l=new FrameUniforms(e,n.uniforms||{}),i=new FrameContext(e,n.context||{}),o=new FrameState(e,n.state||{}),u=e.regl(_extends({uniforms:l,context:i},o));return a}return _inherits(t,e),t}(_command.Command),FrameContext=exports.FrameContext=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),Object.assign(this,n);var a=_extends({},kDefaultFrameClearState,n.clear),l=[],i=[];Object.defineProperties(this,{reglContext:{enumerable:!1,writable:!0,value:null},isCancelled:{enumerable:!1,writable:!0,value:!1},clearState:{get:function(){return a},enumerable:!1},queue:{get:function(){return i},enumerable:!1},loop:{enumerable:!1,writable:!0,value:null},ctx:{get:function(){return t},enumerable:!1}}),this.lights=l,this.cancel=function(){return function(){r.cancelFrame.apply(r,arguments)}},this.clear=function(){return function(){r.clearBuffers.apply(r,arguments)}},this.regl=function(){return t.regl},this.gl=t.gl}return _createClass(e,[{key:"enqueue",value:function(e){return this.queue.push(e),this}},{key:"dequeue",value:function(){if(this.queue.length){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,a=!1,l=void 0;try{for(var i,o=this.queue[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;"function"==typeof u&&u.apply(void 0,[this.reglContext].concat(t))}}catch(e){a=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw l}}}return this}},{key:"init",value:function(e){var t=this;return(this.isCancelled||null==this.loop)&&(this.isCancelled=!1,this.loop=this.ctx.regl.frame(function(){e(function(){try{t.onrefresh.apply(t,arguments)}catch(e){t.cancelFrame(),t.ctx.emit("error",e)}})})),this}},{key:"cancelFrame",value:function(){this.loop&&(this.queue.splice(0,-1),this.loop.cancel(),this.ctx._reglContext=this.reglContext=this.loop=null)}},{key:"clearBuffers",value:function(e){this.ctx.regl.clear(_extends({},this.clearState,e))}},{key:"onrefresh",value:function(e){var t=e.lights;this.reglContext=e,this.ctx._reglContext=e,this.clearBuffers(),t.length&&t.splice(0,t.length);for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];this.dequeue.apply(this,n)}}]),e}(),FrameUniforms=exports.FrameUniforms=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),Object.assign(this,r),this.time=t.regl.context("time"),this.tick=t.regl.context("tick")},FrameState=exports.FrameState=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),Object.assign(this,_extends({},r)),delete this.blending,delete this.culling,this.frag=(0,_defined2.default)(r.frag,r.fragmentShader,_material.kDefaultMaterialFragmentShader),this.blend=_extends({},kDefaultFrameBlendingState,r.blend||r.blending),this.cull=_extends({},kDefaultFrameCullingState,r.cull||r.culling),this.depth=_extends({},kDefaultFrameDepthState,r.depth);for(var n in this)null==this[n]&&delete this[n]};

},{"../stats":55,"../utils":56,"./color":5,"./command":6,"./material":15,"defined":147}],10:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=void 0;var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_vector=_dereq_("../math/vector"),_boundPoints=_dereq_("bound-points"),_boundPoints2=_interopRequireDefault(_boundPoints),_screenProjectedLines=_dereq_("screen-projected-lines"),_meshReindex=_dereq_("mesh-reindex"),_meshReindex2=_interopRequireDefault(_meshReindex),_unindexMesh=_dereq_("unindex-mesh"),_unindexMesh2=_interopRequireDefault(_unindexMesh),_normals=_dereq_("normals"),_normals2=_interopRequireDefault(_normals),Geometry=exports.Geometry=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.complex,r=void 0===t?null:t,o=n.flatten,l=void 0!==o&&o;_classCallCheck(this,e),Object.defineProperty(this,"_complex",{enumerable:!1,writable:!1,value:{}}),this.flatten=l,this.complex=r||null}return _createClass(e,[{key:"computeBoundingBox",value:function(){return(0,_boundPoints2.default)(this.positions).map(function(e){switch(e.length){case 3:return new(Function.prototype.bind.apply(_vector.Vector3,[null].concat(_toConsumableArray(e))));case 2:return new(Function.prototype.bind.apply(_vector.Vector2,[null].concat(_toConsumableArray(e))))}})}},{key:"complex",set:function(n){if(n instanceof e&&(n=n.complex),n){if(this.flatten&&n.cells){var t=n.cells.map(function(e){return e.slice()}),r=(0,_meshReindex2.default)((0,_unindexMesh2.default)(n.positions,t));try{n.normals=_normals2.default.vertexNormals(r.cells,r.positions)}catch(e){console.warn("Unable to compute vertex normals.")}Object.assign(n,r)}if(null==n.normals&&n.positions&&n.cells)try{n.normals=_normals2.default.vertexNormals(n.cells,n.positions)}catch(e){console.warn("Unable to compute vertex normals.")}}return Object.assign(this._complex,n),n},get:function(){return this._complex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),e}();

},{"../math/vector":51,"bound-points":77,"mesh-reindex":342,"normals":353,"screen-projected-lines":405,"unindex-mesh":424}],11:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GeometryBufferState=exports.GeometryBuffer=exports.kDefaultGeometryBufferFragmentShader=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_stats=_dereq_("../stats"),_command=_dereq_("./command"),_glslInjectDefines=_dereq_("glsl-inject-defines"),_glslInjectDefines2=_interopRequireDefault(_glslInjectDefines),_glslify=_dereq_("glslify"),kDefaultGeometryBufferFragmentShader=exports.kDefaultGeometryBufferFragmentShader="#extension GL_EXT_draw_buffers: require\nprecision mediump float;\n#define GLSLIFY 1\n\n/**\n * Shader uniforms.\n */\n\n#ifdef HAS_ALBEDO\nuniform vec4 color;\n#endif\n\n/**\n * Shader IO.\n */\n\n#ifdef HAS_NORMALS\nvarying vec3 vnormal;\n#endif\n\n#ifdef HAS_POSITIONS\nvarying vec3 vposition;\n#endif\n\n/**\n * Shader entry.\n */\n\nvoid main () {\n#ifdef HAS_ALBEDO\n  gl_FragData[0] = color;\n#endif\n\n#ifdef HAS_NORMALS\n  gl_FragData[1] = vec4(vnormal, 1.0);\n#endif\n\n#ifdef HAS_POSITIONS\n  gl_FragData[2] = vec4(vposition, 1.0);\n#endif\n}\n",GeometryBuffer=exports.GeometryBuffer=function(e){function t(e){function r(t,r){var n=!1;return"function"==typeof t&&(r=t,t={}),t=t||{},r=r||function(){},c(function(t){var o=t.viewportWidth,i=t.viewportHeight,a=t.clear;if(o!=_&&(_=o,n=!0),i!=d&&(d=i,n=!0),n)try{f.resize(_,d)}catch(t){e.emit("error",t)}s(function(){a(),r.apply(void 0,arguments)})}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.fbo,f=void 0===o?null:o;if(_classCallCheck(this,t),!e.regl.hasExtension("webgl_draw_buffers"))throw new Error("GeometryBuffer needs the 'webgl_draw_buffers' extension.");(0,_stats.incrementStat)("GeometryBuffer");var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r)),a=initialState,l=a.state,u=void 0===l?new GeometryBufferState(e,initialState):l,s=e.regl(_extends({},u)),c=e.regl(),d=0,_=0;return i}return _inherits(t,e),t}(_command.Command),GeometryBufferState=exports.GeometryBufferState=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var n=r.fbo,o=void 0===n?null:n,f=r.fragmentShader,i=void 0===f?kDefaultGeometryBufferFragmentShader:f,a=r.framebuffer,l=void 0===a?o||t.regl.framebuffer({color:[t.regl.texture({type:"float"}),t.regl.texture({type:"float"}),t.regl.texture({type:"float"})]}):a,u={};l.color&&l.color[0]&&(u.HAS_ALBEDO=1),l.color&&l.color[1]&&(u.HAS_NORMALS=1),l.color&&l.color[2]&&(u.HAS_POSITIONS=1),this.framebuffer=l,this.frag=(0,_glslInjectDefines2.default)(i,u)};

},{"../stats":55,"./command":6,"glsl-inject-defines":320,"glslify":330}],12:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extrude_geometry=_dereq_("./extrude_geometry");Object.keys(_extrude_geometry).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _extrude_geometry[e]}})});var _geometry_buffer=_dereq_("./geometry_buffer");Object.keys(_geometry_buffer).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _geometry_buffer[e]}})});var _geometry=_dereq_("./geometry");Object.keys(_geometry).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _geometry[e]}})});var _object3d=_dereq_("./object3d");Object.keys(_object3d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _object3d[e]}})});var _command=_dereq_("./command");Object.keys(_command).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _command[e]}})});var _texture=_dereq_("./texture");Object.keys(_texture).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _texture[e]}})});var _context=_dereq_("./context");Object.keys(_context).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _context[e]}})});var _material=_dereq_("./material");Object.keys(_material).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _material[e]}})});var _camera=_dereq_("./camera");Object.keys(_camera).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _camera[e]}})});var _stream=_dereq_("./stream");Object.keys(_stream).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _stream[e]}})});var _frame=_dereq_("./frame");Object.keys(_frame).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _frame[e]}})});var _light=_dereq_("./light");Object.keys(_light).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _light[e]}})});var _color=_dereq_("./color");Object.keys(_color).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _color[e]}})});var _input=_dereq_("./input");Object.keys(_input).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _input[e]}})});var _mesh=_dereq_("./mesh");Object.keys(_mesh).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _mesh[e]}})});var _text=_dereq_("./text");Object.keys(_text).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _text[e]}})});

},{"./camera":4,"./color":5,"./command":6,"./context":7,"./extrude_geometry":8,"./frame":9,"./geometry":10,"./geometry_buffer":11,"./input":13,"./light":14,"./material":15,"./mesh":16,"./object3d":17,"./stream":18,"./text":19,"./texture":20}],13:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputState=exports.InputContext=exports.Input=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_stream=_dereq_("./stream"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),Input=exports.Input=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var r=n.context,o=void 0===r?new InputContext(t,n):r,i=n.init,u=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({context:o},n)));return"function"==typeof i&&i(t,_extends({},n,{context:o,stream:o.stream})),u}return _inherits(e,t),e}(_stream.Stream),InputContext=exports.InputContext=function(t){function e(t){function n(t){return s=null==t?null:u.reduce(function(e,n){return _extends({},e,_defineProperty({},n,t[n]))},{})}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({transform:n},r))),i=r.props,u=void 0===i?[]:i,s=null,a=!0,f=!1,l=void 0;try{for(var c,p=u[Symbol.iterator]();!(a=(c=p.next()).done);a=!0)!function(){var t=c.value;o[t]=function(){return s?(0,_defined2.default)(s[t],void 0):void 0}}()}catch(t){f=!0,l=t}finally{try{!a&&p.return&&p.return()}finally{if(f)throw l}}return o}return _inherits(e,t),e}(_stream.StreamContext),InputState=exports.InputState=function t(){_classCallCheck(this,t)};

},{"./stream":18,"defined":147}],14:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightContext=exports.Light=exports.kDefaultLighType=exports.kDefaultLightColor=exports.kDefaultLightRadius=exports.kDefaultLightAmbient=exports.kDefaultLightRotation=exports.kDefaultLightPosition=exports.kDefaultLightIntensity=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_math=_dereq_("../math"),_stats=_dereq_("../stats"),_types=_dereq_("../light/types"),types=_interopRequireWildcard(_types),_color=_dereq_("./color"),_mesh=_dereq_("./mesh"),_object3d=_dereq_("./object3d"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glVec=_dereq_("gl-vec3"),_glVec2=_interopRequireDefault(_glVec),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),kMat4Identity=_glMat2.default.identity([]),LIGHT_COMMAND_NEXT_ID=0,kDefaultLightIntensity=exports.kDefaultLightIntensity=10,kDefaultLightPosition=exports.kDefaultLightPosition=new _math.Vector3(0,0,0),kDefaultLightRotation=exports.kDefaultLightRotation=new _math.Quaternion,kDefaultLightAmbient=exports.kDefaultLightAmbient=.1,kDefaultLightRadius=exports.kDefaultLightRadius=50,kDefaultLightColor=exports.kDefaultLightColor=new _color.Color("white"),kDefaultLighType=exports.kDefaultLighType=_types.BasicLightType,Light=exports.Light=function(t){function e(t){function i(t,i,o){var r=t.transform,n=void 0===r?kMat4Identity:r,a=t.position,s=void 0===a?l:a,c=t.lights,d=i.intensity,y=void 0===d?u:d,g=(i.rotation,i.ambient),v=void 0===g?f:g,L=i.visible,m=void 0===L?p:L,x=i.radius,C=void 0===x?_:x,j=i.color,O=void 0===j?h:j,w=i.type,R=void 0===w?b:w,q=i.transform,M=void 0===q?n:q,T=i.position,A=void 0===T?s:T,P=i.lights,I=void 0===P?c:P,E={},N=0;switch(R||b){case _types.DirectionalLightType:N=1;break;case _types.PointLightType:N=0}Object.assign(E,{typeName:e.typeName(R),intensity:(0,_defined2.default)(y,u),position:[].concat(_toConsumableArray((0,_defined2.default)(A,l)),[N]),ambient:(0,_defined2.default)(v,f),visible:(0,_defined2.default)(m,p),radius:(0,_defined2.default)(C,_),color:(0,_defined2.default)(O,[].concat(_toConsumableArray(h))),type:(0,_defined2.default)(R,b)}),_glVec2.default.transformMat4(E.position,E.position,M),I.push(E),k(arguments[1]||{},function(t,e){_objectDestructuringEmpty(t),D(e||{},function(){o.apply(void 0,arguments)})})}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Light");var r=t.regl,n=o.intensity,u=void 0===n?kDefaultLightIntensity:n,a=o.position,l=void 0===a?kDefaultLightPosition:a,s=(o.rotation,o.ambient),f=void 0===s?kDefaultLightAmbient:s,c=o.visible,p=void 0===c||c,d=o.radius,_=void 0===d?kDefaultLightRadius:d,y=o.color,h=void 0===y?kDefaultLightColor:y,g=o.type,b=void 0===g?kDefaultLighType:g,v=o.id,D=(void 0===v&&e.id(),o.update||function(){return _objectDestructuringEmpty(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,arguments[1])()}),L=o.context,m=void 0===L?new LightContext:L,k=r({context:m});return _possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},o,{update:i})))}return _inherits(e,t),_createClass(e,null,[{key:"id",value:function(){return LIGHT_COMMAND_NEXT_ID++}},{key:"typeName",value:function(t){return(0,_defined2.default)(Object.keys(types).find(function(e){return t==types[e]}),t)}}]),e}(_object3d.Object3D),LightContext=exports.LightContext=function(t){function e(t,i){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return _inherits(e,t),e}(_object3d.Object3DContext);

},{"../light/types":41,"../math":48,"../stats":55,"./color":5,"./mesh":16,"./object3d":17,"defined":147,"gl-mat4":189,"gl-vec3":271}],15:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}function _interopRequireWildcard(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function _objectDestructuringEmpty(n){if(null==n)throw new TypeError("Cannot destructure undefined")}function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?n:e}function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaterialMap=exports.MaterialUniforms=exports.MaterialContext=exports.MaterialState=exports.Material=exports.kDefaultMaterialDepthState=exports.kDefaultMaterialCullingState=exports.kDefaultMaterialBlendingState=exports.kDefaultMaterialType=exports.kDefaultMaterialColor=exports.kDefaultMaterialOpacity=exports.kDefaultMaterialFragmentShader=void 0;var _extends=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),_utils=_dereq_("../utils"),_stats=_dereq_("../stats"),_command=_dereq_("./command"),_texture=_dereq_("./texture"),_color=_dereq_("./color"),_types=_dereq_("../material/types"),types=_interopRequireWildcard(_types),_limits=_dereq_("../light/limits"),_glslInjectDefines=_dereq_("glsl-inject-defines"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glslify=_dereq_("glslify"),_glVec=_dereq_("gl-vec4"),MATERIAL_COMMAND_NEXT_ID=109,kDefaultMaterialFragmentShader=exports.kDefaultMaterialFragmentShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n};\n\n/**\n * Module dependencies.\n */\n\nstruct DirectionalLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n/**\n * Module exports.\n */\n\n// @TODO(werle) inject these defines at runtime\n#ifndef MAX_SPOT_LIGHTS\n#define MAX_SPOT_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n/**\n * The SpotLightsContext structure encapsulates all known\n * SpotLights for a shader program. The total count and pointers\n * toall SpotLights are in this structure.\n */\n\n// @TODO(werle) - implement this\n//struct SpotLightsContext {\n  //int count;\n  //SpotLight lights[MAX_SPOT_LIGHTS];\n//};\n\n/**\n * The DirectionalLightsContext structure encapsulates all known\n * DirectionalLights for a shader program. The total count and pointers\n * toall DirectionalLights are in this structure.\n */\n\nstruct DirectionalLightsContext {\n  int count;\n  DirectionalLight lights[MAX_DIRECTIONAL_LIGHTS];\n};\n\n/**\n * The AmbientLightsContext structure encapsulates all known\n * AmbientLights for a shader program. The total count and pointers\n * toall AmbientLights are in this structure.\n */\n\nstruct AmbientLightsContext {\n  int count;\n  AmbientLight lights[MAX_AMBIENT_LIGHTS];\n};\n\n/**\n * The PointLightsContext structure encapsulates all known\n * PointLights for a shader program. The total count and pointers\n * toall PointLights are in this structure.\n */\n\nstruct PointLightsContext {\n  int count;\n  PointLight lights[MAX_POINT_LIGHTS];\n};\n\n/**\n * The LightContext structure encapsulates all possible lights by\n * providing light contexts for ambient, directional, point, and\n * spot light types.\n */\n\nstruct LightContext {\n  DirectionalLightsContext directional;\n  AmbientLightsContext ambient;\n  PointLightsContext point;\n};\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\nstruct Material {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE Material\n#endif\n\n// default material\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader uniforms.\n//\nuniform MATERIAL_TYPE material;\nuniform LightContext lightContext;\nuniform Camera camera;\n\n#ifdef HAS_MAP\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\nuniform Map map;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\nstruct PositionedLight {\n  vec4 position;\n  vec4 color;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// unpack\n\nPositionedLight unpack_0(DirectionalLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight unpack_1(PointLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\n//compute\n/**\n * Module dependencies.\n */\n\n/**\n * Module exports.\n */\n\n/**\n * Computes a positioned light source attenuation for a given\n * direction vector.\n * Adapted from {@link https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl}\n */\n\nfloat computeAttenuation(PositionedLight light, vec3 direction) {\n  float attenuation;\n  if (0.0 == light.position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(\n      clamp(1.0 - length(direction)/light.radius, 0.0, 1.0),\n      2.0);\n  }\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 compute(vec4 lightPosition, vec3 position) {\n  if (lightPosition.w == 0.0) {\n    return normalize(lightPosition.xyz);\n  } else {\n    return lightPosition.xyz - position;\n  }\n}\n\n/**\n * Module dependencies.\n */\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n/**\n * Module exports.\n */\n\n/**\n * Computes the diffuse intensity value relative to a given positioned\n * light source and a geometry with a given direction.\n */\n\nfloat computeDiffuseFromGeometryWithDirection(PositionedLight light,\n                                              GeometryContext geometry,\n                                              Camera camera,\n                                              LambertMaterial material,\n                                              vec3 direction)\n{\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  float diffuse = orenNayarDiffuse(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.roughness,\n      material.albedo);\n\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  return diffuse;\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\n\nvoid applyPositionedLight_0(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 direction = compute(light.position, geometry.position);\n  float attenuation = computeAttenuation(light, direction);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   material,\n                   direction);\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n    ambient\n  + attenuation\n  + combined\n  ;\n}\n\n// adapted from https://github.com/freeman-lab/gl-lambert-material/blob/master/fragment.glsl\nvoid main_0() {\n  GeometryContext geometry_0 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_0.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_0(light),\n                           geometry_0,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_1(light),\n                           geometry_0,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n// unpack\n\n// utils\n\n#define toLambertMaterial(m) LambertMaterial(m.emissive, m.ambient, m.color, m.roughness, m.opacity, m.albedo, m.type)\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\n\nvoid applyPositionedLight_1(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 specular = vec3(0.0);\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  vec3 direction = compute(light.position, geometry.position);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   toLambertMaterial(material),\n                   direction);\n\n  if (material.shininess > 0.0 || material.shininess < 0.0) {\n    float power =\n      blinnPhongSpecular(normalize(direction),\n            viewpoint,\n            geometry.normal,\n            material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n     ambient\n   + combined\n   + specular\n   ;\n}\n\nvoid main_1() {\n  GeometryContext geometry_1 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_1.uv).rgb;\n  }\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = lightContext.ambient.lights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = lightContext.directional.lights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_0(light),\n                           geometry_1,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = lightContext.point.lights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_1(light),\n                           geometry_1,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  fragColor = fragColor + material.emissive.xyz;\n  gl_FragColor = vec4(fragColor, material.opacity);\n}\n\n#endif\n\n//\n// Flat shading model.\n//\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n//\n// Shader entry.\n//\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  gl_FragColor = material.color;\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, geometry.uv);\n  }\n#endif\n\n  gl_FragColor.a = material.opacity;\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_0();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_1();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_2();\n}\n#elif defined SHADER_MAIN_BODY\nSHADER_MAIN_BODY_SOURCE\n#else\nvoid main() {\n  discard;\n}\n#endif\n",kDefaultMaterialOpacity=exports.kDefaultMaterialOpacity=1,kDefaultMaterialColor=exports.kDefaultMaterialColor=new _color.Color(100/255,110/255,1),kDefaultMaterialType=exports.kDefaultMaterialType=types.MaterialType,kDefaultMaterialBlendingState=exports.kDefaultMaterialBlendingState={equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},kDefaultMaterialCullingState=exports.kDefaultMaterialCullingState={enable:!0,face:"back"},kDefaultMaterialDepthState=exports.kDefaultMaterialDepthState={enable:!0,range:[0,1],func:"less",mask:!0},Material=exports.Material=function(n){function e(n){function t(n,e){"function"==typeof n&&(e=n,n={}),n=(0,_utils.isArrayLike)(n)?[].concat(_toConsumableArray(n)):_extends({},n||{}),e=e||function(){};var t=(0,_utils.isArrayLike)(n)?{}:n.map;return r.injectContext(t||{},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.map;"function"==typeof i?i(function(t){g(n,e)}):g(n,e)}),this}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Material");var a=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=i.materialMap,r=void 0===o?new MaterialMap(n,i):o,l=i.uniforms,s=void 0===l?new MaterialUniforms(n,i):l,u=i.context,f=void 0===u?new MaterialContext(n,i):u,c=i.state,d=void 0===c?new MaterialState(n,i):c,g=n.regl(_extends({},d,{uniforms:s,context:f}));return a}return _inherits(e,n),_createClass(e,null,[{key:"id",value:function(){return MATERIAL_COMMAND_NEXT_ID++}},{key:"typeName",value:function(n){return(0,_defined2.default)(Object.keys(types).find(function(e){return n==types[e]}),n,"Material").replace(/Type$/,"")}}]),e}(_command.Command),MaterialState=exports.MaterialState=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),t.blending&&(t.blend=t.blending,delete t.blending),t.culling&&(t.cull=t.culling,delete t.culling),null==t.blend&&(t.blend={}),null==t.cull&&(t.cull={}),null==t.depth&&(t.depth={});var i=t.fragmentShader,a=void 0===i?kDefaultMaterialFragmentShader:i,o=t.fragmentShaderMain,r=t.type,l=void 0===r?types.MaterialType:r,s=Material.typeName(l),u=_extends({MATERIAL_TYPE:s},t.shaderDefines);"string"==typeof o?(u.SHADER_MAIN_BODY=1,a=a.replace("SHADER_MAIN_BODY_SOURCE",o)):u["use"+s]=1,null!=t.map&&(u.HAS_MAP=1);for(var f in types)u[""+f]=types[f];u.MAX_POINT_LIGHTS=_limits.kMaxPointLights,u.MAX_AMBIENT_LIGHTS=_limits.kMaxAmbientLights,u.MAX_DIRECTIONAL_LIGHTS=_limits.kMaxDirectionalLights;for(var c in u)a="#define "+c+" "+u[c]+"\n"+a;this.frag=a,this.blend={equation:function(){return(0,_defined2.default)(t.blend.equation,kDefaultMaterialBlendingState.equation)},enable:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.blend,a=void 0===i?void 0:i,o=e.opacity,r=void 0===o?(0,_defined2.default)(t.opacity,1):o,l=e.transparent,s=void 0===l?(0,_defined2.default)(t.transparent,!1):l,u=e.blending,f=void 0===u?(0,_defined2.default)(a,t.blend.enable,kDefaultMaterialBlendingState.enable):u;return _objectDestructuringEmpty(n),!!(r<1||s)||("boolean"==typeof f?f:s)},color:function(){return(0,_utils.ensureRGBA)((0,_defined2.default)(t.blend.color,kDefaultMaterialBlendingState.color))},func:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.opacity,a=void 0===i?(0,_defined2.default)(t.opacity,1):i,o=e.transparent,r=void 0===o?(0,_defined2.default)(t.transparent,!1):o;return _objectDestructuringEmpty(n),a<1||r?{src:"src alpha",dst:"one"}:(0,_defined2.default)(t.blend.func,kDefaultMaterialBlendingState.func)}},this.cull={enable:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.cull,a=void 0===i?t.cull.enable:i;return _objectDestructuringEmpty(n),Boolean((0,_defined2.default)(a,kDefaultMaterialCullingState.enable))},face:function(n,e){var i=e.cullFace,a=void 0===i?t.cull.face:i;return _objectDestructuringEmpty(n),(0,_defined2.default)(a,kDefaultMaterialCullingState.face)}},this.depth={enable:function(){return(0,_defined2.default)(t.depth.enable,kDefaultMaterialDepthState.enable)},range:function(){return(0,_defined2.default)(t.depth.range,kDefaultMaterialDepthState.range)},func:function(){return(0,_defined2.default)(t.depth.func,kDefaultMaterialDepthState.func)},mask:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.opacity,a=void 0===i?(0,_defined2.default)(t.opacity,1):i,o=e.transparent,r=void 0===o?(0,_defined2.default)(t.transparent,t.blend.enable,kDefaultMaterialDepthState.enable,!1):o;return _objectDestructuringEmpty(n),!!(a<1||r)||(0,_defined2.default)(t.depth.mask,kDefaultMaterialDepthState.mask)}}},MaterialContext=exports.MaterialContext=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n);var i=t.type,a=void 0===i?types.MaterialType:i,o=t.id;void 0===o&&Material.id();this.opacity=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.opacity,a=void 0===i?t.opacity:i;return _objectDestructuringEmpty(n),(0,_defined2.default)(a,kDefaultMaterialOpacity)},this.type=function(){return(0,_defined2.default)(a,types.MaterialType)},this.color=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.color,a=void 0===i?t.color:i;return _objectDestructuringEmpty(n),(0,_utils.ensureRGBA)((0,_defined2.default)(a,kDefaultMaterialColor))}},MaterialUniforms=exports.MaterialUniforms=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n);var i=e.regl.texture();this["material.opacity"]=function(n){var e=n.opacity,i=void 0===e?t.opacity:e;return(0,_defined2.default)(i,kDefaultMaterialOpacity)},this["material.color"]=function(n){var e=n.color,i=void 0===e?t.color:e;return(0,_defined2.default)(i,kDefaultMaterialColor)},this["material.type"]=function(n){var e=n.type,i=void 0===e?t.type:e;return(0,_defined2.default)(i,kDefaultMaterialType)},t.map&&(this["map.resolution"]=function(n){var e=n.textureResolution;return(0,_defined2.default)(e,[0,0])},this["map.data"]=function(n){var e=n.texture;n.textureData;return(0,_defined2.default)(e,i)})},MaterialMap=exports.MaterialMap=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.injectContext=e.regl({context:{map:function(n,e){var i=e.map,a=void 0===i?t.map:i;return _objectDestructuringEmpty(n),a}}})};

},{"../light/limits":39,"../material/types":46,"../stats":55,"../utils":56,"./color":5,"./command":6,"./texture":20,"defined":147,"gl-vec4":301,"glsl-inject-defines":320,"glslify":330}],16:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshAttributes=exports.MeshUniforms=exports.MeshState=exports.MeshContext=exports.Mesh=exports.kDefaultMeshVertexShader=exports.kDefaultMeshPrimitive=exports.kDefaultMeshWireframeThickness=exports.kDefaultMeshWireframePrimitive=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_utils=_dereq_("../utils"),_object3d=_dereq_("./object3d"),_math=_dereq_("../math"),_stats=_dereq_("../stats"),_geometry=_dereq_("./geometry"),_glslInjectDefines=_dereq_("glsl-inject-defines"),_glslInjectDefines2=_interopRequireDefault(_glslInjectDefines),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glslify=_dereq_("glslify"),_clamp=_dereq_("clamp"),_clamp2=_interopRequireDefault(_clamp),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),_glMat3=_dereq_("gl-mat3"),_glMat4=_interopRequireDefault(_glMat3),_glVec=_dereq_("gl-vec4"),_glVec3=_dereq_("gl-vec3"),_glVec4=_interopRequireDefault(_glVec3),_glVec5=_dereq_("gl-vec2"),_glVec6=_interopRequireDefault(_glVec5),kMat4Identity=_glMat2.default.identity([]),kMat3Identity=_glMat4.default.identity([]),kDefaultMeshWireframePrimitive=exports.kDefaultMeshWireframePrimitive="line strip",kDefaultMeshWireframeThickness=exports.kDefaultMeshWireframeThickness=1,kDefaultMeshPrimitive=exports.kDefaultMeshPrimitive="triangles",kDefaultMeshVertexShader=exports.kDefaultMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n  Object3D object;\n};\n\n//\n// Shader uniforms.\n//\nuniform Camera camera;\nuniform Mesh mesh;\n\n//\n// Shader IO.\n//\n\n#ifdef HAS_POSITIONS\nattribute vec3 position;\n#endif\n\n#ifdef HAS_NORMALS\nattribute vec3 normal;\n#endif\n\n#ifdef HAS_UVS\nattribute vec2 uv;\n#endif\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n#ifdef HAS_TRANSFORM_FUNC\n  TRANSFORM_FUNC_SOURCE\n#endif\n\nvoid main() {\n\n#if defined HAS_POSITIONS\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  gl_Position =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0);\n#endif\n\n#ifdef HAS_NORMALS\n  vnormal = normalize(mesh.modelNormal * normal);\n#endif\n\n#ifdef HAS_UVS\n  vuv = mesh.object.scale.xy * uv;\n#endif\n\n#ifdef HAS_TRANSFORM_FUNC\n  transform();\n#endif\n}\n\n",Mesh=exports.Mesh=function(e){function t(e){function n(e,t,n){_objectDestructuringEmpty(e),h(t,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];r[0].visible;m(t,function(){!1===t.visible?p(t,n):0!=t.draw?(p(t),n.apply(void 0,r)):p(t,n)})})}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.incrementStat)("Mesh"),0==r.geometry instanceof _geometry.Geometry&&(r.geometry=new _geometry.Geometry({complex:r.geometry}));var i=r.attributes,o=void 0===i?new MeshAttributes(e,r):i,s=r.uniforms,l=void 0===s?new MeshUniforms(e,r):s,u=r.context,a=void 0===u?new MeshContext(e,r):u,c=r.state,f=void 0===c?new MeshState(e,r):c,d=r.update,m=void 0===d?function(e,t){return _objectDestructuringEmpty(e),t()}:d,h=e.regl({context:a}),p=e.regl(_extends({},f,{attributes:o,uniforms:l}));return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({},r,{context:a,update:n})))}return _inherits(t,e),t}(_object3d.Object3D),MeshContext=exports.MeshContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=n.geometry;return Object.defineProperties(r,_defineProperty({computedBoundingBox:{enumerable:!1,writable:!0,value:null},computedSize:{enumerable:!1,writable:!0,value:null}},"computedSize",{enumerable:!1,writable:!0,value:null})),r.geometry=i,r.boundingBox=function(){return r.computeBoundingBox.apply(r,arguments)},r.size=function(){return r.computeSize.apply(r,arguments)},r.visible=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.visible;return _objectDestructuringEmpty(e),(0,_defined2.default)(r,n.visible,!0)},r}return _inherits(t,e),_createClass(t,[{key:"computeBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null==this.geometry?null:(1!=e&&null!=this.computedBoundingBox||(this.computedBoundingBox=this.geometry.computeBoundingBox()),this.computedBoundingBox)}},{key:"computeSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,n=void 0===t?1:t;if(null==this.geometry)return null;if(this.computedSize)return this.computedSize;this.computeBoundingBox();var r=this.computedBoundingBox,i=r[0].length,o=r[0],s=r[1],l=null;switch(i){case 3:l=_glVec4.default.subtract(new _math.Vector3,s,o);break;case 2:l=_glVec6.default.subtract(new _math.Vector2,s,o);break;default:return null}switch(i){case 3:_glVec4.default.multiply(l,l,n);break;case 2:_glVec6.default.multiply(l,l,n)}this.computedSize=l}}]),t}(_object3d.Object3DContext),MeshState=exports.MeshState=function e(t,n){_classCallCheck(this,e);var r=n.fragmentShader,i=void 0===r?null:r,o=n.vertexShader,s=void 0===o?kDefaultMeshVertexShader:o,l=n.geometry,u=void 0===l?null:l,a=n.vertexShaderTransform,c=_extends({},n.shaderDefines);u.positions&&(c.HAS_POSITIONS=1),u.normals&&(c.HAS_NORMALS=1),u.uvs&&(c.HAS_UVS=1),"string"==typeof a&&(c.HAS_TRANSFORM_FUNC=1,"string"==typeof s&&(s=s.replace("TRANSFORM_FUNC_SOURCE",a))),this.vert="string"==typeof s?(0,_glslInjectDefines2.default)(s,c):null,this.frag="string"==typeof i?(0,_glslInjectDefines2.default)(i,c):null,this.lineWidth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wireframeThickness,i=void 0===r?n.wireframeThickness:r,o=t.lineWidth,s=void 0===o?1:o;return _objectDestructuringEmpty(e),Math.max(1,(0,_defined2.default)(i,s,kDefaultMeshWireframeThickness))},this.primitive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.primitive,i=void 0===r?null:r,o=t.wireframe,s=void 0!==o&&o;return _objectDestructuringEmpty(e),"string"==typeof i?i:s?(0,_defined2.default)(n.wireframePrimitive,kDefaultMeshWireframePrimitive):"string"==typeof n.primitive?n.primitive:kDefaultMeshPrimitive},this.elements=u&&u.cells?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wireframe,i=(void 0===r&&n.wireframe,t.count),o=void 0===i?n.count:i;_objectDestructuringEmpty(e);var s=u.cells;return s&&"number"==typeof o&&(o=(0,_clamp2.default)(Math.floor(o),0,s.length),s=s.slice(0,o)),s}:null,this.count=!u||u.cells?null:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.count,i=void 0===r?u.positions.length:r;return _objectDestructuringEmpty(e),null!=i?i:n.count?n.count:u&&u.complex?u.positions.length:null};for(var f in this)null==this[f]&&delete this[f]},MeshUniforms=exports.MeshUniforms=function e(t,n){_classCallCheck(this,e),this["mesh.model"]=t.regl.context("transform"),this["mesh.modelNormal"]=function(e){var t=e.transform;return(0,_utils.isArrayLike)(t)?_glMat4.default.normalFromMat4([],t)||kMat3Identity:kMat3Identity},this["mesh.object.scale"]=t.regl.context("scale"),this["mesh.object.position"]=t.regl.context("position"),this["mesh.object.rotation"]=t.regl.context("rotation"),this["mesh.object.transform"]=t.regl.context("transform");for(var r in this)null==this[r]&&delete this[r]},MeshAttributes=exports.MeshAttributes=function e(t,n){_classCallCheck(this,e);var r=n.geometry;this.position=(0,_defined2.default)(r.positions,null),this.normal=(0,_defined2.default)(r.normals,null),this.uv=(0,_defined2.default)(r.uvs,null);for(var i in this)null==this[i]&&delete this[i]};

},{"../math":48,"../stats":55,"../utils":56,"./geometry":10,"./object3d":17,"clamp":99,"defined":147,"gl-mat3":171,"gl-mat4":189,"gl-vec2":241,"gl-vec3":271,"gl-vec4":301,"glsl-inject-defines":320,"glslify":330}],17:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Object3DContext=exports.Object3D=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)},_createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_stats=_dereq_("../stats"),_math=_dereq_("../math"),_command=_dereq_("./command"),_utils=_dereq_("../utils"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),_glVec=_dereq_("gl-vec4"),_glVec3=_dereq_("gl-vec3"),_glVec5=_dereq_("gl-vec2"),_glQuat=_dereq_("gl-quat"),OBJECT_COMMAND_NEXT_ID=111,kMat4Identity=_glMat2.default.identity([]),Object3D=exports.Object3D=function(t){function e(t){function r(t,e){return"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":_typeof(t))&&t?t:{},e="function"==typeof e?e:function(){},c(t,function(t,r,n){"function"==typeof a?a(t,r||{},e):"function"==typeof e&&e(t,r||{})}),this}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),(0,_stats.incrementStat)("Object3D");var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),i=n.update,a=void 0===i?null:i;if(null!=a&&"function"!=typeof a)throw new TypeError("Expecting update function to be a function. Got "+(void 0===a?"undefined":_typeof(a))+".");var u=n.context,l=void 0===u?new Object3DContext(t,n):u;if(0==l instanceof Object3DContext)throw new TypeError("Expecting instance of Object3DContext given.");var c=t.regl({context:l});return o}return _inherits(e,t),_createClass(e,null,[{key:"id",value:function(){return OBJECT_COMMAND_NEXT_ID++}},{key:"count",value:function(){var t=(0,_stats.getStats)("Object3D");return t?t.length:0}}]),e}(_command.Command),Object3DContext=exports.Object3DContext=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var o=n.computeTransformMatrix,i=void 0===o||o,a=n.computeLocalMatrix,u=void 0===a||a,l=n.rotation,c=void 0===l?[0,0,0,1]:l,f=n.position,s=void 0===f?[0,0,0]:f,d=n.scale,y=void 0===d?[1,1,1]:d,p=n.id,m=void 0===p?Object3D.id():p,_=_glMat2.default.identity([]),b=_glMat2.default.identity([]);Object.defineProperties(this,{shouldComputeTransformMatrix:{enumerable:!1,value:i},shouldComputeLocalMatrix:{enumerable:!1,value:u},initialRotation:{get:function(){return c},enumerable:!1},initialPosition:{get:function(){return s},enumerable:!1},initialScale:{get:function(){return y},enumerable:!1},transformMatrix:{get:function(){return _},enumerable:!1},localMatrix:{get:function(){return b},enumerable:!1}}),this.id=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _objectDestructuringEmpty(t),e=e||{},null!=e.id?(0,_defined2.default)(e.id,m):m},this.scale=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(t),e=e||{};var r=(0,_defined2.default)(e.scale,y);if("number"==typeof r)return[r,r,r];if(r instanceof _math.Vector)return[].concat(_toConsumableArray(r));if(Array.isArray(r))return[].concat(_toConsumableArray(r));if(null!=r)try{return[].concat(_toConsumableArray(r))}catch(t){return[r,r,r]}},this.position=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(t),e=e||{};var r=(0,_defined2.default)(e.position,s);if(r instanceof _math.Vector)return[].concat(_toConsumableArray(r));if(Array.isArray(r))return[].concat(_toConsumableArray(r));if(null!=r)try{return[].concat(_toConsumableArray(r))}catch(t){return[r,r,r]}},this.rotation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_objectDestructuringEmpty(t),e=e||{};var r=(0,_defined2.default)(e.rotation,c);return r instanceof _math.Vector?[].concat(_toConsumableArray(r)):Array.isArray(r)?[].concat(_toConsumableArray(r)):[0,0,0,1]},this.transform=function(){return r.computeTransformMatrix.apply(r,arguments)},this.matrix=function(){return r.computeLocalMatrix.apply(r,arguments)}}return _createClass(t,[{key:"computeTransformMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.transform,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.transform;return this.computeLocalMatrix.apply(this,arguments),!1===this.shouldComputeTransformMatrix?(0,_defined2.default)(n,this.transformMatrix):(e&&_glMat2.default.multiply(this.transformMatrix,e,this.localMatrix),n&&_glMat2.default.multiply(this.transformMatrix,n,this.transformMatrix),this.transformMatrix)}},{key:"computeLocalMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.rotation,n=void 0===r?this.initialRotation:r,o=e.position,i=void 0===o?this.initialPosition:o,a=e.scale,u=void 0===a?this.initialScale:a;return _objectDestructuringEmpty(t),!1===this.shouldComputeLocalMatrix?this.localMatrix:("number"==typeof u&&(u=[u,u,u]),_glMat2.default.fromRotationTranslation(this.localMatrix,n,i),_glMat2.default.scale(this.localMatrix,this.localMatrix,u),this.localMatrix)}}]),t}();

},{"../math":48,"../stats":55,"../utils":56,"./command":6,"defined":147,"gl-mat4":189,"gl-quat":214,"gl-vec2":241,"gl-vec3":271,"gl-vec4":301}],18:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamContext=exports.Stream=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},_command=_dereq_("./command"),_through=_dereq_("through2"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),Stream=exports.Stream=function(t){function e(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return null!=t.data&&i&&i.stream?i.stream.write(t.data,function(){u(t,e)}):u(t,e),this}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var n=o.context,i=void 0===n?new StreamContext(t,o):n,u=t.regl({context:i}),a=o.update,c=void 0===a?r:a;return _possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c))}return _inherits(e,t),e}(_command.Command),StreamContext=exports.StreamContext=function t(e){function r(t,e,r){_objectDestructuringEmpty(e),"function"==typeof u&&(t=(0,_defined2.default)(u(t),t)),null!=t&&(a=t,this.push(a)),r()}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var n=o.stream,i=void 0===n?(0,_through.obj)(r):n,u=o.transform,a=null;i.on("error",function(t){e.emit("error",t)}),this.stream=i,this.data=function(){return _extends({},a)}};

},{"./command":6,"defined":147,"through2":417}],19:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextContext=exports.Text=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_extrude_geometry=_dereq_("./extrude_geometry"),_object3d=_dereq_("./object3d"),_command=_dereq_("./command"),_mesh=_dereq_("./mesh"),_vectorizeText=_dereq_("vectorize-text"),_vectorizeText2=_interopRequireDefault(_vectorizeText),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_unindexMesh=_dereq_("unindex-mesh"),kGeometryCache={},kComplexCache={},kMeshCache={},Text=exports.Text=function(e){function t(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=o(e);return l(function(){f(e||{},function(){"function"==typeof n?n(e,t):t.apply(void 0,arguments)})}),this}function o(t){"string"==typeof t&&(t={text:t});var n=t,o=n.text,r="object"==(void 0===t?"undefined":_typeof(t))?JSON.stringify(t):null,i=null,u=null,c=null;if("string"==typeof o&&"string"==typeof r&&"function"==typeof kMeshCache[r])c=kMeshCache[r];else if("string"==typeof r){u=(0,_vectorizeText2.default)(o,_extends({textBaseline:(0,_defined2.default)(t.baseline,"hanging"),orientation:"ccw",textAlign:(0,_defined2.default)(t.align,"center"),width:1},t));var f=Array(10).fill([]).map(function(e,t){return[0,0,.001*t]});i=new _extrude_geometry.ExtrudeGeometry(_extends({},u,{path:f})),c=new _mesh.Mesh(e,{geometry:i}),kComplexCache[r]=u,kGeometryCache[r]=i,kMeshCache[r]=c}return c}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n)),u=r.context,c=void 0===u?new TextContext(e,r):u,f=e.regl({context:c}),l=new _object3d.Object3D(e,{scale:[1,-1,1]});return i}return _inherits(t,e),t}(_command.Command),TextContext=exports.TextContext=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.text=function(e,t){return _objectDestructuringEmpty(e),t=t||{},(0,_defined2.default)(t.text,n.text,null)}};

},{"./command":6,"./extrude_geometry":8,"./mesh":16,"./object3d":17,"defined":147,"unindex-mesh":424,"vectorize-text":431}],20:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureState=exports.TextureContext=exports.Texture=exports.kDefaultTextureState=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_stats=_dereq_("../stats"),_command=_dereq_("./command"),_window=_dereq_("global/window"),_window2=_interopRequireDefault(_window),HTMLVideoElement=_window2.default.HTMLVideoElement,HTMLCanvasElement=_window2.default.HTMLCanvasElement,HTMLImageElement=_window2.default.HTMLImageElement,isCanvas=function(e){return e instanceof HTMLCanvasElement},isVideo=function(e){return e instanceof HTMLVideoElement},isImage=function(e){return e instanceof HTMLImageElement},_HTMLVideoElement$HAV3=HTMLVideoElement.HAVE_CURRENT_DATA,HAVE_CURRENT_DATA=void 0===_HTMLVideoElement$HAV3?2:_HTMLVideoElement$HAV3,_HTMLVideoElement$HAV5=HTMLVideoElement.HAVE_ENOUGH_DATA,HAVE_ENOUGH_DATA=void 0===_HTMLVideoElement$HAV5?4:_HTMLVideoElement$HAV5,kDefaultTextureState=exports.kDefaultTextureState=Object.seal({min:"linear",mag:"linear"}),Texture=exports.Texture=function(e){function t(e){function n(e,t){return"function"==typeof e&&(t=e,e={}),e=e||{},t=t||function(){},i.update(_extends({},o,e)),s(t),this}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),(0,_stats.incrementStat)("Texture");var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n)),i=new TextureState(e,o||{}),a=o.context,u=void 0===a?new TextureContext(e,i,o):a,s=e.regl({context:u});return r}return _inherits(t,e),_createClass(t,null,[{key:"isTextureDataReady",value:function(e){return!!(e&&isVideo(e)&&e.readyState>=HAVE_ENOUGH_DATA)||!!((e&&isImage(e)||isCanvas(e))&&e.width&&e.height)}},{key:"getTextureDataResolution",value:function(e,t){return isImage(t)||isCanvas(t)?[t.width,t.height]:isVideo(t)?[t.videoWidth||0,t.videoHeight||0]:t&&t.shape?t.shape:e.shape?e.shape:e.width&&e.height?[e.width,e.height]:[0,0]}}]),t}(_command.Command),TextureContext=exports.TextureContext=function e(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),Object.defineProperties(this,{data:{enumerable:!1,get:function(){return n.data}},textureState:{enumerable:!1,get:function(){return n}}}),this.textureResolution=function(){return Texture.getTextureDataResolution(n,n.data)},this.textureData=function(){return n.data},this.texture=function(){return n.texture}},TextureState=exports.TextureState=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),Object.assign(this,_extends({},kDefaultTextureState,n));var o=t.regl.texture(_extends({},this)),r=n.data,i=void 0===r?null:r,a=0,u=null;Object.defineProperties(this,{ctx:{enumerable:!1,get:function(){return t}},data:{enumerable:!0,get:function(){return i||null},set:function(e){i=e}},texture:{enumerable:!1,get:function(){return o}},lastVideoUpdate:{enumerable:!1,set:function(e){a=e},get:function(){return a}},previouslyUploadedData:{enumerable:!1,set:function(e){u=e},get:function(){return u}}})}return _createClass(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?this.data:t,o=this.ctx.regl.now(),r=!1;if(Texture.isTextureDataReady(n)&&(isVideo(n)&&n.readyState>=HAVE_CURRENT_DATA?(r=!0,o-this.lastVideoUpdate>=.01&&(this.lastVideoUpdate=o)):n!=this.previouslyUploadedData&&(r=!0)),r){var i=Texture.getTextureDataResolution(this,n);i[0]>0&&i[1]>0||(r=!1)}if(r&&n){if(this.data=n,this.previouslyUploadedData=n,"function"!=typeof this.texture)throw new TypeError("TextureState expects .texture to be a function. Got "+_typeof(this.texture)+".");this.texture(this)}return r}}]),e}();

},{"../stats":55,"./command":6,"global/window":319}],21:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxGeometry=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_primitiveCube=_dereq_("primitive-cube"),_primitiveCube2=_interopRequireDefault(_primitiveCube),_geometry=_dereq_("../core/geometry"),BoxGeometry=exports.BoxGeometry=function(e){function t(e){_classCallCheck(this,t),null!=e&&"object"==(void 0===e?"undefined":_typeof(e))||(e={});var o=e,r=o.segments,n=o.x,i=o.y,u=o.z;if(null==r&&(r=1),null==n&&(n=1),null==i&&(i=1),null==u&&(u=1),"number"!=typeof n)throw new TypeError("Expecting '.x' to a be a number. Got "+(void 0===n?"undefined":_typeof(n))+".");if("number"!=typeof i)throw new TypeError("Expecting '.y' to a be a number. Got "+(void 0===i?"undefined":_typeof(i))+".");if("number"!=typeof u)throw new TypeError("Expecting '.z' to a be a number. Got "+(void 0===u?"undefined":_typeof(u))+".");if("number"!=typeof r&&"object"!=(void 0===r?"undefined":_typeof(r)))throw new TypeError("Expecting '.segments' to be an object or 'number'. Got "+(void 0===r?"undefined":_typeof(r)));if("number"==typeof r)r={x:r,y:r,z:r};else if("object"==(void 0===r?"undefined":_typeof(r))){if("number"!=typeof r.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+_typeof(r.x)+".");if("number"!=typeof r.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+_typeof(r.y)+".");if("number"!=typeof r.z)throw new TypeError("Expecting '.segments.z' to a be a number. Got "+_typeof(r.z)+".")}var f=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitiveCube2.default)(n,i,u,r.x,r.y,r.z)}));return f.size={x:n,y:i,z:u},f.segments=r,f}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-cube":370}],22:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CapsuleGeometry=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_primitiveCapsule=_dereq_("primitive-capsule"),_primitiveCapsule2=_interopRequireDefault(_primitiveCapsule),_geometry=_dereq_("../core/geometry"),CapsuleGeometry=exports.CapsuleGeometry=function(e){function t(e){_classCallCheck(this,t),null!=e&&"object"==(void 0===e?"undefined":_typeof(e))||(e={});var o=e,r=o.radius,n=o.height,i=o.segments,u=o.resolution;null==r&&(r=1),null==n&&(n=.5),null==i&&(i=12),null==u&&(u=24);for(var l in e)if(e.hasOwnProperty(l)&&"number"!=typeof e[l])throw new TypeError("Expecting '"+l+"' to be a number. Got "+_typeof(e[l])+".");var p=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitiveCapsule2.default)(r,n,u,i)}));return p.radius=r,p.height=n,p.segments=i,p.resolution=u,p}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-capsule":369}],23:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CylinderGeometry=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_primitiveCylinder=_dereq_("primitive-cylinder"),_primitiveCylinder2=_interopRequireDefault(_primitiveCylinder),_geometry=_dereq_("../core/geometry"),CylinderGeometry=exports.CylinderGeometry=function(e){function t(e){_classCallCheck(this,t),null!=e&&"object"==(void 0===e?"undefined":_typeof(e))||(e={});var o=e,r=o.height,n=o.radiusTop,i=o.radiusBottom,u=o.radialSegments,l=o.heightSegments;null==r&&(r=5),null==n&&(n=1),null==i&&(i=1),null==u&&(u=50),null==l&&(l=50);for(var y in e)if(e.hasOwnProperty(y)&&"number"!=typeof e[y])throw new TypeError("Expecting '"+y+"' to be a number. Got "+_typeof(e[y])+".");var f=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitiveCylinder2.default)(n,i,r,u,l)}));return f.height=r,f.radiusTop=n,f.radiusBottom=i,f.radialSegments=u,f.heightSegments=l,f}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-cylinder":371}],24:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _triangle=_dereq_("./triangle");Object.defineProperty(exports,"TriangleGeometry",{enumerable:!0,get:function(){return _triangle.TriangleGeometry}});var _cylinder=_dereq_("./cylinder");Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return _cylinder.CylinderGeometry}});var _capsule=_dereq_("./capsule");Object.defineProperty(exports,"CapsuleGeometry",{enumerable:!0,get:function(){return _capsule.CapsuleGeometry}});var _sphere=_dereq_("./sphere");Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return _sphere.SphereGeometry}});var _plane=_dereq_("./plane");Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return _plane.PlaneGeometry}});var _torus=_dereq_("./torus");Object.defineProperty(exports,"TorusGeometry",{enumerable:!0,get:function(){return _torus.TorusGeometry}});var _box=_dereq_("./box");Object.defineProperty(exports,"BoxGeometry",{enumerable:!0,get:function(){return _box.BoxGeometry}});

},{"./box":21,"./capsule":22,"./cylinder":23,"./plane":25,"./sphere":26,"./torus":27,"./triangle":28}],25:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaneGeometry=void 0;var _primitivePlane=_dereq_("primitive-plane"),_primitivePlane2=_interopRequireDefault(_primitivePlane),_geometry=_dereq_("../core/geometry"),PlaneGeometry=exports.PlaneGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.size,r=void 0===o?{x:1,y:1}:o,n=e.segments,i=void 0===n?{x:5,y:5}:n,u=e.quads,s=void 0!==u&&u;_classCallCheck(this,t),"number"==typeof i&&(i={x:i,y:i}),"number"==typeof r&&(r={x:r,y:r});var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitivePlane2.default)(r.x,r.y,i.x,i.y,{quads:s})}));return l.size=r,l.quads=s,l.segments=i,l}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-plane":372}],26:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SphereGeometry=void 0;var _primitiveSphere=_dereq_("primitive-sphere"),_primitiveSphere2=_interopRequireDefault(_primitiveSphere),_geometry=_dereq_("../core/geometry"),SphereGeometry=exports.SphereGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.radius,o=void 0===r?1:r,n=e.segments,i=void 0===n?32:n;_classCallCheck(this,t);var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitiveSphere2.default)(o,{segments:i})}));return u.radius=o,u.segments=i,u}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-sphere":373}],27:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TorusGeometry=void 0;var _primitiveTorus=_dereq_("primitive-torus"),_primitiveTorus2=_interopRequireDefault(_primitiveTorus),_geometry=_dereq_("../core/geometry"),TorusGeometry=exports.TorusGeometry=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.majorSegments,n=void 0===r?32:r,i=o.minorSegments,u=void 0===i?64:i,s=o.majorRadius,a=void 0===s?1:s,c=o.minorRadius,f=void 0===c?.5:c,l=o.arc,p=void 0===l?2*Math.PI:l;_classCallCheck(this,t);var m=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,_primitiveTorus2.default)((e={majorSegments:n,minorSegments:u,majorRadius:a},_defineProperty(e,"minorSegments",u),_defineProperty(e,"arc",p),e))}));return m.majorSegments=n,m.minorSegments=u,m.majorRadius=a,m.minorRadius=f,m.arc=p,m}return _inherits(t,e),t}(_geometry.Geometry);

},{"../core/geometry":10,"primitive-torus":374}],28:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TriangleGeometry=void 0;var _geometry=_dereq_("../core/geometry"),TriangleGeometry=exports.TriangleGeometry=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{complex:{positions:[[-1,-.5*Math.sqrt(3),0],[1,-.5*Math.sqrt(3),0],[0,.5*Math.sqrt(3),0]],normals:[[-1,-1,0],[1,-1,0],[0,1,0]],uvs:[[-1,-.5*Math.sqrt(3)],[1,-.5*Math.sqrt(3)],[0,.5*Math.sqrt(3)]]}}))}return _inherits(e,t),e}(_geometry.Geometry);

},{"../core/geometry":10}],29:[function(_dereq_,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function makeAPI(e){for(var r in e)!function(r){!function(){if("function"==typeof e[r]){var t=function(){return new(Function.prototype.bind.apply(i,[null].concat(Array.prototype.slice.call(arguments))))},i=e[r],a=!0,n=!1,o=void 0;try{for(var u,c=Object.getOwnPropertyNames(e[r])[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;null==t[l]&&(t[l]=e[r][l])}}catch(e){n=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(n)throw o}}Object.defineProperty(exports,r,{get:function(){return t}})}else Object.defineProperty(exports,r,{get:function(){return e[r]}})}()}(r)}var _core=_dereq_("./core"),core=_interopRequireWildcard(_core),_mesh=_dereq_("./mesh"),mesh=_interopRequireWildcard(_mesh),_math=_dereq_("./math"),math=_interopRequireWildcard(_math),_input=_dereq_("./input"),input=_interopRequireWildcard(_input),_light=_dereq_("./light"),light=_interopRequireWildcard(_light),_cameras=_dereq_("./cameras"),cameras=_interopRequireWildcard(_cameras),_material=_dereq_("./material"),material=_interopRequireWildcard(_material),_geometry=_dereq_("./geometry"),geometry=_interopRequireWildcard(_geometry);[core,mesh,math,input,light,cameras,material,geometry].forEach(makeAPI);

},{"./cameras":1,"./core":12,"./geometry":24,"./input":30,"./light":38,"./material":43,"./math":48,"./mesh":53}],30:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _orientation=_dereq_("./orientation");Object.keys(_orientation).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _orientation[e]}})});var _keyboard=_dereq_("./keyboard");Object.keys(_keyboard).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _keyboard[e]}})});var _mouse=_dereq_("./mouse");Object.keys(_mouse).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _mouse[e]}})});var _touch=_dereq_("./touch");Object.keys(_touch).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _touch[e]}})});var _webvr=_dereq_("./webvr");Object.keys(_webvr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _webvr[e]}})});

},{"./keyboard":31,"./mouse":32,"./orientation":33,"./touch":34,"./webvr":35}],31:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==(void 0===o?"undefined":_typeof2(o))&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+(void 0===o?"undefined":_typeof2(o)));e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardInput=void 0;var _extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_stats=_dereq_("../stats"),_command=_dereq_("../core/command"),_keycode=_dereq_("keycode"),_keycode2=_interopRequireDefault(_keycode),_domEvents=_dereq_("dom-events"),_domEvents2=_interopRequireDefault(_domEvents),KeyboardInput=exports.KeyboardInput=function(e){function o(e){function t(){i()}function n(o){if(e.hasFocus){var t=o.which||o.keyCode||o.charCode;null!=t&&(c[t]=!0,s[(0,_keycode2.default)(t)]=!0)}}function r(o){var t=o.which||o.keyCode||o.charCode;e.hasFocus&&null!=t&&(c[t]=!1,s[(0,_keycode2.default)(t)]=!1)}function u(e,o){"function"==typeof e&&(o=e,e={}),e="object"==(void 0===e?"undefined":_typeof(e))&&e?e:{},(o="function"==typeof o?o:function(){})(_extends({},e,{keycodes:c,keys:s}))}function i(){for(var e in c)c[e]=!1;for(var o in s)s[o]=!1}arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,o),(0,_stats.registerStat)("KeyboardInput");var f=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,u)),c={},s={};return _domEvents2.default.on(document,"keydown",n,!1),_domEvents2.default.on(document,"keyup",r,!1),e.on("blur",t),e.once("destroy",function(){e.off("blur",t),_domEvents2.default.off(document,"keydown",n),_domEvents2.default.off(document,"keyup",r)}),f}return _inherits(o,e),o}(_command.Command);

},{"../core/command":6,"../stats":55,"dom-events":148,"keycode":339}],32:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MouseInput=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_stats=_dereq_("../stats"),_command=_dereq_("../core/command"),_mouseChange=_dereq_("mouse-change"),_mouseChange2=_interopRequireDefault(_mouseChange),_mouseWheel=_dereq_("mouse-wheel"),_mouseWheel2=_interopRequireDefault(_mouseWheel),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_domEvents=_dereq_("dom-events"),_domEvents2=_interopRequireDefault(_domEvents),_raf=_dereq_("raf"),_raf2=_interopRequireDefault(_raf),MouseInput=exports.MouseInput=function(e){function t(e){function n(e,t,n){u(e,t,n)}function r(e,t,n){!1!==l&&i(e,t,n)}function o(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":_typeof(e))&&e?e:{},(t="function"==typeof t?t:function(){})(_extends({},e,{wheel:s,allowWheel:(0,_defined2.default)(e.allowWheel,l)},_extends({},d,{currentX:(0,_defined2.default)(e.currentX,d.currentX),currentY:(0,_defined2.default)(e.currentY,d.currentY)})))}function u(e,t,n){d.buttons=e,(0,_raf2.default)(function(){d.deltaX=0,d.deltaY=0}),d.currentX==t&&d.currentY==n||(d.prevX=d.currentX,d.prevY=d.currentY,d.deltaX=t-d.currentX,d.deltaY=n-d.currentY,d.currentX=t,d.currentY=n)}function i(e,t,n){(0,_raf2.default)(function(){return Object.assign(s,{deltaX:0,deltaY:0,deltaZ:0})});var r=s.currentX,o=s.currentY,u=s.currentZ;Object.assign(s,{currentX:r+e,currentY:o+t,currentZ:u+n,deltaX:e,deltaY:t,deltaZ:n,prevX:r,prevY:o,prevZ:u})}var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=f.allowWheel,l=void 0===c||c;_classCallCheck(this,t),(0,_stats.registerStat)("MouseInput");var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o)),s={currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},d={buttons:0,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0};e.on("blur",function(){d.buttons=0});var p=(0,_mouseChange2.default)(e.domElement,n),_=(0,_mouseWheel2.default)(e.domElement,r);return e.once("destroy",function(){p.enabled=!1,_domEvents2.default.off(e.domElement,_)}),a}return _inherits(t,e),t}(_command.Command);

},{"../core/command":6,"../stats":55,"defined":147,"dom-events":148,"mouse-change":343,"mouse-wheel":346,"raf":377}],33:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrientationInput=exports.globalState=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)},_utils=_dereq_("../utils"),_math=_dereq_("../math"),_stats=_dereq_("../stats"),_command=_dereq_("../core/command"),_window=_dereq_("global/window"),_window2=_interopRequireDefault(_window),_domEvents=_dereq_("dom-events"),_domEvents2=_interopRequireDefault(_domEvents),_glQuat=_dereq_("gl-quat"),_raf=_dereq_("raf"),_raf2=_interopRequireDefault(_raf),globalState=exports.globalState={hasDeviceOrientation:!1,absolute:null,currentAlpha:0,currentBeta:90,currentGamma:0,deltaAlpha:0,deltaBeta:0,deltaGamma:0,prevAlpha:0,prevBeta:0,prevGamma:0};_domEvents2.default.on(_window2.default,"deviceorientation",function(t){var e=t.alpha,n=t.beta,r=t.gamma,o=t.absolute;if(null==e||null==n||null==r)return void(globalState.hasDeviceOrientation=!1);globalState.hasDeviceOrientation=!0,Object.assign(globalState,{absolute:o,currentAlpha:e,currentBeta:n,currentGamma:r,deltaAlpha:e-globalState.currentAlpha,deltaBeta:n-globalState.currentBeta,deltaGamma:r-globalState.currentGamma,prevAlpha:globalState.currentAlpha,prevBeta:globalState.currentBeta,prevGamma:globalState.currentGamma}),(0,_raf2.default)(function(){return Object.assign(globalState,{deltaAlpha:0,deltaBeta:0,deltaGamma:0})})}),_domEvents2.default.on(_window2.default,"devicemotion",function(t){Object.assign(globalState,{accelerationIncludingGravity:t.accelerationIncludingGravity,acceleration:t.acceleration,rotationRate:t.rotationRate,interval:t.interval})});var OrientationInput=exports.OrientationInput=function(t){function e(t){function n(t){Object.assign(c,t)}function r(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":_typeof(t))&&t?t:{},e="function"==typeof e?e:function(){},o(),e(_extends({},globalState,{deviceRotation:i,deviceEuler:l}))}function o(){c.length&&(c[0].getFrameData(u),i.set.apply(i,_toConsumableArray(u.pose.orientation||[0,0,0,1])),l.set.apply(l,_toConsumableArray(_math.Euler.fromQuaternion(i))))}_objectDestructuringEmpty(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),_classCallCheck(this,e),(0,_stats.registerStat)("OrienationInput");var a=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),i=new _math.Quaternion,l=new _math.Euler,u=new VRFrameData,c=[];return navigator.getVRDisplays().then(n).catch(function(e){t.emit("error",e)}),a}return _inherits(e,t),e}(_command.Command);

},{"../core/command":6,"../math":48,"../stats":55,"../utils":56,"dom-events":148,"gl-quat":214,"global/window":319,"raf":377}],34:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TouchInput=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)},_stats=_dereq_("../stats"),_command=_dereq_("../core/command"),_touchPosition=_dereq_("touch-position"),_domEvents=_dereq_("dom-events"),_domEvents2=_interopRequireDefault(_domEvents),_raf=_dereq_("raf"),_raf2=_interopRequireDefault(_raf),TouchInput=exports.TouchInput=function(t){function e(t){function o(t){var e=t.touches[0].clientX,o=t.touches[0].clientY;t.preventDefault(),f.touches=t.targetTouches,f.currentX=e,f.currentY=o,f.deltaX=0,f.deltaY=0,f.prevX=0,f.prevY=0}function n(t){t.preventDefault(),(0,_raf2.default)(function(){f.touches=null,f.currentX=0,f.currentY=0,f.deltaX=0,f.deltaY=0,f.prevX=0,f.prevY=0})}function r(t){c(t.clientX,t.clientY)}function u(t,e){"function"==typeof t&&(e=t,t={}),t="object"==(void 0===t?"undefined":_typeof(t))&&t?t:{},(e="function"==typeof e?e:function(){})(_extends({},t,f))}function c(t,e){(0,_raf2.default)(function(){f.deltaX=0,f.deltaY=0}),f.currentX!=t&&f.currentY!=e&&(f.prevX=f.currentX,f.prevY=f.currentY,f.deltaX=t-f.currentX,f.deltaY=e-f.currentY,f.currentX=t,f.currentY=e)}_objectDestructuringEmpty(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),_classCallCheck(this,e),(0,_stats.registerStat)("TouchInput");var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u)),f={touches:null,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},l=(0,_touchPosition.emitter)({element:t.domElement});return l.on("move",r),_domEvents2.default.on(t.domElement,"touchstart",o),_domEvents2.default.on(t.domElement,"touchend",n),t.once("destroy",function(){l.dispose(),_domEvents2.default.of(t.domElement,"touchstart",o),_domEvents2.default.of(t.domElement,"touchend",n)}),i}return _inherits(e,t),e}(_command.Command);

},{"../core/command":6,"../stats":55,"dom-events":148,"raf":377,"touch-position":419}],35:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebVRInputState=exports.WebVRInputContext=exports.WebVRInput=exports.kWebVRInputRightEye=exports.kWebVRInputLeftEye=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};_dereq_("webvr-polyfill");var _input=_dereq_("../core/input"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),kMat4Identity=_glMat2.default.identity([]),kWebVRInputLeftEye=exports.kWebVRInputLeftEye=0,kWebVRInputRightEye=exports.kWebVRInputRightEye=1,WebVRInput=exports.WebVRInput=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=n.context,o=void 0===r?new WebVRInputContext(e,n):r,i=n.state,u=void 0===i?new WebVRInputState:i,a=e.regl(_extends({},u,{context:o}));return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{update:function(e,t){"function"==typeof e&&(t=e,e={});var n=e,r=n.eyes,o=void 0===r?2:r;("number"!=typeof o||o<0||o>2)&&(o=2),2==o?(a(_extends({},e,{eye:kWebVRInputLeftEye}),t),a(_extends({},e,{eye:kWebVRInputRightEye}),t)):a(_extends({},e,{eye:kWebVRInputLeftEye,middle:1}),t)}}))}return _inherits(t,e),t}(_input.Input),WebVRInputContext=exports.WebVRInputContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=n.vrFrameData,i=void 0===o?new VRFrameData:o;return r.vrFrameData=function(e,t){_objectDestructuringEmpty(e),t=t||{};var n=t,r=n.vrDisplay;return n.eye==kWebVRInputLeftEye&&r.getFrameData(i),i},r.projection=function(e,t){_objectDestructuringEmpty(e),t=t||{};var n=t,r=n.eye;return r==kWebVRInputLeftEye?i.leftProjectionMatrix:r==kWebVRInputRightEye?i.rightProjectionMatrix:kMat4Identity},r.view=function(e,t){_objectDestructuringEmpty(e),t=t||{};var n=t,r=n.eye;return r==kWebVRInputLeftEye?i.leftViewMatrix:r==kWebVRInputRightEye?i.rightViewMatrix:kMat4Identity},r.eye=function(e,t){_objectDestructuringEmpty(e),t=t||{};var n=t,r=n.eye;return(0,_defined2.default)(r,null)},r.pose=function(){return i.pose},r}return _inherits(t,e),t}(_input.InputContext),WebVRInputState=exports.WebVRInputState=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.viewport=function(){return r.calculateViewport.apply(r,arguments)},r.scissor={enable:!0,box:function(){return r.calculateViewport.apply(r,arguments)}},r}return _inherits(t,e),_createClass(t,[{key:"calculateViewport",value:function(e,t){var n=e.drawingBufferWidth,r=e.drawingBufferHeight;t=t||{};var o=t,i=o.eye,u=o.middle,a=void 0===u?.5:u;return{x:a*i*n,y:0,width:a*n,height:r}}}]),t}(_input.InputState);

},{"../core/input":13,"defined":147,"gl-mat4":189,"webvr-polyfill":433}],36:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmbientLight=exports.kDefaultAmbientLightContextEntry=exports.kDefaultAmbientLightAmbient=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_types=_dereq_("./types"),_limits=_dereq_("./limits"),_stats=_dereq_("../stats"),_light=_dereq_("../core/light"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),kDefaultAmbientLightAmbient=exports.kDefaultAmbientLightAmbient=.01,kDefaultAmbientLightContextEntry=exports.kDefaultAmbientLightContextEntry={identifier:"ambient",type:_types.AmbientLightType,max:_limits.kMaxAmbientLights,defaults:{color:[0,0,0,0],visible:!1}},AmbientLight=exports.AmbientLight=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("AmbientLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},n,{ambient:(0,_defined2.default)(n.ambient,kDefaultAmbientLightAmbient),type:(0,_defined2.default)(n.type,_types.AmbientLightType)})))}return _inherits(e,t),_createClass(e,null,[{key:"contextEntry",value:function(){return kDefaultAmbientLightContextEntry}}]),e}(_light.Light);

},{"../core/light":14,"../stats":55,"./limits":39,"./types":41,"defined":147}],37:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=exports.kDefaultDirectionalLightContextEntry=exports.kDefaultDirectionalLightAmbient=exports.kDefaultDirectionalLightRadius=exports.kDefaultDirectionalLightIntensity=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_types=_dereq_("./types"),_limits=_dereq_("./limits"),_stats=_dereq_("../stats"),_light=_dereq_("../core/light"),_defined=_dereq_("defined"),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),kDefaultDirectionalLightIntensity=exports.kDefaultDirectionalLightIntensity=.5,kDefaultDirectionalLightRadius=exports.kDefaultDirectionalLightRadius=.05,kDefaultDirectionalLightAmbient=exports.kDefaultDirectionalLightAmbient=.005,kDefaultDirectionalLightContextEntry=exports.kDefaultDirectionalLightContextEntry={identifier:"directional",type:_types.DirectionalLightType,max:_limits.kMaxDirectionalLights,defaults:{transform:_glMat2.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}},DirectionalLight=exports.DirectionalLight=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("DirectionalLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({type:_types.DirectionalLightType,radius:kDefaultDirectionalLightRadius,ambient:kDefaultDirectionalLightAmbient,intensity:kDefaultDirectionalLightIntensity},i)))}return _inherits(e,t),_createClass(e,null,[{key:"contextEntry",value:function(){return kDefaultDirectionalLightContextEntry}}]),e}(_light.Light);

},{"../core/light":14,"../stats":55,"./limits":39,"./types":41,"defined":147,"gl-mat4":189}],38:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _directional=_dereq_("./directional");Object.keys(_directional).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _directional[e]}})});var _ambient=_dereq_("./ambient");Object.keys(_ambient).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _ambient[e]}})});var _point=_dereq_("./point");Object.keys(_point).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _point[e]}})});var _types=_dereq_("./types");Object.keys(_types).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _types[e]}})});

},{"./ambient":36,"./directional":37,"./point":40,"./types":41}],39:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var kMaxAmbientLights=exports.kMaxAmbientLights=10,kMaxDirectionalLights=exports.kMaxDirectionalLights=10,kMaxPointLights=exports.kMaxPointLights=10;

},{}],40:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=exports.kDefaultPointLightContextEntry=exports.kDefaultPointLightRadius=exports.kDefaultPointLightAmbient=exports.kDefaultPointLightIntensity=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_types=_dereq_("./types"),_directional=_dereq_("./directional"),_limits=_dereq_("./limits"),_stats=_dereq_("../stats"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),kDefaultPointLightIntensity=exports.kDefaultPointLightIntensity=.4,kDefaultPointLightAmbient=exports.kDefaultPointLightAmbient=5e-4,kDefaultPointLightRadius=exports.kDefaultPointLightRadius=5e-4,kDefaultPointLightContextEntry=exports.kDefaultPointLightContextEntry={identifier:"point",type:_types.PointLightType,max:_limits.kMaxPointLights,defaults:{transform:_glMat2.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}},PointLight=exports.PointLight=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),(0,_stats.incrementStat)("PointLight"),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({},i,{intensity:(0,_defined2.default)(i.intensity,kDefaultPointLightIntensity),ambient:(0,_defined2.default)(i.ambient,kDefaultPointLightAmbient),radius:(0,_defined2.default)(i.radius,kDefaultPointLightRadius),type:(0,_defined2.default)(i.type,_types.PointLightType)})))}return _inherits(e,t),_createClass(e,null,[{key:"contextEntry",value:function(){return kDefaultPointLightContextEntry}}]),e}(_directional.DirectionalLight);

},{"../stats":55,"./directional":37,"./limits":39,"./types":41,"defined":147,"gl-mat4":189}],41:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BasicLightType=exports.BasicLightType=7077888,PointLightType=exports.PointLightType=7077889,AmbientLightType=exports.AmbientLightType=7077890,DirectionalLightType=exports.DirectionalLightType=7077891,SpotLightType=exports.SpotLightType=7077892;

},{}],42:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlatMaterial=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},_types=_dereq_("./types"),_material=_dereq_("../core/material"),FlatMaterial=exports.FlatMaterial=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,_extends({type:_types.FlatMaterialType},o)))}return _inherits(e,t),e}(_material.Material);

},{"../core/material":15,"./types":46}],43:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lambert=_dereq_("./lambert");Object.keys(_lambert).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _lambert[e]}})});var _phong=_dereq_("./phong");Object.keys(_phong).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _phong[e]}})});var _types=_dereq_("./types");Object.keys(_types).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _types[e]}})});var _flat=_dereq_("./flat");Object.keys(_flat).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _flat[e]}})});

},{"./flat":42,"./lambert":44,"./phong":45,"./types":46}],44:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LambertMaterialUniforms=exports.LambertMaterialContext=exports.LambertMaterial=exports.kDefaultLambertMaterialAmbientColor=exports.kDefaultLambertMaterialEmissiveColor=exports.kDefaultLambertMaterialRoughness=exports.kDefaultLambertMaterialAlbedo=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_types=_dereq_("./types"),_directional=_dereq_("../light/directional"),_ambient=_dereq_("../light/ambient"),_point=_dereq_("../light/point"),_utils=_dereq_("../utils"),_types2=_dereq_("../light/types"),lightTypes=_interopRequireWildcard(_types2),_vector=_dereq_("../math/vector"),_color=_dereq_("../core/color"),_material=_dereq_("../core/material"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),kDefaultLambertMaterialAlbedo=exports.kDefaultLambertMaterialAlbedo=.8,kDefaultLambertMaterialRoughness=exports.kDefaultLambertMaterialRoughness=.8,kDefaultLambertMaterialEmissiveColor=exports.kDefaultLambertMaterialEmissiveColor=new _color.Color("black"),kDefaultLambertMaterialAmbientColor=exports.kDefaultLambertMaterialAmbientColor=new _color.Color(51,51,51),LambertMaterial=exports.LambertMaterial=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var n=r.uniforms,o=void 0===n?new LambertMaterialUniforms(e,r):n;return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({type:_types.LambertMaterialType},r,{uniforms:o})))}return _inherits(t,e),t}(_material.Material),LambertMaterialContext=exports.LambertMaterialContext=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return _inherits(t,e),t}(_material.MaterialContext),LambertMaterialUniforms=exports.LambertMaterialUniforms=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),o=[_directional.DirectionalLight.contextEntry(),_ambient.AmbientLight.contextEntry(),_point.PointLight.contextEntry()].concat(_toConsumableArray(r.lightContext||[])),i=!0,a=!1,l=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value;n.setLightsInContext(f)}}catch(e){a=!0,l=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw l}}return n["material.roughness"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.roughness;return _objectDestructuringEmpty(e),(0,_defined2.default)(n,r.roughness,kDefaultLambertMaterialRoughness)},n["material.emissive"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.emissive;return _objectDestructuringEmpty(e),[].concat(_toConsumableArray((0,_defined2.default)(n,r.emissive,kDefaultLambertMaterialEmissiveColor)))},n["material.albedo"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.albedo;return _objectDestructuringEmpty(e),(0,_defined2.default)(n,r.albedo,kDefaultLambertMaterialAlbedo)},n["material.ambient"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ambient;return _objectDestructuringEmpty(e),[].concat(_toConsumableArray((0,_defined2.default)(n,r.ambient,kDefaultLambertMaterialAmbientColor)))},n["lightContext.ambient.count"]=function(e){var t=e.lights,r=lightTypes.AmbientLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n["lightContext.directional.count"]=function(e){var t=e.lights,r=lightTypes.DirectionalLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n["lightContext.point.count"]=function(e){var t=e.lights,r=lightTypes.PointLightType;return t.filter(Boolean).filter(function(e){return e.type==r}).length},n}return _inherits(t,e),_createClass(t,[{key:"setLightsInContext",value:function(e){for(var t=this,r=e.identifier,n=e.type,o=e.max,i=e.defaults,a=0;a<o;++a)!function(e){var o="lightContext."+r+".lights["+e+"]";for(var a in i)!function(r,i){Object.assign(t,_defineProperty({},o+"."+r,function t(o){var a=o.lights,l=arguments.length>1&&arguments[1]!==t?arguments[1]:{},u=a.filter(function(e){return n==e.type})[e],s=u?(0,_defined2.default)(u[r],l[r],i):i;return s instanceof _vector.Vector?s=[].concat(_toConsumableArray(s)):(0,_utils.isArrayLike)(s)&&(s=[].concat(_toConsumableArray(s))),s}))}(a,i[a])}(a)}}]),t}(_material.MaterialUniforms);

},{"../core/color":5,"../core/material":15,"../light/ambient":36,"../light/directional":37,"../light/point":40,"../light/types":41,"../math/vector":51,"../utils":56,"./types":46,"defined":147}],45:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhongMaterialUniforms=exports.PhongMaterial=exports.kDefaultPhongMaterialShininess=exports.kDefaultPhongMaterialSpecularColor=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_lambert=_dereq_("./lambert"),_types=_dereq_("./types"),_color=_dereq_("../core/color"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),kDefaultPhongMaterialSpecularColor=exports.kDefaultPhongMaterialSpecularColor=new _color.Color(1118481),kDefaultPhongMaterialShininess=exports.kDefaultPhongMaterialShininess=40,PhongMaterial=exports.PhongMaterial=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var o=r.uniforms,n=void 0===o?new PhongMaterialUniforms(e,r):o;return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_extends({type:_types.PhongMaterialType},r,{uniforms:n})))}return _inherits(t,e),t}(_lambert.LambertMaterial),PhongMaterialUniforms=exports.PhongMaterialUniforms=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o["material.shininess"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.shininess;return _objectDestructuringEmpty(e),(0,_defined2.default)(o,r.shininess,kDefaultPhongMaterialShininess)},o["material.specular"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.specular;return _objectDestructuringEmpty(e),[].concat(_toConsumableArray((0,_defined2.default)(o,r.specular,kDefaultPhongMaterialSpecularColor)))},o}return _inherits(t,e),t}(_lambert.LambertMaterialUniforms);

},{"../core/color":5,"./lambert":44,"./types":46,"defined":147}],46:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MaterialType=exports.MaterialType=7143424,FlatMaterialType=exports.FlatMaterialType=7143425,PhongMaterialType=exports.PhongMaterialType=7143426,LambertMaterialType=exports.LambertMaterialType=7143427;

},{}],47:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Euler=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_vector_swizzle_map=_dereq_("./vector_swizzle_map"),VectorSwizzleMap=_interopRequireWildcard(_vector_swizzle_map),_vector=_dereq_("./vector"),_mathEuler=_dereq_("math-euler"),_mathEuler2=_interopRequireDefault(_mathEuler),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_glMat=_dereq_("gl-mat4"),_glMat2=_interopRequireDefault(_glMat),scratchMat4=_glMat2.default.identity([]),Euler=exports.Euler=function(e){function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xyz";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,_defined2.default)(e,0),(0,_defined2.default)(r,0),(0,_defined2.default)(n,0)));if("string"!=typeof o)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===o?"undefined":_typeof(o))+".");return i.order=o,i}return _inherits(t,e),_createClass(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Euler}},{key:"fromQuaternion",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if("string"!=typeof r)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":_typeof(r))+".");r=r.toUpperCase();var n=new _mathEuler2.default,o=_glMat2.default.fromQuat(scratchMat4,e);return n.setFromRotationMatrix({elements:o},r),new t(n.x,n.y,n.z,r)}}]),t}(_vector.Vector);

},{"./vector":51,"./vector_swizzle_map":52,"defined":147,"gl-mat4":189,"math-euler":341}],48:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _quaternion=_dereq_("./quaternion");Object.keys(_quaternion).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _quaternion[e]}})});var _matrix=_dereq_("./matrix");Object.keys(_matrix).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _matrix[e]}})});var _vector=_dereq_("./vector");Object.keys(_vector).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _vector[e]}})});var _euler=_dereq_("./euler");Object.keys(_euler).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _euler[e]}})});

},{"./euler":47,"./matrix":49,"./quaternion":50,"./vector":51}],49:[function(_dereq_,module,exports){
"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0});var Matrix=exports.Matrix=function t(){_classCallCheck(this,t)},Matrix2=exports.Matrix2=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),e}(Matrix),Matrix3=exports.Matrix3=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),e}(Matrix),Matrix4=exports.Matrix4=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),e}(Matrix);

},{}],50:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quaternion=void 0;var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_vector_swizzle_map=_dereq_("./vector_swizzle_map"),VectorSwizzleMap=_interopRequireWildcard(_vector_swizzle_map),_vector=_dereq_("./vector"),_euler=_dereq_("./euler"),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),Quaternion=exports.Quaternion=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,_defined2.default)(e,0),(0,_defined2.default)(r,0),(0,_defined2.default)(n,0),(0,_defined2.default)(o,1)))}return _inherits(t,e),_createClass(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=e}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Quaternion}},{key:"fromAxisAngle",value:function(e,r){return quat.setAxisAngle(new t,e,r)}},{key:"fromEuler",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if(null==e||![].concat(_toConsumableArray(e)).every(function(e){return e==e&&"number"==typeof e}))throw new TypeError("Expecting euler to have numbers.");if("string"!=typeof(r=r||e.order||null))throw new TypeError("Expecting euler order to be a string. Got "+(void 0===r?"undefined":_typeof(r))+".");var n=Math.cos(.5*e[0]),o=Math.cos(.5*e[1]),i=Math.cos(.5*e[2]),u=Math.sin(.5*e[0]),f=Math.sin(.5*e[1]),l=Math.sin(.5*e[2]),a=0,c=0,s=0,y=1;if("xyz"==r)a=u*o*i+n*f*l,c=n*f*i-u*o*l,s=n*o*l+u*f*i,y=n*o*i-u*f*l;else if("yxz"==r)a=u*o*i+n*f*l,c=n*f*i-u*o*l,s=n*o*l-u*f*i,y=n*o*i+u*f*l;else if("zxy"==r)a=u*o*i-n*f*l,c=n*f*i+u*o*l,s=n*o*l+u*f*i,y=n*o*i-u*f*l;else if("zyx"==r)a=u*o*i-n*f*l,c=n*f*i+u*o*l,s=n*o*l-u*f*i,y=n*o*i+u*f*l;else if("yzx"==r)a=u*o*i+n*f*l,c=n*f*i+u*o*l,s=n*o*l-u*f*i,y=n*o*i-u*f*l;else{if("xzy"!=r)throw new TypeError("Unhandled Euler angle order. Got "+r+".");a=u*o*i-n*f*l,c=n*f*i-u*o*l,s=n*o*l+u*f*i,y=n*o*i+u*f*l}return new t(a,c,s,y)}}]),t}(_vector.Vector);

},{"./euler":47,"./vector":51,"./vector_swizzle_map":52,"defined":147}],51:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector4=exports.Vector3=exports.Vector2=exports.Vector1=exports.Vector=void 0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_utils=_dereq_("../utils"),_vector_swizzle_map=_dereq_("./vector_swizzle_map"),VectorSwizzleMap=_interopRequireWildcard(_vector_swizzle_map),_getUniquePermutations=_dereq_("get-unique-permutations"),_getUniquePermutations2=_interopRequireDefault(_getUniquePermutations),_defined=_dereq_("defined"),_defined2=_interopRequireDefault(_defined),_window=_dereq_("global/window"),_window2=_interopRequireDefault(_window),TypedArray=Object.getPrototypeOf(Float32Array.prototype).constructor,hasLocalStorage=Boolean("object"==_window2.default.localStorage&&"function"==typeof _window2.default.localStorage.getItem&&"function"==typeof _window2.default.localStorage.setItem),kPermutationsCacheStringName="axis3d:vector:permutations:cache",permutationsCache=0==hasLocalStorage?{}:JSON.parse(_window2.default.localStorage.getItem(kPermutationsCacheStringName)||"{}"),Vector=exports.Vector=function(){function t(){for(var e=this,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];_classCallCheck(this,t),((0,_utils.isArrayLike)(n[0])||n[0]instanceof t||n[0]instanceof TypedArray)&&(n=n[0]);var i=null;i=n.every(function(t){return t instanceof TypedArray})?new Float32Array([].concat(_toConsumableArray(n.reduce(function(t,e){return t.concat([].concat(_toConsumableArray(e)))},[])))):n instanceof TypedArray?n:new Float32Array([].concat(_toConsumableArray(n))),(0,_utils.define)(this,"elements",{get:function(){return i}});for(var u=0;u<i.length;++u)!function(t){(0,_utils.define)(e,t,{enumerable:!0,get:function(){return i[t]},set:function(r){i[t]=r,e.onchange(t,r)}})}(u);if("function"==typeof this.constructor.swizzles){var c=[];if(permutationsCache[this.constructor.name])c=permutationsCache[this.constructor.name];else{var a=!0,s=!1,l=void 0;try{for(var f,y=this.constructor.swizzles()[Symbol.iterator]();!(a=(f=y.next()).done);a=!0){var h,p=f.value;(h=c).push.apply(h,_toConsumableArray((0,_getUniquePermutations2.default)(p)))}}catch(t){s=!0,l=t}finally{try{!a&&y.return&&y.return()}finally{if(s)throw l}}}permutationsCache[this.constructor.name]=Object.assign(permutationsCache[this.constructor.name]||[],c),hasLocalStorage&&_window2.default.localStorage.setItem(kPermutationsCacheStringName,JSON.stringify(permutationsCache));var _=!0,d=!1,g=void 0;try{for(var v,m=c[Symbol.iterator]();!(_=(v=m.next()).done);_=!0){(function(){var t=v.value,r=t.join("");if(e.hasOwnProperty(r))return"continue";(0,_utils.define)(e,r,{get:function(){var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var a=u.value;r.push(e[a])}}catch(t){o=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}if(!/Vector/.test(e.constructor.name))return new(Function.prototype.bind.apply(e.constructor,[null].concat(r)));switch(r.length){case 4:return new(Function.prototype.bind.apply(Vector4,[null].concat(r)));case 3:return new(Function.prototype.bind.apply(Vector3,[null].concat(r)));case 2:return new(Function.prototype.bind.apply(Vector2,[null].concat(r)));case 1:return new(Function.prototype.bind.apply(Vector1,[null].concat(r)))}}})})()}}catch(t){d=!0,g=t}finally{try{!_&&m.return&&m.return()}finally{if(d)throw g}}}}return _createClass(t,[{key:"onchange",value:function(t,e){}},{key:"set",value:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if((0,_utils.isArrayLike)(r[0])||r[0]instanceof t||r[0]instanceof TypedArray)return this.set.apply(this,_toConsumableArray(r[0]));for(var o=0;o<r.length;++o)this[o]=(0,_defined2.default)(r[o],this[o]);return this}},{key:"get",value:function(t){return this.elements[t||0]||0}},{key:"toArray",value:function(){return[].concat(_toConsumableArray(this.elements))}},{key:"toJSON",value:function(){return this.toArray()}},{key:"valueOf",value:function(){return this.elements}},{key:Symbol.iterator,value:function(){return this.toArray()[Symbol.iterator]()}},{key:"length",get:function(){return this.elements.length}}]),t}();Object.setPrototypeOf(Vector.prototype,Array.prototype);var Vector1=exports.Vector1=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),_createClass(e,null,[{key:"swizzles",value:function(){return VectorSwizzleMap.Vector}}]),e}(Vector),Vector2=exports.Vector2=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return _inherits(e,t),_createClass(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Vector}}]),e}(Vector),Vector3=exports.Vector3=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return _inherits(e,t),_createClass(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"r",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"g",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"b",get:function(){return this[2]},set:function(t){return this[2]=t}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Vector}}]),e}(Vector),Vector4=exports.Vector4=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n,o))}return _inherits(e,t),_createClass(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=t}},{key:"r",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"g",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"b",get:function(){return this[2]},set:function(t){return this[2]=t}},{key:"a",get:function(){return this[3]},set:function(t){return this[3]=t}}],[{key:"swizzles",value:function(){return VectorSwizzleMap.Vector}}]),e}(Vector);

},{"../utils":56,"./vector_swizzle_map":52,"defined":147,"get-unique-permutations":160,"global/window":319}],52:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var filterRgba=function(r){return r.map(function(r){return r.filter(function(r){return!/[rgba]/.test(r)})}).filter(function(r){return r.length})},filterXyzw=function(r){return r.map(function(r){return r.filter(function(r){return!/[xyzw]/.test(r)})}).filter(function(r){return r.length})},offsetOf=exports.offsetOf=function(r){for(var t=0;t<offsets.length;++t)if(offsets[t].indexOf(r)>-1)return t;return-1},offsets=exports.offsets=[["x","r"],["y","g"],["z","b"],["w","a"]],Vector1=exports.Vector1=[],Vector2=exports.Vector2=[["x","y"],["x","x"],["x","y"],["y","x"],["y","y"],["z","x"],["z","y"],["w","x"],["w","y"]],Vector3=exports.Vector3=[["x","y","z"],["x","x","x"],["x","x","y"],["x","x","z"],["y","y","x"],["y","y","y"],["y","y","z"],["z","z","x"],["z","z","y"],["z","z","z"],["w","w","x"],["w","w","y"],["w","w","z"],["r","g","b"],["r","r","r"],["r","r","g"],["r","r","b"],["g","g","r"],["g","g","g"],["g","g","b"],["b","b","r"],["b","b","g"],["b","b","b"],["a","a","r"],["a","a","g"],["a","a","b"]],Vector4=exports.Vector4=[["x","y","z","w"],["x","x","x","x"],["x","x","x","y"],["x","x","x","z"],["x","x","x","w"],["y","y","y","x"],["y","y","y","y"],["y","y","y","z"],["y","y","y","w"],["z","z","z","x"],["z","z","z","y"],["z","z","z","z"],["z","z","z","w"],["w","w","w","x"],["w","w","w","y"],["w","w","w","z"],["w","w","w","w"],["r","g","b","a"],["r","r","r","r"],["r","r","r","g"],["r","r","r","b"],["r","r","r","a"],["g","g","g","r"],["g","g","g","g"],["g","g","g","b"],["g","g","g","a"],["b","b","b","r"],["b","b","b","g"],["b","b","b","b"],["b","b","b","a"],["a","a","a","r"],["a","a","a","g"],["a","a","a","b"],["a","a","a","a"]],Vector=exports.Vector=[].concat(Vector1).concat(Vector2).concat(Vector3).concat(Vector4),Euler=exports.Euler=filterRgba(Vector3),Quaternion=exports.Quaternion=filterRgba(Vector),Color=exports.Color=filterXyzw(Vector);

},{}],53:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lines=_dereq_("./lines");Object.keys(_lines).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _lines[e]}})});

},{"./lines":54}],54:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinesMesh=exports.kDefaultLinesMeshVertexShader=void 0;var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_stats=_dereq_("../stats"),_geometry2=_dereq_("../core/geometry"),_mesh=_dereq_("../core/mesh"),_screenProjectedLines=_dereq_("screen-projected-lines"),_screenProjectedLines2=_interopRequireDefault(_screenProjectedLines),_meshReindex=_dereq_("mesh-reindex"),_meshReindex2=_interopRequireDefault(_meshReindex),_unindexMesh=_dereq_("unindex-mesh"),_unindexMesh2=_interopRequireDefault(_unindexMesh),_glslify=_dereq_("glslify"),_normals=_dereq_("normals"),_normals2=_interopRequireDefault(_normals),kDefaultLinesMeshVertexShader=exports.kDefaultLinesMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\nstruct Object3D {\n  vec3 scale;\n  vec3 position;\n  vec4 rotation;\n  mat4 transform;\n};\n\nstruct Mesh {\n  mat4 model;\n  mat3 modelNormal;\n  Object3D object;\n};\n\nvec4 linevoffset (vec4 p, vec4 n, float direction_0, float aspect_0) { \n  vec2 sp = p.xy/p.w*vec2(aspect_0,1);\n  vec2 sn = n.xy/n.w*vec2(aspect_0,1);\n  vec2 dir = normalize(sn-sp);\n  vec2 norm = dir.yx*vec2(-1.0/aspect_0,1);\n  return vec4(direction_0*norm,0,0);\n}\n\n//\n// Shader uniforms.\n//\nuniform Mesh mesh;\nuniform Camera camera;\nuniform float time;\nuniform float thickness;\n\n//\n// Shader IO.\n//\nattribute vec3 nextPosition;\nattribute float direction;\nattribute vec3 position;\nattribute vec3 normal;\n\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\nvec3 lerp(vec3 a, vec3 b, float t) {\n  return vec3(\n    a.x + t * (b.x - a.x),\n    a.y + t * (b.y - a.y),\n    a.z + t * (b.z - a.z)\n  );\n}\n\n//\n// Shader entry.\n//\n\nvoid main() {\n  // @TODO(werle) - abstract to geomorping interface\n  //float p = random(position.xy);\n  //vec3 pos = lerp(position, position + vec3(p, p, p), cos(0.5*time));\n\n  // @TODO(werle) - abstract to geomorping interface\n  //float np = random(nextPosition.yz);\n  //vec3 npos = lerp(nextPosition, nextPosition + vec3(np, np, np), sin(0.1*time));\n  vec4 linePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0)\n    ;\n\n  vec4 nextLinePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(nextPosition, 1.0)\n    ;\n\n  vec4 lineOffset = linevoffset(\n      linePosition,\n      nextLinePosition,\n      direction, camera.aspect);\n\n  gl_Position = linePosition + lineOffset*thickness;\n\n  // GeometryContext\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  vnormal = normalize(mesh.modelNormal * normal);\n}\n",LinesMesh=exports.LinesMesh=function(e){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),(0,_stats.incrementStat)("LinesMesh");var o=kDefaultLinesMeshVertexShader,r=t.geometry,i=t.thickness,s=void 0===i?.005:i,a=r,c=a.complex,l=void 0===c?r:c,u=l.cells.map(function(e){return e.slice()}),m=(0,_meshReindex2.default)((0,_unindexMesh2.default)(l.positions,u));l.normals=_normals2.default.vertexNormals(m.cells,m.positions),Object.assign({},l,u);var p=(0,_screenProjectedLines2.default)(l,{attributes:{normals:l.normals}});return p.normals=p.attributes.normals,r=new _geometry2.Geometry({complex:p,flatten:!1}),r.complex.normals=p.normals,t.geometry=r,_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,_extends({},t,{primitive:"triangles",geometry:r,vert:o,uniforms:Object.assign(new _mesh.MeshUniforms(e,t),{thickness:function(e,n){var t=n.thickness,o=void 0===t?s:t;return _objectDestructuringEmpty(e),o}}),attributes:Object.assign(new _mesh.MeshAttributes(e,t),{nextPosition:p.nextPositions,direction:p.directions})})))}return _inherits(n,e),n}(_mesh.Mesh);

},{"../core/geometry":10,"../core/mesh":16,"../stats":55,"glslify":330,"mesh-reindex":342,"normals":353,"screen-projected-lines":405,"unindex-mesh":424}],55:[function(_dereq_,module,exports){
"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function createStatList(t){if("string"!=typeof t)throw new StatNameError(t);return null==stats[t]&&(stats[t]=[]),stats[t]}function registerStat(t,e){createStatList(t);var r=new Stat(t,e);return stats[t].push(r),r}function incrementStat(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;createStatList(t);var r=tailStat(t),o=e;return r&&(o=(r.info||0)+e),registerStat(t,o),o}function decrementStat(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;createStatList(t);var r=tailStat(t),o=0;return r&&(o=r.info-e),registerStat(t,o),o}function clearStats(t){if("string"!=typeof t)throw new StatNameError(t);stats[t]&&Array.isArray(stats[t])?stats[t].splice(stats[t.length]):stats[t]=[]}function headStat(t){if("string"!=typeof t)throw new StatNameError(t);return stats[t]?stats[t][0]||null:null}function tailStat(t){if(stats[t]){var e=stats[t].length||0;return stats[t][e-1]||null}return null}function getStats(t){if("string"!=typeof t)throw new StatNameError(t);return stats[t]||null}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};exports.createStatList=createStatList,exports.registerStat=registerStat,exports.incrementStat=incrementStat,exports.decrementStat=decrementStat,exports.clearStats=clearStats,exports.headStat=headStat,exports.tailStat=tailStat,exports.getStats=getStats;var stats={},Stat=exports.Stat=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_classCallCheck(this,t),"string"!=typeof e)throw new StatNameError(e);this.name=e,this.info=r,this.timestamp=Date.now()},StatNameError=exports.StatNameError=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Expecting stat name to be a string. Got "+(void 0===t?"undefined":_typeof(t))))}return _inherits(e,t),e}(TypeError);

},{}],56:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayLike=exports.ensureRGBA=exports.clampToMaxSize=exports.scaleWithCanvas=exports.createCanvas=exports.makePowerOfTwo=exports.nearestPowerOfTwo=exports.getScreenOrientation=exports.lerp=exports.debug=exports.radians=exports.define=void 0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_debug=_dereq_("debug"),_debug2=_interopRequireDefault(_debug),_window=_dereq_("global/window"),_window2=_interopRequireDefault(_window),_clamp=_dereq_("clamp"),_clamp2=_interopRequireDefault(_clamp),kLibraryVersion="0.1.12",round=Math.round,pow=Math.pow,define=exports.define=function(e,r,t){return Object.defineProperty(e,r,_extends({},t))},radians=exports.radians=function(e){return e==e?e*Math.PI/180:0},debug=exports.debug=(0,_debug2.default)("[axis@"+kLibraryVersion+"]"),lerp=exports.lerp=function(e,r,t){return e*(1-t)+r*t},getScreenOrientation=exports.getScreenOrientation=function(){switch(_window2.default.screen.orientation||_window2.default.screen.mozOrientation){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return _window2.default.orientation||0},nearestPowerOfTwo=exports.nearestPowerOfTwo=function(e){return pow(2,round(Math.log(e)/Math.LN2))},makePowerOfTwo=exports.makePowerOfTwo=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var r=createCanvas(),t=r.getContext("2d");return r.width=nearestPowerOfTwo(e.width),r.height=nearestPowerOfTwo(e.height),t.drawImage(e,0,0,r.width,r.height),r}return e},createCanvas=exports.createCanvas=function(){return document.createElementNS("http://www.w3.org/1999/xhtml","canvas")},scaleWithCanvas=exports.scaleWithCanvas=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=createCanvas(),a=n.getContext("2d"),o=e.width,i=e.height;return t&&(o=nearestPowerOfTwo(o),i=nearestPowerOfTwo(i)),n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),a.drawImage(e,0,0,o,i,0,0,n.width,n.height),n},clampToMaxSize=exports.clampToMaxSize=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.width>r||e.height>r){var n=r/Math.max(e.width,e.height);return scaleWithCanvas(e,n,t)}return t?makePowerOfTwo(e):e},ensureRGBA=exports.ensureRGBA=function(e){e=[].concat(_toConsumableArray(e||[]));for(var r=0;r<3;++r)"number"!=typeof e[r]?e[r]=0:e[r]=(0,_clamp2.default)(e[r],0,1);return"number"!=typeof e[3]?e[3]=1:e[3]=(0,_clamp2.default)(e[3],0,1),[].concat(_toConsumableArray(e)).slice(0,4)},isArrayLike=exports.isArrayLike=function(e){return null!=e&&(Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||"number"==typeof e.length||"function"==typeof e[Symbol.iterator])};

},{"clamp":99,"debug":145,"global/window":319}],57:[function(_dereq_,module,exports){
"use strict";function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p,a=o.length;n=placeHoldersCount(o),p=new Arr(3*a/4-n),t=n>0?a-4:a;var l=0;for(r=0,e=0;r<t;r+=4,e+=3)u=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],p[l++]=u>>16&255,p[l++]=u>>8&255,p[l++]=255&u;return 2===n?(u=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,p[l++]=255&u):1===n&&(u=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,p[l++]=u>>8&255,p[l++]=255&u),p}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=0,a=e-t;p<a;p+=16383)n.push(encodeChunk(o,p,p+16383>a?a:p+16383));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;

},{}],58:[function(_dereq_,module,exports){
"use strict";function add(a,i){return rationalize(a[0].mul(i[1]).add(i[0].mul(a[1])),a[1].mul(i[1]))}var rationalize=_dereq_("./lib/rationalize");module.exports=add;

},{"./lib/rationalize":68}],59:[function(_dereq_,module,exports){
"use strict";function cmp(m,u){return m[0].mul(u[1]).cmp(u[0].mul(m[1]))}module.exports=cmp;

},{}],60:[function(_dereq_,module,exports){
"use strict";function div(i,r){return rationalize(i[0].mul(r[1]),i[1].mul(r[0]))}var rationalize=_dereq_("./lib/rationalize");module.exports=div;

},{"./lib/rationalize":68}],61:[function(_dereq_,module,exports){
"use strict";function makeRational(e,i){if(isRat(e))return i?div(e,makeRational(i)):[e[0].clone(),e[1].clone()];var n,r,t=0;if(isBN(e))n=e.clone();else if("string"==typeof e)n=str2bn(e);else{if(0===e)return[num2bn(0),num2bn(1)];if(e===Math.floor(e))n=num2bn(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),t-=256;n=num2bn(e)}}if(isRat(i))n.mul(i[1]),r=i[0].clone();else if(isBN(i))r=i.clone();else if("string"==typeof i)r=str2bn(i);else if(i)if(i===Math.floor(i))r=num2bn(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),t+=256;r=num2bn(i)}else r=num2bn(1);return t>0?n=n.ushln(t):t<0&&(r=r.ushln(-t)),rationalize(n,r)}var isRat=_dereq_("./is-rat"),isBN=_dereq_("./lib/is-bn"),num2bn=_dereq_("./lib/num-to-bn"),str2bn=_dereq_("./lib/str-to-bn"),rationalize=_dereq_("./lib/rationalize"),div=_dereq_("./div");module.exports=makeRational;

},{"./div":60,"./is-rat":62,"./lib/is-bn":66,"./lib/num-to-bn":67,"./lib/rationalize":68,"./lib/str-to-bn":69}],62:[function(_dereq_,module,exports){
"use strict";function isRat(i){return Array.isArray(i)&&2===i.length&&isBN(i[0])&&isBN(i[1])}var isBN=_dereq_("./lib/is-bn");module.exports=isRat;

},{"./lib/is-bn":66}],63:[function(_dereq_,module,exports){
"use strict";function sign(e){return e.cmp(new BN(0))}var BN=_dereq_("bn.js");module.exports=sign;

},{"bn.js":76}],64:[function(_dereq_,module,exports){
"use strict";function bn2num(n){var r=n.length,e=n.words,s=0;if(1===r)s=e[0];else if(2===r)s=e[0]+67108864*e[1];else for(var i=0;i<r;i++){var t=e[i];s+=t*Math.pow(67108864,i)}return sign(n)*s}var sign=_dereq_("./bn-sign");module.exports=bn2num;

},{"./bn-sign":63}],65:[function(_dereq_,module,exports){
"use strict";function ctzNumber(r){var t=ctz(db.lo(r));if(t<32)return t;var e=ctz(db.hi(r));return e>20?52:e+32}var db=_dereq_("double-bits"),ctz=_dereq_("bit-twiddle").countTrailingZeros;module.exports=ctzNumber;

},{"bit-twiddle":75,"double-bits":149}],66:[function(_dereq_,module,exports){
"use strict";function isBN(o){return o&&"object"===(void 0===o?"undefined":_typeof(o))&&Boolean(o.words)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},BN=_dereq_("bn.js");module.exports=isBN;

},{"bn.js":76}],67:[function(_dereq_,module,exports){
"use strict";function num2bn(e){var n=db.exponent(e);return n<52?new BN(e):new BN(e*Math.pow(2,52-n)).ushln(n-52)}var BN=_dereq_("bn.js"),db=_dereq_("double-bits");module.exports=num2bn;

},{"bn.js":76,"double-bits":149}],68:[function(_dereq_,module,exports){
"use strict";function rationalize(n,r){var i=sign(n),e=sign(r);if(0===i)return[num2bn(0),num2bn(1)];if(0===e)return[num2bn(0),num2bn(0)];e<0&&(n=n.neg(),r=r.neg());var u=n.gcd(r);return u.cmpn(1)?[n.div(u),r.div(u)]:[n,r]}var num2bn=_dereq_("./num-to-bn"),sign=_dereq_("./bn-sign");module.exports=rationalize;

},{"./bn-sign":63,"./num-to-bn":67}],69:[function(_dereq_,module,exports){
"use strict";function str2BN(r){return new BN(r)}var BN=_dereq_("bn.js");module.exports=str2BN;

},{"bn.js":76}],70:[function(_dereq_,module,exports){
"use strict";function mul(i,r){return rationalize(i[0].mul(r[0]),i[1].mul(r[1]))}var rationalize=_dereq_("./lib/rationalize");module.exports=mul;

},{"./lib/rationalize":68}],71:[function(_dereq_,module,exports){
"use strict";function sign(n){return bnsign(n[0])*bnsign(n[1])}var bnsign=_dereq_("./lib/bn-sign");module.exports=sign;

},{"./lib/bn-sign":63}],72:[function(_dereq_,module,exports){
"use strict";function sub(u,i){return rationalize(u[0].mul(i[1]).sub(u[1].mul(i[0])),u[1].mul(i[1]))}var rationalize=_dereq_("./lib/rationalize");module.exports=sub;

},{"./lib/rationalize":68}],73:[function(_dereq_,module,exports){
"use strict";function roundRat(n){var t=n[0],r=n[1];if(0===t.cmpn(0))return 0;var u=t.abs().divmod(r.abs()),e=u.div,i=bn2num(e),a=u.mod,o=t.negative!==r.negative?-1:1;if(0===a.cmpn(0))return o*i;if(i){var b=ctz(i)+4,d=bn2num(a.ushln(b).divRound(r));return o*(i+d*Math.pow(2,-b))}var v=r.bitLength()-a.bitLength()+53,d=bn2num(a.ushln(v).divRound(r));return v<1023?o*d*Math.pow(2,-v):(d*=Math.pow(2,-1023),o*d*Math.pow(2,1023-v))}var bn2num=_dereq_("./lib/bn-to-num"),ctz=_dereq_("./lib/ctz");module.exports=roundRat;

},{"./lib/bn-to-num":64,"./lib/ctz":65}],74:[function(_dereq_,module,exports){
"use strict";function compileSearch(e,n,c,i,u,r){var h=["function ",e,"(a,l,h,",i.join(","),"){",r?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",u?".get(m)":"[m]"];return r?n.indexOf("c")<0?h.push(";if(x===y){return m}else if(x<=y){"):h.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):h.push(";if(",n,"){i=m;"),c?h.push("l=m+1}else{h=m-1}"):h.push("h=m-1}else{l=m+1}"),h.push("}"),r?h.push("return -1};"):h.push("return i};"),h.join("")}function compileBoundsSearch(e,n,c,i){return new Function([compileSearch("A","x"+e+"y",n,["y"],!1,i),compileSearch("B","x"+e+"y",n,["y"],!0,i),compileSearch("P","c(x,y)"+e+"0",n,["y","c"],!1,i),compileSearch("Q","c(x,y)"+e+"0",n,["y","c"],!0,i),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""))()}module.exports={ge:compileBoundsSearch(">=",!1,"GE"),gt:compileBoundsSearch(">",!1,"GT"),lt:compileBoundsSearch("<",!0,"LT"),le:compileBoundsSearch("<=",!0,"LE"),eq:compileBoundsSearch("-",!0,"EQ",!0)};

},{}],75:[function(_dereq_,module,exports){
"use strict";function countTrailingZeros(r){var n=32;return r&=-r,r&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}var INT_BITS=32;exports.INT_BITS=INT_BITS,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<INT_BITS-1,exports.sign=function(r){return(r>0)-(r<0)},exports.abs=function(r){var n=r>>INT_BITS-1;return(r^n)-n},exports.min=function(r,n){return n^(r^n)&-(r<n)},exports.max=function(r,n){return r^(r^n)&-(r<n)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var n,t;return n=(r>65535)<<4,r>>>=n,t=(r>255)<<3,r>>>=t,n|=t,t=(r>15)<<2,r>>>=t,n|=t,t=(r>3)<<1,r>>>=t,(n|=t)|r>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return r-=r>>>1&1431655765,16843009*((r=(858993459&r)+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=countTrailingZeros,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var REVERSE_TABLE=new Array(256);!function(r){for(var n=0;n<256;++n){var t=n,e=n,o=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--o;r[n]=e<<o&255}}(REVERSE_TABLE),exports.reverse=function(r){return REVERSE_TABLE[255&r]<<24|REVERSE_TABLE[r>>>8&255]<<16|REVERSE_TABLE[r>>>16&255]<<8|REVERSE_TABLE[r>>>24&255]},exports.interleave2=function(r,n){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),r|n<<1},exports.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),(r=65535&(r|r>>>16))<<16>>16},exports.interleave3=function(r,n,t){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|=n<<1,t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),r|t<<2},exports.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),(r=1023&(r|r>>>16))<<22>>22},exports.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>countTrailingZeros(r)+1};

},{}],76:[function(_dereq_,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,i){function r(t,i){if(!t)throw new Error(i||"Assertion failed")}function n(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,i,r){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}function e(t,i,r){for(var n=0,h=Math.min(t.length,r),e=i;e<h;e++){var o=t.charCodeAt(e)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function o(t,i,r,n){for(var h=0,e=Math.min(t.length,r),o=i;o<e;o++){var s=t.charCodeAt(o)-48;h*=n,h+=s>=49?s-49+10:s>=17?s-17+10:s}return h}function s(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var n=r/26|0,h=r%26;i[r]=(t.words[n]&1<<h)>>>h}return i}function u(t,i,r){r.negative=i.negative^t.negative;var n=t.length+i.length|0;r.length=n,n=n-1|0;var h=0|t.words[0],e=0|i.words[0],o=h*e,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var a=1;a<n;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;h=0|t.words[p],e=0|i.words[d],o=h*e+m,l+=o/67108864|0,m=67108863&o}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}function a(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var n=0,h=0,e=0;e<r.length-1;e++){var o=h;h=0;for(var s=67108863&n,u=Math.min(e,i.length-1),a=Math.max(0,e-t.length+1);a<=u;a++){var l=e-a,m=0|t.words[l],f=0|i.words[a],d=m*f,p=67108863&d;o=o+(d/67108864|0)|0,p=p+s|0,s=67108863&p,o=o+(p>>>26)|0,h+=o>>>26,o&=67108863}r.words[e]=s,n=o,o=h}return 0!==n?r.words[e]=n:r.length--,r.strip()}function l(t,i,r){return(new m).mulp(t,i,r)}function m(t,i){this.x=t,this.y=i}function f(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function g(t){if("string"==typeof t){var i=h._prime(t);this.m=i.p,this.prime=i}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function c(t){g.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"===(void 0===t?"undefined":_typeof(t))?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;var w;try{w=_dereq_("buffer").Buffer}catch(t){}h.isBN=function(t){return t instanceof h||null!==t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype._init=function(t,i,n){if("number"==typeof t)return this._initNumber(t,i,n);if("object"===(void 0===t?"undefined":_typeof(t)))return this._initArray(t,i,n);"hex"===i&&(i=16),r(i===(0|i)&&i>=2&&i<=36),t=t.toString().replace(/\s+/g,"");var h=0;"-"===t[0]&&h++,16===i?this._parseHex(t,h):this._parseBase(t,i,h),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),i,n)},h.prototype._initNumber=function(t,i,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),i,n)},h.prototype._initArray=function(t,i,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var e,o,s=0;if("be"===n)for(h=t.length-1,e=0;h>=0;h-=3)o=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);else if("le"===n)for(h=0,e=0;h<t.length;h+=3)o=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);return this.strip()},h.prototype._parseHex=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,h,o=0;for(r=t.length-6,n=0;r>=i;r-=6)h=e(t,r,r+6),this.words[n]|=h<<o&67108863,this.words[n+1]|=h>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==i&&(h=e(t,i,r+6),this.words[n]|=h<<o&67108863,this.words[n+1]|=h>>>26-o&4194303),this.strip()},h.prototype._parseBase=function(t,i,r){this.words=[0],this.length=1;for(var n=0,h=1;h<=67108863;h*=i)n++;n--,h=h/i|0;for(var e=t.length-r,s=e%n,u=Math.min(e,e-s)+r,a=0,l=r;l<u;l+=n)a=o(t,l,l+n,i),this.imuln(h),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==s){var m=1;for(a=o(t,l,t.length,i),l=0;l<s;l++)m*=i;this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(t,i){t=t||10,i=0|i||1;var n;if(16===t||"hex"===t){n="";for(var h=0,e=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<h|e)).toString(16);e=s>>>24-h&16777215,n=0!==e||o!==this.length-1?y[6-u.length]+u+n:u+n,h+=2,h>=26&&(h-=26,o--)}for(0!==e&&(n=e.toString(16)+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var a=b[t],l=_[t];n="";var m=this.clone();for(m.negative=0;!m.isZero();){var f=m.modn(l).toString(t);m=m.idivn(l),n=m.isZero()?f+n:y[a-f.length]+f+n}for(this.isZero()&&(n="0"+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(t,i){return r(void 0!==w),this.toArrayLike(w,t,i)},h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,n){var h=this.byteLength(),e=n||Math.max(1,h);r(h<=e,"byte array longer than desired length"),r(e>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===i,a=new t(e),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[s]=o;for(;s<e;s++)a[s]=0}else{for(s=0;s<e-h;s++)a[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[e-s-1]=o}return a},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},h.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},h.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this.strip()},h.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=i.words[n]^r.words[n];if(this!==i)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=i.length,this.strip()},h.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),n=t%26;this._expand(i),n>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this.strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){r("number"==typeof t&&t>=0);var n=t/26|0,h=t%26;return this._expand(n+1),this.words[n]=i?this.words[n]|1<<h:this.words[n]&~(1<<h),this.strip()},h.prototype.iadd=function(t){var i;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var h=0,e=0;e<n.length;e++)i=(0|r.words[e])+(0|n.words[e])+h,this.words[e]=67108863&i,h=i>>>26;for(;0!==h&&e<r.length;e++)i=(0|r.words[e])+h,this.words[e]=67108863&i,h=i>>>26;if(this.length=r.length,0!==h)this.words[this.length]=h,this.length++;else if(r!==this)for(;e<r.length;e++)this.words[e]=r.words[e];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var n,h;r>0?(n=this,h=t):(n=t,h=this);for(var e=0,o=0;o<h.length;o++)i=(0|n.words[o])-(0|h.words[o])+e,e=i>>26,this.words[o]=67108863&i;for(;0!==e&&o<n.length;o++)i=(0|n.words[o])+e,e=i>>26,this.words[o]=67108863&i;if(0===e&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var k=function(t,i,r){var n,h,e,o=t.words,s=i.words,u=r.words,a=0,l=0|o[0],m=8191&l,f=l>>>13,d=0|o[1],p=8191&d,M=d>>>13,v=0|o[2],g=8191&v,c=v>>>13,w=0|o[3],y=8191&w,b=w>>>13,_=0|o[4],k=8191&_,A=_>>>13,S=0|o[5],x=8191&S,Z=S>>>13,q=0|o[6],R=8191&q,B=q>>>13,N=0|o[7],L=8191&N,I=N>>>13,z=0|o[8],T=8191&z,E=z>>>13,O=0|o[9],j=8191&O,K=O>>>13,P=0|s[0],F=8191&P,C=P>>>13,D=0|s[1],H=8191&D,J=D>>>13,U=0|s[2],G=8191&U,Q=U>>>13,V=0|s[3],W=8191&V,X=V>>>13,Y=0|s[4],$=8191&Y,tt=Y>>>13,it=0|s[5],rt=8191&it,nt=it>>>13,ht=0|s[6],et=8191&ht,ot=ht>>>13,st=0|s[7],ut=8191&st,at=st>>>13,lt=0|s[8],mt=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19,n=Math.imul(m,F),h=Math.imul(m,C),h=h+Math.imul(f,F)|0,e=Math.imul(f,C);var vt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,F),h=Math.imul(p,C),h=h+Math.imul(M,F)|0,e=Math.imul(M,C),n=n+Math.imul(m,H)|0,h=h+Math.imul(m,J)|0,h=h+Math.imul(f,H)|0,e=e+Math.imul(f,J)|0;var gt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),h=Math.imul(g,C),h=h+Math.imul(c,F)|0,e=Math.imul(c,C),n=n+Math.imul(p,H)|0,h=h+Math.imul(p,J)|0,h=h+Math.imul(M,H)|0,e=e+Math.imul(M,J)|0,n=n+Math.imul(m,G)|0,h=h+Math.imul(m,Q)|0,h=h+Math.imul(f,G)|0,e=e+Math.imul(f,Q)|0;var ct=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(ct>>>26)|0,ct&=67108863,n=Math.imul(y,F),h=Math.imul(y,C),h=h+Math.imul(b,F)|0,e=Math.imul(b,C),n=n+Math.imul(g,H)|0,h=h+Math.imul(g,J)|0,h=h+Math.imul(c,H)|0,e=e+Math.imul(c,J)|0,n=n+Math.imul(p,G)|0,h=h+Math.imul(p,Q)|0,h=h+Math.imul(M,G)|0,e=e+Math.imul(M,Q)|0,n=n+Math.imul(m,W)|0,h=h+Math.imul(m,X)|0,h=h+Math.imul(f,W)|0,e=e+Math.imul(f,X)|0;var wt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(k,F),h=Math.imul(k,C),h=h+Math.imul(A,F)|0,e=Math.imul(A,C),n=n+Math.imul(y,H)|0,h=h+Math.imul(y,J)|0,h=h+Math.imul(b,H)|0,e=e+Math.imul(b,J)|0,n=n+Math.imul(g,G)|0,h=h+Math.imul(g,Q)|0,h=h+Math.imul(c,G)|0,e=e+Math.imul(c,Q)|0,n=n+Math.imul(p,W)|0,h=h+Math.imul(p,X)|0,h=h+Math.imul(M,W)|0,e=e+Math.imul(M,X)|0,n=n+Math.imul(m,$)|0,h=h+Math.imul(m,tt)|0,h=h+Math.imul(f,$)|0,e=e+Math.imul(f,tt)|0;var yt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(x,F),h=Math.imul(x,C),h=h+Math.imul(Z,F)|0,e=Math.imul(Z,C),n=n+Math.imul(k,H)|0,h=h+Math.imul(k,J)|0,h=h+Math.imul(A,H)|0,e=e+Math.imul(A,J)|0,n=n+Math.imul(y,G)|0,h=h+Math.imul(y,Q)|0,h=h+Math.imul(b,G)|0,e=e+Math.imul(b,Q)|0,n=n+Math.imul(g,W)|0,h=h+Math.imul(g,X)|0,h=h+Math.imul(c,W)|0,e=e+Math.imul(c,X)|0,n=n+Math.imul(p,$)|0,h=h+Math.imul(p,tt)|0,h=h+Math.imul(M,$)|0,e=e+Math.imul(M,tt)|0,n=n+Math.imul(m,rt)|0,h=h+Math.imul(m,nt)|0,h=h+Math.imul(f,rt)|0,e=e+Math.imul(f,nt)|0;var bt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(R,F),h=Math.imul(R,C),h=h+Math.imul(B,F)|0,e=Math.imul(B,C),n=n+Math.imul(x,H)|0,h=h+Math.imul(x,J)|0,h=h+Math.imul(Z,H)|0,e=e+Math.imul(Z,J)|0,n=n+Math.imul(k,G)|0,h=h+Math.imul(k,Q)|0,h=h+Math.imul(A,G)|0,e=e+Math.imul(A,Q)|0,n=n+Math.imul(y,W)|0,h=h+Math.imul(y,X)|0,h=h+Math.imul(b,W)|0,e=e+Math.imul(b,X)|0,n=n+Math.imul(g,$)|0,h=h+Math.imul(g,tt)|0,h=h+Math.imul(c,$)|0,e=e+Math.imul(c,tt)|0,n=n+Math.imul(p,rt)|0,h=h+Math.imul(p,nt)|0,h=h+Math.imul(M,rt)|0,e=e+Math.imul(M,nt)|0,n=n+Math.imul(m,et)|0,h=h+Math.imul(m,ot)|0,h=h+Math.imul(f,et)|0,e=e+Math.imul(f,ot)|0;var _t=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(L,F),h=Math.imul(L,C),h=h+Math.imul(I,F)|0,e=Math.imul(I,C),n=n+Math.imul(R,H)|0,h=h+Math.imul(R,J)|0,h=h+Math.imul(B,H)|0,e=e+Math.imul(B,J)|0,n=n+Math.imul(x,G)|0,h=h+Math.imul(x,Q)|0,h=h+Math.imul(Z,G)|0,e=e+Math.imul(Z,Q)|0,n=n+Math.imul(k,W)|0,h=h+Math.imul(k,X)|0,h=h+Math.imul(A,W)|0,e=e+Math.imul(A,X)|0,n=n+Math.imul(y,$)|0,h=h+Math.imul(y,tt)|0,h=h+Math.imul(b,$)|0,e=e+Math.imul(b,tt)|0,n=n+Math.imul(g,rt)|0,h=h+Math.imul(g,nt)|0,h=h+Math.imul(c,rt)|0,e=e+Math.imul(c,nt)|0,n=n+Math.imul(p,et)|0,h=h+Math.imul(p,ot)|0,h=h+Math.imul(M,et)|0,e=e+Math.imul(M,ot)|0,n=n+Math.imul(m,ut)|0,h=h+Math.imul(m,at)|0,h=h+Math.imul(f,ut)|0,e=e+Math.imul(f,at)|0;var kt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(T,F),h=Math.imul(T,C),h=h+Math.imul(E,F)|0,e=Math.imul(E,C),n=n+Math.imul(L,H)|0,h=h+Math.imul(L,J)|0,h=h+Math.imul(I,H)|0,e=e+Math.imul(I,J)|0,n=n+Math.imul(R,G)|0,h=h+Math.imul(R,Q)|0,h=h+Math.imul(B,G)|0,e=e+Math.imul(B,Q)|0,n=n+Math.imul(x,W)|0,h=h+Math.imul(x,X)|0,h=h+Math.imul(Z,W)|0,e=e+Math.imul(Z,X)|0,n=n+Math.imul(k,$)|0,h=h+Math.imul(k,tt)|0,h=h+Math.imul(A,$)|0,e=e+Math.imul(A,tt)|0,n=n+Math.imul(y,rt)|0,h=h+Math.imul(y,nt)|0,h=h+Math.imul(b,rt)|0,e=e+Math.imul(b,nt)|0,n=n+Math.imul(g,et)|0,h=h+Math.imul(g,ot)|0,h=h+Math.imul(c,et)|0,e=e+Math.imul(c,ot)|0,n=n+Math.imul(p,ut)|0,h=h+Math.imul(p,at)|0,h=h+Math.imul(M,ut)|0,e=e+Math.imul(M,at)|0,n=n+Math.imul(m,mt)|0,h=h+Math.imul(m,ft)|0,h=h+Math.imul(f,mt)|0,e=e+Math.imul(f,ft)|0;var At=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(j,F),h=Math.imul(j,C),h=h+Math.imul(K,F)|0,e=Math.imul(K,C),n=n+Math.imul(T,H)|0,h=h+Math.imul(T,J)|0,h=h+Math.imul(E,H)|0,e=e+Math.imul(E,J)|0,n=n+Math.imul(L,G)|0,h=h+Math.imul(L,Q)|0,h=h+Math.imul(I,G)|0,e=e+Math.imul(I,Q)|0,n=n+Math.imul(R,W)|0,h=h+Math.imul(R,X)|0,h=h+Math.imul(B,W)|0,e=e+Math.imul(B,X)|0,n=n+Math.imul(x,$)|0,h=h+Math.imul(x,tt)|0,h=h+Math.imul(Z,$)|0,e=e+Math.imul(Z,tt)|0,n=n+Math.imul(k,rt)|0,h=h+Math.imul(k,nt)|0,h=h+Math.imul(A,rt)|0,e=e+Math.imul(A,nt)|0,n=n+Math.imul(y,et)|0,h=h+Math.imul(y,ot)|0,h=h+Math.imul(b,et)|0,e=e+Math.imul(b,ot)|0,n=n+Math.imul(g,ut)|0,h=h+Math.imul(g,at)|0,h=h+Math.imul(c,ut)|0,e=e+Math.imul(c,at)|0,n=n+Math.imul(p,mt)|0,h=h+Math.imul(p,ft)|0,h=h+Math.imul(M,mt)|0,e=e+Math.imul(M,ft)|0,n=n+Math.imul(m,pt)|0,h=h+Math.imul(m,Mt)|0,h=h+Math.imul(f,pt)|0,e=e+Math.imul(f,Mt)|0;var St=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(j,H),h=Math.imul(j,J),h=h+Math.imul(K,H)|0,e=Math.imul(K,J),n=n+Math.imul(T,G)|0,h=h+Math.imul(T,Q)|0,h=h+Math.imul(E,G)|0,e=e+Math.imul(E,Q)|0,n=n+Math.imul(L,W)|0,h=h+Math.imul(L,X)|0,h=h+Math.imul(I,W)|0,e=e+Math.imul(I,X)|0,n=n+Math.imul(R,$)|0,h=h+Math.imul(R,tt)|0,h=h+Math.imul(B,$)|0,e=e+Math.imul(B,tt)|0,n=n+Math.imul(x,rt)|0,h=h+Math.imul(x,nt)|0,h=h+Math.imul(Z,rt)|0,e=e+Math.imul(Z,nt)|0,n=n+Math.imul(k,et)|0,h=h+Math.imul(k,ot)|0,h=h+Math.imul(A,et)|0,e=e+Math.imul(A,ot)|0,n=n+Math.imul(y,ut)|0,h=h+Math.imul(y,at)|0,h=h+Math.imul(b,ut)|0,e=e+Math.imul(b,at)|0,n=n+Math.imul(g,mt)|0,h=h+Math.imul(g,ft)|0,h=h+Math.imul(c,mt)|0,e=e+Math.imul(c,ft)|0,n=n+Math.imul(p,pt)|0,h=h+Math.imul(p,Mt)|0,h=h+Math.imul(M,pt)|0,e=e+Math.imul(M,Mt)|0;var xt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(j,G),h=Math.imul(j,Q),h=h+Math.imul(K,G)|0,e=Math.imul(K,Q),n=n+Math.imul(T,W)|0,h=h+Math.imul(T,X)|0,h=h+Math.imul(E,W)|0,e=e+Math.imul(E,X)|0,n=n+Math.imul(L,$)|0,h=h+Math.imul(L,tt)|0,h=h+Math.imul(I,$)|0,e=e+Math.imul(I,tt)|0,n=n+Math.imul(R,rt)|0,h=h+Math.imul(R,nt)|0,h=h+Math.imul(B,rt)|0,e=e+Math.imul(B,nt)|0,n=n+Math.imul(x,et)|0,h=h+Math.imul(x,ot)|0,h=h+Math.imul(Z,et)|0,e=e+Math.imul(Z,ot)|0,n=n+Math.imul(k,ut)|0,h=h+Math.imul(k,at)|0,h=h+Math.imul(A,ut)|0,e=e+Math.imul(A,at)|0,n=n+Math.imul(y,mt)|0,h=h+Math.imul(y,ft)|0,h=h+Math.imul(b,mt)|0,e=e+Math.imul(b,ft)|0,n=n+Math.imul(g,pt)|0,h=h+Math.imul(g,Mt)|0,h=h+Math.imul(c,pt)|0,e=e+Math.imul(c,Mt)|0;var Zt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,n=Math.imul(j,W),h=Math.imul(j,X),h=h+Math.imul(K,W)|0,e=Math.imul(K,X),n=n+Math.imul(T,$)|0,h=h+Math.imul(T,tt)|0,h=h+Math.imul(E,$)|0,e=e+Math.imul(E,tt)|0,n=n+Math.imul(L,rt)|0,h=h+Math.imul(L,nt)|0,h=h+Math.imul(I,rt)|0,e=e+Math.imul(I,nt)|0,n=n+Math.imul(R,et)|0,h=h+Math.imul(R,ot)|0,h=h+Math.imul(B,et)|0,e=e+Math.imul(B,ot)|0,n=n+Math.imul(x,ut)|0,h=h+Math.imul(x,at)|0,h=h+Math.imul(Z,ut)|0,e=e+Math.imul(Z,at)|0,n=n+Math.imul(k,mt)|0,h=h+Math.imul(k,ft)|0,h=h+Math.imul(A,mt)|0,e=e+Math.imul(A,ft)|0,n=n+Math.imul(y,pt)|0,h=h+Math.imul(y,Mt)|0,h=h+Math.imul(b,pt)|0,e=e+Math.imul(b,Mt)|0;var qt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(j,$),h=Math.imul(j,tt),h=h+Math.imul(K,$)|0,e=Math.imul(K,tt),n=n+Math.imul(T,rt)|0,h=h+Math.imul(T,nt)|0,h=h+Math.imul(E,rt)|0,e=e+Math.imul(E,nt)|0,n=n+Math.imul(L,et)|0,h=h+Math.imul(L,ot)|0,h=h+Math.imul(I,et)|0,e=e+Math.imul(I,ot)|0,n=n+Math.imul(R,ut)|0,h=h+Math.imul(R,at)|0,h=h+Math.imul(B,ut)|0,e=e+Math.imul(B,at)|0,n=n+Math.imul(x,mt)|0,h=h+Math.imul(x,ft)|0,h=h+Math.imul(Z,mt)|0,e=e+Math.imul(Z,ft)|0,n=n+Math.imul(k,pt)|0,h=h+Math.imul(k,Mt)|0,h=h+Math.imul(A,pt)|0,e=e+Math.imul(A,Mt)|0;var Rt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(j,rt),h=Math.imul(j,nt),h=h+Math.imul(K,rt)|0,e=Math.imul(K,nt),n=n+Math.imul(T,et)|0,h=h+Math.imul(T,ot)|0,h=h+Math.imul(E,et)|0,e=e+Math.imul(E,ot)|0,n=n+Math.imul(L,ut)|0,h=h+Math.imul(L,at)|0,h=h+Math.imul(I,ut)|0,e=e+Math.imul(I,at)|0,n=n+Math.imul(R,mt)|0,h=h+Math.imul(R,ft)|0,h=h+Math.imul(B,mt)|0,e=e+Math.imul(B,ft)|0,n=n+Math.imul(x,pt)|0,h=h+Math.imul(x,Mt)|0,h=h+Math.imul(Z,pt)|0,e=e+Math.imul(Z,Mt)|0;var Bt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(j,et),h=Math.imul(j,ot),h=h+Math.imul(K,et)|0,e=Math.imul(K,ot),n=n+Math.imul(T,ut)|0,h=h+Math.imul(T,at)|0,h=h+Math.imul(E,ut)|0,e=e+Math.imul(E,at)|0,n=n+Math.imul(L,mt)|0,h=h+Math.imul(L,ft)|0,h=h+Math.imul(I,mt)|0,e=e+Math.imul(I,ft)|0,n=n+Math.imul(R,pt)|0,h=h+Math.imul(R,Mt)|0,h=h+Math.imul(B,pt)|0,e=e+Math.imul(B,Mt)|0;var Nt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(j,ut),h=Math.imul(j,at),h=h+Math.imul(K,ut)|0,e=Math.imul(K,at),n=n+Math.imul(T,mt)|0,h=h+Math.imul(T,ft)|0,h=h+Math.imul(E,mt)|0,e=e+Math.imul(E,ft)|0,n=n+Math.imul(L,pt)|0,h=h+Math.imul(L,Mt)|0,h=h+Math.imul(I,pt)|0,e=e+Math.imul(I,Mt)|0;var Lt=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(j,mt),h=Math.imul(j,ft),h=h+Math.imul(K,mt)|0,e=Math.imul(K,ft),n=n+Math.imul(T,pt)|0,h=h+Math.imul(T,Mt)|0,h=h+Math.imul(E,pt)|0,e=e+Math.imul(E,Mt)|0;var It=(a+n|0)+((8191&h)<<13)|0;a=(e+(h>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(j,pt),h=Math.imul(j,Mt),h=h+Math.imul(K,pt)|0,e=Math.imul(K,Mt);var zt=(a+n|0)+((8191&h)<<13)|0;return a=(e+(h>>>13)|0)+(zt>>>26)|0,zt&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=bt,u[6]=_t,u[7]=kt,u[8]=At,u[9]=St,u[10]=xt,u[11]=Zt,u[12]=qt,u[13]=Rt,u[14]=Bt,u[15]=Nt,u[16]=Lt,u[17]=It,u[18]=zt,0!==a&&(u[19]=a,r.length++),r};Math.imul||(k=u),h.prototype.mulTo=function(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?k(this,t,i):r<63?u(this,t,i):r<1024?a(this,t,i):l(this,t,i)},m.prototype.makeRBT=function(t){for(var i=new Array(t),r=h.prototype._countBits(t)-1,n=0;n<t;n++)i[n]=this.revBin(n,r,t);return i},m.prototype.revBin=function(t,i,r){if(0===t||t===r-1)return t;for(var n=0,h=0;h<i;h++)n|=(1&t)<<i-h-1,t>>=1;return n},m.prototype.permute=function(t,i,r,n,h,e){for(var o=0;o<e;o++)n[o]=i[t[o]],h[o]=r[t[o]]},m.prototype.transform=function(t,i,r,n,h,e){this.permute(e,t,i,r,n,h);for(var o=1;o<h;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),l=0;l<h;l+=s)for(var m=u,f=a,d=0;d<o;d++){var p=r[l+d],M=n[l+d],v=r[l+d+o],g=n[l+d+o],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,n[l+d]=M+g,r[l+d+o]=p-v,n[l+d+o]=M-g,d!==s&&(c=u*m-a*f,f=u*f+a*m,m=c)}},m.prototype.guessLen13b=function(t,i){var r=1|Math.max(i,t),n=1&r,h=0;for(r=r/2|0;r;r>>>=1)h++;return 1<<h+1+n},m.prototype.conjugate=function(t,i,r){if(!(r<=1))for(var n=0;n<r/2;n++){var h=t[n];t[n]=t[r-n-1],t[r-n-1]=h,h=i[n],i[n]=-i[r-n-1],i[r-n-1]=-h}},m.prototype.normalize13b=function(t,i){for(var r=0,n=0;n<i/2;n++){var h=8192*Math.round(t[2*n+1]/i)+Math.round(t[2*n]/i)+r;t[n]=67108863&h,r=h<67108864?0:h/67108864|0}return t},m.prototype.convert13b=function(t,i,n,h){for(var e=0,o=0;o<i;o++)e+=0|t[o],n[2*o]=8191&e,e>>>=13,n[2*o+1]=8191&e,e>>>=13;for(o=2*i;o<h;++o)n[o]=0;r(0===e),r(0==(-8192&e))},m.prototype.stub=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},m.prototype.mulp=function(t,i,r){var n=2*this.guessLen13b(t.length,i.length),h=this.makeRBT(n),e=this.stub(n),o=new Array(n),s=new Array(n),u=new Array(n),a=new Array(n),l=new Array(n),m=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(i.words,i.length,a,n),this.transform(o,e,s,u,n,h),this.transform(a,e,l,m,n,h);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*m[d];u[d]=s[d]*m[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,f,e,n,h),this.conjugate(f,e,n),this.normalize13b(f,n),r.negative=t.negative^i.negative,r.length=t.length+i.length,r.strip()},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),l(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var h=(0|this.words[n])*t,e=(67108863&h)+(67108863&i);i>>=26,i+=h/67108864|0,i+=e>>>26,this.words[n]=67108863&e}return 0!==i&&(this.words[n]=i,this.length++),this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=s(t);if(0===i.length)return new h(1);for(var r=this,n=0;n<i.length&&0===i[n];n++,r=r.sqr());if(++n<i.length)for(var e=r.sqr();n<i.length;n++,e=e.sqr())0!==i[n]&&(r=r.mul(e));return r},h.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,n=t%26,h=(t-n)/26,e=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(i=0;i<this.length;i++){var s=this.words[i]&e,u=(0|this.words[i])-s<<n;this.words[i]=u|o,o=s>>>26-n}o&&(this.words[i]=o,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.strip()},h.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,n){r("number"==typeof t&&t>=0);var h;h=i?(i-i%26)/26:0;var e=t%26,o=Math.min((t-e)/26,this.length),s=67108863^67108863>>>e<<e,u=n;if(h-=o,h=Math.max(0,h),u){for(var a=0;a<o;a++)u.words[a]=this.words[a];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,a=0;a<this.length;a++)this.words[a]=this.words[a+o];else this.words[0]=0,this.length=1;var l=0;for(a=this.length-1;a>=0&&(0!==l||a>=h);a--){var m=0|this.words[a];this.words[a]=l<<26-e|m>>>e,l=m&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(t,i,n){return r(0===this.negative),this.iushrn(t,i,n)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26,h=1<<i;return!(this.length<=n)&&!!(this.words[n]&h)},h.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==i&&n++,this.length=Math.min(n,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,i,n){var h,e=t.length+n;this._expand(e);var o,s=0;for(h=0;h<t.length;h++){o=(0|this.words[h+n])+s;var u=(0|t.words[h])*i;o-=67108863&u,s=(o>>26)-(u/67108864|0),this.words[h+n]=67108863&o}for(;h<this.length-n;h++)o=(0|this.words[h+n])+s,s=o>>26,this.words[h+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,h=0;h<this.length;h++)o=-(0|this.words[h])+s,s=o>>26,this.words[h]=67108863&o;return this.negative=1,this.strip()},h.prototype._wordDiv=function(t,i){var r=this.length-t.length,n=this.clone(),e=t,o=0|e.words[e.length-1];0!==(r=26-this._countBits(o))&&(e=e.ushln(r),n.iushln(r),o=0|e.words[e.length-1]);var s,u=n.length-e.length;if("mod"!==i){s=new h(null),s.length=u+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var l=n.clone()._ishlnsubmul(e,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var m=u-1;m>=0;m--){var f=67108864*(0|n.words[e.length+m])+(0|n.words[e.length+m-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(e,f,m);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(e,1,m),n.isZero()||(n.negative^=1);s&&(s.words[m]=f)}return s&&s.strip(),n.strip(),"div"!==i&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},h.prototype.divmod=function(t,i,n){if(r(!t.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var e,o,s;return 0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,i),"mod"!==i&&(e=s.div.neg()),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:e,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),i),"mod"!==i&&(e=s.div.neg()),{div:e,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),i),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modn(t.words[0]))}:this._wordDiv(t,i)},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){
return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,n=t.ushrn(1),h=t.andln(1),e=r.cmp(n);return e<0||1===h&&0===e?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modn=function(t){r(t<=67108863);for(var i=(1<<26)%t,n=0,h=this.length-1;h>=0;h--)n=(i*n+(0|this.words[h]))%t;return n},h.prototype.idivn=function(t){r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var h=(0|this.words[n])+67108864*i;this.words[n]=h/t|0,i=h%t}return this.strip()},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new h(1),o=new h(0),s=new h(0),u=new h(1),a=0;i.isEven()&&n.isEven();)i.iushrn(1),n.iushrn(1),++a;for(var l=n.clone(),m=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(e.isOdd()||o.isOdd())&&(e.iadd(l),o.isub(m)),e.iushrn(1),o.iushrn(1);for(var p=0,M=1;0==(n.words[0]&M)&&p<26;++p,M<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(m)),s.iushrn(1),u.iushrn(1);i.cmp(n)>=0?(i.isub(n),e.isub(s),o.isub(u)):(n.isub(i),s.isub(e),u.isub(o))}return{a:s,b:u,gcd:n.iushln(a)}},h.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new h(1),o=new h(0),s=n.clone();i.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,a=1;0==(i.words[0]&a)&&u<26;++u,a<<=1);if(u>0)for(i.iushrn(u);u-- >0;)e.isOdd()&&e.iadd(s),e.iushrn(1);for(var l=0,m=1;0==(n.words[0]&m)&&l<26;++l,m<<=1);if(l>0)for(n.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);i.cmp(n)>=0?(i.isub(n),e.isub(o)):(n.isub(i),o.isub(e))}var f;return f=0===i.cmpn(1)?e:o,f.cmpn(0)<0&&f.iadd(t),f},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var n=0;i.isEven()&&r.isEven();n++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var h=i.cmp(r);if(h<0){var e=i;i=r,r=e}else if(0===h||0===r.cmpn(1))break;i.isub(r)}return r.iushln(n)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){r("number"==typeof t);var i=t%26,n=(t-i)/26,h=1<<i;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var e=h,o=n;0!==e&&o<this.length;o++){var s=0|this.words[o];s+=e,e=s>>>26,s&=67108863,this.words[o]=s}return 0!==e&&(this.words[o]=e,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;this.strip();var n;if(this.length>1)n=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var h=0|this.words[0];n=h===t?0:h<t?-1:1}return 0!==this.negative?0|-n:n},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],h=0|t.words[r];if(n!==h){n<h?i=-1:n>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new g(t)},h.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},f.prototype.ireduce=function(t){var i,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),i=r.bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},f.prototype.split=function(t,i){t.iushrn(this.n,0,i)},f.prototype.imulK=function(t){return t.imul(this.k)},n(d,f),d.prototype.split=function(t,i){for(var r=Math.min(t.length,9),n=0;n<r;n++)i.words[n]=t.words[n];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var h=t.words[9];for(i.words[i.length++]=4194303&h,n=10;n<t.length;n++){var e=0|t.words[n];t.words[n-10]=(4194303&e)<<4|h>>>22,h=e}h>>>=22,t.words[n-10]=h,0===h&&t.length>10?t.length-=10:t.length-=9},d.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var n=0|t.words[r];i+=977*n,t.words[r]=67108863&i,i=64*n+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(p,f),n(M,f),n(v,f),v.prototype.imulK=function(t){for(var i=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+i,h=67108863&n;n>>>=26,t.words[r]=h,i=n}return 0!==i&&(t.words[t.length++]=i),t},h._prime=function(t){if(A[t])return A[t];var i;if("k256"===t)i=new d;else if("p224"===t)i=new p;else if("p192"===t)i=new M;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new v}return A[t]=i,i},g.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},g.prototype._verify2=function(t,i){r(0==(t.negative|i.negative),"red works only with positives"),r(t.red&&t.red===i.red,"red works only with red numbers")},g.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},g.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},g.prototype.add=function(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},g.prototype.iadd=function(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},g.prototype.sub=function(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},g.prototype.isub=function(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},g.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},g.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},g.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},g.prototype.isqr=function(t){return this.imul(t,t.clone())},g.prototype.sqr=function(t){return this.mul(t,t)},g.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(r(i%2==1),3===i){var n=this.m.add(new h(1)).iushrn(2);return this.pow(t,n)}for(var e=this.m.subn(1),o=0;!e.isZero()&&0===e.andln(1);)o++,e.iushrn(1);r(!e.isZero());var s=new h(1).toRed(this),u=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,a).cmp(u);)l.redIAdd(u);for(var m=this.pow(l,e),f=this.pow(t,e.addn(1).iushrn(1)),d=this.pow(t,e),p=o;0!==d.cmp(s);){for(var M=d,v=0;0!==M.cmp(s);v++)M=M.redSqr();r(v<p);var g=this.pow(m,new h(1).iushln(p-v-1));f=f.redMul(g),m=g.redSqr(),d=d.redMul(m),p=v}return f},g.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},g.prototype.pow=function(t,i){if(i.isZero())return new h(1);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new h(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var e=r[0],o=0,s=0,u=i.bitLength()%26;for(0===u&&(u=26),n=i.length-1;n>=0;n--){for(var a=i.words[n],l=u-1;l>=0;l--){var m=a>>l&1;e!==r[0]&&(e=this.sqr(e)),0!==m||0!==o?(o<<=1,o|=m,(4===++s||0===n&&0===l)&&(e=this.mul(e,r[o]),s=0,o=0)):s=0}u=26}return e},g.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},g.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new c(t)},n(c,g),c.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},c.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},c.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=r.isub(n).iushrn(this.shift),e=h;return h.cmp(this.m)>=0?e=h.isub(this.m):h.cmpn(0)<0&&(e=h.iadd(this.m)),e._forceRed(this)},c.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0)._forceRed(this);var r=t.mul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=r.isub(n).iushrn(this.shift),o=e;return e.cmp(this.m)>=0?o=e.isub(this.m):e.cmpn(0)<0&&(o=e.iadd(this.m)),o._forceRed(this)},c.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,void 0);

},{"buffer":87}],77:[function(_dereq_,module,exports){
"use strict";function findBounds(r){var n=r.length;if(0===n)return[[],[]];for(var t=r[0].length,e=r[0].slice(),i=r[0].slice(),a=1;a<n;++a)for(var o=r[a],s=0;s<t;++s){var u=o[s];e[s]=Math.min(e[s],u),i[s]=Math.max(i[s],u)}return[e,i]}module.exports=findBounds;

},{}],78:[function(_dereq_,module,exports){
"use strict";function boxEmpty(e,r){for(var t=0;t<e;++t)if(!(r[t]<=r[t+e]))return!0;return!1}function convertBoxes(e,r,t,o){for(var n=0,i=0,p=0,l=e.length;p<l;++p){var s=e[p];if(!boxEmpty(r,s)){for(var c=0;c<2*r;++c)t[n++]=s[c];o[i++]=p}}return i}function boxIntersect(e,r,t,o){var n=e.length,i=r.length;if(!(n<=0||i<=0)){var p=e[0].length>>>1;if(!(p<=0)){var l,s=pool.mallocDouble(2*p*n),c=pool.mallocInt32(n);if((n=convertBoxes(e,p,s,c))>0){if(1===p&&o)sweep.init(n),l=sweep.sweepComplete(p,t,0,n,s,c,0,n,s,c);else{var a=pool.mallocDouble(2*p*i),u=pool.mallocInt32(i);i=convertBoxes(r,p,a,u),i>0&&(sweep.init(n+i),l=1===p?sweep.sweepBipartite(p,t,0,n,s,c,0,i,a,u):boxIntersectIter(p,t,o,n,s,c,i,a,u),pool.free(a),pool.free(u))}pool.free(s),pool.free(c)}return l}}}function appendItem(e,r){RESULT.push([e,r])}function intersectFullArray(e){return RESULT=[],boxIntersect(e,e,appendItem,!0),RESULT}function intersectBipartiteArray(e,r){return RESULT=[],boxIntersect(e,r,appendItem,!1),RESULT}function boxIntersectWrapper(e,r,t){switch(arguments.length){case 1:return intersectFullArray(e);case 2:return"function"==typeof r?boxIntersect(e,e,r,!0):intersectBipartiteArray(e,r);case 3:return boxIntersect(e,r,t,!1);default:throw new Error("box-intersect: Invalid arguments")}}module.exports=boxIntersectWrapper;var pool=_dereq_("typedarray-pool"),sweep=_dereq_("./lib/sweep"),boxIntersectIter=_dereq_("./lib/intersect"),RESULT;

},{"./lib/intersect":80,"./lib/sweep":84,"typedarray-pool":423}],79:[function(_dereq_,module,exports){
"use strict";function generateBruteForce(E,R,r){var _="bruteForce"+(E?"Red":"Blue")+(R?"Flip":"")+(r?"Full":""),e=["function ",_,"(",ARGS.join(),"){","var ",ELEM_SIZE,"=2*",DIMENSION,";"],S="for(var i="+RED_START+","+RED_PTR+"="+ELEM_SIZE+"*"+RED_START+";i<"+RED_END+";++i,"+RED_PTR+"+="+ELEM_SIZE+"){var x0="+RED_BOXES+"["+AXIS+"+"+RED_PTR+"],x1="+RED_BOXES+"["+AXIS+"+"+RED_PTR+"+"+DIMENSION+"],xi="+RED_INDEX+"[i];",I="for(var j="+BLUE_START+","+BLUE_PTR+"="+ELEM_SIZE+"*"+BLUE_START+";j<"+BLUE_END+";++j,"+BLUE_PTR+"+="+ELEM_SIZE+"){var y0="+BLUE_BOXES+"["+AXIS+"+"+BLUE_PTR+"],"+(r?"y1="+BLUE_BOXES+"["+AXIS+"+"+BLUE_PTR+"+"+DIMENSION+"],":"")+"yi="+BLUE_INDEX+"[j];";return E?e.push(S,INNER_LABEL,":",I):e.push(I,INNER_LABEL,":",S),r?e.push("if(y1<x0||x1<y0)continue;"):R?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;"),e.push("for(var k="+AXIS+"+1;k<"+DIMENSION+";++k){var r0="+RED_BOXES+"[k+"+RED_PTR+"],r1="+RED_BOXES+"[k+"+DIMENSION+"+"+RED_PTR+"],b0="+BLUE_BOXES+"[k+"+BLUE_PTR+"],b1="+BLUE_BOXES+"[k+"+DIMENSION+"+"+BLUE_PTR+"];if(r1<b0||b1<r0)continue "+INNER_LABEL+";}var "+RETVAL+"="+VISIT+"("),R?e.push("yi,xi"):e.push("xi,yi"),e.push(");if("+RETVAL+"!==void 0)return "+RETVAL+";}}}"),{name:_,code:e.join("")}}function bruteForcePlanner(E){function R(R,r){var e=generateBruteForce(R,r,E);_.push(e.code),S.push("return "+e.name+"("+ARGS.join()+");")}var r="bruteForce"+(E?"Full":"Partial"),_=[],e=ARGS.slice();E||e.splice(3,0,FLIP);var S=["function "+r+"("+e.join()+"){"];S.push("if("+RED_END+"-"+RED_START+">"+BLUE_END+"-"+BLUE_START+"){"),E?(R(!0,!1),S.push("}else{"),R(!1,!1)):(S.push("if("+FLIP+"){"),R(!0,!0),S.push("}else{"),R(!0,!1),S.push("}}else{if("+FLIP+"){"),R(!1,!0),S.push("}else{"),R(!1,!1),S.push("}")),S.push("}}return "+r);var I=_.join("")+S.join("");return new Function(I)()}var DIMENSION="d",AXIS="ax",VISIT="vv",FLIP="fp",ELEM_SIZE="es",RED_START="rs",RED_END="re",RED_BOXES="rb",RED_INDEX="ri",RED_PTR="rp",BLUE_START="bs",BLUE_END="be",BLUE_BOXES="bb",BLUE_INDEX="bi",BLUE_PTR="bp",RETVAL="rv",INNER_LABEL="Q",ARGS=[DIMENSION,AXIS,VISIT,RED_START,RED_END,RED_BOXES,RED_INDEX,BLUE_START,BLUE_END,BLUE_BOXES,BLUE_INDEX];exports.partial=bruteForcePlanner(!1),exports.full=bruteForcePlanner(!0);

},{}],80:[function(_dereq_,module,exports){
"use strict";function iterInit(i,t){var e=8*bits.log2(t+1)*(i+1)|0,r=bits.nextPow2(IFRAME_SIZE*e);BOX_ISTACK.length<r&&(pool.free(BOX_ISTACK),BOX_ISTACK=pool.mallocInt32(r));var o=bits.nextPow2(DFRAME_SIZE*e);BOX_DSTACK<o&&(pool.free(BOX_DSTACK),BOX_DSTACK=pool.mallocDouble(o))}function iterPush(i,t,e,r,o,n,a,p,s){var u=IFRAME_SIZE*i;BOX_ISTACK[u]=t,BOX_ISTACK[u+1]=e,BOX_ISTACK[u+2]=r,BOX_ISTACK[u+3]=o,BOX_ISTACK[u+4]=n,BOX_ISTACK[u+5]=a;var l=DFRAME_SIZE*i;BOX_DSTACK[l]=p,BOX_DSTACK[l+1]=s}function onePointPartial(i,t,e,r,o,n,a,p,s,u,l){var C=2*i,I=s*C,_=u[I+t];i:for(var T=o,f=o*C;T<n;++T,f+=C){var A=a[f+t],P=a[f+t+i];if(!(_<A||P<_)&&(!r||_!==A)){for(var S=p[T],v=t+1;v<i;++v){var A=a[f+v],P=a[f+v+i],F=u[I+v],O=u[I+v+i];if(P<F||O<A)continue i}var B;if(void 0!==(B=r?e(l,S):e(S,l)))return B}}}function onePointFull(i,t,e,r,o,n,a,p,s,u){var l=2*i,C=p*l,I=s[C+t];i:for(var _=r,T=r*l;_<o;++_,T+=l){var f=a[_];if(f!==u){var A=n[T+t],P=n[T+t+i];if(!(I<A||P<I)){for(var S=t+1;S<i;++S){var A=n[T+S],P=n[T+S+i],v=s[C+S],F=s[C+S+i];if(P<v||F<A)continue i}var O=e(f,u);if(void 0!==O)return O}}}}function boxIntersectIter(i,t,e,r,o,n,a,p,s){iterInit(i,r+a);var u,l=0,C=2*i;for(iterPush(l++,0,0,r,0,a,e?16:0,-1/0,1/0),e||iterPush(l++,0,0,a,0,r,1,-1/0,1/0);l>0;){l-=1;var I=l*IFRAME_SIZE,_=BOX_ISTACK[I],T=BOX_ISTACK[I+1],f=BOX_ISTACK[I+2],A=BOX_ISTACK[I+3],P=BOX_ISTACK[I+4],S=BOX_ISTACK[I+5],v=l*DFRAME_SIZE,F=BOX_DSTACK[v],O=BOX_DSTACK[v+1],B=1&S,E=!!(16&S),c=o,K=n,X=p,h=s;if(B&&(c=p,K=s,X=o,h=n),!(2&S&&(f=partitionStartLessThan(i,_,T,f,c,K,O),T>=f)||4&S&&(T=partitionEndLessThanEqual(i,_,T,f,c,K,F))>=f)){var d=f-T,w=P-A;if(E){if(i*d*(d+w)<SCAN_COMPLETE_CUTOFF){if(void 0!==(u=sweep.scanComplete(i,_,t,T,f,c,K,A,P,X,h)))return u;continue}}else{if(i*Math.min(d,w)<BRUTE_FORCE_CUTOFF){if(void 0!==(u=bruteForcePartial(i,_,t,B,T,f,c,K,A,P,X,h)))return u;continue}if(i*d*w<SCAN_CUTOFF){if(void 0!==(u=sweep.scanBipartite(i,_,t,B,T,f,c,K,A,P,X,h)))return u;continue}}var b=partitionInteriorContainsInterval(i,_,T,f,c,K,F,O);if(T<b)if(i*(b-T)<BRUTE_FORCE_CUTOFF){if(void 0!==(u=bruteForceFull(i,_+1,t,T,b,c,K,A,P,X,h)))return u}else if(_===i-2){if(void 0!==(u=B?sweep.sweepBipartite(i,t,A,P,X,h,T,b,c,K):sweep.sweepBipartite(i,t,T,b,c,K,A,P,X,h)))return u}else iterPush(l++,_+1,T,b,A,P,B,-1/0,1/0),iterPush(l++,_+1,A,P,T,b,1^B,-1/0,1/0);if(b<f){var D=findMedian(i,_,A,P,X,h),R=X[C*D+_],M=partitionStartEqual(i,_,D,P,X,h,R);if(M<P&&iterPush(l++,_,b,f,M,P,(4|B)+(E?16:0),R,O),A<D&&iterPush(l++,_,b,f,A,D,(2|B)+(E?16:0),F,R),D+1===M){if(void 0!==(u=E?onePointFull(i,_,t,b,f,c,K,D,X,h[D]):onePointPartial(i,_,t,B,b,f,c,K,D,X,h[D])))return u}else if(D<M){var q;if(E){if(q=partitionContainsPoint(i,_,b,f,c,K,R),b<q){var U=partitionStartEqual(i,_,b,q,c,K,R);if(_===i-2){if(b<U&&void 0!==(u=sweep.sweepComplete(i,t,b,U,c,K,D,M,X,h)))return u;if(U<q&&void 0!==(u=sweep.sweepBipartite(i,t,U,q,c,K,D,M,X,h)))return u}else b<U&&iterPush(l++,_+1,b,U,D,M,16,-1/0,1/0),U<q&&(iterPush(l++,_+1,U,q,D,M,0,-1/0,1/0),iterPush(l++,_+1,D,M,U,q,1,-1/0,1/0))}}else q=B?partitionContainsPointProper(i,_,b,f,c,K,R):partitionContainsPoint(i,_,b,f,c,K,R),b<q&&(_===i-2?u=B?sweep.sweepBipartite(i,t,D,M,X,h,b,q,c,K):sweep.sweepBipartite(i,t,b,q,c,K,D,M,X,h):(iterPush(l++,_+1,b,q,D,M,B,-1/0,1/0),iterPush(l++,_+1,D,M,b,q,1^B,-1/0,1/0)))}}}}}module.exports=boxIntersectIter;var pool=_dereq_("typedarray-pool"),bits=_dereq_("bit-twiddle"),bruteForce=_dereq_("./brute"),bruteForcePartial=bruteForce.partial,bruteForceFull=bruteForce.full,sweep=_dereq_("./sweep"),findMedian=_dereq_("./median"),genPartition=_dereq_("./partition"),BRUTE_FORCE_CUTOFF=128,SCAN_CUTOFF=1<<22,SCAN_COMPLETE_CUTOFF=1<<22,partitionInteriorContainsInterval=genPartition("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),partitionStartEqual=genPartition("lo===p0",["p0"]),partitionStartLessThan=genPartition("lo<p0",["p0"]),partitionEndLessThanEqual=genPartition("hi<=p0",["p0"]),partitionContainsPoint=genPartition("lo<=p0&&p0<=hi",["p0"]),partitionContainsPointProper=genPartition("lo<p0&&p0<=hi",["p0"]),IFRAME_SIZE=6,DFRAME_SIZE=2,INIT_CAPACITY=1024,BOX_ISTACK=pool.mallocInt32(INIT_CAPACITY),BOX_DSTACK=pool.mallocDouble(INIT_CAPACITY);

},{"./brute":79,"./median":81,"./partition":82,"./sweep":84,"bit-twiddle":75,"typedarray-pool":423}],81:[function(_dereq_,module,exports){
"use strict";function insertionSort(r,a,t,i,n,o){for(var e=2*r,f=e*(t+1)+a,v=t+1;v<i;++v,f+=e)for(var s=n[f],T=v,d=e*(v-1);T>t&&n[d+a]>s;--T,d-=e){for(var p=d,u=d+e,S=0;S<e;++S,++p,++u){var h=n[p];n[p]=n[u],n[u]=h}var L=o[T];o[T]=o[T-1],o[T-1]=L}}function findMedian(r,a,t,i,n,o){if(i<=t+1)return t;for(var e=t,f=i,v=i+t>>>1,s=2*r,T=v,d=n[s*v+a];e<f;){if(f-e<PARTITION_THRESHOLD){insertionSort(r,a,e,f,n,o),d=n[s*v+a];break}var p=f-e,u=Math.random()*p+e|0,S=n[s*u+a],h=Math.random()*p+e|0,L=n[s*h+a],M=Math.random()*p+e|0,m=n[s*M+a];S<=L?m>=L?(T=h,d=L):S>=m?(T=u,d=S):(T=M,d=m):L>=m?(T=h,d=L):m>=S?(T=u,d=S):(T=M,d=m);for(var H=s*(f-1),I=s*T,O=0;O<s;++O,++H,++I){var P=n[H];n[H]=n[I],n[I]=P}var R=o[f-1];o[f-1]=o[T],o[T]=R,T=partitionStartLessThan(r,a,e,f-1,n,o,d);for(var H=s*(f-1),I=s*T,O=0;O<s;++O,++H,++I){var P=n[H];n[H]=n[I],n[I]=P}var R=o[f-1];if(o[f-1]=o[T],o[T]=R,v<T){for(f=T-1;e<f&&n[s*(f-1)+a]===d;)f-=1;f+=1}else{if(!(T<v))break;for(e=T+1;e<f&&n[s*e+a]===d;)e+=1}}return partitionStartLessThan(r,a,t,v,n,o,n[s*v+a])}module.exports=findMedian;var genPartition=_dereq_("./partition"),partitionStartLessThan=genPartition("lo<p0",["p0"]),PARTITION_THRESHOLD=8;

},{"./partition":82}],82:[function(_dereq_,module,exports){
"use strict";function genPartition(e,r){var o="abcdef".split("").concat(r),a=[];return e.indexOf("lo")>=0&&a.push("lo=e[k+n]"),e.indexOf("hi")>=0&&a.push("hi=e[k+o]"),o.push(code.replace("_",a.join()).replace("$",e)),Function.apply(void 0,o)}module.exports=genPartition;var code="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";

},{}],83:[function(_dereq_,module,exports){
"use strict";function wrapper(r,o){o<=4*INSERT_SORT_CUTOFF?insertionSort(0,o-1,r):quickSort(0,o-1,r)}function insertionSort(r,o,e){for(var t=2*(r+1),i=r+1;i<=o;++i){for(var a=e[t++],c=e[t++],n=i,f=t-2;n-- >r;){var p=e[f-2],v=e[f-1];if(p<a)break;if(p===a&&v<c)break;e[f]=p,e[f+1]=v,f-=2}e[f]=a,e[f+1]=c}}function swap(r,o,e){r*=2,o*=2;var t=e[r],i=e[r+1];e[r]=e[o],e[r+1]=e[o+1],e[o]=t,e[o+1]=i}function move(r,o,e){r*=2,o*=2,e[r]=e[o],e[r+1]=e[o+1]}function rotate(r,o,e,t){r*=2,o*=2,e*=2;var i=t[r],a=t[r+1];t[r]=t[o],t[r+1]=t[o+1],t[o]=t[e],t[o+1]=t[e+1],t[e]=i,t[e+1]=a}function shufflePivot(r,o,e,t,i){r*=2,o*=2,i[r]=i[o],i[o]=e,i[r+1]=i[o+1],i[o+1]=t}function compare(r,o,e){r*=2,o*=2;var t=e[r],i=e[o];return!(t<i)&&(t!==i||e[r+1]>e[o+1])}function comparePivot(r,o,e,t){r*=2;var i=t[r];return i<o||i===o&&t[r+1]<e}function quickSort(r,o,e){var t=(o-r+1)/6|0,i=r+t,a=o-t,c=r+o>>1,n=c-t,f=c+t,p=i,v=n,u=c,S=f,m=a,s=r+1,T=o-1,F=0;compare(p,v,e)&&(F=p,p=v,v=F),compare(S,m,e)&&(F=S,S=m,m=F),compare(p,u,e)&&(F=p,p=u,u=F),compare(v,u,e)&&(F=v,v=u,u=F),compare(p,S,e)&&(F=p,p=S,S=F),compare(u,S,e)&&(F=u,u=S,S=F),compare(v,m,e)&&(F=v,v=m,m=F),compare(v,u,e)&&(F=v,v=u,u=F),compare(S,m,e)&&(F=S,S=m,m=F);for(var O=e[2*v],R=e[2*v+1],_=e[2*S],k=e[2*S+1],P=2*p,l=2*u,q=2*m,w=2*i,C=2*c,E=2*a,I=0;I<2;++I){var N=e[P+I],U=e[l+I],b=e[q+I];e[w+I]=N,e[C+I]=U,e[E+I]=b}move(n,r,e),move(f,o,e);for(var h=s;h<=T;++h)if(comparePivot(h,O,R,e))h!==s&&swap(h,s,e),++s;else if(!comparePivot(h,_,k,e))for(;;){if(comparePivot(T,_,k,e)){comparePivot(T,O,R,e)?(rotate(h,s,T,e),++s,--T):(swap(h,T,e),--T);break}if(--T<h)break}shufflePivot(r,s-1,O,R,e),shufflePivot(o,T+1,_,k,e),s-2-r<=INSERT_SORT_CUTOFF?insertionSort(r,s-2,e):quickSort(r,s-2,e),o-(T+2)<=INSERT_SORT_CUTOFF?insertionSort(T+2,o,e):quickSort(T+2,o,e),T-s<=INSERT_SORT_CUTOFF?insertionSort(s,T,e):quickSort(s,T,e)}module.exports=wrapper;var INSERT_SORT_CUTOFF=32;

},{}],84:[function(_dereq_,module,exports){
"use strict";function sqInit(E){var _=bits.nextPow2(E);RED_SWEEP_QUEUE.length<_&&(pool.free(RED_SWEEP_QUEUE),RED_SWEEP_QUEUE=pool.mallocInt32(_)),RED_SWEEP_INDEX.length<_&&(pool.free(RED_SWEEP_INDEX),RED_SWEEP_INDEX=pool.mallocInt32(_)),BLUE_SWEEP_QUEUE.length<_&&(pool.free(BLUE_SWEEP_QUEUE),BLUE_SWEEP_QUEUE=pool.mallocInt32(_)),BLUE_SWEEP_INDEX.length<_&&(pool.free(BLUE_SWEEP_INDEX),BLUE_SWEEP_INDEX=pool.mallocInt32(_)),COMMON_SWEEP_QUEUE.length<_&&(pool.free(COMMON_SWEEP_QUEUE),COMMON_SWEEP_QUEUE=pool.mallocInt32(_)),COMMON_SWEEP_INDEX.length<_&&(pool.free(COMMON_SWEEP_INDEX),COMMON_SWEEP_INDEX=pool.mallocInt32(_));var S=8*_;SWEEP_EVENTS.length<S&&(pool.free(SWEEP_EVENTS),SWEEP_EVENTS=pool.mallocDouble(S))}function sqPop(E,_,S,r){var o=_[r],P=E[S-1];E[o]=P,_[P]=o}function sqPush(E,_,S,r){E[S]=r,_[r]=S}function sweepBipartite(E,_,S,r,o,P,U,W,e,a){for(var N=0,l=2*E,t=E-1,i=l-1,v=S;v<r;++v){var I=P[v],f=l*v;SWEEP_EVENTS[N++]=o[f+t],SWEEP_EVENTS[N++]=-(I+1),SWEEP_EVENTS[N++]=o[f+i],SWEEP_EVENTS[N++]=I}for(var v=U;v<W;++v){var I=a[v]+BLUE_FLAG,T=l*v;SWEEP_EVENTS[N++]=e[T+t],SWEEP_EVENTS[N++]=-I,SWEEP_EVENTS[N++]=e[T+i],SWEEP_EVENTS[N++]=I}var n=N>>>1;isort(SWEEP_EVENTS,n);for(var s=0,D=0,v=0;v<n;++v){var p=0|SWEEP_EVENTS[2*v+1];if(p>=BLUE_FLAG)p=p-BLUE_FLAG|0,sqPop(BLUE_SWEEP_QUEUE,BLUE_SWEEP_INDEX,D--,p);else if(p>=0)sqPop(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,s--,p);else if(p<=-BLUE_FLAG){p=-p-BLUE_FLAG|0;for(var L=0;L<s;++L){var V=_(RED_SWEEP_QUEUE[L],p);if(void 0!==V)return V}sqPush(BLUE_SWEEP_QUEUE,BLUE_SWEEP_INDEX,D++,p)}else{p=-p-1|0;for(var L=0;L<D;++L){var V=_(p,BLUE_SWEEP_QUEUE[L]);if(void 0!==V)return V}sqPush(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,s++,p)}}}function sweepComplete(E,_,S,r,o,P,U,W,e,a){for(var N=0,l=2*E,t=E-1,i=l-1,v=S;v<r;++v){var I=P[v]+1<<1,f=l*v;SWEEP_EVENTS[N++]=o[f+t],SWEEP_EVENTS[N++]=-I,SWEEP_EVENTS[N++]=o[f+i],SWEEP_EVENTS[N++]=I}for(var v=U;v<W;++v){var I=a[v]+1<<1,T=l*v;SWEEP_EVENTS[N++]=e[T+t],SWEEP_EVENTS[N++]=1|-I,SWEEP_EVENTS[N++]=e[T+i],SWEEP_EVENTS[N++]=1|I}var n=N>>>1;isort(SWEEP_EVENTS,n);for(var s=0,D=0,p=0,v=0;v<n;++v){var L=0|SWEEP_EVENTS[2*v+1],V=1&L;if(v<n-1&&L>>1==SWEEP_EVENTS[2*v+3]>>1&&(V=2,v+=1),L<0){for(var B=-(L>>1)-1,C=0;C<p;++C){var Q=_(COMMON_SWEEP_QUEUE[C],B);if(void 0!==Q)return Q}if(0!==V)for(var C=0;C<s;++C){var Q=_(RED_SWEEP_QUEUE[C],B);if(void 0!==Q)return Q}if(1!==V)for(var C=0;C<D;++C){var Q=_(BLUE_SWEEP_QUEUE[C],B);if(void 0!==Q)return Q}0===V?sqPush(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,s++,B):1===V?sqPush(BLUE_SWEEP_QUEUE,BLUE_SWEEP_INDEX,D++,B):2===V&&sqPush(COMMON_SWEEP_QUEUE,COMMON_SWEEP_INDEX,p++,B)}else{var B=(L>>1)-1;0===V?sqPop(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,s--,B):1===V?sqPop(BLUE_SWEEP_QUEUE,BLUE_SWEEP_INDEX,D--,B):2===V&&sqPop(COMMON_SWEEP_QUEUE,COMMON_SWEEP_INDEX,p--,B)}}}function scanBipartite(E,_,S,r,o,P,U,W,e,a,N,l){var t=0,i=2*E,v=_,I=_+E,f=1,T=1;r?T=BLUE_FLAG:f=BLUE_FLAG;for(var n=o;n<P;++n){var s=n+f,D=i*n;SWEEP_EVENTS[t++]=U[D+v],SWEEP_EVENTS[t++]=-s,SWEEP_EVENTS[t++]=U[D+I],SWEEP_EVENTS[t++]=s}for(var n=e;n<a;++n){var s=n+T,p=i*n;SWEEP_EVENTS[t++]=N[p+v],SWEEP_EVENTS[t++]=-s}var L=t>>>1;isort(SWEEP_EVENTS,L);for(var V=0,n=0;n<L;++n){var B=0|SWEEP_EVENTS[2*n+1];if(B<0){var s=-B,C=!1;if(s>=BLUE_FLAG?(C=!r,s-=BLUE_FLAG):(C=!!r,s-=1),C)sqPush(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,V++,s);else{var Q=l[s],c=i*s,u=N[c+_+1],A=N[c+_+1+E];E:for(var R=0;R<V;++R){var M=RED_SWEEP_QUEUE[R],O=i*M;if(!(A<U[O+_+1]||U[O+_+1+E]<u)){for(var X=_+2;X<E;++X)if(N[c+X+E]<U[O+X]||U[O+X+E]<N[c+X])continue E;var m,q=W[M];if(void 0!==(m=r?S(Q,q):S(q,Q)))return m}}}}else sqPop(RED_SWEEP_QUEUE,RED_SWEEP_INDEX,V--,B-f)}}function scanComplete(E,_,S,r,o,P,U,W,e,a,N){for(var l=0,t=2*E,i=_,v=_+E,I=r;I<o;++I){var f=I+BLUE_FLAG,T=t*I;SWEEP_EVENTS[l++]=P[T+i],SWEEP_EVENTS[l++]=-f,SWEEP_EVENTS[l++]=P[T+v],SWEEP_EVENTS[l++]=f}for(var I=W;I<e;++I){var f=I+1,n=t*I;SWEEP_EVENTS[l++]=a[n+i],SWEEP_EVENTS[l++]=-f}var s=l>>>1;isort(SWEEP_EVENTS,s);for(var D=0,I=0;I<s;++I){var p=0|SWEEP_EVENTS[2*I+1];if(p<0){var f=-p;if(f>=BLUE_FLAG)RED_SWEEP_QUEUE[D++]=f-BLUE_FLAG;else{f-=1;var L=N[f],V=t*f,B=a[V+_+1],C=a[V+_+1+E];E:for(var Q=0;Q<D;++Q){var c=RED_SWEEP_QUEUE[Q],u=U[c];if(u===L)break;var A=t*c;if(!(C<P[A+_+1]||P[A+_+1+E]<B)){for(var R=_+2;R<E;++R)if(a[V+R+E]<P[A+R]||P[A+R+E]<a[V+R])continue E;var M=S(u,L);if(void 0!==M)return M}}}}else{for(var f=p-BLUE_FLAG,Q=D-1;Q>=0;--Q)if(RED_SWEEP_QUEUE[Q]===f){for(var R=Q+1;R<D;++R)RED_SWEEP_QUEUE[R-1]=RED_SWEEP_QUEUE[R];break}--D}}}module.exports={init:sqInit,sweepBipartite:sweepBipartite,sweepComplete:sweepComplete,scanBipartite:scanBipartite,scanComplete:scanComplete};var pool=_dereq_("typedarray-pool"),bits=_dereq_("bit-twiddle"),isort=_dereq_("./sort"),BLUE_FLAG=1<<28,INIT_CAPACITY=1024,RED_SWEEP_QUEUE=pool.mallocInt32(INIT_CAPACITY),RED_SWEEP_INDEX=pool.mallocInt32(INIT_CAPACITY),BLUE_SWEEP_QUEUE=pool.mallocInt32(INIT_CAPACITY),BLUE_SWEEP_INDEX=pool.mallocInt32(INIT_CAPACITY),COMMON_SWEEP_QUEUE=pool.mallocInt32(INIT_CAPACITY),COMMON_SWEEP_INDEX=pool.mallocInt32(INIT_CAPACITY),SWEEP_EVENTS=pool.mallocDouble(8*INIT_CAPACITY);

},{"./sort":83,"bit-twiddle":75,"typedarray-pool":423}],85:[function(_dereq_,module,exports){
"use strict";

},{}],86:[function(_dereq_,module,exports){
(function (global){
"use strict";var buffer=_dereq_("buffer"),Buffer=buffer.Buffer,SlowBuffer=buffer.SlowBuffer,MAX_LEN=buffer.kMaxLength||2147483647;exports.alloc=function(r,e,f){if("function"==typeof Buffer.alloc)return Buffer.alloc(r,e,f);if("number"==typeof f)throw new TypeError("encoding must not be number");if("number"!=typeof r)throw new TypeError("size must be a number");if(r>MAX_LEN)throw new RangeError("size is too large");var n=f,o=e;void 0===o&&(n=void 0,o=0);var t=new Buffer(r);if("string"==typeof o)for(var u=new Buffer(o,n),i=u.length,a=-1;++a<r;)t[a]=u[a%i];else t.fill(o);return t},exports.allocUnsafe=function(r){if("function"==typeof Buffer.allocUnsafe)return Buffer.allocUnsafe(r);if("number"!=typeof r)throw new TypeError("size must be a number");if(r>MAX_LEN)throw new RangeError("size is too large");return new Buffer(r)},exports.from=function(r,e,f){if("function"==typeof Buffer.from&&(!global.Uint8Array||Uint8Array.from!==Buffer.from))return Buffer.from(r,e,f);if("number"==typeof r)throw new TypeError('"value" argument must not be a number');if("string"==typeof r)return new Buffer(r,e);if("undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer){var n=e;if(1===arguments.length)return new Buffer(r);void 0===n&&(n=0);var o=f;if(void 0===o&&(o=r.byteLength-n),n>=r.byteLength)throw new RangeError("'offset' is out of bounds");if(o>r.byteLength-n)throw new RangeError("'length' is out of bounds");return new Buffer(r.slice(n,n+o))}if(Buffer.isBuffer(r)){var t=new Buffer(r.length);return r.copy(t,0,0,r.length),t}if(r){if(Array.isArray(r)||"undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return new Buffer(r);if("Buffer"===r.type&&Array.isArray(r.data))return new Buffer(r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},exports.allocUnsafeSlow=function(r){if("function"==typeof Buffer.allocUnsafeSlow)return Buffer.allocUnsafeSlow(r);if("number"!=typeof r)throw new TypeError("size must be a number");if(r>=MAX_LEN)throw new RangeError("size is too large");return new SlowBuffer(r)};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"buffer":87}],87:[function(_dereq_,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var f=t.write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===s)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128==(192&s)&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=_dereq_("base64-js"),ieee754=_dereq_("ieee754"),isArray=_dereq_("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){checkInt(this,t,e,r,Math.pow(2,8*r)-1,0)}var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){checkInt(this,t,e,r,Math.pow(2,8*r)-1,0)}var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"base64-js":57,"ieee754":332,"isarray":88}],88:[function(_dereq_,module,exports){
"use strict";var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],89:[function(_dereq_,module,exports){
"use strict";function createPickRay(e,r,t,c,u){set(e,t[0],t[1],0),set(r,t[0],t[1],1),unproject(e,e,c,u),unproject(r,r,c,u),sub(r,r,e),normalize(r,r)}var unproject=_dereq_("camera-unproject"),set=_dereq_("gl-vec3/set"),sub=_dereq_("gl-vec3/subtract"),normalize=_dereq_("gl-vec3/normalize");module.exports=createPickRay;

},{"camera-unproject":91,"gl-vec3/normalize":279,"gl-vec3/set":286,"gl-vec3/subtract":289}],90:[function(_dereq_,module,exports){
"use strict";function cameraProject(t,r,m,e){var p=m[0],a=m[1],s=m[2],c=m[3],o=NEAR_RANGE,A=FAR_RANGE;set(tmp4,r[0],r[1],r[2],1),transformMat4(tmp4,tmp4,e);var R=tmp4[3];return 0!==R&&(tmp4[0]=tmp4[0]/R,tmp4[1]=tmp4[1]/R,tmp4[2]=tmp4[2]/R),t[0]=p+s/2*tmp4[0]+(0+s/2),t[1]=a+c/2*tmp4[1]+(0+c/2),t[2]=(A-o)/2*tmp4[2]+(A+o)/2,t[3]=0===R?0:1/R,t}var transformMat4=_dereq_("gl-vec4/transformMat4"),set=_dereq_("gl-vec4/set"),NEAR_RANGE=0,FAR_RANGE=1,tmp4=[0,0,0,0];module.exports=cameraProject;

},{"gl-vec4/set":313,"gl-vec4/transformMat4":317}],91:[function(_dereq_,module,exports){
"use strict";function unproject(r,t,e,o){var n=e[0],u=e[1],a=e[2],c=e[3],s=t[0],i=t[1],p=t[2];return s-=n,i=c-i-1,i-=u,r[0]=2*s/a-1,r[1]=2*i/c-1,r[2]=2*p-1,transform(r,r,o)}var transform=_dereq_("./lib/projectMat4");module.exports=unproject;

},{"./lib/projectMat4":92}],92:[function(_dereq_,module,exports){
"use strict";function project(r,t,e){var o=t[0],c=t[1],u=t[2],n=e[0],p=e[1],s=e[2],i=e[3],j=e[4],a=e[5],d=e[6],f=e[7],l=e[8],m=e[9],v=e[10],x=e[11],b=e[12],g=e[13],h=e[14],k=e[15],q=1/(o*i+c*f+u*x+k);return r[0]=(o*n+c*j+u*l+b)*q,r[1]=(o*p+c*a+u*m+g)*q,r[2]=(o*s+c*d+u*v+h)*q,r}module.exports=project;

},{}],93:[function(_dereq_,module,exports){
"use strict";function canonicalizeEdge(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function compareEdge(e,n){return e[0]-n[0]||e[1]-n[1]}function canonicalizeEdges(e){return e.map(canonicalizeEdge).sort(compareEdge)}function getDefault(e,n,r){return n in e?e[n]:r}function cdt2d(e,n,r){Array.isArray(n)?(r=r||{},n=n||[]):(r=n||{},n=[]);var i=!!getDefault(r,"delaunay",!0),a=!!getDefault(r,"interior",!0),t=!!getDefault(r,"exterior",!0),l=!!getDefault(r,"infinity",!1);if(!a&&!t||0===e.length)return[];var u=monotoneTriangulate(e,n);if(i||a!==t||l){for(var o=makeIndex(e.length,canonicalizeEdges(n)),g=0;g<u.length;++g){var c=u[g];o.addTriangle(c[0],c[1],c[2])}return i&&delaunayFlip(e,o),t?a?l?filterTriangulation(o,0,l):o.cells():filterTriangulation(o,1,l):filterTriangulation(o,-1)}return u}var monotoneTriangulate=_dereq_("./lib/monotone"),makeIndex=_dereq_("./lib/triangulation"),delaunayFlip=_dereq_("./lib/delaunay"),filterTriangulation=_dereq_("./lib/filter");module.exports=cdt2d;

},{"./lib/delaunay":94,"./lib/filter":95,"./lib/monotone":96,"./lib/triangulation":97}],94:[function(_dereq_,module,exports){
"use strict";function testFlip(e,r,i,t,n,s){var a=r.opposite(t,n);if(!(a<0)){if(n<t){var l=t;t=n,n=l,l=s,s=a,a=l}r.isConstraint(t,n)||inCircle(e[t],e[n],e[s],e[a])<0&&i.push(t,n)}}function delaunayRefine(e,r){for(var i=[],t=e.length,n=r.stars,s=0;s<t;++s)for(var a=n[s],l=1;l<a.length;l+=2){var o=a[l];if(!(o<s)&&!r.isConstraint(s,o)){for(var p=a[l-1],f=-1,u=1;u<a.length;u+=2)if(a[u-1]===o){f=a[u];break}f<0||inCircle(e[s],e[o],e[p],e[f])<0&&i.push(s,o)}}for(;i.length>0;){for(var o=i.pop(),s=i.pop(),p=-1,f=-1,a=n[s],h=1;h<a.length;h+=2){var c=a[h-1],v=a[h];c===o?f=v:v===o&&(p=c)}p<0||f<0||(inCircle(e[s],e[o],e[p],e[f])>=0||(r.flip(s,o),testFlip(e,r,i,p,s,f),testFlip(e,r,i,s,f,p),testFlip(e,r,i,f,o,p),testFlip(e,r,i,o,p,f)))}}var inCircle=_dereq_("robust-in-sphere")[4],bsearch=_dereq_("binary-search-bounds");module.exports=delaunayRefine;

},{"binary-search-bounds":98,"robust-in-sphere":398}],95:[function(_dereq_,module,exports){
"use strict";function FaceIndex(r,e,n,t,a,l,s){this.cells=r,this.neighbor=e,this.flags=t,this.constraint=n,this.active=a,this.next=l,this.boundary=s}function compareCell(r,e){return r[0]-e[0]||r[1]-e[1]||r[2]-e[2]}function indexCells(r,e){for(var n=r.cells(),t=n.length,a=0;a<t;++a){var l=n[a],s=l[0],o=l[1],c=l[2];o<c?o<s&&(l[0]=o,l[1]=c,l[2]=s):c<s&&(l[0]=c,l[1]=s,l[2]=o)}n.sort(compareCell);for(var i=new Array(t),a=0;a<i.length;++a)i[a]=0;var u=[],h=[],f=new Array(3*t),v=new Array(3*t),p=null;e&&(p=[]);for(var g=new FaceIndex(n,f,v,i,u,h,p),a=0;a<t;++a)for(var l=n[a],d=0;d<3;++d){var s=l[d],o=l[(d+1)%3],y=f[3*a+d]=g.locate(o,s,r.opposite(o,s)),b=v[3*a+d]=r.isConstraint(s,o);y<0&&(b?h.push(a):(u.push(a),i[a]=1),e&&p.push([o,s,-1]))}return g}function filterCells(r,e,n){for(var t=0,a=0;a<r.length;++a)e[a]===n&&(r[t++]=r[a]);return r.length=t,r}function classifyFaces(r,e,n){var t=indexCells(r,n);if(0===e)return n?t.cells.concat(t.boundary):t.cells;for(var a=1,l=t.active,s=t.next,o=t.flags,c=t.cells,i=t.constraint,u=t.neighbor;l.length>0||s.length>0;){for(;l.length>0;){var h=l.pop();if(o[h]!==-a){o[h]=a;for(var f=(c[h],0);f<3;++f){var v=u[3*h+f];v>=0&&0===o[v]&&(i[3*h+f]?s.push(v):(l.push(v),o[v]=a))}}}var p=s;s=l,l=p,s.length=0,a=-a}var g=filterCells(c,o,e);return n?g.concat(t.boundary):g}var bsearch=_dereq_("binary-search-bounds");module.exports=classifyFaces;var proto=FaceIndex.prototype;proto.locate=function(){var r=[0,0,0];return function(e,n,t){var a=e,l=n,s=t;return n<t?n<e&&(a=n,l=t,s=e):t<e&&(a=t,l=e,s=n),a<0?-1:(r[0]=a,r[1]=l,r[2]=s,bsearch.eq(this.cells,r,compareCell))}}();

},{"binary-search-bounds":98}],96:[function(_dereq_,module,exports){
"use strict";function PartialHull(t,e,n,r,a){this.a=t,this.b=e,this.idx=n,this.lowerIds=r,this.upperIds=a}function Event(t,e,n,r){this.a=t,this.b=e,this.type=n,this.idx=r}function compareEvent(t,e){var n=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return n||(t.type!==EVENT_POINT&&(n=orient(t.a,t.b,e.b))?n:t.idx-e.idx)}function testPoint(t,e){return orient(t.a,t.b,e)}function addPoint(t,e,n,r,a){for(var i=bsearch.lt(e,r,testPoint),s=bsearch.gt(e,r,testPoint),o=i;o<s;++o){for(var u=e[o],l=u.lowerIds,p=l.length;p>1&&orient(n[l[p-2]],n[l[p-1]],r)>0;)t.push([l[p-1],l[p-2],a]),p-=1;l.length=p,l.push(a);for(var E=u.upperIds,p=E.length;p>1&&orient(n[E[p-2]],n[E[p-1]],r)<0;)t.push([E[p-2],E[p-1],a]),p-=1;E.length=p,E.push(a)}}function findSplit(t,e){var n;return(n=t.a[0]<e.a[0]?orient(t.a,t.b,e.a):orient(e.b,e.a,t.a))?n:(n=e.b[0]<t.b[0]?orient(t.a,t.b,e.b):orient(e.b,e.a,t.b))||t.idx-e.idx}function splitHulls(t,e,n){var r=bsearch.le(t,n,findSplit),a=t[r],i=a.upperIds,s=i[i.length-1];a.upperIds=[s],t.splice(r+1,0,new PartialHull(n.a,n.b,n.idx,[s],i))}function mergeHulls(t,e,n){var r=n.a;n.a=n.b,n.b=r;var a=bsearch.eq(t,n,findSplit),i=t[a];t[a-1].upperIds=i.upperIds,t.splice(a,1)}function monotoneTriangulate(t,e){for(var n=t.length,r=e.length,a=[],i=0;i<n;++i)a.push(new Event(t[i],null,EVENT_POINT,i));for(var i=0;i<r;++i){var s=e[i],o=t[s[0]],u=t[s[1]];o[0]<u[0]?a.push(new Event(o,u,EVENT_START,i),new Event(u,o,EVENT_END,i)):o[0]>u[0]&&a.push(new Event(u,o,EVENT_START,i),new Event(o,u,EVENT_END,i))}a.sort(compareEvent);for(var l=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),p=[new PartialHull([l,1],[l,0],-1,[],[],[],[])],E=[],i=0,h=a.length;i<h;++i){var b=a[i],d=b.type;d===EVENT_POINT?addPoint(E,p,t,b.a,b.idx):d===EVENT_START?splitHulls(p,t,b):mergeHulls(p,t,b)}return E}var bsearch=_dereq_("binary-search-bounds"),orient=_dereq_("robust-orientation")[3],EVENT_POINT=0,EVENT_END=1,EVENT_START=2;module.exports=monotoneTriangulate;

},{"binary-search-bounds":98,"robust-orientation":399}],97:[function(_dereq_,module,exports){
"use strict";function Triangulation(r,t){this.stars=r,this.edges=t}function removePair(r,t,n){for(var e=1,i=r.length;e<i;e+=2)if(r[e-1]===t&&r[e]===n)return r[e-1]=r[i-2],r[e]=r[i-1],void(r.length=i-2)}function createTriangulation(r,t){for(var n=new Array(r),e=0;e<r;++e)n[e]=[];return new Triangulation(n,t)}var bsearch=_dereq_("binary-search-bounds");module.exports=createTriangulation;var proto=Triangulation.prototype;proto.isConstraint=function(){function r(r,t){return r[0]-t[0]||r[1]-t[1]}var t=[0,0];return function(n,e){return t[0]=Math.min(n,e),t[1]=Math.max(n,e),bsearch.eq(this.edges,t,r)>=0}}(),proto.removeTriangle=function(r,t,n){var e=this.stars;removePair(e[r],t,n),removePair(e[t],n,r),removePair(e[n],r,t)},proto.addTriangle=function(r,t,n){var e=this.stars;e[r].push(t,n),e[t].push(n,r),e[n].push(r,t)},proto.opposite=function(r,t){for(var n=this.stars[t],e=1,i=n.length;e<i;e+=2)if(n[e]===r)return n[e-1];return-1},proto.flip=function(r,t){var n=this.opposite(r,t),e=this.opposite(t,r);this.removeTriangle(r,t,n),this.removeTriangle(t,r,e),this.addTriangle(r,e,n),this.addTriangle(t,n,e)},proto.edges=function(){for(var r=this.stars,t=[],n=0,e=r.length;n<e;++n)for(var i=r[n],o=0,a=i.length;o<a;o+=2)t.push([i[o],i[o+1]]);return t},proto.cells=function(){for(var r=this.stars,t=[],n=0,e=r.length;n<e;++n)for(var i=r[n],o=0,a=i.length;o<a;o+=2){var s=i[o],u=i[o+1];n<Math.min(s,u)&&t.push([n,s,u])}return t};

},{"binary-search-bounds":98}],98:[function(_dereq_,module,exports){
"use strict";function compileSearch(e,c,i,r,n){var h=["function ",e,"(a,l,h,",r.join(","),"){",n?"":"var i=",i?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return n?c.indexOf("c")<0?h.push(";if(x===y){return m}else if(x<=y){"):h.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):h.push(";if(",c,"){i=m;"),i?h.push("l=m+1}else{h=m-1}"):h.push("h=m-1}else{l=m+1}"),h.push("}"),n?h.push("return -1};"):h.push("return i};"),h.join("")}function compileBoundsSearch(e,c,i,r){return new Function([compileSearch("A","x"+e+"y",c,["y"],r),compileSearch("P","c(x,y)"+e+"0",c,["y","c"],r),"function dispatchBsearch",i,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",i].join(""))()}module.exports={ge:compileBoundsSearch(">=",!1,"GE"),gt:compileBoundsSearch(">",!1,"GT"),lt:compileBoundsSearch("<",!0,"LT"),le:compileBoundsSearch("<=",!0,"LE"),eq:compileBoundsSearch("-",!0,"EQ",!0)};

},{}],99:[function(_dereq_,module,exports){
"use strict";function clamp(t,c,e){return c<e?t<c?c:t>e?e:t:t<e?e:t>c?c:t}module.exports=clamp;

},{}],100:[function(_dereq_,module,exports){
"use strict";function boundRat(r){var t=ratToFloat(r);return[nextafter(t,-1/0),nextafter(t,1/0)]}function boundEdges(r,t){for(var e=new Array(t.length),n=0;n<t.length;++n){var a=t[n],o=r[a[0]],u=r[a[1]];e[n]=[nextafter(Math.min(o[0],u[0]),-1/0),nextafter(Math.min(o[1],u[1]),-1/0),nextafter(Math.max(o[0],u[0]),1/0),nextafter(Math.max(o[1],u[1]),1/0)]}return e}function boundPoints(r){for(var t=new Array(r.length),e=0;e<r.length;++e){var n=r[e];t[e]=[nextafter(n[0],-1/0),nextafter(n[1],-1/0),nextafter(n[0],1/0),nextafter(n[1],1/0)]}return t}function getCrossings(r,t,e){var n=[];return boxIntersect(e,function(e,a){var o=t[e],u=t[a];if(o[0]!==u[0]&&o[0]!==u[1]&&o[1]!==u[0]&&o[1]!==u[1]){var i=r[o[0]],f=r[o[1]],s=r[u[0]],v=r[u[1]];segseg(i,f,s,v)&&n.push([e,a])}}),n}function getTJunctions(r,t,e,n){var a=[];return boxIntersect(e,n,function(e,n){var o=t[e];if(o[0]!==n&&o[1]!==n){var u=r[n],i=r[o[0]],f=r[o[1]];segseg(i,f,u,u)&&a.push([e,n])}}),a}function cutEdges(r,t,e,n,a){var o,u,i=r.map(function(r){return[rat(r[0]),rat(r[1])]});for(o=0;o<e.length;++o){var f=e[o];u=f[0];var s=f[1],v=t[u],g=t[s],c=solveIntersection(ratVec(r[v[0]]),ratVec(r[v[1]]),ratVec(r[g[0]]),ratVec(r[g[1]]));if(c){var h=r.length;r.push([ratToFloat(c[0]),ratToFloat(c[1])]),i.push(c),n.push([u,h],[s,h])}}for(n.sort(function(r,t){if(r[0]!==t[0])return r[0]-t[0];var e=i[r[1]],n=i[t[1]];return ratCmp(e[0],n[0])||ratCmp(e[1],n[1])}),o=n.length-1;o>=0;--o){var d=n[o];u=d[0];var l=t[u],p=l[0],x=l[1],m=r[p],b=r[x];if((m[0]-b[0]||m[1]-b[1])<0){var M=p;p=x,x=M}l[0]=p;var q,P=l[1]=d[1];for(a&&(q=l[2]);o>0&&n[o-1][0]===u;){var d=n[--o],E=d[1];a?t.push([P,E,q]):t.push([P,E]),P=E}a?t.push([P,x,q]):t.push([P,x])}return i}function dedupPoints(r,t,e){for(var n=t.length,a=new UnionFind(n),o=[],u=0;u<t.length;++u){var i=t[u],f=boundRat(i[0]),s=boundRat(i[1]);o.push([nextafter(f[0],-1/0),nextafter(s[0],-1/0),nextafter(f[1],1/0),nextafter(s[1],1/0)])}boxIntersect(o,function(r,t){a.link(r,t)});for(var v=!0,g=new Array(n),u=0;u<n;++u){var c=a.find(u);c!==u&&(v=!1,r[c]=[Math.min(r[u][0],r[c][0]),Math.min(r[u][1],r[c][1])])}if(v)return null;for(var h=0,u=0;u<n;++u){var c=a.find(u);c===u?(g[u]=h,r[h++]=r[u]):g[u]=-1}r.length=h;for(var u=0;u<n;++u)g[u]<0&&(g[u]=g[a.find(u)]);return g}function compareLex2(r,t){return r[0]-t[0]||r[1]-t[1]}function compareLex3(r,t){var e=r[0]-t[0]||r[1]-t[1];return e||(r[2]<t[2]?-1:r[2]>t[2]?1:0)}function dedupEdges(r,t,e){if(0!==r.length){if(t)for(var n=0;n<r.length;++n){var a=r[n],o=t[a[0]],u=t[a[1]];a[0]=Math.min(o,u),a[1]=Math.max(o,u)}else for(var n=0;n<r.length;++n){var a=r[n],o=a[0],u=a[1];a[0]=Math.min(o,u),a[1]=Math.max(o,u)}e?r.sort(compareLex3):r.sort(compareLex2);for(var i=1,n=1;n<r.length;++n){var f=r[n-1],s=r[n];(s[0]!==f[0]||s[1]!==f[1]||e&&s[2]!==f[2])&&(r[i++]=s)}r.length=i}}function preRound(r,t,e){var n=dedupPoints(r,[],boundPoints(r));return dedupEdges(t,n,e),!!n}function snapRound(r,t,e){var n=boundEdges(r,t),a=getCrossings(r,t,n),o=boundPoints(r),u=getTJunctions(r,t,n,o),i=cutEdges(r,t,a,u,e),f=dedupPoints(r,i,o);return dedupEdges(t,f,e),!!f||(a.length>0||u.length>0)}function cleanPSLG(r,t,e){var n;if(e){n=t;for(var a=new Array(t.length),o=0;o<t.length;++o){var u=t[o];a[o]=[u[0],u[1],e[o]]}t=a}for(var i=preRound(r,t,!!e);snapRound(r,t,!!e);)i=!0;if(e&&i){n.length=0,e.length=0;for(var o=0;o<t.length;++o){var u=t[o];n.push([u[0],u[1]]),e.push(u[2])}}return i}module.exports=cleanPSLG;var UnionFind=_dereq_("union-find"),boxIntersect=_dereq_("box-intersect"),segseg=_dereq_("robust-segment-intersect"),rat=_dereq_("big-rat"),ratCmp=_dereq_("big-rat/cmp"),ratToFloat=_dereq_("big-rat/to-float"),ratVec=_dereq_("rat-vec"),nextafter=_dereq_("nextafter"),solveIntersection=_dereq_("./lib/rat-seg-intersect");

},{"./lib/rat-seg-intersect":101,"big-rat":61,"big-rat/cmp":59,"big-rat/to-float":73,"box-intersect":78,"nextafter":352,"rat-vec":379,"robust-segment-intersect":402,"union-find":425}],101:[function(_dereq_,module,exports){
"use strict";function ratPerp(r,e){return ratSub(ratMul(r[0],e[1]),ratMul(r[1],e[0]))}function solveIntersection(r,e,t,u){var a=rvSub(e,r),i=rvSub(u,t),v=ratPerp(a,i);if(0===ratSign(v))return null;var n=rvSub(r,t),s=ratPerp(i,n),b=ratDiv(s,v),l=rvMuls(a,b);return rvAdd(r,l)}module.exports=solveIntersection;var ratMul=_dereq_("big-rat/mul"),ratDiv=_dereq_("big-rat/div"),ratSub=_dereq_("big-rat/sub"),ratSign=_dereq_("big-rat/sign"),rvSub=_dereq_("rat-vec/sub"),rvAdd=_dereq_("rat-vec/add"),rvMuls=_dereq_("rat-vec/muls");

},{"big-rat/div":60,"big-rat/mul":70,"big-rat/sign":71,"big-rat/sub":72,"rat-vec/add":378,"rat-vec/muls":380,"rat-vec/sub":381}],102:[function(_dereq_,module,exports){
"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};

},{}],103:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),cmy=module.exports={name:"cmy",min:[0,0,0],max:[100,100,100],channel:["cyan","magenta","yellow"],alias:["CMY"]};cmy.rgb=function(r){return[255*(1-r[0]/100),255*(1-r[1]/100),255*(1-r[2]/100)]},rgb.cmy=function(r){var n=r[0]/255,e=r[1]/255,a=r[2]/255;return[100*(1-n)||0,100*(1-e)||0,100*(1-a)||0]};

},{"./rgb":123}],104:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb");module.exports={name:"cmyk",min:[0,0,0,0],max:[100,100,100,100],channel:["cyan","magenta","yellow","black"],alias:["CMYK"],rgb:function(a){var n,r,t,e=a[0]/100,m=a[1]/100,i=a[2]/100,c=a[3]/100;return n=1-Math.min(1,e*(1-c)+c),r=1-Math.min(1,m*(1-c)+c),t=1-Math.min(1,i*(1-c)+c),[255*n,255*r,255*t]}},rgb.cmyk=function(a){var n,r,t,e,m=a[0]/255,i=a[1]/255,c=a[2]/255;return e=Math.min(1-m,1-i,1-c),n=(1-m-e)/(1-e)||0,r=(1-i-e)/(1-e)||0,t=(1-c-e)/(1-e)||0,[100*n,100*r,100*t,100*e]};

},{"./rgb":123}],105:[function(_dereq_,module,exports){
"use strict";var xyy=_dereq_("./xyy"),xyz=_dereq_("./xyz"),coloroid={name:"coloroid",alias:["ATV"],channel:["A","T","V"],min:[10,0,0],max:[76,100,100]};coloroid.table=[[10,59,1.724349,.44987,.53641],[11,55.3,1.740844,.46248,.52444],[12,51.7,1.754985,.47451,.51298],[13,48.2,1.767087,.48601,.50325],[14,44.8,1.775953,.49578,.49052],[15,41.5,1.785073,.5079,.43035],[16,38.2,1.791104,.51874,.46934],[20,34.9,1.794831,.5298,.45783],[21,31.5,1.798664,.54137,.44559],[22,28,1.794819,.55367,.43253],[23,24.4,1.78961,.5668,.41811],[24,20.6,1.809483,.58128,.40176],[25,16.6,1.760983,.59766,.383],[26,12.3,1.723443,.61653,.36061],[30,7.7,1.652891,.63896,.33358],[31,2.8,1.502607,.66619,.2993],[32,-2.5,1.0725,.70061,.26753],[33,-8.4,1.136637,.63925,.22631],[34,-19.8,1.232286,.53962,.19721],[35,-31.6,1.31012,.5034,.17495],[40,-43.2,1.37661,.46041,.15603],[41,-54.6,1.438692,.42386,.13846],[42,-65.8,1.501582,.38991,.12083],[43,-76.8,1.570447,.35586,.10328],[44,-86.8,1.645583,.32195,.08496],[45,-95.8,1.732083,.28657,.05155],[46,-108.4,1.915753,.22202,.01771],[50,-117.2,2.14631,.15664,.05227],[51,-124.7,1.649939,.12736,.0902],[52,-131.8,1.273415,.10813,.12506],[53,-138.5,1.080809,.09414,.15741],[54,-145.1,.957076,.03249,.18958],[55,-152,.868976,.07206,.24109],[56,-163.4,.771731,.05787,.30378],[60,-177.2,.697108,.04353,.35696],[61,171.6,.655803,.03291,.41971],[62,152.4,.623958,.0224,.49954],[63,148.4,.596037,.01196,.60321],[64,136.8,.607413,.00425,.73542],[65,125.4,.659923,.01099,.83391],[66,114.2,.859517,.0805,.77474],[70,103.2,1.195683,.20259,.7046],[71,93.2,1.407534,.28807,.6523],[72,84.2,1.532829,.34422,.6193],[73,77.3,1.603792,.37838,.59533],[74,71.6,1.649448,.4029,.57716],[75,66.9,1.68108,.42141,.56222],[76,62.8,1.704979,.43647,.54895]];var table=coloroid.table,angleTable=[].concat(table.slice(-13),table.slice(0,-13)),i="D65",o=2,Xn=xyz.whitepoint[o][i][0],Yn=xyz.whitepoint[o][i][1],Zn=xyz.whitepoint[o][i][2],y0=Xn/(Xn+Yn+Zn),x0=Yn/(Xn+Yn+Zn),ew=(Xn+Yn+Zn)/100;xyy.coloroid=function(e){for(var o,a=e[0],n=e[1],l=e[2],t=10*Math.sqrt(l),r=180*Math.atan2(n-y0,a-x0)/Math.PI,i=angleTable.length-1,y=0;y<angleTable.length&&!(r>angleTable[y][1]);y++)i=y;o=Math.abs(angleTable[y+1][1]-r)>Math.abs(angleTable[i][1]-r)?angleTable[y+1]:angleTable[i];var x=o[0],c=o[4],b=o[2],w=o[3];return[x,100*l*(x0*ew-a*ew)/(100*(a*b-w*b)+c*b*100*(x0*ew-a*ew)),t]},coloroid.xyy=function(e){for(var o,a=e[0],n=e[1],l=e[2],t=0;t<table.length;t++)if(a<=table[t][0]){o=table[t];break}var r=o[4],i=o[2],y=o[3],x=l*l/100,c=r*i*100;return[(100*x*x0*ew+100*y*i*n-c*n*x0*ew)/(100*n*i-c*n*ew+100*x*ew),(100*x+100*n*r*i-c*n)/(x*ew*100+100*n*i-n*c*ew),x]},xyz.coloroid=function(e){return xyy.coloroid(xyz.xyy(e))},coloroid.xyz=function(e){return xyy.xyz(coloroid.xyy(e))},module.exports=coloroid;

},{"./xyy":128,"./xyz":129}],106:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),clamp=_dereq_("mumath/clamp"),cubehelix=module.exports={name:"cubehelix",channel:["fraction"],min:[0],max:[1]},defaults=cubehelix.defaults={start:0,rotation:.5,hue:1,gamma:1};cubehelix.rgb=function(a,t){t=t||{},a.length&&(a=a[0]);var e=void 0!==t.start?t.start:defaults.start,r=void 0!==t.rotation?t.rotation:defaults.rotation,u=void 0!==t.gamma?t.gamma:defaults.gamma,i=void 0!==t.hue?t.hue:defaults.hue,o=2*Math.PI*(e/3+1+r*a);a=Math.pow(a,u);var h=i*a*(1-a)/2,l=a+h*(-.14861*Math.cos(o)+1.78277*Math.sin(o)),m=a+h*(-.29227*Math.cos(o)-.90649*Math.sin(o)),c=a+h*(1.97294*Math.cos(o));return l=clamp(l,0,1),m=clamp(m,0,1),c=clamp(c,0,1),[255*l,255*m,255*c]},rgb.cubehelix=function(a){};

},{"./rgb":123,"mumath/clamp":348}],107:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),hsl=_dereq_("./hsl"),hsv=_dereq_("./hsv"),hwb=_dereq_("./hwb"),mod=_dereq_("mumath/mod");module.exports={name:"hcg",min:[0,0,0],max:[360,100,100],channel:["hue","chroma","gray"],alias:["HCG","HSG"],rgb:function(r){var e=r[0]/360,a=r[1]/100,n=r[2]/100;if(0===a)return[255*n,255*n,255*n];var t=6*mod(e,1),h=mod(t,1),u=[0,0,0],i=1-h;switch(Math.floor(t)){case 0:u[0]=1,u[1]=h,u[2]=0;break;case 1:u[0]=i,u[1]=1,u[2]=0;break;case 2:u[0]=0,u[1]=1,u[2]=h;break;case 3:u[0]=0,u[1]=i,u[2]=1;break;case 4:u[0]=h,u[1]=0,u[2]=1;break;default:u[0]=1,u[1]=0,u[2]=i}var c=(1-a)*n;return[255*(a*u[0]+c),255*(a*u[1]+c),255*(a*u[2]+c)]},hsl:function(r){var e=r[1]/100,a=r[2]/100,n=a*(1-e)+.5*e,t=0;return n<1&&n>0&&(t=n<.5?e/(2*n):e/(2*(1-n))),[r[0],100*t,100*n]},hsv:function(r){var e,a=r[1]/100,n=r[2]/100,t=a+n*(1-a);if(t>0){var h=a/t;e=[r[0],100*h,100*t]}else e=[r[0],0,100*t];return e},hwb:function(r){var e=r[1]/100,a=r[2]/100,n=e+a*(1-e);return[r[0],100*(n-e),100*(1-n)]}},rgb.hcg=function(r){var e,a,n=r[0]/255,t=r[1]/255,h=r[2]/255,u=Math.max(Math.max(n,t),h),i=Math.min(Math.min(n,t),h),c=u-i;return e=c<1?i/(1-c):0,c>0?(a=u===n?mod((t-h)/c,6):u===t?2+(h-n)/c:4+(n-t)/c,a/=6,a=mod(a,1)):a=0,[360*a,100*c,100*e]},hsl.hcg=function(r){var e=r[1]/100,a=r[2]/100,n=0;n=a<.5?2*e*a:2*e*(1-a);var t;if(n<1){var h=(a-.5*n)/(1-n);t=[r[0],100*n,100*h]}else t=[r[0],100*n,0];return t},hsv.hcg=function(r){var e,a=r[1]/100,n=r[2]/100,t=a*n;if(t<1){var h=(n-t)/(1-t);e=[r[0],100*t,100*h]}else e=[r[0],100*t,0];return e},hwb.hcg=function(r){var e=r[1]/100,a=r[2]/100,n=1-a,t=n-e,h=0;return t<1&&(h=(n-t)/(1-t)),[r[0],100*t,100*h]};

},{"./hsl":109,"./hsv":110,"./hwb":113,"./rgb":123,"mumath/mod":349}],108:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),loop=_dereq_("mumath/mod"),clamp=_dereq_("mumath/clamp"),hsi=module.exports={name:"hsi",min:[0,0,0],max:[360,100,255],channel:["hue","saturation","intensity"],alias:["HSI"]};hsi.rgb=function(a){var t,h,s,o=loop(a[0],0,360)*Math.PI/180,r=clamp(a[1],0,100)/100,c=clamp(a[2],0,255)/255,M=Math.PI/3;return o<2*M?(s=c*(1-r),t=c*(1+r*Math.cos(o)/Math.cos(M-o)),h=c*(1+r*(1-Math.cos(o)/Math.cos(M-o)))):o<4*M?(o-=2*M,t=c*(1-r),h=c*(1+r*Math.cos(o)/Math.cos(M-o)),s=c*(1+r*(1-Math.cos(o)/Math.cos(M-o)))):(o-=4*M,h=c*(1-r),s=c*(1+r*Math.cos(o)/Math.cos(M-o)),t=c*(1+r*(1-Math.cos(o)/Math.cos(M-o)))),[255*t,255*h,255*s]},rgb.hsi=function(a){var t=a[0]+a[1]+a[2],h=a[0]/t,s=a[1]/t,o=a[2]/t,r=Math.acos(.5*(h-s+(h-o))/Math.sqrt((h-s)*(h-s)+(h-o)*(s-o)));o>s&&(r=2*Math.PI-r);var c=1-3*Math.min(h,s,o),M=t/3;return[180*r/Math.PI,100*c,M]};

},{"./rgb":123,"mumath/clamp":348,"mumath/mod":349}],109:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb");module.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var a,n,t,e,i,u=r[0]/360,s=r[1]/100,h=r[2]/100;if(0===s)return i=255*h,[i,i,i];n=h<.5?h*(1+s):h+s-h*s,a=2*h-n,e=[0,0,0];for(var m=0;m<3;m++)t=u+1/3*-(m-1),t<0?t++:t>1&&t--,i=6*t<1?a+6*(n-a)*t:2*t<1?n:3*t<2?a+(n-a)*(2/3-t)*6:a,e[m]=255*i;return e}},rgb.hsl=function(r){var a,n,t,e=r[0]/255,i=r[1]/255,u=r[2]/255,s=Math.min(e,i,u),h=Math.max(e,i,u),m=h-s;return h===s?a=0:e===h?a=(i-u)/m:i===h?a=2+(u-e)/m:u===h&&(a=4+(e-i)/m),a=Math.min(60*a,360),a<0&&(a+=360),t=(s+h)/2,n=h===s?0:t<=.5?m/(h+s):m/(2-h-s),[a,100*n,100*t]};

},{"./rgb":123}],110:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),hsl=_dereq_("./hsl");module.exports={name:"hsv",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","value"],alias:["HSV","HSB"],rgb:function(r){var e=r[0]/60,a=r[1]/100,n=r[2]/100,t=Math.floor(e)%6,u=e-Math.floor(e),s=255*n*(1-a),h=255*n*(1-a*u),c=255*n*(1-a*(1-u));switch(n*=255,t){case 0:return[n,c,s];case 1:return[h,n,s];case 2:return[s,n,c];case 3:return[s,h,n];case 4:return[c,s,n];case 5:return[n,s,h]}},hsl:function(r){var e,a,n=r[0],t=r[1]/100,u=r[2]/100;return a=(2-t)*u,e=t*u,e/=a<=1?a:2-a,e=e||0,a/=2,[n,100*e,100*a]}},rgb.hsv=function(r){var e,a,n,t=r[0],u=r[1],s=r[2],h=Math.min(t,u,s),c=Math.max(t,u,s),i=c-h;return a=0===c?0:i/c*100,c===h?e=0:t===c?e=(u-s)/i:u===c?e=2+(s-t)/i:s===c&&(e=4+(t-u)/i),e=Math.min(60*e,360),e<0&&(e+=360),n=c/255*1e3/10,[e,a,n]},hsl.hsv=function(r){var e,a,n=r[0],t=r[1]/100,u=r[2]/100;return u*=2,t*=u<=1?u:2-u,a=(u+t)/2,e=2*t/(u+t)||0,[n,100*e,100*a]};

},{"./hsl":109,"./rgb":123}],111:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),lchuv=_dereq_("./lchuv"),_husl=_dereq_("husl");module.exports={name:"husl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSL"],lchuv:_husl._conv.husl.lch,xyz:function(u){return lchuv.xyz(_husl._conv.husl.lch(u))},huslp:function(u){return _husl._conv.lch.huslp(_husl._conv.husl.lch(u))}},lchuv.husl=_husl._conv.lch.husl,xyz.husl=function(u){return _husl._conv.lch.husl(xyz.lchuv(u))};

},{"./lchuv":119,"./xyz":129,"husl":331}],112:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),lchuv=_dereq_("./lchuv"),_husl=_dereq_("husl");module.exports={name:"huslp",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSLp"],lchuv:_husl._conv.huslp.lch,xyz:function(u){return lchuv.xyz(_husl._conv.huslp.lch(u))},husl:function(u){return _husl._conv.lch.husl(_husl._conv.huslp.lch(u))}},lchuv.huslp=_husl._conv.lch.huslp,xyz.huslp=function(u){return _husl._conv.lch.huslp(xyz.lchuv(u))};

},{"./lchuv":119,"./xyz":129,"husl":331}],113:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),hsv=_dereq_("./hsv"),hsl=_dereq_("./hsl"),hwb=module.exports={name:"hwb",min:[0,0,0],max:[360,100,100],channel:["hue","whiteness","blackness"],alias:["HWB"],rgb:function(r){var e,a,h,s,n,t,u,b=r[0]/360,c=r[1]/100,i=r[2]/100,l=c+i;switch(l>1&&(c/=l,i/=l),e=Math.floor(6*b),a=1-i,h=6*b-e,0!=(1&e)&&(h=1-h),s=c+h*(a-c),e){default:case 6:case 0:n=a,t=s,u=c;break;case 1:n=s,t=a,u=c;break;case 2:n=c,t=a,u=s;break;case 3:n=c,t=s,u=a;break;case 4:n=s,t=c,u=a;break;case 5:n=a,t=c,u=s}return[255*n,255*t,255*u]},hsv:function(r){var e,a,h=r[0],s=r[1],n=r[2];return s+n>=100?(e=0,a=100*s/(s+n)):(e=100-s/(1-n/100),a=100-n),[h,e,a]},hsl:function(r){return hsv.hsl(hwb.hsv(r))}};rgb.hwb=function(r){var e=r[0],a=r[1],h=r[2],s=rgb.hsl(r)[0],n=1/255*Math.min(e,Math.min(a,h));return h=1-1/255*Math.max(e,Math.max(a,h)),[s,100*n,100*h]},hsv.hwb=function(r){var e=r[0],a=r[1],h=r[2];return[e,0===h?0:h*(1-a/100),100-h]},hsl.hwb=function(r){return hsv.hwb(hsl.hsv(r))};

},{"./hsl":109,"./hsv":110,"./rgb":123}],114:[function(_dereq_,module,exports){
"use strict";function getConvertor(e,r){var c=spaces[e];return e===r?function(e){return e}:c.xyz&&spaces.xyz[r]?function(e){return spaces.xyz[r](c.xyz(e))}:c.rgb&&spaces.rgb[r]?function(e){return spaces.rgb[r](c.rgb(e))}:void 0}var spaces={rgb:_dereq_("./rgb"),hsl:_dereq_("./hsl"),hsv:_dereq_("./hsv"),hsi:_dereq_("./hsi"),hwb:_dereq_("./hwb"),cmyk:_dereq_("./cmyk"),cmy:_dereq_("./cmy"),xyz:_dereq_("./xyz"),xyy:_dereq_("./xyy"),yiq:_dereq_("./yiq"),yuv:_dereq_("./yuv"),ydbdr:_dereq_("./ydbdr"),ycgco:_dereq_("./ycgco"),ypbpr:_dereq_("./ypbpr"),ycbcr:_dereq_("./ycbcr"),xvycc:_dereq_("./xvycc"),yccbccrc:_dereq_("./yccbccrc"),ucs:_dereq_("./ucs"),uvw:_dereq_("./uvw"),jpeg:_dereq_("./jpeg"),lab:_dereq_("./lab"),labh:_dereq_("./labh"),lms:_dereq_("./lms"),lchab:_dereq_("./lchab"),luv:_dereq_("./luv"),lchuv:_dereq_("./lchuv"),husl:_dereq_("./husl"),huslp:_dereq_("./huslp"),cubehelix:_dereq_("./cubehelix"),coloroid:_dereq_("./coloroid"),hcg:_dereq_("./hcg"),tsl:_dereq_("./tsl"),yes:_dereq_("./yes"),osaucs:_dereq_("./osaucs")},fromSpace;for(var fromSpaceName in spaces){fromSpace=spaces[fromSpaceName];for(var toSpaceName in spaces)fromSpace[toSpaceName]||(fromSpace[toSpaceName]=getConvertor(fromSpaceName,toSpaceName))}module.exports=spaces;

},{"./cmy":103,"./cmyk":104,"./coloroid":105,"./cubehelix":106,"./hcg":107,"./hsi":108,"./hsl":109,"./hsv":110,"./husl":111,"./huslp":112,"./hwb":113,"./jpeg":115,"./lab":116,"./labh":117,"./lchab":118,"./lchuv":119,"./lms":120,"./luv":121,"./osaucs":122,"./rgb":123,"./tsl":124,"./ucs":125,"./uvw":126,"./xvycc":127,"./xyy":128,"./xyz":129,"./ycbcr":130,"./yccbccrc":131,"./ycgco":132,"./ydbdr":133,"./yes":134,"./yiq":135,"./ypbpr":136,"./yuv":137}],115:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),jpeg=module.exports={name:"jpeg",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["JPEG"]};jpeg.rgb=function(r){var e=r[0],n=r[1],a=r[2];return[e+1.402*(a-128),e-.34414*(n-128)-.71414*(a-128),e+1.772*(n-128)]},rgb.jpeg=function(r){var e=r[0],n=r[1],a=r[2];return[.299*e+.587*n+.114*a,128-.168736*e-.331264*n+.5*a,128+.5*e-.418688*n-.081312*a]};

},{"./rgb":123}],116:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz");module.exports={name:"lab",min:[0,-100,-100],max:[100,100,100],channel:["lightness","a","b"],alias:["LAB","cielab"],xyz:function(a){var t,e,n,o,r=a[0],h=a[1],i=a[2];return r<=8?(e=100*r/903.3,o=e/100*7.787+16/116):(e=100*Math.pow((r+16)/116,3),o=Math.pow(e/100,1/3)),t=t/95.047<=.008856?t=95.047*(h/500+o-16/116)/7.787:95.047*Math.pow(h/500+o,3),n=n/108.883<=.008859?n=108.883*(o-i/200-16/116)/7.787:108.883*Math.pow(o-i/200,3),[t,e,n]}},xyz.lab=function(a){var t,e,n,o=a[0],r=a[1],h=a[2];return o/=95.047,r/=100,h/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,t=116*r-16,e=500*(o-r),n=200*(r-h),[t,e,n]};

},{"./xyz":129}],117:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz");module.exports={name:"labh",min:[0,-128,-128],max:[100,128,128],channel:["lightness","a","b"],alias:["LABh","hunter-lab","hlab"],xyz:function(a){var r=a[0],t=a[1],n=a[2],e=r/10,h=t/17.5*r/10,s=n/7*r/10,l=e*e;return[(h+l)/1.02,l,-(s-l)/.847]}},xyz.labh=function(a){var r=a[0],t=a[1],n=a[2];return[10*Math.sqrt(t),0===t?0:(1.02*r-t)/Math.sqrt(t)*17.5,0===t?0:(t-.847*n)/Math.sqrt(t)*7]};

},{"./xyz":129}],118:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),lab=_dereq_("./lab"),lchab=module.exports={name:"lchab",min:[0,0,0],max:[100,100,360],channel:["lightness","chroma","hue"],alias:["LCHab","cielch","LCH","HLC","LSH"],xyz:function(a){return lab.xyz(lchab.lab(a))},lab:function(a){var t,l,n,r=a[0],h=a[1],c=a[2];return n=c/360*2*Math.PI,t=h*Math.cos(n),l=h*Math.sin(n),[r,t,l]}};lab.lchab=function(a){var t,l,n,r=a[0],h=a[1],c=a[2];return t=Math.atan2(c,h),l=360*t/2/Math.PI,l<0&&(l+=360),n=Math.sqrt(h*h+c*c),[r,n,l]},xyz.lchab=function(a){return lab.lchab(xyz.lab(a))};

},{"./lab":116,"./xyz":129}],119:[function(_dereq_,module,exports){
"use strict";var luv=_dereq_("./luv"),xyz=_dereq_("./xyz"),lchuv=module.exports={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(u){var t,l,n,r=u[0],v=u[1],a=u[2];return n=a/360*2*Math.PI,t=v*Math.cos(n),l=v*Math.sin(n),[r,t,l]},xyz:function(u){return luv.xyz(lchuv.luv(u))}};luv.lchuv=function(u){var t=u[0],l=u[1],n=u[2],r=Math.sqrt(l*l+n*n),v=Math.atan2(n,l),a=360*v/2/Math.PI;return a<0&&(a+=360),[t,r,a]},xyz.lchuv=function(u){return luv.lchuv(xyz.luv(u))};

},{"./luv":121,"./xyz":129}],120:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),lms=module.exports={name:"lms",min:[0,0,0],max:[100,100,100],channel:["long","medium","short"],matrix:{HPE:[.38971,.68898,-.07868,-.22981,1.1834,.04641,0,0,1],VONKRIES:[.4002,.7076,-.0808,-.2263,1.1653,.0457,0,0,.9182],BFD:[.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0686,1.0296],CAT97:[.8562,.3372,-.1934,-.836,1.8327,.0033,.0357,-.00469,1.0112],CAT00:[.7982,.3389,-.1371,-.5918,1.5512,.0406,8e-4,.0239,.9753],CAT02:[.7328,.4296,-.1624,-.7036,1.6975,.0061,.003,.0136,.9834]}};lms.xyz=function(r,m){var e=r[0],n=r[1],t=r[2];return m||(m=[1.096123820835514,-.278869000218287,.182745179382773,.454369041975359,.473533154307412,.072097803717229,-.009627608738429,-.005698031216113,1.015325639954543]),[e*m[0]+n*m[1]+t*m[2],e*m[3]+n*m[4]+t*m[5],e*m[6]+n*m[7]+t*m[8]]},xyz.lms=function(r,m){var e=r[0],n=r[1],t=r[2];return m||(m=lms.matrix.CAT02),[e*m[0]+n*m[1]+t*m[2],e*m[3]+n*m[4]+t*m[5],e*m[6]+n*m[7]+t*m[8]]};

},{"./xyz":129}],121:[function(_dereq_,module,exports){
"use strict";var _xyz=_dereq_("./xyz");module.exports={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,i,e){var n,r,o,u,x,a,h,y,z,p,v,w,_;if(o=t[0],u=t[1],x=t[2],0===o)return[0,0,0];return i=i||"D65",e=e||2,z=_xyz.whitepoint[e][i][0],p=_xyz.whitepoint[e][i][1],v=_xyz.whitepoint[e][i][2],w=4*z/(z+15*p+3*v),_=9*p/(z+15*p+3*v),n=u/(13*o)+w||0,r=x/(13*o)+_||0,h=o>8?p*Math.pow((o+16)/116,3):p*o*.0011070564598794539,a=9*h*n/(4*r)||0,y=h*(12-3*n-20*r)/(4*r)||0,[a,h,y]}},_xyz.luv=function(t,i,e){var n,r,o,u,x,a,h,y,z,p,v,w,_;i=i||"D65",e=e||2,z=_xyz.whitepoint[e][i][0],p=_xyz.whitepoint[e][i][1],v=_xyz.whitepoint[e][i][2],w=4*z/(z+15*p+3*v),_=9*p/(z+15*p+3*v),a=t[0],h=t[1],y=t[2],n=4*a/(a+15*h+3*y)||0,r=9*h/(a+15*h+3*y)||0;var l=h/p;return o=l<=.008856451679035631?903.2962962962961*l:116*Math.pow(l,1/3)-16,u=13*o*(n-w),x=13*o*(r-_),[o,u,x]};

},{"./xyz":129}],122:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),osaucs={name:"osaucs",alias:["OSA-UCS"],channel:["L","j","g"],min:[-10,-6,-10],max:[8,12,6]};osaucs.xyz=function(a){throw"Unimplemented"},xyz.osaucs=function(a){var t=a[0],o=a[1],s=a[2],e=t/(t+o+s),n=o/(t+o+s),u=4.4934*e*e+4.3034*n*n-4.276*e*n-1.3744*e-2.56439*n+1.8103,h=u*o,r=5.9*(Math.pow(h,1/3)-2/3+.042*Math.pow(Math.max(h,30)-30,1/3)),c=(r-14.3993)/Math.sqrt(2),p=r/(5.9*(Math.pow(h,1/3)-2/3)),M=.779*t+.4194*o-.1648*s,i=-.4493*t+1.3265*o+.0927*s,m=-.1149*t+.3394*o+.717*s;return M=Math.pow(M,1/3)||0,i=Math.pow(i,1/3)||0,m=Math.pow(m,1/3)||0,[c,p*(1.7*M+8*i-9.7*m),p*(-13.7*M+17.7*i-4*m)]},module.exports=osaucs;

},{"./xyz":129}],123:[function(_dereq_,module,exports){
"use strict";module.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};

},{}],124:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),tsl=module.exports={name:"tsl",min:[0,0,0],max:[1,1,1],channel:["tint","saturation","lightness"]};tsl.rgb=function(t){var a=t[0],r=t[1],n=t[2],s=Math.tan(2*Math.PI*(a-.25));s*=s;var h=Math.sqrt(5*r*r/(9*(1/s+1)))+1/3,e=Math.sqrt(5*r*r/(9*(s+1)))+1/3,M=n/(.185*h+.473*e+.114);return[M*h*255,M*e*255,M*(1-h-e)*255]},rgb.tsl=function(t){var a=t[0]/255,r=t[1]/255,n=t[2]/255,s=(a/(a+r+n)||0)-1/3,h=(r/(a+r+n)||0)-1/3;return[h>0?.5*Math.atan(s/h)/Math.PI+.25:h<0?.5*Math.atan(s/h)/Math.PI+.75:0,Math.sqrt(1.8*(s*s+h*h)),.299*a+.587*r+.114*n]};

},{"./rgb":123}],125:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),ucs=module.exports={name:"ucs",min:[0,0,0],max:[100,100,100],channel:["U","V","W"],alias:["UCS","cie1960"]};ucs.xyz=function(r){var u=r[0],e=r[1];return[1.5*u,e,1.5*u-3*e+2*r[2]]},xyz.ucs=function(r){var u=r[0],e=r[1];return[2*u/3,e,.5*(3*e-u+r[2])]};

},{"./xyz":129}],126:[function(_dereq_,module,exports){
"use strict";var ucs=_dereq_("./ucs"),xyz=_dereq_("./xyz"),uvw=module.exports={name:"uvw",min:[-134,-140,0],max:[224,122,100],channel:["U","V","W"],alias:["UVW","cieuvw","cie1964"]};uvw.xyz=function(i,t,u){var n,e,w,o,r,c,x,a,v,y,z,h,p;return o=i[0],r=i[1],0===(w=i[2])?[0,0,0]:(t=t||"D65",u=u||2,v=xyz.whitepoint[u][t][0],y=xyz.whitepoint[u][t][1],z=xyz.whitepoint[u][t][2],h=4*v/(v+15*y+3*z),p=6*y/(v+15*y+3*z),x=Math.pow((w+17)/25,3),n=o/(13*w)+h||0,e=r/(13*w)+p||0,c=1.5*x*n/e,a=x*(2/e-.5*n/e-5),[c,x,a])},xyz.uvw=function(i,t,u){var n,e,w,o,r,c=i[0],x=i[1],a=i[2];t=t||"D65",u=u||2,n=xyz.whitepoint[u][t][0],e=xyz.whitepoint[u][t][1],w=xyz.whitepoint[u][t][2],o=4*n/(n+15*e+3*w),r=6*e/(n+15*e+3*w);var v=4*c/(c+15*x+3*a)||0,y=6*x/(c+15*x+3*a)||0,z=25*Math.pow(x,1/3)-17;return[13*z*(v-o),13*z*(y-r),z]},uvw.ucs=function(i){},ucs.uvw=function(i){};

},{"./ucs":125,"./xyz":129}],127:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),ypbpr=_dereq_("./ypbpr"),xvycc=module.exports={name:"xvycc",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["xvYCC"]};ypbpr.xvycc=function(r){return[16+219*r[0],128+224*r[1],128+224*r[2]]},xvycc.ypbpr=function(r){return[(r[0]-16)/219,(r[1]-128)/224,(r[2]-128)/224]},xvycc.rgb=function(r,c,p){return ypbpr.rgb(xvycc.ypbpr(r),c,p)},rgb.xvycc=function(r,c,p){return ypbpr.xvycc(rgb.ypbpr(r,c,p))};

},{"./rgb":123,"./ypbpr":136}],128:[function(_dereq_,module,exports){
"use strict";var xyz=_dereq_("./xyz"),xyy={name:"xyy",min:[0,0,0],max:[1,1,100],channel:["x","y","Y"],alias:["xyY","Yxy","yxy"]};xyy.xyz=function(y){var x,r,n,e,a;return e=y[0],a=y[1],r=y[2],0===a?[0,0,0]:(x=e*r/a,n=(1-e-a)*r/a,[x,r,n])},xyz.xyy=function(y){var x,r,n,e;return r=y[0],n=y[1],e=y[2],x=r+n+e,0===x?[0,0,n]:[r/x,n/x,n]},module.exports=xyy;

},{"./xyz":129}],129:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}},xyz.max=xyz.whitepoint[2].D65,xyz.rgb=function(t,a){a=a||xyz.whitepoint[2].E;var i,h,n,r=t[0]/a[0],x=t[1]/a[1],e=t[2]/a[2];return i=3.240969941904521*r+-1.537383177570093*x+-.498610760293*e,h=-.96924363628087*r+1.87596750150772*x+.041555057407175*e,n=.055630079696993*r+-.20397695888897*x+1.056971514242878*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=Math.min(Math.max(0,i),1),h=Math.min(Math.max(0,h),1),n=Math.min(Math.max(0,n),1),[255*i,255*h,255*n]},rgb.xyz=function(t,a){var i=t[0]/255,h=t[1]/255,n=t[2]/255;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var r=.41239079926595*i+.35758433938387*h+.18048078840183*n,x=.21263900587151*i+.71516867876775*h+.072192315360733*n,e=.019330818715591*i+.11919477979462*h+.95053215224966*n;return a=a||xyz.whitepoint[2].E,[r*a[0],x*a[1],e*a[2]]},module.exports=xyz;

},{"./rgb":123}],130:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),ypbpr=_dereq_("./ypbpr"),ycbcr=module.exports={name:"ycbcr",min:[16,16,16],max:[235,240,240],channel:["Y","Cb","Cr"],alias:["YCbCr","YCC"]};ypbpr.ycbcr=function(r){return[16+219*r[0],128+224*r[1],128+224*r[2]]},ycbcr.ypbpr=function(r){return[(r[0]-16)/219,(r[1]-128)/224,(r[2]-128)/224]},ycbcr.rgb=function(r,b,c){return ypbpr.rgb(ycbcr.ypbpr(r),b,c)},rgb.ycbcr=function(r,b,c){return ypbpr.ycbcr(rgb.ypbpr(r,b,c))};

},{"./rgb":123,"./ypbpr":136}],131:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),ypbpr=_dereq_("./ypbpr"),yccbccrc=module.exports={name:"yccbccrc",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Yc","Cbc","Crc"],alias:["YcCbcCrc"]};yccbccrc.rgb=function(c){return ypbpr.rgb(c,.0593,.2627)},rgb.yccbccrc=function(c){return rgb.ypbpr(c,.0593,.2627)};

},{"./rgb":123,"./ypbpr":136}],132:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),ycgco=module.exports={name:"ycgco",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Cg","Co"],alias:["YCgCo"]};ycgco.rgb=function(r){var c=r[0],g=r[1],n=r[2],o=c-g;return[255*(o+n),255*(c+g),255*(o-n)]},rgb.ycgco=function(r){var c=r[0]/255,g=r[1]/255,n=r[2]/255;return[.25*c+.5*g+.25*n,-.25*c+.5*g-.25*n,.5*c-.5*n]};

},{"./rgb":123}],133:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),yuv=_dereq_("./yuv"),ydbdr=module.exports={name:"ydbdr",min:[0,-1.333,-1.333],max:[1,1.333,1.333],channel:["Y","Db","Dr"],alias:["YDbDr"]};ydbdr.rgb=function(r){var n=r[0],u=r[1],e=r[2];return[255*(n+92303716148e-15*u-.525912630661865*e),255*(n-.129132898890509*u+.267899328207599*e),255*(n+.664679059978955*u-79202543533e-15*e)]},rgb.ydbdr=function(r){var n=r[0]/255,u=r[1]/255,e=r[2]/255;return[.299*n+.587*u+.114*e,-.45*n-.883*u+1.333*e,-1.333*n+1.116*u+.217*e]},yuv.ydbdr=function(r){return[r[0],3.059*r[1],-2.169*r[2]]},ydbdr.yuv=function(r){return[r[0],r[1]/3.059,-r[2]/2.169]};

},{"./rgb":123,"./yuv":137}],134:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),yes=module.exports={name:"yes",min:[0,0,0],max:[1,1,1],channel:["luminance","e-factor","s-factor"]};yes.rgb=function(r){var e=r[0],n=r[1],a=r[2],t=[1,1.431,.126,1,-.569,.126,1,.431,-1.874];return[255*(e*t[0]+n*t[1]+a*t[2]),255*(e*t[3]+n*t[4]+a*t[5]),255*(e*t[6]+n*t[7]+a*t[8])]},rgb.yes=function(r){var e=r[0]/255,n=r[1]/255,a=r[2]/255,t=[.253,.684,.063,.5,-.5,0,.25,.25,-.5];return[e*t[0]+n*t[1]+a*t[2],e*t[3]+n*t[4]+a*t[5],e*t[6]+n*t[7]+a*t[8]]};

},{"./rgb":123}],135:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),yiq=module.exports={name:"yiq",min:[0,-.5957,-.5226],max:[1,.5957,.5226],channel:["Y","I","Q"],alias:["YIQ"]};yiq.rgb=function(a){var r,i,n,t=a[0],m=a[1],e=a[2];return r=1*t+.956*m+.621*e,i=1*t+-.272*m+-.647*e,n=1*t+-1.108*m+1.705*e,r=Math.min(Math.max(0,r),1),i=Math.min(Math.max(0,i),1),n=Math.min(Math.max(0,n),1),[255*r,255*i,255*n]},rgb.yiq=function(a){var r=a[0]/255,i=a[1]/255,n=a[2]/255,t=.299*r+.587*i+.114*n,m=0,e=0;return r===i&&i===n||(m=.596*r+-.275*i+-.321*n,e=.212*r+-.528*i+.311*n),[t,m,e]};

},{"./rgb":123}],136:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),ypbpr=module.exports={name:"ypbpr",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Pb","Pr"],alias:["YPbPr","Y/PB/PR","YPRPB","PRPBY","PBPRY","Y/Pb/Pr","YPrPb","PrPbY","PbPrY","Y/R-Y/B-Y","Y(R-Y)(B-Y)","R-Y","B-Y"]};ypbpr.rgb=function(r,P,Y){var b=r[0],a=r[1],n=r[2];P=P||.0722,Y=Y||.2126;var e=b+2*n*(1-Y),p=b+2*a*(1-P);return[255*e,(b-Y*e-P*p)/(1-Y-P)*255,255*p]},rgb.ypbpr=function(r,P,Y){var b=r[0]/255,a=r[1]/255,n=r[2]/255;P=P||.0722,Y=Y||.2126;var e=Y*b+(1-Y-P)*a+P*n;return[e,.5*(n-e)/(1-P),.5*(b-e)/(1-Y)]};

},{"./rgb":123}],137:[function(_dereq_,module,exports){
"use strict";var rgb=_dereq_("./rgb"),yuv=module.exports={name:"yuv",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","U","V"],alias:["YUV","EBU"]};yuv.rgb=function(a){var r,n,t,u=a[0],m=a[1],e=a[2];return r=1*u+0*m+1.13983*e,n=1*u+-.39465*m+-.5806*e,t=1*u+2.02311*m+0*e,r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),t=Math.min(Math.max(0,t),1),[255*r,255*n,255*t]},rgb.yuv=function(a){var r=a[0]/255,n=a[1]/255,t=a[2]/255;return[.299*r+.587*n+.114*t,-.14713*r+-.28886*n+.436*t,.615*r+-.51499*n+-.10001*t]};

},{"./rgb":123}],138:[function(_dereq_,module,exports){
"use strict";function clamp(r,e,a){return Math.min(Math.max(e,r),a)}function hexDouble(r){var e=r.toString(16).toUpperCase();return e.length<2?"0"+e:e}var colorNames=_dereq_("color-name"),swizzle=_dereq_("simple-swizzle"),reverseNames={};for(var name in colorNames)colorNames.hasOwnProperty(name)&&(reverseNames[colorNames[name]]=name);var cs=module.exports={to:{}};cs.get=function(r){var e,a,s=r.substring(0,3).toLowerCase();switch(s){case"hsl":e=cs.get.hsl(r),a="hsl";break;case"hwb":e=cs.get.hwb(r),a="hwb";break;default:e=cs.get.rgb(r),a="rgb"}return e?{model:a,value:e}:null},cs.get.rgb=function(r){if(!r)return null;var e,a,s,t=[0,0,0,1];if(e=r.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(s=e[2],e=e[1],a=0;a<3;a++){var n=2*a;t[a]=parseInt(e.slice(n,n+2),16)}s&&(t[3]=Math.round(parseInt(s,16)/255*100)/100)}else if(e=r.match(/^#([a-f0-9]{3,4})$/i)){for(e=e[1],s=e[3],a=0;a<3;a++)t[a]=parseInt(e[a]+e[a],16);s&&(t[3]=Math.round(parseInt(s+s,16)/255*100)/100)}else if(e=r.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(a=0;a<3;a++)t[a]=parseInt(e[a+1],0);e[4]&&(t[3]=parseFloat(e[4]))}else{if(!(e=r.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=r.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(t=colorNames[e[1]])?(t[3]=1,t):null:null;for(a=0;a<3;a++)t[a]=Math.round(2.55*parseFloat(e[a+1]));e[4]&&(t[3]=parseFloat(e[4]))}for(a=0;a<3;a++)t[a]=clamp(t[a],0,255);return t[3]=clamp(t[3],0,1),t},cs.get.hsl=function(r){if(!r)return null;var e=r.match(/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,clamp(parseFloat(e[2]),0,100),clamp(parseFloat(e[3]),0,100),clamp(isNaN(a)?1:a,0,1)]}return null},cs.get.hwb=function(r){if(!r)return null;var e=r.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,clamp(parseFloat(e[2]),0,100),clamp(parseFloat(e[3]),0,100),clamp(isNaN(a)?1:a,0,1)]}return null},cs.to.hex=function(){var r=swizzle(arguments);return"#"+hexDouble(r[0])+hexDouble(r[1])+hexDouble(r[2])+(r[3]<1?hexDouble(Math.round(255*r[3])):"")},cs.to.rgb=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"},cs.to.rgb.percent=function(){var r=swizzle(arguments),e=Math.round(r[0]/255*100),a=Math.round(r[1]/255*100),s=Math.round(r[2]/255*100);return r.length<4||1===r[3]?"rgb("+e+"%, "+a+"%, "+s+"%)":"rgba("+e+"%, "+a+"%, "+s+"%, "+r[3]+")"},cs.to.hsl=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"},cs.to.hwb=function(){var r=swizzle(arguments),e="";return r.length>=4&&1!==r[3]&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"},cs.to.keyword=function(r){return reverseNames[r.slice(0,3)]};

},{"color-name":102,"simple-swizzle":406}],139:[function(_dereq_,module,exports){
"use strict";function testInterior(r,t,e){var o=twoSum(r[0],-t[0]),u=twoSum(r[1],-t[1]),n=twoSum(e[0],-t[0]),i=twoSum(e[1],-t[1]),s=robustSum(robustProduct(o,n),robustProduct(u,i));return s[s.length-1]>=0}function compareAngle(r,t,e,o){var u=orient(t,e,o);if(0===u){var n=sgn(orient(r,t,e)),i=sgn(orient(r,t,o));if(n===i){if(0===n){var s=testInterior(r,t,e);return s===testInterior(r,t,o)?0:s?1:-1}return 0}return 0===i?n>0?-1:testInterior(r,t,o)?-1:1:0===n?i>0?1:testInterior(r,t,e)?1:-1:sgn(i-n)}var m=orient(r,t,e);return m>0?u>0&&orient(r,t,o)>0?1:-1:m<0?u>0||orient(r,t,o)>0?1:-1:orient(r,t,o)>0?1:testInterior(r,t,e)?1:-1}module.exports=compareAngle;var orient=_dereq_("robust-orientation"),sgn=_dereq_("signum"),twoSum=_dereq_("two-sum"),robustProduct=_dereq_("robust-product"),robustSum=_dereq_("robust-sum");

},{"robust-orientation":399,"robust-product":400,"robust-sum":404,"signum":140,"two-sum":422}],140:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return t<0?-1:t>0?1:0};

},{}],141:[function(_dereq_,module,exports){
(function (Buffer){
"use strict";function isArray(t){return Array.isArray?Array.isArray(t):"[object Array]"===objectToString(t)}function isBoolean(t){return"boolean"==typeof t}function isNull(t){return null===t}function isNullOrUndefined(t){return null==t}function isNumber(t){return"number"==typeof t}function isString(t){return"string"==typeof t}function isSymbol(t){return"symbol"===(void 0===t?"undefined":_typeof(t))}function isUndefined(t){return void 0===t}function isRegExp(t){return"[object RegExp]"===objectToString(t)}function isObject(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t}function isDate(t){return"[object Date]"===objectToString(t)}function isError(t){return"[object Error]"===objectToString(t)||t instanceof Error}function isFunction(t){return"function"==typeof t}function isPrimitive(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===(void 0===t?"undefined":_typeof(t))||void 0===t}function objectToString(t){return Object.prototype.toString.call(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer;

}).call(this,{"isBuffer":_dereq_("../../is-buffer/index.js")})
},{"../../is-buffer/index.js":338}],142:[function(_dereq_,module,exports){
"use strict";function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(r){var e=new Procedure;e.pre=r.pre,e.body=r.body,e.post=r.post;var o=r.args.slice(0);e.argTypes=o;for(var s=0;s<o.length;++s){var t=o[s];if("array"===t||"object"===(void 0===t?"undefined":_typeof(t))&&t.blockIndices){if(e.argTypes[s]="array",e.arrayArgs.push(s),e.arrayBlockIndices.push(t.blockIndices?t.blockIndices:0),e.shimArgs.push("array"+s),s<e.pre.args.length&&e.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array args");if(s<e.post.args.length&&e.post.args[s].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===t)e.scalarArgs.push(s),e.shimArgs.push("scalar"+s);else if("index"===t){if(e.indexArgs.push(s),s<e.pre.args.length&&e.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array index");if(s<e.body.args.length&&e.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array index");if(s<e.post.args.length&&e.post.args[s].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===t){if(e.shapeArgs.push(s),s<e.pre.args.length&&e.pre.args[s].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(s<e.body.args.length&&e.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array shape");if(s<e.post.args.length&&e.post.args[s].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==(void 0===t?"undefined":_typeof(t))||!t.offset)throw new Error("cwise: Unknown argument type "+o[s]);e.argTypes[s]="offset",e.offsetArgs.push({array:t.array,offset:t.offset}),e.offsetArgIndex.push(s)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>o.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>o.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>o.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!r.printCode||!!r.debug,e.funcName=r.funcName||"cwise",e.blockSize=r.blockSize||64,createThunk(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},createThunk=_dereq_("./lib/thunk.js");module.exports=compileCwise;

},{"./lib/thunk.js":144}],143:[function(_dereq_,module,exports){
"use strict";function innerFill(r,n,e){var s,a,o=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,p=[],h=[],u=0,c=0;for(s=0;s<o;++s)h.push(["i",s,"=0"].join(""));for(a=0;a<i;++a)for(s=0;s<o;++s)c=u,u=r[s],0===s?h.push(["d",a,"s",s,"=t",a,"p",u].join("")):h.push(["d",a,"s",s,"=(t",a,"p",u,"-s",c,"*t",a,"p",c,")"].join(""));for(p.push("var "+h.join(",")),s=o-1;s>=0;--s)u=r[s],p.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(p.push(e),s=0;s<o;++s){for(c=u,u=r[s],a=0;a<i;++a)p.push(["p",a,"+=d",a,"s",s].join(""));t&&(s>0&&p.push(["index[",c,"]-=s",c].join("")),p.push(["++index[",u,"]"].join(""))),p.push("}")}return p.join("\n")}function outerFill(r,n,e,s){for(var a=n.length,o=e.arrayArgs.length,i=e.blockSize,t=e.indexArgs.length>0,p=[],h=0;h<o;++h)p.push(["var offset",h,"=p",h].join(""));for(var h=r;h<a;++h)p.push(["for(var j"+h+"=SS[",n[h],"]|0;j",h,">0;){"].join("")),p.push(["if(j",h,"<",i,"){"].join("")),p.push(["s",n[h],"=j",h].join("")),p.push(["j",h,"=0"].join("")),p.push(["}else{s",n[h],"=",i].join("")),p.push(["j",h,"-=",i,"}"].join("")),t&&p.push(["index[",n[h],"]=j",h].join(""));for(var h=0;h<o;++h){for(var u=["offset"+h],c=r;c<a;++c)u.push(["j",c,"*t",h,"p",n[c]].join(""));p.push(["p",h,"=(",u.join("+"),")"].join(""))}p.push(innerFill(n,e,s));for(var h=r;h<a;++h)p.push("}");return p.join("\n")}function countMatches(r){for(var n=0,e=r[0].length;n<e;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function processBlock(r,n,e){for(var s=r.body,a=[],o=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var p=new RegExp(t.name,"g"),h="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i);u=n.offsetArgs[c].array,h="+q"+c;case"array":h="p"+u+h;var l="l"+i,f="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(a.push(["var ",l,"=",f,".get(",h,")"].join("")),s=s.replace(p,l),o.push([f,".set(",h,",",l,")"].join(""))):s=s.replace(p,[f,".get(",h,")"].join("")):s=s.replace(p,[f,"[",h,"]"].join("")):"generic"===e[u]?(a.push(["var ",l,"=",f,".get(",h,")"].join("")),s=s.replace(p,l),t.lvalue&&o.push([f,".set(",h,",",l,")"].join(""))):(a.push(["var ",l,"=",f,"[",h,"]"].join("")),s=s.replace(p,l),t.lvalue&&o.push([f,"[",h,"]=",l].join("")));else{for(var g=[t.name],j=[h],v=0;v<Math.abs(n.arrayBlockIndices[u]);v++)g.push("\\s*\\[([^\\]]+)\\]"),j.push("$"+(v+1)+"*t"+u+"b"+v);if(p=new RegExp(g.join(""),"g"),h=j.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(p,[f,"[",h,"]"].join(""))}break;case"scalar":s=s.replace(p,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(p,"index");break;case"shape":s=s.replace(p,"shape")}}}return[a.join("\n"),s,o.join("\n")].join("\n").trim()}function typeSummary(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var a=r[s],o=a.match(/\d+/);o=o?o[0]:"",0===a.charAt(0)?n[s]="u"+a.charAt(1)+o:n[s]=a.charAt(0)+o,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function generateCWiseOp(r,n){for(var e=n[1].length-Math.abs(r.arrayBlockIndices[0])|0,s=new Array(r.arrayArgs.length),a=new Array(r.arrayArgs.length),o=0;o<r.arrayArgs.length;++o)a[o]=n[2*o],s[o]=n[2*o+1];for(var i=[],t=[],p=[],h=[],u=[],o=0;o<r.arrayArgs.length;++o){r.arrayBlockIndices[o]<0?(p.push(0),h.push(e),i.push(e),t.push(e+r.arrayBlockIndices[o])):(p.push(r.arrayBlockIndices[o]),h.push(r.arrayBlockIndices[o]+e),i.push(0),t.push(r.arrayBlockIndices[o]));for(var c=[],l=0;l<s[o].length;l++)p[o]<=s[o][l]&&s[o][l]<h[o]&&c.push(s[o][l]-p[o]);u.push(c)}for(var f=["SS"],g=["'use strict'"],j=[],l=0;l<e;++l)j.push(["s",l,"=SS[",l,"]"].join(""));for(var o=0;o<r.arrayArgs.length;++o){f.push("a"+o),f.push("t"+o),f.push("p"+o);for(var l=0;l<e;++l)j.push(["t",o,"p",l,"=t",o,"[",p[o]+l,"]"].join(""));for(var l=0;l<Math.abs(r.arrayBlockIndices[o]);++l)j.push(["t",o,"b",l,"=t",o,"[",i[o]+l,"]"].join(""))}for(var o=0;o<r.scalarArgs.length;++o)f.push("Y"+o);if(r.shapeArgs.length>0&&j.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var v=new Array(e),o=0;o<e;++o)v[o]="0";j.push(["index=[",v.join(","),"]"].join(""))}for(var o=0;o<r.offsetArgs.length;++o){for(var y=r.offsetArgs[o],d=[],l=0;l<y.offset.length;++l)0!==y.offset[l]&&(1===y.offset[l]?d.push(["t",y.array,"p",l].join("")):d.push([y.offset[l],"*t",y.array,"p",l].join("")));0===d.length?j.push("q"+o+"=0"):j.push(["q",o,"=",d.join("+")].join(""))}var A=uniq([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));j=j.concat(A),g.push("var "+j.join(","));for(var o=0;o<r.arrayArgs.length;++o)g.push("p"+o+"|=0");r.pre.body.length>3&&g.push(processBlock(r.pre,r,a));var k=processBlock(r.body,r,a),b=countMatches(u);b<e?g.push(outerFill(b,u[0],r,k)):g.push(innerFill(u[0],r,k)),r.post.body.length>3&&g.push(processBlock(r.post,r,a)),r.debug&&console.log("-----Generated cwise routine for ",n,":\n"+g.join("\n")+"\n----------");var x=[r.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",b,typeSummary(a)].join("");return new Function(["function ",x,"(",f.join(","),"){",g.join("\n"),"} return ",x].join(""))()}var uniq=_dereq_("uniq");module.exports=generateCWiseOp;

},{"uniq":426}],144:[function(_dereq_,module,exports){
"use strict";function createThunk(r){var a=["'use strict'","var CACHED={}"],e=[],s=r.funcName+"_cwise_thunk";a.push(["return function ",s,"(",r.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],h=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],i=[],p=[],t=0;t<r.arrayArgs.length;++t){var c=r.arrayArgs[t];e.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),n.push("t"+c),n.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),h.push("array"+c+".data"),h.push("array"+c+".stride"),h.push("array"+c+".offset|0"),t>0&&(i.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[t]))),p.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[t])+"]"))}r.arrayArgs.length>1&&(a.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),a.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(var t=0;t<r.scalarArgs.length;++t)h.push("scalar"+r.scalarArgs[t]);return e.push(["type=[",o.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),a.push("var "+e.join(",")),a.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",h.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------"),new Function("compile",a.join("\n"))(compile.bind(void 0,r))}var compile=_dereq_("./compile.js");module.exports=createThunk;

},{"./compile.js":143}],145:[function(_dereq_,module,exports){
(function (process){
"use strict";function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(n=r))}),e.splice(n,0,t)}}function log(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(e){}}function load(){var e;try{e=exports.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}function localstorage(){try{return window.localStorage}catch(e){}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports=module.exports=_dereq_("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(load());

}).call(this,_dereq_('_process'))
},{"./debug":146,"_process":376}],146:[function(_dereq_,module,exports){
"use strict";function selectColor(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}function createDebug(e){function r(){if(r.enabled){var e=r,t=+new Date,s=t-(prevTime||t);e.diff=s,e.prev=prevTime,e.curr=t,prevTime=t;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=exports.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var p=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,t){if("%%"===r)return r;p++;var s=exports.formatters[t];if("function"==typeof s){var n=o[p];r=s.call(e,n),o.splice(p,1),p--}return r}),exports.formatArgs.call(e,o);(r.log||exports.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=exports.enabled(e),r.useColors=exports.useColors(),r.color=selectColor(e),"function"==typeof exports.init&&exports.init(r),r}function enable(e){exports.save(e),exports.names=[],exports.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),t=r.length,s=0;s<t;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=_dereq_("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime;

},{"ms":347}],147:[function(_dereq_,module,exports){
"use strict";module.exports=function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]};

},{}],148:[function(_dereq_,module,exports){
"use strict";var synth=_dereq_("synthetic-dom-events"),on=function(n,t,e,o){return n.addEventListener(t,e,o||!1)},off=function(n,t,e,o){return n.removeEventListener(t,e,o||!1)},once=function(n,t,e,o){function r(i){off(n,t,r,o),e(i)}on(n,t,r,o)},emit=function(n,t,e){var o=synth(t,e);n.dispatchEvent(o)};document.addEventListener||(on=function(n,t,e){return n.attachEvent("on"+t,e)}),document.removeEventListener||(off=function(n,t,e){return n.detachEvent("on"+t,e)}),document.dispatchEvent||(emit=function(n,t,e){var o=synth(t,e);return n.fireEvent("on"+o.type,o)}),module.exports={on:on,off:off,once:once,emit:emit};

},{"synthetic-dom-events":414}],149:[function(_dereq_,module,exports){
(function (Buffer){
"use strict";var hasTypedArrays=!1;if("undefined"!=typeof Float64Array){var DOUBLE_VIEW=new Float64Array(1),UINT_VIEW=new Uint32Array(DOUBLE_VIEW.buffer);if(DOUBLE_VIEW[0]=1,hasTypedArrays=!0,1072693248===UINT_VIEW[1]){var toDoubleLE=function(e,r){return UINT_VIEW[0]=e,UINT_VIEW[1]=r,DOUBLE_VIEW[0]},lowUintLE=function(e){return DOUBLE_VIEW[0]=e,UINT_VIEW[0]},highUintLE=function(e){return DOUBLE_VIEW[0]=e,UINT_VIEW[1]};module.exports=function(e){return DOUBLE_VIEW[0]=e,[UINT_VIEW[0],UINT_VIEW[1]]},module.exports.pack=toDoubleLE,module.exports.lo=lowUintLE,module.exports.hi=highUintLE}else if(1072693248===UINT_VIEW[0]){var toDoubleBE=function(e,r){return UINT_VIEW[1]=e,UINT_VIEW[0]=r,DOUBLE_VIEW[0]},lowUintBE=function(e){return DOUBLE_VIEW[0]=e,UINT_VIEW[1]},highUintBE=function(e){return DOUBLE_VIEW[0]=e,UINT_VIEW[0]};module.exports=function(e){return DOUBLE_VIEW[0]=e,[UINT_VIEW[1],UINT_VIEW[0]]},module.exports.pack=toDoubleBE,module.exports.lo=lowUintBE,module.exports.hi=highUintBE}else hasTypedArrays=!1}if(!hasTypedArrays){var toDouble=function(e,r){return buffer.writeUInt32LE(e,0,!0),buffer.writeUInt32LE(r,4,!0),buffer.readDoubleLE(0,!0)},lowUint=function(e){return buffer.writeDoubleLE(e,0,!0),buffer.readUInt32LE(0,!0)},highUint=function(e){return buffer.writeDoubleLE(e,0,!0),buffer.readUInt32LE(4,!0)},buffer=new Buffer(8);module.exports=function(e){return buffer.writeDoubleLE(e,0,!0),[buffer.readUInt32LE(0,!0),buffer.readUInt32LE(4,!0)]},module.exports.pack=toDouble,module.exports.lo=lowUint,module.exports.hi=highUint}module.exports.sign=function(e){return module.exports.hi(e)>>>31},module.exports.exponent=function(e){return(module.exports.hi(e)<<1>>>21)-1023},module.exports.fraction=function(e){var r=module.exports.lo(e),o=module.exports.hi(e),t=1048575&o;return 2146435072&o&&(t+=1<<20),[r,t]},module.exports.denormalized=function(e){return!(2146435072&module.exports.hi(e))};

}).call(this,_dereq_("buffer").Buffer)
},{"buffer":87}],150:[function(_dereq_,module,exports){
"use strict";function dupe_array(r,e,t){var o=0|r[t];if(o<=0)return[];var n,u=new Array(o);if(t===r.length-1)for(n=0;n<o;++n)u[n]=e;else for(n=0;n<o;++n)u[n]=dupe_array(r,e,t+1);return u}function dupe_number(r,e){var t,o;for(t=new Array(r),o=0;o<r;++o)t[o]=e;return t}function dupe(r,e){switch(void 0===e&&(e=0),void 0===r?"undefined":_typeof(r)){case"number":if(r>0)return dupe_number(0|r,e);break;case"object":if("number"==typeof r.length)return dupe_array(r,e,0)}return[]}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};module.exports=dupe;

},{}],151:[function(_dereq_,module,exports){
"use strict";function edgeToAdjacency(r,e){var n=r.length;if("number"!=typeof e){e=0;for(var a=0;a<n;++a){var u=r[a];e=Math.max(e,u[0],u[1])}e=1+(0|e)}e|=0;for(var o=new Array(e),a=0;a<e;++a)o[a]=[];for(var a=0;a<n;++a){var u=r[a];o[u[0]].push(u[1]),o[u[1]].push(u[0])}for(var t=0;t<e;++t)uniq(o[t],function(r,e){return r-e});return o}module.exports=edgeToAdjacency;var uniq=_dereq_("uniq");

},{"uniq":426}],152:[function(_dereq_,module,exports){
"use strict";function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function isUndefined(e){return void 0===e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(isObject(n))for(s=Array.prototype.slice.call(arguments,1),o=n.slice(),i=o.length,r=0;r<i;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=s;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};

},{}],153:[function(_dereq_,module,exports){
"use strict";var trmat=_dereq_("gl-vec3/transformMat4"),add=_dereq_("gl-vec3/add"),subtract=_dereq_("gl-vec3/subtract"),normalize=_dereq_("gl-vec3/normalize"),cross=_dereq_("gl-vec3/cross"),dot=_dereq_("gl-vec3/dot"),identity=_dereq_("gl-mat4/identity"),rotate=_dereq_("gl-mat4/rotate"),mat=[],v=[],axis=[];module.exports=function(r){var t={positions:[],cells:[]},e=r.path,a=r.positions;if(!a)throw new Error("positions not provided");var s=r.edges;if(!s)throw new Error("edges not provided");for(var o=r.cells,i=r.closed,l=a.length,c=e.length,n=s.length,u=0;u<c;u++){var d=[0,0,1];i?subtract(v,e[(u-1+c)%(c-1)],e[(u+1)%(c-1)]):0===u?subtract(v,e[u],e[u+1]):u===c-1?subtract(v,e[u-1],e[u]):subtract(v,e[u-1],e[u+1]),normalize(v,v),cross(axis,d,v);var p=Math.acos(dot(d,v));identity(mat),rotate(mat,mat,p,axis);var h=e[u][3];h&&rotate(mat,mat,h,d);for(var g=0;g<l;g++){var m=a[g],f=[m[0],m[1],m[2]||0];trmat(f,f,mat),add(f,f,e[u]),t.positions.push(f)}}for(var u=0;u<c-1;u++)for(var g=0;g<n;g++){var q=s[g];t.cells.push([u*l+q[0],u*l+q[1],(u+1)*l+q[0]]),t.cells.push([u*l+q[1],(u+1)*l+q[0],(u+1)*l+q[1]])}if(o&&!i&&!1!==r.startCap&&!1!==r.caps)for(var u=0;u<o.length;u++){for(var b=[],w=o[u].length,g=0;g<w;g++)b.push(o[u][g]);t.cells.push(b)}if(o&&!i&&!1!==r.endCap&&!1!==r.caps)for(var u=0;u<o.length;u++){for(var b=[],w=o[u].length,g=0;g<w;g++)b.push(o[u][g]+(c-1)*l);t.cells.push(b)}return t};

},{"gl-mat4/identity":188,"gl-mat4/rotate":196,"gl-vec3/add":260,"gl-vec3/cross":265,"gl-vec3/dot":268,"gl-vec3/normalize":279,"gl-vec3/subtract":289,"gl-vec3/transformMat4":291}],154:[function(_dereq_,module,exports){
"use strict";function extrude(e,r,t,n,a){var u=r.length,e=e||new Float32Array(3*u+6);a=a||r;for(var o=1,f=3;o<u;o+=2,f+=6)e[f-3]=r[o-1],e[f-2]=t,e[f-1]=r[o],e[f]=a[o-1],e[f+1]=n,e[f+2]=a[o];return e[f-3]=r[0],e[f-2]=t,e[f-1]=r[1],e[f]=a[0],e[f+1]=n,e[f+2]=a[1],e}function faces(e,r){r=r||new Float32Array(e.length-6);for(var t=2,n=e.length,a=6;t<=n;t+=1,a+=3)r[a-2]=t-2,r[a-1]=t-1,r[a-0]=t;return r}module.exports=extrude,extrude.faces=faces;

},{}],155:[function(_dereq_,module,exports){
"use strict";var pnltri=_dereq_("pnltri"),defaults=_dereq_("lodash.defaults");module.exports=function(t,n){function o(t){return t=t.map(function(t){return{x:t[0],y:t[1]}}),(new pnltri.Triangulator).triangulate_polygon([t])}n=n||{},defaults(n,{top:1,bottom:0,closed:!0});var r,u,e=t.length;return n.top===n.bottom?function(){r=t.map(function(t){return[t[0],t[1],n.top]}),u=o(t)}():function(){r=[],t.forEach(function(t){r.push([t[0],t[1],n.top])}),t.forEach(function(t){r.push([t[0],t[1],n.bottom])}),u=[];for(var i=0;i<e;i++)i===e-1?(u.push([i+e,e,i]),u.push([0,i,e])):(u.push([i+e,i+e+1,i]),u.push([i+1,i,i+e+1]));if(n.closed){var a=o(t),c=a.map(function(t){return t.map(function(t){return t+e})});c=c.map(function(t){return[t[0],t[2],t[1]]}),u=u.concat(a).concat(c)}}(),{positions:r,cells:u}};

},{"lodash.defaults":340,"pnltri":367}],156:[function(_dereq_,module,exports){
"use strict";function getEyeVector(r,t){return t||(t=[]),invert(scratch,r),t[0]=scratch[12],t[1]=scratch[13],t[2]=scratch[14],t}var invert=_dereq_("gl-mat4/invert"),scratch=new Float32Array(16);module.exports=getEyeVector;

},{"gl-mat4/invert":190}],157:[function(_dereq_,module,exports){
"use strict";function RBNode(t,e,r,o,i,l){this._color=t,this.key=e,this.value=r,this.left=o,this.right=i,this._count=l}function cloneNode(t){return new RBNode(t._color,t.key,t.value,t.left,t.right,t._count)}function repaint(t,e){return new RBNode(t,e.key,e.value,e.left,e.right,e._count)}function recount(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function RedBlackTree(t,e){this._compare=t,this.root=e}function doVisitFull(t,e){if(e.left){var r=doVisitFull(t,e.left);if(r)return r}var r=t(e.key,e.value);return r||(e.right?doVisitFull(t,e.right):void 0)}function doVisitHalf(t,e,r,o){if(e(t,o.key)<=0){if(o.left){var i=doVisitHalf(t,e,r,o.left);if(i)return i}var i=r(o.key,o.value);if(i)return i}if(o.right)return doVisitHalf(t,e,r,o.right)}function doVisit(t,e,r,o,i){var l,n=r(t,i.key),f=r(e,i.key);if(n<=0){if(i.left&&(l=doVisit(t,e,r,o,i.left)))return l;if(f>0&&(l=o(i.key,i.value)))return l}if(f>0&&i.right)return doVisit(t,e,r,o,i.right)}function RedBlackTreeIterator(t,e){this.tree=t,this._stack=e}function swapNode(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function fixDoubleBlack(t){for(var e,r,o,i,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=BLACK);if(r=t[l-1],r.left===e){if(o=r.right,o.right&&o.right._color===RED){if(o=r.right=cloneNode(o),i=o.right=cloneNode(o.right),r.right=o.left,o.left=r,o.right=i,o._color=r._color,e._color=BLACK,r._color=BLACK,i._color=BLACK,recount(r),recount(o),l>1){var n=t[l-2];n.left===r?n.left=o:n.right=o}return void(t[l-1]=o)}if(o.left&&o.left._color===RED){if(o=r.right=cloneNode(o),i=o.left=cloneNode(o.left),r.right=i.left,o.left=i.right,i.left=r,i.right=o,i._color=r._color,r._color=BLACK,o._color=BLACK,e._color=BLACK,recount(r),recount(o),recount(i),l>1){var n=t[l-2];n.left===r?n.left=i:n.right=i}return void(t[l-1]=i)}if(o._color===BLACK){if(r._color===RED)return r._color=BLACK,void(r.right=repaint(RED,o));r.right=repaint(RED,o);continue}if(o=cloneNode(o),r.right=o.left,o.left=r,o._color=r._color,r._color=RED,recount(r),recount(o),l>1){var n=t[l-2];n.left===r?n.left=o:n.right=o}t[l-1]=o,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if(o=r.left,o.left&&o.left._color===RED){if(o=r.left=cloneNode(o),i=o.left=cloneNode(o.left),r.left=o.right,o.right=r,o.left=i,o._color=r._color,e._color=BLACK,r._color=BLACK,i._color=BLACK,recount(r),recount(o),l>1){var n=t[l-2];n.right===r?n.right=o:n.left=o}return void(t[l-1]=o)}if(o.right&&o.right._color===RED){if(o=r.left=cloneNode(o),i=o.right=cloneNode(o.right),r.left=i.right,o.right=i.left,i.right=r,i.left=o,i._color=r._color,r._color=BLACK,o._color=BLACK,e._color=BLACK,recount(r),recount(o),recount(i),l>1){var n=t[l-2];n.right===r?n.right=i:n.left=i}return void(t[l-1]=i)}if(o._color===BLACK){if(r._color===RED)return r._color=BLACK,void(r.left=repaint(RED,o));r.left=repaint(RED,o);continue}if(o=cloneNode(o),r.left=o.right,o.right=r,o._color=r._color,r._color=RED,recount(r),recount(o),l>1){var n=t[l-2];n.right===r?n.right=o:n.left=o}t[l-1]=o,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}function defaultCompare(t,e){return t<e?-1:t>e?1:0}function createRBTree(t){return new RedBlackTree(t||defaultCompare,null)}module.exports=createRBTree;var RED=0,BLACK=1,proto=RedBlackTree.prototype;Object.defineProperty(proto,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(proto,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(proto,"length",{get:function(){return this.root?this.root._count:0}}),proto.insert=function(t,e){for(var r=this._compare,o=this.root,i=[],l=[];o;){var n=r(t,o.key);i.push(o),l.push(n),o=n<=0?o.left:o.right}i.push(new RBNode(RED,t,e,null,null,1));for(var f=i.length-2;f>=0;--f){var o=i[f];l[f]<=0?i[f]=new RBNode(o._color,o.key,o.value,i[f+1],o.right,o._count+1):i[f]=new RBNode(o._color,o.key,o.value,o.left,i[f+1],o._count+1)}for(var f=i.length-1;f>1;--f){var c=i[f-1],o=i[f];if(c._color===BLACK||o._color===BLACK)break;var h=i[f-2];if(h.left===c)if(c.left===o){var u=h.right;if(!u||u._color!==RED){if(h._color=RED,h.left=c.right,c._color=BLACK,c.right=h,i[f-2]=c,i[f-1]=o,recount(h),recount(c),f>=3){var a=i[f-3];a.left===h?a.left=c:a.right=c}break}c._color=BLACK,h.right=repaint(BLACK,u),h._color=RED,f-=1}else{var u=h.right;if(!u||u._color!==RED){if(c.right=o.left,h._color=RED,h.left=o.right,o._color=BLACK,o.left=c,o.right=h,i[f-2]=o,i[f-1]=c,recount(h),recount(c),recount(o),f>=3){var a=i[f-3];a.left===h?a.left=o:a.right=o}break}c._color=BLACK,h.right=repaint(BLACK,u),h._color=RED,f-=1}else if(c.right===o){var u=h.left;if(!u||u._color!==RED){if(h._color=RED,h.right=c.left,c._color=BLACK,c.left=h,i[f-2]=c,i[f-1]=o,recount(h),recount(c),f>=3){var a=i[f-3];a.right===h?a.right=c:a.left=c}break}c._color=BLACK,h.left=repaint(BLACK,u),h._color=RED,f-=1}else{var u=h.left;if(!u||u._color!==RED){if(c.left=o.right,h._color=RED,h.right=o.left,o._color=BLACK,o.right=c,o.left=h,i[f-2]=o,i[f-1]=c,recount(h),recount(c),recount(o),f>=3){var a=i[f-3];a.right===h?a.right=o:a.left=o}break}c._color=BLACK,h.left=repaint(BLACK,u),h._color=RED,f-=1}}return i[0]._color=BLACK,new RedBlackTree(r,i[0])},proto.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return doVisitFull(t,this.root);case 2:return doVisitHalf(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return doVisit(e,r,this._compare,t,this.root)}},Object.defineProperty(proto,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new RedBlackTreeIterator(this,t)}}),Object.defineProperty(proto,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new RedBlackTreeIterator(this,t)}}),proto.at=function(t){if(t<0)return new RedBlackTreeIterator(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new RedBlackTreeIterator(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new RedBlackTreeIterator(this,[])},proto.ge=function(t){for(var e=this._compare,r=this.root,o=[],i=0;r;){var l=e(t,r.key);o.push(r),l<=0&&(i=o.length),r=l<=0?r.left:r.right}return o.length=i,new RedBlackTreeIterator(this,o)},proto.gt=function(t){for(var e=this._compare,r=this.root,o=[],i=0;r;){var l=e(t,r.key);o.push(r),l<0&&(i=o.length),r=l<0?r.left:r.right}return o.length=i,new RedBlackTreeIterator(this,o)},proto.lt=function(t){for(var e=this._compare,r=this.root,o=[],i=0;r;){var l=e(t,r.key);o.push(r),l>0&&(i=o.length),r=l<=0?r.left:r.right}return o.length=i,new RedBlackTreeIterator(this,o)},proto.le=function(t){for(var e=this._compare,r=this.root,o=[],i=0;r;){var l=e(t,r.key);o.push(r),l>=0&&(i=o.length),r=l<0?r.left:r.right}return o.length=i,new RedBlackTreeIterator(this,o)},proto.find=function(t){for(var e=this._compare,r=this.root,o=[];r;){var i=e(t,r.key);if(o.push(r),0===i)return new RedBlackTreeIterator(this,o);r=i<=0?r.left:r.right}return new RedBlackTreeIterator(this,[])},proto.remove=function(t){var e=this.find(t);return e?e.remove():this},proto.get=function(t){for(var e=this._compare,r=this.root;r;){var o=e(t,r.key);if(0===o)return r.value;r=o<=0?r.left:r.right}};var iproto=RedBlackTreeIterator.prototype;Object.defineProperty(iproto,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(iproto,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),iproto.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())},iproto.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new RBNode(r._color,r.key,r.value,r.left,r.right,r._count);for(var o=t.length-2;o>=0;--o){var r=t[o];r.left===t[o+1]?e[o]=new RBNode(r._color,r.key,r.value,e[o+1],r.right,r._count):e[o]=new RBNode(r._color,r.key,r.value,r.left,e[o+1],r._count)}if(r=e[e.length-1],r.left&&r.right){var i=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var l=e[i-1];e.push(new RBNode(r._color,l.key,l.value,r.left,r.right,r._count)),e[i-1].key=r.key,e[i-1].value=r.value;for(var o=e.length-2;o>=i;--o)r=e[o],e[o]=new RBNode(r._color,r.key,r.value,r.left,e[o+1],r._count);e[i-1].left=e[i]}if(r=e[e.length-1],r._color===RED){var n=e[e.length-2];n.left===r?n.left=null:n.right===r&&(n.right=null),e.pop();for(var o=0;o<e.length;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}if(r.left||r.right){r.left?swapNode(r,r.left):r.right&&swapNode(r,r.right),r._color=BLACK;for(var o=0;o<e.length-1;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}if(1===e.length)return new RedBlackTree(this.tree._compare,null);for(var o=0;o<e.length;++o)e[o]._count--;var f=e[e.length-2];return fixDoubleBlack(e),f.left===r?f.left=null:f.right=null,new RedBlackTree(this.tree._compare,e[0])},Object.defineProperty(iproto,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(iproto,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(iproto,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var o=e.length-2;o>=0;--o)e[o+1]===e[o].right&&(++t,e[o].left&&(t+=e[o].left._count));return t},enumerable:!0}),iproto.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(iproto,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),iproto.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),o=e[e.length-1];r[r.length-1]=new RBNode(o._color,o.key,t,o.left,o.right,o._count);for(var i=e.length-2;i>=0;--i)o=e[i],o.left===e[i+1]?r[i]=new RBNode(o._color,o.key,o.value,r[i+1],o.right,o._count):r[i]=new RBNode(o._color,o.key,o.value,o.left,r[i+1],o._count);return new RedBlackTree(this.tree._compare,r[0])},iproto.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(iproto,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}});

},{}],158:[function(_dereq_,module,exports){
"use strict";function lngamma(t){if(t<0)return Number("0/0");for(var a=p_ln[0],e=p_ln.length-1;e>0;--e)a+=p_ln[e]/(t+e);var r=t+g_ln+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(r)-r+Math.log(a)-Math.log(t)}var g=7,p=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],g_ln=607/128,p_ln=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];module.exports=function t(a){if(a<.5)return Math.PI/(Math.sin(Math.PI*a)*t(1-a));if(a>100)return Math.exp(lngamma(a));a-=1;for(var e=p[0],r=1;r<g+2;r++)e+=p[r]/(a+r);var n=a+g+.5;return Math.sqrt(2*Math.PI)*Math.pow(n,a+.5)*Math.exp(-n)*e},module.exports.log=lngamma;

},{}],159:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var getPermutations=function(e){function t(e){0===e.length&&r.push(s.slice());for(var u=0;u<e.length;u++)e.push(e.shift()),s.push(e[0]),t(e.slice(1)),s.pop()}var r=[],s=[];return t(e),r};exports.default=getPermutations,module.exports=exports.default;

},{}],160:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function uniq(e){for(var t=e.sort(),u=[e[0]],r=1;r<t.length;r++)t[r-1].join("")!==t[r].join("")&&u.push(t[r]);return u}Object.defineProperty(exports,"__esModule",{value:!0});var _getPermutations=_dereq_("get-permutations"),_getPermutations2=_interopRequireDefault(_getPermutations),getUniquePermutations=function(e){return uniq((0,_getPermutations2.default)(e))};exports.default=getUniquePermutations,module.exports=exports.default;

},{"get-permutations":159}],161:[function(_dereq_,module,exports){
"use strict";function adjoint(t,n){var o=n[0],r=n[1],e=n[2],i=n[3],u=n[4],a=n[5],d=n[6],s=n[7],c=n[8];return t[0]=u*c-a*s,t[1]=e*s-r*c,t[2]=r*a-e*u,t[3]=a*d-i*c,t[4]=o*c-e*d,t[5]=e*i-o*a,t[6]=i*s-u*d,t[7]=r*d-o*s,t[8]=o*u-r*i,t}module.exports=adjoint;

},{}],162:[function(_dereq_,module,exports){
"use strict";function clone(e){var r=new Float32Array(9);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}module.exports=clone;

},{}],163:[function(_dereq_,module,exports){
"use strict";function copy(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o}module.exports=copy;

},{}],164:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}module.exports=create;

},{}],165:[function(_dereq_,module,exports){
"use strict";function determinant(t){var e=t[0],n=t[1],r=t[2],i=t[3],u=t[4],a=t[5],d=t[6],m=t[7],o=t[8];return e*(o*u-a*m)+n*(a*d-o*i)+r*(m*i-u*d)}module.exports=determinant;

},{}],166:[function(_dereq_,module,exports){
"use strict";function frob(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8])}module.exports=frob;

},{}],167:[function(_dereq_,module,exports){
"use strict";function fromMat2d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}module.exports=fromMat2d;

},{}],168:[function(_dereq_,module,exports){
"use strict";function fromMat4(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}module.exports=fromMat4;

},{}],169:[function(_dereq_,module,exports){
"use strict";function fromQuat(r,t){var u=t[0],o=t[1],e=t[2],a=t[3],f=u+u,m=o+o,n=e+e,s=u*f,c=o*f,i=o*m,Q=e*f,d=e*m,l=e*n,p=a*f,v=a*m,x=a*n;return r[0]=1-i-l,r[3]=c-x,r[6]=Q+v,r[1]=c+x,r[4]=1-s-l,r[7]=d-p,r[2]=Q-v,r[5]=d+p,r[8]=1-s-i,r}module.exports=fromQuat;

},{}],170:[function(_dereq_,module,exports){
"use strict";function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}module.exports=identity;

},{}],171:[function(_dereq_,module,exports){
"use strict";module.exports={adjoint:_dereq_("./adjoint"),clone:_dereq_("./clone"),copy:_dereq_("./copy"),create:_dereq_("./create"),determinant:_dereq_("./determinant"),frob:_dereq_("./frob"),fromMat2:_dereq_("./from-mat2"),fromMat4:_dereq_("./from-mat4"),fromQuat:_dereq_("./from-quat"),identity:_dereq_("./identity"),invert:_dereq_("./invert"),multiply:_dereq_("./multiply"),normalFromMat4:_dereq_("./normal-from-mat4"),rotate:_dereq_("./rotate"),scale:_dereq_("./scale"),str:_dereq_("./str"),translate:_dereq_("./translate"),transpose:_dereq_("./transpose")};

},{"./adjoint":161,"./clone":162,"./copy":163,"./create":164,"./determinant":165,"./frob":166,"./from-mat2":167,"./from-mat4":168,"./from-quat":169,"./identity":170,"./invert":172,"./multiply":173,"./normal-from-mat4":174,"./rotate":175,"./scale":176,"./str":177,"./translate":178,"./transpose":179}],172:[function(_dereq_,module,exports){
"use strict";function invert(r,t){var e=t[0],n=t[1],u=t[2],i=t[3],l=t[4],o=t[5],s=t[6],v=t[7],c=t[8],a=c*l-o*v,d=-c*i+o*s,f=v*i-l*s,m=e*a+n*d+u*f;return m?(m=1/m,r[0]=a*m,r[1]=(-c*n+u*v)*m,r[2]=(o*n-u*l)*m,r[3]=d*m,r[4]=(c*e-u*s)*m,r[5]=(-o*e+u*i)*m,r[6]=f*m,r[7]=(-v*e+n*s)*m,r[8]=(l*e-n*i)*m,r):null}module.exports=invert;

},{}],173:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){var r=u[0],e=u[1],i=u[2],m=u[3],n=u[4],o=u[5],p=u[6],s=u[7],c=u[8],y=l[0],a=l[1],d=l[2],f=l[3],v=l[4],x=l[5],b=l[6],g=l[7],h=l[8];return t[0]=y*r+a*m+d*p,t[1]=y*e+a*n+d*s,t[2]=y*i+a*o+d*c,t[3]=f*r+v*m+x*p,t[4]=f*e+v*n+x*s,t[5]=f*i+v*o+x*c,t[6]=b*r+g*m+h*p,t[7]=b*e+g*n+h*s,t[8]=b*i+g*o+h*c,t}module.exports=multiply;

},{}],174:[function(_dereq_,module,exports){
"use strict";function normalFromMat4(r,o){var t=o[0],n=o[1],a=o[2],l=o[3],m=o[4],u=o[5],e=o[6],s=o[7],c=o[8],i=o[9],F=o[10],M=o[11],d=o[12],f=o[13],p=o[14],v=o[15],x=t*u-n*m,b=t*e-a*m,g=t*s-l*m,h=n*e-a*u,j=n*s-l*u,k=a*s-l*e,q=c*f-i*d,w=c*p-F*d,y=c*v-M*d,z=i*p-F*f,A=i*v-M*f,B=F*v-M*p,C=x*B-b*A+g*z+h*y-j*w+k*q;return C?(C=1/C,r[0]=(u*B-e*A+s*z)*C,r[1]=(e*y-m*B-s*w)*C,r[2]=(m*A-u*y+s*q)*C,r[3]=(a*A-n*B-l*z)*C,r[4]=(t*B-a*y+l*w)*C,r[5]=(n*y-t*A-l*q)*C,r[6]=(f*k-p*j+v*h)*C,r[7]=(p*g-d*k-v*b)*C,r[8]=(d*j-f*g+v*x)*C,r):null}module.exports=normalFromMat4;

},{}],175:[function(_dereq_,module,exports){
"use strict";function rotate(t,r,e){var o=r[0],a=r[1],s=r[2],n=r[3],u=r[4],c=r[5],i=r[6],h=r[7],M=r[8],d=Math.sin(e),f=Math.cos(e);return t[0]=f*o+d*n,t[1]=f*a+d*u,t[2]=f*s+d*c,t[3]=f*n-d*o,t[4]=f*u-d*a,t[5]=f*c-d*s,t[6]=i,t[7]=h,t[8]=M,t}module.exports=rotate;

},{}],176:[function(_dereq_,module,exports){
"use strict";function scale(e,r,s){var t=s[0],c=s[1];return e[0]=t*r[0],e[1]=t*r[1],e[2]=t*r[2],e[3]=c*r[3],e[4]=c*r[4],e[5]=c*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}module.exports=scale;

},{}],177:[function(_dereq_,module,exports){
"use strict";function str(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}module.exports=str;

},{}],178:[function(_dereq_,module,exports){
"use strict";function translate(t,r,e){var a=r[0],n=r[1],s=r[2],u=r[3],l=r[4],o=r[5],c=r[6],i=r[7],d=r[8],f=e[0],m=e[1];return t[0]=a,t[1]=n,t[2]=s,t[3]=u,t[4]=l,t[5]=o,t[6]=f*a+m*u+c,t[7]=f*n+m*l+i,t[8]=f*s+m*o+d,t}module.exports=translate;

},{}],179:[function(_dereq_,module,exports){
"use strict";function transpose(e,s){if(e===s){var r=s[1],t=s[2],n=s[5];e[1]=s[3],e[2]=s[6],e[3]=r,e[5]=s[7],e[6]=t,e[7]=n}else e[0]=s[0],e[1]=s[3],e[2]=s[6],e[3]=s[1],e[4]=s[4],e[5]=s[7],e[6]=s[2],e[7]=s[5],e[8]=s[8];return e}module.exports=transpose;

},{}],180:[function(_dereq_,module,exports){
"use strict";function adjoint(t,n){var o=n[0],r=n[1],e=n[2],i=n[3],u=n[4],a=n[5],d=n[6],s=n[7],c=n[8],j=n[9],f=n[10],l=n[11],m=n[12],p=n[13],v=n[14],x=n[15];return t[0]=a*(f*x-l*v)-j*(d*x-s*v)+p*(d*l-s*f),t[1]=-(r*(f*x-l*v)-j*(e*x-i*v)+p*(e*l-i*f)),t[2]=r*(d*x-s*v)-a*(e*x-i*v)+p*(e*s-i*d),t[3]=-(r*(d*l-s*f)-a*(e*l-i*f)+j*(e*s-i*d)),t[4]=-(u*(f*x-l*v)-c*(d*x-s*v)+m*(d*l-s*f)),t[5]=o*(f*x-l*v)-c*(e*x-i*v)+m*(e*l-i*f),t[6]=-(o*(d*x-s*v)-u*(e*x-i*v)+m*(e*s-i*d)),t[7]=o*(d*l-s*f)-u*(e*l-i*f)+c*(e*s-i*d),t[8]=u*(j*x-l*p)-c*(a*x-s*p)+m*(a*l-s*j),t[9]=-(o*(j*x-l*p)-c*(r*x-i*p)+m*(r*l-i*j)),t[10]=o*(a*x-s*p)-u*(r*x-i*p)+m*(r*s-i*a),t[11]=-(o*(a*l-s*j)-u*(r*l-i*j)+c*(r*s-i*a)),t[12]=-(u*(j*v-f*p)-c*(a*v-d*p)+m*(a*f-d*j)),t[13]=o*(j*v-f*p)-c*(r*v-e*p)+m*(r*f-e*j),t[14]=-(o*(a*v-d*p)-u*(r*v-e*p)+m*(r*d-e*a)),t[15]=o*(a*f-d*j)-u*(r*f-e*j)+c*(r*d-e*a),t}module.exports=adjoint;

},{}],181:[function(_dereq_,module,exports){
"use strict";function clone(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}module.exports=clone;

},{}],182:[function(_dereq_,module,exports){
"use strict";function copy(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}module.exports=copy;

},{}],183:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}module.exports=create;

},{}],184:[function(_dereq_,module,exports){
"use strict";function determinant(t){var e=t[0],n=t[1],r=t[2],i=t[3],u=t[4],a=t[5],d=t[6],m=t[7],o=t[8],s=t[9],c=t[10],f=t[11],l=t[12],p=t[13],v=t[14],x=t[15];return(e*a-n*u)*(c*x-f*v)-(e*d-r*u)*(s*x-f*p)+(e*m-i*u)*(s*v-c*p)+(n*d-r*a)*(o*x-f*l)-(n*m-i*a)*(o*v-c*l)+(r*m-i*d)*(o*p-s*l)}module.exports=determinant;

},{}],185:[function(_dereq_,module,exports){
"use strict";function fromQuat(r,t){var u=t[0],o=t[1],e=t[2],a=t[3],f=u+u,m=o+o,n=e+e,s=u*f,c=o*f,i=o*m,Q=e*f,d=e*m,l=e*n,p=a*f,v=a*m,x=a*n;return r[0]=1-i-l,r[1]=c+x,r[2]=Q-v,r[3]=0,r[4]=c-x,r[5]=1-s-l,r[6]=d+p,r[7]=0,r[8]=Q+v,r[9]=d-p,r[10]=1-s-i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}module.exports=fromQuat;

},{}],186:[function(_dereq_,module,exports){
"use strict";function fromRotationTranslation(o,t,n){var r=t[0],a=t[1],i=t[2],s=t[3],e=r+r,u=a+a,f=i+i,l=r*e,m=r*u,c=r*f,R=a*u,T=a*f,d=i*f,p=s*e,v=s*u,x=s*f;return o[0]=1-(R+d),o[1]=m+x,o[2]=c-v,o[3]=0,o[4]=m-x,o[5]=1-(l+d),o[6]=T+p,o[7]=0,o[8]=c+v,o[9]=T-p,o[10]=1-(l+R),o[11]=0,o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=1,o}module.exports=fromRotationTranslation;

},{}],187:[function(_dereq_,module,exports){
"use strict";function frustum(u,r,t,s,e,f,m){var n=1/(t-r),o=1/(e-s),c=1/(f-m);return u[0]=2*f*n,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*f*o,u[6]=0,u[7]=0,u[8]=(t+r)*n,u[9]=(e+s)*o,u[10]=(m+f)*c,u[11]=-1,u[12]=0,u[13]=0,u[14]=m*f*2*c,u[15]=0,u}module.exports=frustum;

},{}],188:[function(_dereq_,module,exports){
"use strict";function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}module.exports=identity;

},{}],189:[function(_dereq_,module,exports){
"use strict";module.exports={create:_dereq_("./create"),clone:_dereq_("./clone"),copy:_dereq_("./copy"),identity:_dereq_("./identity"),transpose:_dereq_("./transpose"),invert:_dereq_("./invert"),adjoint:_dereq_("./adjoint"),determinant:_dereq_("./determinant"),multiply:_dereq_("./multiply"),translate:_dereq_("./translate"),scale:_dereq_("./scale"),rotate:_dereq_("./rotate"),rotateX:_dereq_("./rotateX"),rotateY:_dereq_("./rotateY"),rotateZ:_dereq_("./rotateZ"),fromRotationTranslation:_dereq_("./fromRotationTranslation"),fromQuat:_dereq_("./fromQuat"),frustum:_dereq_("./frustum"),perspective:_dereq_("./perspective"),perspectiveFromFieldOfView:_dereq_("./perspectiveFromFieldOfView"),ortho:_dereq_("./ortho"),lookAt:_dereq_("./lookAt"),str:_dereq_("./str")};

},{"./adjoint":180,"./clone":181,"./copy":182,"./create":183,"./determinant":184,"./fromQuat":185,"./fromRotationTranslation":186,"./frustum":187,"./identity":188,"./invert":190,"./lookAt":191,"./multiply":192,"./ortho":193,"./perspective":194,"./perspectiveFromFieldOfView":195,"./rotate":196,"./rotateX":197,"./rotateY":198,"./rotateZ":199,"./scale":200,"./str":201,"./translate":202,"./transpose":203}],190:[function(_dereq_,module,exports){
"use strict";function invert(r,t){var e=t[0],n=t[1],u=t[2],i=t[3],l=t[4],o=t[5],s=t[6],v=t[7],c=t[8],a=t[9],d=t[10],f=t[11],m=t[12],p=t[13],x=t[14],b=t[15],g=e*o-n*l,h=e*s-u*l,j=e*v-i*l,k=n*s-u*o,q=n*v-i*o,w=u*v-i*s,y=c*p-a*m,z=c*x-d*m,A=c*b-f*m,B=a*x-d*p,C=a*b-f*p,D=d*b-f*x,E=g*D-h*C+j*B+k*A-q*z+w*y;return E?(E=1/E,r[0]=(o*D-s*C+v*B)*E,r[1]=(u*C-n*D-i*B)*E,r[2]=(p*w-x*q+b*k)*E,r[3]=(d*q-a*w-f*k)*E,r[4]=(s*A-l*D-v*z)*E,r[5]=(e*D-u*A+i*z)*E,r[6]=(x*j-m*w-b*h)*E,r[7]=(c*w-d*j+f*h)*E,r[8]=(l*C-o*A+v*y)*E,r[9]=(n*A-e*C-i*y)*E,r[10]=(m*q-p*j+b*g)*E,r[11]=(a*j-c*q-f*g)*E,r[12]=(o*z-l*B-s*y)*E,r[13]=(e*B-n*z+u*y)*E,r[14]=(p*h-m*k-x*g)*E,r[15]=(c*k-a*h+d*g)*E,r):null}module.exports=invert;

},{}],191:[function(_dereq_,module,exports){
"use strict";function lookAt(t,e,a,r){var i,s,o,h,n,M,u,d,q,b,l=e[0],y=e[1],c=e[2],k=r[0],v=r[1],A=r[2],f=a[0],m=a[1],p=a[2];return Math.abs(l-f)<1e-6&&Math.abs(y-m)<1e-6&&Math.abs(c-p)<1e-6?identity(t):(u=l-f,d=y-m,q=c-p,b=1/Math.sqrt(u*u+d*d+q*q),u*=b,d*=b,q*=b,i=v*q-A*d,s=A*u-k*q,o=k*d-v*u,b=Math.sqrt(i*i+s*s+o*o),b?(b=1/b,i*=b,s*=b,o*=b):(i=0,s=0,o=0),h=d*o-q*s,n=q*i-u*o,M=u*s-d*i,b=Math.sqrt(h*h+n*n+M*M),b?(b=1/b,h*=b,n*=b,M*=b):(h=0,n=0,M=0),t[0]=i,t[1]=h,t[2]=u,t[3]=0,t[4]=s,t[5]=n,t[6]=d,t[7]=0,t[8]=o,t[9]=M,t[10]=q,t[11]=0,t[12]=-(i*l+s*y+o*c),t[13]=-(h*l+n*y+M*c),t[14]=-(u*l+d*y+q*c),t[15]=1,t)}var identity=_dereq_("./identity");module.exports=lookAt;

},{"./identity":188}],192:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){var r=u[0],e=u[1],i=u[2],m=u[3],n=u[4],o=u[5],p=u[6],s=u[7],c=u[8],y=u[9],a=u[10],d=u[11],f=u[12],v=u[13],x=u[14],b=u[15],g=l[0],h=l[1],j=l[2],k=l[3];return t[0]=g*r+h*n+j*c+k*f,t[1]=g*e+h*o+j*y+k*v,t[2]=g*i+h*p+j*a+k*x,t[3]=g*m+h*s+j*d+k*b,g=l[4],h=l[5],j=l[6],k=l[7],t[4]=g*r+h*n+j*c+k*f,t[5]=g*e+h*o+j*y+k*v,t[6]=g*i+h*p+j*a+k*x,t[7]=g*m+h*s+j*d+k*b,g=l[8],h=l[9],j=l[10],k=l[11],t[8]=g*r+h*n+j*c+k*f,t[9]=g*e+h*o+j*y+k*v,t[10]=g*i+h*p+j*a+k*x,t[11]=g*m+h*s+j*d+k*b,g=l[12],h=l[13],j=l[14],k=l[15],t[12]=g*r+h*n+j*c+k*f,t[13]=g*e+h*o+j*y+k*v,t[14]=g*i+h*p+j*a+k*x,t[15]=g*m+h*s+j*d+k*b,t}module.exports=multiply;

},{}],193:[function(_dereq_,module,exports){
"use strict";function ortho(o,r,t,e,u,n,s){var c=1/(r-t),h=1/(e-u),i=1/(n-s);return o[0]=-2*c,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*h,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*i,o[11]=0,o[12]=(r+t)*c,o[13]=(u+e)*h,o[14]=(s+n)*i,o[15]=1,o}module.exports=ortho;

},{}],194:[function(_dereq_,module,exports){
"use strict";function perspective(e,t,r,p,s){var c=1/Math.tan(t/2),i=1/(p-s);return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+p)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*p*i,e[15]=0,e}module.exports=perspective;

},{}],195:[function(_dereq_,module,exports){
"use strict";function perspectiveFromFieldOfView(e,t,r,a){var h=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),n=Math.tan(t.rightDegrees*Math.PI/180),M=2/(s+n),o=2/(h+i);return e[0]=M,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=-(s-n)*M*.5,e[9]=(h-i)*o*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e}module.exports=perspectiveFromFieldOfView;

},{}],196:[function(_dereq_,module,exports){
"use strict";function rotate(t,a,r,e){var s,o,n,u,h,M,c,i,l,b,d,f,m,p,q,v,x,g,j,k,w,y,z,A,B=e[0],C=e[1],D=e[2],E=Math.sqrt(B*B+C*C+D*D);return Math.abs(E)<1e-6?null:(E=1/E,B*=E,C*=E,D*=E,s=Math.sin(r),o=Math.cos(r),n=1-o,u=a[0],h=a[1],M=a[2],c=a[3],i=a[4],l=a[5],b=a[6],d=a[7],f=a[8],m=a[9],p=a[10],q=a[11],v=B*B*n+o,x=C*B*n+D*s,g=D*B*n-C*s,j=B*C*n-D*s,k=C*C*n+o,w=D*C*n+B*s,y=B*D*n+C*s,z=C*D*n-B*s,A=D*D*n+o,t[0]=u*v+i*x+f*g,t[1]=h*v+l*x+m*g,t[2]=M*v+b*x+p*g,t[3]=c*v+d*x+q*g,t[4]=u*j+i*k+f*w,t[5]=h*j+l*k+m*w,t[6]=M*j+b*k+p*w,t[7]=c*j+d*k+q*w,t[8]=u*y+i*z+f*A,t[9]=h*y+l*z+m*A,t[10]=M*y+b*z+p*A,t[11]=c*y+d*z+q*A,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)}module.exports=rotate;

},{}],197:[function(_dereq_,module,exports){
"use strict";function rotateX(t,r,e){var o=Math.sin(e),a=Math.cos(e),s=r[4],n=r[5],u=r[6],c=r[7],i=r[8],h=r[9],M=r[10],X=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=s*a+i*o,t[5]=n*a+h*o,t[6]=u*a+M*o,t[7]=c*a+X*o,t[8]=i*a-s*o,t[9]=h*a-n*o,t[10]=M*a-u*o,t[11]=X*a-c*o,t}module.exports=rotateX;

},{}],198:[function(_dereq_,module,exports){
"use strict";function rotateY(t,r,e){var o=Math.sin(e),a=Math.cos(e),s=r[0],n=r[1],u=r[2],c=r[3],i=r[8],h=r[9],M=r[10],Y=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=s*a-i*o,t[1]=n*a-h*o,t[2]=u*a-M*o,t[3]=c*a-Y*o,t[8]=s*o+i*a,t[9]=n*o+h*a,t[10]=u*o+M*a,t[11]=c*o+Y*a,t}module.exports=rotateY;

},{}],199:[function(_dereq_,module,exports){
"use strict";function rotateZ(t,r,e){var o=Math.sin(e),a=Math.cos(e),s=r[0],n=r[1],u=r[2],c=r[3],i=r[4],h=r[5],M=r[6],Z=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=s*a+i*o,t[1]=n*a+h*o,t[2]=u*a+M*o,t[3]=c*a+Z*o,t[4]=i*a-s*o,t[5]=h*a-n*o,t[6]=M*a-u*o,t[7]=Z*a-c*o,t}module.exports=rotateZ;

},{}],200:[function(_dereq_,module,exports){
"use strict";function scale(e,r,s){var t=s[0],c=s[1],u=s[2];return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*c,e[5]=r[5]*c,e[6]=r[6]*c,e[7]=r[7]*c,e[8]=r[8]*u,e[9]=r[9]*u,e[10]=r[10]*u,e[11]=r[11]*u,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}module.exports=scale;

},{}],201:[function(_dereq_,module,exports){
"use strict";function str(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}module.exports=str;

},{}],202:[function(_dereq_,module,exports){
"use strict";function translate(t,r,e){var a,n,s,u,l,o,c,i,d,f,m,p,v=e[0],x=e[1],b=e[2];return r===t?(t[12]=r[0]*v+r[4]*x+r[8]*b+r[12],t[13]=r[1]*v+r[5]*x+r[9]*b+r[13],t[14]=r[2]*v+r[6]*x+r[10]*b+r[14],t[15]=r[3]*v+r[7]*x+r[11]*b+r[15]):(a=r[0],n=r[1],s=r[2],u=r[3],l=r[4],o=r[5],c=r[6],i=r[7],d=r[8],f=r[9],m=r[10],p=r[11],t[0]=a,t[1]=n,t[2]=s,t[3]=u,t[4]=l,t[5]=o,t[6]=c,t[7]=i,t[8]=d,t[9]=f,t[10]=m,t[11]=p,t[12]=a*v+l*x+d*b+r[12],t[13]=n*v+o*x+f*b+r[13],t[14]=s*v+c*x+m*b+r[14],t[15]=u*v+i*x+p*b+r[15]),t}module.exports=translate;

},{}],203:[function(_dereq_,module,exports){
"use strict";function transpose(e,s){if(e===s){var r=s[1],t=s[2],n=s[3],o=s[6],u=s[7],a=s[11];e[1]=s[4],e[2]=s[8],e[3]=s[12],e[4]=r,e[6]=s[9],e[7]=s[13],e[8]=t,e[9]=o,e[11]=s[14],e[12]=n,e[13]=u,e[14]=a}else e[0]=s[0],e[1]=s[4],e[2]=s[8],e[3]=s[12],e[4]=s[1],e[5]=s[5],e[6]=s[9],e[7]=s[13],e[8]=s[2],e[9]=s[6],e[10]=s[10],e[11]=s[14],e[12]=s[3],e[13]=s[7],e[14]=s[11],e[15]=s[15];return e}module.exports=transpose;

},{}],204:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/add");

},{"gl-vec4/add":293}],205:[function(_dereq_,module,exports){
"use strict";function calculateW(t,a){var c=a[0],e=a[1],r=a[2];return t[0]=c,t[1]=e,t[2]=r,t[3]=Math.sqrt(Math.abs(1-c*c-e*e-r*r)),t}module.exports=calculateW;

},{}],206:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/clone");

},{"gl-vec4/clone":294}],207:[function(_dereq_,module,exports){
"use strict";function conjugate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}module.exports=conjugate;

},{}],208:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/copy");

},{"gl-vec4/copy":295}],209:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}module.exports=create;

},{}],210:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/dot");

},{"gl-vec4/dot":299}],211:[function(_dereq_,module,exports){
"use strict";function fromMat3(r,t){var a,e=t[0]+t[4]+t[8];if(e>0)a=Math.sqrt(e+1),r[3]=.5*a,a=.5/a,r[0]=(t[5]-t[7])*a,r[1]=(t[6]-t[2])*a,r[2]=(t[1]-t[3])*a;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var o=(s+1)%3,f=(s+2)%3;a=Math.sqrt(t[3*s+s]-t[3*o+o]-t[3*f+f]+1),r[s]=.5*a,a=.5/a,r[3]=(t[3*o+f]-t[3*f+o])*a,r[o]=(t[3*o+s]+t[3*s+o])*a,r[f]=(t[3*f+s]+t[3*s+f])*a}return r}module.exports=fromMat3;

},{}],212:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/fromValues");

},{"gl-vec4/fromValues":300}],213:[function(_dereq_,module,exports){
"use strict";function identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}module.exports=identity;

},{}],214:[function(_dereq_,module,exports){
"use strict";module.exports={add:_dereq_("./add"),calculateW:_dereq_("./calculateW"),clone:_dereq_("./clone"),conjugate:_dereq_("./conjugate"),copy:_dereq_("./copy"),create:_dereq_("./create"),dot:_dereq_("./dot"),fromMat3:_dereq_("./fromMat3"),fromValues:_dereq_("./fromValues"),identity:_dereq_("./identity"),invert:_dereq_("./invert"),length:_dereq_("./length"),lerp:_dereq_("./lerp"),multiply:_dereq_("./multiply"),normalize:_dereq_("./normalize"),rotateX:_dereq_("./rotateX"),rotateY:_dereq_("./rotateY"),rotateZ:_dereq_("./rotateZ"),rotationTo:_dereq_("./rotationTo"),scale:_dereq_("./scale"),set:_dereq_("./set"),setAxes:_dereq_("./setAxes"),setAxisAngle:_dereq_("./setAxisAngle"),slerp:_dereq_("./slerp"),sqlerp:_dereq_("./sqlerp"),squaredLength:_dereq_("./squaredLength")};

},{"./add":204,"./calculateW":205,"./clone":206,"./conjugate":207,"./copy":208,"./create":209,"./dot":210,"./fromMat3":211,"./fromValues":212,"./identity":213,"./invert":215,"./length":216,"./lerp":217,"./multiply":218,"./normalize":219,"./rotateX":220,"./rotateY":221,"./rotateZ":222,"./rotationTo":223,"./scale":224,"./set":225,"./setAxes":226,"./setAxisAngle":227,"./slerp":228,"./sqlerp":229,"./squaredLength":230}],215:[function(_dereq_,module,exports){
"use strict";function invert(r,t){var e=t[0],n=t[1],i=t[2],u=t[3],o=e*e+n*n+i*i+u*u,s=o?1/o:0;return r[0]=-e*s,r[1]=-n*s,r[2]=-i*s,r[3]=u*s,r}module.exports=invert;

},{}],216:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/length");

},{"gl-vec4/length":303}],217:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/lerp");

},{"gl-vec4/lerp":304}],218:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){var r=u[0],e=u[1],i=u[2],m=u[3],n=l[0],o=l[1],p=l[2],s=l[3];return t[0]=r*s+m*n+e*p-i*o,t[1]=e*s+m*o+i*n-r*p,t[2]=i*s+m*p+r*o-e*n,t[3]=m*s-r*n-e*o-i*p,t}module.exports=multiply;

},{}],219:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/normalize");

},{"gl-vec4/normalize":309}],220:[function(_dereq_,module,exports){
"use strict";function rotateX(t,r,e){e*=.5;var o=r[0],a=r[1],s=r[2],n=r[3],u=Math.sin(e),c=Math.cos(e);return t[0]=o*c+n*u,t[1]=a*c+s*u,t[2]=s*c-a*u,t[3]=n*c-o*u,t}module.exports=rotateX;

},{}],221:[function(_dereq_,module,exports){
"use strict";function rotateY(t,r,e){e*=.5;var o=r[0],a=r[1],s=r[2],n=r[3],u=Math.sin(e),c=Math.cos(e);return t[0]=o*c-s*u,t[1]=a*c+n*u,t[2]=s*c+o*u,t[3]=n*c-a*u,t}module.exports=rotateY;

},{}],222:[function(_dereq_,module,exports){
"use strict";function rotateZ(t,r,e){e*=.5;var o=r[0],a=r[1],s=r[2],n=r[3],u=Math.sin(e),c=Math.cos(e);return t[0]=o*c+a*u,t[1]=a*c-o*u,t[2]=s*c+n*u,t[3]=n*c-s*u,t}module.exports=rotateZ;

},{}],223:[function(_dereq_,module,exports){
"use strict";function rotationTo(e,t,c){var r=vecDot(t,c);return r<-.999999?(vecCross(tmpvec3,xUnitVec3,t),vecLength(tmpvec3)<1e-6&&vecCross(tmpvec3,yUnitVec3,t),vecNormalize(tmpvec3,tmpvec3),quatAxisAngle(e,tmpvec3,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(vecCross(tmpvec3,t,c),e[0]=tmpvec3[0],e[1]=tmpvec3[1],e[2]=tmpvec3[2],e[3]=1+r,quatNormalize(e,e))}var vecDot=_dereq_("gl-vec3/dot"),vecCross=_dereq_("gl-vec3/cross"),vecLength=_dereq_("gl-vec3/length"),vecNormalize=_dereq_("gl-vec3/normalize"),quatNormalize=_dereq_("./normalize"),quatAxisAngle=_dereq_("./setAxisAngle");module.exports=rotationTo;var tmpvec3=[0,0,0],xUnitVec3=[1,0,0],yUnitVec3=[0,1,0];

},{"./normalize":219,"./setAxisAngle":227,"gl-vec3/cross":265,"gl-vec3/dot":268,"gl-vec3/length":273,"gl-vec3/normalize":279}],224:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/scale");

},{"gl-vec4/scale":311}],225:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/set");

},{"gl-vec4/set":313}],226:[function(_dereq_,module,exports){
"use strict";function setAxes(r,t,a,e){return matr[0]=a[0],matr[3]=a[1],matr[6]=a[2],matr[1]=e[0],matr[4]=e[1],matr[7]=e[2],matr[2]=-t[0],matr[5]=-t[1],matr[8]=-t[2],normalize(r,fromMat3(r,matr))}var mat3create=_dereq_("gl-mat3/create"),fromMat3=_dereq_("./fromMat3"),normalize=_dereq_("./normalize");module.exports=setAxes;var matr=mat3create();

},{"./fromMat3":211,"./normalize":219,"gl-mat3/create":164}],227:[function(_dereq_,module,exports){
"use strict";function setAxisAngle(s,t,e){e*=.5;var n=Math.sin(e);return s[0]=n*t[0],s[1]=n*t[1],s[2]=n*t[2],s[3]=Math.cos(e),s}module.exports=setAxisAngle;

},{}],228:[function(_dereq_,module,exports){
"use strict";function slerp(s,t,e,r){var a,n,i,h,o,u=t[0],M=t[1],c=t[2],l=t[3],p=e[0],d=e[1],f=e[2],m=e[3];return n=u*p+M*d+c*f+l*m,n<0&&(n=-n,p=-p,d=-d,f=-f,m=-m),1-n>1e-6?(a=Math.acos(n),i=Math.sin(a),h=Math.sin((1-r)*a)/i,o=Math.sin(r*a)/i):(h=1-r,o=r),s[0]=h*u+o*p,s[1]=h*M+o*d,s[2]=h*c+o*f,s[3]=h*l+o*m,s}module.exports=slerp;

},{}],229:[function(_dereq_,module,exports){
"use strict";function sqlerp(e,r,p,t,s,l){return slerp(temp1,r,s,l),slerp(temp2,p,t,l),slerp(e,temp1,temp2,2*l*(1-l)),e}var slerp=_dereq_("./slerp");module.exports=sqlerp;var temp1=[0,0,0,1],temp2=[0,0,0,1];

},{"./slerp":228}],230:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("gl-vec4/squaredLength");

},{"gl-vec4/squaredLength":315}],231:[function(_dereq_,module,exports){
"use strict";function add(d,t,e){return d[0]=t[0]+e[0],d[1]=t[1]+e[1],d}module.exports=add;

},{}],232:[function(_dereq_,module,exports){
"use strict";function clone(e){var r=new Float32Array(2);return r[0]=e[0],r[1]=e[1],r}module.exports=clone;

},{}],233:[function(_dereq_,module,exports){
"use strict";function copy(o,t){return o[0]=t[0],o[1]=t[1],o}module.exports=copy;

},{}],234:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}module.exports=create;

},{}],235:[function(_dereq_,module,exports){
"use strict";function cross(r,s,o){var t=s[0]*o[1]-s[1]*o[0];return r[0]=r[1]=0,r[2]=t,r}module.exports=cross;

},{}],236:[function(_dereq_,module,exports){
"use strict";function distance(t,e){var r=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(r*r+s*s)}module.exports=distance;

},{}],237:[function(_dereq_,module,exports){
"use strict";function divide(e,i,d){return e[0]=i[0]/d[0],e[1]=i[1]/d[1],e}module.exports=divide;

},{}],238:[function(_dereq_,module,exports){
"use strict";function dot(t,o){return t[0]*o[0]+t[1]*o[1]}module.exports=dot;

},{}],239:[function(_dereq_,module,exports){
"use strict";function forEach(e,c,r,t,v,a){var n,o;for(c||(c=2),r||(r=0),o=t?Math.min(t*c+r,e.length):e.length,n=r;n<o;n+=c)vec[0]=e[n],vec[1]=e[n+1],v(vec,vec,a),e[n]=vec[0],e[n+1]=vec[1];return e}module.exports=forEach;var vec=_dereq_("./create")();

},{"./create":234}],240:[function(_dereq_,module,exports){
"use strict";function fromValues(r,e){var o=new Float32Array(2);return o[0]=r,o[1]=e,o}module.exports=fromValues;

},{}],241:[function(_dereq_,module,exports){
"use strict";module.exports={create:_dereq_("./create"),clone:_dereq_("./clone"),fromValues:_dereq_("./fromValues"),copy:_dereq_("./copy"),set:_dereq_("./set"),add:_dereq_("./add"),subtract:_dereq_("./subtract"),multiply:_dereq_("./multiply"),divide:_dereq_("./divide"),min:_dereq_("./min"),max:_dereq_("./max"),scale:_dereq_("./scale"),scaleAndAdd:_dereq_("./scaleAndAdd"),distance:_dereq_("./distance"),squaredDistance:_dereq_("./squaredDistance"),length:_dereq_("./length"),squaredLength:_dereq_("./squaredLength"),negate:_dereq_("./negate"),normalize:_dereq_("./normalize"),dot:_dereq_("./dot"),cross:_dereq_("./cross"),lerp:_dereq_("./lerp"),random:_dereq_("./random"),transformMat2:_dereq_("./transformMat2"),transformMat2d:_dereq_("./transformMat2d"),transformMat3:_dereq_("./transformMat3"),transformMat4:_dereq_("./transformMat4"),forEach:_dereq_("./forEach")};

},{"./add":231,"./clone":232,"./copy":233,"./create":234,"./cross":235,"./distance":236,"./divide":237,"./dot":238,"./forEach":239,"./fromValues":240,"./length":242,"./lerp":243,"./max":244,"./min":245,"./multiply":246,"./negate":247,"./normalize":248,"./random":249,"./scale":250,"./scaleAndAdd":251,"./set":252,"./squaredDistance":253,"./squaredLength":254,"./subtract":255,"./transformMat2":256,"./transformMat2d":257,"./transformMat3":258,"./transformMat4":259}],242:[function(_dereq_,module,exports){
"use strict";function length(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}module.exports=length;

},{}],243:[function(_dereq_,module,exports){
"use strict";function lerp(r,e,t,u){var l=e[0],n=e[1];return r[0]=l+u*(t[0]-l),r[1]=n+u*(t[1]-n),r}module.exports=lerp;

},{}],244:[function(_dereq_,module,exports){
"use strict";function max(t,a,m){return t[0]=Math.max(a[0],m[0]),t[1]=Math.max(a[1],m[1]),t}module.exports=max;

},{}],245:[function(_dereq_,module,exports){
"use strict";function min(n,t,i){return n[0]=Math.min(t[0],i[0]),n[1]=Math.min(t[1],i[1]),n}module.exports=min;

},{}],246:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){return t[0]=u[0]*l[0],t[1]=u[1]*l[1],t}module.exports=multiply;

},{}],247:[function(_dereq_,module,exports){
"use strict";function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}module.exports=negate;

},{}],248:[function(_dereq_,module,exports){
"use strict";function normalize(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o),r[0]=t[0]*o,r[1]=t[1]*o),r}module.exports=normalize;

},{}],249:[function(_dereq_,module,exports){
"use strict";function random(t,a){a=a||1;var r=2*Math.random()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t}module.exports=random;

},{}],250:[function(_dereq_,module,exports){
"use strict";function scale(e,s,t){return e[0]=s[0]*t,e[1]=s[1]*t,e}module.exports=scale;

},{}],251:[function(_dereq_,module,exports){
"use strict";function scaleAndAdd(d,e,n,s){return d[0]=e[0]+n[0]*s,d[1]=e[1]+n[1]*s,d}module.exports=scaleAndAdd;

},{}],252:[function(_dereq_,module,exports){
"use strict";function set(t,e,s){return t[0]=e,t[1]=s,t}module.exports=set;

},{}],253:[function(_dereq_,module,exports){
"use strict";function squaredDistance(e,r){var s=r[0]-e[0],t=r[1]-e[1];return s*s+t*t}module.exports=squaredDistance;

},{}],254:[function(_dereq_,module,exports){
"use strict";function squaredLength(e){var r=e[0],t=e[1];return r*r+t*t}module.exports=squaredLength;

},{}],255:[function(_dereq_,module,exports){
"use strict";function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t}module.exports=subtract;

},{}],256:[function(_dereq_,module,exports){
"use strict";function transformMat2(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[2]*o,r[1]=a[1]*n+a[3]*o,r}module.exports=transformMat2;

},{}],257:[function(_dereq_,module,exports){
"use strict";function transformMat2d(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[2]*o+a[4],r[1]=a[1]*n+a[3]*o+a[5],r}module.exports=transformMat2d;

},{}],258:[function(_dereq_,module,exports){
"use strict";function transformMat3(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[3]*o+a[6],r[1]=a[1]*n+a[4]*o+a[7],r}module.exports=transformMat3;

},{}],259:[function(_dereq_,module,exports){
"use strict";function transformMat4(r,t,a){var n=t[0],o=t[1];return r[0]=a[0]*n+a[4]*o+a[12],r[1]=a[1]*n+a[5]*o+a[13],r}module.exports=transformMat4;

},{}],260:[function(_dereq_,module,exports){
"use strict";function add(d,t,e){return d[0]=t[0]+e[0],d[1]=t[1]+e[1],d[2]=t[2]+e[2],d}module.exports=add;

},{}],261:[function(_dereq_,module,exports){
"use strict";function angle(r,e){var a=fromValues(r[0],r[1],r[2]),o=fromValues(e[0],e[1],e[2]);normalize(a,a),normalize(o,o);var l=dot(a,o);return l>1?0:Math.acos(l)}module.exports=angle;var fromValues=_dereq_("./fromValues"),normalize=_dereq_("./normalize"),dot=_dereq_("./dot");

},{"./dot":268,"./fromValues":270,"./normalize":279}],262:[function(_dereq_,module,exports){
"use strict";function clone(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}module.exports=clone;

},{}],263:[function(_dereq_,module,exports){
"use strict";function copy(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o}module.exports=copy;

},{}],264:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}module.exports=create;

},{}],265:[function(_dereq_,module,exports){
"use strict";function cross(r,s,o){var t=s[0],c=s[1],e=s[2],u=o[0],n=o[1],i=o[2];return r[0]=c*i-e*n,r[1]=e*u-t*i,r[2]=t*n-c*u,r}module.exports=cross;

},{}],266:[function(_dereq_,module,exports){
"use strict";function distance(t,e){var r=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+s*s+n*n)}module.exports=distance;

},{}],267:[function(_dereq_,module,exports){
"use strict";function divide(e,i,d){return e[0]=i[0]/d[0],e[1]=i[1]/d[1],e[2]=i[2]/d[2],e}module.exports=divide;

},{}],268:[function(_dereq_,module,exports){
"use strict";function dot(t,o){return t[0]*o[0]+t[1]*o[1]+t[2]*o[2]}module.exports=dot;

},{}],269:[function(_dereq_,module,exports){
"use strict";function forEach(e,c,r,v,t,a){var n,o;for(c||(c=3),r||(r=0),o=v?Math.min(v*c+r,e.length):e.length,n=r;n<o;n+=c)vec[0]=e[n],vec[1]=e[n+1],vec[2]=e[n+2],t(vec,vec,a),e[n]=vec[0],e[n+1]=vec[1],e[n+2]=vec[2];return e}module.exports=forEach;var vec=_dereq_("./create")();

},{"./create":264}],270:[function(_dereq_,module,exports){
"use strict";function fromValues(r,e,o){var t=new Float32Array(3);return t[0]=r,t[1]=e,t[2]=o,t}module.exports=fromValues;

},{}],271:[function(_dereq_,module,exports){
"use strict";module.exports={create:_dereq_("./create"),clone:_dereq_("./clone"),angle:_dereq_("./angle"),fromValues:_dereq_("./fromValues"),copy:_dereq_("./copy"),set:_dereq_("./set"),add:_dereq_("./add"),subtract:_dereq_("./subtract"),multiply:_dereq_("./multiply"),divide:_dereq_("./divide"),min:_dereq_("./min"),max:_dereq_("./max"),scale:_dereq_("./scale"),scaleAndAdd:_dereq_("./scaleAndAdd"),distance:_dereq_("./distance"),squaredDistance:_dereq_("./squaredDistance"),length:_dereq_("./length"),squaredLength:_dereq_("./squaredLength"),negate:_dereq_("./negate"),inverse:_dereq_("./inverse"),normalize:_dereq_("./normalize"),dot:_dereq_("./dot"),cross:_dereq_("./cross"),lerp:_dereq_("./lerp"),random:_dereq_("./random"),transformMat4:_dereq_("./transformMat4"),transformMat3:_dereq_("./transformMat3"),transformQuat:_dereq_("./transformQuat"),rotateX:_dereq_("./rotateX"),rotateY:_dereq_("./rotateY"),rotateZ:_dereq_("./rotateZ"),forEach:_dereq_("./forEach")};

},{"./add":260,"./angle":261,"./clone":262,"./copy":263,"./create":264,"./cross":265,"./distance":266,"./divide":267,"./dot":268,"./forEach":269,"./fromValues":270,"./inverse":272,"./length":273,"./lerp":274,"./max":275,"./min":276,"./multiply":277,"./negate":278,"./normalize":279,"./random":280,"./rotateX":281,"./rotateY":282,"./rotateZ":283,"./scale":284,"./scaleAndAdd":285,"./set":286,"./squaredDistance":287,"./squaredLength":288,"./subtract":289,"./transformMat3":290,"./transformMat4":291,"./transformQuat":292}],272:[function(_dereq_,module,exports){
"use strict";function inverse(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}module.exports=inverse;

},{}],273:[function(_dereq_,module,exports){
"use strict";function length(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}module.exports=length;

},{}],274:[function(_dereq_,module,exports){
"use strict";function lerp(r,e,t,u){var l=e[0],n=e[1],o=e[2];return r[0]=l+u*(t[0]-l),r[1]=n+u*(t[1]-n),r[2]=o+u*(t[2]-o),r}module.exports=lerp;

},{}],275:[function(_dereq_,module,exports){
"use strict";function max(a,t,m){return a[0]=Math.max(t[0],m[0]),a[1]=Math.max(t[1],m[1]),a[2]=Math.max(t[2],m[2]),a}module.exports=max;

},{}],276:[function(_dereq_,module,exports){
"use strict";function min(n,t,i){return n[0]=Math.min(t[0],i[0]),n[1]=Math.min(t[1],i[1]),n[2]=Math.min(t[2],i[2]),n}module.exports=min;

},{}],277:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){return t[0]=u[0]*l[0],t[1]=u[1]*l[1],t[2]=u[2]*l[2],t}module.exports=multiply;

},{}],278:[function(_dereq_,module,exports){
"use strict";function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}module.exports=negate;

},{}],279:[function(_dereq_,module,exports){
"use strict";function normalize(r,t){var e=t[0],n=t[1],o=t[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),r[0]=t[0]*a,r[1]=t[1]*a,r[2]=t[2]*a),r}module.exports=normalize;

},{}],280:[function(_dereq_,module,exports){
"use strict";function random(t,a){a=a||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,o=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*a,t}module.exports=random;

},{}],281:[function(_dereq_,module,exports){
"use strict";function rotateX(t,a,o,r){var s=[],e=[];return s[0]=a[0]-o[0],s[1]=a[1]-o[1],s[2]=a[2]-o[2],e[0]=s[0],e[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),e[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t}module.exports=rotateX;

},{}],282:[function(_dereq_,module,exports){
"use strict";function rotateY(t,a,o,r){var s=[],e=[];return s[0]=a[0]-o[0],s[1]=a[1]-o[1],s[2]=a[2]-o[2],e[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),e[1]=s[1],e[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t}module.exports=rotateY;

},{}],283:[function(_dereq_,module,exports){
"use strict";function rotateZ(t,a,o,r){var s=[],e=[];return s[0]=a[0]-o[0],s[1]=a[1]-o[1],s[2]=a[2]-o[2],e[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),e[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),e[2]=s[2],t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t}module.exports=rotateZ;

},{}],284:[function(_dereq_,module,exports){
"use strict";function scale(e,s,t){return e[0]=s[0]*t,e[1]=s[1]*t,e[2]=s[2]*t,e}module.exports=scale;

},{}],285:[function(_dereq_,module,exports){
"use strict";function scaleAndAdd(d,e,n,s){return d[0]=e[0]+n[0]*s,d[1]=e[1]+n[1]*s,d[2]=e[2]+n[2]*s,d}module.exports=scaleAndAdd;

},{}],286:[function(_dereq_,module,exports){
"use strict";function set(t,e,s,r){return t[0]=e,t[1]=s,t[2]=r,t}module.exports=set;

},{}],287:[function(_dereq_,module,exports){
"use strict";function squaredDistance(e,r){var s=r[0]-e[0],t=r[1]-e[1],u=r[2]-e[2];return s*s+t*t+u*u}module.exports=squaredDistance;

},{}],288:[function(_dereq_,module,exports){
"use strict";function squaredLength(e){var r=e[0],t=e[1],u=e[2];return r*r+t*t+u*u}module.exports=squaredLength;

},{}],289:[function(_dereq_,module,exports){
"use strict";function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t[2]=r[2]-u[2],t}module.exports=subtract;

},{}],290:[function(_dereq_,module,exports){
"use strict";function transformMat3(r,t,a){var n=t[0],o=t[1],s=t[2];return r[0]=n*a[0]+o*a[3]+s*a[6],r[1]=n*a[1]+o*a[4]+s*a[7],r[2]=n*a[2]+o*a[5]+s*a[8],r}module.exports=transformMat3;

},{}],291:[function(_dereq_,module,exports){
"use strict";function transformMat4(r,t,a){var n=t[0],o=t[1],s=t[2],e=a[3]*n+a[7]*o+a[11]*s+a[15];return e=e||1,r[0]=(a[0]*n+a[4]*o+a[8]*s+a[12])/e,r[1]=(a[1]*n+a[5]*o+a[9]*s+a[13])/e,r[2]=(a[2]*n+a[6]*o+a[10]*s+a[14])/e,r}module.exports=transformMat4;

},{}],292:[function(_dereq_,module,exports){
"use strict";function transformQuat(r,t,u){var a=t[0],n=t[1],o=t[2],s=u[0],e=u[1],f=u[2],m=u[3],c=m*a+e*o-f*n,i=m*n+f*a-s*o,Q=m*o+s*n-e*a,d=-s*a-e*n-f*o;return r[0]=c*m+d*-s+i*-f-Q*-e,r[1]=i*m+d*-e+Q*-s-c*-f,r[2]=Q*m+d*-f+c*-e-i*-s,r}module.exports=transformQuat;

},{}],293:[function(_dereq_,module,exports){
"use strict";function add(d,t,e){return d[0]=t[0]+e[0],d[1]=t[1]+e[1],d[2]=t[2]+e[2],d[3]=t[3]+e[3],d}module.exports=add;

},{}],294:[function(_dereq_,module,exports){
"use strict";function clone(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}module.exports=clone;

},{}],295:[function(_dereq_,module,exports){
"use strict";function copy(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o}module.exports=copy;

},{}],296:[function(_dereq_,module,exports){
"use strict";function create(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}module.exports=create;

},{}],297:[function(_dereq_,module,exports){
"use strict";function distance(t,e){var r=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+s*s+n*n+a*a)}module.exports=distance;

},{}],298:[function(_dereq_,module,exports){
"use strict";function divide(e,i,d){return e[0]=i[0]/d[0],e[1]=i[1]/d[1],e[2]=i[2]/d[2],e[3]=i[3]/d[3],e}module.exports=divide;

},{}],299:[function(_dereq_,module,exports){
"use strict";function dot(t,o){return t[0]*o[0]+t[1]*o[1]+t[2]*o[2]+t[3]*o[3]}module.exports=dot;

},{}],300:[function(_dereq_,module,exports){
"use strict";function fromValues(r,e,o,t){var u=new Float32Array(4);return u[0]=r,u[1]=e,u[2]=o,u[3]=t,u}module.exports=fromValues;

},{}],301:[function(_dereq_,module,exports){
"use strict";module.exports={create:_dereq_("./create"),clone:_dereq_("./clone"),fromValues:_dereq_("./fromValues"),copy:_dereq_("./copy"),set:_dereq_("./set"),add:_dereq_("./add"),subtract:_dereq_("./subtract"),multiply:_dereq_("./multiply"),divide:_dereq_("./divide"),min:_dereq_("./min"),max:_dereq_("./max"),scale:_dereq_("./scale"),scaleAndAdd:_dereq_("./scaleAndAdd"),distance:_dereq_("./distance"),squaredDistance:_dereq_("./squaredDistance"),length:_dereq_("./length"),squaredLength:_dereq_("./squaredLength"),negate:_dereq_("./negate"),inverse:_dereq_("./inverse"),normalize:_dereq_("./normalize"),dot:_dereq_("./dot"),lerp:_dereq_("./lerp"),random:_dereq_("./random"),transformMat4:_dereq_("./transformMat4"),transformQuat:_dereq_("./transformQuat")};

},{"./add":293,"./clone":294,"./copy":295,"./create":296,"./distance":297,"./divide":298,"./dot":299,"./fromValues":300,"./inverse":302,"./length":303,"./lerp":304,"./max":305,"./min":306,"./multiply":307,"./negate":308,"./normalize":309,"./random":310,"./scale":311,"./scaleAndAdd":312,"./set":313,"./squaredDistance":314,"./squaredLength":315,"./subtract":316,"./transformMat4":317,"./transformQuat":318}],302:[function(_dereq_,module,exports){
"use strict";function inverse(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}module.exports=inverse;

},{}],303:[function(_dereq_,module,exports){
"use strict";function length(t){var e=t[0],r=t[1],n=t[2],s=t[3];return Math.sqrt(e*e+r*r+n*n+s*s)}module.exports=length;

},{}],304:[function(_dereq_,module,exports){
"use strict";function lerp(r,e,t,u){var l=e[0],n=e[1],o=e[2],p=e[3];return r[0]=l+u*(t[0]-l),r[1]=n+u*(t[1]-n),r[2]=o+u*(t[2]-o),r[3]=p+u*(t[3]-p),r}module.exports=lerp;

},{}],305:[function(_dereq_,module,exports){
"use strict";function max(a,t,m){return a[0]=Math.max(t[0],m[0]),a[1]=Math.max(t[1],m[1]),a[2]=Math.max(t[2],m[2]),a[3]=Math.max(t[3],m[3]),a}module.exports=max;

},{}],306:[function(_dereq_,module,exports){
"use strict";function min(n,t,i){return n[0]=Math.min(t[0],i[0]),n[1]=Math.min(t[1],i[1]),n[2]=Math.min(t[2],i[2]),n[3]=Math.min(t[3],i[3]),n}module.exports=min;

},{}],307:[function(_dereq_,module,exports){
"use strict";function multiply(t,u,l){return t[0]=u[0]*l[0],t[1]=u[1]*l[1],t[2]=u[2]*l[2],t[3]=u[3]*l[3],t}module.exports=multiply;

},{}],308:[function(_dereq_,module,exports){
"use strict";function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}module.exports=negate;

},{}],309:[function(_dereq_,module,exports){
"use strict";function normalize(r,t){var e=t[0],n=t[1],o=t[2],a=t[3],i=e*e+n*n+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),r[0]=e*i,r[1]=n*i,r[2]=o*i,r[3]=a*i),r}module.exports=normalize;

},{}],310:[function(_dereq_,module,exports){
"use strict";function random(e,r){return r=r||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),vecNormalize(e,e),vecScale(e,e,r),e}var vecNormalize=_dereq_("./normalize"),vecScale=_dereq_("./scale");module.exports=random;

},{"./normalize":309,"./scale":311}],311:[function(_dereq_,module,exports){
"use strict";function scale(e,s,t){return e[0]=s[0]*t,e[1]=s[1]*t,e[2]=s[2]*t,e[3]=s[3]*t,e}module.exports=scale;

},{}],312:[function(_dereq_,module,exports){
"use strict";function scaleAndAdd(d,e,n,s){return d[0]=e[0]+n[0]*s,d[1]=e[1]+n[1]*s,d[2]=e[2]+n[2]*s,d[3]=e[3]+n[3]*s,d}module.exports=scaleAndAdd;

},{}],313:[function(_dereq_,module,exports){
"use strict";function set(t,e,s,r,u){return t[0]=e,t[1]=s,t[2]=r,t[3]=u,t}module.exports=set;

},{}],314:[function(_dereq_,module,exports){
"use strict";function squaredDistance(e,r){var s=r[0]-e[0],t=r[1]-e[1],u=r[2]-e[2],a=r[3]-e[3];return s*s+t*t+u*u+a*a}module.exports=squaredDistance;

},{}],315:[function(_dereq_,module,exports){
"use strict";function squaredLength(e){var r=e[0],t=e[1],u=e[2],n=e[3];return r*r+t*t+u*u+n*n}module.exports=squaredLength;

},{}],316:[function(_dereq_,module,exports){
"use strict";function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t[2]=r[2]-u[2],t[3]=r[3]-u[3],t}module.exports=subtract;

},{}],317:[function(_dereq_,module,exports){
"use strict";function transformMat4(r,t,a){var n=t[0],o=t[1],s=t[2],e=t[3];return r[0]=a[0]*n+a[4]*o+a[8]*s+a[12]*e,r[1]=a[1]*n+a[5]*o+a[9]*s+a[13]*e,r[2]=a[2]*n+a[6]*o+a[10]*s+a[14]*e,r[3]=a[3]*n+a[7]*o+a[11]*s+a[15]*e,r}module.exports=transformMat4;

},{}],318:[function(_dereq_,module,exports){
"use strict";function transformQuat(r,t,u){var a=t[0],n=t[1],o=t[2],s=u[0],e=u[1],f=u[2],m=u[3],c=m*a+e*o-f*n,i=m*n+f*a-s*o,Q=m*o+s*n-e*a,d=-s*a-e*n-f*o;return r[0]=c*m+d*-s+i*-f-Q*-e,r[1]=i*m+d*-e+Q*-s-c*-f,r[2]=Q*m+d*-f+c*-e-i*-s,r[3]=t[3],r}module.exports=transformQuat;

},{}],319:[function(_dereq_,module,exports){
(function (global){
"use strict";var win;win="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},module.exports=win;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],320:[function(_dereq_,module,exports){
"use strict";var tokenize=_dereq_("glsl-tokenizer"),stringify=_dereq_("glsl-token-string"),inject=_dereq_("glsl-token-inject-block");module.exports=function(e,r){if(!r)return e;var t=Object.keys(r);if(0===t.length)return e;for(var i=tokenize(e),n=t.length-1;n>=0;n--){var o=t[n],s=String(r[o]);s&&(s=" "+s),inject(i,{type:"preprocessor",data:"#define "+o+s})}return stringify(i)};

},{"glsl-token-inject-block":321,"glsl-token-string":322,"glsl-tokenizer":329}],321:[function(_dereq_,module,exports){
"use strict";function glslTokenInject(e,t){Array.isArray(t)||(t=[t]);var n=getStartIndex(e),r=n>0?e[n-1]:null;r&&regex.test(r.data)&&e.splice(n++,0,newline),e.splice.apply(e,[n,0].concat(t));var a=n+t.length;return e[a]&&/[^\r\n]$/.test(e[a].data)&&e.splice(a,0,newline),e}function getStartIndex(e){for(var t=-1,n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type)/^#(extension|version)/.test(r.data)&&(t=Math.max(t,n));else if("keyword"===r.type&&"precision"===r.data){var a=findNextSemicolon(e,n);if(-1===a)throw new Error("precision statement not followed by any semicolons!");t=Math.max(t,a)}}return t+1}function findNextSemicolon(e,t){for(var n=t;n<e.length;n++)if("operator"===e[n].type&&";"===e[n].data)return n;return-1}module.exports=glslTokenInject;var newline={data:"\n",type:"whitespace"},regex=/[^\r\n]$/;

},{}],322:[function(_dereq_,module,exports){
"use strict";function toString(t){for(var o=[],r=0;r<t.length;r++)"eof"!==t[r].type&&o.push(t[r].data);return o.join("")}module.exports=toString;

},{}],323:[function(_dereq_,module,exports){
"use strict";function tokenize(e){function t(e){e.length&&b.push({type:map[M],data:e,position:I,line:C,column:g})}function n(e){T=0,P+=e,p=P.length;for(var t;h=P[T],T<p;){switch(t=T,M){case BLOCK_COMMENT:T=l();break;case LINE_COMMENT:T=o();break;case PREPROCESSOR:T=u();break;case OPERATOR:T=O();break;case INTEGER:T=c();break;case HEX:T=E();break;case FLOAT:T=f();break;case TOKEN:T=N();break;case WHITESPACE:T=s();break;case NORMAL:T=i()}if(t!==T)switch(P[t]){case"\n":g=0,++C;break;default:++g}}return L+=T,P=P.slice(T),b}function r(e){return A.length&&t(A.join("")),M=EOF,t("(eof)"),b}function i(){return A=A.length?[]:A,"/"===R&&"*"===h?(I=L+T-1,M=BLOCK_COMMENT,R=h,T+1):"/"===R&&"/"===h?(I=L+T-1,M=LINE_COMMENT,R=h,T+1):"#"===h?(M=PREPROCESSOR,I=L+T,T):/\s/.test(h)?(M=WHITESPACE,I=L+T,T):(d=/\d/.test(h),k=/[^\w_]/.test(h),I=L+T,M=d?INTEGER:k?OPERATOR:TOKEN,T)}function s(){return/[^\s]/g.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function u(){return"\r"!==h&&"\n"!==h||"\\"===R?(A.push(h),R=h,T+1):(t(A.join("")),M=NORMAL,T)}function o(){return u()}function l(){return"/"===h&&"*"===R?(A.push(h),t(A.join("")),M=NORMAL,T+1):(A.push(h),R=h,T+1)}function O(){if("."===R&&/\d/.test(h))return M=FLOAT,T;if("/"===R&&"*"===h)return M=BLOCK_COMMENT,T;if("/"===R&&"/"===h)return M=LINE_COMMENT,T;if("."===h&&A.length){for(;a(A););return M=FLOAT,T}if(";"===h||")"===h||"("===h){if(A.length)for(;a(A););return t(h),M=NORMAL,T+1}var e=2===A.length&&"="!==h;if(/[\w_\d\s]/.test(h)||e){for(;a(A););return M=NORMAL,T}return A.push(h),R=h,T+1}function a(e){for(var n,r,i=0;;){if(n=operators.indexOf(e.slice(0,e.length+i).join("")),r=operators[n],-1===n){if(i--+e.length>0)continue;r=e.slice(0,1).join("")}return t(r),I+=r.length,A=A.slice(r.length),A.length}}function E(){return/[^a-fA-F0-9]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function c(){return"."===h?(A.push(h),M=FLOAT,R=h,T+1):/[eE]/.test(h)?(A.push(h),M=FLOAT,R=h,T+1):"x"===h&&1===A.length&&"0"===A[0]?(M=HEX,A.push(h),R=h,T+1):/[^\d]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function f(){return"f"===h&&(A.push(h),R=h,T+=1),/[eE]/.test(h)?(A.push(h),R=h,T+1):"-"===h&&/[eE]/.test(R)?(A.push(h),R=h,T+1):/[^\d]/.test(h)?(t(A.join("")),M=NORMAL,T):(A.push(h),R=h,T+1)}function N(){if(/[^\d\w_]/.test(h)){var e=A.join("");return M=_.indexOf(e)>-1?KEYWORD:j.indexOf(e)>-1?BUILTIN:IDENT,t(A.join("")),M=NORMAL,T}return A.push(h),R=h,T+1}var h,R,p,T=0,L=0,M=NORMAL,A=[],b=[],C=1,g=0,I=0,d=!1,k=!1,P="";e=e||{};var j=builtins100,_=literals100;return"300 es"===e.version&&(j=builtins300es,_=literals300es),function(e){return b=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):r()}}module.exports=tokenize;var literals100=_dereq_("./lib/literals"),operators=_dereq_("./lib/operators"),builtins100=_dereq_("./lib/builtins"),literals300es=_dereq_("./lib/literals-300es"),builtins300es=_dereq_("./lib/builtins-300es"),NORMAL=999,TOKEN=9999,BLOCK_COMMENT=0,LINE_COMMENT=1,PREPROCESSOR=2,OPERATOR=3,INTEGER=4,FLOAT=5,IDENT=6,BUILTIN=7,KEYWORD=8,WHITESPACE=9,EOF=10,HEX=11,map=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];

},{"./lib/builtins":325,"./lib/builtins-300es":324,"./lib/literals":327,"./lib/literals-300es":326,"./lib/operators":328}],324:[function(_dereq_,module,exports){
"use strict";var v100=_dereq_("./builtins");v100=v100.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),module.exports=v100.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);

},{"./builtins":325}],325:[function(_dereq_,module,exports){
"use strict";module.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"];

},{}],326:[function(_dereq_,module,exports){
"use strict";var v100=_dereq_("./literals");module.exports=v100.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]);

},{"./literals":327}],327:[function(_dereq_,module,exports){
"use strict";module.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];

},{}],328:[function(_dereq_,module,exports){
"use strict";module.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];

},{}],329:[function(_dereq_,module,exports){
"use strict";function tokenizeString(e,n){var t=tokenize(n),i=[];return i=i.concat(t(e)),i=i.concat(t(null))}var tokenize=_dereq_("./index");module.exports=tokenizeString;

},{"./index":323}],330:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],s=0;s<t.length-1;s++)r.push(t[s],e[s]||"");return r.push(t[s]),r.join("")};

},{}],331:[function(_dereq_,module,exports){
"use strict";(function(){var r,n,u,t,e,l,h,o,c,f,i,a,s,g,p,v,b,x,y,d,M,z;a={R:[3.240969941904521,-1.537383177570093,-.498610760293],G:[-.96924363628087,1.87596750150772,.041555057407175],B:[.055630079696993,-.20397695888897,1.056971514242878]},s={X:[.41239079926595,.35758433938387,.18048078840183],Y:[.21263900587151,.71516867876775,.072192315360733],Z:[.019330818715591,.11919477979462,.95053215224966]},x=1,v=.19783000664283,b=.46831999493879,f=903.2962962,l=.0088564516,o=function(r){var n,u,t,e,h,o,c,i,s,g,p,v,b,x,y,d,M,z;for(x=Math.pow(r+16,3)/1560896,y=x>l?x:r/f,b=[],g=["R","G","B"],t=0,h=g.length;t<h;t++)for(u=g[t],p=a[u],c=p[0],i=p[1],s=p[2],v=[0,1],e=0,o=v.length;e<o;e++)d=v[e],M=(284517*c-94839*s)*y,z=(838422*s+769860*i+731718*c)*r*y-769860*d*r,n=(632260*s-126452*i)*y+126452*d,b.push([M/n,z/n]);return b},c=function(r,n){return(r[1]-n[1])/(n[0]-r[0])},t=function(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))},i=function(r,n){var u,t,e;return e=n[0],u=n[1],t=u/(Math.sin(r)-e*Math.cos(r)),t<0?null:t},p=function(r){var n,u,e,l,h,f,i,a;for(l=[],f=o(r),u=0,e=f.length;u<e;u++)i=f[u],h=i[0],n=i[1],a=c([h,n],[-1/h,0]),l.push(t([a,n+a*h]));return Math.min.apply(Math,l)},g=function(r,n){var u,t,e,l,h,c,f;for(u=n/360*Math.PI*2,h=[],f=o(r),t=0,l=f.length;t<l;t++)c=f[t],null!==(e=i(u,c))&&h.push(e);return Math.min.apply(Math,h)},e=function(r,n){var u,t,e,l;for(l=0,u=t=0,e=r.length-1;0<=e?t<=e:t>=e;u=0<=e?++t:--t)l+=r[u]*n[u];return l},M=function(r,n){var u;return u=Math.pow(10,n),Math.round(r*u)/u},h=function(r){return r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055},z=function(r){var n;return n=.055,r>.04045?Math.pow((r+n)/(1+n),2.4):r/12.92},y=function(r){var n,u,t,e,l,h,o;for(r=function(){var n,u,t;for(t=[],n=0,u=r.length;n<u;n++)h=r[n],t.push(M(h,3));return t}(),u=0,e=r.length;u<e;u++){if((n=r[u])<-1e-4||n>1.0001)throw new Error("Illegal rgb value: "+n);n<0&&(n=0),n>1&&(n=1)}for(o=[],t=0,l=r.length;t<l;t++)n=r[t],o.push(Math.round(255*n));return o},u={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}},u.xyz.rgb=function(r){var n,u,t;return t=h(e(a.R,r)),u=h(e(a.G,r)),n=h(e(a.B,r)),[t,u,n]},u.rgb.xyz=function(r){var n,u,t,l,h,o,c;return t=r[0],u=r[1],n=r[2],c=[z(t),z(u),z(n)],l=e(s.X,c),h=e(s.Y,c),o=e(s.Z,c),[l,h,o]},n=function(r){return r<=l?r/x*f:116*Math.pow(r/x,1/3)-16},r=function(r){return r<=8?x*r/f:x*Math.pow((r+16)/116,3)},u.xyz.luv=function(r){var u,t,e,l,h,o,c,f;return l=r[0],h=r[1],o=r[2],c=4*l/(l+15*h+3*o),f=9*h/(l+15*h+3*o),0===(u=n(h))?[0,0,0]:(t=13*u*(c-v),e=13*u*(f-b),[u,t,e])},u.luv.xyz=function(n){var u,t,e,l,h,o,c,f;return u=n[0],t=n[1],e=n[2],0===u?[0,0,0]:(c=t/(13*u)+v,f=e/(13*u)+b,h=r(u),l=0-9*h*c/((c-4)*f-c*f),o=(9*h-15*f*h-f*l)/(3*f),[l,h,o])},u.luv.lch=function(r){var n,u,t,e,l,h;return e=r[0],l=r[1],h=r[2],n=Math.pow(Math.pow(l,2)+Math.pow(h,2),.5),t=Math.atan2(h,l),u=360*t/2/Math.PI,u<0&&(u=360+u),[e,n,u]},u.lch.luv=function(r){var n,u,t,e,l,h;return e=r[0],n=r[1],u=r[2],t=u/360*2*Math.PI,l=Math.cos(t)*n,h=Math.sin(t)*n,[e,l,h]},u.husl.lch=function(r){var n,u,t,e,l;return u=r[0],e=r[1],(t=r[2])>99.9999999?[100,0,u]:t<1e-8?[0,0,u]:(l=g(t,u),n=l/100*e,[t,n,u])},u.lch.husl=function(r){var n,u,t,e,l;return t=r[0],n=r[1],u=r[2],t>99.9999999?[u,0,100]:t<1e-8?[u,0,0]:(l=g(t,u),e=n/l*100,[u,e,t])},u.huslp.lch=function(r){var n,u,t,e,l;return u=r[0],e=r[1],(t=r[2])>99.9999999?[100,0,u]:t<1e-8?[0,0,u]:(l=p(t),n=l/100*e,[t,n,u])},u.lch.huslp=function(r){var n,u,t,e,l;return t=r[0],n=r[1],u=r[2],t>99.9999999?[u,0,100]:t<1e-8?[u,0,0]:(l=p(t),e=n/l*100,[u,e,t])},u.rgb.hex=function(r){var n,u,t,e;for(u="#",r=y(r),t=0,e=r.length;t<e;t++)n=r[t],n=n.toString(16),1===n.length&&(n="0"+n),u+=n;return u},u.hex.rgb=function(r){var n,u,t,e,l,h,o,c;for("#"===r.charAt(0)&&(r=r.substring(1,7)),h=r.substring(0,2),u=r.substring(2,4),n=r.substring(4,6),o=[h,u,n],c=[],t=0,e=o.length;t<e;t++)l=o[t],c.push(parseInt(l,16)/255);return c},u.lch.rgb=function(r){return u.xyz.rgb(u.luv.xyz(u.lch.luv(r)))},u.rgb.lch=function(r){return u.luv.lch(u.xyz.luv(u.rgb.xyz(r)))},u.husl.rgb=function(r){return u.lch.rgb(u.husl.lch(r))},u.rgb.husl=function(r){return u.lch.husl(u.rgb.lch(r))},u.huslp.rgb=function(r){return u.lch.rgb(u.huslp.lch(r))},u.rgb.huslp=function(r){return u.lch.huslp(u.rgb.lch(r))},d={},d.fromRGB=function(r,n,t){return u.rgb.husl([r,n,t])},d.fromHex=function(r){return u.rgb.husl(u.hex.rgb(r))},d.toRGB=function(r,n,t){return u.husl.rgb([r,n,t])},d.toHex=function(r,n,t){return u.rgb.hex(u.husl.rgb([r,n,t]))},d.p={},d.p.toRGB=function(r,n,t){return u.xyz.rgb(u.luv.xyz(u.lch.luv(u.huslp.lch([r,n,t]))))},d.p.toHex=function(r,n,t){return u.rgb.hex(u.xyz.rgb(u.luv.xyz(u.lch.luv(u.huslp.lch([r,n,t])))))},d.p.fromRGB=function(r,n,t){return u.lch.huslp(u.luv.lch(u.xyz.luv(u.rgb.xyz([r,n,t]))))},d.p.fromHex=function(r){return u.lch.huslp(u.luv.lch(u.xyz.luv(u.rgb.xyz(u.hex.rgb(r)))))},d._conv=u,d._round=M,d._rgbPrepare=y,d._getBounds=o,d._maxChromaForLH=g,d._maxSafeChromaForL=p,"undefined"!=typeof module&&null!==module||"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof requirejs&&null!==requirejs||(this.HUSL=d),"undefined"!=typeof module&&null!==module&&(module.exports=d),"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.husl=d),"undefined"!=typeof requirejs&&null!==requirejs&&"undefined"!=typeof define&&null!==define&&define(d)}).call(void 0);

},{}],332:[function(_dereq_,module,exports){
"use strict";exports.read=function(t,a,o,r,h){var M,p,w=8*h-r-1,e=(1<<w)-1,f=e>>1,i=-7,s=o?h-1:0,N=o?-1:1,n=t[a+s];for(s+=N,M=n&(1<<-i)-1,n>>=-i,i+=w;i>0;M=256*M+t[a+s],s+=N,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+t[a+s],s+=N,i-=8);if(0===M)M=1-f;else{if(M===e)return p?NaN:1/0*(n?-1:1);p+=Math.pow(2,r),M-=f}return(n?-1:1)*p*Math.pow(2,M-r)},exports.write=function(t,a,o,r,h,M){var p,w,e,f=8*M-h-1,i=(1<<f)-1,s=i>>1,N=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,n=r?0:M-1,u=r?1:-1,c=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(w=isNaN(a)?1:0,p=i):(p=Math.floor(Math.log(a)/Math.LN2),a*(e=Math.pow(2,-p))<1&&(p--,e*=2),a+=p+s>=1?N/e:N*Math.pow(2,1-s),a*e>=2&&(p++,e/=2),p+s>=i?(w=0,p=i):p+s>=1?(w=(a*e-1)*Math.pow(2,h),p+=s):(w=a*Math.pow(2,s-1)*Math.pow(2,h),p=0));h>=8;t[o+n]=255&w,n+=u,w/=256,h-=8);for(p=p<<h|w,f+=h;f>0;t[o+n]=255&p,n+=u,p/=256,f-=8);t[o+n-u]|=128*c};

},{}],333:[function(_dereq_,module,exports){
"use strict";"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

},{}],334:[function(_dereq_,module,exports){
"use strict";function IntervalTreeNode(t,i,r,e,n){this.mid=t,this.left=i,this.right=r,this.leftPoints=e,this.rightPoints=n,this.count=(i?i.count:0)+(r?r.count:0)+e.length}function copy(t,i){t.mid=i.mid,t.left=i.left,t.right=i.right,t.leftPoints=i.leftPoints,t.rightPoints=i.rightPoints,t.count=i.count}function rebuild(t,i){var r=createIntervalTree(i);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function rebuildWithInterval(t,i){var r=t.intervals([]);r.push(i),rebuild(t,r)}function rebuildWithoutInterval(t,i){var r=t.intervals([]),e=r.indexOf(i);return e<0?NOT_FOUND:(r.splice(e,1),rebuild(t,r),SUCCESS)}function reportLeftRange(t,i,r){for(var e=0;e<t.length&&t[e][0]<=i;++e){var n=r(t[e]);if(n)return n}}function reportRightRange(t,i,r){for(var e=t.length-1;e>=0&&t[e][1]>=i;--e){var n=r(t[e]);if(n)return n}}function reportRange(t,i){for(var r=0;r<t.length;++r){var e=i(t[r]);if(e)return e}}function compareNumbers(t,i){return t-i}function compareBegin(t,i){var r=t[0]-i[0];return r||t[1]-i[1]}function compareEnd(t,i){var r=t[1]-i[1];return r||t[0]-i[0]}function createIntervalTree(t){if(0===t.length)return null;for(var i=[],r=0;r<t.length;++r)i.push(t[r][0],t[r][1]);i.sort(compareNumbers);for(var e=i[i.length>>1],n=[],o=[],s=[],r=0;r<t.length;++r){var h=t[r];h[1]<e?n.push(h):e<h[0]?o.push(h):s.push(h)}var l=s,u=s.slice();return l.sort(compareBegin),u.sort(compareEnd),new IntervalTreeNode(e,createIntervalTree(n),createIntervalTree(o),l,u)}function IntervalTree(t){this.root=t}function createWrapper(t){return new IntervalTree(t&&0!==t.length?createIntervalTree(t):null)}var bounds=_dereq_("binary-search-bounds"),NOT_FOUND=0,SUCCESS=1,EMPTY=2;module.exports=createWrapper;var proto=IntervalTreeNode.prototype;proto.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},proto.insert=function(t){var i=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(i+1)?rebuildWithInterval(this,t):this.left.insert(t):this.left=createIntervalTree([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(i+1)?rebuildWithInterval(this,t):this.right.insert(t):this.right=createIntervalTree([t]);else{var r=bounds.ge(this.leftPoints,t,compareBegin),e=bounds.ge(this.rightPoints,t,compareEnd);this.leftPoints.splice(r,0,t),this.rightPoints.splice(e,0,t)}},proto.remove=function(t){var i=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return NOT_FOUND;if(4*(this.right?this.right.count:0)>3*(i-1))return rebuildWithoutInterval(this,t);var r=this.left.remove(t);return r===EMPTY?(this.left=null,this.count-=1,SUCCESS):(r===SUCCESS&&(this.count-=1),r)}if(t[0]>this.mid){if(!this.right)return NOT_FOUND;if(4*(this.left?this.left.count:0)>3*(i-1))return rebuildWithoutInterval(this,t);var r=this.right.remove(t);return r===EMPTY?(this.right=null,this.count-=1,SUCCESS):(r===SUCCESS&&(this.count-=1),r)}if(1===this.count)return this.leftPoints[0]===t?EMPTY:NOT_FOUND;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var e=this,n=this.left;n.right;)e=n,n=n.right;if(e===this)n.right=this.right;else{var o=this.left,r=this.right;e.count-=n.count,e.right=n.left,n.left=o,n.right=r}copy(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?copy(this,this.left):copy(this,this.right);return SUCCESS}for(var o=bounds.ge(this.leftPoints,t,compareBegin);o<this.leftPoints.length&&this.leftPoints[o][0]===t[0];++o)if(this.leftPoints[o]===t){this.count-=1,this.leftPoints.splice(o,1);for(var r=bounds.ge(this.rightPoints,t,compareEnd);r<this.rightPoints.length&&this.rightPoints[r][1]===t[1];++r)if(this.rightPoints[r]===t)return this.rightPoints.splice(r,1),SUCCESS}return NOT_FOUND},proto.queryPoint=function(t,i){if(t<this.mid){if(this.left){var r=this.left.queryPoint(t,i);if(r)return r}return reportLeftRange(this.leftPoints,t,i)}if(t>this.mid){if(this.right){var r=this.right.queryPoint(t,i);if(r)return r}return reportRightRange(this.rightPoints,t,i)}return reportRange(this.leftPoints,i)},proto.queryInterval=function(t,i,r){if(t<this.mid&&this.left){var e=this.left.queryInterval(t,i,r);if(e)return e}if(i>this.mid&&this.right){var e=this.right.queryInterval(t,i,r);if(e)return e}return i<this.mid?reportLeftRange(this.leftPoints,i,r):t>this.mid?reportRightRange(this.rightPoints,t,r):reportRange(this.leftPoints,r)};var tproto=IntervalTree.prototype;tproto.insert=function(t){this.root?this.root.insert(t):this.root=new IntervalTreeNode(t[0],null,null,[t],[t])},tproto.remove=function(t){if(this.root){var i=this.root.remove(t);return i===EMPTY&&(this.root=null),i!==NOT_FOUND}return!1},tproto.queryPoint=function(t,i){if(this.root)return this.root.queryPoint(t,i)},tproto.queryInterval=function(t,i,r){if(t<=i&&this.root)return this.root.queryInterval(t,i,r)},Object.defineProperty(tproto,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(tproto,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});

},{"binary-search-bounds":74}],335:[function(_dereq_,module,exports){
"use strict";function invertPermutation(t,r){r=r||new Array(t.length);for(var e=0;e<t.length;++e)r[t[e]]=e;return r}module.exports=invertPermutation;

},{}],336:[function(_dereq_,module,exports){
"use strict";function iota(r){for(var t=new Array(r),o=0;o<r;++o)t[o]=o;return t}module.exports=iota;

},{}],337:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))};

},{}],338:[function(_dereq_,module,exports){
"use strict";function isBuffer(f){return!!f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)}function isSlowBuffer(f){return"function"==typeof f.readFloatLE&&"function"==typeof f.slice&&isBuffer(f.slice(0,0))}module.exports=function(f){return null!=f&&(isBuffer(f)||isSlowBuffer(f)||!!f._isBuffer)};

},{}],339:[function(_dereq_,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports=module.exports=function(e){if(e&&"object"===(void 0===e?"undefined":_typeof(e))){var o=e.which||e.keyCode||e.charCode;o&&(e=o)}if("number"==typeof e)return names[e];var a=String(e),r=codes[a.toLowerCase()];if(r)return r;var r=aliases[a.toLowerCase()];return r||(1===a.length?a.charCodeAt(0):void 0)};var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},aliases=exports.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases)codes[alias]=aliases[alias];

},{}],340:[function(_dereq_,module,exports){
"use strict";function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function arrayLikeKeys(e,t){var n=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!hasOwnProperty.call(e,i)||o&&("length"==i||isIndex(i,r))||n.push(i);return n}function assignInDefaults(e,t,n,r){return void 0===e||eq(e,objectProto[n])&&!hasOwnProperty.call(r,n)?t:e}function assignValue(e,t,n){var r=e[t];hasOwnProperty.call(e,t)&&eq(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),n=[];for(var r in e)("constructor"!=r||!t&&hasOwnProperty.call(e,r))&&n.push(r);return n}function baseRest(e,t){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=nativeMax(n.length-t,0),i=Array(o);++r<o;)i[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=i,apply(e,this,a)}}function copyObject(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;assignValue(n,a,void 0===s?e[a]:s)}return n}function createAssigner(e){return baseRest(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&isIterateeCall(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=void 0===t?"undefined":_typeof(t);return!!("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n)&&eq(n[t],e)}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=void 0===e?"undefined":_typeof(e);return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==(void 0===e?"undefined":_typeof(e))}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeMax=Math.max,isArray=Array.isArray,assignInWith=createAssigner(function(e,t,n,r){copyObject(t,keysIn(t),e,r)}),defaults=baseRest(function(e){return e.push(void 0,assignInDefaults),apply(assignInWith,void 0,e)});module.exports=defaults;

},{}],341:[function(_dereq_,module,exports){
"use strict";function clamp(t,a,h){return t<a?a:t>h?h:t}function Euler(t,a,h,i){if(!(this instanceof Euler))return new Euler(t,a,h,i);this._x=t||0,this._y=a||0,this._z=h||0,this._order=i||Euler.DefaultOrder}module.exports=Euler,Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler.DefaultOrder="XYZ",Euler.prototype={_x:0,_y:0,_z:0,_order:Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,a,h,i){return this._x=t,this._y=a,this._z=h,this._order=i||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,a){var h=t.elements,i=h[0],s=h[4],n=h[8],e=h[1],r=h[5],_=h[9],o=h[2],c=h[6],u=h[10];return a=a||this._order,"XYZ"===a?(this._y=Math.asin(clamp(n,-1,1)),Math.abs(n)<.99999?(this._x=Math.atan2(-_,u),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(c,r),this._z=0)):"YXZ"===a?(this._x=Math.asin(-clamp(_,-1,1)),Math.abs(_)<.99999?(this._y=Math.atan2(n,u),this._z=Math.atan2(e,r)):(this._y=Math.atan2(-o,i),this._z=0)):"ZXY"===a?(this._x=Math.asin(clamp(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(-o,u),this._z=Math.atan2(-s,r)):(this._y=0,this._z=Math.atan2(e,i))):"ZYX"===a?(this._y=Math.asin(-clamp(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(c,u),this._z=Math.atan2(e,i)):(this._x=0,this._z=Math.atan2(-s,r))):"YZX"===a?(this._z=Math.asin(clamp(e,-1,1)),Math.abs(e)<.99999?(this._x=Math.atan2(-_,r),this._y=Math.atan2(-o,i)):(this._x=0,this._y=Math.atan2(n,u))):"XZY"===a?(this._z=Math.asin(-clamp(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(c,r),this._y=Math.atan2(n,i)):(this._x=Math.atan2(-_,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+a),this._order=a,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new Euler(this._x,this._y,this._z,this._order)}};

},{}],342:[function(_dereq_,module,exports){
"use strict";function reindex(e){for(var r=[],s=[],n=0,t=0;n<e.length;)s.push([t++,t++,t++]),r.push([e[n++],e[n++],e[n++]],[e[n++],e[n++],e[n++]],[e[n++],e[n++],e[n++]]);return{positions:r,cells:s}}module.exports=reindex;

},{}],343:[function(_dereq_,module,exports){
"use strict";function mouseListen(e,n){function t(e){var n=!1;return"altKey"in e&&(n=n||e.altKey!==w.alt,w.alt=!!e.altKey),"shiftKey"in e&&(n=n||e.shiftKey!==w.shift,w.shift=!!e.shiftKey),"ctrlKey"in e&&(n=n||e.ctrlKey!==w.control,w.control=!!e.ctrlKey),"metaKey"in e&&(n=n||e.metaKey!==w.meta,w.meta=!!e.metaKey),n}function o(e,o){var r=mouse.x(o),s=mouse.y(o);"buttons"in o&&(e=0|o.buttons),(e!==L||r!==l||s!==E||t(o))&&(L=0|e,l=r||0,E=s||0,n&&n(L,l,E,w))}function r(e){o(0,e)}function s(){(L||l||E||w.shift||w.alt||w.meta||w.control)&&(l=E=0,L=0,w.shift=w.alt=w.control=w.meta=!1,n&&n(0,0,0,w))}function i(e){t(e)&&n&&n(L,l,E,w)}function u(e){0===mouse.buttons(e)?o(0,e):o(L,e)}function v(e){o(L|mouse.buttons(e),e)}function m(e){o(L&~mouse.buttons(e),e)}function d(){c||(c=!0,e.addEventListener("mousemove",u),e.addEventListener("mousedown",v),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",r),e.addEventListener("mouseenter",r),e.addEventListener("mouseout",r),e.addEventListener("mouseover",r),e.addEventListener("blur",s),e.addEventListener("keyup",i),e.addEventListener("keydown",i),e.addEventListener("keypress",i),e!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}function a(){c&&(c=!1,e.removeEventListener("mousemove",u),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",r),e.removeEventListener("mouseenter",r),e.removeEventListener("mouseout",r),e.removeEventListener("mouseover",r),e.removeEventListener("blur",s),e.removeEventListener("keyup",i),e.removeEventListener("keydown",i),e.removeEventListener("keypress",i),e!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))}n||(n=e,e=window);var L=0,l=0,E=0,w={shift:!1,alt:!1,control:!1,meta:!1},c=!1;d();var f={element:e};return Object.defineProperties(f,{enabled:{get:function(){return c},set:function(e){e?d():a()},enumerable:!0},buttons:{get:function(){return L},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return E},enumerable:!0},mods:{get:function(){return w},enumerable:!0}}),f}module.exports=mouseListen;var mouse=_dereq_("mouse-event");

},{"mouse-event":345}],344:[function(_dereq_,module,exports){
"use strict";function mouseEventOffset(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var o=t.clientX||0,r=t.clientY||0,i=getBoundingClientOffset(e);return n[0]=o-i.left,n[1]=r-i.top,n}function getBoundingClientOffset(t){return t===window||t===document||t===document.body?rootPosition:t.getBoundingClientRect()}var rootPosition={left:0,top:0};module.exports=mouseEventOffset;

},{}],345:[function(_dereq_,module,exports){
"use strict";function mouseButtons(e){if("object"===(void 0===e?"undefined":_typeof(e))){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function mouseElement(e){return e.target||e.srcElement||window}function mouseRelativeX(e){if("object"===(void 0===e?"undefined":_typeof(e))){if("offsetX"in e)return e.offsetX;var t=mouseElement(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function mouseRelativeY(e){if("object"===(void 0===e?"undefined":_typeof(e))){if("offsetY"in e)return e.offsetY;var t=mouseElement(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.buttons=mouseButtons,exports.element=mouseElement,exports.x=mouseRelativeX,exports.y=mouseRelativeY;

},{}],346:[function(_dereq_,module,exports){
"use strict";function mouseWheelListen(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=toPX("ex",e),i=function(e){n&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,s=e.deltaMode,u=1;switch(s){case 1:u=r;break;case 2:u=window.innerHeight}if(i*=u,o*=u,a*=u,i||o||a)return t(i,o,a,e)};return e.addEventListener("wheel",i),i}var toPX=_dereq_("to-px");module.exports=mouseWheelListen;

},{"to-px":418}],347:[function(_dereq_,module,exports){
"use strict";function parse(e){if(e=String(e),!(e.length>1e4)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var n=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){e=e||{};var r=void 0===s?"undefined":_typeof(s);if("string"===r&&s.length>0)return parse(s);if("number"===r&&!1===isNaN(s))return e.long?fmtLong(s):fmtShort(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};

},{}],348:[function(_dereq_,module,exports){
"use strict";module.exports=function(t,a,m){return m>a?Math.max(Math.min(t,m),a):Math.max(Math.min(t,a),m)};

},{}],349:[function(_dereq_,module,exports){
"use strict";module.exports=function(r,t,e){if(void 0===e&&(e=t,t=0),t>e){var i=e;e=t,t=i}var o=e-t;return r=(r+t)%o-t,r<t&&(r+=o),r>e&&(r-=o),r};

},{}],350:[function(_dereq_,module,exports){
"use strict";function array(r){return"a"+r}function data(r){return"d"+r}function cube(r,e){return"c"+r+"_"+e}function shape(r){return"s"+r}function stride(r,e){return"t"+r+"_"+e}function offset(r){return"o"+r}function scalar(r){return"x"+r}function pointer(r){return"p"+r}function delta(r,e){return"d"+r+"_"+e}function index(r){return"i"+r}function step(r,e){return"u"+r+"_"+e}function pcube(r){return"b"+r}function qcube(r){return"y"+r}function pdelta(r){return"e"+r}function vert(r){return"v"+r}function permBitmask(r,e,t){for(var u=0,o=0;o<r;++o)e&1<<o&&(u|=1<<t[o]);return u}function compileSurfaceProcedure(r,e,t,u,o,n){function a(r,e){d.push("for(",index(o[r]),"=",e,";",index(o[r]),"<",shape(o[r]),";","++",index(o[r]),"){")}function p(r){for(var e=0;e<h;++e)d.push(pointer(e),"+=",step(e,o[r]),";");d.push("}")}function s(r){for(var e=r-1;e>=0;--e)a(e,0);for(var t=[],e=0;e<h;++e)n[e]?t.push(data(e)+".get("+pointer(e)+")"):t.push(data(e)+"["+pointer(e)+"]");for(var e=0;e<u;++e)t.push(scalar(e));d.push(PHASES,"[",POINTER,"++]=phase(",t.join(),");");for(var e=0;e<r;++e)p(e);for(var s=0;s<h;++s)d.push(pointer(s),"+=",step(s,o[r]),";")}function f(r){for(var e=0;e<h;++e)n[e]?d.push(cube(e,0),"=",data(e),".get(",pointer(e),");"):d.push(cube(e,0),"=",data(e),"[",pointer(e),"];");for(var t=[],e=0;e<h;++e)t.push(cube(e,0));for(var e=0;e<u;++e)t.push(scalar(e));d.push(pcube(0),"=",PHASES,"[",POINTER,"]=phase(",t.join(),");");for(var o=1;o<1<<v;++o)d.push(pcube(o),"=",PHASES,"[",POINTER,"+",pdelta(o),"];");for(var a=[],o=1;o<1<<v;++o)a.push("("+pcube(0)+"!=="+pcube(o)+")");d.push("if(",a.join("||"),"){");for(var p=[],e=0;e<v;++e)p.push(index(e));for(var e=0;e<h;++e){p.push(cube(e,0));for(var o=1;o<1<<v;++o)n[e]?d.push(cube(e,o),"=",data(e),".get(",pointer(e),"+",delta(e,o),");"):d.push(cube(e,o),"=",data(e),"[",pointer(e),"+",delta(e,o),"];"),p.push(cube(e,o))}for(var e=0;e<1<<v;++e)p.push(pcube(e));for(var e=0;e<u;++e)p.push(scalar(e));d.push("vertex(",p.join(),");",vert(0),"=",VERTEX_IDS,"[",POINTER,"]=",VERTEX_COUNT,"++;");for(var s=(1<<v)-1,f=pcube(s),o=0;o<v;++o)if(0==(r&~(1<<o))){for(var i=s^1<<o,c=pcube(i),l=[],E=i;E>0;E=E-1&i)l.push(VERTEX_IDS+"["+POINTER+"+"+pdelta(E)+"]");l.push(vert(0));for(var E=0;E<h;++E)1&o?l.push(cube(E,s),cube(E,i)):l.push(cube(E,i),cube(E,s));1&o?l.push(f,c):l.push(c,f);for(var E=0;E<u;++E)l.push(scalar(E));d.push("if(",f,"!==",c,"){","face(",l.join(),")}")}d.push("}",POINTER,"+=1;")}function i(){for(var r=1;r<1<<v;++r)d.push(TEMPORARY,"=",pdelta(r),";",pdelta(r),"=",qcube(r),";",qcube(r),"=",TEMPORARY,";")}function c(r,e){if(r<0)return void f(e);s(r),d.push("if(",shape(o[r]),">0){",index(o[r]),"=1;"),c(r-1,e|1<<o[r]);for(var t=0;t<h;++t)d.push(pointer(t),"+=",step(t,o[r]),";");r===v-1&&(d.push(POINTER,"=0;"),i()),a(r,2),c(r-1,e),r===v-1&&(d.push("if(",index(o[v-1]),"&1){",POINTER,"=0;}"),i()),p(r),d.push("}")}var h=n.length,v=o.length;if(v<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var l="extractContour"+o.join("_"),d=[],E=[],b=[],y=0;y<h;++y)b.push(array(y));for(var y=0;y<u;++y)b.push(scalar(y));for(var y=0;y<v;++y)E.push(shape(y)+"="+array(0)+".shape["+y+"]|0");for(var y=0;y<h;++y){E.push(data(y)+"="+array(y)+".data",offset(y)+"="+array(y)+".offset|0");for(var S=0;S<v;++S)E.push(stride(y,S)+"="+array(y)+".stride["+S+"]|0")}for(var y=0;y<h;++y){E.push(pointer(y)+"="+offset(y)),E.push(cube(y,0));for(var S=1;S<1<<v;++S){for(var O=[],P=0;P<v;++P)S&1<<P&&O.push("-"+stride(y,P));E.push(delta(y,S)+"=("+O.join("")+")|0"),E.push(cube(y,S)+"=0")}}for(var y=0;y<h;++y)for(var S=0;S<v;++S){var R=[stride(y,o[S])];S>0&&R.push(stride(y,o[S-1])+"*"+shape(o[S-1])),E.push(step(y,o[S])+"=("+R.join("-")+")|0")}for(var y=0;y<v;++y)E.push(index(y)+"=0");E.push(VERTEX_COUNT+"=0");for(var T=["2"],y=v-2;y>=0;--y)T.push(shape(o[y]));E.push(POOL_SIZE+"=("+T.join("*")+")|0",PHASES+"=mallocUint32("+POOL_SIZE+")",VERTEX_IDS+"=mallocUint32("+POOL_SIZE+")",POINTER+"=0"),E.push(pcube(0)+"=0");for(var S=1;S<1<<v;++S){for(var m=[],x=[],P=0;P<v;++P)S&1<<P&&(0===x.length?m.push("1"):m.unshift(x.join("*"))),x.push(shape(o[P]));var I="";m[0].indexOf(shape(o[v-2]))<0&&(I="-");var _=permBitmask(v,S,o);E.push(pdelta(_)+"=(-"+m.join("-")+")|0",qcube(_)+"=("+I+m.join("-")+")|0",pcube(_)+"=0")}E.push(vert(0)+"=0",TEMPORARY+"=0"),c(v-1,0),d.push("freeUint32(",VERTEX_IDS,");freeUint32(",PHASES,");");var j=["'use strict';","function ",l,"(",b.join(),"){","var ",E.join(),";",d.join(""),"}","return ",l].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",j)(r,e,t,pool.mallocUint32,pool.freeUint32)}function createSurfaceExtractor(r){function e(r){throw new Error("ndarray-extract-contour: "+r)}"object"!==(void 0===r?"undefined":_typeof(r))&&e("Must specify arguments");var t=r.order;Array.isArray(t)||e("Must specify order");var u=r.arrayArguments||1;u<1&&e("Must have at least one array argument");var o=r.scalarArguments||0;o<0&&e("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&e("Must specify vertex creation function"),"function"!=typeof r.cell&&e("Must specify cell creation function"),"function"!=typeof r.phase&&e("Must specify phase function");for(var n=r.getters||[],a=new Array(u),p=0;p<u;++p)n.indexOf(p)>=0?a[p]=!0:a[p]=!1;return compileSurfaceProcedure(r.vertex,r.cell,r.phase,o,t,a)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pool=_dereq_("typedarray-pool");module.exports=createSurfaceExtractor;var VERTEX_IDS="V",PHASES="P",VERTEX_COUNT="N",POOL_SIZE="Q",POINTER="X",TEMPORARY="T";

},{"typedarray-pool":423}],351:[function(_dereq_,module,exports){
"use strict";function compare1st(t,r){return t[0]-r[0]}function order(){var t,r=this.stride,e=new Array(r.length);for(t=0;t<e.length;++t)e[t]=[Math.abs(r[t]),t];e.sort(compare1st);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function compileConstructor(t,r){var e=["View",r,"d",t].join("");r<0&&(e="View_Nil"+t);var n="generic"===t;if(-1===r){var o="function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}",i=new Function(o);return i()}if(0===r){var o="function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}",i=new Function("TrivialArray",o);return i(CACHED_CONSTRUCTORS[t][0])}var o=["'use strict'"],s=iota(r),a=s.map(function(t){return"i"+t}),u="this.offset+"+s.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),p=s.map(function(t){return"b"+t}).join(","),f=s.map(function(t){return"c"+t}).join(",");o.push("function "+e+"(a,"+p+","+f+",d){this.data=a","this.shape=["+p+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+t+"'","proto.dimension="+r),o.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+s.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===r?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),r<4?(o.push("function "+e+"_order(){"),2===r?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===r&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+e+"_set("+a.join(",")+",v){"),n?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+e+"_get("+a.join(",")+"){"),n?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+e+"_index(",a.join(),"){return "+u+"}"),o.push("proto.hi=function "+e+"_hi("+a.join(",")+"){return new "+e+"(this.data,"+s.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+s.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var h=s.map(function(t){return"a"+t+"=this.shape["+t+"]"}),c=s.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+e+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+c.join(","));for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");o.push("return new "+e+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+e+"_step("+a.join(",")+"){var "+s.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+s.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");o.push("return new "+e+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(r),l=new Array(r),d=0;d<r;++d)y[d]="a[i"+d+"]",l[d]="b[i"+d+"]";o.push("proto.transpose=function "+e+"_transpose("+a+"){"+a.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+y.join(",")+","+l.join(",")+",this.offset)}"),o.push("proto.pick=function "+e+"_pick("+a+"){var a=[],b=[],c=this.offset");for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+s.map(function(t){return"shape["+t+"]"}).join(",")+","+s.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var i=new Function("CTOR_LIST","ORDER",o.join("\n"));return i(CACHED_CONSTRUCTORS[t],order)}function arrayDType(t){if(isBuffer(t))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function wrappedNDArrayCtor(t,r,e,n){if(void 0===t){var o=CACHED_CONSTRUCTORS.array[0];return o([])}"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var i=r.length;if(void 0===e){e=new Array(i);for(var s=i-1,a=1;s>=0;--s)e[s]=a,a*=r[s]}if(void 0===n){n=0;for(var s=0;s<i;++s)e[s]<0&&(n-=(r[s]-1)*e[s])}for(var u=arrayDType(t),p=CACHED_CONSTRUCTORS[u];p.length<=i+1;)p.push(compileConstructor(u,p.length-1));var o=p[i+1];return o(t,r,e,n)}var iota=_dereq_("iota-array"),isBuffer=_dereq_("is-buffer"),hasTypedArrays="undefined"!=typeof Float64Array,CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};module.exports=wrappedNDArrayCtor;

},{"iota-array":336,"is-buffer":338}],352:[function(_dereq_,module,exports){
"use strict";function nextafter(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-SMALLEST_DENORM:SMALLEST_DENORM;var r=doubleBits.hi(e),i=doubleBits.lo(e);return t>e==e>0?i===UINT_MAX?(r+=1,i=0):i+=1:0===i?(i=UINT_MAX,r-=1):i-=1,doubleBits.pack(i,r)}var doubleBits=_dereq_("double-bits"),SMALLEST_DENORM=Math.pow(2,-1074),UINT_MAX=-1>>>0;module.exports=nextafter;

},{"double-bits":149}],353:[function(_dereq_,module,exports){
"use strict";var DEFAULT_NORMALS_EPSILON=1e-6,DEFAULT_FACE_EPSILON=1e-6;exports.vertexNormals=function(r,a,e){for(var o=a.length,t=new Array(o),n=void 0===e?DEFAULT_NORMALS_EPSILON:e,v=0;v<o;++v)t[v]=[0,0,0];for(var v=0;v<r.length;++v)for(var f=r[v],A=0,s=f[f.length-1],E=f[0],L=0;L<f.length;++L){A=s,s=E,E=f[(L+1)%f.length];for(var h=a[A],l=a[s],w=a[E],y=new Array(3),N=0,_=new Array(3),i=0,g=0;g<3;++g)y[g]=h[g]-l[g],N+=y[g]*y[g],_[g]=w[g]-l[g],i+=_[g]*_[g];if(N*i>n)for(var F=t[s],O=1/Math.sqrt(N*i),g=0;g<3;++g){var S=(g+1)%3,u=(g+2)%3;F[g]+=O*(_[S]*y[u]-_[u]*y[S])}}for(var v=0;v<o;++v){for(var F=t[v],M=0,g=0;g<3;++g)M+=F[g]*F[g];if(M>n)for(var O=1/Math.sqrt(M),g=0;g<3;++g)F[g]*=O;else for(var g=0;g<3;++g)F[g]=0}return t},exports.faceNormals=function(r,a,e){for(var o=r.length,t=new Array(o),n=void 0===e?DEFAULT_FACE_EPSILON:e,v=0;v<o;++v){for(var f=r[v],A=new Array(3),s=0;s<3;++s)A[s]=a[f[s]];for(var E=new Array(3),L=new Array(3),s=0;s<3;++s)E[s]=A[1][s]-A[0][s],L[s]=A[2][s]-A[0][s];for(var h=new Array(3),l=0,s=0;s<3;++s){var w=(s+1)%3,y=(s+2)%3;h[s]=E[w]*L[y]-E[y]*L[w],l+=h[s]*h[s]}l=l>n?1/Math.sqrt(l):0;for(var s=0;s<3;++s)h[s]*=l;t[v]=h}return t};

},{}],354:[function(_dereq_,module,exports){
"use strict";function createOrthographicCamera(e){function r(){var e=o.projection,r=o.direction,u=o.position,c=o.viewport,i=o.view,l=o.near,n=o.far,f=o.up,p=c[0],m=c[1],d=c[2],y=c[3];return ortho(e,p,d,m,y,l,n),add(a,u,r),lookAt(i,u,a,f),t(),o}e&&"object"==(void 0===e?"undefined":_typeof(e))||(e={});var a=[0,0,0],o=createBaseCamera(e),t=o.update;return o.near=coalesce(e.near,kDefaultNearValue),o.far=coalesce(e.far,kDefaultFarValue),r(),o.update=r,o}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},createBaseCamera=_dereq_("perspective-camera/lib/camera-base"),coalesce=_dereq_("defined"),lookAt=_dereq_("gl-mat4/lookAt"),ortho=_dereq_("gl-mat4/ortho"),add=_dereq_("gl-vec3/add"),kDefaultNearValue=100,kDefaultFarValue=1;module.exports=createOrthographicCamera;

},{"defined":147,"gl-mat4/lookAt":191,"gl-mat4/ortho":193,"gl-vec3/add":260,"perspective-camera/lib/camera-base":360}],355:[function(_dereq_,module,exports){
"use strict";module.exports=function(t,r){r||(r=[0,""]),t=String(t);var e=parseFloat(t,10);return r[0]=e,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r};

},{}],356:[function(_dereq_,module,exports){
(function (process){
"use strict";(function(){var e,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(e()-r)/1e6},n=process.hrtime,e=function(){var e;return e=n(),1e9*e[0]+e[1]},r=e()):Date.now?(module.exports=function(){return Date.now()-r},r=Date.now()):(module.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(void 0);

}).call(this,_dereq_('_process'))
},{"_process":376}],357:[function(_dereq_,module,exports){
"use strict";function permutationSign(r){var o=r.length;if(o<BRUTE_FORCE_CUTOFF){for(var e=1,t=0;t<o;++t)for(var i=0;i<t;++i)if(r[t]<r[i])e=-e;else if(r[t]===r[i])return 0;return e}for(var n=pool.mallocUint8(o),t=0;t<o;++t)n[t]=0;for(var e=1,t=0;t<o;++t)if(!n[t]){var a=1;n[t]=1;for(var i=r[t];i!==t;i=r[i]){if(n[i])return pool.freeUint8(n),0;a+=1,n[i]=1}1&a||(e=-e)}return pool.freeUint8(n),e}module.exports=permutationSign;var BRUTE_FORCE_CUTOFF=32,pool=_dereq_("typedarray-pool");

},{"typedarray-pool":423}],358:[function(_dereq_,module,exports){
"use strict";function rank(r){var e=r.length;switch(e){case 0:case 1:return 0;case 2:return r[1]}var n,t,o,a=pool.mallocUint32(e),u=pool.mallocUint32(e),i=0;for(inverse(r,u),o=0;o<e;++o)a[o]=r[o];for(o=e-1;o>0;--o)t=u[o],n=a[o],a[o]=a[t],a[t]=n,u[o]=u[n],u[n]=t,i=(i+n)*o;return pool.freeUint32(u),pool.freeUint32(a),i}function unrank(r,e,n){switch(r){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(e?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):e?[0,1]:[1,0]}n=n||new Array(r);var t,o,a,u=1;for(n[0]=0,a=1;a<r;++a)n[a]=a,u=u*a|0;for(a=r-1;a>0;--a)t=e/u|0,e=e-t*u|0,u=u/a|0,o=0|n[a],n[a]=0|n[t],n[t]=0|o;return n}var pool=_dereq_("typedarray-pool"),inverse=_dereq_("invert-permutation");exports.rank=rank,exports.unrank=unrank;

},{"invert-permutation":335,"typedarray-pool":423}],359:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("./lib/camera-perspective");

},{"./lib/camera-perspective":362}],360:[function(_dereq_,module,exports){
"use strict";var assign=_dereq_("object-assign"),Ray=_dereq_("ray-3d"),cameraProject=_dereq_("camera-project"),cameraUnproject=_dereq_("camera-unproject"),cameraLookAt=_dereq_("./camera-look-at"),cameraPickRay=_dereq_("camera-picking-ray"),add=_dereq_("gl-vec3/add"),multiply4x4=_dereq_("gl-mat4/multiply"),invert4x4=_dereq_("gl-mat4/invert"),identity4x4=_dereq_("gl-mat4/identity"),setVec3=_dereq_("gl-vec3/set");module.exports=function(e){function i(){if(multiply4x4(u.projView,u.projection,u.view),!invert4x4(u.invProjView,u.projView))throw new Error("camera projection * view is non-invertible")}function r(e){return cameraLookAt(u.direction,u.up,u.position,e),u}function t(){return setVec3(u.position,0,0,0),setVec3(u.direction,0,0,-1),setVec3(u.up,0,1,0),identity4x4(u.view),identity4x4(u.projection),identity4x4(u.projView),identity4x4(u.invProjView),u}function n(e){return add(u.position,u.position,e),u}function o(e){var i=new Ray;return cameraPickRay(i.origin,i.direction,e,u.viewport,u.invProjView),i}function c(e){return cameraProject([],e,u.viewport,u.projView)}function a(e){return cameraUnproject([],e,u.viewport,u.invProjView)}e=e||{};var u={projection:identity4x4([]),view:identity4x4([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:identity4x4([]),invProjView:identity4x4([])};return assign(u,{translate:n,identity:t,lookAt:r,createPickingRay:o,update:i,project:c,unproject:a})};

},{"./camera-look-at":361,"camera-picking-ray":89,"camera-project":90,"camera-unproject":91,"gl-mat4/identity":188,"gl-mat4/invert":190,"gl-mat4/multiply":192,"gl-vec3/add":260,"gl-vec3/set":286,"object-assign":363,"ray-3d":382}],361:[function(_dereq_,module,exports){
"use strict";var cross=_dereq_("gl-vec3/cross"),sub=_dereq_("gl-vec3/subtract"),normalize=_dereq_("gl-vec3/normalize"),copy=_dereq_("gl-vec3/copy"),dot=_dereq_("gl-vec3/dot"),scale=_dereq_("gl-vec3/scale"),tmp=[0,0,0],epsilon=1e-9;module.exports=function(e,r,t,o){if(sub(tmp,o,t),normalize(tmp,tmp),!(0===tmp[0]&&0===tmp[1]&&0===tmp[2])){var s=dot(tmp,r);Math.abs(s-1)<epsilon?scale(r,e,-1):Math.abs(s+1)<epsilon&&copy(r,e),copy(e,tmp),cross(tmp,e,r),normalize(tmp,tmp),cross(r,tmp,e),normalize(r,r)}};

},{"gl-vec3/copy":263,"gl-vec3/cross":265,"gl-vec3/dot":268,"gl-vec3/normalize":279,"gl-vec3/scale":284,"gl-vec3/subtract":289}],362:[function(_dereq_,module,exports){
"use strict";var create=_dereq_("./camera-base"),assign=_dereq_("object-assign"),defined=_dereq_("defined"),perspective=_dereq_("gl-mat4/perspective"),lookAt4x4=_dereq_("gl-mat4/lookAt"),add=_dereq_("gl-vec3/add");module.exports=function(e){function r(){var e=a.viewport[2]/a.viewport[3];return perspective(a.projection,a.fov,e,Math.abs(a.near),Math.abs(a.far)),add(i,a.position,a.direction),lookAt4x4(a.view,a.position,i,a.up),t(),a}e=e||{};var a=create(e);a.fov=defined(e.fov,Math.PI/4),a.near=defined(e.near,1),a.far=defined(e.far,100);var i=[0,0,0],t=a.update;return r(),assign(a,{update:r})};

},{"./camera-base":360,"defined":147,"gl-mat4/lookAt":191,"gl-mat4/perspective":194,"gl-vec3/add":260,"object-assign":363}],363:[function(_dereq_,module,exports){
"use strict";function ToObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}module.exports=Object.assign||function(e,t){for(var n,r,c=ToObject(e),o=1;o<arguments.length;o++){n=arguments[o],r=Object.keys(Object(n));for(var l=0;l<r.length;l++)c[r[l]]=n[r[l]]}return c};

},{}],364:[function(_dereq_,module,exports){
"use strict";function planarDual(r,e){function n(r,e){var n=h[e][r[e]];n.splice(n.indexOf(r),1)}function a(r,a,t){for(var l,o,u,f=0;f<2;++f)if(h[f][a].length>0){l=h[f][a][0],u=f;break}o=l[1^u];for(var g=0;g<2;++g)for(var p=h[g][a],v=0;v<p.length;++v){var i=p[v],s=i[1^g],c=compareAngle(e[r],e[a],e[o],e[s]);c>0&&(l=i,o=s,u=g)}return t?o:(l&&n(l,u),o)}for(var t=0|e.length,l=r.length,h=[new Array(t),new Array(t)],o=0;o<t;++o)h[0][o]=[],h[1][o]=[];for(var o=0;o<l;++o){var u=r[o];h[0][u[0]].push(u),h[1][u[1]].push(u)}for(var f=[],o=0;o<t;++o)h[0][o].length+h[1][o].length===0&&f.push([o]);for(var o=0;o<t;++o)for(var g=0;g<2;++g){for(var p=[];h[g][o].length>0;){var v=(h[0][o].length,function(r,t){var l=h[t][r][0],o=[r];n(l,t);for(var u=l[1^t];;){for(;u!==r;)o.push(u),u=a(o[o.length-2],u,!1);if(h[0][r].length+h[1][r].length===0)break;var f=o[o.length-1],g=r,p=o[1],v=a(f,g,!0);if(compareAngle(e[f],e[g],e[p],e[v])<0)break;o.push(r),u=a(f,g)}return o}(o,g));!function(r,e){return e[1]===e[e.length-1]}(p,v)?(p.length>0&&f.push(p),p=v):p.push.apply(p,v)}p.length>0&&f.push(p)}return f}module.exports=planarDual;var compareAngle=_dereq_("compare-angle");

},{"compare-angle":139}],365:[function(_dereq_,module,exports){
"use strict";function trimLeaves(e,r){for(var t=e2a(e,r.length),a=new Array(r.length),n=new Array(r.length),h=[],l=0;l<r.length;++l){var g=t[l].length;n[l]=g,a[l]=!0,g<=1&&h.push(l)}for(;h.length>0;){var s=h.pop();a[s]=!1;for(var v=t[s],l=0;l<v.length;++l){var o=v[l];0==--n[o]&&h.push(o)}}for(var u=new Array(r.length),f=[],l=0;l<r.length;++l)if(a[l]){var s=f.length;u[l]=s,f.push(r[l])}else u[l]=-1;for(var i=[],l=0;l<e.length;++l){var p=e[l];a[p[0]]&&a[p[1]]&&i.push([u[p[0]],u[p[1]]])}return[i,f]}module.exports=trimLeaves;var e2a=_dereq_("edges-to-adjacency-list");

},{"edges-to-adjacency-list":151}],366:[function(_dereq_,module,exports){
"use strict";function makeArray(r,a){for(var e=new Array(r),n=0;n<r;++n)e[n]=a;return e}function makeArrayOfArrays(r){for(var a=new Array(r),e=0;e<r;++e)a[e]=[];return a}function planarGraphToPolyline(r,a){function e(r){for(var e=r.length,n=[0],o=0;o<e;++o){var t=a[r[o]],u=a[r[(o+1)%e]],i=twoProduct(-t[0],t[1]),l=twoProduct(-t[0],u[1]),f=twoProduct(u[0],t[1]),s=twoProduct(u[0],u[1]);n=robustSum(n,robustSum(robustSum(i,l),robustSum(f,s)))}return n[n.length-1]>0}function n(r){for(var a=r.length,e=0;e<a;++e)if(!S[r[e]])return!1;return!0}var o=trimLeaves(r,a);r=o[0],a=o[1];for(var t=a.length,u=(r.length,e2a(r,a.length)),i=0;i<t;++i)if(u[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var l=planarDual(r,a);l=l.filter(e);for(var f=l.length,s=new Array(f),v=new Array(f),i=0;i<f;++i){s[i]=i;var p=new Array(f),h=l[i].map(function(r){return a[r]}),c=preprocessPolygon([h]),m=0;r:for(var g=0;g<f;++g)if(p[g]=0,i!==g){for(var y=l[g],w=y.length,A=0;A<w;++A){var d=c(a[y[A]]);if(0!==d){d<0&&(p[g]=1,m+=1);continue r}}p[g]=1,m+=1}v[i]=[m,i,p]}v.sort(function(r,a){return a[0]-r[0]});for(var i=0;i<f;++i)for(var p=v[i],q=p[1],b=p[2],g=0;g<f;++g)b[g]&&(s[g]=q);for(var P=makeArrayOfArrays(f),i=0;i<f;++i)P[i].push(s[i]),P[s[i]].push(i);for(var k={},S=makeArray(t,!1),i=0;i<f;++i)for(var y=l[i],w=y.length,g=0;g<w;++g){var x=y[g],D=y[(g+1)%w],G=Math.min(x,D)+":"+Math.max(x,D);if(G in k){var L=k[G];P[L].push(i),P[i].push(L),S[x]=S[D]=!0}else k[G]=i}for(var M=[],O=makeArray(f,-1),i=0;i<f;++i)s[i]!==i||n(l[i])?O[i]=-1:(M.push(i),O[i]=0);for(var o=[];M.length>0;){var T=M.pop(),j=P[T];uniq(j,function(r,a){return r-a});var E,z=j.length,B=O[T];if(0===B){var y=l[T];E=[y]}for(var i=0;i<z;++i){var C=j[i];if(!(O[C]>=0)&&(O[C]=1^B,M.push(C),0===B)){var y=l[C];n(y)||(y.reverse(),E.push(y))}}0===B&&o.push(E)}return o}module.exports=planarGraphToPolyline;var e2a=_dereq_("edges-to-adjacency-list"),planarDual=_dereq_("planar-dual"),preprocessPolygon=_dereq_("point-in-big-polygon"),twoProduct=_dereq_("two-product"),robustSum=_dereq_("robust-sum"),uniq=_dereq_("uniq"),trimLeaves=_dereq_("./lib/trim-leaves");

},{"./lib/trim-leaves":365,"edges-to-adjacency-list":151,"planar-dual":364,"point-in-big-polygon":368,"robust-sum":404,"two-product":421,"uniq":426}],367:[function(_dereq_,module,exports){
"use strict";var PNLTRI={REVISION:"2.1.1"};PNLTRI.Math={random:Math.random,array_shuffle:function(t){for(var r=t.length-1;r>0;r--){var e=Math.floor(PNLTRI.Math.random()*(r+1)),o=t[r];t[r]=t[e],t[e]=o}return t},compare_pts_yx:function(t,r){var e=t.y-r.y;if(e<PNLTRI.Math.EPSILON_N)return-1;if(e>PNLTRI.Math.EPSILON_P)return 1;var o=t.x-r.x;return o<PNLTRI.Math.EPSILON_N?-1:o>PNLTRI.Math.EPSILON_P?1:0},ptsCrossProd:function(t,r,e){return(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x)}},PNLTRI.Math.EPSILON_P=Math.pow(2,-43),PNLTRI.Math.EPSILON_N=-PNLTRI.Math.EPSILON_P,PNLTRI.PolygonData=function(t){if(this.vertices=[],this.segments=[],this.diagonals=[],this.idNextPolyChain=0,this.PolyLeftArr=[],this.monoSubPolyChains=[],this.triangles=[],t)for(var r=0,e=t.length;r<e;r++)this.addPolygonChain(t[r])},PNLTRI.PolygonData.prototype={constructor:PNLTRI.PolygonData,nbVertices:function(){return this.vertices.length},getSegments:function(){return this.segments},getFirstSegment:function(){return this.segments[0]},getMonoSubPolys:function(){return this.monoSubPolyChains},getTriangles:function(){return this.triangles.concat()},nbPolyChains:function(){return this.idNextPolyChain},get_PolyLeftArr:function(){return this.PolyLeftArr.concat()},set_PolyLeft_wrong:function(t){this.PolyLeftArr[t]=!1},isClockWise:function(t){var r=t,e=0;do{e+=(r.vFrom.x-r.vTo.x)*(r.vFrom.y+r.vTo.y),r=r.snext}while(r!=t);return e<0},appendVertexEntry:function(t,r){var e={id:this.vertices.length,x:t,y:r};return this.vertices.push(e),e},createSegmentEntry:function(t,r){return{chainId:this.idNextPolyChain,vFrom:t,vTo:r,upward:1==PNLTRI.Math.compare_pts_yx(r,t),sprev:null,snext:null,rootFrom:null,rootTo:null,is_inserted:!1,trLeft:null,trRight:null,mprev:null,mnext:null,marked:!1}},appendSegmentEntry:function(t){return this.segments.push(t),t},appendDiagonalsEntry:function(t){return this.diagonals.push(t),t},addVertexChain:function(t){function r(t,r){return Math.abs(t.x-r.x)<PNLTRI.Math.EPSILON_P&&Math.abs(t.y-r.y)<PNLTRI.Math.EPSILON_P}function e(t,r,e){if(Math.abs(PNLTRI.Math.ptsCrossProd(r,t,e))>PNLTRI.Math.EPSILON_P)return!1;var o,n,i;return Math.abs(t.y-r.y)<PNLTRI.Math.EPSILON_P?(n=r.x,t.x<e.x?(o=t.x,i=e.x):(o=e.x,i=t.x)):(n=r.y,t.y<e.y?(o=t.y,i=e.y):(o=e.y,i=t.y)),o-n<PNLTRI.Math.EPSILON_P&&n-i<PNLTRI.Math.EPSILON_P}for(var o,n,i,s=[],a=0;a<t.length;a++)o=this.appendVertexEntry(t[a].x,t[a].y),n=!0,i=s.length-1,i>=0&&(r(o,s[i])?n=!1:i>0&&e(s[i-1],s[i],o)&&s.pop()),n&&s.push(o);return i=s.length-1,i>0&&r(s[i],s[0])&&(s.pop(),i--),i>1&&(e(s[i-1],s[i],s[0])&&(s.pop(),i--),i>1&&e(s[i],s[0],s[1])&&s.shift()),s},addPolygonChain:function(t){var r=this.addVertexChain(t);if(r.length<3)return console.log("Polygon has < 3 vertices!",r),0;for(var e,o,n,i=this.segments.length,s=0;s<r.length-1;s++)e=this.createSegmentEntry(r[s],r[s+1]),n?(e.sprev=n,n.snext=e):o=e,n=e,this.appendSegmentEntry(e);return e=this.createSegmentEntry(r[r.length-1],r[0]),e.sprev=n,n.snext=e,this.appendSegmentEntry(e),o.sprev=e,e.snext=o,this.PolyLeftArr[this.idNextPolyChain++]=!0,this.segments.length-i},create_mono_chains:function(){for(var t,r,e,o,n=0,i=this.segments.length;n<i;n++)t=this.segments[n],this.PolyLeftArr[t.chainId]?(r=t.vTo,t.mprev=t.sprev,t.mnext=t.snext):(r=t.vFrom,t=t.snext,t.mprev=t.snext,t.mnext=t.sprev),(o=t.vFrom.lastInDiag)&&(o.mnext=t,t.mprev=o,t.vFrom.lastInDiag=null),(e=r.firstOutDiag)&&(e.mprev=t,t.mnext=e,r.firstOutDiag=null)},unique_monotone_chains_max:function(){var t,r;this.monoSubPolyChains=[];for(var e=0,o=this.segments.length;e<o;e++)t=this.segments[e],t.marked||(r=function(t){var r,e,o,n=t;for(e=o=t.vFrom,t.marked=!0,t=t.mnext;r=t.vFrom;){if(t.marked){if(r==e)break;return console.log("ERR unique_monotone: segment in two chains",e,t),null}t.marked=!0,1==PNLTRI.Math.compare_pts_yx(r,o)&&(o=r,n=t),t=t.mnext}return n}(t))&&this.monoSubPolyChains.push(r);return this.monoSubPolyChains},clearTriangles:function(){this.triangles=[]},addTriangle:function(t,r,e){this.triangles.push([t.id,r.id,e.id])}},PNLTRI.EarClipTriangulator=function(t){this.polyData=t},PNLTRI.EarClipTriangulator.prototype={constructor:PNLTRI.EarClipTriangulator,triangulate_polygon_no_holes:function(){var t=this.polyData,r=t.getFirstSegment(),e=r;if(t.isClockWise(r)){do{e.mprev=e.snext,e.mnext=e.sprev,e=e.sprev}while(e!=r);t.set_PolyLeft_wrong(0)}else do{e.mprev=e.sprev,e.mnext=e.snext,e=e.snext}while(e!=r);for(var o=r,n=o;o.mnext!=o.mprev;)if(function(t){var r=t.mprev.vFrom.x,e=t.mprev.vFrom.y,o=t.vFrom.x,n=t.vFrom.y,i=t.mnext.vFrom.x,s=t.mnext.vFrom.y,a=i-o,u=s-n,l=r-i,h=e-s,p=o-r,v=n-e;if(PNLTRI.Math.EPSILON_P>p*u-a*v)return!1;for(var d=t.mprev.mprev,g=t.mnext;g!=d;){g=g.mnext;var f=g.vFrom.x,L=g.vFrom.y,m=f-r,y=L-e;if(0!==m||0!==y){var R=f-o,P=L-n;if(0!==R||0!==P){var T=f-i,c=L-s;if((0!==T||0!==c)&&a*P-u*R>=PNLTRI.Math.EPSILON_N&&p*y-v*m>=PNLTRI.Math.EPSILON_N&&l*c-h*T>=PNLTRI.Math.EPSILON_N)return!1}}}return!0}(o))this.polyData.addTriangle(o.mprev.vFrom,o.vFrom,o.mnext.vFrom),o.mprev.mnext=o.mnext,o.mnext.mprev=o.mprev,o=o.mnext,n=o;else if((o=o.mnext)==n)return!1;return!0}},PNLTRI.Trapezoid=function(t,r,e,o){this.vHigh=t||{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},this.vLow=r||{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},this.lseg=e,this.rseg=o,this.depth=-1,this.monoDone=!1},PNLTRI.Trapezoid.prototype={constructor:PNLTRI.Trapezoid,clone:function(){var t=new PNLTRI.Trapezoid(this.vHigh,this.vLow,this.lseg,this.rseg);return t.uL=this.uL,t.uR=this.uR,t.dL=this.dL,t.dR=this.dR,t.sink=this.sink,t},splitOffLower:function(t){var r=this.clone();return this.vLow=r.vHigh=t,this.dL=r,r.uL=this,this.dR=r.uR=null,r.dL&&(r.dL.uL=r),r.dR&&(r.dR.uR=r),r}},PNLTRI.QsNode=function(t){this.trap=t,t.sink=this},PNLTRI.QsNode.prototype={constructor:PNLTRI.QsNode},PNLTRI.QueryStructure=function(t){var r=new PNLTRI.Trapezoid(null,null,null,null);if(this.trapArray=[],this.appendTrapEntry(r),this.root=new PNLTRI.QsNode(r),t)for(var e=t.getSegments(),o=0;o<e.length;o++)e[o].rootFrom=e[o].rootTo=this.root,e[o].is_inserted=!1},PNLTRI.QueryStructure.prototype={constructor:PNLTRI.QueryStructure,getRoot:function(){return this.root},appendTrapEntry:function(t){t.trapID=this.trapArray.length,this.trapArray.push(t)},cloneTrap:function(t){var r=t.clone();return this.appendTrapEntry(r),r},splitNodeAtPoint:function(t,r,e){var o=t.trap;if(o.vHigh==r)return t;if(o.vLow==r)return t;var n=o.splitOffLower(r);return this.appendTrapEntry(n),t.yval=r,t.trap=null,t.right=new PNLTRI.QsNode(o),t.left=new PNLTRI.QsNode(n),e?o.sink:n.sink},fpEqual:function(t,r){return Math.abs(t-r)<PNLTRI.Math.EPSILON_P},is_left_of:function(t,r,e){var o,n=t.vFrom.x-r.x,i=t.vTo.x-r.x,s=this.fpEqual(t.vFrom.y,r.y);if(this.fpEqual(t.vTo.y,r.y)){if(s)return 0;o=i}else{if(!s)return t.upward?PNLTRI.Math.ptsCrossProd(t.vFrom,t.vTo,r):PNLTRI.Math.ptsCrossProd(t.vTo,t.vFrom,r);o=n}return Math.abs(o)<PNLTRI.Math.EPSILON_P?0:o},segNodes:function(t){this.ptNode(t,!0),this.ptNode(t,!1)},ptNode:function(t,r){var e,o,n;r?(e=t.vFrom,o=t.vTo,n=t.rootFrom):(e=t.vTo,o=t.vFrom,n=t.rootTo);for(var i,s;n;)if(n.yval)n=-1==PNLTRI.Math.compare_pts_yx(e==n.yval?o:e,n.yval)?n.left:n.right;else{if(!n.seg)return n.trap||console.log("ptNode: unknown type",n),r?t.rootFrom=n:t.rootTo=n,n;if(e==n.seg.vFrom||e==n.seg.vTo){if(this.fpEqual(e.y,o.y)){this.fpEqual(n.seg.vFrom.y,n.seg.vTo.y)?e==n.seg.vFrom?(s=t.upward?o.x>=n.seg.vTo.x:o.x<n.seg.vTo.x,n=(s?t.sprev.upward:n.seg.snext.upward)?n.right:n.left):(s=t.upward?o.x<n.seg.vFrom.x:o.x>=n.seg.vFrom.x,n=(s?t.snext.upward:n.seg.sprev.upward)?n.left:n.right):n=o.x<e.x?n.left:n.right;continue}0===(i=this.is_left_of(n.seg,o,!1))&&(e==n.seg.vFrom?(s=t.upward?o.y>=n.seg.vTo.y:o.y<n.seg.vTo.y,i=s?this.is_left_of(n.seg,t.sprev.vFrom,!1):-this.is_left_of(n.seg,n.seg.snext.vTo,!1)):(s=t.upward?o.y<n.seg.vFrom.y:o.y>=n.seg.vFrom.y,i=s?this.is_left_of(n.seg,t.snext.vTo,!1):-this.is_left_of(n.seg,n.seg.sprev.vFrom,!1)))}else if(0===(i=this.is_left_of(n.seg,e,!0))&&0===(i=this.is_left_of(n.seg,o,!1))){var a=r?t.sprev.vFrom:t.snext.vTo;i=this.is_left_of(n.seg,a,!1)}if(i>0)n=n.left;else{if(!(i<0))return n;n=n.right}}},add_segment:function(t){var r=this;this.segNodes(t);var e,o,n,i,s,a;if(t.upward?(e=t.vFrom,i=t.vTo,o=t.rootFrom,s=t.rootTo,n=t.sprev.is_inserted,a=t.snext.is_inserted):(e=t.vTo,i=t.vFrom,o=t.rootTo,s=t.rootFrom,n=t.snext.is_inserted,a=t.sprev.is_inserted),!a){var u=this.splitNodeAtPoint(s,i,!1);s==o&&(o=u),s=u}var l=s.trap;if(!l.uL&&!l.uR)return void console.log("ERR add_segment: missing trFirst.uX: ",l);if(l.vHigh!=i)return void console.log("ERR add_segment: trFirstHigh != segHigh: ",l);n||(o=this.splitNodeAtPoint(o,e,!0));for(var h,p,v,d,g,f=o.trap,L=l,m=this.trapArray.length+2;L;){if(--m<0)return void console.log("ERR add_segment: infinite loop",L,t,this);if(!L.dL&&!L.dR)return void console.log("ERR add_segment: missing successors",L,t,this);var y=L.sink;y.seg=t,y.trap=null,d&&d.rseg==L.rseg?(h=L,p=d,p.vLow=L.vLow,y.left=new PNLTRI.QsNode(h),y.right=d.sink):v&&v.lseg==L.lseg?(p=L,h=v,h.vLow=L.vLow,y.left=v.sink,y.right=new PNLTRI.QsNode(p)):(h=L,p=this.cloneTrap(L),y.left=new PNLTRI.QsNode(h),y.right=new PNLTRI.QsNode(p)),L.uL&&L.uR?function(){L.usave?(L.uleft?(p.uL=L.uR,p.uR=L.usave,p.uL.dL=p,p.uR.dR=p):(h.uR=L.uL,h.uL=L.usave,h.uL.dL=h,h.uR.dR=h),h.usave=p.usave=null):L.vHigh==l.vHigh?(p.uR.dR=p,h.uR=p.uL=null):p==L?(p.uL=p.uR,p.uR=null,p.uL.dL=p):(h.uR=h.uL,h.uL=null)}():function(){var t=L.uL||L.uR;t.dL&&t.dR?L==t.dL?(p.uL=null,t.dL=h):(h.uR=null,t.dR=p):(p.uL=null,p.uR=t,t.dR=p)}(),L.dL&&L.dR?g=function(){var e;if(L.vLow==f.vLow&&n)L.dL.uL=h,L.dR.uR=p,h.dL=L.dL,p.dR=L.dR,h.dR=p.dL=null,e=null;else{L.dL.uL=h,L.dR.uR=p;var o,i=r.is_left_of(t,L.vLow,!0);if(i>0)o=!0;else if(i<0)o=!1;else{var s=L.dL.rseg,a=s.upward,u=a?s.vFrom:s.vTo;i=r.is_left_of(t,u,!1),i>0?o=!0:i<0?o=!1:(s=a?s.snext:s.sprev,u=a?s.vTo:s.vFrom,i=r.is_left_of(t,u,!1),o=i>0)}o?(e=L.dR,L.dR.uL=h,h.dL=L.dL,p.dR=null):(e=L.dL,L.dL.uR=p,p.dR=L.dR,h.dL=null),h.dR=p.dL=e}return e}():(g=L.dL?L.dL:L.dR,function(t){L.vLow==f.vLow?(n?L.dL?(t.uL=h,h.dL=t,p.dR=null):(t.uR=p,h.dL=null,p.dR=t):(t.uL=h,t.uR=p,h.dL=p.dR=t),h.dR=p.dL=null):(t.uL&&t.uR&&(t.uL==L?(t.usave=t.uR,t.uleft=!0):(t.usave=t.uL,t.uleft=!1)),t.uL=h,t.uR=p,h.dR=p.dL=t,h.dL=p.dR=null)}(g)),h.rseg&&(h.rseg.trLeft=p),p.lseg&&(p.lseg.trRight=h),h.rseg=p.lseg=t,t.trLeft=h,t.trRight=p,L.vLow!=f.vLow?(v=h,d=p,L=g):L=null}t.is_inserted=!0},assignDepths:function(t){var r,e,o=[this.trapArray[0]],n=[],i=0;do{for(var s=i%2==1;r=o.pop();)-1==r.depth&&(r.depth=i,r.uL&&o.push(r.uL),r.uR&&o.push(r.uR),r.dL&&o.push(r.dL),r.dR&&o.push(r.dR),(e=r.lseg)&&-1==e.trLeft.depth&&n.push(e.trLeft),(e=r.rseg)&&(-1==e.trRight.depth&&n.push(e.trRight),e.upward!=s&&t.set_PolyLeft_wrong(e.chainId)));o=n,n=[],i++}while(o.length>0)},create_visibility_map:function(t){var r,e,o=t.nbVertices(),n=new Array(o);for(r=0;r<o;r++)n[r]=new Array(8);var i=new Array(o);for(r=0,e=this.trapArray.length;r<e;r++){var s=this.trapArray[r],a=s.uL?s.uR?5:7:s.uR?4:6,u=s.dL?s.dR?1:0:s.dR?3:2;if(s.depth%2==1){if(5==a||1==u||7==a&&3==u||4==a&&0==u){var l=t.appendDiagonalsEntry({vFrom:s.vLow,vTo:s.vHigh,mprev:null,mnext:null,marked:!1}),h=t.appendDiagonalsEntry({vFrom:s.vHigh,vTo:s.vLow,revDiag:l,mprev:null,mnext:null,marked:!1});l.revDiag=h,n[s.vLow.id][u]=l,n[s.vHigh.id][a]=h}}else null!==s.vHigh.id&&(i[s.vHigh.id]=a),null!==s.vLow.id&&(i[s.vLow.id]=u)}var p,v,d,g,f;for(r=0;r<o;r++)if(v=n[r],null!=(d=i[r])){e=d,f=null;do{e++>7&&(e=0),(p=v[e])&&(f?(p.mprev=f,f.mnext=p):(g=p.vFrom,g.firstOutDiag=p),f=p.revDiag)}while(e!=d);f&&(g.lastInDiag=f)}}},PNLTRI.Trapezoider=function(t){this.polyData=t,this.queryStructure=new PNLTRI.QueryStructure(this.polyData)},PNLTRI.Trapezoider.prototype={constructor:PNLTRI.Trapezoider,optimise_randomlist:function(t){var r=0,e=this.polyData.nbPolyChains();if(1!=e)for(var o=new Array(e),n=t.concat(),i=0;i<n.length;i++){var s=n[i].chainId;o[s]?t[e++]=n[i]:(t[r++]=n[i],o[s]=!0)}},trapezoide_polygon:function(){var t=this.polyData.getSegments().concat();PNLTRI.Math.array_shuffle(t),this.optimise_randomlist(t);for(var r,e=t.length,o=this.queryStructure,n=0,i=e;n<e;){i=Math.log(i)/Math.LN2;for(var s=i>1?Math.floor(e/i):e;n<s;n++)o.add_segment(t[n]);for(r=n;r<e;r++)this.queryStructure.segNodes(t[r])}for(o.assignDepths(this.polyData),r=0;r<e;r++)t[r].trLeft=t[r].trRight=null},create_visibility_map:function(){return this.queryStructure.create_visibility_map(this.polyData)}},PNLTRI.MonoSplitter=function(t){this.polyData=t,this.trapezoider=null},PNLTRI.MonoSplitter.prototype={constructor:PNLTRI.MonoSplitter,monotonate_trapezoids:function(){this.trapezoider=new PNLTRI.Trapezoider(this.polyData),this.trapezoider.trapezoide_polygon(),this.trapezoider.create_visibility_map(),this.polyData.create_mono_chains(),this.polyData.unique_monotone_chains_max()}},PNLTRI.MonoTriangulator=function(t){this.polyData=t},PNLTRI.MonoTriangulator.prototype={constructor:PNLTRI.MonoTriangulator,triangulate_all_polygons:function(){var t=this.polyData.getMonoSubPolys();this.polyData.clearTriangles();for(var r=0;r<t.length;r++){var e=t[r],o=e.mprev,n=e.mnext;n.mnext==o?this.polyData.addTriangle(e.vFrom,n.vFrom,o.vFrom):this.triangulate_monotone_polygon(e)}},triangulate_monotone_polygon:function(t){var r=this,e=t.mnext,o=t.vFrom,n=[e.vFrom],i=0;e=e.mnext;var s=e.vFrom;if(s!=o){for(;s!=o||i>1;)if(i>0){var a=PNLTRI.Math.ptsCrossProd(n[i],s,n[i-1]);Math.abs(a)<=PNLTRI.Math.EPSILON_P&&(s!=o&&PNLTRI.Math.compare_pts_yx(n[i],s)!=PNLTRI.Math.compare_pts_yx(n[i],n[i-1])||(a=1)),a>0?(this.polyData.addTriangle(n[i-1],n[i],s),i--):(n[++i]=s,s==o?function(){for(console.log("ERR uni-y-monotone: only concave angles left",n);i>1;)i--,r.polyData.addTriangle(n[i-1],n[i],n[i+1])}():(e=e.mnext,s=e.vFrom))}else n[++i]=s,e=e.mnext,s=e.vFrom;this.polyData.addTriangle(n[i-1],n[i],s)}}},PNLTRI.Triangulator=function(){this.lastPolyData=null},PNLTRI.Triangulator.prototype={constructor:PNLTRI.Triangulator,clear_lastData:function(){this.lastPolyData=null},get_PolyLeftArr:function(){return this.lastPolyData?this.lastPolyData.get_PolyLeftArr():null},triangulate_polygon:function(t,r){if(this.clear_lastData(),!t||0===t.length)return[];var e,o=new PNLTRI.PolygonData(t),n=function(){return!r&&1==o.nbPolyChains()}();if(n&&(e=new PNLTRI.EarClipTriangulator(o),n=e.triangulate_polygon_no_holes()),!n){new PNLTRI.MonoSplitter(o).monotonate_trapezoids(),e=new PNLTRI.MonoTriangulator(o),e.triangulate_all_polygons()}return this.lastPolyData=o,o.getTriangles()}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=PNLTRI),exports.PNLTRI=PNLTRI):(void 0).PNLTRI=PNLTRI;

},{}],368:[function(_dereq_,module,exports){
"use strict";function visitInterval(){return!0}function intervalSearch(r){return function(e,t){var n=r[e];return!!n&&!!n.queryPoint(t,visitInterval)}}function buildVerticalIndex(r){for(var e={},t=0;t<r.length;++t){var n=r[t],i=n[0][0],a=n[0][1],u=n[1][1],l=[Math.min(a,u),Math.max(a,u)];i in e?e[i].push(l):e[i]=[l]}for(var s={},o=Object.keys(e),t=0;t<o.length;++t){var c=e[o[t]];s[o[t]]=makeIntervalTree(c)}return intervalSearch(s)}function buildSlabSearch(r,e){return function(t){var n=bsearch.le(e,t[0]);if(n<0)return 1;var i=r[n];if(!i){if(!(n>0&&e[n]===t[0]))return 1;i=r[n-1]}for(var a=1;i;){var u=i.key,l=orient(t,u[0],u[1]);if(u[0][0]<u[1][0])if(l<0)i=i.left;else{if(!(l>0))return 0;a=-1,i=i.right}else if(l>0)i=i.left;else{if(!(l<0))return 0;a=1,i=i.right}}return a}}function classifyEmpty(r){return 1}function createClassifyVertical(r){return function(e){return r(e[0],e[1])?0:1}}function createClassifyPointDegen(r,e){return function(t){return r(t[0],t[1])?0:e(t)}}function preprocessPolygon(r){for(var e=r.length,t=[],n=[],i=0;i<e;++i)for(var a=r[i],u=a.length,l=u-1,s=0;s<u;l=s++){var o=a[l],c=a[s];o[0]===c[0]?n.push([o,c]):t.push([o,c])}if(0===t.length)return 0===n.length?classifyEmpty:createClassifyVertical(buildVerticalIndex(n));var f=makeSlabs(t),v=buildSlabSearch(f.slabs,f.coordinates);return 0===n.length?v:createClassifyPointDegen(buildVerticalIndex(n),v)}module.exports=preprocessPolygon;var orient=_dereq_("robust-orientation")[3],makeSlabs=_dereq_("slab-decomposition"),makeIntervalTree=_dereq_("interval-tree-1d"),bsearch=_dereq_("binary-search-bounds");

},{"binary-search-bounds":74,"interval-tree-1d":334,"robust-orientation":399,"slab-decomposition":412}],369:[function(_dereq_,module,exports){
"use strict";function createCapsule(a,r,s,t){function o(s,t,o,v){for(var n=1/(s-1),M=0;M<s;M++){var e=Math.cos(2*Math.PI*M*n)*t,p=Math.sin(2*Math.PI*M*n)*t;h.push([a*e,a*o+r*v,a*p]),i.push([e,o,p]);var f=1-M*n,c=.5-(a*o+r*v)/(2*a+r);u.push([f,c])}}void 0===a&&(a=.5),void 0===r&&(r=2*a),void 0===s&&(s=12),void 0===t&&(t=12);for(var h=[],i=[],u=[],v=[],n=s+1,M=s+n,e=1/(n-1),p=1/(s-1),f=0;f<s/2;f++)o(t,Math.sin(Math.PI*f*p),Math.sin(Math.PI*(f*p-.5)),-.5);for(var f=0;f<n;f++)o(t,1,0,f*e-.5);for(var f=s/2;f<s;f++)o(t,Math.sin(Math.PI*f*p),Math.sin(Math.PI*(f*p-.5)),.5);for(var f=0;f<M-1;f++)for(var c=0;c<t-1;c++)v.push([f*t+(c+1),f*t+(c+0),(f+1)*t+(c+1)]),v.push([(f+1)*t+(c+0),(f+1)*t+(c+1),f*t+c]);return{positions:h,normals:i,uvs:u,cells:v}}module.exports=createCapsule;

},{}],370:[function(_dereq_,module,exports){
"use strict";function createCube(r,o,v,a,e,i){function s(r,o,v,a,e,i,s,f,l,p){for(var b=t,h=0;h<=s;h++)for(var m=0;m<=i;m++){var C=u[t]=[0,0,0];C[r]=(-a/2+m*a/i)*l,C[o]=(-e/2+h*e/s)*p,C[v]=f;var x=d[t]=[0,0,0];x[r]=0,x[o]=0,x[v]=f/Math.abs(f);var M=n[t]=[0,0];M[0]=m/i,M[1]=1-h/s,++t}for(var h=0;h<s;h++)for(var m=0;m<i;m++){var g=b+h*(i+1)+m;c.push([g,g+i+1,g+i+2]),c.push([g,g+i+2,g+1])}}void 0===r&&(r=1),void 0===o&&(o=r),void 0===v&&(v=r),void 0===a&&(a=1),void 0===e&&(e=a),void 0===i&&(i=a);var t=0,u=[],d=[],n=[],c=[];return s(0,1,2,r,o,a,e,v/2,1,-1),s(0,1,2,r,o,a,e,-v/2,-1,-1),s(2,1,0,v,o,i,e,-r/2,1,-1),s(2,1,0,v,o,i,e,r/2,-1,-1),s(0,2,1,r,v,a,i,o/2,1,1),s(0,2,1,r,v,a,i,-o/2,1,-1),{positions:u,normals:d,uvs:n,cells:c}}module.exports=createCube;

},{}],371:[function(_dereq_,module,exports){
"use strict";function createCylinderMesh(r,a,e,n,o){var s=0,t=0,v=[],f=0;r>0&&f++,a>0&&f++;for(var i=(n+1)*(o+1)+(n+2)*f,h=n*o*2+n*f,c=new Array(i),l=new Array(i),u=new Array(i),y=new Array(h),M=(a-r)/e,w=2*Math.PI,A=0;A<=o;A++){for(var p=[],d=A/o,m=d*(a-r)+r,C=0;C<=n;C++){var x=C/n,I=x*w,P=Math.sin(I),b=Math.cos(I);l[s]=[m*P,-d*e+e/2,m*b],c[s]=[P,M,b],u[s]=[x,1-d],p.push(s),s++}v.push(p)}for(var C=0;C<n;C++)for(var A=0;A<o;A++){var g=v[A][C],j=v[A+1][C],k=v[A+1][C+1],q=v[A][C+1];y[t]=[g,j,q],t++,y[t]=[j,k,q],t++}var z=function(o){for(var v=(new Array(3).fill(0),!0===o?r:a),f=!0===o?1:-1,i=s,h=1;h<=n;h++)l[s]=[0,e*f/2,0],c[s]=[0,f,0],u[s]=[.5,.5],s++;for(var M=s,h=0;h<=n;h++){var A=h/n,p=A*w,d=Math.cos(p),m=Math.sin(p);l[s]=[v*m,e*f/2,v*d],c[s]=[0,f,0],u[s]=[.5*d+.5,.5*m*f+.5],s++}for(var h=0;h<n;h++){var C=i+h,x=M+h;!0===o?(y[t]=[x,x+1,C],t++):(y[t]=[x+1,x,C],t++)}};return r>0&&z(!0),a>0&&z(!1),{uvs:u,cells:y,normals:c,positions:l}}module.exports=createCylinderMesh;

},{}],372:[function(_dereq_,module,exports){
"use strict";function createPlane(s,u,r,e,a){s=s||1,u=u||1,r=r||1,e=e||1;for(var o=!(!a||!a.quads)&&a.quads,p=[],t=[],n=[],h=[],l=0;l<=e;l++)for(var c=0;c<=r;c++){var i=c/r,v=l/e,d=-s/2+i*s,f=u/2-v*u;p.push([d,f,0]),t.push([i,v]),n.push([0,0,1]),l<e&&c<r&&(o?h.push([l*(r+1)+c,(l+1)*(r+1)+c,(l+1)*(r+1)+c+1,l*(r+1)+c+1]):(h.push([l*(r+1)+c,(l+1)*(r+1)+c+1,l*(r+1)+c+1]),h.push([(l+1)*(r+1)+c+1,l*(r+1)+c,(l+1)*(r+1)+c])))}return{positions:p,normals:n,uvs:t,cells:h}}module.exports=createPlane;

},{}],373:[function(_dereq_,module,exports){
"use strict";function primitiveSphere(t,e){e=e||{},t=void 0!==t?t:1;for(var r=void 0!==e.segments?e.segments:32,a=2+r,i=2*a,m=[],o=[],s=[],p=[],c=0;c<=a;c++){for(var n=c/a,l=n*Math.PI,u=0;u<=i;u++){var v=u/i,h=v*Math.PI*2;identity(matRotZ),rotateZ(matRotZ,matRotZ,-l),identity(matRotY),rotateY(matRotY,matRotY,h),transformMat4(tmpVec3,up,matRotZ),transformMat4(tmpVec3,tmpVec3,matRotY),scale(tmpVec3,tmpVec3,-t),o.push(tmpVec3.slice()),normalize(tmpVec3,tmpVec3),s.push(tmpVec3.slice()),p.push([v,1-n])}if(c>0)for(var R=o.length,V=R-2*(i+1);V+i+2<R;V++)m.push([V,V+1,V+i+1]),m.push([V+i+1,V+1,V+i+2])}return{cells:m,positions:o,normals:s,uvs:p}}var identity=_dereq_("gl-mat4/identity"),rotateY=_dereq_("gl-mat4/rotateY"),rotateZ=_dereq_("gl-mat4/rotateZ"),scale=_dereq_("gl-vec3/scale"),transformMat4=_dereq_("gl-vec3/transformMat4"),normalize=_dereq_("gl-vec3/normalize"),matRotY=identity([]),matRotZ=identity([]),up=[0,1,0],tmpVec3=[0,0,0];module.exports=primitiveSphere;

},{"gl-mat4/identity":188,"gl-mat4/rotateY":198,"gl-mat4/rotateZ":199,"gl-vec3/normalize":279,"gl-vec3/scale":284,"gl-vec3/transformMat4":291}],374:[function(_dereq_,module,exports){
"use strict";function createTorusMesh(e){e=e||{};for(var r=defined(e.majorRadius,1),s=defined(e.minorRadius,.25),a=defined(e.minorSegments,32),i=defined(e.majorSegments,64),o=defined(e.arc,2*Math.PI),n=2*Math.PI,t=[0,0,0],u=[],d=[],h=[],c=[0,0,0],f=[],m=0;m<=a;m++)for(var v=0;v<=i;v++){var M=v/i*o,l=m/a*n;t[0]=r*Math.cos(M),t[1]=r*Math.sin(M);var p=[(r+s*Math.cos(l))*Math.cos(M),(r+s*Math.cos(l))*Math.sin(M),s*Math.sin(l)];d.push(p),sub(c,p,t),normalize(c,c),f.push(c.slice()),u.push([v/i,m/a])}for(var m=1;m<=a;m++)for(var v=1;v<=i;v++){var g=(i+1)*m+v-1,b=(i+1)*(m-1)+v-1,q=(i+1)*(m-1)+v,z=(i+1)*m+v;h.push([g,b,z]),h.push([b,q,z])}return{uvs:u,cells:h,normals:f,positions:d}}var defined=_dereq_("defined"),sub=_dereq_("gl-vec3/subtract"),normalize=_dereq_("gl-vec3/normalize");module.exports=createTorusMesh;

},{"defined":147,"gl-vec3/normalize":279,"gl-vec3/subtract":289}],375:[function(_dereq_,module,exports){
(function (process){
"use strict";function nextTick(e,n,c,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,t,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,n)});case 3:return process.nextTick(function(){e.call(null,n,c)});case 4:return process.nextTick(function(){e.call(null,n,c,r)});default:for(s=new Array(o-1),t=0;t<s.length;)s[t++]=arguments[t];return process.nextTick(function(){e.apply(null,s)})}}!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports=nextTick:module.exports=process.nextTick;

}).call(this,_dereq_('_process'))
},{"_process":376}],376:[function(_dereq_,module,exports){
"use strict";function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],377:[function(_dereq_,module,exports){
(function (global){
"use strict";for(var now=_dereq_("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(e){if(0===queue.length){var o=now(),a=Math.max(0,frameDuration-(o-last));last=a+o,setTimeout(function(){var e=queue.slice(0);queue.length=0;for(var o=0;o<e.length;o++)if(!e[o].cancelled)try{e[o].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(a))}return queue.push({handle:++id,callback:e,cancelled:!1}),id},caf=function(e){for(var o=0;o<queue.length;o++)queue[o].handle===e&&(queue[o].cancelled=!0)}}module.exports=function(e){return raf.call(root,e)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(){root.requestAnimationFrame=raf,root.cancelAnimationFrame=caf};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"performance-now":356}],378:[function(_dereq_,module,exports){
"use strict";function add(r,d){for(var a=r.length,e=new Array(a),n=0;n<a;++n)e[n]=bnadd(r[n],d[n]);return e}var bnadd=_dereq_("big-rat/add");module.exports=add;

},{"big-rat/add":58}],379:[function(_dereq_,module,exports){
"use strict";function float2rat(r){for(var t=new Array(r.length),a=0;a<r.length;++a)t[a]=rat(r[a]);return t}module.exports=float2rat;var rat=_dereq_("big-rat");

},{"big-rat":61}],380:[function(_dereq_,module,exports){
"use strict";function muls(r,u){for(var e=rat(u),t=r.length,a=new Array(t),l=0;l<t;++l)a[l]=mul(r[l],e);return a}var rat=_dereq_("big-rat"),mul=_dereq_("big-rat/mul");module.exports=muls;

},{"big-rat":61,"big-rat/mul":70}],381:[function(_dereq_,module,exports){
"use strict";function sub(r,u){for(var b=r.length,e=new Array(b),s=0;s<b;++s)e[s]=bnsub(r[s],u[s]);return e}var bnsub=_dereq_("big-rat/sub");module.exports=sub;

},{"big-rat/sub":72}],382:[function(_dereq_,module,exports){
"use strict";function Ray(t,e){this.origin=t||[0,0,0],this.direction=e||[0,0,-1]}var intersectRayTriangle=_dereq_("ray-triangle-intersection"),intersectRayPlane=_dereq_("ray-plane-intersection"),intersectRaySphere=_dereq_("ray-sphere-intersection"),intersectRayBox=_dereq_("ray-aabb-intersection"),copy3=_dereq_("gl-vec3/copy"),tmpTriangle=[[0,0,0],[0,0,0],[0,0,0]],tmp3=[0,0,0];module.exports=Ray,Ray.prototype.set=function(t,e){this.origin=t,this.direction=e},Ray.prototype.copy=function(t){copy3(this.origin,t.origin),copy3(this.direction,t.direction)},Ray.prototype.clone=function(){var t=new Ray;return t.copy(this),t},Ray.prototype.intersectsSphere=function(t,e){return intersectRaySphere(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsPlane=function(t,e){return intersectRayPlane(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsTriangle=function(t){return intersectRayTriangle(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsBox=function(t){return intersectRayBox(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsTriangleCell=function(t,e){var i=t[0],r=t[1],n=t[2];return tmpTriangle[0]=e[i],tmpTriangle[1]=e[r],tmpTriangle[2]=e[n],this.intersectsTriangle(tmpTriangle)};

},{"gl-vec3/copy":263,"ray-aabb-intersection":383,"ray-plane-intersection":384,"ray-sphere-intersection":385,"ray-triangle-intersection":386}],383:[function(_dereq_,module,exports){
"use strict";function intersection(e,t,n,r){var i=distance(t,n,r);if(i===1/0)e=null;else{e=e||[];for(var s=0;s<t.length;s++)e[s]=t[s]+n[s]*i}return e}function distance(e,t,n){for(var r=e.length,i=-1/0,s=1/0,o=0;o<r;o++){var a=(n[0][o]-e[o])/t[o],c=(n[1][o]-e[o])/t[o];if(a>c){var u=a;a=c,c=u}if(c<i||a>s)return 1/0;a>i&&(i=a),c<s&&(s=c)}return i>s?1/0:i}module.exports=intersection,module.exports.distance=distance;

},{}],384:[function(_dereq_,module,exports){
"use strict";function intersectRayPlane(e,r,t,a,c){var l=dot(t,a);if(0!==l){var d=-(dot(r,a)+c)/l;return d<0?null:(scale(v0,t,d),add(e,r,v0))}return dot(a,r)+c===0?copy(e,r):null}var dot=_dereq_("gl-vec3/dot"),add=_dereq_("gl-vec3/add"),scale=_dereq_("gl-vec3/scale"),copy=_dereq_("gl-vec3/copy");module.exports=intersectRayPlane;var v0=[0,0,0];

},{"gl-vec3/add":260,"gl-vec3/copy":263,"gl-vec3/dot":268,"gl-vec3/scale":284}],385:[function(_dereq_,module,exports){
"use strict";function intersectRaySphere(e,r,t,d,s){sub(tmp,d,r);var a=dot(t,tmp);if(a<0)return null;scaleAndAdd(tmp,r,t,a);var u=squaredDist(d,tmp),c=s*s;return u>c?null:(scale(e,t,a-Math.sqrt(c-u)),add(e,e,r))}var squaredDist=_dereq_("gl-vec3/squaredDistance"),dot=_dereq_("gl-vec3/dot"),sub=_dereq_("gl-vec3/subtract"),scaleAndAdd=_dereq_("gl-vec3/scaleAndAdd"),scale=_dereq_("gl-vec3/scale"),add=_dereq_("gl-vec3/add"),tmp=[0,0,0];module.exports=intersectRaySphere;

},{"gl-vec3/add":260,"gl-vec3/dot":268,"gl-vec3/scale":284,"gl-vec3/scaleAndAdd":285,"gl-vec3/squaredDistance":287,"gl-vec3/subtract":289}],386:[function(_dereq_,module,exports){
"use strict";function intersectTriangle(e,r,c,t){sub(edge1,t[1],t[0]),sub(edge2,t[2],t[0]),cross(pvec,c,edge2);var v=dot(edge1,pvec);if(v<EPSILON)return null;sub(tvec,r,t[0]);var s=dot(tvec,pvec);if(s<0||s>v)return null;cross(qvec,tvec,edge1);var u=dot(c,qvec);if(u<0||s+u>v)return null;var d=dot(edge2,qvec)/v;return e[0]=r[0]+d*c[0],e[1]=r[1]+d*c[1],e[2]=r[2]+d*c[2],e}var cross=_dereq_("gl-vec3/cross"),dot=_dereq_("gl-vec3/dot"),sub=_dereq_("gl-vec3/subtract"),EPSILON=1e-6,edge1=[0,0,0],edge2=[0,0,0],tvec=[0,0,0],pvec=[0,0,0],qvec=[0,0,0];module.exports=intersectTriangle;

},{"gl-vec3/cross":265,"gl-vec3/dot":268,"gl-vec3/subtract":289}],387:[function(_dereq_,module,exports){
"use strict";function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(e){e.end()}var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var processNextTick=_dereq_("process-nextick-args"),util=_dereq_("core-util-is");util.inherits=_dereq_("inherits");var Readable=_dereq_("./_stream_readable"),Writable=_dereq_("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}

},{"./_stream_readable":389,"./_stream_writable":391,"core-util-is":141,"inherits":333,"process-nextick-args":375}],388:[function(_dereq_,module,exports){
"use strict";function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}module.exports=PassThrough;var Transform=_dereq_("./_stream_transform"),util=_dereq_("core-util-is");util.inherits=_dereq_("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)};

},{"./_stream_transform":390,"core-util-is":141,"inherits":333}],389:[function(_dereq_,module,exports){
(function (process){
"use strict";function prependListener(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function ReadableState(e,t){Duplex=Duplex||_dereq_("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=_dereq_("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||_dereq_("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),Stream.call(this)}function readableAddChunk(e,t,n,r,a){var i=chunkInvalid(t,n);if(i)e.emit("error",i);else if(null===n)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&a){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else{var u;!t.decoder||a||r||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),a||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else a||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?processNextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,processNextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,processNextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n}function fromListPartial(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?copyFromBufferString(e,t):copyFromBuffer(e,t),r}function copyFromBufferString(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,d=e>i.length?i.length:e;if(d===i.length?a+=i:a+=i.slice(0,e),0===(e-=d)){d===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(d));break}++r}return t.length-=r,a}function copyFromBuffer(e,t){var n=bufferShim.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,d),0===(e-=d)){d===i.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(d));break}++a}return t.length-=a,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,processNextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var processNextTick=_dereq_("process-nextick-args"),isArray=_dereq_("isarray"),Duplex;Readable.ReadableState=ReadableState;var EE=_dereq_("events").EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Stream=_dereq_("./internal/streams/stream"),Buffer=_dereq_("buffer").Buffer,bufferShim=_dereq_("buffer-shims"),util=_dereq_("core-util-is");util.inherits=_dereq_("inherits");var debugUtil=_dereq_("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var BufferList=_dereq_("./internal/streams/BufferList"),StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];Readable.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=bufferShim.from(e,t),t=""),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){return readableAddChunk(this,this._readableState,e,"",!0)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=_dereq_("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var r=t.needReadable;debug("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,debug("length less than watermark",r)),t.ended||t.reading?(r=!1,debug("reading or ended",r)):r&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t)));var a;return a=e>0?fromList(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),null!==a&&this.emit("data",a),a},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){debug("onunpipe"),e===s&&a()}function r(){debug("onend"),e.end()}function a(){debug("cleanup"),e.removeListener("close",o),e.removeListener("finish",u),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",a),s.removeListener("data",i),g=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}function i(t){debug("ondata"),b=!1,!1!==e.write(t)||b||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==indexOf(h.pipes,e))&&!g&&(debug("false write response, pause",s._readableState.awaitDrain),s._readableState.awaitDrain++,b=!0),s.pause())}function d(t){debug("onerror",t),l(),e.removeListener("error",d),0===EElistenerCount(e,"error")&&e.emit("error",t)}function o(){e.removeListener("finish",u),l()}function u(){debug("onfinish"),e.removeListener("close",o),l()}function l(){debug("unpipe"),s.unpipe(e)}var s=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,debug("pipe count=%d opts=%j",h.pipesCount,t);var f=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr,p=f?r:a;h.endEmitted?processNextTick(p):s.once("end",p),e.on("unpipe",n);var c=pipeOnDrain(s);e.on("drain",c);var g=!1,b=!1;return s.on("data",i),prependListener(e,"error",d),e.once("close",o),e.once("finish",u),e.emit("pipe",s),h.flowing||(debug("pipe resume"),s.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)n[a].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&emitReadable(this,r):processNextTick(nReadingNextTick,this))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){if(debug("wrapped data"),t.decoder&&(a=t.decoder.write(a)),(!t.objectMode||null!==a&&void 0!==a)&&(t.objectMode||a&&a.length)){r.push(a)||(n=!0,e.pause())}});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],r.emit.bind(r,kProxyEvents[i]));return r._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},r},Readable._fromList=fromList;

}).call(this,_dereq_('_process'))
},{"./_stream_duplex":387,"./internal/streams/BufferList":392,"./internal/streams/stream":393,"_process":376,"buffer":87,"buffer-shims":86,"core-util-is":141,"events":152,"inherits":333,"isarray":394,"process-nextick-args":375,"string_decoder/":395,"util":85}],390:[function(_dereq_,module,exports){
"use strict";function TransformState(r){this.afterTransform=function(t,n){return afterTransform(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var i=e.writecb;if(!i)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,null!==n&&void 0!==n&&r.push(n),i(t);var a=r._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&r._read(a.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(r,n){done(t,r,n)}):done(t)})}function done(r,t,n){if(t)return r.emit("error",t);null!==n&&void 0!==n&&r.push(n);var e=r._writableState,i=r._transformState;if(e.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=_dereq_("./_stream_duplex"),util=_dereq_("core-util-is");util.inherits=_dereq_("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};

},{"./_stream_duplex":387,"core-util-is":141,"inherits":333}],391:[function(_dereq_,module,exports){
(function (process){
"use strict";function nop(){}function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function WritableState(e,t){Duplex=Duplex||_dereq_("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||_dereq_("./_stream_duplex"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),Stream.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),processNextTick(t,r)}function validChunk(e,t,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),processNextTick(i,s),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=bufferShim.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,s){r||(i=decodeChunk(t,i,n),Buffer.isBuffer(i)&&(n="buffer"));var o=t.objectMode?1:i.length;t.length+=o;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(i,n,s),f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,o,i,n,s);return u}function doWrite(e,t,r,i,n,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?processNextTick(n,i):n(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var s=needFinish(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,s,n):afterWrite(e,r,s,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var o=0;r;)n[o]=r,r=r.next,o+=1;doWrite(e,t,!0,t.length,n,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;r;){var u=r.chunk,f=r.encoding,a=r.callback;if(doWrite(e,t,!1,t.objectMode?1:u.length,u,f,a),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var r=needFinish(t);return r&&(0===t.pendingcb?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?processNextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}module.exports=Writable;var processNextTick=_dereq_("process-nextick-args"),asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick,Duplex;Writable.WritableState=WritableState;var util=_dereq_("core-util-is");util.inherits=_dereq_("inherits");var internalUtil={deprecate:_dereq_("util-deprecate")},Stream=_dereq_("./internal/streams/stream"),Buffer=_dereq_("buffer").Buffer,bufferShim=_dereq_("buffer-shims");util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var realHasInstance;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||e&&e._writableState instanceof WritableState}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,s=Buffer.isBuffer(e);return"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(s||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,s,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)};

}).call(this,_dereq_('_process'))
},{"./_stream_duplex":387,"./internal/streams/stream":393,"_process":376,"buffer":87,"buffer-shims":86,"core-util-is":141,"inherits":333,"process-nextick-args":375,"util-deprecate":427}],392:[function(_dereq_,module,exports){
"use strict";function BufferList(){this.head=null,this.tail=null,this.length=0}var Buffer=_dereq_("buffer").Buffer,bufferShim=_dereq_("buffer-shims");module.exports=BufferList,BufferList.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},BufferList.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},BufferList.prototype.concat=function(t){if(0===this.length)return bufferShim.alloc(0);if(1===this.length)return this.head.data;for(var e=bufferShim.allocUnsafe(t>>>0),i=this.head,h=0;i;)i.data.copy(e,h),h+=i.data.length,i=i.next;return e};

},{"buffer":87,"buffer-shims":86}],393:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("events").EventEmitter;

},{"events":152}],394:[function(_dereq_,module,exports){
arguments[4][88][0].apply(exports,arguments)
},{"dup":88}],395:[function(_dereq_,module,exports){
"use strict";function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}function StringDecoder(t){this.encoding=normalizeEncoding(t);var e;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=bufferShim.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function utf8CheckIncomplete(t,e,s){var i=e.length-1;if(i<s)return 0;var r=utf8CheckByte(e[i]);return r>=0?(r>0&&(t.lastNeed=r-1),r):--i<s?0:(r=utf8CheckByte(e[i]))>=0?(r>0&&(t.lastNeed=r-2),r):--i<s?0:(r=utf8CheckByte(e[i]),r>=0?(r>0&&(2===r?r=0:t.lastNeed=r-3),r):0)}function utf8CheckExtraBytes(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(s);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(s+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(s+2)}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf8Text(t,e){var s=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}var Buffer=_dereq_("buffer").Buffer,bufferShim=_dereq_("buffer-shims"),isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};

},{"buffer":87,"buffer-shims":86}],396:[function(_dereq_,module,exports){
"use strict";exports=module.exports=_dereq_("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=_dereq_("./lib/_stream_writable.js"),exports.Duplex=_dereq_("./lib/_stream_duplex.js"),exports.Transform=_dereq_("./lib/_stream_transform.js"),exports.PassThrough=_dereq_("./lib/_stream_passthrough.js");

},{"./lib/_stream_duplex.js":387,"./lib/_stream_passthrough.js":388,"./lib/_stream_readable.js":389,"./lib/_stream_transform.js":390,"./lib/_stream_writable.js":391}],397:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("./readable").Transform;

},{"./readable":396}],398:[function(_dereq_,module,exports){
"use strict";function cofactor(r,e){for(var n=new Array(r.length-1),t=1;t<r.length;++t)for(var u=n[t-1]=new Array(r.length-1),o=0,a=0;o<r.length;++o)o!==e&&(u[a++]=r[t][o]);return n}function matrix(r){for(var e=new Array(r),n=0;n<r;++n){e[n]=new Array(r);for(var t=0;t<r;++t)e[n][t]=["m",t,"[",r-n-2,"]"].join("")}return e}function generateSum(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var e=r.length>>1;return["sum(",generateSum(r.slice(0,e)),",",generateSum(r.slice(e)),")"].join("")}function makeProduct(r,e){if("m"===r.charAt(0)){if("w"===e.charAt(0)){var n=r.split("[");return["w",e.substr(1),"m",n[0].substr(1)].join("")}return["prod(",r,",",e,")"].join("")}return makeProduct(e,r)}function sign(r){return!0&r?"-":""}function determinant(r){if(2===r.length)return[["diff(",makeProduct(r[0][0],r[1][1]),",",makeProduct(r[1][0],r[0][1]),")"].join("")];for(var e=[],n=0;n<r.length;++n)e.push(["scale(",generateSum(determinant(cofactor(r,n))),",",sign(n),r[0][n],")"].join(""));return e}function makeSquare(r,e){for(var n=[],t=0;t<e-2;++t)n.push(["prod(m",r,"[",t,"],m",r,"[",t,"])"].join(""));return generateSum(n)}function orientation(r){for(var e=[],n=[],t=matrix(r),u=0;u<r;++u)t[0][u]="1",t[r-1][u]="w"+u;for(var u=0;u<r;++u)0==(1&u)?e.push.apply(e,determinant(cofactor(t,u))):n.push.apply(n,determinant(cofactor(t,u)));for(var o=generateSum(e),a=generateSum(n),i="exactInSphere"+r,s=[],u=0;u<r;++u)s.push("m"+u);for(var c=["function ",i,"(",s.join(),"){"],u=0;u<r;++u){c.push("var w",u,"=",makeSquare(u,r),";");for(var f=0;f<r;++f)f!==u&&c.push("var w",u,"m",f,"=scale(w",u,",m",f,"[0]);")}return c.push("var p=",o,",n=",a,",d=diff(p,n);return d[d.length-1];}return ",i),new Function("sum","diff","prod","scale",c.join(""))(robustSum,robustDiff,twoProduct,robustScale)}function inSphere0(){return 0}function inSphere1(){return 0}function inSphere2(){return 0}function slowInSphere(r){var e=CACHED[r.length];return e||(e=CACHED[r.length]=orientation(r.length)),e.apply(void 0,r)}function generateInSphereTest(){for(;CACHED.length<=NUM_EXPAND;)CACHED.push(orientation(CACHED.length));for(var r=[],e=["slow"],n=0;n<=NUM_EXPAND;++n)r.push("a"+n),e.push("o"+n);for(var t=["function testInSphere(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=NUM_EXPAND;++n)t.push("case ",n,":return o",n,"(",r.slice(0,n).join(),");");t.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(t.join(""));var u=Function.apply(void 0,e);module.exports=u.apply(void 0,[slowInSphere].concat(CACHED));for(var n=0;n<=NUM_EXPAND;++n)module.exports[n]=CACHED[n]}var twoProduct=_dereq_("two-product"),robustSum=_dereq_("robust-sum"),robustDiff=_dereq_("robust-subtract"),robustScale=_dereq_("robust-scale"),NUM_EXPAND=6,CACHED=[inSphere0,inSphere1,inSphere2];generateInSphereTest();

},{"robust-scale":401,"robust-subtract":403,"robust-sum":404,"two-product":421}],399:[function(_dereq_,module,exports){
"use strict";function cofactor(r,t){for(var n=new Array(r.length-1),e=1;e<r.length;++e)for(var o=n[e-1]=new Array(r.length-1),a=0,u=0;a<r.length;++a)a!==t&&(o[u++]=r[e][a]);return n}function matrix(r){for(var t=new Array(r),n=0;n<r;++n){t[n]=new Array(r);for(var e=0;e<r;++e)t[n][e]=["m",e,"[",r-n-1,"]"].join("")}return t}function sign(r){return 1&r?"-":""}function generateSum(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var t=r.length>>1;return["sum(",generateSum(r.slice(0,t)),",",generateSum(r.slice(t)),")"].join("")}function determinant(r){if(2===r.length)return[["sum(prod(",r[0][0],",",r[1][1],"),prod(-",r[0][1],",",r[1][0],"))"].join("")];for(var t=[],n=0;n<r.length;++n)t.push(["scale(",generateSum(determinant(cofactor(r,n))),",",sign(n),r[0][n],")"].join(""));return t}function orientation(r){for(var t=[],n=[],e=matrix(r),o=[],a=0;a<r;++a)0==(1&a)?t.push.apply(t,determinant(cofactor(e,a))):n.push.apply(n,determinant(cofactor(e,a))),o.push("m"+a);var u=generateSum(t),i=generateSum(n),s="orientation"+r+"Exact",c=["function ",s,"(",o.join(),"){var p=",u,",n=",i,",d=sub(p,n);return d[d.length-1];};return ",s].join("");return new Function("sum","prod","scale","sub",c)(robustSum,twoProduct,robustScale,robustSubtract)}function slowOrient(r){var t=CACHED[r.length];return t||(t=CACHED[r.length]=orientation(r.length)),t.apply(void 0,r)}function generateOrientationProc(){for(;CACHED.length<=NUM_EXPAND;)CACHED.push(orientation(CACHED.length));for(var r=[],t=["slow"],n=0;n<=NUM_EXPAND;++n)r.push("a"+n),t.push("o"+n);for(var e=["function getOrientation(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=NUM_EXPAND;++n)e.push("case ",n,":return o",n,"(",r.slice(0,n).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(e.join(""));var o=Function.apply(void 0,t);module.exports=o.apply(void 0,[slowOrient].concat(CACHED));for(var n=0;n<=NUM_EXPAND;++n)module.exports[n]=CACHED[n]}var twoProduct=_dereq_("two-product"),robustSum=_dereq_("robust-sum"),robustScale=_dereq_("robust-scale"),robustSubtract=_dereq_("robust-subtract"),NUM_EXPAND=5,EPSILON=1.1102230246251565e-16,ERRBOUND3=(3+16*EPSILON)*EPSILON,ERRBOUND4=(7+56*EPSILON)*EPSILON,orientation3Exact=orientation(3),orientation4Exact=orientation(4),CACHED=[function(){return 0},function(){return 0},function(r,t){return t[0]-r[0]},function(r,t,n){var e,o=(r[1]-n[1])*(t[0]-n[0]),a=(r[0]-n[0])*(t[1]-n[1]),u=o-a;if(o>0){if(a<=0)return u;e=o+a}else{if(!(o<0))return u;if(a>=0)return u;e=-(o+a)}var i=ERRBOUND3*e;return u>=i||u<=-i?u:orientation3Exact(r,t,n)},function(r,t,n,e){var o=r[0]-e[0],a=t[0]-e[0],u=n[0]-e[0],i=r[1]-e[1],s=t[1]-e[1],c=n[1]-e[1],h=r[2]-e[2],l=t[2]-e[2],f=n[2]-e[2],g=a*c,p=u*s,m=u*i,E=o*c,b=o*s,v=a*i,N=h*(g-p)+l*(m-E)+f*(b-v),d=(Math.abs(g)+Math.abs(p))*Math.abs(h)+(Math.abs(m)+Math.abs(E))*Math.abs(l)+(Math.abs(b)+Math.abs(v))*Math.abs(f),A=ERRBOUND4*d;return N>A||-N>A?N:orientation4Exact(r,t,n,e)}];generateOrientationProc();

},{"robust-scale":401,"robust-subtract":403,"robust-sum":404,"two-product":421}],400:[function(_dereq_,module,exports){
"use strict";function robustProduct(r,t){if(1===r.length)return robustScale(t,r[0]);if(1===t.length)return robustScale(r,t[0]);if(0===r.length||0===t.length)return[0];var e=[0];if(r.length<t.length)for(var u=0;u<r.length;++u)e=robustSum(e,robustScale(t,r[u]));else for(var u=0;u<t.length;++u)e=robustSum(e,robustScale(r,t[u]));return e}var robustSum=_dereq_("robust-sum"),robustScale=_dereq_("robust-scale");module.exports=robustProduct;

},{"robust-scale":401,"robust-sum":404}],401:[function(_dereq_,module,exports){
"use strict";function scaleLinearExpansion(r,t){var o=r.length;if(1===o){var e=twoProduct(r[0],t);return e[0]?e:[e[1]]}var u=new Array(2*o),a=[.1,.1],n=[.1,.1],c=0;twoProduct(r[0],t,a),a[0]&&(u[c++]=a[0]);for(var i=1;i<o;++i){twoProduct(r[i],t,n);var w=a[1];twoSum(w,n[0],a),a[0]&&(u[c++]=a[0]);var s=n[1],v=a[1],d=s+v,l=d-s,m=v-l;a[1]=d,m&&(u[c++]=m)}return a[1]&&(u[c++]=a[1]),0===c&&(u[c++]=0),u.length=c,u}var twoProduct=_dereq_("two-product"),twoSum=_dereq_("two-sum");module.exports=scaleLinearExpansion;

},{"two-product":421,"two-sum":422}],402:[function(_dereq_,module,exports){
"use strict";function checkCollinear(r,e,t,n){for(var i=0;i<2;++i){var o=r[i],a=e[i],s=Math.min(o,a),u=Math.max(o,a),c=t[i],m=n[i],h=Math.min(c,m);if(Math.max(c,m)<s||u<h)return!1}return!0}function segmentsIntersect(r,e,t,n){var i=orient(r,t,n),o=orient(e,t,n);if(i>0&&o>0||i<0&&o<0)return!1;var a=orient(t,r,e),s=orient(n,r,e);return!(a>0&&s>0||a<0&&s<0)&&(0!==i||0!==o||0!==a||0!==s||checkCollinear(r,e,t,n))}module.exports=segmentsIntersect;var orient=_dereq_("robust-orientation")[3];

},{"robust-orientation":399}],403:[function(_dereq_,module,exports){
"use strict";function scalarScalar(r,t){var a=r+t,n=a-r,u=a-n,e=t-n,c=r-u,o=c+e;return o?[o,a]:[a]}function robustSubtract(r,t){var a=0|r.length,n=0|t.length;if(1===a&&1===n)return scalarScalar(r[0],-t[0]);var u,e,c=a+n,o=new Array(c),l=0,s=0,f=0,b=Math.abs,h=r[s],i=b(h),v=-t[f],S=b(v);i<S?(e=h,(s+=1)<a&&(h=r[s],i=b(h))):(e=v,(f+=1)<n&&(v=-t[f],S=b(v))),s<a&&i<S||f>=n?(u=h,(s+=1)<a&&(h=r[s],i=b(h))):(u=v,(f+=1)<n&&(v=-t[f],S=b(v)));for(var g,d,m,p,w,x=u+e,y=x-u,A=e-y,M=A,j=x;s<a&&f<n;)i<S?(u=h,(s+=1)<a&&(h=r[s],i=b(h))):(u=v,(f+=1)<n&&(v=-t[f],S=b(v))),e=M,x=u+e,y=x-u,A=e-y,A&&(o[l++]=A),g=j+x,d=g-j,m=g-d,p=x-d,w=j-m,M=w+p,j=g;for(;s<a;)u=h,e=M,x=u+e,y=x-u,A=e-y,A&&(o[l++]=A),g=j+x,d=g-j,m=g-d,p=x-d,w=j-m,M=w+p,j=g,(s+=1)<a&&(h=r[s]);for(;f<n;)u=v,e=M,x=u+e,y=x-u,A=e-y,A&&(o[l++]=A),g=j+x,d=g-j,m=g-d,p=x-d,w=j-m,M=w+p,j=g,(f+=1)<n&&(v=-t[f]);return M&&(o[l++]=M),j&&(o[l++]=j),l||(o[l++]=0),o.length=l,o}module.exports=robustSubtract;

},{}],404:[function(_dereq_,module,exports){
"use strict";function scalarScalar(r,a){var n=r+a,e=n-r,t=n-e,l=a-e,o=r-t,u=o+l;return u?[u,n]:[n]}function linearExpansionSum(r,a){var n=0|r.length,e=0|a.length;if(1===n&&1===e)return scalarScalar(r[0],a[0]);var t,l,o=n+e,u=new Array(o),i=0,s=0,c=0,f=Math.abs,h=r[s],v=f(h),S=a[c],g=f(S);v<g?(l=h,(s+=1)<n&&(h=r[s],v=f(h))):(l=S,(c+=1)<e&&(S=a[c],g=f(S))),s<n&&v<g||c>=e?(t=h,(s+=1)<n&&(h=r[s],v=f(h))):(t=S,(c+=1)<e&&(S=a[c],g=f(S)));for(var m,p,x,E,b,d=t+l,w=d-t,y=l-w,A=y,M=d;s<n&&c<e;)v<g?(t=h,(s+=1)<n&&(h=r[s],v=f(h))):(t=S,(c+=1)<e&&(S=a[c],g=f(S))),l=A,d=t+l,w=d-t,y=l-w,y&&(u[i++]=y),m=M+d,p=m-M,x=m-p,E=d-p,b=M-x,A=b+E,M=m;for(;s<n;)t=h,l=A,d=t+l,w=d-t,y=l-w,y&&(u[i++]=y),m=M+d,p=m-M,x=m-p,E=d-p,b=M-x,A=b+E,M=m,(s+=1)<n&&(h=r[s]);for(;c<e;)t=S,l=A,d=t+l,w=d-t,y=l-w,y&&(u[i++]=y),m=M+d,p=m-M,x=m-p,E=d-p,b=M-x,A=b+E,M=m,(c+=1)<e&&(S=a[c]);return A&&(u[i++]=A),M&&(u[i++]=M),i||(u[i++]=0),u.length=i,u}module.exports=linearExpansionSum;

},{}],405:[function(_dereq_,module,exports){
"use strict";module.exports=function(s,t){t||(t={});var i=[],u=[],p=[],h=[],e=t.attributes?{}:null,o=e&&Object.keys(t.attributes);if(e)for(var r=0;r<o.length;r++)e[o[r]]=[];for(var n=s.edges||[],a=0;a<n.length;a++){var l=i.length,b=n[a];if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]])}u.push(i[l+2],i[l+3],i[l],i[l+1]),p.push(1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3])}for(var f=s.cells||[],a=0;a<f.length;a++){var l=i.length,b=f[a];if(2===b.length){if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]])}u.push(i[l+2],i[l+3],i[l],i[l+1]),p.push(1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3])}else{if(3!==b.length)throw new Error("expected a triangle, got "+b.length+"-sided cell");if(i.push(s.positions[b[0]]),i.push(s.positions[b[0]]),i.push(s.positions[b[1]]),i.push(s.positions[b[1]]),i.push(s.positions[b[2]]),i.push(s.positions[b[2]]),e)for(var r=0;r<o.length;r++){var g=o[r];e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[0]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[1]]),e[g].push(t.attributes[g][b[2]]),e[g].push(t.attributes[g][b[2]])}u.push(i[l+2],i[l+3],i[l+4],i[l+5],i[l],i[l+1]),p.push(1,-1,1,-1,1,-1),h.push([l,l+1,l+2],[l,l+2,l+3]),h.push([l+2,l+3,l+4],[l+2,l+4,l+5]),h.push([l+4,l+5,l],[l+4,l,l+1])}}return{positions:i,cells:h,nextPositions:u,directions:p,attributes:e}};

},{}],406:[function(_dereq_,module,exports){
"use strict";var isArrayish=_dereq_("is-arrayish"),concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle=module.exports=function(r){for(var e=[],i=0,t=r.length;i<t;i++){var s=r[i];isArrayish(s)?e=concat.call(e,slice.call(s)):e.push(s)}return e};swizzle.wrap=function(r){return function(){return r(swizzle(arguments))}};

},{"is-arrayish":337}],407:[function(_dereq_,module,exports){
arguments[4][75][0].apply(exports,arguments)
},{"dup":75}],408:[function(_dereq_,module,exports){
"use strict";function UnionFind(n){this.roots=new Array(n),this.ranks=new Array(n);for(var t=0;t<n;++t)this.roots[t]=t,this.ranks[t]=0}module.exports=UnionFind,UnionFind.prototype.length=function(){return this.roots.length},UnionFind.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},UnionFind.prototype.find=function(n){for(var t=this.roots;t[n]!==n;){var o=t[n];t[n]=t[o],n=o}return n},UnionFind.prototype.link=function(n,t){var o=this.find(n),i=this.find(t);if(o!==i){var r=this.ranks,s=this.roots,h=r[o],e=r[i];h<e?s[o]=i:e<h?s[i]=o:(s[i]=o,++r[o])}};

},{}],409:[function(_dereq_,module,exports){
"use strict";function dimension(e){for(var n=0,r=Math.max,t=0,o=e.length;t<o;++t)n=r(n,e[t].length);return n-1}function countVertices(e){for(var n=-1,r=Math.max,t=0,o=e.length;t<o;++t)for(var l=e[t],i=0,a=l.length;i<a;++i)n=r(n,l[i]);return n+1}function cloneCells(e){for(var n=new Array(e.length),r=0,t=e.length;r<t;++r)n[r]=e[r].slice(0);return n}function compareCells(e,n){var r=e.length,t=e.length-n.length,o=Math.min;if(t)return t;switch(r){case 0:return 0;case 1:return e[0]-n[0];case 2:var l=e[0]+e[1]-n[0]-n[1];return l||o(e[0],e[1])-o(n[0],n[1]);case 3:var i=e[0]+e[1],a=n[0]+n[1];if(l=i+e[2]-(a+n[2]))return l;var s=o(e[0],e[1]),u=o(n[0],n[1]),l=o(s,e[2])-o(u,n[2]);return l||o(s+e[2],i)-o(u+n[2],a);default:var f=e.slice(0);f.sort();var c=n.slice(0);c.sort();for(var h=0;h<r;++h)if(t=f[h]-c[h])return t;return 0}}function compareZipped(e,n){return compareCells(e[0],n[0])}function normalize(e,n){if(n){for(var r=e.length,t=new Array(r),o=0;o<r;++o)t[o]=[e[o],n[o]];t.sort(compareZipped);for(var o=0;o<r;++o)e[o]=t[o][0],n[o]=t[o][1];return e}return e.sort(compareCells),e}function unique(e){if(0===e.length)return[];for(var n=1,r=e.length,t=1;t<r;++t){var o=e[t];if(compareCells(o,e[t-1])){if(t===n){n++;continue}e[n++]=o}}return e.length=n,e}function findCell(e,n){for(var r=0,t=e.length-1,o=-1;r<=t;){var l=r+t>>1,i=compareCells(e[l],n);i<=0?(0===i&&(o=l),r=l+1):i>0&&(t=l-1)}return o}function incidence(e,n){for(var r=new Array(e.length),t=0,o=r.length;t<o;++t)r[t]=[];for(var l=[],t=0,i=n.length;t<i;++t)for(var a=n[t],s=a.length,u=1,f=1<<s;u<f;++u){l.length=bits.popCount(u);for(var c=0,h=0;h<s;++h)u&1<<h&&(l[c++]=a[h]);var p=findCell(e,l);if(!(p<0))for(;;)if(r[p++].push(t),p>=e.length||0!==compareCells(e[p],l))break}return r}function dual(e,n){if(!n)return incidence(unique(skeleton(e,0)),e,0);for(var r=new Array(n),t=0;t<n;++t)r[t]=[];for(var t=0,o=e.length;t<o;++t)for(var l=e[t],i=0,a=l.length;i<a;++i)r[l[i]].push(t);return r}function explode(e){for(var n=[],r=0,t=e.length;r<t;++r)for(var o=e[r],l=0|o.length,i=1,a=1<<l;i<a;++i){for(var s=[],u=0;u<l;++u)i>>>u&1&&s.push(o[u]);n.push(s)}return normalize(n)}function skeleton(e,n){if(n<0)return[];for(var r=[],t=(1<<n+1)-1,o=0;o<e.length;++o)for(var l=e[o],i=t;i<1<<l.length;i=bits.nextCombination(i)){for(var a=new Array(n+1),s=0,u=0;u<l.length;++u)i&1<<u&&(a[s++]=l[u]);r.push(a)}return normalize(r)}function boundary(e){for(var n=[],r=0,t=e.length;r<t;++r)for(var o=e[r],l=0,i=o.length;l<i;++l){for(var a=new Array(o.length-1),s=0,u=0;s<i;++s)s!==l&&(a[u++]=o[s]);n.push(a)}return normalize(n)}function connectedComponents_dense(e,n){for(var r=new UnionFind(n),t=0;t<e.length;++t)for(var o=e[t],l=0;l<o.length;++l)for(var i=l+1;i<o.length;++i)r.link(o[l],o[i]);for(var a=[],s=r.ranks,t=0;t<s.length;++t)s[t]=-1;for(var t=0;t<e.length;++t){var u=r.find(e[t][0]);s[u]<0?(s[u]=a.length,a.push([e[t].slice(0)])):a[s[u]].push(e[t].slice(0))}return a}function connectedComponents_sparse(e){for(var n=unique(normalize(skeleton(e,0))),r=new UnionFind(n.length),t=0;t<e.length;++t)for(var o=e[t],l=0;l<o.length;++l)for(var i=findCell(n,[o[l]]),a=l+1;a<o.length;++a)r.link(i,findCell(n,[o[a]]));for(var s=[],u=r.ranks,t=0;t<u.length;++t)u[t]=-1;for(var t=0;t<e.length;++t){var f=r.find(findCell(n,[e[t][0]]));u[f]<0?(u[f]=s.length,s.push([e[t].slice(0)])):s[u[f]].push(e[t].slice(0))}return s}function connectedComponents(e,n){return n?connectedComponents_dense(e,n):connectedComponents_sparse(e)}var bits=_dereq_("bit-twiddle"),UnionFind=_dereq_("union-find");exports.dimension=dimension,exports.countVertices=countVertices,exports.cloneCells=cloneCells,exports.compareCells=compareCells,exports.normalize=normalize,exports.unique=unique,exports.findCell=findCell,exports.incidence=incidence,exports.dual=dual,exports.explode=explode,exports.skeleton=skeleton,exports.boundary=boundary,exports.connectedComponents=connectedComponents;

},{"bit-twiddle":407,"union-find":408}],410:[function(_dereq_,module,exports){
"use strict";function errorWeight(r,n,t){return Math.abs(orient(r,n,t))/Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))}function simplifyPolygon(r,n,t){function e(r){if(y[r])return 1/0;var t=g[r],e=p[r];return t<0||e<0?1/0:errorWeight(n[r],n[t],n[e])}function i(r,n){var t=M[r],e=M[n];M[r]=e,M[n]=t,d[t]=n,d[e]=r}function o(r){return w[M[r]]}function a(r){return 1&r?r-1>>1:(r>>1)-1}function f(r){for(var n=o(r);;){var t=n,e=2*r+1,a=2*(r+1),f=r;if(e<k){var u=o(e);u<t&&(f=e,t=u)}if(a<k){o(a)<t&&(f=a)}if(f===r)return r;i(r,f),r=f}}function u(r){for(var n=o(r);r>0;){var t=a(r);if(t>=0){if(n<o(t)){i(r,t),r=t;continue}}return r}}function v(){if(k>0){var r=M[0];return i(0,k-1),k-=1,f(0),r}return-1}function c(r,n){var t=M[r];return w[t]===n?r:(w[t]=-1/0,u(r),v(),w[t]=n,k+=1,u(k-1))}function h(r,n){if(r[n]<0)return n;var t=n,e=n;do{var i=r[e];if(!y[e]||i<0||i===e)break;if(e=i,i=r[e],!y[e]||i<0||i===e)break;e=i,t=r[t]}while(t!==e);for(var o=n;o!==e;o=r[o])r[o]=e;return e}for(var s=n.length,l=r.length,g=new Array(s),p=new Array(s),w=new Array(s),y=new Array(s),m=0;m<s;++m)g[m]=p[m]=-1,w[m]=1/0,y[m]=!1;for(var m=0;m<l;++m){var b=r[m];if(2!==b.length)throw new Error("Input must be a graph");var A=b[1],q=b[0];-1!==p[q]?p[q]=-2:p[q]=A,-1!==g[A]?g[A]=-2:g[A]=q}for(var M=[],d=new Array(s),m=0;m<s;++m){(w[m]=e(m))<1/0?(d[m]=M.length,M.push(m)):d[m]=-1}for(var k=M.length,m=k>>1;m>=0;--m)f(m);for(;;){var x=v();if(x<0||w[x]>t)break;!function(r){if(!y[r]){y[r]=!0;var n=g[r],t=p[r];g[t]>=0&&(g[t]=n),p[n]>=0&&(p[n]=t),d[n]>=0&&c(d[n],e(n)),d[t]>=0&&c(d[t],e(t))}}(x)}for(var E=[],m=0;m<s;++m)y[m]||(d[m]=E.length,E.push(n[m].slice()));var P=(E.length,[]);return r.forEach(function(r){var n=h(g,r[0]),t=h(p,r[1]);if(n>=0&&t>=0&&n!==t){var e=d[n],i=d[t];e!==i&&P.push([e,i])}}),sc.unique(sc.normalize(P)),{positions:E,edges:P}}module.exports=simplifyPolygon;var orient=_dereq_("robust-orientation"),sc=_dereq_("simplicial-complex");

},{"robust-orientation":399,"simplicial-complex":409}],411:[function(_dereq_,module,exports){
"use strict";function horizontalOrder(r,e){var t,i;if(e[0][0]<e[1][0])t=e[0],i=e[1];else{if(!(e[0][0]>e[1][0])){var n=Math.min(r[0][1],r[1][1]),o=Math.max(r[0][1],r[1][1]),a=Math.min(e[0][1],e[1][1]),f=Math.max(e[0][1],e[1][1]);return o<a?o-a:n>f?n-f:o-f}t=e[1],i=e[0]}var u,s;r[0][1]<r[1][1]?(u=r[0],s=r[1]):(u=r[1],s=r[0]);var l=orient(i,t,u);return l||((l=orient(i,t,s))||s-i)}function orderSegments(r,e){var t,i;if(e[0][0]<e[1][0])t=e[0],i=e[1];else{if(!(e[0][0]>e[1][0]))return horizontalOrder(e,r);t=e[1],i=e[0]}var n,o;if(r[0][0]<r[1][0])n=r[0],o=r[1];else{if(!(r[0][0]>r[1][0]))return-horizontalOrder(r,e);n=r[1],o=r[0]}var a=orient(t,i,o),f=orient(t,i,n);if(a<0){if(f<=0)return a}else if(a>0){if(f>=0)return a}else if(f)return f;if(a=orient(o,n,i),f=orient(o,n,t),a<0){if(f<=0)return a}else if(a>0){if(f>=0)return a}else if(f)return f;return i[0]-o[0]}module.exports=orderSegments;var orient=_dereq_("robust-orientation");

},{"robust-orientation":399}],412:[function(_dereq_,module,exports){
"use strict";function SlabDecomposition(e,t,r){this.slabs=e,this.coordinates=t,this.horizontal=r}function compareHorizontal(e,t){return e.y-t}function searchBucket(e,t){for(var r=null;e;){var n,i,s=e.key;s[0][0]<s[1][0]?(n=s[0],i=s[1]):(n=s[1],i=s[0]);var o=orient(n,i,t);if(o<0)e=e.left;else if(o>0)if(t[0]!==s[1][0])r=e,e=e.right;else{var a=searchBucket(e.right,t);if(a)return a;e=e.left}else{if(t[0]!==s[1][0])return e;var a=searchBucket(e.right,t);if(a)return a;e=e.left}}return r}function IntervalSegment(e,t,r,n){this.y=e,this.index=t,this.start=r,this.closed=n}function Event(e,t,r,n){this.x=e,this.segment=t,this.create=r,this.index=n}function createSlabDecomposition(e){for(var t=e.length,r=2*t,n=new Array(r),i=0;i<t;++i){var s=e[i],o=s[0][0]<s[1][0];n[2*i]=new Event(s[0][0],s,o,i),n[2*i+1]=new Event(s[1][0],s,!o,i)}n.sort(function(e,t){var r=e.x-t.x;return r||((r=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});for(var a=createRBTree(orderSegments),u=[],l=[],c=[],i=0;i<r;){for(var h=n[i].x,f=[];i<r;){var m=n[i];if(m.x!==h)break;i+=1,m.segment[0][0]===m.x&&m.segment[1][0]===m.x?m.create&&(m.segment[0][1]<m.segment[1][1]?(f.push(new IntervalSegment(m.segment[0][1],m.index,!0,!0)),f.push(new IntervalSegment(m.segment[1][1],m.index,!1,!1))):(f.push(new IntervalSegment(m.segment[1][1],m.index,!0,!1)),f.push(new IntervalSegment(m.segment[0][1],m.index,!1,!0)))):a=m.create?a.insert(m.segment,m.index):a.remove(m.segment)}u.push(a.root),l.push(h),c.push(f)}return new SlabDecomposition(u,l,c)}module.exports=createSlabDecomposition;var bounds=_dereq_("binary-search-bounds"),createRBTree=_dereq_("functional-red-black-tree"),orient=_dereq_("robust-orientation"),orderSegments=_dereq_("./lib/order-segments"),proto=SlabDecomposition.prototype;proto.castUp=function(e){var t=bounds.le(this.coordinates,e[0]);if(t<0)return-1;var r=(this.slabs[t],searchBucket(this.slabs[t],e)),n=-1;if(r&&(n=r.value),this.coordinates[t]===e[0]){var i=null;if(r&&(i=r.key),t>0){var s=searchBucket(this.slabs[t-1],e);s&&(i?orderSegments(s.key,i)>0&&(i=s.key,n=s.value):(n=s.value,i=s.key))}var o=this.horizontal[t];if(o.length>0){var a=bounds.ge(o,e[1],compareHorizontal);if(a<o.length){var u=o[a];if(e[1]===u.y){if(u.closed)return u.index;for(;a<o.length-1&&o[a+1].y===e[1];)if(a+=1,u=o[a],u.closed)return u.index;if(u.y===e[1]&&!u.start){if((a+=1)>=o.length)return n;u=o[a]}}if(u.start)if(i){var l=orient(i[0],i[1],[e[0],u.y]);i[0][0]>i[1][0]&&(l=-l),l>0&&(n=u.index)}else n=u.index;else u.y!==e[1]&&(n=u.index)}}}return n};

},{"./lib/order-segments":411,"binary-search-bounds":74,"functional-red-black-tree":157,"robust-orientation":399}],413:[function(_dereq_,module,exports){
"use strict";function buildSurfaceNets(r,e){var n=r.length,u=["'use strict';"],s="surfaceNets"+r.join("_")+"d"+e;u.push("var contour=genContour({","order:[",r.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&u.push("getters:[0],");for(var t=[],o=[],a=0;a<n;++a)t.push("d"+a),o.push("d"+a);for(var a=0;a<1<<n;++a)t.push("v"+a),o.push("v"+a);for(var a=0;a<1<<n;++a)t.push("p"+a),o.push("p"+a);t.push("a","b","c"),o.push("a","c"),u.push("vertex:function vertexFunc(",t.join(),"){");for(var i=[],a=0;a<1<<n;++a)i.push("(p"+a+"<<"+a+")");u.push("var m=(",i.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var p=[],c=[];1<<(1<<n)<=128?(u.push("switch(m){"),c=u):u.push("switch(m>>>7){");for(var a=0;a<1<<(1<<n);++a){if(1<<(1<<n)>128&&a%128==0){p.length>0&&c.push("}}");var h="vExtra"+p.length;u.push("case ",a>>>7,":",h,"(m&0x7f,",o.join(),");break;"),c=["function ",h,"(m,",o.join(),"){switch(m){"],p.push(c)}c.push("case ",127&a,":");for(var v=new Array(n),f=new Array(n),l=new Array(n),g=new Array(n),m=0,d=0;d<n;++d)v[d]=[],f[d]=[],l[d]=0,g[d]=0;for(var d=0;d<1<<n;++d)for(var j=0;j<n;++j){var C=d^1<<j;if(!(C>d)&&!(a&1<<C)!=!(a&1<<d)){var b=1;a&1<<C?f[j].push("v"+C+"-v"+d):(f[j].push("v"+d+"-v"+C),b=-b),b<0?(v[j].push("-v"+d+"-v"+C),l[j]+=2):(v[j].push("v"+d+"+v"+C),l[j]-=2),m+=1;for(var y=0;y<n;++y)y!==j&&(C&1<<y?g[y]+=1:g[y]-=1)}}for(var w=[],j=0;j<n;++j)if(0===v[j].length)w.push("d"+j+"-0.5");else{var A="";l[j]<0?A=l[j]+"*c":l[j]>0&&(A="+"+l[j]+"*c");var x=v[j].length/m*.5,E=.5+g[j]/m*.5;w.push("d"+j+"-"+E+"-"+x+"*("+v[j].join("+")+A+")/("+f[j].join("+")+")")}c.push("a.push([",w.join(),"]);","break;")}u.push("}},"),p.length>0&&c.push("}}");for(var N=[],a=0;a<1<<n-1;++a)N.push("v"+a);N.push("c0","c1","p0","p1","a","b","c"),u.push("cell:function cellFunc(",N.join(),"){");var F=triangulateCube(n-1);u.push("if(p0){b.push(",F.map(function(r){return"["+r.map(function(r){return"v"+r})+"]"}).join(),")}else{b.push(",F.map(function(r){var e=r.slice();return e.reverse(),"["+e.map(function(r){return"v"+r})+"]"}).join(),")}}});function ",s,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",s,";");for(var a=0;a<p.length;++a)u.push(p[a].join(""));return new Function("genContour",u.join(""))(generateContourExtractor)}function mesh1D(r,e){for(var n=zeroCrossings(r,e),u=n.length,s=new Array(u),t=new Array(u),o=0;o<u;++o)s[o]=[n[o]],t[o]=[o];return{positions:s,cells:t}}function surfaceNets(r,e){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return mesh1D(r,e);var n=r.order.join()+"-"+r.dtype,u=CACHE[n],e=+e||0;return u||(u=CACHE[n]=buildSurfaceNets(r.order,r.dtype)),u(r,e)}module.exports=surfaceNets;var generateContourExtractor=_dereq_("ndarray-extract-contour"),triangulateCube=_dereq_("triangulate-hypercube"),zeroCrossings=_dereq_("zero-crossings"),CACHE={};

},{"ndarray-extract-contour":350,"triangulate-hypercube":420,"zero-crossings":436}],414:[function(_dereq_,module,exports){
"use strict";function check_kb(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||(e=document.createEvent("Event"),e.initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}var doc=document||{},use_key_event=!0;try{doc.createEvent("KeyEvents")}catch(e){use_key_event=!1}var modern=function(e,t){t=t||{};var n=typeOf(e),r=n;"KeyboardEvent"===n&&use_key_event&&(n="KeyEvents",r="KeyEvent");var y=doc.createEvent(n),a="init"+r,c="function"==typeof y[a]?a:"initEvent",o=initSignatures[c],i=[],v={};t.type=e;for(var u=0;u<o.length;++u){var d=o[u],s=t[d];void 0===s&&(s=y[d]),v[d]=!0,i.push(s)}y[c].apply(y,i),"KeyboardEvent"===n&&(y=check_kb(y,t));for(var d in t)v[d]||(y[d]=t[d]);return y},legacy=function(e,t){t=t||{};var n=doc.createEventObject();n.type=e;for(var r in t)void 0!==t[r]&&(n[r]=t[r]);return n};module.exports=doc.createEvent?modern:legacy;var initSignatures=_dereq_("./init.json"),types=_dereq_("./types.json"),typeOf=function(){var e={};for(var t in types)for(var n=types[t],r=0;r<n.length;r++)e[n[r]]=t;return function(t){return e[t]||"Event"}}();

},{"./init.json":415,"./types.json":416}],415:[function(_dereq_,module,exports){
module.exports={
  "initEvent" : [
    "type",
    "bubbles",
    "cancelable"
  ],
  "initUIEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "detail"
  ],
  "initMouseEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "detail",
    "screenX",
    "screenY",
    "clientX",
    "clientY",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "button",
    "relatedTarget"
  ],
  "initMutationEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "relatedNode",
    "prevValue",
    "newValue",
    "attrName",
    "attrChange"
  ],
  "initKeyboardEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "keyCode",
    "charCode"
  ],
  "initKeyEvent" : [
    "type",
    "bubbles",
    "cancelable",
    "view",
    "ctrlKey",
    "altKey",
    "shiftKey",
    "metaKey",
    "keyCode",
    "charCode"
  ]
}

},{}],416:[function(_dereq_,module,exports){
module.exports={
  "MouseEvent" : [
    "click",
    "mousedown",
    "mouseup",
    "mouseover",
    "mousemove",
    "mouseout"
  ],
  "KeyboardEvent" : [
    "keydown",
    "keyup",
    "keypress"
  ],
  "MutationEvent" : [
    "DOMSubtreeModified",
    "DOMNodeInserted",
    "DOMNodeRemoved",
    "DOMNodeRemovedFromDocument",
    "DOMNodeInsertedIntoDocument",
    "DOMAttrModified",
    "DOMCharacterDataModified"
  ],
  "HTMLEvents" : [
    "load",
    "unload",
    "abort",
    "error",
    "select",
    "change",
    "submit",
    "reset",
    "focus",
    "blur",
    "resize",
    "scroll"
  ],
  "UIEvent" : [
    "DOMFocusIn",
    "DOMFocusOut",
    "DOMActivate"
  ]
}

},{}],417:[function(_dereq_,module,exports){
(function (process){
"use strict";function DestroyableTransform(r){Transform.call(this,r),this._destroyed=!1}function noop(r,t,o){o(null,r)}function through2(r){return function(t,o,e){return"function"==typeof t&&(e=o,o=t,t={}),"function"!=typeof o&&(o=noop),"function"!=typeof e&&(e=null),r(t,o,e)}}var Transform=_dereq_("readable-stream/transform"),inherits=_dereq_("util").inherits,xtend=_dereq_("xtend");inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(r){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick(function(){r&&t.emit("error",r),t.emit("close")})}},module.exports=through2(function(r,t,o){var e=new DestroyableTransform(r);return e._transform=t,o&&(e._flush=o),e}),module.exports.ctor=through2(function(r,t,o){function e(t){if(!(this instanceof e))return new e(t);this.options=xtend(r,t),DestroyableTransform.call(this,this.options)}return inherits(e,DestroyableTransform),e.prototype._transform=t,o&&(e.prototype._flush=o),e}),module.exports.obj=through2(function(r,t,o){var e=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},r));return e._transform=t,o&&(e._flush=o),e});

}).call(this,_dereq_('_process'))
},{"_process":376,"readable-stream/transform":397,"util":430,"xtend":434}],418:[function(_dereq_,module,exports){
"use strict";function getPropertyInPX(e,t){var r=parseUnit(getComputedStyle(e).getPropertyValue(t));return r[0]*toPX(r[1],e)}function getSizeBrutal(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var n=getPropertyInPX(r,"font-size")/128;return t.removeChild(r),n}function toPX(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return getSizeBrutal(e,t);case"em":return getPropertyInPX(t,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return PIXELS_PER_INCH;case"cm":return PIXELS_PER_INCH/2.54;case"mm":return PIXELS_PER_INCH/25.4;case"pt":return PIXELS_PER_INCH/72;case"pc":return PIXELS_PER_INCH/6}return 1}var parseUnit=_dereq_("parse-unit");module.exports=toPX;var PIXELS_PER_INCH=96;

},{"parse-unit":355}],419:[function(_dereq_,module,exports){
"use strict";function attach(e){function t(e){n(e.targetTouches[0])}function n(e){offset(e,r,s),i.emit("move",e)}function o(){r.removeEventListener("mousemove",n,!1),r.removeEventListener("mousedown",n,!1),r.removeEventListener("touchmove",t,!1),r.removeEventListener("touchstart",t,!1)}e=e||{};var r=e.element||window,i=new EventEmitter,s=e.position||[0,0];return!1!==e.touchstart&&(r.addEventListener("mousedown",n,!1),r.addEventListener("touchstart",t,!1)),r.addEventListener("mousemove",n,!1),r.addEventListener("touchmove",t,!1),i.position=s,i.dispose=o,i}var offset=_dereq_("mouse-event-offset"),EventEmitter=_dereq_("events").EventEmitter;module.exports=function(e){return attach(e).position},module.exports.emitter=function(e){return attach(e)};

},{"events":152,"mouse-event-offset":344}],420:[function(_dereq_,module,exports){
"use strict";function triangulateCube(r){if(r<0)return[];if(0===r)return[[0]];for(var e=0|Math.round(gamma(r+1)),a=[],u=0;u<e;++u){for(var t=perm.unrank(r,u),n=[0],i=0,m=0;m<t.length;++m)i+=1<<t[m],n.push(i);sgn(t)<1&&(n[0]=i,n[r]=0),a.push(n)}return a}module.exports=triangulateCube;var perm=_dereq_("permutation-rank"),sgn=_dereq_("permutation-parity"),gamma=_dereq_("gamma");

},{"gamma":158,"permutation-parity":357,"permutation-rank":358}],421:[function(_dereq_,module,exports){
"use strict";function twoProduct(t,o,r){var u=t*o,T=SPLITTER*t,P=T-t,c=T-P,e=t-c,a=SPLITTER*o,d=a-o,n=a-d,s=o-n,w=u-c*n,E=w-e*n,I=E-c*s,L=e*s-I;return r?(r[0]=L,r[1]=u,r):[L,u]}module.exports=twoProduct;var SPLITTER=+(Math.pow(2,27)+1);

},{}],422:[function(_dereq_,module,exports){
"use strict";function fastTwoSum(t,u,o){var r=t+u,s=r-t,e=r-s,a=u-s,f=t-e;return o?(o[0]=f+a,o[1]=r,o):[f+a,r]}module.exports=fastTwoSum;

},{}],423:[function(_dereq_,module,exports){
(function (global,Buffer){
"use strict";function freeArrayBuffer(r){if(r){var e=r.length||r.byteLength,t=bits.log2(e);DATA[t].push(r)}}function freeTypedArray(r){freeArrayBuffer(r.buffer)}function mallocArrayBuffer(r){var r=bits.nextPow2(r),e=bits.log2(r),t=DATA[e];return t.length>0?t.pop():new ArrayBuffer(r)}function mallocUint8(r){return new Uint8Array(mallocArrayBuffer(r),0,r)}function mallocUint16(r){return new Uint16Array(mallocArrayBuffer(2*r),0,r)}function mallocUint32(r){return new Uint32Array(mallocArrayBuffer(4*r),0,r)}function mallocInt8(r){return new Int8Array(mallocArrayBuffer(r),0,r)}function mallocInt16(r){return new Int16Array(mallocArrayBuffer(2*r),0,r)}function mallocInt32(r){return new Int32Array(mallocArrayBuffer(4*r),0,r)}function mallocFloat(r){return new Float32Array(mallocArrayBuffer(4*r),0,r)}function mallocDouble(r){return new Float64Array(mallocArrayBuffer(8*r),0,r)}function mallocUint8Clamped(r){return hasUint8C?new Uint8ClampedArray(mallocArrayBuffer(r),0,r):mallocUint8(r)}function mallocDataView(r){return new DataView(mallocArrayBuffer(r),0,r)}function mallocBuffer(r){r=bits.nextPow2(r);var e=bits.log2(r),t=BUFFER[e];return t.length>0?t.pop():new Buffer(r)}var bits=_dereq_("bit-twiddle"),dup=_dereq_("dup");global.__TYPEDARRAY_POOL||(global.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0]),UINT8C:dup([32,0]),BUFFER:dup([32,0])});var hasUint8C="undefined"!=typeof Uint8ClampedArray,POOL=global.__TYPEDARRAY_POOL;POOL.UINT8C||(POOL.UINT8C=dup([32,0])),POOL.BUFFER||(POOL.BUFFER=dup([32,0]));var DATA=POOL.DATA,BUFFER=POOL.BUFFER;exports.free=function(r){if(Buffer.isBuffer(r))BUFFER[bits.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var e=r.length||r.byteLength,t=0|bits.log2(e);DATA[t].push(r)}},exports.freeUint8=exports.freeUint16=exports.freeUint32=exports.freeInt8=exports.freeInt16=exports.freeInt32=exports.freeFloat32=exports.freeFloat=exports.freeFloat64=exports.freeDouble=exports.freeUint8Clamped=exports.freeDataView=freeTypedArray,exports.freeArrayBuffer=freeArrayBuffer,exports.freeBuffer=function(r){BUFFER[bits.log2(r.length)].push(r)},exports.malloc=function(r,e){if(void 0===e||"arraybuffer"===e)return mallocArrayBuffer(r);switch(e){case"uint8":return mallocUint8(r);case"uint16":return mallocUint16(r);case"uint32":return mallocUint32(r);case"int8":return mallocInt8(r);case"int16":return mallocInt16(r);case"int32":return mallocInt32(r);case"float":case"float32":return mallocFloat(r);case"double":case"float64":return mallocDouble(r);case"uint8_clamped":return mallocUint8Clamped(r);case"buffer":return mallocBuffer(r);case"data":case"dataview":return mallocDataView(r);default:return null}return null},exports.mallocArrayBuffer=mallocArrayBuffer,exports.mallocUint8=mallocUint8,exports.mallocUint16=mallocUint16,exports.mallocUint32=mallocUint32,exports.mallocInt8=mallocInt8,exports.mallocInt16=mallocInt16,exports.mallocInt32=mallocInt32,exports.mallocFloat32=exports.mallocFloat=mallocFloat,exports.mallocFloat64=exports.mallocDouble=mallocDouble,exports.mallocUint8Clamped=mallocUint8Clamped,exports.mallocDataView=mallocDataView,exports.mallocBuffer=mallocBuffer,exports.clearCache=function(){for(var r=0;r<32;++r)POOL.UINT8[r].length=0,POOL.UINT16[r].length=0,POOL.UINT32[r].length=0,POOL.INT8[r].length=0,POOL.INT16[r].length=0,POOL.INT32[r].length=0,POOL.FLOAT[r].length=0,POOL.DOUBLE[r].length=0,POOL.UINT8C[r].length=0,DATA[r].length=0,BUFFER[r].length=0};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},_dereq_("buffer").Buffer)
},{"bit-twiddle":75,"buffer":87,"dup":150}],424:[function(_dereq_,module,exports){
"use strict";function unindex(e,n,r){e.positions&&e.cells&&(r=n,n=e.cells,e=e.positions);var l=e.length?e[0].length:0,t=n.length?n[0].length:0;if(r=r||new Float32Array(n.length*t*l),3===t&&2===l)for(var o=0,s=0,a=n.length;o<a;o+=1){var i=n[o];r[s++]=e[i[0]][0],r[s++]=e[i[0]][1],r[s++]=e[i[1]][0],r[s++]=e[i[1]][1],r[s++]=e[i[2]][0],r[s++]=e[i[2]][1]}else if(3===t&&3===l)for(var o=0,s=0,a=n.length;o<a;o+=1){var i=n[o];r[s++]=e[i[0]][0],r[s++]=e[i[0]][1],r[s++]=e[i[0]][2],r[s++]=e[i[1]][0],r[s++]=e[i[1]][1],r[s++]=e[i[1]][2],r[s++]=e[i[2]][0],r[s++]=e[i[2]][1],r[s++]=e[i[2]][2]}else for(var o=0,s=0,a=n.length;o<a;o+=1)for(var i=n[o],g=0;g<i.length;g++)for(var h=i[g],f=0;f<l;f++)r[s++]=e[h][f];return r}module.exports=unindex;

},{}],425:[function(_dereq_,module,exports){
"use strict";function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var r=0;r<t;++r)this.roots[r]=r,this.ranks[r]=0}module.exports=UnionFind;var proto=UnionFind.prototype;Object.defineProperty(proto,"length",{get:function(){return this.roots.length}}),proto.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},proto.find=function(t){for(var r=t,o=this.roots;o[t]!==t;)t=o[t];for(;o[r]!==t;){var n=o[r];o[r]=t,r=n}return t},proto.link=function(t,r){var o=this.find(t),n=this.find(r);if(o!==n){var i=this.ranks,s=this.roots,e=i[o],h=i[n];e<h?s[o]=n:h<e?s[n]=o:(s[n]=o,++i[o])}};

},{}],426:[function(_dereq_,module,exports){
"use strict";function unique_pred(n,e){for(var u=1,t=n.length,i=n[0],r=n[0],o=1;o<t;++o)if(r=i,i=n[o],e(i,r)){if(o===u){u++;continue}n[u++]=i}return n.length=u,n}function unique_eq(n){for(var e=1,u=n.length,t=n[0],i=n[0],r=1;r<u;++r,i=t)if(i=t,(t=n[r])!==i){if(r===e){e++;continue}n[e++]=t}return n.length=e,n}function unique(n,e,u){return 0===n.length?n:e?(u||n.sort(e),unique_pred(n,e)):(u||n.sort(),unique_eq(n))}module.exports=unique;

},{}],427:[function(_dereq_,module,exports){
(function (global){
"use strict";function deprecate(r,e){function t(){if(!o){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return r.apply(this,arguments)}if(config("noDeprecation"))return r;var o=!1;return t}function config(r){try{if(!global.localStorage)return!1}catch(r){return!1}var e=global.localStorage[r];return null!=e&&"true"===String(e).toLowerCase()}module.exports=deprecate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],428:[function(_dereq_,module,exports){
arguments[4][333][0].apply(exports,arguments)
},{"dup":333}],429:[function(_dereq_,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};module.exports=function(o){return o&&"object"===(void 0===o?"undefined":_typeof(o))&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};

},{}],430:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c="",l=!1,p=["{","}"];if(isArray(r)&&(l=!0,p=["[","]"]),isFunction(r)){c=" [Function"+(r.name?": "+r.name:"")+"]"}if(isRegExp(r)&&(c=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(c=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(c=" "+formatError(r)),0===o.length&&(!l||0==r.length))return p[0]+c+p[1];if(t<0)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var a;return a=l?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),reduceToSingleString(a,c,p)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if(c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0;return e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===(void 0===e?"undefined":_typeof(e))}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":_typeof(e))||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=_dereq_("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=_dereq_("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};

}).call(this,_dereq_('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":429,"_process":376,"inherits":428}],431:[function(_dereq_,module,exports){
"use strict";function createText(t,e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e||(e={}),vectorizeText(t,e.canvas||defaultCanvas,e.context||defaultContext,e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=createText;var vectorizeText=_dereq_("./lib/vtext"),defaultCanvas=null,defaultContext=null;"undefined"!=typeof document&&(defaultCanvas=document.createElement("canvas"),defaultCanvas.width=8192,defaultCanvas.height=1024,defaultContext=defaultCanvas.getContext("2d"));

},{"./lib/vtext":432}],432:[function(_dereq_,module,exports){
"use strict";function transformPositions(e,t,r){for(var i=t.textAlign||"start",n=t.textBaseline||"alphabetic",a=[1<<30,1<<30],s=[0,0],o=e.length,l=0;l<o;++l)for(var c=e[l],g=0;g<2;++g)a[g]=0|Math.min(a[g],c[g]),s[g]=0|Math.max(s[g],c[g]);var p=0;switch(i){case"center":p=-.5*(a[0]+s[0]);break;case"right":case"end":p=-s[0];break;case"left":case"start":p=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+i+"'")}var h=0;switch(n){case"hanging":case"top":h=-a[1];break;case"middle":h=-.5*(a[1]+s[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-s[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+n+"'")}var u=1/r;return"lineHeight"in t?u*=+t.lineHeight:"width"in t?u=t.width/(s[0]-a[0]):"height"in t&&(u=t.height/(s[1]-a[1])),e.map(function(e){return[u*(e[0]+p),u*(e[1]+h)]})}function getPixels(e,t,r,i){var n=0|Math.ceil(t.measureText(r).width+2*i);if(n>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var a=3*i;e.height<a&&(e.height=a),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(r,i,2*i);var s=t.getImageData(0,0,n,a);return ndarray(s.data,[a,n,4]).pick(-1,-1,0).transpose(1,0)}function getContour(e,t){var r=surfaceNets(e,128);return t?simplify(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function processPixelsImpl(e,t,r,i){var n=getContour(e,i),a=transformPositions(n.positions,t,r),s=n.edges,o="ccw"===t.orientation;if(cleanPSLG(a,s),t.polygons||t.polygon||t.polyline){for(var l=toPolygonCrappy(s,a),c=new Array(l.length),g=0;g<l.length;++g){for(var p=l[g],h=new Array(p.length),u=0;u<p.length;++u){for(var f=p[u],d=new Array(f.length),x=0;x<f.length;++x)d[x]=a[f[x]].slice();o&&d.reverse(),h[u]=d}c[g]=h}return c}return t.triangles||t.triangulate||t.triangle?{cells:cdt2d(a,s,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:s,positions:a}}function processPixels(e,t,r){try{return processPixelsImpl(e,t,r,!0)}catch(e){}try{return processPixelsImpl(e,t,r,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function vectorizeText(e,t,r,i){var n=i.size||64,a=i.font||"normal";return r.font=n+"px "+a,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",processPixels(getPixels(t,r,e,n),i,n)}module.exports=vectorizeText,module.exports.processPixels=processPixels;var surfaceNets=_dereq_("surface-nets"),ndarray=_dereq_("ndarray"),simplify=_dereq_("simplify-planar-graph"),cleanPSLG=_dereq_("clean-pslg"),cdt2d=_dereq_("cdt2d"),toPolygonCrappy=_dereq_("planar-graph-to-polyline");

},{"cdt2d":93,"clean-pslg":100,"ndarray":351,"planar-graph-to-polyline":366,"simplify-planar-graph":410,"surface-nets":413}],433:[function(_dereq_,module,exports){
(function (global){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.WebVRPolyfill=e()}}(function(){return function e(t,i,M){function s(n,N){if(!i[n]){if(!t[n]){var D="function"==typeof _dereq_&&_dereq_;if(!N&&D)return D(n,!0);if(r)return r(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var o=i[n]={exports:{}};t[n][0].call(o.exports,function(e){var i=t[n][1][e];return s(i||e)},o,o.exports,e,t,i,M)}return i[n].exports}for(var r="function"==typeof _dereq_&&_dereq_,n=0;n<M.length;n++)s(M[n]);return s}({1:[function(e,t,i){function M(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(){this._events=new M,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,N="~";Object.create&&(M.prototype=Object.create(null),(new M).__proto__||(N=!1)),r.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(N?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},r.prototype.listeners=function(e,t){var i=N?N+e:e,M=this._events[i];if(t)return!!M;if(!M)return[];if(M.fn)return[M.fn];for(var s=0,r=M.length,n=new Array(r);s<r;s++)n[s]=M[s].fn;return n},r.prototype.emit=function(e,t,i,M,s,r){var n=N?N+e:e;if(!this._events[n])return!1;var D,u,o=this._events[n],a=arguments.length;if(o.fn){switch(o.once&&this.removeListener(e,o.fn,void 0,!0),a){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,t),!0;case 3:return o.fn.call(o.context,t,i),!0;case 4:return o.fn.call(o.context,t,i,M),!0;case 5:return o.fn.call(o.context,t,i,M,s),!0;case 6:return o.fn.call(o.context,t,i,M,s,r),!0}for(u=1,D=new Array(a-1);u<a;u++)D[u-1]=arguments[u];o.fn.apply(o.context,D)}else{var g,j=o.length;for(u=0;u<j;u++)switch(o[u].once&&this.removeListener(e,o[u].fn,void 0,!0),a){case 1:o[u].fn.call(o[u].context);break;case 2:o[u].fn.call(o[u].context,t);break;case 3:o[u].fn.call(o[u].context,t,i);break;case 4:o[u].fn.call(o[u].context,t,i,M);break;default:if(!D)for(g=1,D=new Array(a-1);g<a;g++)D[g-1]=arguments[g];o[u].fn.apply(o[u].context,D)}}return!0},r.prototype.on=function(e,t,i){var M=new s(t,i||this),r=N?N+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],M]:this._events[r].push(M):(this._events[r]=M,this._eventsCount++),this},r.prototype.once=function(e,t,i){var M=new s(t,i||this,!0),r=N?N+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],M]:this._events[r].push(M):(this._events[r]=M,this._eventsCount++),this},r.prototype.removeListener=function(e,t,i,s){var r=N?N+e:e;if(!this._events[r])return this;if(!t)return 0==--this._eventsCount?this._events=new M:delete this._events[r],this;var n=this._events[r];if(n.fn)n.fn!==t||s&&!n.once||i&&n.context!==i||(0==--this._eventsCount?this._events=new M:delete this._events[r]);else{for(var D=0,u=[],o=n.length;D<o;D++)(n[D].fn!==t||s&&!n[D].once||i&&n[D].context!==i)&&u.push(n[D]);u.length?this._events[r]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new M:delete this._events[r]}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=N?N+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new M:delete this._events[t])):(this._events=new M,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=N,r.EventEmitter=r,void 0!==t&&(t.exports=r)},{}],2:[function(e,t,i){function M(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var M={};return"abcdefghijklmnopqrst".split("").forEach(function(e){M[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},M)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,n,N=M(e),D=1;D<arguments.length;D++){i=Object(arguments[D]);for(var u in i)s.call(i,u)&&(N[u]=i[u]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(i);for(var o=0;o<n.length;o++)r.call(i,n[o])&&(N[n[o]]=i[n[o]])}}return N}},{}],3:[function(e,t,i){function M(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function s(){this.isPolyfilled=!0,this.displayId=o++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new u}function r(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function n(){}function N(){}var D=e("./util.js"),u=e("./wakelock.js"),o=1e3,a=!1,g=[0,0,.5,1],j=[.5,0,.5,1];s.prototype.getFrameData=function(e){return D.frameDataFromPose(e,this.getPose(),this)},s.prototype.getPose=function(){return this.getImmediatePose()},s.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},s.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},s.prototype.wrapForFullscreen=function(e){if(D.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var i=this.fullscreenElement_.parentElement;i.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),i.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var M=this;return function(){if(M.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];M.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},s.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},s.prototype.requestPresent=function(e){var t=this.isPresenting,i=this;return e instanceof Array||(a||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),a=!0),e=[e]),new Promise(function(M,s){if(!i.capabilities.canPresent)return void s(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>i.capabilities.maxLayers)return void s(new Error("Invalid number of layers."));var r=e[0];if(!r.source)return void M();var n=r.leftBounds||g,N=r.rightBounds||j;if(t){var u=i.layer_;u.source!==r.source&&(u.source=r.source);for(var o=0;o<4;o++)u.leftBounds[o]=n[o],u.rightBounds[o]=N[o];return void M()}if(i.layer_={predistorted:r.predistorted,source:r.source,leftBounds:n.slice(0),rightBounds:N.slice(0)},i.waitingForPresent_=!1,i.layer_&&i.layer_.source){var a=function(){var e=D.getFullscreenElement();i.isPresenting=c===e,i.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),i.waitingForPresent_=!1,i.beginPresent_(),M()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),i.removeFullscreenWrapper(),i.wakelock_.release(),i.endPresent_(),i.removeFullscreenListeners_()),i.fireVRDisplayPresentChange_()},L=function(){i.waitingForPresent_&&(i.removeFullscreenWrapper(),i.removeFullscreenListeners_(),i.wakelock_.release(),i.waitingForPresent_=!1,i.isPresenting=!1,s(new Error("Unable to present.")))},c=i.wrapForFullscreen(i.layer_.source);i.addFullscreenListeners_(c,a,L),D.requestFullscreen(c)?(i.wakelock_.request(),i.waitingForPresent_=!0):D.isIOS()&&(i.wakelock_.request(),i.isPresenting=!0,i.beginPresent_(),i.fireVRDisplayPresentChange_(),M())}i.waitingForPresent_||D.isIOS()||(D.exitFullscreen(),s(new Error("Unable to present.")))})},s.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(i,M){e?(!D.exitFullscreen()&&D.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),i()):M(new Error("Was not presenting to VRDisplay."))})},s.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},s.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},s.prototype.addFullscreenListeners_=function(e,t,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=i,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),i&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",i,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",i,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",i,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",i,!1))},s.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",i,!1),e.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),e.removeEventListener("msfullscreenerror",i,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},s.prototype.beginPresent_=function(){},s.prototype.endPresent_=function(){},s.prototype.submitFrame=function(e){},s.prototype.getEyeParameters=function(e){return null},n.prototype=new r,N.prototype=new r,t.exports.VRFrameData=M,t.exports.VRDisplay=s,t.exports.VRDevice=r,t.exports.HMDVRDevice=n,t.exports.PositionSensorVRDevice=N},{"./util.js":22,"./wakelock.js":24}],4:[function(e,t,i){function M(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,r.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=r.linkProgram(e,N,D,this.attribs),this.uniforms=r.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new s(e))}var s=e("./cardboard-ui.js"),r=e("./util.js"),n=e("./deps/wglu-preserve-state.js"),N=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),D=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");M.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},M.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];n(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},M.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,i=this.gl;r.isIOS()||(t.width=r.getScreenWidth()*this.bufferScale,t.height=r.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(i){e.bufferWidth=i,e.realCanvasWidth.set.call(t,i),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(i){e.bufferHeight=i,e.realCanvasHeight.set.call(t,i),e.onResize()}})),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,M){e.lastBoundFramebuffer=M||e.framebuffer,e.realBindFramebuffer.call(i,t,e.lastBoundFramebuffer)},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!0;break;case i.DEPTH_TEST:e.depthTest=!0;break;case i.BLEND:e.blend=!0;break;case i.SCISSOR_TEST:e.scissorTest=!0;break;case i.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(i,t)},i.disable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!1;break;case i.DEPTH_TEST:e.depthTest=!1;break;case i.BLEND:e.blend=!1;break;case i.SCISSOR_TEST:e.scissorTest=!1;break;case i.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(i,t)},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(t,M,s,r){e.colorMask[0]=t,e.colorMask[1]=M,e.colorMask[2]=s,e.colorMask[3]=r,e.realColorMask.call(i,t,M,s,r)},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(t,M,s,r){e.clearColor[0]=t,e.clearColor[1]=M,e.clearColor[2]=s,e.clearColor[3]=r,e.realClearColor.call(i,t,M,s,r)},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(t,M,s,r){e.viewport[0]=t,e.viewport[1]=M,e.viewport[2]=s,e.viewport[3]=r,e.realViewport.call(i,t,M,s,r)},this.isPatched=!0,r.safariCssSizeWorkaround(t)}},M.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;r.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){r.safariCssSizeWorkaround(t)},1)}},M.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},M.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),n(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||r.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),r.isIOS()){var M=e.canvas;M.width==t.bufferWidth&&M.height==t.bufferHeight||(t.bufferWidth=M.width,t.bufferHeight=M.height,t.onResize())}},M.prototype.updateDeviceInfo=function(e){var t=this.gl,i=this,M=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];n(t,M,function(t){var M=i.computeMeshVertices_(i.meshWidth,i.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,M,t.STATIC_DRAW),!i.indexCount){var s=i.computeMeshIndices_(i.meshWidth,i.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW),i.indexCount=s.length}})},M.prototype.computeMeshVertices_=function(e,t,i){for(var M=new Float32Array(2*e*t*5),s=i.getLeftEyeVisibleTanAngles(),n=i.getLeftEyeNoLensTanAngles(),N=i.getLeftEyeVisibleScreenRect(n),D=0,u=0;u<2;u++){for(var o=0;o<t;o++)for(var a=0;a<e;a++,D++){var g=a/(e-1),j=o/(t-1),L=g,c=j,I=r.lerp(s[0],s[2],g),T=r.lerp(s[3],s[1],j),A=Math.sqrt(I*I+T*T),y=i.distortion.distortInverse(A),w=I*y/A,E=T*y/A;g=(w-n[0])/(n[2]-n[0]),j=(E-n[3])/(n[1]-n[3]);i.device.widthMeters,i.device.heightMeters;g=2*(N.x+g*N.width-.5),j=2*(N.y+j*N.height-.5),M[5*D+0]=g,M[5*D+1]=j,M[5*D+2]=L,M[5*D+3]=c,M[5*D+4]=u}var l=s[2]-s[0];s[0]=-(l+s[0]),s[2]=l-s[2],l=n[2]-n[0],n[0]=-(l+n[0]),n[2]=l-n[2],N.x=1-(N.x+N.width)}return M},M.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),M=e/2,s=t/2,r=0,n=0,N=0;N<2;N++)for(var D=0;D<t;D++)for(var u=0;u<e;u++,r++)0!=u&&0!=D&&(u<=M==D<=s?(i[n++]=r,i[n++]=r-e-1,i[n++]=r-e,i[n++]=r-e-1,i[n++]=r,i[n++]=r-1):(i[n++]=r-1,i[n++]=r-e,i[n++]=r,i[n++]=r-e,i[n++]=r-1,i[n++]=r-e-1));return i},M.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e)}),i},t.exports=M},{"./cardboard-ui.js":5,"./deps/wglu-preserve-state.js":7,"./util.js":22}],5:[function(e,t,i){function M(e){this.gl=e,this.attribs={position:0},this.program=s.linkProgram(e,n,N,this.attribs),this.uniforms=s.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var s=e("./util.js"),r=e("./deps/wglu-preserve-state.js"),n=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),N=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),D=Math.PI/180,u=.3125;M.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},M.prototype.listen=function(e,t){var i=this.gl.canvas;this.listener=function(M){var s=i.clientWidth/2;M.clientX>s-42&&M.clientX<s+42&&M.clientY>i.clientHeight-42?e(M):M.clientX<42&&M.clientY<42&&t(M)},i.addEventListener("click",this.listener,!1)},M.prototype.onResize=function(){var e=this.gl,t=this,i=[e.ARRAY_BUFFER_BINDING];r(e,i,function(e){function i(e,t){var i=(90-e)*D,M=Math.cos(i),n=Math.sin(i);s.push(u*M*j+r,u*n*j+j),s.push(t*M*j+r,t*n*j+j)}function M(t,i){s.push(L+t,e.drawingBufferHeight-L-i)}var s=[],r=e.drawingBufferWidth/2,n=Math.max(screen.width,screen.height)*window.devicePixelRatio,N=e.drawingBufferWidth/n,o=N*window.devicePixelRatio,a=4*o/2,g=42*o,j=28*o/2,L=14*o;s.push(r-a,g),s.push(r-a,e.drawingBufferHeight),s.push(r+a,g),s.push(r+a,e.drawingBufferHeight),t.gearOffset=s.length/2;for(var c=0;c<=6;c++){var I=60*c;i(I,1),i(I+12,1),i(I+20,.75),i(I+40,.75),i(I+48,1)}t.gearVertexCount=s.length/2-t.gearOffset,t.arrowOffset=s.length/2;var T=a/Math.sin(45*D);M(0,j),M(j,0),M(j+T,T),M(T,j+T),M(T,j-T),M(0,j),M(j,2*j),M(j+T,2*j-T),M(T,j-T),M(0,j),M(T,j-a),M(28*o,j-a),M(T,j+a),M(28*o,j+a),t.arrowVertexCount=s.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(s),e.STATIC_DRAW)})},M.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];r(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},M.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),s.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=M},{"./deps/wglu-preserve-state.js":7,"./util.js":22}],6:[function(e,t,i){function M(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=WebVRConfig.BUFFER_SCALE,this.poseSensor_=new D,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new N(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new n(this.dpdb_.getDeviceParams()),this.viewerSelector_=new o,this.viewerSelector_.on("change",this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new u),g.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var s=e("./cardboard-distorter.js"),r=e("./cardboard-ui.js"),n=e("./device-info.js"),N=e("./dpdb/dpdb.js"),D=e("./sensor-fusion/fusion-pose-sensor.js"),u=e("./rotate-instructions.js"),o=e("./viewer-selector.js"),a=e("./base.js").VRDisplay,g=e("./util.js"),j={LEFT:"left",RIGHT:"right"};M.prototype=new a,M.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},M.prototype.resetPose=function(){this.poseSensor_.resetPose()},M.prototype.getEyeParameters=function(e){var t,i=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==j.LEFT)i[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=j.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:i,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},M.prototype.onDeviceParamsUpdated_=function(e){g.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},M.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},M.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=g.getScreenWidth()*this.bufferScale_,e.canvas.height=g.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new r(e)):(this.distorter_=new s(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(g.isLandscapeMode()&&g.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},M.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},M.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},M.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},M.prototype.onResize_=function(e){if(this.layer_){
var t=this.layer_.source.getContext("webgl"),i=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",i.join("; ")+";"),g.safariCssSizeWorkaround(t.canvas)}},M.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},M.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=M},{"./base.js":3,"./cardboard-distorter.js":4,"./cardboard-ui.js":5,"./device-info.js":8,"./dpdb/dpdb.js":12,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],7:[function(e,t,i){function M(e,t,i){if(!t)return void i(e);for(var M=[],s=null,r=0;r<t.length;++r){var n=t[r];switch(n){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var N=t[++r];if(N<e.TEXTURE0||N>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),M.push(null,null);break}s||(s=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(N),M.push(e.getParameter(n),null);break;case e.ACTIVE_TEXTURE:s=e.getParameter(e.ACTIVE_TEXTURE),M.push(null);break;default:M.push(e.getParameter(n))}}i(e);for(var r=0;r<t.length;++r){var n=t[r],D=M[r];switch(n){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,D);break;case e.COLOR_CLEAR_VALUE:e.clearColor(D[0],D[1],D[2],D[3]);break;case e.COLOR_WRITEMASK:e.colorMask(D[0],D[1],D[2],D[3]);break;case e.CURRENT_PROGRAM:e.useProgram(D);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,D);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,D);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,D);break;case e.TEXTURE_BINDING_2D:var N=t[++r];if(N<e.TEXTURE0||N>e.TEXTURE31)break;e.activeTexture(N),e.bindTexture(e.TEXTURE_2D,D);break;case e.TEXTURE_BINDING_CUBE_MAP:var N=t[++r];if(N<e.TEXTURE0||N>e.TEXTURE31)break;e.activeTexture(N),e.bindTexture(e.TEXTURE_CUBE_MAP,D);break;case e.VIEWPORT:e.viewport(D[0],D[1],D[2],D[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:D?e.enable(n):e.disable(n);break;default:console.log("No GL restore behavior for 0x"+n.toString(16))}s&&e.activeTexture(s)}}t.exports=M},{}],8:[function(e,t,i){function M(e){this.width=e.width||D.getScreenWidth(),this.height=e.height||D.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function s(e){this.viewer=a.CardboardV2,this.updateDeviceParams(e),this.distortion=new n(this.viewer.distortionCoefficients)}function r(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var n=e("./distortion/distortion.js"),N=e("./math-util.js"),D=e("./util.js"),u=new M({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),o=new M({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),a={CardboardV1:new r({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new r({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};s.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},s.prototype.getDevice=function(){return this.device},s.prototype.setViewer=function(e){this.viewer=e,this.distortion=new n(this.viewer.distortionCoefficients)},s.prototype.determineDevice_=function(e){if(!e)return D.isIOS()?(console.warn("Using fallback iOS device measurements."),o):(console.warn("Using fallback Android device measurements."),u);var t=.0254/e.xdpi,i=.0254/e.ydpi;return new M({widthMeters:t*D.getScreenWidth(),heightMeters:i*D.getScreenHeight(),bevelMeters:.001*e.bevelMm})},s.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,M=e.screenLensDistance,s=(t.widthMeters-e.interLensDistance)/2,r=e.interLensDistance/2,n=e.baselineLensDistance-t.bevelMeters,D=t.heightMeters-n,u=N.radToDeg*Math.atan(i.distort(s/M)),o=N.radToDeg*Math.atan(i.distort(r/M)),a=N.radToDeg*Math.atan(i.distort(n/M)),g=N.radToDeg*Math.atan(i.distort(D/M));return{leftDegrees:Math.min(u,e.fov),rightDegrees:Math.min(o,e.fov),downDegrees:Math.min(a,e.fov),upDegrees:Math.min(g,e.fov)}},s.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,M=Math.tan(-N.degToRad*e.fov),s=Math.tan(N.degToRad*e.fov),r=Math.tan(N.degToRad*e.fov),n=Math.tan(-N.degToRad*e.fov),D=t.widthMeters/4,u=t.heightMeters/2,o=e.baselineLensDistance-t.bevelMeters-u,a=e.interLensDistance/2-D,g=-o,j=e.screenLensDistance,L=i.distort((a-D)/j),c=i.distort((g+u)/j),I=i.distort((a+D)/j),T=i.distort((g-u)/j),A=new Float32Array(4);return A[0]=Math.max(M,L),A[1]=Math.min(s,c),A[2]=Math.min(r,I),A[3]=Math.max(n,T),A},s.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,M=new Float32Array(4),s=i.distortInverse(Math.tan(-N.degToRad*e.fov)),r=i.distortInverse(Math.tan(N.degToRad*e.fov)),n=i.distortInverse(Math.tan(N.degToRad*e.fov)),D=i.distortInverse(Math.tan(-N.degToRad*e.fov)),u=t.widthMeters/4,o=t.heightMeters/2,a=e.baselineLensDistance-t.bevelMeters-o,g=e.interLensDistance/2-u,j=-a,L=e.screenLensDistance,c=(g-u)/L,I=(j+o)/L,T=(g+u)/L,A=(j-o)/L;return M[0]=Math.max(s,c),M[1]=Math.min(r,I),M[2]=Math.min(n,T),M[3]=Math.max(D,A),M},s.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,M=t.screenLensDistance,s=(i.widthMeters-t.interLensDistance)/2,r=t.baselineLensDistance-i.bevelMeters,n=(e[0]*M+s)/i.widthMeters,N=(e[1]*M+r)/i.heightMeters,D=(e[2]*M+s)/i.widthMeters,u=(e[3]*M+r)/i.heightMeters;return{x:n,y:u,width:D-n,height:N-u}},s.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},s.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},s.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:N.radToDeg*Math.atan(e.outerDist),rightDegrees:N.radToDeg*Math.atan(e.innerDist),downDegrees:N.radToDeg*Math.atan(e.bottomDist),upDegrees:N.radToDeg*Math.atan(e.topDist)}},s.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,M=t.screenLensDistance,s=i.widthMeters/M,r=i.heightMeters/M,n=i.width/s,N=i.height/r,D=Math.round((e.eyePosX-e.outerDist)*n),u=Math.round((e.eyePosY-e.bottomDist)*N);return{x:D,y:u,width:Math.round((e.eyePosX+e.innerDist)*n)-D,height:Math.round((e.eyePosY+e.topDist)*N)-u}},s.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,M=e.screenLensDistance,s=e.interLensDistance/2/M,r=t.widthMeters/M,n=t.heightMeters/M,D=r/2-s,u=(e.baselineLensDistance-t.bevelMeters)/M,o=e.fov,a=i.distortInverse(Math.tan(N.degToRad*o)),g=Math.min(D,a),j=Math.min(s,a),L=Math.min(u,a);return{outerDist:g,innerDist:j,topDist:Math.min(n-u,a),bottomDist:L,eyePosX:D,eyePosY:u}},s.Viewers=a,t.exports=s},{"./distortion/distortion.js":10,"./math-util.js":14,"./util.js":22}],9:[function(e,t,i){function M(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function s(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}var r=(e("./base.js").VRDisplay,e("./base.js").HMDVRDevice),n=e("./base.js").PositionSensorVRDevice;M.prototype=new r,M.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},M.prototype.setFieldOfView=function(e,t,i,M){},s.prototype=new n,s.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},s.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=M,t.exports.VRDisplayPositionSensorDevice=s},{"./base.js":3}],10:[function(e,t,i){function M(e){this.coefficients=e}M.prototype.distortInverse=function(e){for(var t=0,i=1,M=e-this.distort(t);Math.abs(i-t)>1e-4;){var s=e-this.distort(i),r=i-s*((i-t)/(s-M));t=i,i=r,M=s}return i},M.prototype.distort=function(e){for(var t=e*e,i=0,M=0;M<this.coefficients.length;M++)i=t*(i+this.coefficients[M]);return(i+1)*e},M.prototype.solveLinear_=function(e,t){for(var i=e.length,M=0;M<i-1;++M)for(var s=M+1;s<i;++s){for(var r=e[M][s]/e[M][M],n=M+1;n<i;++n)e[n][s]-=r*e[n][M];t[s]-=r*t[M]}for(var N=new Array(i),M=i-1;M>=0;--M){for(var D=t[M],n=M+1;n<i;++n)D-=e[n][M]*N[n];N[M]=D/e[M][M]}return N},M.prototype.solveLeastSquares_=function(e,t){var i,M,s,r,n=e.length,N=e[0].length;if(n!=t.Length)throw new Error("Matrix / vector dimension mismatch");var D=new Array(N);for(s=0;s<N;++s)for(D[s]=new Array(N),M=0;M<N;++M){for(r=0,i=0;i<n;++i)r+=e[M][i]*e[s][i];D[s][M]=r}var u=new Array(N);for(M=0;M<N;++M){for(r=0,i=0;i<n;++i)r+=e[M][i]*t[i];u[M]=r}return this.solveLinear_(D,u)},M.prototype.approximateInverse=function(e,t){e=e||1,t=t||100;var i,s,r=new Array(6);for(s=0;s<6;++s)r[s]=new Array(t);var n=new Array(t);for(i=0;i<t;++i){var N=e*(i+1)/t,D=this.distort(N),u=D;for(s=0;s<6;++s)u*=D*D,r[s][i]=u;n[i]=N-D}return new M(this.solveLeastSquares_(r,n))},t.exports=M},{}],11:[function(e,t,i){var M={format:1,last_updated:"2016-01-20T00:18:35Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel XL/"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel/"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 "}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 "}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:534,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]};t.exports=M},{}],12:[function(e,t,i){function M(e,t){if(this.dpdb=r,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,M=this;i.open("GET",N,!0),i.addEventListener("load",function(){M.loading=!1,i.status>=200&&i.status<=299?(M.dpdb=JSON.parse(i.response),M.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function s(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var r=e("./dpdb-cache.js"),n=e("../util.js"),N="https://storage.googleapis.com/cardboard-dpdb/dpdb.json";M.prototype.getDeviceParams=function(){return this.deviceParams},M.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},M.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,i=n.getScreenWidth(),M=n.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var r=0;r<e.devices.length;r++){var N=e.devices[r];if(N.rules)if("ios"==N.type||"android"==N.type){if(n.isIOS()==("ios"==N.type)){for(var D=!1,u=0;u<N.rules.length;u++){var o=N.rules[u];if(this.matchRule_(o,t,i,M)){D=!0;break}}if(D){var a=N.dpi[0]||N.dpi,g=N.dpi[1]||N.dpi;return new s({xdpi:a,ydpi:g,bevelMm:N.bw})}}}else console.warn("Device["+r+"] has invalid type.");else console.warn("Device["+r+"] has no rules section.")}return console.warn("No DPDB device match."),null},M.prototype.matchRule_=function(e,t,i,M){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var s=e.res[0],r=e.res[1];if(Math.min(i,M)!=Math.min(s,r)||Math.max(i,M)!=Math.max(s,r))return!1}return!0},t.exports=M},{"../util.js":22,"./dpdb-cache.js":11}],13:[function(e,t,i){var M=e("./util.js"),s=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=M.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new s}:new s},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(e,t,i){var M=window.MathUtil||{};M.degToRad=Math.PI/180,M.radToDeg=180/Math.PI,M.Vector2=function(e,t){this.x=e||0,this.y=t||0},M.Vector2.prototype={constructor:M.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},M.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},M.Vector3.prototype={constructor:M.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,i=this.y,M=this.z,s=e.x,r=e.y,n=e.z,N=e.w,D=N*t+r*M-n*i,u=N*i+n*t-s*M,o=N*M+s*i-r*t,a=-s*t-r*i-n*M;return this.x=D*N+a*-s+u*-n-o*-r,this.y=u*N+a*-r+o*-s-D*-n,this.z=o*N+a*-n+D*-r-u*-s,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,M=e.y,s=e.z,r=t.x,n=t.y,N=t.z;return this.x=M*N-s*n,this.y=s*r-i*N,this.z=i*n-M*r,this}},M.Quaternion=function(e,t,i,M){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==M?M:1},M.Quaternion.prototype={constructor:M.Quaternion,set:function(e,t,i,M){return this.x=e,this.y=t,this.z=i,this.w=M,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var M=Math.cos(e/2),s=Math.cos(t/2),r=Math.cos(i/2),n=Math.sin(e/2),N=Math.sin(t/2),D=Math.sin(i/2);return this.x=n*s*r+M*N*D,this.y=M*N*r-n*s*D,this.z=M*s*D+n*N*r,this.w=M*s*r-n*N*D,this},setFromEulerYXZ:function(e,t,i){var M=Math.cos(e/2),s=Math.cos(t/2),r=Math.cos(i/2),n=Math.sin(e/2),N=Math.sin(t/2),D=Math.sin(i/2);return this.x=n*s*r+M*N*D,this.y=M*N*r-n*s*D,this.z=M*s*D-n*N*r,this.w=M*s*r+n*N*D,this},setFromAxisAngle:function(e,t){var i=t/2,M=Math.sin(i);return this.x=e.x*M,this.y=e.y*M,this.z=e.z*M,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,M=e.y,s=e.z,r=e.w,n=t.x,N=t.y,D=t.z,u=t.w;return this.x=i*u+r*n+M*D-s*N,this.y=M*u+r*N+s*n-i*D,this.z=s*u+r*D+i*N-M*n,this.w=r*u-i*n-M*N-s*D,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,M=this.y,s=this.z,r=this.w,n=r*e.w+i*e.x+M*e.y+s*e.z;if(n<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,n=-n):this.copy(e),n>=1)return this.w=r,this.x=i,this.y=M,this.z=s,this;var N=Math.acos(n),D=Math.sqrt(1-n*n);if(Math.abs(D)<.001)return this.w=.5*(r+this.w),this.x=.5*(i+this.x),this.y=.5*(M+this.y),this.z=.5*(s+this.z),this;var u=Math.sin((1-t)*N)/D,o=Math.sin(t*N)/D;return this.w=r*u+this.w*o,this.x=i*u+this.x*o,this.y=M*u+this.y*o,this.z=s*u+this.z*o,this},setFromUnitVectors:function(){var e,t;return function(i,s){return void 0===e&&(e=new M.Vector3),t=i.dot(s)+1,t<1e-6?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,s),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=M},{}],15:[function(e,t,i){function M(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new r.Quaternion,this.rotateStart_=new r.Vector2,this.rotateEnd_=new r.Vector2,this.rotateDelta_=new r.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var s=e("./base.js").VRDisplay,r=e("./math-util.js"),n=e("./util.js");M.prototype=new s,M.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},M.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},M.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},M.prototype.animatePhi_=function(e){e=n.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},M.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var i=this[e],M=new Date;this.angleAnimation_=requestAnimationFrame(function s(){var r=new Date-M;if(r>=80)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(s.bind(this));var n=r/80;this[e]=i+(t-i)*n}.bind(this))},M.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},M.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-i)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=n.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},M.prototype.onMouseUp_=function(e){this.isDragging_=!1},M.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},M.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=M},{"./base.js":3,"./math-util.js":14,"./util.js":22}],16:[function(e,t,i){function M(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var i=document.createElement("img");i.src=this.icon;var t=i.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(i);var M=document.createElement("div"),t=M.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",M.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(M);var s=document.createElement("div"),t=s.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(s);var r=document.createElement("div");r.style.float="left",r.innerHTML="No Cardboard viewer?";var n=document.createElement("a");n.href="https://www.google.com/get/cardboard/get-cardboard/",n.innerHTML="get one",n.target="_blank";var t=n.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",s.appendChild(r),s.appendChild(n),this.overlay=e,this.text=M,this.hide()}var s=e("./util.js");M.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),i=t.style;s.isLandscapeMode()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},M.prototype.hide=function(){this.overlay.style.display="none"},M.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},M.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},M.prototype.update=function(){this.disableShowTemporarily(),!s.isLandscapeMode()&&s.isMobile()?this.show():this.hide()},M.prototype.loadIcon_=function(){
this.icon=s.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")
},t.exports=M},{"./util.js":22}],17:[function(e,t,i){function M(e){this.kFilter=e,this.currentAccelMeasurement=new s,this.currentGyroMeasurement=new s,this.previousGyroMeasurement=new s,n.isIOS()?this.filterQ=new r.Quaternion(-1,0,0,1):this.filterQ=new r.Quaternion(1,0,0,1),this.previousFilterQ=new r.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r.Vector3,this.measuredGravity=new r.Vector3,this.gyroIntegralQ=new r.Quaternion}var s=e("./sensor-sample.js"),r=e("../math-util.js"),n=e("../util.js");M.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},M.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i=t-this.previousGyroMeasurement.timestampS;n.isTimestampDeltaValid(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},M.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new r.Quaternion;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var M=new r.Quaternion;M.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),M.inverse(),n.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",r.radToDeg*n.getQuaternionAngle(M),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var s=new r.Quaternion;s.copy(this.filterQ),s.multiply(M),this.filterQ.slerp(s,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},M.prototype.getOrientation=function(){return this.filterQ},M.prototype.accelToQuaternion_=function(e){var t=new r.Vector3;t.copy(e),t.normalize();var i=new r.Quaternion;return i.setFromUnitVectors(new r.Vector3(0,0,-1),t),i.inverse(),i},M.prototype.gyroToQuaternionDelta_=function(e,t){var i=new r.Quaternion,M=new r.Vector3;return M.copy(e),M.normalize(),i.setFromAxisAngle(M,e.length()*t),i},t.exports=M},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(e,t,i){function M(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new N.Vector3,this.gyroscope=new N.Vector3,this.start(),this.filter=new s(WebVRConfig.K_FILTER),this.posePredictor=new r(WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new n,this.filterToWorldQ=new N.Quaternion,D.isIOS()?this.filterToWorldQ.setFromAxisAngle(new N.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new N.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new N.Quaternion,this.worldToScreenQ=new N.Quaternion,this.originalPoseAdjustQ=new N.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new N.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),D.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new N.Quaternion,this.isFirefoxAndroid=D.isFirefoxAndroid(),this.isIOS=D.isIOS(),this.orientationOut_=new Float32Array(4)}var s=e("./complementary-filter.js"),r=e("./pose-predictor.js"),n=e("../touch-panner.js"),N=e("../math-util.js"),D=e("../util.js");M.prototype.getPosition=function(){return null},M.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new N.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},M.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),D.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},M.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},M.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,M=e.timeStamp/1e3;this.isFirefoxAndroid&&(M/=1e3);var s=M-this.previousTimestampS;if(s<=D.MIN_TIMESTEP||s>D.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=M);this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,M),this.filter.addGyroMeasurement(this.gyroscope,M),this.previousTimestampS=M},M.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},M.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)}},M.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new N.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new N.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},M.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),D.isIOS()&&D.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},M.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=M},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(e,t,i){function M(e){this.predictionTimeS=e,this.previousQ=new s.Quaternion,this.previousTimestampS=null,this.deltaQ=new s.Quaternion,this.outQ=new s.Quaternion}var s=e("../math-util"),r=e("../util");M.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var M=new s.Vector3;M.copy(t),M.normalize();var n=t.length();if(n<20*s.degToRad)return r.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(s.radToDeg*n).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var N=(this.previousTimestampS,n*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(M,N),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},t.exports=M},{"../math-util":14,"../util":22}],20:[function(e,t,i){function M(e,t){this.set(e,t)}M.prototype.set=function(e,t){this.sample=e,this.timestampS=t},M.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=M},{}],21:[function(e,t,i){function M(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new s.Vector2,this.rotateEnd=new s.Vector2,this.rotateDelta=new s.Vector2,this.theta=0,this.orientation=new s.Quaternion}var s=e("./math-util.js"),r=e("./util.js");M.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},M.prototype.resetSensor=function(){this.theta=0},M.prototype.onTouchStart_=function(e){1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},M.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),r.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},M.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=M},{"./math-util.js":14,"./util.js":22}],22:[function(e,t,i){var M=e("object-assign"),s=window.Util||{};s.MIN_TIMESTEP=.001,s.MAX_TIMESTEP=1,s.base64=function(e,t){return"data:"+e+";base64,"+t},s.clamp=function(e,t,i){return Math.min(Math.max(t,e),i)},s.lerp=function(e,t,i){return e+(t-e)*i},s.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),s.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),s.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),s.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},s.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=s.MIN_TIMESTEP)&&!(e>s.MAX_TIMESTEP))},s.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},s.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},s.requestFullscreen=function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},s.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},s.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},s.linkProgram=function(e,t,i,M){var s=e.createShader(e.VERTEX_SHADER);e.shaderSource(s,t),e.compileShader(s);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r);var n=e.createProgram();e.attachShader(n,s),e.attachShader(n,r);for(var N in M)e.bindAttribLocation(n,M[N],N);return e.linkProgram(n),e.deleteShader(s),e.deleteShader(r),n},s.getProgramUniforms=function(e,t){for(var i={},M=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s="",r=0;r<M;r++){s=e.getActiveUniform(t,r).name.replace("[0]",""),i[s]=e.getUniformLocation(t,s)}return i},s.orthoMatrix=function(e,t,i,M,s,r,n){var N=1/(t-i),D=1/(M-s),u=1/(r-n);return e[0]=-2*N,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*D,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*N,e[13]=(s+M)*D,e[14]=(n+r)*u,e[15]=1,e},s.copyArray=function(e,t){for(var i=0,M=e.length;i<M;i++)t[i]=e[i]},s.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},s.extend=M,s.safariCssSizeWorkaround=function(e){if(s.isIOS()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(i)+"px",setTimeout(function(){e.style.width=t,e.style.height=i},100)}window.Util=s,window.canvas=e},s.isDebug=function(){return s.getQueryParameter("debug")},s.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},s.frameDataFromPose=function(){function e(e,t,i,M){var s=Math.tan(t?t.upDegrees*r:n),N=Math.tan(t?t.downDegrees*r:n),D=Math.tan(t?t.leftDegrees*r:n),u=Math.tan(t?t.rightDegrees*r:n),o=2/(D+u),a=2/(s+N);return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=-(D-u)*o*.5,e[9]=(s-N)*a*.5,e[10]=M/(i-M),e[11]=-1,e[12]=0,e[13]=0,e[14]=M*i/(i-M),e[15]=0,e}function t(e,t,i){var M=t[0],s=t[1],r=t[2],n=t[3],N=M+M,D=s+s,u=r+r,o=M*N,a=M*D,g=M*u,j=s*D,L=s*u,c=r*u,I=n*N,T=n*D,A=n*u;return e[0]=1-(j+c),e[1]=a+A,e[2]=g-T,e[3]=0,e[4]=a-A,e[5]=1-(o+c),e[6]=L+I,e[7]=0,e[8]=g+T,e[9]=L-I,e[10]=1-(o+j),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function i(e,t,i){var M,s,r,n,N,D,u,o,a,g,j,L,c=i[0],I=i[1],T=i[2];return t===e?(e[12]=t[0]*c+t[4]*I+t[8]*T+t[12],e[13]=t[1]*c+t[5]*I+t[9]*T+t[13],e[14]=t[2]*c+t[6]*I+t[10]*T+t[14],e[15]=t[3]*c+t[7]*I+t[11]*T+t[15]):(M=t[0],s=t[1],r=t[2],n=t[3],N=t[4],D=t[5],u=t[6],o=t[7],a=t[8],g=t[9],j=t[10],L=t[11],e[0]=M,e[1]=s,e[2]=r,e[3]=n,e[4]=N,e[5]=D,e[6]=u,e[7]=o,e[8]=a,e[9]=g,e[10]=j,e[11]=L,e[12]=M*c+N*I+a*T+t[12],e[13]=s*c+D*I+g*T+t[13],e[14]=r*c+u*I+j*T+t[14],e[15]=n*c+o*I+L*T+t[15]),e}function M(e,t){var i=t[0],M=t[1],s=t[2],r=t[3],n=t[4],N=t[5],D=t[6],u=t[7],o=t[8],a=t[9],g=t[10],j=t[11],L=t[12],c=t[13],I=t[14],T=t[15],A=i*N-M*n,y=i*D-s*n,w=i*u-r*n,E=M*D-s*N,l=M*u-r*N,z=s*u-r*D,h=o*c-a*L,d=o*I-g*L,x=o*T-j*L,O=a*I-g*c,C=a*T-j*c,S=g*T-j*I,p=A*S-y*C+w*O+E*x-l*d+z*h;return p?(p=1/p,e[0]=(N*S-D*C+u*O)*p,e[1]=(s*C-M*S-r*O)*p,e[2]=(c*z-I*l+T*E)*p,e[3]=(g*l-a*z-j*E)*p,e[4]=(D*x-n*S-u*d)*p,e[5]=(i*S-s*x+r*d)*p,e[6]=(I*w-L*z-T*y)*p,e[7]=(o*z-g*w+j*y)*p,e[8]=(n*C-N*x+u*h)*p,e[9]=(M*x-i*C-r*h)*p,e[10]=(L*l-c*w+T*A)*p,e[11]=(a*w-o*l-j*A)*p,e[12]=(N*d-n*O-D*h)*p,e[13]=(i*O-M*d+s*h)*p,e[14]=(c*y-L*E-I*A)*p,e[15]=(o*E-a*y+g*A)*p,e):null}function s(s,r,n,u,o){e(s,u?u.fieldOfView:null,o.depthNear,o.depthFar),t(r,n.orientation||N,n.position||D),u&&i(r,r,u.offset),M(r,r)}var r=Math.PI/180,n=.25*Math.PI,N=new Float32Array([0,0,0,1]),D=new Float32Array([0,0,0]);return function(e,t,i){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,s(e.leftProjectionMatrix,e.leftViewMatrix,t,i.getEyeParameters("left"),i),s(e.rightProjectionMatrix,e.rightViewMatrix,t,i.getEyeParameters("right"),i),!0)}}(),s.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=s.getDomainFromUrl(document.referrer),i=s.getDomainFromUrl(window.location.href);return e&&t!==i},s.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},t.exports=s},{"object-assign":2}],23:[function(e,t,i){function M(){try{this.selectedKey=localStorage.getItem(N)||n}catch(e){console.error("Failed to load viewer profile: %s",e)}this.dialog=this.createDialog_(s.Viewers),this.root=null}var s=e("./device-info.js"),r=e("eventemitter3"),n=(e("./util.js"),"CardboardV1"),N="WEBVR_CARDBOARD_VIEWER";M.prototype=new r,M.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},M.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},M.prototype.getCurrentViewer=function(){return s.Viewers[this.selectedKey]},M.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},M.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!s.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.emit("change",s.Viewers[this.selectedKey]);try{localStorage.setItem(N,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()},M.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var i=document.createElement("div"),M=i.style;M.position="fixed",M.left=0,M.top=0,M.width="100%",M.height="100%",M.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var s=document.createElement("div"),M=s.style;M.boxSizing="border-box",M.position="fixed",M.top="24px",M.left="50%",M.marginLeft="-140px",M.width="280px",M.padding="24px",M.overflow="hidden",M.background="#fafafa",M.fontFamily="'Roboto', sans-serif",M.boxShadow="0px 5px 20px #666",s.appendChild(this.createH1_("Select your viewer"));for(var r in e)s.appendChild(this.createChoice_(r,e[r].label));return s.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(i),t.appendChild(s),t},M.prototype.createH1_=function(e){var t=document.createElement("h1"),i=t.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",t.innerHTML=e,t},M.prototype.createChoice_=function(e,t){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var M=document.createElement("input");M.style.fontSize="30px",M.setAttribute("id",e),M.setAttribute("type","radio"),M.setAttribute("value",e),M.setAttribute("name","field");var s=document.createElement("label");return s.style.marginLeft="4px",s.setAttribute("for",e),s.innerHTML=t,i.appendChild(M),i.appendChild(s),i},M.prototype.createButton_=function(e,t){var i=document.createElement("button");i.innerHTML=e;var M=i.style;return M.float="right",M.textTransform="uppercase",M.color="#1094f7",M.fontSize="14px",M.letterSpacing=0,M.border=0,M.background="none",M.marginTop="16px",i.addEventListener("click",t),i},t.exports=M},{"./device-info.js":8,"./util.js":22,eventemitter3:1}],24:[function(e,t,i){function M(){function e(e,t,i){var M=document.createElement("source");M.src=i,M.type="video/"+t,e.appendChild(M)}var t=document.createElement("video");t.setAttribute("loop",""),e(t,"webm",r.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),e(t,"mp4",r.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){t.paused&&t.play()},this.release=function(){t.pause()}}function s(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var r=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?s:M}()},{"./util.js":22}],25:[function(e,t,i){function M(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),s()}function s(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=u,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return r.frameDataFromPose(e,this.getPose(),this)})}var r=e("./util.js"),n=e("./cardboard-vr-display.js"),N=e("./mouse-keyboard-vr-display.js"),D=e("./base.js").VRDisplay,u=e("./base.js").VRFrameData,o=e("./base.js").HMDVRDevice,a=e("./base.js").PositionSensorVRDevice,g=e("./display-wrappers.js").VRDisplayHMDDevice,j=e("./display-wrappers.js").VRDisplayPositionSensorDevice;M.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},M.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},M.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new n,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new g(e)),this.devices.push(new j(e)))),this.isMobile()||WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new N,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new g(e)),this.devices.push(new j(e)))),this.devicesPopulated=!0}},M.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&this.isCardboardCompatible()&&window.VRFrameData){var e=new window.VRFrameData,t=window.VRDisplay.prototype.getFrameData;window.VRFrameData=u,window.VRDisplay.prototype.getFrameData=function(i){t.call(this,e),i.pose=e.pose,r.copyArray(e.leftProjectionMatrix,i.leftProjectionMatrix),r.copyArray(e.rightProjectionMatrix,i.rightProjectionMatrix),r.copyArray(e.leftViewMatrix,i.leftViewMatrix),r.copyArray(e.rightViewMatrix,i.rightViewMatrix)}}if(window.VRDisplay=D,navigator&&!navigator.vrEnabled){var i=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return i.isCardboardCompatible()&&(i.isFullScreenAvailable()||r.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=u)},M.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=o,window.PositionSensorVRDevice=a},M.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;return this.nativeWebVRAvailable?this.nativeGetVRDisplaysFunc.call(navigator).then(function(t){return WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?t.concat(e):t.length>0?t:e}):new Promise(function(t,i){try{t(e)}catch(e){i(e)}})},M.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,i){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(i){for(var M=0;M<i.length;++M)e.devices.push(new g(i[M])),e.devices.push(new j(i[M]));e.devicesPopulated=!0,t(e.devices)},i);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(i){for(var M=0;M<i.length;++M)i[M]instanceof o&&e.devices.push(i[M]),i[M]instanceof a&&e.devices.push(i[M]);e.devicesPopulated=!0,t(e.devices)},i)}e.populateDevices(),t(e.devices)}catch(e){i(e)}})},M.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},M.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR},M.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},t.exports.WebVRPolyfill=M},{"./base.js":3,"./cardboard-vr-display.js":6,"./display-wrappers.js":9,"./mouse-keyboard-vr-display.js":15,"./util.js":22}]},{},[13])(13)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],434:[function(_dereq_,module,exports){
"use strict";function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],435:[function(_dereq_,module,exports){
"use strict";module.exports=_dereq_("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"});

},{"cwise-compiler":142}],436:[function(_dereq_,module,exports){
"use strict";function findZeroCrossings(r,e){var o=[];return e=+e||0,core(r.hi(r.shape[0]-1),o,e),o}module.exports=findZeroCrossings;var core=_dereq_("./lib/zc-core");

},{"./lib/zc-core":435}],437:[function(_dereq_,module,exports){
"use strict";function AttributeRecord(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=GL_FLOAT,this.offset=0,this.stride=0,this.divisor=0}var GL_FLOAT=5126;module.exports=function(t,i,e,s,r){for(var o=e.maxAttributes,h=new Array(o),u=0;u<o;++u)h[u]=new AttributeRecord;return{Record:AttributeRecord,scope:{},state:h}};

},{}],438:[function(_dereq_,module,exports){
"use strict";function typedArrayCode(e){return 0|arrayTypes[Object.prototype.toString.call(e)]}function copyArray(e,r){for(var t=0;t<r.length;++t)e[t]=r[t]}function transpose(e,r,t,a,i,n,s){for(var f=0,y=0;y<t;++y)for(var o=0;o<a;++o)e[f++]=r[i*y+n*o+s]}var check=_dereq_("./util/check"),isTypedArray=_dereq_("./util/is-typed-array"),isNDArrayLike=_dereq_("./util/is-ndarray"),values=_dereq_("./util/values"),pool=_dereq_("./util/pool"),flattenUtil=_dereq_("./util/flatten"),arrayFlatten=flattenUtil.flatten,arrayShape=flattenUtil.shape,arrayTypes=_dereq_("./constants/arraytypes.json"),bufferTypes=_dereq_("./constants/dtypes.json"),usageTypes=_dereq_("./constants/usage.json"),GL_STATIC_DRAW=35044,GL_STREAM_DRAW=35040,GL_UNSIGNED_BYTE=5121,GL_FLOAT=5126,DTYPES_SIZES=[];DTYPES_SIZES[5120]=1,DTYPES_SIZES[5122]=2,DTYPES_SIZES[5124]=4,DTYPES_SIZES[5121]=1,DTYPES_SIZES[5123]=2,DTYPES_SIZES[5125]=4,DTYPES_SIZES[5126]=4,module.exports=function(e,r,t){function a(r){this.id=p++,this.buffer=e.createBuffer(),this.type=r,this.usage=GL_STATIC_DRAW,this.byteLength=0,this.dimension=1,this.dtype=GL_UNSIGNED_BYTE,this.persistentData=null,t.profile&&(this.stats={size:0})}function i(e,r){var t=d.pop();return t||(t=new a(e)),t.bind(),f(t,r,GL_STREAM_DRAW,0,1,!1),t}function n(e){d.push(e)}function s(r,t,a){r.byteLength=t.byteLength,e.bufferData(r.type,t,a)}function f(e,r,t,a,i,n){var f;if(e.usage=t,Array.isArray(r)){if(e.dtype=a||GL_FLOAT,r.length>0){var y;if(Array.isArray(r[0])){f=arrayShape(r);for(var o=1,u=1;u<f.length;++u)o*=f[u];e.dimension=o,y=arrayFlatten(r,f,e.dtype),s(e,y,t),n?e.persistentData=y:pool.freeType(y)}else if("number"==typeof r[0]){e.dimension=i;var p=pool.allocType(e.dtype,r.length);copyArray(p,r),s(e,p,t),n?e.persistentData=p:pool.freeType(p)}else isTypedArray(r[0])?(e.dimension=r[0].length,e.dtype=a||typedArrayCode(r[0])||GL_FLOAT,y=arrayFlatten(r,[r.length,r[0].length],e.dtype),s(e,y,t),n?e.persistentData=y:pool.freeType(y)):check.raise("invalid buffer data")}}else if(isTypedArray(r))e.dtype=a||typedArrayCode(r),e.dimension=i,s(e,r,t),n&&(e.persistentData=new Uint8Array(new Uint8Array(r.buffer)));else if(isNDArrayLike(r)){f=r.shape;var l=r.stride,d=r.offset,c=0,h=0,b=0,T=0;1===f.length?(c=f[0],h=1,b=l[0],T=0):2===f.length?(c=f[0],h=f[1],b=l[0],T=l[1]):check.raise("invalid shape"),e.dtype=a||typedArrayCode(r.data)||GL_FLOAT,e.dimension=h;var A=pool.allocType(e.dtype,c*h);transpose(A,r.data,c,h,b,T,d),s(e,A,t),n?e.persistentData=A:pool.freeType(A)}else check.raise("invalid buffer data")}function y(t){r.bufferCount--;var a=t.buffer;check(a,"buffer must not be deleted already"),e.deleteBuffer(a),t.buffer=null,delete l[t.id]}function o(i,n,s,o){function u(r){var a=GL_STATIC_DRAW,i=null,n=0,s=0,y=1;return Array.isArray(r)||isTypedArray(r)||isNDArrayLike(r)?i=r:"number"==typeof r?n=0|r:r&&(check.type(r,"object","buffer arguments must be an object, a number or an array"),"data"in r&&(check(null===i||Array.isArray(i)||isTypedArray(i)||isNDArrayLike(i),"invalid data for buffer"),i=r.data),"usage"in r&&(check.parameter(r.usage,usageTypes,"invalid buffer usage"),a=usageTypes[r.usage]),"type"in r&&(check.parameter(r.type,bufferTypes,"invalid buffer type"),s=bufferTypes[r.type]),"dimension"in r&&(check.type(r.dimension,"number","invalid dimension"),y=0|r.dimension),"length"in r&&(check.nni(n,"buffer length must be a nonnegative integer"),n=0|r.length)),c.bind(),i?f(c,i,a,s,y,o):(e.bufferData(c.type,n,a),c.dtype=s||GL_UNSIGNED_BYTE,c.usage=a,c.dimension=y,c.byteLength=n),t.profile&&(c.stats.size=c.byteLength*DTYPES_SIZES[c.dtype]),u}function p(r,t){check(t+r.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+r.byteLength+" starting from offset "+t+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,t,r)}function d(e,r){var t,a=0|(r||0);if(c.bind(),Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=pool.allocType(c.dtype,e.length);copyArray(i,e),p(i,a),pool.freeType(i)}else if(Array.isArray(e[0])||isTypedArray(e[0])){t=arrayShape(e);var n=arrayFlatten(e,t,c.dtype);p(n,a),pool.freeType(n)}else check.raise("invalid buffer data")}else if(isTypedArray(e))p(e,a);else if(isNDArrayLike(e)){t=e.shape;var s=e.stride,f=0,y=0,o=0,l=0;1===t.length?(f=t[0],y=1,o=s[0],l=0):2===t.length?(f=t[0],y=t[1],o=s[0],l=s[1]):check.raise("invalid shape");var d=Array.isArray(e.data)?c.dtype:typedArrayCode(e.data),h=pool.allocType(d,f*y);transpose(h,e.data,f,y,o,l,e.offset),p(h,a),pool.freeType(h)}else check.raise("invalid data for buffer subdata");return u}r.bufferCount++;var c=new a(n);return l[c.id]=c,s||u(i),u._reglType="buffer",u._buffer=c,u.subdata=d,t.profile&&(u.stats=c.stats),u.destroy=function(){y(c)},u}function u(){values(l).forEach(function(r){r.buffer=e.createBuffer(),e.bindBuffer(r.type,r.buffer),e.bufferData(r.type,r.persistentData||r.byteLength,r.usage)})}var p=0,l={};a.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},a.prototype.destroy=function(){y(this)};var d=[];return t.profile&&(r.getTotalBufferSize=function(){var e=0;return Object.keys(l).forEach(function(r){e+=l[r].stats.size}),e}),{create:o,createStream:i,destroyStream:n,clear:function(){values(l).forEach(y),d.forEach(y)},getBuffer:function(e){return e&&e._buffer instanceof a?e._buffer:null},restore:u,_initBuffer:f}};

},{"./constants/arraytypes.json":439,"./constants/dtypes.json":440,"./constants/usage.json":442,"./util/check":456,"./util/flatten":460,"./util/is-ndarray":462,"./util/is-typed-array":463,"./util/pool":465,"./util/values":468}],439:[function(_dereq_,module,exports){
module.exports={
  "[object Int8Array]": 5120
, "[object Int16Array]": 5122
, "[object Int32Array]": 5124
, "[object Uint8Array]": 5121
, "[object Uint8ClampedArray]": 5121
, "[object Uint16Array]": 5123
, "[object Uint32Array]": 5125
, "[object Float32Array]": 5126
, "[object Float64Array]": 5121
, "[object ArrayBuffer]": 5121
}

},{}],440:[function(_dereq_,module,exports){
module.exports={
  "int8": 5120
, "int16": 5122
, "int32": 5124
, "uint8": 5121
, "uint16": 5123
, "uint32": 5125
, "float": 5126
, "float32": 5126
}

},{}],441:[function(_dereq_,module,exports){
module.exports={
  "points": 0,
  "point": 0,
  "lines": 1,
  "line": 1,
  "line loop": 2,
  "line strip": 3,
  "triangles": 4,
  "triangle": 4,
  "triangle strip": 5,
  "triangle fan": 6
}

},{}],442:[function(_dereq_,module,exports){
module.exports={
  "static": 35044,
  "dynamic": 35048,
  "stream": 35040
}

},{}],443:[function(_dereq_,module,exports){
"use strict";function isBufferArgs(e){return Array.isArray(e)||isTypedArray(e)||isNDArray(e)}function sortState(e){return e.sort(function(e,n){return e===S_VIEWPORT?-1:n===S_VIEWPORT?1:e<n?-1:1})}function Declaration(e,n,t,r){this.thisDep=e,this.contextDep=n,this.propDep=t,this.append=r}function isStatic(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function createStaticDecl(e){return new Declaration(!1,!1,!1,e)}function createDynamicDecl(e,n){var t=e.type;if(t===DYN_FUNC){var r=e.data.length;return new Declaration(!0,r>=1,r>=2,n)}if(t===DYN_THUNK){var a=e.data;return new Declaration(a.thisDep,a.contextDep,a.propDep,n)}return new Declaration(t===DYN_STATE,t===DYN_CONTEXT,t===DYN_PROP,n)}var check=_dereq_("./util/check"),createEnvironment=_dereq_("./util/codegen"),loop=_dereq_("./util/loop"),isTypedArray=_dereq_("./util/is-typed-array"),isNDArray=_dereq_("./util/is-ndarray"),isArrayLike=_dereq_("./util/is-array-like"),dynamic=_dereq_("./dynamic"),primTypes=_dereq_("./constants/primitives.json"),glTypes=_dereq_("./constants/dtypes.json"),CUTE_COMPONENTS="xyzw".split(""),GL_UNSIGNED_BYTE=5121,ATTRIB_STATE_POINTER=1,ATTRIB_STATE_CONSTANT=2,DYN_FUNC=0,DYN_PROP=1,DYN_CONTEXT=2,DYN_STATE=3,DYN_THUNK=4,S_DITHER="dither",S_BLEND_ENABLE="blend.enable",S_BLEND_COLOR="blend.color",S_BLEND_EQUATION="blend.equation",S_BLEND_FUNC="blend.func",S_DEPTH_ENABLE="depth.enable",S_DEPTH_FUNC="depth.func",S_DEPTH_RANGE="depth.range",S_DEPTH_MASK="depth.mask",S_COLOR_MASK="colorMask",S_CULL_ENABLE="cull.enable",S_CULL_FACE="cull.face",S_FRONT_FACE="frontFace",S_LINE_WIDTH="lineWidth",S_POLYGON_OFFSET_ENABLE="polygonOffset.enable",S_POLYGON_OFFSET_OFFSET="polygonOffset.offset",S_SAMPLE_ALPHA="sample.alpha",S_SAMPLE_ENABLE="sample.enable",S_SAMPLE_COVERAGE="sample.coverage",S_STENCIL_ENABLE="stencil.enable",S_STENCIL_MASK="stencil.mask",S_STENCIL_FUNC="stencil.func",S_STENCIL_OPFRONT="stencil.opFront",S_STENCIL_OPBACK="stencil.opBack",S_SCISSOR_ENABLE="scissor.enable",S_SCISSOR_BOX="scissor.box",S_VIEWPORT="viewport",S_PROFILE="profile",S_FRAMEBUFFER="framebuffer",S_VERT="vert",S_FRAG="frag",S_ELEMENTS="elements",S_PRIMITIVE="primitive",S_COUNT="count",S_OFFSET="offset",S_INSTANCES="instances",SUFFIX_WIDTH="Width",SUFFIX_HEIGHT="Height",S_FRAMEBUFFER_WIDTH=S_FRAMEBUFFER+SUFFIX_WIDTH,S_FRAMEBUFFER_HEIGHT=S_FRAMEBUFFER+SUFFIX_HEIGHT,S_VIEWPORT_WIDTH=S_VIEWPORT+SUFFIX_WIDTH,S_VIEWPORT_HEIGHT=S_VIEWPORT+SUFFIX_HEIGHT,S_DRAWINGBUFFER="drawingBuffer",S_DRAWINGBUFFER_WIDTH=S_DRAWINGBUFFER+SUFFIX_WIDTH,S_DRAWINGBUFFER_HEIGHT=S_DRAWINGBUFFER+SUFFIX_HEIGHT,NESTED_OPTIONS=[S_BLEND_FUNC,S_BLEND_EQUATION,S_STENCIL_FUNC,S_STENCIL_OPFRONT,S_STENCIL_OPBACK,S_SAMPLE_COVERAGE,S_VIEWPORT,S_SCISSOR_BOX,S_POLYGON_OFFSET_OFFSET],GL_ARRAY_BUFFER=34962,GL_ELEMENT_ARRAY_BUFFER=34963,GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633,GL_TEXTURE_2D=3553,GL_TEXTURE_CUBE_MAP=34067,GL_CULL_FACE=2884,GL_BLEND=3042,GL_DITHER=3024,GL_STENCIL_TEST=2960,GL_DEPTH_TEST=2929,GL_SCISSOR_TEST=3089,GL_POLYGON_OFFSET_FILL=32823,GL_SAMPLE_ALPHA_TO_COVERAGE=32926,GL_SAMPLE_COVERAGE=32928,GL_FLOAT=5126,GL_FLOAT_VEC2=35664,GL_FLOAT_VEC3=35665,GL_FLOAT_VEC4=35666,GL_INT=5124,GL_INT_VEC2=35667,GL_INT_VEC3=35668,GL_INT_VEC4=35669,GL_BOOL=35670,GL_BOOL_VEC2=35671,GL_BOOL_VEC3=35672,GL_BOOL_VEC4=35673,GL_FLOAT_MAT2=35674,GL_FLOAT_MAT3=35675,GL_FLOAT_MAT4=35676,GL_SAMPLER_2D=35678,GL_SAMPLER_CUBE=35680,GL_TRIANGLES=4,GL_FRONT=1028,GL_BACK=1029,GL_CW=2304,GL_CCW=2305,GL_MIN_EXT=32775,GL_MAX_EXT=32776,GL_ALWAYS=519,GL_KEEP=7680,GL_ZERO=0,GL_ONE=1,GL_FUNC_ADD=32774,GL_LESS=513,GL_FRAMEBUFFER=36160,GL_COLOR_ATTACHMENT0=36064,blendFuncs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},invalidBlendCombinations=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],compareFuncs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},stencilOps={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},shaderType={frag:GL_FRAGMENT_SHADER,vert:GL_VERTEX_SHADER},orientationType={cw:GL_CW,ccw:GL_CCW},SCOPE_DECL=new Declaration(!1,!1,!1,function(){});module.exports=function(e,n,t,r,a,c,i,o,s,f,u,_,l,d,m,E){function p(e){return e.replace(".","_")}function S(e,n,t){var r=p(e);ne.push(e),ee[r]=$[r]=!!t,te[r]=n}function T(e,n,t){var r=p(e);ne.push(e),Array.isArray(t)?($[r]=t.slice(),ee[r]=t.slice()):$[r]=ee[r]=t,re[r]=n}function L(){var e=createEnvironment(),t=e.link,r=e.global;e.id=ie++,e.batchId="0";var a=t(ae),c=e.shared={props:"a0"};Object.keys(ae).forEach(function(e){c[e]=r.def(a,".",e)}),check.optional(function(){e.CHECK=t(check),e.commandStr=check.guessCommand(),e.command=t(e.commandStr),e.assert=function(e,n,r){e("if(!(",n,"))",this.CHECK,".commandRaise(",t(r),",",this.command,");")},ce.invalidBlendCombinations=invalidBlendCombinations});var i=e.next={},o=e.current={};Object.keys(re).forEach(function(e){Array.isArray($[e])&&(i[e]=r.def(c.next,".",e),o[e]=r.def(c.current,".",e))});var s=e.constants={};Object.keys(ce).forEach(function(e){s[e]=r.def(JSON.stringify(ce[e]))}),e.invoke=function(n,r){switch(r.type){case DYN_FUNC:var a=["this",c.context,c.props,e.batchId];return n.def(t(r.data),".call(",a.slice(0,Math.max(r.data.length+1,4)),")");case DYN_PROP:return n.def(c.props,r.data);case DYN_CONTEXT:return n.def(c.context,r.data);case DYN_STATE:return n.def("this",r.data);case DYN_THUNK:return r.data.append(e,n),r.data.ref}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var r=n.id(e);if(r in f)return f[r];var a=u.scope[r];return a||(a=u.scope[r]=new q),f[r]=t(a)},e}function h(e){var n,t=e.static,r=e.dynamic;if(S_PROFILE in t){var a=!!t[S_PROFILE];n=createStaticDecl(function(e,n){return a}),n.enable=a}else if(S_PROFILE in r){var c=r[S_PROFILE];n=createDynamicDecl(c,function(e,n){return e.invoke(n,c)})}return n}function b(e,n){var t=e.static,r=e.dynamic;if(S_FRAMEBUFFER in t){var a=t[S_FRAMEBUFFER];return a?(a=s.getFramebuffer(a),check.command(a,"invalid framebuffer object"),createStaticDecl(function(e,n){var t=e.link(a),r=e.shared;n.set(r.framebuffer,".next",t);var c=r.context;return n.set(c,"."+S_FRAMEBUFFER_WIDTH,t+".width"),n.set(c,"."+S_FRAMEBUFFER_HEIGHT,t+".height"),t})):createStaticDecl(function(e,n){var t=e.shared;n.set(t.framebuffer,".next","null");var r=t.context;return n.set(r,"."+S_FRAMEBUFFER_WIDTH,r+"."+S_DRAWINGBUFFER_WIDTH),n.set(r,"."+S_FRAMEBUFFER_HEIGHT,r+"."+S_DRAWINGBUFFER_HEIGHT),"null"})}if(S_FRAMEBUFFER in r){var c=r[S_FRAMEBUFFER];return createDynamicDecl(c,function(e,n){var t=e.invoke(n,c),r=e.shared,a=r.framebuffer,i=n.def(a,".getFramebuffer(",t,")");check.optional(function(){e.assert(n,"!"+t+"||"+i,"invalid framebuffer object")}),n.set(a,".next",i);var o=r.context;return n.set(o,"."+S_FRAMEBUFFER_WIDTH,i+"?"+i+".width:"+o+"."+S_DRAWINGBUFFER_WIDTH),n.set(o,"."+S_FRAMEBUFFER_HEIGHT,i+"?"+i+".height:"+o+"."+S_DRAWINGBUFFER_HEIGHT),i})}return null}function A(e,n,t){function r(e){if(e in a){var r=a[e];check.commandType(r,"object","invalid "+e,t.commandStr);var i,o,s=!0,f=0|r.x,u=0|r.y;return"width"in r?(i=0|r.width,check.command(i>=0,"invalid "+e,t.commandStr)):s=!1,"height"in r?(o=0|r.height,check.command(o>=0,"invalid "+e,t.commandStr)):s=!1,new Declaration(!s&&n&&n.thisDep,!s&&n&&n.contextDep,!s&&n&&n.propDep,function(e,n){var t=e.shared.context,a=i;"width"in r||(a=n.def(t,".",S_FRAMEBUFFER_WIDTH,"-",f));var c=o;return"height"in r||(c=n.def(t,".",S_FRAMEBUFFER_HEIGHT,"-",u)),[f,u,a,c]})}if(e in c){var _=c[e],l=createDynamicDecl(_,function(n,t){var r=n.invoke(t,_);check.optional(function(){n.assert(t,r+"&&typeof "+r+'==="object"',"invalid "+e)});var a=n.shared.context,c=t.def(r,".x|0"),i=t.def(r,".y|0"),o=t.def('"width" in ',r,"?",r,".width|0:","(",a,".",S_FRAMEBUFFER_WIDTH,"-",c,")"),s=t.def('"height" in ',r,"?",r,".height|0:","(",a,".",S_FRAMEBUFFER_HEIGHT,"-",i,")");return check.optional(function(){n.assert(t,o+">=0&&"+s+">=0","invalid "+e)}),[c,i,o,s]});return n&&(l.thisDep=l.thisDep||n.thisDep,l.contextDep=l.contextDep||n.contextDep,l.propDep=l.propDep||n.propDep),l}return n?new Declaration(n.thisDep,n.contextDep,n.propDep,function(e,n){var t=e.shared.context;return[0,0,n.def(t,".",S_FRAMEBUFFER_WIDTH),n.def(t,".",S_FRAMEBUFFER_HEIGHT)]}):null}var a=e.static,c=e.dynamic,i=r(S_VIEWPORT);if(i){var o=i;i=new Declaration(i.thisDep,i.contextDep,i.propDep,function(e,n){var t=o.append(e,n),r=e.shared.context;return n.set(r,"."+S_VIEWPORT_WIDTH,t[2]),n.set(r,"."+S_VIEWPORT_HEIGHT,t[3]),t})}return{viewport:i,scissor_box:r(S_SCISSOR_BOX)}}function v(e){function t(e){if(e in a){var t=n.id(a[e]);check.optional(function(){_.shader(shaderType[e],t,check.guessCommand())});var r=createStaticDecl(function(){return t});return r.id=t,r}if(e in c){var i=c[e];return createDynamicDecl(i,function(n,t){var r=n.invoke(t,i),a=t.def(n.shared.strings,".id(",r,")");return check.optional(function(){t(n.shared.shader,".shader(",shaderType[e],",",a,",",n.command,");")}),a})}return null}var r,a=e.static,c=e.dynamic,i=t(S_FRAG),o=t(S_VERT),s=null;return isStatic(i)&&isStatic(o)?(s=_.program(o.id,i.id),r=createStaticDecl(function(e,n){return e.link(s)})):r=new Declaration(i&&i.thisDep||o&&o.thisDep,i&&i.contextDep||o&&o.contextDep,i&&i.propDep||o&&o.propDep,function(e,n){var t,r=e.shared.shader;t=i?i.append(e,n):n.def(r,".",S_FRAG);var a;a=o?o.append(e,n):n.def(r,".",S_VERT);var c=r+".program("+a+","+t;return check.optional(function(){c+=","+e.command}),n.def(c+")")}),{frag:i,vert:o,progVar:r,program:s}}function O(e,n){function t(e,t){if(e in r){var i=0|r[e];return check.command(!t||i>=0,"invalid "+e,n.commandStr),createStaticDecl(function(e,n){return t&&(e.OFFSET=i),i})}if(e in a){var o=a[e];return createDynamicDecl(o,function(n,r){var a=n.invoke(r,o);return t&&(n.OFFSET=a,check.optional(function(){n.assert(r,a+">=0","invalid "+e)})),a})}return t&&c?createStaticDecl(function(e,n){return e.OFFSET="0",0}):null}var r=e.static,a=e.dynamic,c=function(){if(S_ELEMENTS in r){var e=r[S_ELEMENTS];isBufferArgs(e)?e=i.getElements(i.create(e,!0)):e&&(e=i.getElements(e),check.command(e,"invalid elements",n.commandStr));var t=createStaticDecl(function(n,t){if(e){var r=n.link(e);return n.ELEMENTS=r,r}return n.ELEMENTS=null,null});return t.value=e,t}if(S_ELEMENTS in a){var c=a[S_ELEMENTS];return createDynamicDecl(c,function(e,n){var t=e.shared,r=t.isBufferArgs,a=t.elements,i=e.invoke(n,c),o=n.def("null"),s=n.def(r,"(",i,")"),f=e.cond(s).then(o,"=",a,".createStream(",i,");").else(o,"=",a,".getElements(",i,");");return check.optional(function(){e.assert(f.else,"!"+i+"||"+o,"invalid elements")}),n.entry(f),n.exit(e.cond(s).then(a,".destroyStream(",o,");")),e.ELEMENTS=o,o})}return null}(),o=t(S_OFFSET,!0);return{elements:c,primitive:function(){if(S_PRIMITIVE in r){var e=r[S_PRIMITIVE];return check.commandParameter(e,primTypes,"invalid primitve",n.commandStr),createStaticDecl(function(n,t){return primTypes[e]})}if(S_PRIMITIVE in a){var t=a[S_PRIMITIVE];return createDynamicDecl(t,function(e,n){var r=e.constants.primTypes,a=e.invoke(n,t);return check.optional(function(){e.assert(n,a+" in "+r,"invalid primitive, must be one of "+Object.keys(primTypes))}),n.def(r,"[",a,"]")})}return c?isStatic(c)?createStaticDecl(c.value?function(e,n){return n.def(e.ELEMENTS,".primType")}:function(){return GL_TRIANGLES}):new Declaration(c.thisDep,c.contextDep,c.propDep,function(e,n){var t=e.ELEMENTS;return n.def(t,"?",t,".primType:",GL_TRIANGLES)}):null}(),count:function(){if(S_COUNT in r){var e=0|r[S_COUNT];return check.command("number"==typeof e&&e>=0,"invalid vertex count",n.commandStr),createStaticDecl(function(){return e})}if(S_COUNT in a){var t=a[S_COUNT];return createDynamicDecl(t,function(e,n){var r=e.invoke(n,t);return check.optional(function(){e.assert(n,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(c){if(isStatic(c)){if(c)return o?new Declaration(o.thisDep,o.contextDep,o.propDep,function(e,n){var t=n.def(e.ELEMENTS,".vertCount-",e.OFFSET);return check.optional(function(){e.assert(n,t+">=0","invalid vertex offset/element buffer too small")}),t}):createStaticDecl(function(e,n){return n.def(e.ELEMENTS,".vertCount")});var i=createStaticDecl(function(){return-1});return check.optional(function(){i.MISSING=!0}),i}var s=new Declaration(c.thisDep||o.thisDep,c.contextDep||o.contextDep,c.propDep||o.propDep,function(e,n){var t=e.ELEMENTS;return e.OFFSET?n.def(t,"?",t,".vertCount-",e.OFFSET,":-1"):n.def(t,"?",t,".vertCount:-1")});return check.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:t(S_INSTANCES,!1),offset:o}}function F(e,n){var t=e.static,a=e.dynamic,c={};return ne.forEach(function(e){function i(n,r){if(e in t){var i=n(t[e]);c[o]=createStaticDecl(function(){return i})}else if(e in a){var s=a[e];c[o]=createDynamicDecl(s,function(e,n){return r(e,n,e.invoke(n,s))})}}var o=p(e);switch(e){case S_CULL_ENABLE:case S_BLEND_ENABLE:case S_DITHER:case S_STENCIL_ENABLE:case S_DEPTH_ENABLE:case S_SCISSOR_ENABLE:case S_POLYGON_OFFSET_ENABLE:case S_SAMPLE_ALPHA:case S_SAMPLE_ENABLE:case S_DEPTH_MASK:return i(function(t){return check.commandType(t,"boolean",e,n.commandStr),t},function(n,t,r){return check.optional(function(){n.assert(t,"typeof "+r+'==="boolean"',"invalid flag "+e,n.commandStr)}),r});case S_DEPTH_FUNC:return i(function(t){return check.commandParameter(t,compareFuncs,"invalid "+e,n.commandStr),compareFuncs[t]},function(n,t,r){var a=n.constants.compareFuncs;return check.optional(function(){n.assert(t,r+" in "+a,"invalid "+e+", must be one of "+Object.keys(compareFuncs))}),t.def(a,"[",r,"]")});case S_DEPTH_RANGE:return i(function(e){return check.command(isArrayLike(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",n.commandStr),e},function(e,n,t){return check.optional(function(){e.assert(n,e.shared.isArrayLike+"("+t+")&&"+t+".length===2&&typeof "+t+'[0]==="number"&&typeof '+t+'[1]==="number"&&'+t+"[0]<="+t+"[1]","depth range must be a 2d array")}),[n.def("+",t,"[0]"),n.def("+",t,"[1]")]});case S_BLEND_FUNC:return i(function(e){check.commandType(e,"object","blend.func",n.commandStr);var t="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,a="dstRGB"in e?e.dstRGB:e.dst,c="dstAlpha"in e?e.dstAlpha:e.dst;return check.commandParameter(t,blendFuncs,o+".srcRGB",n.commandStr),check.commandParameter(r,blendFuncs,o+".srcAlpha",n.commandStr),check.commandParameter(a,blendFuncs,o+".dstRGB",n.commandStr),check.commandParameter(c,blendFuncs,o+".dstAlpha",n.commandStr),check.command(-1===invalidBlendCombinations.indexOf(t+", "+a),"unallowed blending combination (srcRGB, dstRGB) = ("+t+", "+a+")",n.commandStr),[blendFuncs[t],blendFuncs[a],blendFuncs[r],blendFuncs[c]]},function(n,t,r){function a(a,i){var o=t.def('"',a,i,'" in ',r,"?",r,".",a,i,":",r,".",a);return check.optional(function(){n.assert(t,o+" in "+c,"invalid "+e+"."+a+i+", must be one of "+Object.keys(blendFuncs))}),o}var c=n.constants.blendFuncs;check.optional(function(){n.assert(t,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var i=a("src","RGB"),o=a("dst","RGB");check.optional(function(){var e=n.constants.invalidBlendCombinations;n.assert(t,e+".indexOf("+i+'+", "+'+o+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=t.def(c,"[",i,"]"),f=t.def(c,"[",a("src","Alpha"),"]");return[s,t.def(c,"[",o,"]"),f,t.def(c,"[",a("dst","Alpha"),"]")]});case S_BLEND_EQUATION:return i(function(t){return"string"==typeof t?(check.commandParameter(t,Q,"invalid "+e,n.commandStr),[Q[t],Q[t]]):"object"==typeof t?(check.commandParameter(t.rgb,Q,e+".rgb",n.commandStr),check.commandParameter(t.alpha,Q,e+".alpha",n.commandStr),[Q[t.rgb],Q[t.alpha]]):void check.commandRaise("invalid blend.equation",n.commandStr)},function(n,t,r){var a=n.constants.blendEquations,c=t.def(),i=t.def(),o=n.cond("typeof ",r,'==="string"');return check.optional(function(){function t(e,t,r){n.assert(e,r+" in "+a,"invalid "+t+", must be one of "+Object.keys(Q))}t(o.then,e,r),n.assert(o.else,r+"&&typeof "+r+'==="object"',"invalid "+e),t(o.else,e+".rgb",r+".rgb"),t(o.else,e+".alpha",r+".alpha")}),o.then(c,"=",i,"=",a,"[",r,"];"),o.else(c,"=",a,"[",r,".rgb];",i,"=",a,"[",r,".alpha];"),t(o),[c,i]});case S_BLEND_COLOR:return i(function(e){return check.command(isArrayLike(e)&&4===e.length,"blend.color must be a 4d array",n.commandStr),loop(4,function(n){return+e[n]})},function(e,n,t){return check.optional(function(){e.assert(n,e.shared.isArrayLike+"("+t+")&&"+t+".length===4","blend.color must be a 4d array")}),loop(4,function(e){return n.def("+",t,"[",e,"]")})});case S_STENCIL_MASK:return i(function(e){return check.commandType(e,"number",o,n.commandStr),0|e},function(e,n,t){return check.optional(function(){e.assert(n,"typeof "+t+'==="number"',"invalid stencil.mask")}),n.def(t,"|0")});case S_STENCIL_FUNC:return i(function(t){check.commandType(t,"object",o,n.commandStr);var r=t.cmp||"keep",a=t.ref||0,c="mask"in t?t.mask:-1;return check.commandParameter(r,compareFuncs,e+".cmp",n.commandStr),check.commandType(a,"number",e+".ref",n.commandStr),check.commandType(c,"number",e+".mask",n.commandStr),[compareFuncs[r],a,c]},function(e,n,t){var r=e.constants.compareFuncs;return check.optional(function(){function a(){e.assert(n,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(t+"&&typeof ",t,'==="object"'),a('!("cmp" in ',t,")||(",t,".cmp in ",r,")")}),[n.def('"cmp" in ',t,"?",r,"[",t,".cmp]",":",GL_KEEP),n.def(t,".ref|0"),n.def('"mask" in ',t,"?",t,".mask|0:-1")]});case S_STENCIL_OPFRONT:case S_STENCIL_OPBACK:return i(function(t){check.commandType(t,"object",o,n.commandStr);var r=t.fail||"keep",a=t.zfail||"keep",c=t.zpass||"keep";return check.commandParameter(r,stencilOps,e+".fail",n.commandStr),check.commandParameter(a,stencilOps,e+".zfail",n.commandStr),check.commandParameter(c,stencilOps,e+".zpass",n.commandStr),[e===S_STENCIL_OPBACK?GL_BACK:GL_FRONT,stencilOps[r],stencilOps[a],stencilOps[c]]},function(n,t,r){function a(a){return check.optional(function(){n.assert(t,'!("'+a+'" in '+r+")||("+r+"."+a+" in "+c+")","invalid "+e+"."+a+", must be one of "+Object.keys(stencilOps))}),t.def('"',a,'" in ',r,"?",c,"[",r,".",a,"]:",GL_KEEP)}var c=n.constants.stencilOps;return check.optional(function(){n.assert(t,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[e===S_STENCIL_OPBACK?GL_BACK:GL_FRONT,a("fail"),a("zfail"),a("zpass")]});case S_POLYGON_OFFSET_OFFSET:return i(function(e){check.commandType(e,"object",o,n.commandStr);var t=0|e.factor,r=0|e.units;return check.commandType(t,"number",o+".factor",n.commandStr),check.commandType(r,"number",o+".units",n.commandStr),[t,r]},function(n,t,r){return check.optional(function(){n.assert(t,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[t.def(r,".factor|0"),t.def(r,".units|0")]});case S_CULL_FACE:return i(function(e){var t=0;return"front"===e?t=GL_FRONT:"back"===e&&(t=GL_BACK),check.command(!!t,o,n.commandStr),t},function(e,n,t){return check.optional(function(){e.assert(n,t+'==="front"||'+t+'==="back"',"invalid cull.face")}),n.def(t,'==="front"?',GL_FRONT,":",GL_BACK)});case S_LINE_WIDTH:return i(function(e){return check.command("number"==typeof e&&e>=r.lineWidthDims[0]&&e<=r.lineWidthDims[1],"invalid line width, must positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],n.commandStr),e},function(e,n,t){return check.optional(function(){e.assert(n,"typeof "+t+'==="number"&&'+t+">="+r.lineWidthDims[0]+"&&"+t+"<="+r.lineWidthDims[1],"invalid line width")}),t});case S_FRONT_FACE:return i(function(e){return check.commandParameter(e,orientationType,o,n.commandStr),orientationType[e]},function(e,n,t){return check.optional(function(){e.assert(n,t+'==="cw"||'+t+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),n.def(t+'==="cw"?'+GL_CW+":"+GL_CCW)});case S_COLOR_MASK:return i(function(e){return check.command(isArrayLike(e)&&4===e.length,"color.mask must be length 4 array",n.commandStr),e.map(function(e){return!!e})},function(e,n,t){return check.optional(function(){e.assert(n,e.shared.isArrayLike+"("+t+")&&"+t+".length===4","invalid color.mask")}),loop(4,function(e){return"!!"+t+"["+e+"]"})});case S_SAMPLE_COVERAGE:return i(function(e){check.command("object"==typeof e&&e,o,n.commandStr);var t="value"in e?e.value:1,r=!!e.invert;return check.command("number"==typeof t&&t>=0&&t<=1,"sample.coverage.value must be a number between 0 and 1",n.commandStr),[t,r]},function(e,n,t){return check.optional(function(){e.assert(n,t+"&&typeof "+t+'==="object"',"invalid sample.coverage")}),[n.def('"value" in ',t,"?+",t,".value:1"),n.def("!!",t,".invert")]})}}),c}function y(e,n){var t=e.static,r=e.dynamic,a={};return Object.keys(t).forEach(function(e){var r,c=t[e];if("number"==typeof c||"boolean"==typeof c)r=createStaticDecl(function(){return c});else if("function"==typeof c){var i=c._reglType;"texture2d"===i||"textureCube"===i?r=createStaticDecl(function(e){return e.link(c)}):"framebuffer"===i||"framebufferCube"===i?(check.command(c.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',n.commandStr),r=createStaticDecl(function(e){return e.link(c.color[0])})):check.commandRaise('invalid data for uniform "'+e+'"',n.commandStr)}else isArrayLike(c)?r=createStaticDecl(function(n){return n.global.def("[",loop(c.length,function(t){return check.command("number"==typeof c[t]||"boolean"==typeof c[t],"invalid uniform "+e,n.commandStr),c[t]}),"]")}):check.commandRaise('invalid or missing data for uniform "'+e+'"',n.commandStr);r.value=c,a[e]=r}),Object.keys(r).forEach(function(e){var n=r[e];a[e]=createDynamicDecl(n,function(e,t){return e.invoke(t,n)})}),a}function k(e,t){var r=e.static,a=e.dynamic,i={};return Object.keys(r).forEach(function(e){var a=r[e],o=n.id(e),s=new q;if(isBufferArgs(a))s.state=ATTRIB_STATE_POINTER,s.buffer=c.getBuffer(c.create(a,GL_ARRAY_BUFFER,!1,!0)),s.type=0;else{var f=c.getBuffer(a);if(f)s.state=ATTRIB_STATE_POINTER,s.buffer=f,s.type=0;else if(check.command("object"==typeof a&&a,"invalid data for attribute "+e,t.commandStr),a.constant){var u=a.constant;s.buffer="null",s.state=ATTRIB_STATE_CONSTANT,"number"==typeof u?s.x=u:(check.command(isArrayLike(u)&&u.length>0&&u.length<=4,"invalid constant for attribute "+e,t.commandStr),CUTE_COMPONENTS.forEach(function(e,n){n<u.length&&(s[e]=u[n])}))}else{f=isBufferArgs(a.buffer)?c.getBuffer(c.create(a.buffer,GL_ARRAY_BUFFER,!1,!0)):c.getBuffer(a.buffer),check.command(!!f,'missing buffer for attribute "'+e+'"',t.commandStr);var _=0|a.offset;check.command(_>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var l=0|a.stride;check.command(l>=0&&l<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var d=0|a.size;check.command(!("size"in a)||d>0&&d<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var m=!!a.normalized,E=0;"type"in a&&(check.commandParameter(a.type,glTypes,"invalid type for attribute "+e,t.commandStr),E=glTypes[a.type]);var p=0|a.divisor;"divisor"in a&&(check.command(0===p||Z,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),check.command(p>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),check.optional(function(){var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(a).forEach(function(t){check.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)})}),s.buffer=f,s.state=ATTRIB_STATE_POINTER,s.size=d,s.normalized=m,s.type=E||f.dtype,s.offset=_,s.stride=l,s.divisor=p}}i[e]=createStaticDecl(function(e,n){var t=e.attribCache;if(o in t)return t[o];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),t[o]=r,r})}),Object.keys(a).forEach(function(e){function n(n,r){function a(e){r(f[e],"=",c,".",e,"|0;")}var c=n.invoke(r,t),i=n.shared,o=i.isBufferArgs,s=i.buffer;check.optional(function(){n.assert(r,c+"&&(typeof "+c+'==="object"||typeof '+c+'==="function")&&('+o+"("+c+")||"+s+".getBuffer("+c+")||"+s+".getBuffer("+c+".buffer)||"+o+"("+c+'.buffer)||("constant" in '+c+"&&(typeof "+c+'.constant==="number"||'+i.isArrayLike+"("+c+".constant))))",'invalid dynamic attribute "'+e+'"')});var f={isStream:r.def(!1)},u=new q;u.state=ATTRIB_STATE_POINTER,Object.keys(u).forEach(function(e){f[e]=r.def(""+u[e])});var _=f.buffer,l=f.type;return r("if(",o,"(",c,")){",f.isStream,"=true;",_,"=",s,".createStream(",GL_ARRAY_BUFFER,",",c,");",l,"=",_,".dtype;","}else{",_,"=",s,".getBuffer(",c,");","if(",_,"){",l,"=",_,".dtype;",'}else if("constant" in ',c,"){",f.state,"=",ATTRIB_STATE_CONSTANT,";","if(typeof "+c+'.constant === "number"){',f[CUTE_COMPONENTS[0]],"=",c,".constant;",CUTE_COMPONENTS.slice(1).map(function(e){return f[e]}).join("="),"=0;","}else{",CUTE_COMPONENTS.map(function(e,n){return f[e]+"="+c+".constant.length>="+n+"?"+c+".constant["+n+"]:0;"}).join(""),"}}else{","if(",o,"(",c,".buffer)){",_,"=",s,".createStream(",GL_ARRAY_BUFFER,",",c,".buffer);","}else{",_,"=",s,".getBuffer(",c,".buffer);","}",l,'="type" in ',c,"?",i.glTypes,"[",c,".type]:",_,".dtype;",f.normalized,"=!!",c,".normalized;"),a("size"),a("offset"),a("stride"),a("divisor"),r("}}"),r.exit("if(",f.isStream,"){",s,".destroyStream(",_,");","}"),f}var t=a[e];i[e]=createDynamicDecl(t,n)}),i}function N(e){var n=e.static,t=e.dynamic,r={};return Object.keys(n).forEach(function(e){var t=n[e];r[e]=createStaticDecl(function(e,n){return"number"==typeof t||"boolean"==typeof t?""+t:e.link(t)})}),Object.keys(t).forEach(function(e){var n=t[e];r[e]=createDynamicDecl(n,function(e,t){return e.invoke(t,n)})}),r}function D(e,n,t,r,c){function i(e){var n=u[e];n&&(l[e]=n)}var o=e.static,s=e.dynamic;check.optional(function(){function e(e){Object.keys(e).forEach(function(e){check.command(n.indexOf(e)>=0,'unknown parameter "'+e+'"',c.commandStr)})}var n=[S_FRAMEBUFFER,S_VERT,S_FRAG,S_ELEMENTS,S_PRIMITIVE,S_OFFSET,S_COUNT,S_INSTANCES,S_PROFILE].concat(ne);e(o),e(s)});var f=b(e,c),u=A(e,f,c),_=O(e,c),l=F(e,c),d=v(e,c);i(S_VIEWPORT),i(p(S_SCISSOR_BOX));var m=Object.keys(l).length>0,E={framebuffer:f,draw:_,shader:d,state:l,dirty:m};return E.profile=h(e,c),E.uniforms=y(t,c),E.attributes=k(n,c),E.context=N(r,c),Object.keys(E.attributes).length&&a.hasSupport&&(E.vao=a.create()),E}function G(e,n,t){var r=e.shared,a=r.context,c=e.scope();Object.keys(t).forEach(function(r){n.save(a,"."+r);var i=t[r];c(a,".",r,"=",i.append(e,n),";")}),n(c)}function R(e,n,t,r){var a,c=e.shared,i=c.gl,o=c.framebuffer;J&&(a=n.def(c.extensions,".webgl_draw_buffers"));var s,f=e.constants,u=f.drawBuffer,_=f.backBuffer;s=t?t.append(e,n):n.def(o,".next"),r||n("if(",s,"!==",o,".cur){"),n("if(",s,"){",i,".bindFramebuffer(",GL_FRAMEBUFFER,",",s,".framebuffer);"),J&&n(a,".drawBuffersWEBGL(",u,"[",s,".colorAttachments.length]);"),n("}else{",i,".bindFramebuffer(",GL_FRAMEBUFFER,",null);"),J&&n(a,".drawBuffersWEBGL(",_,");"),n("}",o,".cur=",s,";"),r||n("}")}function C(e,n,t){var r=e.shared,a=r.gl,c=e.current,i=e.next,o=r.current,s=r.next,f=e.cond(o,".dirty");ne.forEach(function(n){var r=p(n);if(!(r in t.state)){var u,_;if(r in i){u=i[r],_=c[r];var l=loop($[r].length,function(e){return f.def(u,"[",e,"]")});f(e.cond(l.map(function(e,n){return e+"!=="+_+"["+n+"]"}).join("||")).then(a,".",re[r],"(",l,");",l.map(function(e,n){return _+"["+n+"]="+e}).join(";"),";"))}else{u=f.def(s,".",r);var d=e.cond(u,"!==",o,".",r);f(d),r in te?d(e.cond(u).then(a,".enable(",te[r],");").else(a,".disable(",te[r],");"),o,".",r,"=",u,";"):d(a,".",re[r],"(",u,");",o,".",r,"=",u,";")}}}),0===Object.keys(t.state).length&&f(o,".dirty=false;"),n(f)}function I(e,n,t,r){var a=e.shared,c=e.current,i=a.current,o=a.gl;sortState(Object.keys(t)).forEach(function(a){var s=t[a];if(!r||r(s)){var f=s.append(e,n);if(te[a]){var u=te[a];isStatic(s)?f?n(o,".enable(",u,");"):n(o,".disable(",u,");"):n(e.cond(f).then(o,".enable(",u,");").else(o,".disable(",u,");")),n(i,".",a,"=",f,";")}else if(isArrayLike(f)){var _=c[a];n(o,".",re[a],"(",f,");",f.map(function(e,n){return _+"["+n+"]="+e}).join(";"),";")}else n(o,".",re[a],"(",f,");",i,".",a,"=",f,";")}})}function g(e,n){Z&&(e.instancing=n.def(e.shared.extensions,".angle_instanced_arrays"))}function B(e,n,t,r,a){function c(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function i(e){f=n.def(),e(f,"=",c(),";"),"string"==typeof a?e(d,".count+=",a,";"):e(d,".count++;"),m&&(r?(u=n.def(),e(u,"=",p,".getNumPendingQueries();")):e(p,".beginQuery(",d,");"))}function o(e){e(d,".cpuTime+=",c(),"-",f,";"),m&&(r?e(p,".pushScopeStats(",u,",",p,".getNumPendingQueries(),",d,");"):e(p,".endQuery();"))}function s(e){var t=n.def(E,".profile");n(E,".profile=",e,";"),n.exit(E,".profile=",t,";")}var f,u,_,l=e.shared,d=e.stats,E=l.current,p=l.timer,S=t.profile;if(S){if(isStatic(S))return void(S.enable?(i(n),o(n.exit),s("true")):s("false"));_=S.append(e,n),s(_)}else _=n.def(E,".profile");var T=e.block();i(T),n("if(",_,"){",T,"}");var L=e.block();o(L),n.exit("if(",_,"){",L,"}")}function P(e,n,t,r,c){function i(e){switch(e){case GL_FLOAT_VEC2:case GL_INT_VEC2:case GL_BOOL_VEC2:return 2;case GL_FLOAT_VEC3:case GL_INT_VEC3:case GL_BOOL_VEC3:return 3;case GL_FLOAT_VEC4:case GL_INT_VEC4:case GL_BOOL_VEC4:return 4;default:return 1}}function o(t,r,a){function c(){n("if(!",u,".buffer){",o,".enableVertexAttribArray(",f,");}");var t,c=a.type;if(t=a.size?n.def(a.size,"||",r):r,n("if(",u,".type!==",c,"||",u,".size!==",t,"||",m.map(function(e){return u+"."+e+"!=="+a[e]}).join("||"),"){",o,".bindBuffer(",GL_ARRAY_BUFFER,",",l,".buffer);",o,".vertexAttribPointer(",[f,t,c,a.normalized,a.stride,a.offset],");",u,".type=",c,";",u,".size=",t,";",m.map(function(e){return u+"."+e+"="+a[e]+";"}).join(""),"}"),Z){var i=a.divisor;n("if(",u,".divisor!==",i,"){",e.instancing,".vertexAttribDivisorANGLE(",[f,i],");",u,".divisor=",i,";}")}}function i(){n("if(",u,".buffer){",o,".disableVertexAttribArray(",f,");","}if(",CUTE_COMPONENTS.map(function(e,n){return u+"."+e+"!=="+d[n]}).join("||"),"){",o,".vertexAttrib4f(",f,",",d,");",CUTE_COMPONENTS.map(function(e,n){return u+"."+e+"="+d[n]+";"}).join(""),"}")}var o=s.gl,f=n.def(t,".location"),u=n.def(s.attributes,"[",f,"]"),_=a.state,l=a.buffer,d=[a.x,a.y,a.z,a.w],m=["buffer","normalized","offset","stride"];_===ATTRIB_STATE_POINTER?c():_===ATTRIB_STATE_CONSTANT?i():(n("if(",_,"===",ATTRIB_STATE_POINTER,"){"),c(),n("}else{"),i(),n("}"))}var s=e.shared,f=r.length&&a.hasSupport?e.link(t.vao):null;f&&n("if(",f,"){",f,".bind(); }"),r.forEach(function(r){var a,s=r.name,f=t.attributes[s];if(f){if(!c(f))return;a=f.append(e,n)}else{if(!c(SCOPE_DECL))return;var u=e.scopeAttrib(s);check.optional(function(){e.assert(n,u+".state","missing attribute "+s)}),a={},Object.keys(new q).forEach(function(e){a[e]=n.def(u,".",e)})}o(e.link(r),i(r.info.type),a)})}function M(e,t,r,a,c){for(var i,o=e.shared,s=o.gl,f=0;f<a.length;++f){var u,_=a[f],l=_.name,d=_.info.type,m=r.uniforms[l],E=e.link(_),p=E+".location";if(m){if(!c(m))continue;if(isStatic(m)){var S=m.value;if(check.command(null!==S&&void 0!==S,'missing uniform "'+l+'"',e.commandStr),d===GL_SAMPLER_2D||d===GL_SAMPLER_CUBE){
check.command("function"==typeof S&&(d===GL_SAMPLER_2D&&("texture2d"===S._reglType||"framebuffer"===S._reglType)||d===GL_SAMPLER_CUBE&&("textureCube"===S._reglType||"framebufferCube"===S._reglType)),"invalid texture for uniform "+l,e.commandStr);var T=e.link(S._texture||S.color[0]._texture);t(s,".uniform1i(",p,",",T+".bind());"),t.exit(T,".unbind();")}else if(d===GL_FLOAT_MAT2||d===GL_FLOAT_MAT3||d===GL_FLOAT_MAT4){check.optional(function(){check.command(isArrayLike(S),"invalid matrix for uniform "+l,e.commandStr),check.command(d===GL_FLOAT_MAT2&&4===S.length||d===GL_FLOAT_MAT3&&9===S.length||d===GL_FLOAT_MAT4&&16===S.length,"invalid length for matrix uniform "+l,e.commandStr)});var L=e.global.def("new Float32Array(["+Array.prototype.slice.call(S)+"])"),h=2;d===GL_FLOAT_MAT3?h=3:d===GL_FLOAT_MAT4&&(h=4),t(s,".uniformMatrix",h,"fv(",p,",false,",L,");")}else{switch(d){case GL_FLOAT:check.commandType(S,"number","uniform "+l,e.commandStr),i="1f";break;case GL_FLOAT_VEC2:check.command(isArrayLike(S)&&2===S.length,"uniform "+l,e.commandStr),i="2f";break;case GL_FLOAT_VEC3:check.command(isArrayLike(S)&&3===S.length,"uniform "+l,e.commandStr),i="3f";break;case GL_FLOAT_VEC4:check.command(isArrayLike(S)&&4===S.length,"uniform "+l,e.commandStr),i="4f";break;case GL_BOOL:check.commandType(S,"boolean","uniform "+l,e.commandStr),i="1i";break;case GL_INT:check.commandType(S,"number","uniform "+l,e.commandStr),i="1i";break;case GL_BOOL_VEC2:case GL_INT_VEC2:check.command(isArrayLike(S)&&2===S.length,"uniform "+l,e.commandStr),i="2i";break;case GL_BOOL_VEC3:case GL_INT_VEC3:check.command(isArrayLike(S)&&3===S.length,"uniform "+l,e.commandStr),i="3i";break;case GL_BOOL_VEC4:case GL_INT_VEC4:check.command(isArrayLike(S)&&4===S.length,"uniform "+l,e.commandStr),i="4i"}t(s,".uniform",i,"(",p,",",isArrayLike(S)?Array.prototype.slice.call(S):S,");")}continue}u=m.append(e,t)}else{if(!c(SCOPE_DECL))continue;u=t.def(o.uniforms,"[",n.id(l),"]")}d===GL_SAMPLER_2D?t("if(",u,"&&",u,'._reglType==="framebuffer"){',u,"=",u,".color[0];","}"):d===GL_SAMPLER_CUBE&&t("if(",u,"&&",u,'._reglType==="framebufferCube"){',u,"=",u,".color[0];","}"),check.optional(function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+l+'".  '+r)}function r(e){n("typeof "+u+'==="'+e+'"',"invalid type, expected "+e)}function a(t,r){n(o.isArrayLike+"("+u+")&&"+u+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function c(t){n("typeof "+u+'==="function"&&'+u+'._reglType==="texture'+(t===GL_TEXTURE_2D?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(d){case GL_INT:r("number");break;case GL_INT_VEC2:a(2,"number");break;case GL_INT_VEC3:a(3,"number");break;case GL_INT_VEC4:a(4,"number");break;case GL_FLOAT:r("number");break;case GL_FLOAT_VEC2:a(2,"number");break;case GL_FLOAT_VEC3:a(3,"number");break;case GL_FLOAT_VEC4:a(4,"number");break;case GL_BOOL:r("boolean");break;case GL_BOOL_VEC2:a(2,"boolean");break;case GL_BOOL_VEC3:a(3,"boolean");break;case GL_BOOL_VEC4:a(4,"boolean");break;case GL_FLOAT_MAT2:a(4,"number");break;case GL_FLOAT_MAT3:a(9,"number");break;case GL_FLOAT_MAT4:a(16,"number");break;case GL_SAMPLER_2D:c(GL_TEXTURE_2D);break;case GL_SAMPLER_CUBE:c(GL_TEXTURE_CUBE_MAP)}});var b=1;switch(d){case GL_SAMPLER_2D:case GL_SAMPLER_CUBE:var A=t.def(u,"._texture");t(s,".uniform1i(",p,",",A,".bind());"),t.exit(A,".unbind();");continue;case GL_INT:case GL_BOOL:i="1i";break;case GL_INT_VEC2:case GL_BOOL_VEC2:i="2i",b=2;break;case GL_INT_VEC3:case GL_BOOL_VEC3:i="3i",b=3;break;case GL_INT_VEC4:case GL_BOOL_VEC4:i="4i",b=4;break;case GL_FLOAT:i="1f";break;case GL_FLOAT_VEC2:i="2f",b=2;break;case GL_FLOAT_VEC3:i="3f",b=3;break;case GL_FLOAT_VEC4:i="4f",b=4;break;case GL_FLOAT_MAT2:i="Matrix2fv";break;case GL_FLOAT_MAT3:i="Matrix3fv";break;case GL_FLOAT_MAT4:i="Matrix4fv"}if(t(s,".uniform",i,"(",p,","),"M"===i.charAt(0)){var v=Math.pow(d-GL_FLOAT_MAT2+2,2),O=e.global.def("new Float32Array(",v,")");t("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",loop(v,function(e){return O+"["+e+"]="+u+"["+e+"]"}),",",O,")")}else t(b>1?loop(b,function(e){return u+"["+e+"]"}):u);t(");")}}function x(e,n,t,r){function a(a){var c=u[a];return c?c.contextDep&&r.contextDynamic||c.propDep?c.append(e,t):c.append(e,n):n.def(f,".",a)}function c(){function e(){t(p,".drawElementsInstancedANGLE(",[l,m,S,d+"<<(("+S+"-"+GL_UNSIGNED_BYTE+")>>1)",E],");")}function n(){t(p,".drawArraysInstancedANGLE(",[l,d,m,E],");")}_?T?e():(t("if(",_,"){"),e(),t("}else{"),n(),t("}")):n()}function i(){function e(){t(s+".drawElements("+[l,m,S,d+"<<(("+S+"-"+GL_UNSIGNED_BYTE+")>>1)"]+");")}function n(){t(s+".drawArrays("+[l,d,m]+");")}_?T?e():(t("if(",_,"){"),e(),t("}else{"),n(),t("}")):n()}var o=e.shared,s=o.gl,f=o.draw,u=r.draw,_=function(){var a,c=u.elements,i=n;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(i=t),a=c.append(e,i)):a=i.def(f,".",S_ELEMENTS),a&&i("if("+a+")"+s+".bindBuffer("+GL_ELEMENT_ARRAY_BUFFER+","+a+".buffer.buffer);"),a}(),l=a(S_PRIMITIVE),d=a(S_OFFSET),m=function(){var a,c=u.count,i=n;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(i=t),a=c.append(e,i),check.optional(function(){c.MISSING&&e.assert(n,"false","missing vertex count"),c.DYNAMIC&&e.assert(i,a+">=0","missing vertex count")})):(a=i.def(f,".",S_COUNT),check.optional(function(){e.assert(i,a+">=0","missing vertex count")})),a}();if("number"==typeof m){if(0===m)return}else t("if(",m,"){"),t.exit("}");var E,p;Z&&(E=a(S_INSTANCES),p=e.instancing);var S=_+".type",T=u.elements&&isStatic(u.elements);Z&&("number"!=typeof E||E>=0)?"string"==typeof E?(t("if(",E,">0){"),c(),t("}else if(",E,"<0){"),i(),t("}")):c():i()}function U(e,n,t,r,a){var c=L(),i=c.proc("body",a);return check.optional(function(){c.commandStr=n.commandStr,c.command=c.link(n.commandStr)}),Z&&(c.instancing=i.def(c.shared.extensions,".angle_instanced_arrays")),e(c,i,t,r),c.compile().body}function H(e,n,t,r){g(e,n),P(e,n,t,r.attributes,function(){return!0}),M(e,n,t,r.uniforms,function(){return!0}),x(e,n,n,t)}function V(e,n){var t=e.proc("draw",1);g(e,t),G(e,t,n.context),R(e,t,n.framebuffer),C(e,t,n),I(e,t,n.state),B(e,t,n,!1,!0);var r=n.shader.progVar.append(e,t);if(t(e.shared.gl,".useProgram(",r,".program);"),n.shader.program)H(e,t,n,n.shader.program);else{var a=e.global.def("{}"),c=t.def(r,".id"),i=t.def(a,"[",c,"]");t(e.cond(i).then(i,".call(this,a0);").else(i,"=",a,"[",c,"]=",e.link(function(t){return U(H,e,n,t,1)}),"(",r,");",i,".call(this,a0);"))}Object.keys(n.state).length>0&&t(e.shared.current,".dirty=true;")}function w(e,n,t,r){function a(){return!0}e.batchId="a1",g(e,n),P(e,n,t,r.attributes,a),M(e,n,t,r.uniforms,a),x(e,n,n,t)}function j(e,n,t,r){function a(e){return e.contextDep&&i||e.propDep}function c(e){return!a(e)}g(e,n);var i=t.contextDep,o=n.def(),s=n.def();e.shared.props=s,e.batchId=o;var f=e.scope(),u=e.scope();if(n(f.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",s,"=","a0","[",o,"];",u,"}",f.exit),t.needsContext&&G(e,u,t.context),t.needsFramebuffer&&R(e,u,t.framebuffer),I(e,u,t.state,a),t.profile&&a(t.profile)&&B(e,u,t,!1,!0),r)P(e,f,t,r.attributes,c),P(e,u,t,r.attributes,a),M(e,f,t,r.uniforms,c),M(e,u,t,r.uniforms,a),x(e,f,u,t);else{var _=e.global.def("{}"),l=t.shader.progVar.append(e,u),d=u.def(l,".id"),m=u.def(_,"[",d,"]");u(e.shared.gl,".useProgram(",l,".program);","if(!",m,"){",m,"=",_,"[",d,"]=",e.link(function(n){return U(w,e,t,n,2)}),"(",l,");}",m,".call(this,a0[",o,"],",o,");")}}function W(e,n){function t(e){return e.contextDep&&a||e.propDep}var r=e.proc("batch",2);e.batchId="0",g(e,r);var a=!1,c=!0;Object.keys(n.context).forEach(function(e){a=a||n.context[e].propDep}),a||(G(e,r,n.context),c=!1);var i=n.framebuffer,o=!1;i?(i.propDep?a=o=!0:i.contextDep&&a&&(o=!0),o||R(e,r,i)):R(e,r,null),n.state.viewport&&n.state.viewport.propDep&&(a=!0),C(e,r,n),I(e,r,n.state,function(e){return!t(e)}),n.profile&&t(n.profile)||B(e,r,n,!1,"a1"),n.contextDep=a,n.needsContext=c,n.needsFramebuffer=o;var s=n.shader.progVar;if(s.contextDep&&a||s.propDep)j(e,r,n,null);else{var f=s.append(e,r);if(r(e.shared.gl,".useProgram(",f,".program);"),n.shader.program)j(e,r,n,n.shader.program);else{var u=e.global.def("{}"),_=r.def(f,".id"),l=r.def(u,"[",_,"]");r(e.cond(l).then(l,".call(this,a0,a1);").else(l,"=",u,"[",_,"]=",e.link(function(t){return U(j,e,n,t,2)}),"(",f,");",l,".call(this,a0,a1);"))}}Object.keys(n.state).length>0&&r(e.shared.current,".dirty=true;")}function Y(e,t){function r(n){var r=t.shader[n];r&&a.set(c.shader,"."+n,r.append(e,a))}var a=e.proc("scope",3);e.batchId="a2";var c=e.shared,i=c.current;G(e,a,t.context),t.framebuffer&&t.framebuffer.append(e,a),sortState(Object.keys(t.state)).forEach(function(n){var r=t.state[n],i=r.append(e,a);isArrayLike(i)?i.forEach(function(t,r){a.set(e.next[n],"["+r+"]",t)}):a.set(c.next,"."+n,i)}),B(e,a,t,!0,!0),[S_ELEMENTS,S_OFFSET,S_COUNT,S_INSTANCES,S_PRIMITIVE].forEach(function(n){var r=t.draw[n];r&&a.set(c.draw,"."+n,""+r.append(e,a))}),Object.keys(t.uniforms).forEach(function(r){a.set(c.uniforms,"["+n.id(r)+"]",t.uniforms[r].append(e,a))}),Object.keys(t.attributes).forEach(function(n){var r=t.attributes[n].append(e,a),c=e.scopeAttrib(n);Object.keys(new q).forEach(function(e){a.set(c,"."+e,r[e])})}),r(S_VERT),r(S_FRAG),Object.keys(t.state).length>0&&(a(i,".dirty=true;"),a.exit(i,".dirty=true;")),a("a1(",e.shared.context,",a0,",e.batchId,");")}function K(e){if("object"==typeof e&&!isArrayLike(e)){for(var n=Object.keys(e),t=0;t<n.length;++t)if(dynamic.isDynamic(e[n[t]]))return!0;return!1}}function z(e,n,t){function r(e,n){i.forEach(function(t){var r=a[t];if(dynamic.isDynamic(r)){var c=e.invoke(n,r);n(u,".",t,"=",c,";")}})}var a=n.static[t];if(a&&K(a)){var c=e.global,i=Object.keys(a),o=!1,s=!1,f=!1,u=e.global.def("{}");i.forEach(function(n){var t=a[n];if(dynamic.isDynamic(t)){"function"==typeof t&&(t=a[n]=dynamic.unbox(t));var r=createDynamicDecl(t,null);o=o||r.thisDep,f=f||r.propDep,s=s||r.contextDep}else{switch(c(u,".",n,"="),typeof t){case"number":c(t);break;case"string":c('"',t,'"');break;case"object":Array.isArray(t)&&c("[",t.join(),"]");break;default:c(e.link(t))}c(";")}}),n.dynamic[t]=new dynamic.DynamicVariable(DYN_THUNK,{thisDep:o,contextDep:s,propDep:f,ref:u,append:r}),delete n.static[t]}}function X(e,n,t,r,a){var c=L();c.stats=c.link(a),Object.keys(n.static).forEach(function(e){z(c,n,e)}),NESTED_OPTIONS.forEach(function(n){z(c,e,n)});var i=D(e,n,t,r,c);return V(c,i),Y(c,i),W(c,i),c.compile()}var q=u.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};t.ext_blend_minmax&&(Q.min=GL_MIN_EXT,Q.max=GL_MAX_EXT);var Z=t.angle_instanced_arrays,J=t.webgl_draw_buffers,$={dirty:!0,profile:E.profile},ee={},ne=[],te={},re={};S(S_DITHER,GL_DITHER),S(S_BLEND_ENABLE,GL_BLEND),T(S_BLEND_COLOR,"blendColor",[0,0,0,0]),T(S_BLEND_EQUATION,"blendEquationSeparate",[GL_FUNC_ADD,GL_FUNC_ADD]),T(S_BLEND_FUNC,"blendFuncSeparate",[GL_ONE,GL_ZERO,GL_ONE,GL_ZERO]),S(S_DEPTH_ENABLE,GL_DEPTH_TEST,!0),T(S_DEPTH_FUNC,"depthFunc",GL_LESS),T(S_DEPTH_RANGE,"depthRange",[0,1]),T(S_DEPTH_MASK,"depthMask",!0),T(S_COLOR_MASK,S_COLOR_MASK,[!0,!0,!0,!0]),S(S_CULL_ENABLE,GL_CULL_FACE),T(S_CULL_FACE,"cullFace",GL_BACK),T(S_FRONT_FACE,S_FRONT_FACE,GL_CCW),T(S_LINE_WIDTH,S_LINE_WIDTH,1),S(S_POLYGON_OFFSET_ENABLE,GL_POLYGON_OFFSET_FILL),T(S_POLYGON_OFFSET_OFFSET,"polygonOffset",[0,0]),S(S_SAMPLE_ALPHA,GL_SAMPLE_ALPHA_TO_COVERAGE),S(S_SAMPLE_ENABLE,GL_SAMPLE_COVERAGE),T(S_SAMPLE_COVERAGE,"sampleCoverage",[1,!1]),S(S_STENCIL_ENABLE,GL_STENCIL_TEST),T(S_STENCIL_MASK,"stencilMask",-1),T(S_STENCIL_FUNC,"stencilFunc",[GL_ALWAYS,0,-1]),T(S_STENCIL_OPFRONT,"stencilOpSeparate",[GL_FRONT,GL_KEEP,GL_KEEP,GL_KEEP]),T(S_STENCIL_OPBACK,"stencilOpSeparate",[GL_BACK,GL_KEEP,GL_KEEP,GL_KEEP]),S(S_SCISSOR_ENABLE,GL_SCISSOR_TEST),T(S_SCISSOR_BOX,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),T(S_VIEWPORT,S_VIEWPORT,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ae={gl:e,context:d,strings:n,next:ee,current:$,draw:l,elements:i,vao:a,buffer:c,shader:_,attributes:u.state,uniforms:f,framebuffer:s,extensions:t,timer:m,isBufferArgs:isBufferArgs},ce={primTypes:primTypes,compareFuncs:compareFuncs,blendFuncs:blendFuncs,blendEquations:Q,stencilOps:stencilOps,glTypes:glTypes,orientationType:orientationType};check.optional(function(){ae.isArrayLike=isArrayLike}),J&&(ce.backBuffer=[GL_BACK],ce.drawBuffer=loop(r.maxDrawbuffers,function(e){return 0===e?[0]:loop(e,function(e){return GL_COLOR_ATTACHMENT0+e})}));var ie=0;return{next:ee,current:$,compile:X,procs:function(){var n=L(),t=n.proc("poll"),a=n.proc("refresh"),c=n.block();t(c),a(c);var i=n.shared,o=i.gl,s=i.next,f=i.current;c(f,".dirty=false;"),R(n,t),R(n,a,null,!0);var u,_=e.getExtension("angle_instanced_arrays");_&&(u=n.link(_));for(var l=0;l<r.maxAttributes;++l){var d=a.def(i.attributes,"[",l,"]"),m=n.cond(d,".buffer");m.then(o,".enableVertexAttribArray(",l,");",o,".bindBuffer(",GL_ARRAY_BUFFER,",",d,".buffer.buffer);",o,".vertexAttribPointer(",l,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(o,".disableVertexAttribArray(",l,");",o,".vertexAttrib4f(",l,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),a(m),_&&a(u,".vertexAttribDivisorANGLE(",l,",",d,".divisor);")}return Object.keys(te).forEach(function(e){var r=te[e],i=c.def(s,".",e),u=n.block();u("if(",i,"){",o,".enable(",r,")}else{",o,".disable(",r,")}",f,".",e,"=",i,";"),a(u),t("if(",i,"!==",f,".",e,"){",u,"}")}),Object.keys(re).forEach(function(e){var r,i,u=re[e],_=$[e],l=n.block();if(l(o,".",u,"("),isArrayLike(_)){var d=_.length;r=n.global.def(s,".",e),i=n.global.def(f,".",e),l(loop(d,function(e){return r+"["+e+"]"}),");",loop(d,function(e){return i+"["+e+"]="+r+"["+e+"];"}).join("")),t("if(",loop(d,function(e){return r+"["+e+"]!=="+i+"["+e+"]"}).join("||"),"){",l,"}")}else r=c.def(s,".",e),i=c.def(f,".",e),l(r,");",f,".",e,"=",r,";"),t("if(",r,"!==",i,"){",l,"}");a(l)}),n.compile()}()}};

},{"./constants/dtypes.json":440,"./constants/primitives.json":441,"./dynamic":444,"./util/check":456,"./util/codegen":458,"./util/is-array-like":461,"./util/is-ndarray":462,"./util/is-typed-array":463,"./util/loop":464}],444:[function(_dereq_,module,exports){
"use strict";function DynamicVariable(t,n){this.id=VARIABLE_COUNTER++,this.type=t,this.data=n}function escapeStr(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function splitParts(t){if(0===t.length)return[];var n=t.charAt(0),e=t.charAt(t.length-1);if(t.length>1&&n===e&&('"'===n||"'"===n))return['"'+escapeStr(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return splitParts(t.substr(0,r.index)).concat(splitParts(r[1])).concat(splitParts(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+escapeStr(t)+'"'];for(var a=[],c=0;c<i.length;++c)a=a.concat(splitParts(i[c]));return a}function toAccessorString(t){return"["+splitParts(t).join("][")+"]"}function defineDynamic(t,n){return new DynamicVariable(t,toAccessorString(n+""))}function isDynamic(t){return"function"==typeof t&&!t._reglType||t instanceof DynamicVariable}function unbox(t,n){return"function"==typeof t?new DynamicVariable(DYN_FUNC,t):t}var VARIABLE_COUNTER=0,DYN_FUNC=0;module.exports={DynamicVariable:DynamicVariable,define:defineDynamic,isDynamic:isDynamic,unbox:unbox,accessor:toAccessorString};

},{}],445:[function(_dereq_,module,exports){
"use strict";var check=_dereq_("./util/check"),isTypedArray=_dereq_("./util/is-typed-array"),isNDArrayLike=_dereq_("./util/is-ndarray"),values=_dereq_("./util/values"),primTypes=_dereq_("./constants/primitives.json"),usageTypes=_dereq_("./constants/usage.json"),GL_POINTS=0,GL_LINES=1,GL_TRIANGLES=4,GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_INT=5124,GL_UNSIGNED_INT=5125,GL_ELEMENT_ARRAY_BUFFER=34963,GL_STREAM_DRAW=35040,GL_STATIC_DRAW=35044;module.exports=function(e,t,r,i){function n(e){this.id=N++,G[this.id]=this,this.buffer=e,this.primType=GL_TRIANGLES,this.vertCount=0,this.type=0}function u(e){var t=T.pop();return t||(t=new n(r.create(null,GL_ELEMENT_ARRAY_BUFFER,!0,!1)._buffer)),a(t,e,GL_STREAM_DRAW,-1,-1,0,0),t}function _(e){T.push(e)}function a(i,n,u,_,a,s,f){if(i.buffer.bind(),n){var G=f;f||isTypedArray(n)&&(!isNDArrayLike(n)||isTypedArray(n.data))||(G=t.oes_element_index_uint?GL_UNSIGNED_INT:GL_UNSIGNED_SHORT),r._initBuffer(i.buffer,n,u,G,3)}else e.bufferData(GL_ELEMENT_ARRAY_BUFFER,s,u),i.buffer.dtype=N||GL_UNSIGNED_BYTE,i.buffer.usage=u,i.buffer.dimension=3,i.buffer.byteLength=s;var N=f;if(!f){switch(i.buffer.dtype){case GL_UNSIGNED_BYTE:case GL_BYTE:N=GL_UNSIGNED_BYTE;break;case GL_UNSIGNED_SHORT:case GL_SHORT:N=GL_UNSIGNED_SHORT;break;case GL_UNSIGNED_INT:case GL_INT:N=GL_UNSIGNED_INT;break;default:check.raise("unsupported type for element array")}i.buffer.dtype=N}i.type=N,check(N!==GL_UNSIGNED_INT||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var L=a;L<0&&(L=i.buffer.byteLength,N===GL_UNSIGNED_SHORT?L>>=1:N===GL_UNSIGNED_INT&&(L>>=2)),i.vertCount=L;var T=_;if(_<0){T=GL_TRIANGLES;var c=i.buffer.dimension;1===c&&(T=GL_POINTS),2===c&&(T=GL_LINES),3===c&&(T=GL_TRIANGLES)}i.primType=T}function s(e){i.elementsCount--,check(null!==e.buffer,"must not double destroy elements"),delete G[e.id],e.buffer.destroy(),e.buffer=null}function f(e,t){function u(e){if(e)if("number"==typeof e)_(e),f.primType=GL_TRIANGLES,f.vertCount=0|e,f.type=GL_UNSIGNED_BYTE;else{var t=null,r=GL_STATIC_DRAW,i=-1,n=-1,s=0,G=0;Array.isArray(e)||isTypedArray(e)||isNDArrayLike(e)?t=e:(check.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,check(Array.isArray(t)||isTypedArray(t)||isNDArrayLike(t),"invalid data for element buffer")),"usage"in e&&(check.parameter(e.usage,usageTypes,"invalid element buffer usage"),r=usageTypes[e.usage]),"primitive"in e&&(check.parameter(e.primitive,primTypes,"invalid element buffer primitive"),i=primTypes[e.primitive]),"count"in e&&(check("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),n=0|e.count),"type"in e&&(check.parameter(e.type,L,"invalid buffer type"),G=L[e.type]),"length"in e?s=0|e.length:(s=n,G===GL_UNSIGNED_SHORT||G===GL_SHORT?s*=2:G!==GL_UNSIGNED_INT&&G!==GL_INT||(s*=4))),a(f,t,r,i,n,s,G)}else _(),f.primType=GL_TRIANGLES,f.vertCount=0,f.type=GL_UNSIGNED_BYTE;return u}var _=r.create(null,GL_ELEMENT_ARRAY_BUFFER,!0),f=new n(_._buffer);return i.elementsCount++,u(e),u._reglType="elements",u._elements=f,u.subdata=function(e,t){return _.subdata(e,t),u},u.destroy=function(){s(f)},u}var G={},N=0,L={uint8:GL_UNSIGNED_BYTE,uint16:GL_UNSIGNED_SHORT};t.oes_element_index_uint&&(L.uint32=GL_UNSIGNED_INT),n.prototype.bind=function(){this.buffer.bind()};var T=[];return{create:f,createStream:u,destroyStream:_,getElements:function(e){return"function"==typeof e&&e._elements instanceof n?e._elements:null},clear:function(){values(G).forEach(s)}}};

},{"./constants/primitives.json":441,"./constants/usage.json":442,"./util/check":456,"./util/is-ndarray":462,"./util/is-typed-array":463,"./util/values":468}],446:[function(_dereq_,module,exports){
"use strict";var check=_dereq_("./util/check");module.exports=function(e,r){function n(r){check.type(r,"string","extension name must be string");var n,o=r.toLowerCase();try{n=t[o]=e.getExtension(o)}catch(e){}return!!n}for(var t={},o=0;o<r.extensions.length;++o){var s=r.extensions[o];if(!n(s))return r.onDestroy(),r.onDone('"'+s+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return r.optionalExtensions.forEach(n),{extensions:t,restore:function(){Object.keys(t).forEach(function(e){if(!n(e))throw new Error("(regl): error restoring extension "+e)})}}};

},{"./util/check":456}],447:[function(_dereq_,module,exports){
"use strict";var check=_dereq_("./util/check"),values=_dereq_("./util/values"),extend=_dereq_("./util/extend"),GL_FRAMEBUFFER=36160,GL_RENDERBUFFER=36161,GL_TEXTURE_2D=3553,GL_TEXTURE_CUBE_MAP_POSITIVE_X=34069,GL_COLOR_ATTACHMENT0=36064,GL_DEPTH_ATTACHMENT=36096,GL_STENCIL_ATTACHMENT=36128,GL_DEPTH_STENCIL_ATTACHMENT=33306,GL_FRAMEBUFFER_COMPLETE=36053,GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,GL_FRAMEBUFFER_UNSUPPORTED=36061,GL_HALF_FLOAT_OES=36193,GL_UNSIGNED_BYTE=5121,GL_FLOAT=5126,GL_RGBA=6408,GL_DEPTH_COMPONENT=6402,colorTextureFormatEnums=[GL_RGBA],textureFormatChannels=[];textureFormatChannels[GL_RGBA]=4;var textureTypeSizes=[];textureTypeSizes[GL_UNSIGNED_BYTE]=1,textureTypeSizes[GL_FLOAT]=4,textureTypeSizes[GL_HALF_FLOAT_OES]=2;var GL_RGBA4=32854,GL_RGB5_A1=32855,GL_RGB565=36194,GL_DEPTH_COMPONENT16=33189,GL_STENCIL_INDEX8=36168,GL_DEPTH_STENCIL=34041,GL_SRGB8_ALPHA8_EXT=35907,GL_RGBA32F_EXT=34836,GL_RGBA16F_EXT=34842,GL_RGB16F_EXT=34843,colorRenderbufferFormatEnums=[GL_RGBA4,GL_RGB5_A1,GL_RGB565,GL_SRGB8_ALPHA8_EXT,GL_RGBA16F_EXT,GL_RGB16F_EXT,GL_RGBA32F_EXT],statusCode={};statusCode[GL_FRAMEBUFFER_COMPLETE]="complete",statusCode[GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT]="incomplete attachment",statusCode[GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS]="incomplete dimensions",statusCode[GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]="incomplete, missing attachment",statusCode[GL_FRAMEBUFFER_UNSUPPORTED]="unsupported",module.exports=function(e,t,r,n,f,o){function a(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,f=0;t?(n=t.width,f=t.height):r&&(n=r.width,f=r.height),this.width=n,this.height=f}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function i(e,t,r){if(e)if(e.texture){var n=e.texture._texture,f=Math.max(1,n.width),o=Math.max(1,n.height);check(f===t&&o===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var a=e.renderbuffer._renderbuffer;check(a.width===t&&a.height===r,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function c(t,r){r&&(r.texture?e.framebufferTexture2D(GL_FRAMEBUFFER,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(GL_FRAMEBUFFER,t,GL_RENDERBUFFER,r.renderbuffer._renderbuffer.renderbuffer))}function l(e){var t=GL_TEXTURE_2D,r=null,n=null,f=e;"object"==typeof e&&(f=e.data,"target"in e&&(t=0|e.target)),check.type(f,"function","invalid attachment data");var o=f._reglType;return"texture2d"===o?(r=f,check(t===GL_TEXTURE_2D)):"textureCube"===o?(r=f,check(t>=GL_TEXTURE_CUBE_MAP_POSITIVE_X&&t<GL_TEXTURE_CUBE_MAP_POSITIVE_X+6,"invalid cube map target")):"renderbuffer"===o?(n=f,t=GL_RENDERBUFFER):check.raise("invalid regl object for attachment"),new a(t,r,n)}function h(e,t,r,o,u){if(r){var i=n.create2D({width:e,height:t,format:o,type:u});return i._texture.refCount=0,new a(GL_TEXTURE_2D,i,null)}var c=f.create({width:e,height:t,format:o});return c._renderbuffer.refCount=0,new a(GL_RENDERBUFFER,null,c)}function _(e){return e&&(e.texture||e.renderbuffer)}function s(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r))}function d(){this.id=R++,g[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function E(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function T(t){var r=t.framebuffer;check(r,"must not double destroy framebuffer"),e.deleteFramebuffer(r),t.framebuffer=null,o.framebufferCount--,delete g[t.id]}function b(t){var n;e.bindFramebuffer(GL_FRAMEBUFFER,t.framebuffer);var f=t.colorAttachments;for(n=0;n<f.length;++n)c(GL_COLOR_ATTACHMENT0+n,f[n]);for(n=f.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0+n,GL_TEXTURE_2D,null,0);e.framebufferTexture2D(GL_FRAMEBUFFER,GL_DEPTH_STENCIL_ATTACHMENT,GL_TEXTURE_2D,null,0),e.framebufferTexture2D(GL_FRAMEBUFFER,GL_DEPTH_ATTACHMENT,GL_TEXTURE_2D,null,0),e.framebufferTexture2D(GL_FRAMEBUFFER,GL_STENCIL_ATTACHMENT,GL_TEXTURE_2D,null,0),c(GL_DEPTH_ATTACHMENT,t.depthAttachment),c(GL_STENCIL_ATTACHMENT,t.stencilAttachment),c(GL_DEPTH_STENCIL_ATTACHMENT,t.depthStencilAttachment);var o=e.checkFramebufferStatus(GL_FRAMEBUFFER);o!==GL_FRAMEBUFFER_COMPLETE&&check.raise("framebuffer configuration not supported, status = "+statusCode[o]),e.bindFramebuffer(GL_FRAMEBUFFER,L.next),L.cur=L.next,e.getError()}function m(e,n){function f(e,n){var o;check(L.next!==u,"can not update framebuffer which is currently in use");var a=t.webgl_draw_buffers,c=0,s=0,d=!0,T=!0,m=null,p=!0,A="rgba",R="uint8",g=1,C=null,v=null,y=null,M=!1;if("number"==typeof e)c=0|e,s=0|n||c;else if(e){check.type(e,"object","invalid arguments for framebuffer");var N=e;if("shape"in N){var S=N.shape;check(Array.isArray(S)&&S.length>=2,"invalid shape for framebuffer"),c=S[0],s=S[1]}else"radius"in N&&(c=s=N.radius),"width"in N&&(c=N.width),"height"in N&&(s=N.height);("color"in N||"colors"in N)&&(m=N.color||N.colors,Array.isArray(m)&&check(1===m.length||a,"multiple render targets not supported")),m||("colorCount"in N&&(g=0|N.colorCount,check(g>0,"invalid color buffer count")),"colorTexture"in N&&(p=!!N.colorTexture,A="rgba4"),"colorType"in N&&(R=N.colorType,p?(check(t.oes_texture_float||!("float"===R||"float32"===R),"you must enable OES_texture_float in order to use floating point framebuffer objects"),check(t.oes_texture_half_float||!("half float"===R||"float16"===R),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===R||"float16"===R?(check(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),A="rgba16f"):"float"!==R&&"float32"!==R||(check(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),A="rgba32f"),check.oneOf(R,x,"invalid color type")),"colorFormat"in N&&(A=N.colorFormat,F.indexOf(A)>=0?p=!0:G.indexOf(A)>=0?p=!1:p?check.oneOf(N.colorFormat,F,"invalid color format for texture"):check.oneOf(N.colorFormat,G,"invalid color format for renderbuffer"))),("depthTexture"in N||"depthStencilTexture"in N)&&(M=!(!N.depthTexture&&!N.depthStencilTexture),check(!M||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in N&&("boolean"==typeof N.depth?d=N.depth:(C=N.depth,T=!1)),"stencil"in N&&("boolean"==typeof N.stencil?T=N.stencil:(v=N.stencil,d=!1)),"depthStencil"in N&&("boolean"==typeof N.depthStencil?d=T=N.depthStencil:(y=N.depthStencil,d=!1,T=!1))}else c=s=1;var B=null,O=null,U=null,k=null;if(Array.isArray(m))B=m.map(l);else if(m)B=[l(m)];else for(B=new Array(g),o=0;o<g;++o)B[o]=h(c,s,p,A,R);check(t.webgl_draw_buffers||B.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),check(B.length<=r.maxColorAttachments,"too many color attachments, not supported"),c=c||B[0].width,s=s||B[0].height,C?O=l(C):d&&!T&&(O=h(c,s,M,"depth","uint32")),v?U=l(v):T&&!d&&(U=h(c,s,!1,"stencil","uint8")),y?k=l(y):!C&&!v&&T&&d&&(k=h(c,s,M,"depth stencil","depth stencil")),check(!!C+!!v+!!y<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var w=null;for(o=0;o<B.length;++o)if(i(B[o],c,s),check(!B[o]||B[o].texture&&colorTextureFormatEnums.indexOf(B[o].texture._texture.format)>=0||B[o].renderbuffer&&colorRenderbufferFormatEnums.indexOf(B[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),B[o]&&B[o].texture){var P=textureFormatChannels[B[o].texture._texture.format]*textureTypeSizes[B[o].texture._texture.type];null===w?w=P:check(w===P,"all color attachments much have the same number of bits per pixel.")}return i(O,c,s),check(!O||O.texture&&O.texture._texture.format===GL_DEPTH_COMPONENT||O.renderbuffer&&O.renderbuffer._renderbuffer.format===GL_DEPTH_COMPONENT16,"invalid depth attachment for framebuffer object"),i(U,c,s),check(!U||U.renderbuffer&&U.renderbuffer._renderbuffer.format===GL_STENCIL_INDEX8,"invalid stencil attachment for framebuffer object"),i(k,c,s),check(!k||k.texture&&k.texture._texture.format===GL_DEPTH_STENCIL||k.renderbuffer&&k.renderbuffer._renderbuffer.format===GL_DEPTH_STENCIL,"invalid depth-stencil attachment for framebuffer object"),E(u),u.width=c,u.height=s,u.colorAttachments=B,u.depthAttachment=O,u.stencilAttachment=U,u.depthStencilAttachment=k,f.color=B.map(_),f.depth=_(O),f.stencil=_(U),f.depthStencil=_(k),f.width=u.width,f.height=u.height,b(u),f}function a(e,t){check(L.next!==u,"can not resize a framebuffer which is currently in use");var r=0|e,n=0|t||r;if(r===u.width&&n===u.height)return f;for(var o=u.colorAttachments,a=0;a<o.length;++a)s(o[a],r,n);return s(u.depthAttachment,r,n),s(u.stencilAttachment,r,n),s(u.depthStencilAttachment,r,n),u.width=f.width=r,u.height=f.height=n,b(u),f}var u=new d;return o.framebufferCount++,f(e,n),extend(f,{resize:a,_reglType:"framebuffer",_framebuffer:u,destroy:function(){T(u),E(u)},use:function(e){L.setFBO({framebuffer:f},e)}})}function p(e){function f(e){var r;check(a.indexOf(L.next)<0,"can not update framebuffer which is currently in use");var o=t.webgl_draw_buffers,u={color:null},i=0,c=null,l="rgba",h="uint8",_=1;if("number"==typeof e)i=0|e;else if(e){check.type(e,"object","invalid arguments for framebuffer");var s=e;if("shape"in s){var d=s.shape;check(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),check(d[0]===d[1],"cube framebuffer must be square"),i=d[0]}else"radius"in s&&(i=0|s.radius),"width"in s?(i=0|s.width,"height"in s&&check(s.height===i,"must be square")):"height"in s&&(i=0|s.height);("color"in s||"colors"in s)&&(c=s.color||s.colors,Array.isArray(c)&&check(1===c.length||o,"multiple render targets not supported")),c||("colorCount"in s&&(_=0|s.colorCount,check(_>0,"invalid color buffer count")),"colorType"in s&&(check.oneOf(s.colorType,x,"invalid color type"),h=s.colorType),"colorFormat"in s&&(l=s.colorFormat,check.oneOf(s.colorFormat,F,"invalid color format for texture"))),"depth"in s&&(u.depth=s.depth),"stencil"in s&&(u.stencil=s.stencil),"depthStencil"in s&&(u.depthStencil=s.depthStencil)}else i=1;var E;if(c)if(Array.isArray(c))for(E=[],r=0;r<c.length;++r)E[r]=c[r];else E=[c];else{E=Array(_);var T={radius:i,format:l,type:h};for(r=0;r<_;++r)E[r]=n.createCube(T)}for(u.color=Array(E.length),r=0;r<E.length;++r){var b=E[r];check("function"==typeof b&&"textureCube"===b._reglType,"invalid cube map"),i=i||b.width,check(b.width===i&&b.height===i,"invalid cube map shape"),u.color[r]={target:GL_TEXTURE_CUBE_MAP_POSITIVE_X,data:E[r]}}for(r=0;r<6;++r){for(var p=0;p<E.length;++p)u.color[p].target=GL_TEXTURE_CUBE_MAP_POSITIVE_X+r;r>0&&(u.depth=a[0].depth,u.stencil=a[0].stencil,u.depthStencil=a[0].depthStencil),a[r]?a[r](u):a[r]=m(u)}return extend(f,{width:i,height:i,color:E})}function o(e){var t,n=0|e;if(check(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===f.width)return f;var o=f.color;for(t=0;t<o.length;++t)o[t].resize(n);for(t=0;t<6;++t)a[t].resize(n);return f.width=f.height=n,f}var a=Array(6);return f(e),extend(f,{faces:a,resize:o,_reglType:"framebufferCube",destroy:function(){a.forEach(function(e){e.destroy()})}})}function A(){values(g).forEach(function(t){t.framebuffer=e.createFramebuffer(),b(t)})}var L={cur:null,next:null,dirty:!1,setFBO:null},F=["rgba"],G=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&G.push("srgba"),t.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&G.push("rgba32f");var x=["uint8"];t.oes_texture_half_float&&x.push("half float","float16"),t.oes_texture_float&&x.push("float","float32");var R=0,g={};return extend(L,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof d)return t}return null},create:m,createCube:p,clear:function(){values(g).forEach(T)},restore:A})};

},{"./util/check":456,"./util/extend":459,"./util/values":468}],448:[function(_dereq_,module,exports){
"use strict";var GL_SUBPIXEL_BITS=3408,GL_RED_BITS=3410,GL_GREEN_BITS=3411,GL_BLUE_BITS=3412,GL_ALPHA_BITS=3413,GL_DEPTH_BITS=3414,GL_STENCIL_BITS=3415,GL_ALIASED_POINT_SIZE_RANGE=33901,GL_ALIASED_LINE_WIDTH_RANGE=33902,GL_MAX_TEXTURE_SIZE=3379,GL_MAX_VIEWPORT_DIMS=3386,GL_MAX_VERTEX_ATTRIBS=34921,GL_MAX_VERTEX_UNIFORM_VECTORS=36347,GL_MAX_VARYING_VECTORS=36348,GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,GL_MAX_TEXTURE_IMAGE_UNITS=34930,GL_MAX_FRAGMENT_UNIFORM_VECTORS=36349,GL_MAX_CUBE_MAP_TEXTURE_SIZE=34076,GL_MAX_RENDERBUFFER_SIZE=34024,GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_SHADING_LANGUAGE_VERSION=35724,GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047,GL_MAX_COLOR_ATTACHMENTS_WEBGL=36063,GL_MAX_DRAW_BUFFERS_WEBGL=34852;module.exports=function(_,e){var E=1;e.ext_texture_filter_anisotropic&&(E=_.getParameter(GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT));var t=1,r=1;return e.webgl_draw_buffers&&(t=_.getParameter(GL_MAX_DRAW_BUFFERS_WEBGL),r=_.getParameter(GL_MAX_COLOR_ATTACHMENTS_WEBGL)),{colorBits:[_.getParameter(GL_RED_BITS),_.getParameter(GL_GREEN_BITS),_.getParameter(GL_BLUE_BITS),_.getParameter(GL_ALPHA_BITS)],depthBits:_.getParameter(GL_DEPTH_BITS),stencilBits:_.getParameter(GL_STENCIL_BITS),subpixelBits:_.getParameter(GL_SUBPIXEL_BITS),extensions:Object.keys(e).filter(function(_){return!!e[_]}),maxAnisotropic:E,maxDrawbuffers:t,maxColorAttachments:r,pointSizeDims:_.getParameter(GL_ALIASED_POINT_SIZE_RANGE),lineWidthDims:_.getParameter(GL_ALIASED_LINE_WIDTH_RANGE),maxViewportDims:_.getParameter(GL_MAX_VIEWPORT_DIMS),maxCombinedTextureUnits:_.getParameter(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),maxCubeMapSize:_.getParameter(GL_MAX_CUBE_MAP_TEXTURE_SIZE),maxRenderbufferSize:_.getParameter(GL_MAX_RENDERBUFFER_SIZE),maxTextureUnits:_.getParameter(GL_MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:_.getParameter(GL_MAX_TEXTURE_SIZE),maxAttributes:_.getParameter(GL_MAX_VERTEX_ATTRIBS),maxVertexUniforms:_.getParameter(GL_MAX_VERTEX_UNIFORM_VECTORS),maxVertexTextureUnits:_.getParameter(GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVaryingVectors:_.getParameter(GL_MAX_VARYING_VECTORS),maxFragmentUniforms:_.getParameter(GL_MAX_FRAGMENT_UNIFORM_VECTORS),glsl:_.getParameter(GL_SHADING_LANGUAGE_VERSION),renderer:_.getParameter(GL_RENDERER),vendor:_.getParameter(GL_VENDOR),version:_.getParameter(GL_VERSION)}};

},{}],449:[function(_dereq_,module,exports){
"use strict";var check=_dereq_("./util/check"),isTypedArray=_dereq_("./util/is-typed-array"),GL_RGBA=6408,GL_UNSIGNED_BYTE=5121,GL_PACK_ALIGNMENT=3333,GL_FLOAT=5126;module.exports=function(e,r,t,f,a,i){function n(n){var u;null===r.next?(check(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=GL_UNSIGNED_BYTE):(check(null!==r.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=r.next.colorAttachments[0].texture._texture.type,i.oes_texture_float?check(u===GL_UNSIGNED_BYTE||u===GL_FLOAT,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):check(u===GL_UNSIGNED_BYTE,"Reading from a framebuffer is only allowed for the type 'uint8'"));var o=0,c=0,l=f.framebufferWidth,d=f.framebufferHeight,h=null;isTypedArray(n)?h=n:n&&(check.type(n,"object","invalid arguments to regl.read()"),o=0|n.x,c=0|n.y,check(o>=0&&o<f.framebufferWidth,"invalid x offset for regl.read"),check(c>=0&&c<f.framebufferHeight,"invalid y offset for regl.read"),l=0|(n.width||f.framebufferWidth-o),d=0|(n.height||f.framebufferHeight-c),h=n.data||null),h&&(u===GL_UNSIGNED_BYTE?check(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===GL_FLOAT&&check(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),check(l>0&&l+o<=f.framebufferWidth,"invalid width for read pixels"),check(d>0&&d+c<=f.framebufferHeight,"invalid height for read pixels"),t();var m=l*d*4;return h||(u===GL_UNSIGNED_BYTE?h=new Uint8Array(m):u===GL_FLOAT&&(h=h||new Float32Array(m))),check.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),check(h.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei(GL_PACK_ALIGNMENT,4),e.readPixels(o,c,l,d,GL_RGBA,u,h),h}function u(e){var t;return r.setFBO({framebuffer:e.framebuffer},function(){t=n(e)}),t}function o(e){return e&&"framebuffer"in e?u(e):n(e)}return o};

},{"./util/check":456,"./util/is-typed-array":463}],450:[function(_dereq_,module,exports){
"use strict";function getRenderbufferSize(e,r,f){return FORMAT_SIZES[e]*r*f}var check=_dereq_("./util/check"),values=_dereq_("./util/values"),GL_RENDERBUFFER=36161,GL_RGBA4=32854,GL_RGB5_A1=32855,GL_RGB565=36194,GL_DEPTH_COMPONENT16=33189,GL_STENCIL_INDEX8=36168,GL_DEPTH_STENCIL=34041,GL_SRGB8_ALPHA8_EXT=35907,GL_RGBA32F_EXT=34836,GL_RGBA16F_EXT=34842,GL_RGB16F_EXT=34843,FORMAT_SIZES=[];FORMAT_SIZES[GL_RGBA4]=2,FORMAT_SIZES[GL_RGB5_A1]=2,FORMAT_SIZES[GL_RGB565]=2,FORMAT_SIZES[GL_DEPTH_COMPONENT16]=2,FORMAT_SIZES[GL_STENCIL_INDEX8]=1,FORMAT_SIZES[GL_DEPTH_STENCIL]=4,FORMAT_SIZES[GL_SRGB8_ALPHA8_EXT]=4,FORMAT_SIZES[GL_RGBA32F_EXT]=16,FORMAT_SIZES[GL_RGBA16F_EXT]=8,FORMAT_SIZES[GL_RGB16F_EXT]=6,module.exports=function(e,r,f,t,i){function n(e){this.id=E++,this.refCount=1,this.renderbuffer=e,this.format=GL_RGBA4,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function _(r){var f=r.renderbuffer;check(f,"must not double destroy renderbuffer"),e.bindRenderbuffer(GL_RENDERBUFFER,null),e.deleteRenderbuffer(f),r.renderbuffer=null,r.refCount=0,delete o[r.id],t.renderbufferCount--}function u(r,_){function u(r,t){var n=0,_=0,R=GL_RGBA4;if("object"==typeof r&&r){var o=r;if("shape"in o){var h=o.shape;check(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),n=0|h[0],_=0|h[1]}else"radius"in o&&(n=_=0|o.radius),"width"in o&&(n=0|o.width),"height"in o&&(_=0|o.height);"format"in o&&(check.parameter(o.format,a,"invalid renderbuffer format"),R=a[o.format])}else"number"==typeof r?(n=0|r,_="number"==typeof t?0|t:n):r?check.raise("invalid arguments to renderbuffer constructor"):n=_=1;if(check(n>0&&_>0&&n<=f.maxRenderbufferSize&&_<=f.maxRenderbufferSize,"invalid renderbuffer size"),n!==E.width||_!==E.height||R!==E.format)return u.width=E.width=n,u.height=E.height=_,E.format=R,e.bindRenderbuffer(GL_RENDERBUFFER,E.renderbuffer),e.renderbufferStorage(GL_RENDERBUFFER,R,n,_),i.profile&&(E.stats.size=getRenderbufferSize(E.format,E.width,E.height)),u.format=d[E.format],u}function R(r,t){var n=0|r,_=0|t||n;return n===E.width&&_===E.height?u:(check(n>0&&_>0&&n<=f.maxRenderbufferSize&&_<=f.maxRenderbufferSize,"invalid renderbuffer size"),u.width=E.width=n,u.height=E.height=_,e.bindRenderbuffer(GL_RENDERBUFFER,E.renderbuffer),e.renderbufferStorage(GL_RENDERBUFFER,E.format,n,_),i.profile&&(E.stats.size=getRenderbufferSize(E.format,E.width,E.height)),u)}var E=new n(e.createRenderbuffer());return o[E.id]=E,t.renderbufferCount++,u(r,_),u.resize=R,u._reglType="renderbuffer",u._renderbuffer=E,i.profile&&(u.stats=E.stats),u.destroy=function(){E.decRef()},u}function R(){values(o).forEach(function(r){r.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(GL_RENDERBUFFER,r.renderbuffer),e.renderbufferStorage(GL_RENDERBUFFER,r.format,r.width,r.height)}),e.bindRenderbuffer(GL_RENDERBUFFER,null)}var a={rgba4:GL_RGBA4,rgb565:GL_RGB565,"rgb5 a1":GL_RGB5_A1,depth:GL_DEPTH_COMPONENT16,stencil:GL_STENCIL_INDEX8,"depth stencil":GL_DEPTH_STENCIL};r.ext_srgb&&(a.srgba=GL_SRGB8_ALPHA8_EXT),r.ext_color_buffer_half_float&&(a.rgba16f=GL_RGBA16F_EXT,a.rgb16f=GL_RGB16F_EXT),r.webgl_color_buffer_float&&(a.rgba32f=GL_RGBA32F_EXT);var d=[];Object.keys(a).forEach(function(e){var r=a[e];d[r]=e});var E=0,o={};return n.prototype.decRef=function(){--this.refCount<=0&&_(this)},i.profile&&(t.getTotalRenderbufferSize=function(){var e=0;return Object.keys(o).forEach(function(r){e+=o[r].stats.size}),e}),{create:u,clear:function(){values(o).forEach(_)},restore:R}};

},{"./util/check":456,"./util/values":468}],451:[function(_dereq_,module,exports){
"use strict";var check=_dereq_("./util/check"),values=_dereq_("./util/values"),GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633,GL_ACTIVE_UNIFORMS=35718,GL_ACTIVE_ATTRIBUTES=35721;module.exports=function(r,t,e,a){function n(r,t,e,a){this.name=r,this.id=t,this.location=e,this.info=a}function i(r,t){for(var e=0;e<r.length;++e)if(r[e].id===t.id)return void(r[e].location=t.location);r.push(t)}function o(e,a,n){var i=e===GL_FRAGMENT_SHADER?f:h,o=i[a];if(!o){var s=t.str(a);o=r.createShader(e),r.shaderSource(o,s),r.compileShader(o),check.shaderError(r,o,s,e,n),i[a]=o}return o}function s(r,t){this.id=v++,this.fragId=r,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(e,s){var u,c,f=o(GL_FRAGMENT_SHADER,e.fragId),h=o(GL_VERTEX_SHADER,e.vertId),m=e.program=r.createProgram();r.attachShader(m,f),r.attachShader(m,h),r.linkProgram(m),check.linkError(r,m,t.str(e.fragId),t.str(e.vertId),s);var d=r.getProgramParameter(m,GL_ACTIVE_UNIFORMS);a.profile&&(e.stats.uniformsCount=d);var v=e.uniforms;for(u=0;u<d;++u)if(c=r.getActiveUniform(m,u))if(c.size>1)for(var g=0;g<c.size;++g){var l=c.name.replace("[0]","["+g+"]");i(v,new n(l,t.id(l),r.getUniformLocation(m,l),c))}else i(v,new n(c.name,t.id(c.name),r.getUniformLocation(m,c.name),c));var E=r.getProgramParameter(m,GL_ACTIVE_ATTRIBUTES);a.profile&&(e.stats.attributesCount=E);var A=e.attributes;for(u=0;u<E;++u)(c=r.getActiveAttrib(m,u))&&i(A,new n(c.name,t.id(c.name),r.getAttribLocation(m,c.name),c))}function c(){f={},h={};for(var r=0;r<d.length;++r)u(d[r])}var f={},h={},m={},d=[],v=0;return a.profile&&(e.getMaxUniformsCount=function(){var r=0;return d.forEach(function(t){t.stats.uniformsCount>r&&(r=t.stats.uniformsCount)}),r},e.getMaxAttributesCount=function(){var r=0;return d.forEach(function(t){t.stats.attributesCount>r&&(r=t.stats.attributesCount)}),r}),{clear:function(){var t=r.deleteShader.bind(r);values(f).forEach(t),f={},values(h).forEach(t),h={},d.forEach(function(t){r.deleteProgram(t.program)}),d.length=0,m={},e.shaderCount=0},program:function(r,t,a){check.command(r>=0,"missing vertex shader",a),check.command(t>=0,"missing fragment shader",a);var n=m[t];n||(n=m[t]={});var i=n[r];return i||(i=new s(t,r),e.shaderCount++,u(i,a),n[r]=i,d.push(i)),i},restore:c,shader:o,frag:-1,vert:-1}};

},{"./util/check":456,"./util/values":468}],452:[function(_dereq_,module,exports){
"use strict";module.exports=function(){return{bufferCount:0,vaoCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}};

},{}],453:[function(_dereq_,module,exports){
"use strict";module.exports=function(){var r={"":0},t=[""];return{id:function(n){var u=r[n];return u||(u=r[n]=t.length,t.push(n),u)},str:function(r){return t[r]}}};

},{}],454:[function(_dereq_,module,exports){
"use strict";function objectName(e){return"[object "+e+"]"}function isNumericArray(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function isRectArray(e){return!!Array.isArray(e)&&!(0===e.length||!isArrayLike(e[0]))}function classString(e){return Object.prototype.toString.call(e)}function isCanvasElement(e){return classString(e)===CANVAS_CLASS}function isContext2D(e){return classString(e)===CONTEXT2D_CLASS}function isImageElement(e){return classString(e)===IMAGE_CLASS}function isVideoElement(e){return classString(e)===VIDEO_CLASS}function isPixelData(e){if(!e)return!1;var t=classString(e);return PIXEL_CLASSES.indexOf(t)>=0||(isNumericArray(e)||isRectArray(e)||isNDArrayLike(e))}function typedArrayCode(e){return 0|arrayTypes[Object.prototype.toString.call(e)]}function convertData(e,t){var a=t.length;switch(e.type){case GL_UNSIGNED_BYTE:case GL_UNSIGNED_SHORT:case GL_UNSIGNED_INT:case GL_FLOAT:var i=pool.allocType(e.type,a);i.set(t),e.data=i;break;case GL_HALF_FLOAT_OES:e.data=convertToHalfFloat(t);break;default:check.raise("unsupported texture type, must specify a typed array")}}function preConvert(e,t){return pool.allocType(e.type===GL_HALF_FLOAT_OES?GL_FLOAT:e.type,t)}function postConvert(e,t){e.type===GL_HALF_FLOAT_OES?(e.data=convertToHalfFloat(t),pool.freeType(t)):e.data=t}function transposeData(e,t,a,i,r,_){for(var n=e.width,E=e.height,s=e.channels,o=n*E*s,l=preConvert(e,o),c=0,L=0;L<E;++L)for(var h=0;h<n;++h)for(var p=0;p<s;++p)l[c++]=t[a*h+i*L+r*p+_];postConvert(e,l)}function getTextureSize(e,t,a,i,r,_){var n;if(n=void 0!==FORMAT_SIZES_SPECIAL[e]?FORMAT_SIZES_SPECIAL[e]:FORMAT_CHANNELS[e]*TYPE_SIZES[t],_&&(n*=6),r){for(var E=0,s=a;s>=1;)E+=n*s*s,s/=2;return E}return n*a*i}var check=_dereq_("./util/check"),extend=_dereq_("./util/extend"),values=_dereq_("./util/values"),isTypedArray=_dereq_("./util/is-typed-array"),isNDArrayLike=_dereq_("./util/is-ndarray"),pool=_dereq_("./util/pool"),convertToHalfFloat=_dereq_("./util/to-half-float"),isArrayLike=_dereq_("./util/is-array-like"),flattenUtils=_dereq_("./util/flatten"),dtypes=_dereq_("./constants/arraytypes.json"),arrayTypes=_dereq_("./constants/arraytypes.json"),GL_COMPRESSED_TEXTURE_FORMATS=34467,GL_TEXTURE_2D=3553,GL_TEXTURE_CUBE_MAP=34067,GL_TEXTURE_CUBE_MAP_POSITIVE_X=34069,GL_RGBA=6408,GL_ALPHA=6406,GL_RGB=6407,GL_LUMINANCE=6409,GL_LUMINANCE_ALPHA=6410,GL_RGBA4=32854,GL_RGB5_A1=32855,GL_RGB565=36194,GL_UNSIGNED_SHORT_4_4_4_4=32819,GL_UNSIGNED_SHORT_5_5_5_1=32820,GL_UNSIGNED_SHORT_5_6_5=33635,GL_UNSIGNED_INT_24_8_WEBGL=34042,GL_DEPTH_COMPONENT=6402,GL_DEPTH_STENCIL=34041,GL_SRGB_EXT=35904,GL_SRGB_ALPHA_EXT=35906,GL_HALF_FLOAT_OES=36193,GL_COMPRESSED_RGB_S3TC_DXT1_EXT=33776,GL_COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,GL_COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,GL_COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,GL_COMPRESSED_RGB_ATC_WEBGL=35986,GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987,GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798,GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841,GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843,GL_COMPRESSED_RGB_ETC1_WEBGL=36196,GL_UNSIGNED_BYTE=5121,GL_UNSIGNED_SHORT=5123,GL_UNSIGNED_INT=5125,GL_FLOAT=5126,GL_TEXTURE_WRAP_S=10242,GL_TEXTURE_WRAP_T=10243,GL_REPEAT=10497,GL_CLAMP_TO_EDGE=33071,GL_MIRRORED_REPEAT=33648,GL_TEXTURE_MAG_FILTER=10240,GL_TEXTURE_MIN_FILTER=10241,GL_NEAREST=9728,GL_LINEAR=9729,GL_NEAREST_MIPMAP_NEAREST=9984,GL_LINEAR_MIPMAP_NEAREST=9985,GL_NEAREST_MIPMAP_LINEAR=9986,GL_LINEAR_MIPMAP_LINEAR=9987,GL_GENERATE_MIPMAP_HINT=33170,GL_DONT_CARE=4352,GL_FASTEST=4353,GL_NICEST=4354,GL_TEXTURE_MAX_ANISOTROPY_EXT=34046,GL_UNPACK_ALIGNMENT=3317,GL_UNPACK_FLIP_Y_WEBGL=37440,GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,GL_UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,GL_BROWSER_DEFAULT_WEBGL=37444,GL_TEXTURE0=33984,MIPMAP_FILTERS=[GL_NEAREST_MIPMAP_NEAREST,GL_NEAREST_MIPMAP_LINEAR,GL_LINEAR_MIPMAP_NEAREST,GL_LINEAR_MIPMAP_LINEAR],CHANNELS_FORMAT=[0,GL_LUMINANCE,GL_LUMINANCE_ALPHA,GL_RGB,GL_RGBA],FORMAT_CHANNELS={};FORMAT_CHANNELS[GL_LUMINANCE]=FORMAT_CHANNELS[GL_ALPHA]=FORMAT_CHANNELS[GL_DEPTH_COMPONENT]=1,FORMAT_CHANNELS[GL_DEPTH_STENCIL]=FORMAT_CHANNELS[GL_LUMINANCE_ALPHA]=2,FORMAT_CHANNELS[GL_RGB]=FORMAT_CHANNELS[GL_SRGB_EXT]=3,FORMAT_CHANNELS[GL_RGBA]=FORMAT_CHANNELS[GL_SRGB_ALPHA_EXT]=4;var CANVAS_CLASS=objectName("HTMLCanvasElement"),CONTEXT2D_CLASS=objectName("CanvasRenderingContext2D"),IMAGE_CLASS=objectName("HTMLImageElement"),VIDEO_CLASS=objectName("HTMLVideoElement"),PIXEL_CLASSES=Object.keys(dtypes).concat([CANVAS_CLASS,CONTEXT2D_CLASS,IMAGE_CLASS,VIDEO_CLASS]),TYPE_SIZES=[];TYPE_SIZES[GL_UNSIGNED_BYTE]=1,TYPE_SIZES[GL_FLOAT]=4,TYPE_SIZES[GL_HALF_FLOAT_OES]=2,TYPE_SIZES[GL_UNSIGNED_SHORT]=2,TYPE_SIZES[GL_UNSIGNED_INT]=4;var FORMAT_SIZES_SPECIAL=[];FORMAT_SIZES_SPECIAL[GL_RGBA4]=2,FORMAT_SIZES_SPECIAL[GL_RGB5_A1]=2,FORMAT_SIZES_SPECIAL[GL_RGB565]=2,FORMAT_SIZES_SPECIAL[GL_DEPTH_STENCIL]=4,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ATC_WEBGL]=.5,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,FORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ETC1_WEBGL]=.5,module.exports=function(e,t,a,i,r,_,n){function E(){this.internalformat=GL_RGBA,this.format=GL_RGBA,this.type=GL_UNSIGNED_BYTE,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function s(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function o(e,i){if("object"==typeof i&&i){if("premultiplyAlpha"in i&&(check.type(i.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=i.premultiplyAlpha),"flipY"in i&&(check.type(i.flipY,"boolean","invalid texture flip"),e.flipY=i.flipY),"alignment"in i&&(check.oneOf(i.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=i.alignment),"colorSpace"in i&&(check.parameter(i.colorSpace,w,"invalid colorSpace"),e.colorSpace=w[i.colorSpace]),"type"in i){var r=i.type;check(t.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),check(t.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),check(t.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),check.parameter(r,U,"invalid texture type"),e.type=U[r]}var _=e.width,n=e.height,E=e.channels,s=!1;"shape"in i?(check(Array.isArray(i.shape)&&i.shape.length>=2,"shape must be an array"),_=i.shape[0],n=i.shape[1],3===i.shape.length&&(E=i.shape[2],check(E>0&&E<=4,"invalid number of channels"),s=!0),check(_>=0&&_<=a.maxTextureSize,"invalid width"),check(n>=0&&n<=a.maxTextureSize,"invalid height")):("radius"in i&&(_=n=i.radius,check(_>=0&&_<=a.maxTextureSize,"invalid radius")),"width"in i&&(_=i.width,check(_>=0&&_<=a.maxTextureSize,"invalid width")),"height"in i&&(n=i.height,check(n>=0&&n<=a.maxTextureSize,"invalid height")),"channels"in i&&(E=i.channels,check(E>0&&E<=4,"invalid number of channels"),s=!0)),e.width=0|_,e.height=0|n,e.channels=0|E;var o=!1;if("format"in i){var l=i.format;check(t.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),check.parameter(l,F,"invalid texture format");var c=e.internalformat=F[l];e.format=q[c],l in U&&("type"in i||(e.type=U[l])),l in X&&(e.compressed=!0),o=!0}!s&&o?e.channels=FORMAT_CHANNELS[e.format]:s&&!o?e.channels!==CHANNELS_FORMAT[e.format]&&(e.format=e.internalformat=CHANNELS_FORMAT[e.channels]):o&&s&&check(e.channels===FORMAT_CHANNELS[e.format],"number of channels inconsistent with specified format")}}function l(t){e.pixelStorei(GL_UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),e.pixelStorei(GL_UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorSpace),e.pixelStorei(GL_UNPACK_ALIGNMENT,t.unpackAlignment)}function c(){E.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function L(e,t){var i=null;if(isPixelData(t)?i=t:t&&(check.type(t,"object","invalid pixel data type"),o(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),isPixelData(t.data)&&(i=t.data)),check(!e.compressed||i instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){check(!i,"can not specify copy and data field for the same texture");var _=r.viewportWidth,n=r.viewportHeight;e.width=e.width||_-e.xOffset,e.height=e.height||n-e.yOffset,e.needsCopy=!0,check(e.xOffset>=0&&e.xOffset<_&&e.yOffset>=0&&e.yOffset<n&&e.width>0&&e.width<=_&&e.height>0&&e.height<=n,"copy texture read out of bounds")}else if(i){if(isTypedArray(i))e.channels=e.channels||4,e.data=i,"type"in t||e.type!==GL_UNSIGNED_BYTE||(e.type=typedArrayCode(i));else if(isNumericArray(i))e.channels=e.channels||4,convertData(e,i),e.alignment=1,e.needsFree=!0;else if(isNDArrayLike(i)){var E=i.data;Array.isArray(E)||e.type!==GL_UNSIGNED_BYTE||(e.type=typedArrayCode(E));var s,l,c,L,h,p,T=i.shape,A=i.stride;3===T.length?(c=T[2],p=A[2]):(check(2===T.length,"invalid ndarray pixel data, must be 2 or 3D"),c=1,p=1),s=T[0],l=T[1],L=A[0],h=A[1],e.alignment=1,e.width=s,e.height=l,e.channels=c,e.format=e.internalformat=CHANNELS_FORMAT[c],e.needsFree=!0,transposeData(e,E,L,h,p,i.offset)}else if(isCanvasElement(i)||isContext2D(i))isCanvasElement(i)?e.element=i:e.element=i.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(isImageElement(i))e.element=i,e.width=i.naturalWidth,e.height=i.naturalHeight,e.channels=4;else if(isVideoElement(i))e.element=i,e.width=i.videoWidth,e.height=i.videoHeight,e.channels=4;else if(isRectArray(i)){var S=e.width||i[0].length,G=e.height||i.length,u=e.channels;u=isArrayLike(i[0][0])?u||i[0][0].length:u||1;for(var m=flattenUtils.shape(i),f=1,R=0;R<m.length;++R)f*=m[R];var d=preConvert(e,f);flattenUtils.flatten(i,m,"",d),postConvert(e,d),e.alignment=1,e.width=S,e.height=G,e.channels=u,e.format=e.internalformat=CHANNELS_FORMAT[u],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===GL_FLOAT?check(a.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===GL_HALF_FLOAT_OES&&check(a.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function h(t,a,r){var _=t.element,n=t.data,E=t.internalformat,s=t.format,o=t.type,c=t.width,L=t.height;l(t),_?e.texImage2D(a,r,s,s,o,_):t.compressed?e.compressedTexImage2D(a,r,E,c,L,0,n):t.needsCopy?(i(),e.copyTexImage2D(a,r,s,t.xOffset,t.yOffset,c,L,0)):e.texImage2D(a,r,s,c,L,0,s,o,n)}function p(t,a,r,_,n){var E=t.element,s=t.data,o=t.internalformat,c=t.format,L=t.type,h=t.width,p=t.height;l(t),E?e.texSubImage2D(a,n,r,_,c,L,E):t.compressed?e.compressedTexSubImage2D(a,n,r,_,o,h,p,s):t.needsCopy?(i(),e.copyTexSubImage2D(a,n,r,_,t.xOffset,t.yOffset,h,p)):e.texSubImage2D(a,n,r,_,h,p,c,L,s)}function T(){return K.pop()||new c}function A(e){e.needsFree&&pool.freeType(e.data),c.call(e),K.push(e)}function S(){E.call(this),this.genMipmaps=!1,this.mipmapHint=GL_DONT_CARE,this.mipmask=0,this.images=Array(16)}function G(e,t,a){var i=e.images[0]=T();e.mipmask=1,i.width=e.width=t,i.height=e.height=a,i.channels=e.channels=4}function u(e,t){var a=null;if(isPixelData(t))a=e.images[0]=T(),s(a,e),L(a,t),e.mipmask=1;else if(o(e,t),Array.isArray(t.mipmap))for(var i=t.mipmap,r=0;r<i.length;++r)a=e.images[r]=T(),s(a,e),a.width>>=r,a.height>>=r,L(a,i[r]),e.mipmask|=1<<r;else a=e.images[0]=T(),s(a,e),L(a,t),e.mipmask=1;s(e,e.images[0]),(e.compressed&&e.internalformat===GL_COMPRESSED_RGB_S3TC_DXT1_EXT||e.internalformat===GL_COMPRESSED_RGBA_S3TC_DXT1_EXT||e.internalformat===GL_COMPRESSED_RGBA_S3TC_DXT3_EXT||e.internalformat===GL_COMPRESSED_RGBA_S3TC_DXT5_EXT)&&check(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function m(e,t){for(var a=e.images,i=0;i<a.length;++i){if(!a[i])return;h(a[i],t,i)}}function f(){var e=J.pop()||new S;E.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function R(e){for(var t=e.images,a=0;a<t.length;++a)t[a]&&A(t[a]),t[a]=null;J.push(e)}function d(){this.minFilter=GL_NEAREST,this.magFilter=GL_NEAREST,this.wrapS=GL_CLAMP_TO_EDGE,this.wrapT=GL_CLAMP_TO_EDGE,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=GL_DONT_CARE}function P(e,t){if("min"in t){var i=t.min;check.parameter(i,k),e.minFilter=k[i],MIPMAP_FILTERS.indexOf(e.minFilter)>=0&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;check.parameter(r,B),e.magFilter=B[r]}var _=e.wrapS,n=e.wrapT;if("wrap"in t){var E=t.wrap;"string"==typeof E?(check.parameter(E,b),_=n=b[E]):Array.isArray(E)&&(check.parameter(E[0],b),check.parameter(E[1],b),_=b[E[0]],n=b[E[1]])}else{if("wrapS"in t){var s=t.wrapS;check.parameter(s,b),_=b[s]}if("wrapT"in t){var o=t.wrapT;check.parameter(o,b),n=b[o]}}if(e.wrapS=_,e.wrapT=n,"anisotropic"in t){var l=t.anisotropic;check("number"==typeof l&&l>=1&&l<=a.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var c=!1;switch(typeof t.mipmap){case"string":check.parameter(t.mipmap,v,"invalid mipmap hint"),e.mipmapHint=v[t.mipmap],e.genMipmaps=!0,c=!0;break;case"boolean":c=e.genMipmaps=t.mipmap;break;case"object":check(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,c=!0;break;default:check.raise("invalid mipmap type")}!c||"min"in t||(e.minFilter=GL_NEAREST_MIPMAP_NEAREST)}}function C(a,i){e.texParameteri(i,GL_TEXTURE_MIN_FILTER,a.minFilter),e.texParameteri(i,GL_TEXTURE_MAG_FILTER,a.magFilter),e.texParameteri(i,GL_TEXTURE_WRAP_S,a.wrapS),e.texParameteri(i,GL_TEXTURE_WRAP_T,a.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(i,GL_TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic),a.genMipmaps&&(e.hint(GL_GENERATE_MIPMAP_HINT,a.mipmapHint),e.generateMipmap(i))}function g(t){E.call(this),this.mipmask=0,this.internalformat=GL_RGBA,this.id=Q++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new d,n.profile&&(this.stats={size:0})}function N(t){e.activeTexture(GL_TEXTURE0),e.bindTexture(t.target,t.texture)}function I(){var t=te[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(GL_TEXTURE_2D,null)}function O(t){var a=t.texture;check(a,"must not double destroy texture");var i=t.unit,r=t.target;i>=0&&(e.activeTexture(GL_TEXTURE0+i),e.bindTexture(r,null),te[i]=null),e.deleteTexture(a),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete $[t.id],_.textureCount--}function M(t,i){function r(e,t){var i=l.texInfo;d.call(i);var _=f();return"number"==typeof e?"number"==typeof t?G(_,0|e,0|t):G(_,0|e,0|e):e?(check.type(e,"object","invalid arguments to regl.texture"),P(i,e),u(_,e)):G(_,1,1),i.genMipmaps&&(_.mipmask=(_.width<<1)-1),l.mipmask=_.mipmask,s(l,_),check.texture2D(i,_,a),l.internalformat=_.internalformat,r.width=_.width,r.height=_.height,N(l),m(_,GL_TEXTURE_2D),C(i,GL_TEXTURE_2D),I(),R(_),n.profile&&(l.stats.size=getTextureSize(l.internalformat,l.type,_.width,_.height,i.genMipmaps,!1)),r.format=W[l.internalformat],r.type=Y[l.type],r.mag=Z[i.magFilter],r.min=j[i.minFilter],r.wrapS=z[i.wrapS],r.wrapT=z[i.wrapT],r}function E(e,t,a,i){check(!!e,"must specify image data");var _=0|t,n=0|a,E=0|i,o=T();return s(o,l),o.width=0,o.height=0,L(o,e),o.width=o.width||(l.width>>E)-_,o.height=o.height||(l.height>>E)-n,check(l.type===o.type&&l.format===o.format&&l.internalformat===o.internalformat,"incompatible format for texture.subimage"),check(_>=0&&n>=0&&_+o.width<=l.width&&n+o.height<=l.height,"texture.subimage write out of bounds"),check(l.mipmask&1<<E,"missing mipmap data"),check(o.data||o.element||o.needsCopy,"missing image data"),N(l),p(o,GL_TEXTURE_2D,_,n,E),I(),A(o),r}function o(t,a){var i=0|t,_=0|a||i;if(i===l.width&&_===l.height)return r;r.width=l.width=i,r.height=l.height=_,N(l);for(var E=0;l.mipmask>>E;++E)e.texImage2D(GL_TEXTURE_2D,E,l.format,i>>E,_>>E,0,l.format,l.type,null);return I(),n.profile&&(l.stats.size=getTextureSize(l.internalformat,l.type,i,_,!1,!1)),r}var l=new g(GL_TEXTURE_2D);return $[l.id]=l,_.textureCount++,r(t,i),r.subimage=E,r.resize=o,r._reglType="texture2d",r._texture=l,n.profile&&(r.stats=l.stats),r.destroy=function(){l.decRef()},r}function y(t,i,r,E,l,c){function h(e,t,i,r,_,E){var l,c=M.texInfo;for(d.call(c),l=0;l<6;++l)y[l]=f();if("number"!=typeof e&&e)if("object"==typeof e)if(t)u(y[0],e),u(y[1],t),u(y[2],i),u(y[3],r),u(y[4],_),u(y[5],E);else if(P(c,e),o(M,e),"faces"in e){var L=e.faces;for(check(Array.isArray(L)&&6===L.length,"cube faces must be a length 6 array"),l=0;l<6;++l)check("object"==typeof L[l]&&!!L[l],"invalid input for cube map face"),s(y[l],M),u(y[l],L[l])}else for(l=0;l<6;++l)u(y[l],e);else check.raise("invalid arguments to cube map");else{var p=0|e||1;for(l=0;l<6;++l)G(y[l],p,p)}for(s(M,y[0]),c.genMipmaps?M.mipmask=(y[0].width<<1)-1:M.mipmask=y[0].mipmask,check.textureCube(M,c,y,a),M.internalformat=y[0].internalformat,h.width=y[0].width,h.height=y[0].height,N(M),l=0;l<6;++l)m(y[l],GL_TEXTURE_CUBE_MAP_POSITIVE_X+l);for(C(c,GL_TEXTURE_CUBE_MAP),I(),n.profile&&(M.stats.size=getTextureSize(M.internalformat,M.type,h.width,h.height,c.genMipmaps,!0)),h.format=W[M.internalformat],h.type=Y[M.type],h.mag=Z[c.magFilter],h.min=j[c.minFilter],h.wrapS=z[c.wrapS],h.wrapT=z[c.wrapT],l=0;l<6;++l)R(y[l]);return h}function S(e,t,a,i,r){check(!!t,"must specify image data"),check("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var _=0|a,n=0|i,E=0|r,o=T();return s(o,M),o.width=0,o.height=0,L(o,t),o.width=o.width||(M.width>>E)-_,o.height=o.height||(M.height>>E)-n,check(M.type===o.type&&M.format===o.format&&M.internalformat===o.internalformat,"incompatible format for texture.subimage"),check(_>=0&&n>=0&&_+o.width<=M.width&&n+o.height<=M.height,"texture.subimage write out of bounds"),check(M.mipmask&1<<E,"missing mipmap data"),check(o.data||o.element||o.needsCopy,"missing image data"),N(M),p(o,GL_TEXTURE_CUBE_MAP_POSITIVE_X+e,_,n,E),I(),A(o),h}function O(t){var a=0|t;if(a!==M.width){h.width=M.width=a,h.height=M.height=a,N(M);for(var i=0;i<6;++i)for(var r=0;M.mipmask>>r;++r)e.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+i,r,M.format,a>>r,a>>r,0,M.format,M.type,null);return I(),n.profile&&(M.stats.size=getTextureSize(M.internalformat,M.type,h.width,h.height,!1,!0)),h}}var M=new g(GL_TEXTURE_CUBE_MAP);$[M.id]=M,_.cubeCount++;var y=new Array(6);return h(t,i,r,E,l,c),h.subimage=S,h.resize=O,h._reglType="textureCube",h._texture=M,n.profile&&(h.stats=M.stats),h.destroy=function(){M.decRef()},h}function x(){for(var t=0;t<ee;++t)e.activeTexture(GL_TEXTURE0+t),e.bindTexture(GL_TEXTURE_2D,null),te[t]=null;values($).forEach(O),_.cubeCount=0,_.textureCount=0}function D(){values($).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var a=0;a<32;++a)if(0!=(t.mipmask&1<<a))if(t.target===GL_TEXTURE_2D)e.texImage2D(GL_TEXTURE_2D,a,t.internalformat,t.width>>a,t.height>>a,0,t.internalformat,t.type,null);else for(var i=0;i<6;++i)e.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+i,a,t.internalformat,t.width>>a,t.height>>a,0,t.internalformat,t.type,null);C(t.texInfo,t.target)})}var v={"don't care":GL_DONT_CARE,"dont care":GL_DONT_CARE,nice:GL_NICEST,fast:GL_FASTEST},b={repeat:GL_REPEAT,clamp:GL_CLAMP_TO_EDGE,mirror:GL_MIRRORED_REPEAT},B={nearest:GL_NEAREST,linear:GL_LINEAR},k=extend({mipmap:GL_LINEAR_MIPMAP_LINEAR,"nearest mipmap nearest":GL_NEAREST_MIPMAP_NEAREST,"linear mipmap nearest":GL_LINEAR_MIPMAP_NEAREST,"nearest mipmap linear":GL_NEAREST_MIPMAP_LINEAR,"linear mipmap linear":GL_LINEAR_MIPMAP_LINEAR},B),w={none:0,browser:GL_BROWSER_DEFAULT_WEBGL},U={uint8:GL_UNSIGNED_BYTE,rgba4:GL_UNSIGNED_SHORT_4_4_4_4,rgb565:GL_UNSIGNED_SHORT_5_6_5,"rgb5 a1":GL_UNSIGNED_SHORT_5_5_5_1},F={alpha:GL_ALPHA,luminance:GL_LUMINANCE,"luminance alpha":GL_LUMINANCE_ALPHA,rgb:GL_RGB,rgba:GL_RGBA,rgba4:GL_RGBA4,"rgb5 a1":GL_RGB5_A1,rgb565:GL_RGB565},X={};t.ext_srgb&&(F.srgb=GL_SRGB_EXT,F.srgba=GL_SRGB_ALPHA_EXT),t.oes_texture_float&&(U.float32=U.float=GL_FLOAT),t.oes_texture_half_float&&(U.float16=U["half float"]=GL_HALF_FLOAT_OES),t.webgl_depth_texture&&(extend(F,{depth:GL_DEPTH_COMPONENT,"depth stencil":GL_DEPTH_STENCIL}),extend(U,{uint16:GL_UNSIGNED_SHORT,uint32:GL_UNSIGNED_INT,"depth stencil":GL_UNSIGNED_INT_24_8_WEBGL})),t.webgl_compressed_texture_s3tc&&extend(X,{"rgb s3tc dxt1":GL_COMPRESSED_RGB_S3TC_DXT1_EXT,"rgba s3tc dxt1":GL_COMPRESSED_RGBA_S3TC_DXT1_EXT,"rgba s3tc dxt3":GL_COMPRESSED_RGBA_S3TC_DXT3_EXT,"rgba s3tc dxt5":GL_COMPRESSED_RGBA_S3TC_DXT5_EXT}),t.webgl_compressed_texture_atc&&extend(X,{"rgb atc":GL_COMPRESSED_RGB_ATC_WEBGL,"rgba atc explicit alpha":GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,"rgba atc interpolated alpha":GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL}),t.webgl_compressed_texture_pvrtc&&extend(X,{"rgb pvrtc 4bppv1":GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG,"rgb pvrtc 2bppv1":GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG,"rgba pvrtc 4bppv1":GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,"rgba pvrtc 2bppv1":GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}),t.webgl_compressed_texture_etc1&&(X["rgb etc1"]=GL_COMPRESSED_RGB_ETC1_WEBGL);var H=Array.prototype.slice.call(e.getParameter(GL_COMPRESSED_TEXTURE_FORMATS));Object.keys(X).forEach(function(e){var t=X[e];H.indexOf(t)>=0&&(F[e]=t)});var V=Object.keys(F);a.textureFormats=V;var W=[];Object.keys(F).forEach(function(e){var t=F[e];W[t]=e});var Y=[];Object.keys(U).forEach(function(e){var t=U[e];Y[t]=e});var Z=[];Object.keys(B).forEach(function(e){var t=B[e];Z[t]=e});var j=[];Object.keys(k).forEach(function(e){var t=k[e];j[t]=e});var z=[];Object.keys(b).forEach(function(e){var t=b[e];z[t]=e});var q=V.reduce(function(e,t){var a=F[t];return a===GL_LUMINANCE||a===GL_ALPHA||a===GL_LUMINANCE||a===GL_LUMINANCE_ALPHA||a===GL_DEPTH_COMPONENT||a===GL_DEPTH_STENCIL?e[a]=a:a===GL_RGB5_A1||t.indexOf("rgba")>=0?e[a]=GL_RGBA:e[a]=GL_RGB,e},{}),K=[],J=[],Q=0,$={},ee=a.maxTextureUnits,te=Array(ee).map(function(){return null});return extend(g.prototype,{bind:function(){var t=this;t.bindCount+=1;var a=t.unit;if(a<0){for(var i=0;i<ee;++i){var r=te[i];if(r){if(r.bindCount>0)continue;r.unit=-1}te[i]=t,a=i;break}a>=ee&&check.raise("insufficient number of texture units"),n.profile&&_.maxTextureUnits<a+1&&(_.maxTextureUnits=a+1),t.unit=a,e.activeTexture(GL_TEXTURE0+a),e.bindTexture(t.target,t.texture)}return a},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&O(this)}}),n.profile&&(_.getTotalTextureSize=function(){var e=0;return Object.keys($).forEach(function(t){e+=$[t].stats.size}),e}),{create2D:M,createCube:y,clear:x,getTexture:function(e){return null},restore:D}};

},{"./constants/arraytypes.json":439,"./util/check":456,"./util/extend":459,"./util/flatten":460,"./util/is-array-like":461,"./util/is-ndarray":462,"./util/is-typed-array":463,"./util/pool":465,"./util/to-half-float":467,"./util/values":468}],455:[function(_dereq_,module,exports){
"use strict";var GL_QUERY_RESULT_EXT=34918,GL_QUERY_RESULT_AVAILABLE_EXT=34919,GL_TIME_ELAPSED_EXT=35007;module.exports=function(e,t){function n(){return g.pop()||l.createQueryEXT()}function r(e){g.push(e)}function u(e){var t=n();l.beginQueryEXT(GL_TIME_ELAPSED_EXT,t),o.push(t),a(o.length-1,o.length,e)}function E(){l.endQueryEXT(GL_TIME_ELAPSED_EXT)}function s(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function h(){return Q.pop()||new s}function i(e){Q.push(e)}function a(e,t,n){var r=h();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,T.push(r)}function _(){var e,t,n=o.length;if(0!==n){d.length=Math.max(d.length,n+1),c.length=Math.max(c.length,n+1),c[0]=0,d[0]=0;var u=0;for(e=0,t=0;t<o.length;++t){var E=o[t];l.getQueryObjectEXT(E,GL_QUERY_RESULT_AVAILABLE_EXT)?(u+=l.getQueryObjectEXT(E,GL_QUERY_RESULT_EXT),r(E)):o[e++]=E,c[t+1]=u,d[t+1]=e}for(o.length=e,e=0,t=0;t<T.length;++t){var s=T[t],h=s.startQueryIndex,a=s.endQueryIndex;s.sum+=c[a]-c[h];var _=d[h],g=d[a];g===_?(s.stats.gpuTime+=s.sum/1e6,i(s)):(s.startQueryIndex=_,s.endQueryIndex=g,T[e++]=s)}T.length=e}}var l=t.ext_disjoint_timer_query;if(!l)return null;var g=[],o=[],Q=[],T=[],c=[],d=[];return{beginQuery:u,endQuery:E,pushScopeStats:a,update:_,getNumPendingQueries:function(){return o.length},clear:function(){g.push.apply(g,o);for(var e=0;e<g.length;e++)l.deleteQueryEXT(g[e]);o.length=0,g.length=0},restore:function(){o.length=0,g.length=0}}};

},{}],456:[function(_dereq_,module,exports){
"use strict";function decodeB64(e){return"undefined"!=typeof btoa?btoa(e):"base64:"+e}function raise(e){var n=new Error("(regl) "+e);throw console.error(n),n}function check(e,n){e||raise(n)}function encolon(e){return e?": "+e:""}function checkParameter(e,n,r){e in n||raise("unknown parameter ("+e+")"+encolon(r)+". possible values: "+Object.keys(n).join())}function checkIsTypedArray(e,n){isTypedArray(e)||raise("invalid parameter type"+encolon(n)+". must be a typed array")}function checkTypeOf(e,n,r){typeof e!==n&&raise("invalid parameter type"+encolon(r)+". expected "+n+", got "+typeof e)}function checkNonNegativeInt(e,n){e>=0&&(0|e)===e||raise("invalid parameter type, ("+e+")"+encolon(n)+". must be a nonnegative integer")}function checkOneOf(e,n,r){n.indexOf(e)<0&&raise("invalid value"+encolon(r)+". must be one of: "+n)}function checkConstructor(e){Object.keys(e).forEach(function(e){constructorKeys.indexOf(e)<0&&raise('invalid regl constructor argument "'+e+'". must be one of '+constructorKeys)})}function leftPad(e,n){for(e+="";e.length<n;)e=" "+e;return e}function ShaderFile(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ShaderLine(e,n){this.number=e,this.line=n,this.errors=[]}function ShaderError(e,n,r){this.file=e,this.line=n,this.message=r}function guessCommand(){var e=new Error,n=(e.stack||e).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(n);if(r)return r[1];var a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(n);return a?a[1]:"unknown"}function guessCallSite(){var e=new Error,n=(e.stack||e).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(n);if(r)return r[1];var a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(n);return a?a[1]:"unknown"}function parseSource(e,n){var r=e.split("\n"),a=1,t=0,o={unknown:new ShaderFile,0:new ShaderFile};o.unknown.name=o[0].name=n||guessCommand(),o.unknown.lines.push(new ShaderLine(0,""));for(var i=0;i<r.length;++i){var c=r[i],s=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(c);if(s)switch(s[1]){case"line":var m=/(\d+)(\s+\d+)?/.exec(s[2]);m&&(a=0|m[1],m[2]&&((t=0|m[2])in o||(o[t]=new ShaderFile)));break;case"define":var u=/SHADER_NAME(_B64)?\s+(.*)$/.exec(s[2]);u&&(o[t].name=u[1]?decodeB64(u[2]):u[2])}o[t].lines.push(new ShaderLine(a++,c))}return Object.keys(o).forEach(function(e){var n=o[e];n.lines.forEach(function(e){n.index[e.number]=e})}),o}function parseErrorLog(e){var n=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var r=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);r?n.push(new ShaderError(0|r[1],0|r[2],r[3].trim())):e.length>0&&n.push(new ShaderError("unknown",0,e))}}),n}function annotateFiles(e,n){n.forEach(function(n){var r=e[n.file];if(r){var a=r.index[n.line];if(a)return a.errors.push(n),void(r.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(n)})}function checkShaderError(e,n,r,a,t){if(!e.getShaderParameter(n,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(n),i=a===e.FRAGMENT_SHADER?"fragment":"vertex";checkCommandType(r,"string",i+" shader source must be a string",t);var c=parseSource(r,t),s=parseErrorLog(o);annotateFiles(c,s),Object.keys(c).forEach(function(e){function n(e,n){a.push(e),t.push(n||"")}var r=c[e];if(r.hasErrors){var a=[""],t=[""];n("file number "+e+": "+r.name+"\n","color:red;text-decoration:underline;font-weight:bold"),r.lines.forEach(function(e){if(e.errors.length>0){n(leftPad(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),n(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var r=0;e.errors.forEach(function(a){var t=a.message,o=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(t);if(o){var i=o[1];switch(t=o[2],i){case"assign":i="="}r=Math.max(e.line.indexOf(i,r),0)}else r=0;n(leftPad("| ",6)),n(leftPad("^^^",r+3)+"\n","font-weight:bold"),n(leftPad("| ",6)),n(t+"\n","font-weight:bold")}),n(leftPad("| ",6)+"\n")}else n(leftPad(e.number,4)+"|  "),n(e.line+"\n","color:red")}),"undefined"!=typeof document?(t[0]=a.join("%c"),console.log.apply(console,t)):console.log(a.join(""))}}),check.raise("Error compiling "+i+" shader, "+c[0].name)}}function checkLinkError(e,n,r,a,t){if(!e.getProgramParameter(n,e.LINK_STATUS)){var o=e.getProgramInfoLog(n),i=parseSource(r,t),c=parseSource(a,t),s='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+i[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+o,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+o),check.raise(s)}}function saveCommandRef(e){e._commandRef=guessCommand()}function saveDrawCommandInfo(e,n,r,a){function t(e){return e?a.id(e):0}function o(e,n){Object.keys(n).forEach(function(n){e[a.id(n)]=!0})}saveCommandRef(e),e._fragId=t(e.static.frag),e._vertId=t(e.static.vert);var i=e._uniformSet={};o(i,n.static),o(i,n.dynamic);var c=e._attributeSet={};o(c,r.static),o(c,r.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function commandRaise(e,n){var r=guessCallSite();raise(e+" in command "+(n||guessCommand())+("unknown"===r?"":" called from "+r))}function checkCommand(e,n,r){e||commandRaise(n,r||guessCommand())}function checkParameterCommand(e,n,r,a){e in n||commandRaise("unknown parameter ("+e+")"+encolon(r)+". possible values: "+Object.keys(n).join(),a||guessCommand())}function checkCommandType(e,n,r,a){typeof e!==n&&commandRaise("invalid parameter type"+encolon(r)+". expected "+n+", got "+typeof e,a||guessCommand())}function checkOptional(e){e()}function checkFramebufferFormat(e,n,r){e.texture?checkOneOf(e.texture._texture.internalformat,n,"unsupported texture format for attachment"):checkOneOf(e.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")}function pixelSize(e,n){return e===GL_UNSIGNED_SHORT_5_5_5_1||e===GL_UNSIGNED_SHORT_4_4_4_4||e===GL_UNSIGNED_SHORT_5_6_5?2:e===GL_UNSIGNED_INT_24_8_WEBGL?4:TYPE_SIZE[e]*n}function isPow2(e){return!(e&e-1||!e)}function checkTexture2D(e,n,r){var a,t=n.width,o=n.height,i=n.channels;check(t>0&&t<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),e.wrapS===GL_CLAMP_TO_EDGE&&e.wrapT===GL_CLAMP_TO_EDGE||check(isPow2(t)&&isPow2(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===n.mipmask?1!==t&&1!==o&&check(e.minFilter!==GL_NEAREST_MIPMAP_NEAREST&&e.minFilter!==GL_NEAREST_MIPMAP_LINEAR&&e.minFilter!==GL_LINEAR_MIPMAP_NEAREST&&e.minFilter!==GL_LINEAR_MIPMAP_LINEAR,"min filter requires mipmap"):(check(isPow2(t)&&isPow2(o),"texture must be a square power of 2 to support mipmapping"),check(n.mipmask===(t<<1)-1,"missing or incomplete mipmap data")),n.type===GL_FLOAT&&(r.extensions.indexOf("oes_texture_float_linear")<0&&check(e.minFilter===GL_NEAREST&&e.magFilter===GL_NEAREST,"filter not supported, must enable oes_texture_float_linear"),check(!e.genMipmaps,"mipmap generation not supported with float textures"));var c=n.images;for(a=0;a<16;++a)if(c[a]){var s=t>>a,m=o>>a;check(n.mipmask&1<<a,"missing mipmap data");var u=c[a];if(check(u.width===s&&u.height===m,"invalid shape for mip images"),check(u.format===n.format&&u.internalformat===n.internalformat&&u.type===n.type,"incompatible type for mip image"),u.compressed);else if(u.data){var f=Math.ceil(pixelSize(u.type,i)*s/u.unpackAlignment)*u.unpackAlignment;check(u.data.byteLength===f*m,"invalid data for image, buffer size is inconsistent with image format")}else u.element||u.copy}else e.genMipmaps||check(0==(n.mipmask&1<<a),"extra mipmap data");n.compressed&&check(!e.genMipmaps,"mipmap generation for compressed images not supported")}function checkTextureCube(e,n,r,a){var t=e.width,o=e.height,i=e.channels;check(t>0&&t<=a.maxTextureSize&&o>0&&o<=a.maxTextureSize,"invalid texture shape"),check(t===o,"cube map must be square"),check(n.wrapS===GL_CLAMP_TO_EDGE&&n.wrapT===GL_CLAMP_TO_EDGE,"wrap mode not supported by cube map");for(var c=0;c<r.length;++c){var s=r[c];check(s.width===t&&s.height===o,"inconsistent cube map face shape"),n.genMipmaps&&(check(!s.compressed,"can not generate mipmap for compressed textures"),check(1===s.mipmask,"can not specify mipmaps and generate mipmaps"));for(var m=s.images,u=0;u<16;++u){var f=m[u];if(f){var d=t>>u,_=o>>u;check(s.mipmask&1<<u,"missing mipmap data"),check(f.width===d&&f.height===_,"invalid shape for mip images"),check(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed||(f.data?check(f.data.byteLength===d*_*Math.max(pixelSize(f.type,i),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):f.element||f.copy)}}}}var isTypedArray=_dereq_("./is-typed-array"),extend=_dereq_("./extend"),constructorKeys=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],GL_CLAMP_TO_EDGE=33071,GL_NEAREST=9728,GL_NEAREST_MIPMAP_NEAREST=9984,GL_LINEAR_MIPMAP_NEAREST=9985,GL_NEAREST_MIPMAP_LINEAR=9986,GL_LINEAR_MIPMAP_LINEAR=9987,GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_INT=5124,GL_UNSIGNED_INT=5125,GL_FLOAT=5126,GL_UNSIGNED_SHORT_4_4_4_4=32819,GL_UNSIGNED_SHORT_5_5_5_1=32820,GL_UNSIGNED_SHORT_5_6_5=33635,GL_UNSIGNED_INT_24_8_WEBGL=34042,GL_HALF_FLOAT_OES=36193,TYPE_SIZE={};TYPE_SIZE[GL_BYTE]=TYPE_SIZE[GL_UNSIGNED_BYTE]=1,TYPE_SIZE[GL_SHORT]=TYPE_SIZE[GL_UNSIGNED_SHORT]=TYPE_SIZE[GL_HALF_FLOAT_OES]=TYPE_SIZE[GL_UNSIGNED_SHORT_5_6_5]=TYPE_SIZE[GL_UNSIGNED_SHORT_4_4_4_4]=TYPE_SIZE[GL_UNSIGNED_SHORT_5_5_5_1]=2,TYPE_SIZE[GL_INT]=TYPE_SIZE[GL_UNSIGNED_INT]=TYPE_SIZE[GL_FLOAT]=TYPE_SIZE[GL_UNSIGNED_INT_24_8_WEBGL]=4,module.exports=extend(check,{optional:checkOptional,raise:raise,commandRaise:commandRaise,command:checkCommand,parameter:checkParameter,commandParameter:checkParameterCommand,constructor:checkConstructor,type:checkTypeOf,commandType:checkCommandType,isTypedArray:checkIsTypedArray,nni:checkNonNegativeInt,oneOf:checkOneOf,shaderError:checkShaderError,linkError:checkLinkError,callSite:guessCallSite,saveCommandRef:saveCommandRef,saveDrawInfo:saveDrawCommandInfo,framebufferFormat:checkFramebufferFormat,guessCommand:guessCommand,texture2D:checkTexture2D,textureCube:checkTextureCube});

},{"./extend":459,"./is-typed-array":463}],457:[function(_dereq_,module,exports){
"use strict";module.exports="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};

},{}],458:[function(_dereq_,module,exports){
"use strict";function slice(n){return Array.prototype.slice.call(n)}function join(n){return slice(n).join("")}var extend=_dereq_("./extend");module.exports=function(){function n(n){for(var t=0;t<l.length;++t)if(l[t]===n)return c[t];var r="g"+o++;return c.push(r),l.push(n),r}function t(){function n(){r.push.apply(r,slice(arguments))}function t(){var n="v"+o++;return e.push(n),arguments.length>0&&(r.push(n,"="),r.push.apply(r,slice(arguments)),r.push(";")),n}var r=[],e=[];return extend(n,{def:t,toString:function(){return join([e.length>0?"var "+e+";":"",join(r)])}})}function r(){function n(n,t){e(n,t,"=",r.def(n,t),";")}var r=t(),e=t(),i=r.toString,u=e.toString;return extend(function(){r.apply(r,slice(arguments))},{def:r.def,entry:r,exit:e,save:n,set:function(t,e,i){n(t,e),r(t,e,"=",i,";")},toString:function(){return i()+u()}})}function e(){var n=join(arguments),t=r(),e=r(),i=t.toString,u=e.toString;return extend(t,{then:function(){return t.apply(t,slice(arguments)),this},else:function(){return e.apply(e,slice(arguments)),this},toString:function(){var t=u();return t&&(t="else{"+t+"}"),join(["if(",n,"){",i(),"}",t])}})}function i(n,t){function e(){var n="a"+i.length;return i.push(n),n}var i=[];t=t||0;for(var u=0;u<t;++u)e();var o=r(),c=o.toString;return p[n]=extend(o,{arg:e,toString:function(){return join(["function(",i.join(),"){",c(),"}"])}})}function u(){var n=['"use strict";',a,"return {"];Object.keys(p).forEach(function(t){n.push('"',t,'":',p[t].toString(),",")}),n.push("}");var t=join(n).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,c.concat(t)).apply(null,l)}var o=0,c=[],l=[],a=t(),p={};return{global:a,link:n,block:t,proc:i,scope:r,cond:e,compile:u}};

},{"./extend":459}],459:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e};

},{}],460:[function(_dereq_,module,exports){
"use strict";function flatten1D(e,a,t){for(var r=0;r<a;++r)t[r]=e[r]}function flatten2D(e,a,t,r){for(var n=0,f=0;f<a;++f)for(var l=e[f],o=0;o<t;++o)r[n++]=l[o]}function flatten3D(e,a,t,r,n,f){for(var l=f,o=0;o<a;++o)for(var c=e[o],v=0;v<t;++v)for(var u=c[v],h=0;h<r;++h)n[l++]=u[h]}function flattenRec(e,a,t,r,n){for(var f=1,l=t+1;l<a.length;++l)f*=a[l];var o=a[t];if(a.length-t==4){var c=a[t+1],v=a[t+2],u=a[t+3];for(l=0;l<o;++l)flatten3D(e[l],c,v,u,r,n),n+=f}else for(l=0;l<o;++l)flattenRec(e[l],a,t+1,r,n),n+=f}function flattenArray(e,a,t,r){var n=1;if(a.length)for(var f=0;f<a.length;++f)n*=a[f];else n=0;var l=r||pool.allocType(t,n);switch(a.length){case 0:break;case 1:flatten1D(e,a[0],l);break;case 2:flatten2D(e,a[0],a[1],l);break;case 3:flatten3D(e,a[0],a[1],a[2],l,0);break;default:flattenRec(e,a,0,l,0)}return l}function arrayShape(e){for(var a=[],t=e;t.length;t=t[0])a.push(t.length);return a}var pool=_dereq_("./pool");module.exports={shape:arrayShape,flatten:flattenArray};

},{"./pool":465}],461:[function(_dereq_,module,exports){
"use strict";var isTypedArray=_dereq_("./is-typed-array");module.exports=function(r){return Array.isArray(r)||isTypedArray(r)};

},{"./is-typed-array":463}],462:[function(_dereq_,module,exports){
"use strict";var isTypedArray=_dereq_("./is-typed-array");module.exports=function(r){return!!r&&"object"==typeof r&&Array.isArray(r.shape)&&Array.isArray(r.stride)&&"number"==typeof r.offset&&r.shape.length===r.stride.length&&(Array.isArray(r.data)||isTypedArray(r.data))};

},{"./is-typed-array":463}],463:[function(_dereq_,module,exports){
"use strict";var dtypes=_dereq_("../constants/arraytypes.json");module.exports=function(t){return Object.prototype.toString.call(t)in dtypes};

},{"../constants/arraytypes.json":439}],464:[function(_dereq_,module,exports){
"use strict";module.exports=function(r,t){for(var e=Array(r),o=0;o<r;++o)e[o]=t(o);return e};

},{}],465:[function(_dereq_,module,exports){
"use strict";function nextPow16(e){for(var r=16;r<=1<<28;r*=16)if(e<=r)return r;return 0}function log2(e){var r,a;return r=(e>65535)<<4,e>>>=r,a=(e>255)<<3,e>>>=a,r|=a,a=(e>15)<<2,e>>>=a,r|=a,a=(e>3)<<1,e>>>=a,(r|=a)|e>>1}function alloc(e){var r=nextPow16(e),a=bufferPool[log2(r)>>2];return a.length>0?a.pop():new ArrayBuffer(r)}function free(e){bufferPool[log2(e.byteLength)>>2].push(e)}function allocType(e,r){var a=null;switch(e){case GL_BYTE:a=new Int8Array(alloc(r),0,r);break;case GL_UNSIGNED_BYTE:a=new Uint8Array(alloc(r),0,r);break;case GL_SHORT:a=new Int16Array(alloc(2*r),0,r);break;case GL_UNSIGNED_SHORT:a=new Uint16Array(alloc(2*r),0,r);break;case GL_INT:a=new Int32Array(alloc(4*r),0,r);break;case GL_UNSIGNED_INT:a=new Uint32Array(alloc(4*r),0,r);break;case GL_FLOAT:a=new Float32Array(alloc(4*r),0,r);break;default:return null}return a.length!==r?a.subarray(0,r):a}function freeType(e){free(e.buffer)}var loop=_dereq_("./loop"),GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_INT=5124,GL_UNSIGNED_INT=5125,GL_FLOAT=5126,bufferPool=loop(8,function(){return[]});module.exports={alloc:alloc,free:free,allocType:allocType,freeType:freeType};

},{"./loop":464}],466:[function(_dereq_,module,exports){
"use strict";module.exports={next:"function"==typeof requestAnimationFrame?function(n){return requestAnimationFrame(n)}:function(n){return setTimeout(n,16)},cancel:"function"==typeof cancelAnimationFrame?function(n){return cancelAnimationFrame(n)}:clearTimeout};

},{}],467:[function(_dereq_,module,exports){
"use strict";var pool=_dereq_("./pool"),FLOAT=new Float32Array(1),INT=new Uint32Array(FLOAT.buffer),GL_UNSIGNED_SHORT=5123;module.exports=function(e){for(var r=pool.allocType(GL_UNSIGNED_SHORT,e.length),l=0;l<e.length;++l)if(isNaN(e[l]))r[l]=65535;else if(e[l]===1/0)r[l]=31744;else if(e[l]===-1/0)r[l]=64512;else{FLOAT[0]=e[l];var o=INT[0],i=o>>>31<<15,a=(o<<1>>>24)-127,f=o>>13&1023;if(a<-24)r[l]=i;else if(a<-14){var s=-14-a;r[l]=i+(f+1024>>s)}else r[l]=a>15?i+31744:i+(a+15<<10)+f}return r};

},{"./pool":465}],468:[function(_dereq_,module,exports){
"use strict";module.exports=function(t){return Object.keys(t).map(function(e){return t[e]})};

},{}],469:[function(_dereq_,module,exports){
"use strict";var values=_dereq_("./util/values");module.exports=function(t,e,n,i){function r(){var e=new h(t);return d[e.id]=e,n.vaoCount=o,e}function a(){values(d).forEach(function(t){t&&"function"==typeof t.destroy&&t.destroy()})}function h(t){this.id=-1,this.handle=null,s&&(this.handle=s.createVertexArrayOES(),this.handle&&(this.id=o++)),this.bind=function(){s&&this.handle&&l!==this&&(s.bindVertexArrayOES(this.handle),l=this)},this.unbind=function(){s&&l&&(s.bindVertexArrayOES(null),l=null)},this.destroy=function(){s&&this.handle&&(s.deleteVertexArrayOES(this.handle),o=Math.max(0,o-1),n.vaoCount=o,this.id=-1,this.handle=null)}}var s=e.oes_vertex_array_object,u=Boolean(s),l=null,o=0,d={};return{hasSupport:u,create:r,clear:a}};

},{"./util/values":468}],470:[function(_dereq_,module,exports){
"use strict";function createCanvas(e,n,t){function i(){var n=window.innerWidth,i=window.innerHeight;if(e!==document.body){var o=e.getBoundingClientRect();n=o.right-o.left,i=o.bottom-o.top}r.width=t*n,r.height=t*i,extend(r.style,{width:n+"px",height:i+"px"})}function o(){window.removeEventListener("resize",i),e.removeChild(r)}var r=document.createElement("canvas");return extend(r.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(r),e===document.body&&(r.style.position="absolute",extend(e.style,{margin:0,padding:0})),window.addEventListener("resize",i,!1),i(),{canvas:r,onDestroy:o}}function createContext(e,n){function t(t){try{return e.getContext(t,n)}catch(e){return null}}return t("webgl")||t("experimental-webgl")||t("webgl-experimental")}function isHTMLElement(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function isWebGLContext(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function parseExtensions(e){return"string"==typeof e?e.split():(check(Array.isArray(e),"invalid extension array"),e)}function getElement(e){return"string"==typeof e?(check("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}var check=_dereq_("./util/check"),extend=_dereq_("./util/extend");module.exports=function(e){var n,t,i,o,r=e||{},c={},s=[],a=[],u="undefined"==typeof window?1:window.devicePixelRatio,d=!1,l=function(e){e&&check.raise(e)},p=function(){};if("string"==typeof r?(check("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(r),check(n,"invalid query string for element")):"object"==typeof r?isHTMLElement(r)?n=r:isWebGLContext(r)?(o=r,i=o.canvas):(check.constructor(r),"gl"in r?o=r.gl:"canvas"in r?i=getElement(r.canvas):"container"in r&&(t=getElement(r.container)),"attributes"in r&&(c=r.attributes,check.type(c,"object","invalid context attributes")),"extensions"in r&&(s=parseExtensions(r.extensions)),"optionalExtensions"in r&&(a=parseExtensions(r.optionalExtensions)),"onDone"in r&&(check.type(r.onDone,"function","invalid or missing onDone callback"),l=r.onDone),"profile"in r&&(d=!!r.profile),"pixelRatio"in r&&(u=+r.pixelRatio,check(u>0,"invalid pixel ratio"))):check.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:t=n),!o){if(!i){check("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=createCanvas(t||document.body,l,u);if(!f)return null;i=f.canvas,p=f.onDestroy}o=createContext(i,c)}return o?{gl:o,canvas:i,container:t,extensions:s,optionalExtensions:a,pixelRatio:u,profile:d,onDone:l,onDestroy:p}:(p(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)};

},{"./util/check":456,"./util/extend":459}],471:[function(_dereq_,module,exports){
"use strict";function find(e,r){for(var t=0;t<e.length;++t)if(e[t]===r)return t;return-1}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},check=_dereq_("./lib/util/check"),extend=_dereq_("./lib/util/extend"),dynamic=_dereq_("./lib/dynamic"),raf=_dereq_("./lib/util/raf"),clock=_dereq_("./lib/util/clock"),createStringStore=_dereq_("./lib/strings"),initWebGL=_dereq_("./lib/webgl"),wrapExtensions=_dereq_("./lib/extension"),wrapLimits=_dereq_("./lib/limits"),wrapBuffers=_dereq_("./lib/buffer"),wrapElements=_dereq_("./lib/elements"),wrapTextures=_dereq_("./lib/texture"),wrapRenderbuffers=_dereq_("./lib/renderbuffer"),wrapFramebuffers=_dereq_("./lib/framebuffer"),wrapAttributes=_dereq_("./lib/attribute"),wrapShaders=_dereq_("./lib/shader"),wrapRead=_dereq_("./lib/read"),wrapVao=_dereq_("./lib/vao"),createCore=_dereq_("./lib/core"),createStats=_dereq_("./lib/stats"),createTimer=_dereq_("./lib/timer"),GL_COLOR_BUFFER_BIT=16384,GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_ARRAY_BUFFER=34962,CONTEXT_LOST_EVENT="webglcontextlost",CONTEXT_RESTORED_EVENT="webglcontextrestored",DYN_PROP=1,DYN_CONTEXT=2,DYN_STATE=3;module.exports=function(e){function r(){if(0===V.length)return x&&x.update(),void(J=null);J=raf.next(r),b();for(var e=V.length-1;e>=0;--e){var t=V[e];t&&t(O,null,0)}E.flush(),x&&x.update()}function t(){!J&&V.length>0&&(J=raf.next(r))}function n(){J&&(raf.cancel(r),J=null)}function i(e){e.preventDefault(),T=!0,n(),X.forEach(function(e){e()})}function a(e){E.getError(),T=!1,_.restore(),A.restore(),q.restore(),G.restore(),H.restore(),W.restore(),x&&x.restore(),Y.procs.refresh(),t(),j.forEach(function(e){e()})}function f(){V.length=0,n(),U&&(U.removeEventListener(CONTEXT_LOST_EVENT,i),U.removeEventListener(CONTEXT_RESTORED_EVENT,a)),A.clear(),W.clear(),H.clear(),G.clear(),F.clear(),q.clear(),C.clear(),x&&x.clear(),z.forEach(function(e){e()})}function c(e){function r(e){var r={},t={};return Object.keys(e).forEach(function(n){var i=e[n];dynamic.isDynamic(i)?t[n]=dynamic.unbox(i,n):r[n]=i}),{dynamic:t,static:r}}function t(e){for(;d.length<e;)d.push(null);return d}function n(e,r){var n;if(T&&check.raise("context lost"),"function"==typeof e)return b.call(this,null,e,0);if("function"==typeof r){if("number"==typeof e){for(n=0;n<e;++n)b.call(this,null,r,n);return}if(Array.isArray(e)){for(n=0;n<e.length;++n)b.call(this,e[n],r,n);return}return b.call(this,e,r,0)}if("number"==typeof e){if(e>0)return s.call(this,t(0|e),0|e)}else{if(!Array.isArray(e))return u.call(this,e);if(e.length)return s.call(this,e,e.length)}}check(!!e,"invalid args to regl({...})"),check.type(e,"object","invalid args to regl({...})");var i=r(e.context||{}),a=r(e.uniforms||{}),f=r(e.attributes||{}),c=r(function(e){function r(e){if(e in t){var r=t[e];delete t[e],Object.keys(r).forEach(function(n){t[e+"."+n]=r[n]})}}var t=extend({},e);return delete t.uniforms,delete t.attributes,delete t.context,"stencil"in t&&t.stencil.op&&(t.stencil.opBack=t.stencil.opFront=t.stencil.op,delete t.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),t}(e)),o={gpuTime:0,cpuTime:0,count:0},l=Y.compile(c,f,a,i,o),u=l.draw,s=l.batch,b=l.scope,d=[];return extend(n,{stats:o})}function o(e,r){var t=0;Y.procs.poll();var n=r.color;n&&(E.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),t|=GL_COLOR_BUFFER_BIT),"depth"in r&&(E.clearDepth(+r.depth),t|=GL_DEPTH_BUFFER_BIT),"stencil"in r&&(E.clearStencil(0|r.stencil),t|=GL_STENCIL_BUFFER_BIT),check(!!t,"called regl.clear with no buffer specified"),E.clear(t)}function l(e){if(check("object"===(void 0===e?"undefined":_typeof(e))&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var r=0;r<6;++r)K(extend({framebuffer:e.framebuffer.faces[r]},e),o);else K(e,o);else o(null,e)}function u(e){function r(){function r(){var e=find(V,r);V[e]=V[V.length-1],V.length-=1,V.length<=0&&n()}var t=find(V,e);check(t>=0,"cannot cancel a frame twice"),V[t]=r}return check.type(e,"function","regl.frame() callback must be a function"),V.push(e),t(),{cancel:r}}function s(){var e=P.viewport,r=P.scissor_box;e[0]=e[1]=r[0]=r[1]=0,O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=e[2]=r[2]=E.drawingBufferWidth,O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=e[3]=r[3]=E.drawingBufferHeight}function b(){O.tick+=1,O.time=p(),s(),Y.procs.poll()}function d(){s(),Y.procs.refresh(),x&&x.update()}function p(){return(clock()-R)/1e3}function h(e,r){check.type(r,"function","listener callback must be a function");var t;switch(e){case"frame":return u(r);case"lost":t=X;break;case"restore":t=j;break;case"destroy":t=z;break;default:check.raise("invalid event, must be one of frame,lost,restore,destroy")}return t.push(r),{cancel:function(){for(var e=0;e<t.length;++e)if(t[e]===r)return t[e]=t[t.length-1],void t.pop()}}}var m=initWebGL(e);if(!m)return null;var E=m.gl,g=E.getContextAttributes(),T=E.isContextLost(),_=wrapExtensions(E,m);if(!_)return null;var v=createStringStore(),w=createStats(),y=_.extensions,x=createTimer(E,y),R=clock(),k=E.drawingBufferWidth,B=E.drawingBufferHeight,O={tick:0,time:0,viewportWidth:k,viewportHeight:B,framebufferWidth:k,framebufferHeight:B,drawingBufferWidth:k,drawingBufferHeight:B,pixelRatio:m.pixelRatio},L={},S={elements:null,primitive:4,count:-1,offset:0,instances:-1},N=wrapLimits(E,y),C=wrapVao(E,y,w,m),q=wrapBuffers(E,w,m),F=wrapElements(E,y,q,w),D=wrapAttributes(E,y,N,q,v),A=wrapShaders(E,v,w,m),G=wrapTextures(E,y,N,function(){Y.procs.poll()},O,w,m),H=wrapRenderbuffers(E,y,N,w,m),W=wrapFramebuffers(E,y,N,G,H,w),Y=createCore(E,v,y,N,C,q,F,G,W,L,D,A,S,O,x,m),I=wrapRead(E,W,Y.procs.poll,O,g,y),P=Y.next,U=E.canvas,V=[],X=[],j=[],z=[m.onDestroy],J=null;U&&(U.addEventListener(CONTEXT_LOST_EVENT,i,!1),U.addEventListener(CONTEXT_RESTORED_EVENT,a,!1));var K=W.setFBO=c({framebuffer:dynamic.define.call(null,DYN_PROP,"framebuffer")});d();var M=extend(c,{clear:l,prop:dynamic.define.bind(null,DYN_PROP),context:dynamic.define.bind(null,DYN_CONTEXT),this:dynamic.define.bind(null,DYN_STATE),draw:c({}),buffer:function(e){return q.create(e,GL_ARRAY_BUFFER,!1,!1)},elements:function(e){return F.create(e,!1)},texture:G.create2D,cube:G.createCube,renderbuffer:H.create,framebuffer:W.create,framebufferCube:W.createCube,attributes:g,frame:u,on:h,limits:N,hasExtension:function(e){return N.extensions.indexOf(e.toLowerCase())>=0},read:I,destroy:f,_gl:E,_refresh:d,poll:function(){b(),x&&x.update()},now:p,stats:w});return m.onDone(null,M),M};

},{"./lib/attribute":437,"./lib/buffer":438,"./lib/core":443,"./lib/dynamic":444,"./lib/elements":445,"./lib/extension":446,"./lib/framebuffer":447,"./lib/limits":448,"./lib/read":449,"./lib/renderbuffer":450,"./lib/shader":451,"./lib/stats":452,"./lib/strings":453,"./lib/texture":454,"./lib/timer":455,"./lib/util/check":456,"./lib/util/clock":457,"./lib/util/extend":459,"./lib/util/raf":466,"./lib/vao":469,"./lib/webgl":470}]},{},[29])(29)
});